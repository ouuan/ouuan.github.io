<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>NIO9102 落雨大 - ouuan的博客</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="ouuan" /><meta name="description" content=" 我也来到 NOI 了，呢。
" /><meta name="keywords" content="ouuan, blog, OI" />


<meta name="baidu-site-verification" content="zW0oque8IK" />
<meta name="google-site-verification" content="HAIwoMdm1A6XQ6Fp6KwAO7gpL5UKk5TOzvs9DuacYFI" />


<meta name="generator" content="Hugo 0.80.0 with theme even" />


<link rel="canonical" href="https://ouuan.github.io/post/nio9102-%E8%90%BD%E9%9B%A8%E5%A4%A7/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<link href="/sass/main.min.299b56866ca7e5e86584d6353e1e1a12be9d049f05d134ced7e689b415569dc5.css" rel="stylesheet">





<meta property="og:title" content="NIO9102 落雨大" />
<meta property="og:description" content="
我也来到 NOI 了，呢。
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ouuan.github.io/post/nio9102-%E8%90%BD%E9%9B%A8%E5%A4%A7/" />
<meta property="article:published_time" content="2019-07-15T09:48:38+08:00" />
<meta property="article:modified_time" content="2020-02-12T13:00:08+08:00" />
<meta itemprop="name" content="NIO9102 落雨大">
<meta itemprop="description" content="
我也来到 NOI 了，呢。
">
<meta itemprop="datePublished" content="2019-07-15T09:48:38+08:00" />
<meta itemprop="dateModified" content="2020-02-12T13:00:08+08:00" />
<meta itemprop="wordCount" content="5277">



<meta itemprop="keywords" content="CCF系列赛事," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="NIO9102 落雨大"/>
<meta name="twitter:description" content="
我也来到 NOI 了，呢。
"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">ouuan的博客</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">主页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">分类</li>
      </a><a href="/neuron-notes/">
        <li class="mobile-menu-item">笔记</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于</li>
      </a><a href="/ranking/">
        <li class="mobile-menu-item">排行</li>
      </a><a href="/search/">
        <li class="mobile-menu-item">搜索</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">ouuan的博客</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">主页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">标签</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">分类</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/neuron-notes/">笔记</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">关于</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ranking/">排行</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/search/">搜索</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">NIO9102 落雨大</h1>

      <div class="post-meta">
        <span class="post-time" title="2019-07-15 09:48:38 &#43;0800 &#43;0800"> 2019-07-15 </span>
        <div class="post-category">
            <a href="/categories/%E6%B8%B8%E8%AE%B0/"> 游记 </a>
            </div>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次阅读 </span>
      </div>
    </header>

    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#day-499122177">Day 499122177</a></li>
        <li><a href="#day-557219762">Day 557219762</a></li>
        <li><a href="#day-1">Day 1</a></li>
        <li><a href="#day-116195171">Day 116195171</a></li>
        <li><a href="#day-2">Day 2</a></li>
        <li><a href="#day-232390342">Day 232390342</a></li>
        <li><a href="#day-4">Day 4</a></li>
        <li><a href="#题解">题解</a>
          <ul>
            <li><a href="#d1t1httpslojacproblem3156"><a href="https://loj.ac/problem/3156">D1T1</a></a></li>
            <li><a href="#d1t3httpslojacproblem3158"><a href="https://loj.ac/problem/3158">D1T3</a></a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
  <div class="post-outdated">
    <div class="hint">
      <p>【注意】最后更新于 <span class="timeago" datetime="2020-02-12T13:00:08" title="February 12, 2020">February 12, 2020</span>，文中内容可能已过时，请谨慎使用。</p>
    </div>
  </div>
    <div class="post-content">
      <blockquote>
<p>我也来到 NOI 了，呢。</p>
</blockquote>
<p style="text-align: center"><font color="red" size=5em><strong>郑重声明</strong></font></p><p style="text-indent: 2em">本博客内所有与 NOI2019（第 36 届全国青少年信息学奥林匹克竞赛）试题相关之内容，均在对应之机试与复评结束之后发布，详细发布时间与内容可以在 <a href="https://github.com/ouuan/ouuan.github.io/commits/hexo-archive/NIO9102-%E8%90%BD%E9%9B%A8%E5%A4%A7">commits</a> 中查看。</p>
<h2 id="day-499122177">Day 499122177</h2>
<p>广二宿舍还是没有网.</p>
<p>床边的插座不是一般人能插的..（Orz lbw 插上去了）然而因为有时候要去机房（其实基本上也就刚到那天晚上没事去了..），所以后来还是拔下来了。然后发现不带 220V 转 USB 母头的插头真是个错误的决定..虽然可以用笔记本充电，可如果在寝室门口充电就没法用电脑，所以没法一会儿充电脑用手机、一会儿充手机用电脑。</p>
<p>晚餐有点抽卡的感觉..看名字很难看出拿到手上的到底是什么东西（</p>
<p>吃完晚饭去自习室水了半小时群，然后打短裙 OJ。</p>
<p>切完前两题，好像 rk 5..</p>
<p>然后看 C，问满足一堆条件的个数..一眼容斥..然后真的写了 1h 的容斥 qaq</p>
<p>好不容易过拍了，提交，又 WA 了..</p>
<p>在群里一问，woc，p 不是排列&hellip;</p>
<p>5 min 后过了，愉快地垫底了..</p>
<p>过于自闭，看了眼 D，没秒掉，就懒得去想了。</p>
<p>赛后听说 C 可以状压，一想，真的可以状压&hellip;..学傻了.webp</p>
<h2 id="day-557219762">Day 557219762</h2>
<p>咕掉早饭把火车上剩的吃了。</p>
<p>（开幕式竟然没有 wh 讲话）</p>
<p>（<del>灯光打得好！覆盖方位广！给灯光师点个赞！</del>）</p>
<p>果然有<del>公开处刑</del>大头照展示，只不过速度比较快，问题不大。</p>
<p>感觉大家喊的口号都听不太清啊..</p>
<p><del>明 示 爆 零 ：</del></p>
<p><img src="/post_img/NIO9102-%E8%90%BD%E9%9B%A8%E5%A4%A7/zero0.jpg" alt="zero0"></p>
<p><img src="/post_img/NIO9102-%E8%90%BD%E9%9B%A8%E5%A4%A7/zero1.jpg" alt="zero1"></p>
<p>dzd 的讲话中，有这么一段话：</p>
<blockquote>
<p>无论何种情况，这个竞赛都会继续下去。因为这个竞赛是正当的，是正义的，合法的。</p>
</blockquote>
<p>听到这段话，又想起 ひなた 在桥边含泪喊出的那段话了：</p>
<blockquote>
<p>但是，我没有后悔，不能后悔，因为，我所做的事情一定没有错！</p>
</blockquote>
<p>NOI 可能真的如 dzd 所说，带有一些“净化灵魂”的成分在吧。</p>
<p>最后<del>鸽子蛋</del>破不开，<del>明示摆脱不了爆零的命运</del>。</p>
<p>（离场后目击 dzd 被采访）</p>
<p>中餐感觉海星..还是得看看别人买到的是什么再选。（千万不要用排除法来选</p>
<p>中午写了写博客，<a href="https://github.com/ouuan/Despised/" target="_blank">做了遍笔试</a>，睡了会儿觉。</p>
<p>还是感觉好方..毕竟被鄙视用的错误选项从来没变过（</p>
<p>结果笔试挺水的..题目和题库里完全一样（没有之前在 vfk 博客里看见的“那道题不选 foobar.sh”之类的情况），很多题都不是四个选项而是更少，所以没有任何奇怪的错误选项..</p>
<h2 id="day-1">Day 1</h2>
<p>看到 T1 就很快想出了 70 分的拆点做法，写完之后几乎一遍过了大样例。</p>
<p>然后去把 T2 和 T3 的 20 + 28 写了，此时 $1.5h​$ 左右。</p>
<p>然后去写 T1 $A=0$ 的部分分，各种写挂写了接近 $2h$..</p>
<p>然后感觉 T2 还是没什么想法，T3 想了几个假贪心，又想了几个假网络流，最后还剩半小时的时候想到了一个考后才叉掉的 $n^3\log$ 的假贪心（讲题时发现稍微改动一下就是正确的 40 分做法..），<del>幸好</del>没写完，不然万一过了样例就 GG 了。</p>
<p>出来之后发现大家都 $148​$ 起步..T1 有正解的，但还有一堆利用数据范围改小的，以及一堆 $70​$ 分算错复杂度的。</p>
<p>T1 我写的数据分治是不可能 $85​$ 以上的，所以特别怕 $70​$ 分做法最后 $90​$ 或者 $95​$。</p>
<p>然后下午一看，我自己倒是没挂分，$85+20+28=133​$，可其它和我写一样东西的都是 $100+20+40​$..</p>
<p>T1 数据范围不知道是不是为了防止爆 int 而改小就算了，复杂度完全错误的 $70​$ 分做法竟然直接 A 了..就很自闭。T3 其他人的 $n^4​$ 常数比我小一截，我也不好说什么..只不过那些“数据有梯度”的出题人凭什么不多给几档部分分啊？</p>
<p>感觉还是赛制问题啊..没有 Subtask 并且现场评测的 OI 赛制出题人也很无奈吧..</p>
<p>把 NOI 嘉年华咕了（玩一些体育运动之类的游戏得奖品什么的），回寝室躺了一会儿，又看了一遍 <a href="https://blog.csdn.net/VFleaKing/article/details/90384225" target="_blank">四色的NOI</a>，感觉自己的心境和 vfk Cu 那年挺像的..只不过就算把 vfk Fe 那年去掉，我也比 vfk 少一年啊..</p>
<p>讲题的话..放一张 T2 讲题的图吧：</p>
<p><img src="/post_img/NIO9102-%E8%90%BD%E9%9B%A8%E5%A4%A7/d1t2.jpg" alt="d1t2"></p>
<h2 id="day-116195171">Day 116195171</h2>
<p>今天是社会活动日。</p>
<p>听说真的有人没去..不知道会不会扣分。</p>
<p><del>坐 D7 的被奶了：</del></p>
<p><img src="/post_img/NIO9102-%E8%90%BD%E9%9B%A8%E5%A4%A7/d7700.jpg" alt="d7700"></p>
<p>在博物馆先打了把四人南，然后去随便逛了半个小时。</p>
<p>暗示 route 数据水：</p>
<p><img src="/post_img/NIO9102-%E8%90%BD%E9%9B%A8%E5%A4%A7/routesea.jpg" alt="routesea"></p>
<p>暗示 Day 2 Au 线 30 Ag 线 20：</p>
<p><img src="/post_img/NIO9102-%E8%90%BD%E9%9B%A8%E5%A4%A7/auag.jpg" alt="auag"></p>
<p><del>假毛</del>，<del>请大家自行脑补假毛在风中打转的样子</del>。</p>
<p><img src="/post_img/NIO9102-%E8%90%BD%E9%9B%A8%E5%A4%A7/wuliang.jpg" alt="wuliang"></p>
<p>晚上是 zzq 和象的见面会，感觉还是象比较励志，其它三名国家队都是小学开始学的..刷题量好像非常恐怖，而“好好打模拟赛”对我来说几乎不需要解释..我知道平时我是怎样在打模拟赛的，“这个知识点还没学”，“这题没意思”，“题解看不懂”，“这题太简单了，只是考场 sb 了而已，懒得写”，“我先按我的计划补知识点，模拟赛不重要”，最后一题都没有改。这样的话我又在渴求什么呢。</p>
<blockquote>
<p>以为自己很努力了，但是不知为何还是系统告诉我：Mission Failed. Play Again.</p>
<p>不知道原因。</p>
<p>张着嘴巴我可以说出一堆：经验少啦，在弱省啦，题做得少啦，数学太弱啦……</p>
<p>但是这是不是真正的原因？怎样解决？</p>
<p>天地无言。</p>
<p>—— vfk《四色的NOI》</p>
</blockquote>
<p>可我甚至不能“以为自己很努力了”。</p>
<h2 id="day-2">Day 2</h2>
<p>今天的纸质题面考前是正面朝上的。</p>
<p>果然有交互，还依然是 I 君。</p>
<p>等等，T2 斗主地？</p>
<p>等等，T1 128MB？简洁数据结构.pdf</p>
<p>开始考试，T1，线段树优化连边？爆空间。88 可能能卡过？感觉很难卡，还得数据分治，写了不到 5min 就放弃了，去写了 72 分。</p>
<p>T2，dp 算洗牌前是 $i​$ 洗牌后是 $j​$ 的概率，第四个点矩阵快速幂，很快就写完了，一遍过样例。这个时候两小时多一点。</p>
<p>考前就想着靠交互翻盘了，还剩接近 3h 肝交互，感觉海星。</p>
<p>这个数据范围好像不太统一啊..既然强制数据分治的话不如会一档写一档好了。</p>
<p>先把 $\mathcal O(n^2)$ 次询问的写了，一开始还写错了，写成了 $n$ 次修改，差点挂掉 $8$ 分。</p>
<p>然后想了一会儿想到了性质 $A$ 一个期望 $\log$ 的做法。写完 + 调完之后 3h 多一点。</p>
<p>然后开始想 T3 各种各样的部分分，乱搞了 2h 一无所获。</p>
<p>出来之后发现大家 T1 都会 K-D Tree，又听说 T2 结论题可以打表..感觉 Ag 基本上没了啊。</p>
<p><del>我博客用模 998244353 的等比数列，是不是暗示 T2 模 998244353 等差数列，会被禁赛啊。</del></p>
<p>下午看成绩，$72+30+36=138$，发现 T2 30，原因是 a 数组开小了&hellip;只不过不挂分应该也是 Cu，<del>问题不大</del>。</p>
<p><del>讲题的时候松松松把 NOI 弄成了鸭子营。</del></p>
<p>T2 出题人表示：不止要让训练有素的选手进队，也要让那些能够发现题目性质的选手进队。感觉要是不能打表的话这样的想法也挺有道理的..</p>
<p>出排名，果然 <font color = "#B87333">Cu</font> 了。</p>
<p>HB 只有 jxl 和 lwc Ag。只不过两个 E 都上了 Ag 分数线。</p>
<p>zyy 捧杯了，zzy rk2，zzq rk3，_rqy rk4，jumpmelon rk6，myh rk7，zhf rk19。</p>
<p>看到熟悉的名字进集训队的感觉真的很奇妙。</p>
<p>晚上去高校宣讲看热闹。</p>
<p>清华那位老师的气质真的就完全不一样（之前 THUWC 和 THUSC 的时候就体会地非常明显了），有条不紊地讲出硬核的优点（而不是那些花里胡哨的东西）（也没有一种”我是来完成任务“的感觉）（也不会说“那我今天就用这个 PPT 来讲一下”“那我就不用 PPT 了”这样的话），感觉讲了非常多，最后正好卡时讲完了（其它学校都感觉没讲啥就匆匆忙忙结束了）（<del>只不过这也可能是学校实力原因</del>）。（顺带一提，THU 没用 PPT）</p>
<p>北大：我准备了一个 PPT，发邮件的时候挂了，今天我把 PPT 带过来了，我是干讲还是用 PPT，你们觉得怎么样比较好？</p>
<p>主持人：抱歉，请遵守规则口头讲。</p>
<p>北大：我觉得准备这么一个 PPT 不给大家看实在是对不起大家。</p>
<p>（说着就打开了 PPT）</p>
<p>？？？</p>
<p>天津大学很快就讲完了，然后说“不用打铃了”，很多人鼓掌..感觉 THU 那样打铃的同时有条不紊地结束才比较帅啊（</p>
<p>感觉武大也讲的海星，也是真的在讲而不是完成任务，感觉比较自然。</p>
<p>华东师范大学：男生们可以和很多文科的女生交流。女生们也不要担心，因为你们也可以和很多文科的女生交流。emm&hellip;</p>
<p>排在最后的三个学校直接咕了&hellip;</p>
<p><del>只不过我一个 Cu 凭什么评价高校宣讲啊。</del></p>
<p>“我也是有约的人了！”「两年 OI 换一纸签约」—— 一名拿到人大一等约的我省高二选手。</p>
<p>好像还有面试到晚上十二点，最后拿到“替补二等约”的选手..</p>
<p>看到身边的人退役更是一种说不出的感觉。</p>
<h2 id="day-232390342">Day 232390342</h2>
<p>早上咕掉嘉年华，去机房把 D1T1 写了，然后试图学习 k-d tree。</p>
<p>感觉资料还是太少了，也不知道网上那些复杂度是不是对的..</p>
<p>下午闭幕式。大家该 <font color = "gold">Au</font> 的 <font color = "gold">Au</font>，该捧<font color = "gold">杯</font>的捧<font color = "gold">杯</font>，<del>该扫射的灯光师继续扫射</del>。</p>
<p>结束之后真的落雨大了..下了一个多小时的大雨，<del>选手袜子没了</del>。</p>
<p><img src="/post_img/NIO9102-%E8%90%BD%E9%9B%A8%E5%A4%A7/pb.jpg" alt="pb"></p>
<p><img src="/post_img/NIO9102-%E8%90%BD%E9%9B%A8%E5%A4%A7/Cu.jpg" alt="Cu"></p>
<p>我双色 NOI 的第一色，是<font color = "#B87333">古铜色</font>的。</p>
<h2 id="day-4">Day 4</h2>
<p>本来不想写 Day 4 的，但广州南的便利店竟然没有泡面，<del>必须得吐槽一下</del>。</p>
<p>G1114 竟然没有插座，<del>更得吐槽了</del>。</p>
<p>那么，长沙一中再会。</p>
<h2 id="题解">题解</h2>
<p><del>估计会比较咕</del></p>
<h3 id="d1t1httpslojacproblem3156"><a href="https://loj.ac/problem/3156" target="_blank">D1T1</a></h3>
<p>“去年 D1T1 最短路，今年也是呢”选手自闭了。</p>
<p>出考场听说斜率优化，以为是斜率优化预处理等待时间的连边然后跑最短路。</p>
<p>看了题解才知道原来这题根本不用最短路，连 DAG 最短路都不用..</p>
<p>把边按结束时间（$q_i$）排序，令 $f_i$ 表示走完第 $i$ 条边后还需要的烦躁值的最小值。</p>
<p>$\begin{aligned}f_i&amp;=\min\limits_{p_j\ge q_i,x_j=y_i}\{A(p_j-q_i)^2+B(p_j-q_i)+C+q_j-q_i+f_j\}\\&amp;=\min\limits_{p_j\ge q_i,x_j=y_i}\{Ap_j^2+Bp_j+q_j+f_j-2Ap_jq_i\}+Aq_i^2-Bq_i+C-q_i\end{aligned}​$</p>
<p>然后就可以斜率优化了。（因为转移有 $x_j=y_i$ 的限制，要开 $n$ 个双端队列，但<strong>不要开 deque</strong>，开大量 deque 是会 MLE 的。写法的话，用 vector 存，普通方法写就好了。）</p>
<details class="admonition note"><summary class="admonition-title">参考代码</summary>
<p>按理来说题解里不应该包含模板，只不过这也不是什么官方题解，我就懒得换成正常写法了。</p>
<pre><code class="language-cpp">#ifndef OUUAN
#pragma GCC optimize(&quot;Ofast,no-stack-protector,unroll-loops,fast-math&quot;)
#endif
#include&lt;bits/stdc++.h&gt;

#define int LoveLive
//#define FAST_IOSTREAM 1

#define For(i,l,r)for(int i=(l),i##end=(r);i&lt;=i##end;++i)
#define FOR(i,r,l)for(int i=(r),i##end=(l);i&gt;=i##end;--i)
#define SON(i,u)for(int i=head[u];i;i=nxt[i])
#define ms(a,x)memset(a,x,sizeof(a))
#define fi first
#define se second
#define pq priority_queue
#define pb emplace_back
#define isinf(x)(x&gt;=INF?-1:x)
#define DEBUG(x)cerr&lt;&lt;(#x)&lt;&lt;&quot;:&quot;&lt;&lt;x&lt;&lt;endl
using namespace std;typedef long long LoveLive;typedef pair&lt;int,int&gt;pii;typedef vector&lt;int&gt;vi;
#ifdef int
const int INF=0x3f3f3f3f3f3f3f3fll;
#else
const int INF=0x3f3f3f3f;
#endif
const double eps=1e-9;mt19937 rng(chrono::steady_clock::now().time_since_epoch().count());int randint
(int l,int r){return(int)rng()%(r-l+1)+l;}
#ifdef FAST_IOSTREAM
#define br cout&lt;&lt;'\n'
#define sp cout&lt;&lt;' '
long long read(){long long x;cin&gt;&gt;x;return x;}template&lt;typename T&gt;void read(T&amp;x){cin&gt;&gt;x;}template&lt;typename
T&gt;void write(const T&amp;x){cout&lt;&lt;x;}
#else
#define br putchar('\n')
#define sp putchar(' ')
template&lt;typename T&gt;typename enable_if&lt;!is_integral&lt;T&gt;::value,void&gt;::type read(T&amp;x){cin&gt;&gt;x;}long long
read(){char c;long long out=0,f=1;for(c=getchar();!isdigit(c)&amp;&amp;c!='-';c=getchar());if(c=='-'){f=-1;c
=getchar();}for(;isdigit(c);c=getchar())out=(out&lt;&lt;3)+(out&lt;&lt;1)+c-'0';return out*f;}template&lt;typename T
&gt;typename enable_if&lt;is_integral&lt;T&gt;::value,T&gt;::type read(T&amp;x){char c;T f=1;x=0;for(c=getchar();!isdigit
(c)&amp;&amp;c!='-';c=getchar());if(c=='-'){f=-1;c=getchar();}for(;isdigit(c);c=getchar())x=(x&lt;&lt;3)+(x&lt;&lt;1)+c-'0';
return x*=f;}char read(char&amp;x){for(x=getchar();isspace(x);x=getchar());return x;}double read(double
&amp;x){scanf(&quot;%lf&quot;,&amp;x);return x;}void read(char*x){scanf(&quot;%s&quot;,x);}template&lt;typename T&gt;typename enable_if
&lt;!is_integral&lt;T&gt;::value,void&gt;::type write(const T&amp;x){cout&lt;&lt;x;}template&lt;typename T&gt;typename enable_if&lt;
is_integral&lt;T&gt;::value,void&gt;::type write(const T&amp;x){if(x&lt;0){putchar('-');write(-x);return;}if(x&gt;9)write
(x/10);putchar(x%10+'0');}void write(const char&amp;x){putchar(x);}void write(const double&amp;x){printf(&quot;%.10lf&quot;
,x);}void write(const char*x){printf(&quot;%s&quot;,x);}
#endif
template&lt;typename T,typename...Args&gt;void read(T&amp;x,Args&amp;...args){read(x);read(args...);}template&lt;typename
...Args&gt;void read(char*x,Args&amp;...args){read(x);read(args...);}template&lt;typename OutputIt,typename=typename
enable_if&lt;is_same&lt;output_iterator_tag,typename iterator_traits&lt;OutputIt&gt;::iterator_category&gt;::value ||(
is_base_of&lt;forward_iterator_tag,typename iterator_traits&lt;OutputIt&gt;::iterator_category&gt;::value&amp;&amp;!is_const
&lt;OutputIt&gt;::value)&gt;::type&gt;void read(OutputIt __first,OutputIt __last){for(;__first!=__last;++__first)
read(*__first);}template&lt;typename InputIt,typename=typename enable_if&lt;is_base_of&lt;input_iterator_tag,typename
iterator_traits&lt;InputIt&gt;::iterator_category&gt;::value&gt;::type&gt;void wts(InputIt __first,InputIt __last){
for(;__first!=__last;++__first){write(*__first);sp;}}template&lt;typename InputIt,typename=typename enable_if
&lt;is_base_of&lt;input_iterator_tag,typename iterator_traits&lt;InputIt&gt;::iterator_category&gt;::value&gt;::type&gt;void
wtb(InputIt __first,InputIt __last){for(;__first!=__last;++__first){write(*__first);br;}}void wts(const
char*x){write(x);sp;}void wtb(const char*x){write(x);br;}void wte(const char*x){write(x);exit(0);}template
&lt;typename T&gt;void wts(const T&amp;x){write(x);sp;}template&lt;typename T&gt;void wtb(const T&amp;x){write(x);br;}template
&lt;typename T&gt;void wte(const T&amp;x){write(x);exit(0);}template&lt;typename...Args&gt;void wts(const char*x,Args
...args){wts(x);wts(args...);}template&lt;typename...Args&gt;void wtb(const char*x,Args...args){wts(x);wtb(
args...);}template&lt;typename...Args&gt;void wte(const char*x,Args...args){wts(x);wte(args...);}template&lt;typename
T,typename...Args&gt;void wts(const T&amp;x,Args...args){wts(x);wts(args...);}template&lt;typename T,typename...
Args&gt;void wtb(const T&amp;x,Args...args){wts(x);wtb(args...);}template&lt;typename T,typename...Args&gt;void wte
(const T&amp;x,Args...args){wts(x);wte(args...);}template&lt;typename T&gt;inline bool up(T&amp;x,const T&amp;y){return
x&lt;y?x=y,1:0;}template&lt;typename T&gt;inline bool dn(T&amp;x,const T&amp;y){return y&lt;x?x=y,1:0;}

const int N = 100010;
const int M = 200010;

int n, m, a, b, c, id[M];

struct Edge
{
	int u, v, p, q, f;
	bool operator&lt;(const Edge &amp; b) const
	{
		return q &gt; b.q;
	}
} e[M];

struct Point
{
	int x, y;
	Point(int j = 0): x(2 * a * e[j].p), y(a * e[j].p * e[j].p + b * e[j].p + e[j].q + e[j].f) {}
	friend bool cmp(const Point &amp; a1, const Point &amp; a2, const Point &amp; a3)
	{
		if (a1.x == a2.x) return a1.y &lt; a2.y;
		return (a1.y - a3.y) * (a2.x - a3.x) &gt;= (a2.y - a3.y) * (a1.x - a3.x);
	}
	int cal(int k) const { return y - k * x; }
};

struct Deque
{
	vector&lt;Point&gt; q;
	int ql, qr;
	Deque()
	{
		q.resize(1);
		ql = 1;
		qr = 0;
	}
	bool empty() const { return ql &gt; qr; }
	void push_back(const Point &amp; x)
	{
		++qr;
		if (q.size() == qr) q.push_back(x);
		else q[qr] = x;
	}
	void cal(int i)
	{
		while (ql &lt; qr &amp;&amp; q[ql + 1].cal(e[i].q) &lt;= q[ql].cal(e[i].q)) ++ql;
		e[i].f = q[ql].cal(e[i].q) + a * e[i].q * e[i].q - b * e[i].q + c - e[i].q;
	}
	void insert(const Point &amp; x)
	{
		while (ql &lt; qr &amp;&amp; cmp(x, q[qr], q[qr - 1])) --qr;
		push_back(x);
	}
} q[N];

signed main()
{
#ifdef FAST_IOSTREAM
	cin.sync_with_stdio(false);
	cin.tie(0);
#endif
	
	read(n, m, a, b, c);
	
	For (i, 1, m) read(e[i].u, e[i].v, e[i].p, e[i].q);
	++m;
	e[m].u = 0;
	e[m].v = 1;
	e[m].p = 0;
	e[m].q = 0;
	sort(e + 1, e + m + 1);
	
	For (i, 1, m) id[i] = i;
	sort(id + 1, id + m + 1, [](int x, int y) { return e[x].p &gt; e[y].p; });
	int idp = 1;
	
	For (i, 1, m)
	{
		if (e[i].v == n)
		{
			e[i].f = 0;
			continue;
		}
		while (idp &lt;= m &amp;&amp; e[id[idp]].p &gt;= e[i].q)
		{
			if (e[id[idp]].f &lt; INF) q[e[id[idp]].u].insert(Point(id[idp]));
			++idp;
		}
		if (q[e[i].v].empty())
		{
			e[i].f = INF;
			continue;
		}
		q[e[i].v].cal(i);
	}
	
	For (i, 1, m) if (e[i].u == 0) wte(e[i].f);
	
	return 0;
}
</code></pre>
</details>
<h3 id="d1t3httpslojacproblem3158"><a href="https://loj.ac/problem/3158" target="_blank">D1T3</a></h3>
<p>其实可以模拟费用流，但如果你写一篇模拟费用流的题解，会发现那是一篇费用流建图的题解和一篇贪心题解拼起来。所以下面是一篇纯贪心题解。</p>
<p>我们要从两个序列中各选 $k$ 个下标，考虑每一步（选择一组下标）：</p>
<ul>
<li>如果还允许选两个不一样的下标，那就从剩下还没选的数里选最大的 $a$ 和最大的 $b$。</li>
<li>如果无法选择不一样的下标了，那么有三种选择：
<ol>
<li>选择一组 $a_i+b_i$（即 $a$, $b$ 下标相同）</li>
<li>$a_i$ 被选了，$b_i$ 没有被选，那么把 $a_i$ 与 $b_i$ 匹配，再给 $a_i$ 原来匹配的那个 $b_j$ 找到一个剩下的里面最大的 $a_k$，然后把 $b_j$ 和 $a_k$ 匹配。</li>
<li>把第二条的 $a$ 和 $b$ 互换。</li>
</ol>
</li>
</ul>
<p>那么，维护剩下的最大的 $a$，剩下的最大的 $b$，剩下的最大的 $a+b$，$a_i$ 已匹配的最大的 $b_i$，$b_i$ 已匹配的最大的 $a_i$，剩余可选择的不一样下标个数，每个数匹配的数，就可以完成这个贪心了。</p>
<p>前三个最大值排序即可，后两个最大值使用堆维护。细节有些多，写的时候注意每一步都确保每个量正确更新了。尤其需要注意的是“剩余可选择的不一样下标个数”的更新。</p>
<details class="admonition note"><summary class="admonition-title">参考代码</summary>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cctype&gt;
#include &lt;queue&gt;
#include &lt;cstring&gt;
#include &lt;algorithm&gt;

using namespace std;

int read()
{
    int out = 0;
    char c;
    while (!isdigit(c = getchar()));
    for (; isdigit(c); c = getchar()) out = out * 10 + c - '0';
    return out;
}

typedef pair&lt;int, int&gt; pii;

const int N = 200010;
const int INF = 1e9;

int T, n, k, dif, a[N], b[N], ida[N], idb[N], idab[N], pa, pb, pab, fa[N], fb[N]; // dif 是剩余可选择的不一样下标个数，id 是用来排序的，pa，pb，pab 记录用到了第几个值（即当前最大值是 a[pa] 之类的），fa，fb 分别记录 a_i 和 b_i 匹配的数的下标
priority_queue&lt;pii&gt; sa, sb, emptypq; // sa 是 b 已匹配的 a，sb 是 a 已匹配的 b，emptypq 是用来多测清空的

void link(int u, int v) // 匹配两个数
{
    --dif;
    fa[u] = v;
    fb[v] = u;
    if (u == v) --dif; // 去重，否则会在下面三行代码里加两次
    if (fb[u]) ++dif;
    else sb.push(pii(b[u], u));
    if (fa[v]) ++dif;
    else sa.push(pii(a[v], v));
}

void cut(int u, int v) // 断开匹配
{
    ++dif;
    if (fb[u]) --dif;
    if (fa[v]) --dif;
    if (u == v) ++dif; // 去重
    fa[u] = fb[v] = 0;
}

pii geta() // 获取当前剩余的最大 a
{
    while (fa[ida[pa]]) ++pa;
    return pii(a[ida[pa]], ida[pa]);
}

pii getb() // 获取当前剩余的最大 b
{
    while (fb[idb[pb]]) ++pb;
    return pii(b[idb[pb]], idb[pb]);
}

pii getab() // 获取当前剩余的最大 a + b
{
    while (pab &lt;= n &amp;&amp; (fa[idab[pab]] || fb[idab[pab]])) ++pab;
    return pii(pab &lt;= n ? a[idab[pab]] + b[idab[pab]] : -INF, idab[pab]);
}

pii getsa() // 获取 b 已选的最大 a
{
    while (!sa.empty() &amp;&amp; fa[sa.top().second]) sa.pop();
    return sa.empty() ? pii(-INF, 0) : sa.top();
}

pii getsb() // 获取 a 已选的最大 b
{
    while (!sb.empty() &amp;&amp; fb[sb.top().second]) sb.pop();
    return sb.empty() ? pii(-INF, 0) : sb.top();
}

int main()
{
    T = read();

    while (T--)
    {
        pa = pb = pab = 1;
        sa = sb = emptypq;
        memset(fa, 0, sizeof(fa));
        memset(fb, 0, sizeof(fb));

        n = read();
        k = read();
        dif = k - read();
        for (int i = 1; i &lt;= n; ++i) a[i] = read();
        for (int i = 1; i &lt;= n; ++i) b[i] = read();

        for (int i = 1; i &lt;= n; ++i) ida[i] = idb[i] = idab[i] = i;
        sort(ida + 1, ida + n + 1, [](int x, int y){return a[x] &gt; a[y];});
        sort(idb + 1, idb + n + 1, [](int x, int y){return b[x] &gt; b[y];});
        sort(idab + 1, idab + n + 1, [](int x, int y){return a[x] + b[x] &gt; a[y] + b[y];});

        while (k--)
        {
            if (dif) link(geta().second, getb().second);
            else
            {
                pii nab = getab();
                pii na_a = getsa();
                pii na_b = getb();
                pii nb_a = geta();
                pii nb_b = getsb();
                if (nab.first &gt;= na_a.first + na_b.first &amp;&amp; nab.first &gt;= nb_a.first + nb_b.first) link(nab.second, nab.second);
                else if (na_a.first + na_b.first &gt;= nb_a.first + nb_b.first)
                {
                    int t = fb[na_a.second];
                    cut(t, na_a.second);
                    link(t, na_b.second);
                    link(na_a.second, na_a.second);
                }
                else
                {
                    int t = fa[nb_b.second];
                    cut(nb_b.second, t);
                    link(nb_a.second, t);
                    link(nb_b.second, nb_b.second);
                }
            }
        }

        long long ans = 0;
        for (int i = 1; i &lt;= n; ++i) ans += (fa[i] ? a[i] : 0) + (fb[i] ? b[i] : 0);
        printf(&quot;%lld\n&quot;, ans);
    }

    return 0;
}
</code></pre>
</details>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">ouuan</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        <span title="2020-02-12 13:00:08 &#43;0800 &#43;0800">2020-02-12</span>
        <a href="https://github.com/ouuan/hugo-blog/commit/cb3ca976cb5597222ac9844b88bc012fc32c2e53" title="fix(NIO9102 落雨大): fix history link" target="_blank">(cb3ca97)</a>
        ，<a href="https://github.com/ouuan/hugo-blog/commits/master/content/post/NIO9102-%e8%90%bd%e9%9b%a8%e5%a4%a7.md" target="_blank">更新历史</a>
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" target="_blank">CC BY-SA 4.0</a></span>
  </p>
</div>
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">赞赏支持</label>
  <div class="qr-code">
    
    <label class="qr-code-image" for="reward">
        <img class="image" src="/wechat-donate.jpg">
        <span>微信打赏</span>
      </label>
    
  </div>
</div><footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/ccf%E7%B3%BB%E5%88%97%E8%B5%9B%E4%BA%8B/">CCF系列赛事</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/bzoj1758-wc2010-%E9%87%8D%E5%BB%BA%E8%AE%A1%E5%88%92%E4%BA%8C%E5%88%86%E7%AD%94%E6%A1%88%E9%95%BF%E9%93%BE%E5%89%96%E5%88%86/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">BZOJ1758 [WC2010]重建计划（二分答案，长链剖分）</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/c-11-enable-if-%E7%9A%84%E4%BD%BF%E7%94%A8/">
            <span class="next-text nav-default">C&#43;&#43;11 enable_if 的使用</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  
  <div class="comments">
    <div class="loading post">
      <img src="/img/spinner.svg">
      <p class="post-content">
        评论正在加载中...如果评论较长时间无法加载，你可以
        <a href='https://github.com/ouuan/blog-comments/issues?q=is%3Aissue+is%3Aopen+"NIO9102%20%e8%90%bd%e9%9b%a8%e5%a4%a7 - ouuan%e7%9a%84%e5%8d%9a%e5%ae%a2"' target="_blank">搜索对应的 issue</a>
        或者
        <a href="https://github.com/ouuan/blog-comments/issues/new?title=NIO9102%20%e8%90%bd%e9%9b%a8%e5%a4%a7 - ouuan%e7%9a%84%e5%8d%9a%e5%ae%a2" target="_blank">新建一个 issue</a>
        。
      </p>
    </div>
    <script src="https://utteranc.es/client.js"
            repo="ouuan/blog-comments"
            issue-term="title"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
    <noscript>请启用 JavaScript 来查看评论。</a></noscript>
  </div>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:ouuansteve@gmail.com" class="iconfont icon-email" title="email" target="_blank"></a>
      <a href="https://github.com/ouuan" class="iconfont icon-github" title="github" target="_blank"></a>
      <a href="https://space.bilibili.com/11067182" class="iconfont icon-bilibili" title="bilibili" target="_blank"></a>
      <a href="https://twitter.com/ouuan" class="iconfont icon-twitter" title="twitter" target="_blank"></a>
  <a href="https://ouuan.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io" target="_blank">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/ouuan/hugo-theme-even" target="_blank">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> 本站总访问量 <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次 </span>
      <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> 本站总访客数 <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 人 </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2018 - 
    2021
    <span class="heart">
      <a class="iconfont icon-github" title="source code" href="https://github.com/ouuan/hugo-blog" target="_blank"></a>
    </span> 
    <span class="author">ouuan</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/highlight.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/highlight.js/styles/tomorrow.min.css" rel="stylesheet"/>
  <script>hljs.configure({tabReplace: '    '});</script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/slideout@1/dist/slideout.min.js" crossorigin="anonymous"></script>



  <script src="https://cdn.jsdelivr.net/npm/timeago.js@3/dist/timeago.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/timeago.js@3/dist/timeago.locales.min.js" crossorigin="anonymous"></script>
  <script><!-- NOTE: timeago.js uses the language code format like "zh_CN" (underscore and case sensitive) -->
    var languageCode = "en".replace(/-/g, '_').replace(/_(.*)/, function ($0, $1) {return $0.replace($1, $1.toUpperCase());});
    timeago().render(document.querySelectorAll('.timeago'), languageCode);
    timeago.cancel();  
  </script>



<script type="text/javascript" src="/js/main.min.959fe0c07c3b2fcb923fb17e40bdcbf406ad5c8b8543391a2abc1728f469d080.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" crossorigin="anonymous"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-157787819-1', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script id="baidu_push">
  (function(){
    if (window.location.hostname === 'localhost') return;
    var bp = document.createElement('script'); bp.async = true;
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
      bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
      bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
  })();
</script>




</body>
</html>
