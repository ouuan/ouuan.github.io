[{"categories":["æŠ€æœ¯"],"contents":"è¯¥åšå®¢çš„å‰èº«æ˜¯è‡ª 2018 å¹´ 12 æœˆæ­å»ºçš„ hexo åšå®¢ï¼Œäº 2020 å¹´ 2 æœˆæ¬è¿è‡³ hugoã€‚\nMotivation è¿™æ¬¡æ¬è¿æœ€ç›´æ¥çš„åŸå› ï¼Œæ˜¯æˆ‘æŠŠ hexo åšå®¢ä» Windows æ¬åˆ° Linux å¤±è´¥äº†..\nä¹‹å‰é­”æ”¹å¤ªå¤šï¼Œä¸»é¢˜é‡Œå„ç§æ–‡ä»¶éƒ½æ”¹è¿‡ï¼Œç”šè‡³ node_modules é‡Œé¢éƒ½è¢«æˆ‘æ”¹è¿‡å¾ˆå¤šåœ°æ–¹ï¼Œä¹‹å‰å› æ­¤éƒ½æ”¾å¼ƒå‡çº§ hexo å’Œ NexT ä¸»é¢˜ï¼Œè€Œæœ€è¿‘å¼€å§‹ä¸»ç”¨ Manjaroï¼Œäºæ˜¯åšå®¢å¿…é¡»å¾—æ¬åˆ° Linux ä¸Šï¼Œä½†æ— è®ºæ˜¯ç®€å•å¤åˆ¶è¿‡æ¥è¿˜æ˜¯é‡æ–°ä½¿ç”¨ npm å®‰è£…åŒ…éƒ½æœªèƒ½å¦‚æ„¿ã€‚\nå…¶å®è¯´ä¸å®šè¿˜æœ‰å¾ˆå¤šè§£å†³æ–¹æ³•ï¼Œä½†æˆ‘ä¹‹å‰å°±å¬è¯´è¿‡ hugoï¼Œäºæ˜¯å°±å†³å®šå¹²è„†æ¬è¿‡æ¥å¥½äº†ã€‚\nä½†ä¸ºä»€ä¹ˆæ˜¯æ¬åˆ° hugoï¼Œè€Œä¸æ˜¯å‡çº§ hexo å‘¢ï¼Ÿ\nä» hugo æœ¬èº«æ¥è¯´ï¼Œå®ƒæœ€æ˜¾è‘—çš„ä¼˜ç‚¹ï¼Œå°±æ˜¯å¿«ï¼š\n å®‰è£…å¿«ã€‚è¿™åœ¨æœ¬åœ°å®‰è£…æ—¶å€’å½±å“ä¸å¤§ï¼Œè€Œä¸”å¦‚æœä½ è¦ä¿®æ”¹ä¸»é¢˜è¿˜å¾—ç”¨ yarn å®‰è£…åŒ…ï¼Œå¾—è£…ä¸Šå‡ åˆ†é’Ÿï¼ˆåªåœ¨æŸäº›ä¸»é¢˜éœ€è¦ï¼Œå¦‚æœæ— éœ€å‹ç¼©/ä½¿ç”¨ hugo è€Œé node è¿›è¡Œå‹ç¼©å°±ä¸éœ€è¦ï¼‰ã€‚æœ€ä¸»è¦çš„æ˜¯ï¼Œå®‰è£…å¿«ä½¿å¾— CI å¿«ï¼Œä½¿ç”¨ CI å‘å¸ƒ hugo åšå®¢å°±ä¼šéå¸¸å®¹æ˜“ä¸”å¿«æ·ã€‚ æ„å»ºå¿«ã€‚hugo æ¯”èµ· hexo çš„æ„å»ºé€Ÿåº¦ä¸æ˜¯å¿«äº†ä¸€ç‚¹ç‚¹ï¼Œhexo éœ€è¦å‡ åç§’æ‰èƒ½æ„å»ºå®Œçš„åšå®¢ï¼Œhugo åªéœ€ä¸åˆ°ä¸€ç§’ã€‚è¿™ç‚¹æ›´åŠ é‡è¦ï¼Œå®ƒä¸ä»…åŠ é€Ÿäº† CIï¼Œè€Œä¸”æœ¬åœ°æ„å»ºå‡ ä¹æ²¡æœ‰å»¶æ—¶ï¼ŒåŠ ä¸Š server é¢„è§ˆä½¿ç”¨ websocketï¼Œç›´æ¥åˆ†å±å½“é¢„è§ˆå†™åšå®¢ä½“éªŒè‰¯å¥½ã€‚  ä½†å¼Šç«¯ä¹ŸåŒæ ·æ˜æ˜¾ï¼šæ²¡æœ‰æ’ä»¶ï¼Œå¯¼è‡´å¾ˆå¤šåŠŸèƒ½å¾—è‡ªå·±å†™ï¼Œæˆ–è€…å¤åˆ¶åˆ«äººçš„ä»£ç ã€‚åªä¸è¿‡å¯¹äº hexo éƒ½èƒ½æ”¹åˆ° node_modules é‡Œé¢çš„é­”æ”¹ç©å®¶æ¥è¯´ï¼Œè¿™éƒ½ä¸ç®—ä»€ä¹ˆï¼ˆ\nåªä¸è¿‡æˆ‘ä¸€ç›´ç”¨çš„æ˜¯ 2018 å¹´ 12 æœˆé‚£æ—¶çš„ hexo å’Œ NexTï¼Œè¿™ä¸€å¹´æ¥ hexo å¯èƒ½ä¹Ÿæœ‰å¾ˆå¤šæ”¹è¿›ï¼Œæ‰€ä»¥æˆ‘çš„æ¯”è¾ƒä¸ä¸€å®šå‡†ç¡®ã€‚\nProcess hugo çš„é…ç½®æ­¥éª¤å°±ä¸è¯´äº†ï¼Œç½‘ä¸Šå¾ˆå¤šæ•™ç¨‹ï¼Œè€Œä¸”è¿™ä¸ªåšå®¢æ˜¯ å¼€æº çš„ï¼Œå¯ä»¥è‡ªå·±çœ‹ã€‚\næœ¬åšå®¢ä½¿ç”¨ GitHub Actions è¿›è¡Œè‡ªåŠ¨å‘å¸ƒï¼Œè¯¦è§ é…ç½®æ–‡ä»¶ã€‚PERSONAL_TOKEN éœ€è¦åœ¨ repo çš„ settings é‡Œè®¾ç½®ï¼Œä½†å¦‚æœæºç å’Œåšå®¢åœ¨åŒä¸€ä¸ª repo é‡Œå°±å¯ä»¥ç›´æ¥ç”¨ GITHUB_TOKEN äº†ã€‚\nä» hexo æ¬åˆ° hugo å¯ä»¥å‚è€ƒè¿™ç¯‡åšå®¢ï¼šHugo ä¸ Hexo çš„å¼‚åŒ | reuixiy ã€‚\næˆ‘è‡ªå·±ä½¿ç”¨çš„è„šæœ¬ï¼ˆfork ç„¶åç¨å¾®æ”¹äº†ä¸€ç‚¹ï¼‰ï¼šouuan/hexo2hugo ã€‚\nhugo è¿˜æ”¯æŒ aliasesï¼Œæ‰€ä»¥é“¾æ¥æ”¹åŠ¨å¯ä»¥è½»æ¾å¤„ç†ã€‚\nå¦‚æœå¯¹æˆ‘åšå®¢çš„é…ç½®æ„Ÿå…´è¶£ï¼Œè¿˜å¯ä»¥å‚è€ƒ config.toml å’Œ even ä¸»é¢˜ çš„å†å²è®°å½•ã€‚\nå‡ ä¸ªå€¼å¾—æé†’çš„åœ°æ–¹ï¼šï¼ˆå¤§çº¦æ˜¯æˆ‘è®¤ä¸ºâ€œå·²ç»å®Œå…¨æå¥½äº†ï¼â€ä¹‹åé‡åˆ°çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯ä½ æŒ‰ç½‘ä¸Šçš„æ•™ç¨‹æå®Œä¹‹åä»ç„¶å®¹æ˜“é‡åˆ°çš„é—®é¢˜ï¼‰\nç«™å†…æœç´¢ å¯ä»¥å‚è€ƒ 1d0901fï¼Œå¦‚æœä¸»é¢˜ä¸æ˜¯ even çš„è¯æˆ‘è¿™ä¸ªåº”è¯¥å°±ä¸å¤ªèƒ½ç›´æ¥ç”¨äº†ï¼Œå¾—æ”¹ä¸€ä¸‹ layout/_default/search.html è¿˜æœ‰ static/js/search.js ä¸­çš„ render å‡½æ•°ã€‚\nä»£ç é«˜äº® æ¨èä½¿ç”¨ highlight.js è€Œä¸æ˜¯ chromaã€‚even ä¸»é¢˜æŠŠ highlight.js çš„ CSS æ”¾åˆ°äº†è‡ªå·±çš„ _code.scss é‡Œï¼Œæ‰€ä»¥å…‰æ˜¯åŠ ä¸Šä¸€ä¸ª highlight.js çš„ CSS æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜å¾—åœ¨ _code.scss é‡ŒæŠŠ hljs ç›¸å…³çš„åˆ æ‰ï¼Œå¦‚æœæ˜¯ dark theme è¿˜å¾—ä¿®æ”¹èƒŒæ™¯é¢œè‰²ã€‚\nä»£ç å¤åˆ¶æŒ‰é’® å¯ä»¥å‚è€ƒ 8347acfã€‚å…¨é æœç´¢å¼•æ“å­¦æ¥çš„ CSS æœç„¶ä¸å¤Ÿ..å°±è¿™ä¹ˆç‚¹ä¸œè¥¿æˆ‘æäº†å››ä¸ªå°æ—¶ï¼Œä¸»è¦æ˜¯æ»šåŠ¨æ¡ã€å­—ä½“å¤§å°ã€è¡Œé«˜ã€padding ä¹‹ç±»æ‚ä¸ƒæ‚å…«çš„é—®é¢˜ã€‚\nGitInfo with Unicode å¦‚æœè·¯å¾„æœ‰ä¸­æ–‡ï¼Œæƒ³ç”¨ GitInfo çš„è¯å°±å¾— git config --global core.quotePath falseï¼Œå‚è§ gohugoio/hugo#3071 ã€‚\nTable Of Content with h1 é»˜è®¤æƒ…å†µä¸‹å³ä¾§ç›®å½•æ˜¯ä» \u0026lt;h2\u0026gt; å¼€å§‹çš„ï¼Œå¦‚æœä½ çš„æ–‡ç« ä¸­å«æœ‰ \u0026lt;h1\u0026gt;ï¼ˆä¹Ÿå°±æ˜¯ Markdown ä¸­çš„å•ä¸ª #ï¼‰ï¼Œç›®å½•å°±ä¼šæŒ‚æ‰ã€‚åœ¨æ–‡ç« ä¸­ä½¿ç”¨ \u0026lt;h1\u0026gt; æ˜¯ ä¸è¢«æ¨è çš„ï¼Œä½†æˆ‘è‡ªå·±ä¸€å¹´å‰å†™çš„ä¸€äº›åšå®¢é‡Œæœ‰ \u0026lt;h1\u0026gt;ï¼Œè™½ç„¶æ‰¹é‡ä¿®æ”¹ä¹Ÿä¸éš¾ï¼Œä½†è¿˜æœ‰ä¸€ç§è§£å†³æ–¹æ¡ˆï¼šåœ¨ config.toml ä¸­åŠ å…¥ï¼š\n[markup.tableOfContents] startLevel = 1 endLevel = 4  è¿™æ ·ä» \u0026lt;h1\u0026gt; åˆ° \u0026lt;h4\u0026gt; éƒ½ä¼šåœ¨ç›®å½•ä¸­æ˜¾ç¤ºã€‚\nHTML in links ä¾‹å¦‚ï¼š[~~qwq~~](/post/from-hexo-to-hugo), [![favicon](/favicon.ico)](/favicon.ico)ã€‚\né»˜è®¤æƒ…å†µä¸‹ä¼šæ¸²æŸ“æˆè¿™æ ·ï¼š\n\u0026lt;del\u0026gt;qwq\u0026lt;/del\u0026gt;\n\u0026lt;img src=\u0026rdquo;/favicon.ico\u0026rdquo; alt=\u0026quot;favicon\u0026rdquo;\u0026gt;\nå¯ä»¥å°† /layouts/_default/_markup/render-link.html è®¾æˆè¿™æ ·ï¼šï¼ˆè¿™ä¸ªæ¿å­è¿˜åŒ…å«äº†å¤–é“¾æ‰“å¼€æ–°æ ‡ç­¾é¡µï¼Œä¸è¢«æ¸²æŸ“æˆ HTML æºç çš„å…³é”®åœ¨äº safeHTMLï¼‰\n\u0026lt;a href=\u0026quot;{{ .Destination | safeURL }}\u0026quot;{{ with .Title}} title=\u0026quot;{{ . }}\u0026quot;{{ end }}{{ if strings.HasPrefix .Destination \u0026quot;http\u0026quot; }} target=\u0026quot;_blank\u0026quot;{{ end }}\u0026gt;{{ safeHTML .Text }}\u0026lt;/a\u0026gt;  ç„¶åå°±å¥½äº†ï¼š\nqwq\n\nBaidu push å¤§å®¶çŸ¥é“ï¼Œç™¾åº¦æ”¶å½•ä¸ªäººåšå®¢æ˜¯å¾ˆæ…¢çš„ã€‚\näºæ˜¯æˆ‘ç”¨äº† é»‘é­”æ³• GitHub Actions æ¯å¤©è‡ªåŠ¨æ¨é€ï¼Œè¯¦è§ é…ç½®æ–‡ä»¶ã€‚ï¼ˆéœ€è¦å…ˆåœ¨ ç™¾åº¦æœç´¢èµ„æºå¹³å° ä¸Šè¿›è¡Œä¸€äº›è®¾ç½®ï¼ŒTOKEN å¯ä»¥åœ¨â€œé“¾æ¥æäº¤â€é¡µé¢æ‰¾åˆ°ã€‚ï¼‰\nComments loading spinner è§ commitã€‚\nIssues å› ä¸ºæ˜¯ç”¨è„šæœ¬æ‰¹é‡æ”¹çš„ï¼Œæ”¹å®Œä¹‹åä¹Ÿæ²¡æœ‰ä¸€ç¯‡ç¯‡å»æ£€æŸ¥ï¼Œéš¾å…ä¼šæœ‰æ”¹é”™çš„åœ°æ–¹ä»¥åŠä¸€äº›æ­»é“¾ï¼Œå¯ä»¥ç›´æ¥åœ¨è¯„è®ºåŒºæŒ‡å‡ºï¼Œå¤šè°¢å¤§å®¶äº†ã€‚\nå¦‚æœæœ‰åŸåšå®¢é“¾æ¥æ²¡æœ‰ redirect è€Œæ˜¯ 404 äº†ï¼Œä¹Ÿè¯·åŠ¡å¿…å‘Šè¯‰æˆ‘ã€‚\nå¦‚æœéœ€è¦åŸ hexo åšå®¢çš„ï¼Œå¯ä»¥çœ‹ ouuan.github.io/hexo-archive ã€‚\n","date":"2020-02-06T23:07:17+08:00","permalink":"https://ouuan.github.io/post/from-hexo-to-hugo/","tags":["åšå®¢"],"title":"ä» Hexo åˆ° Hugo"},{"categories":["å…¶å®ƒ"],"contents":" â€”â€” ç®€å•é¢˜ä¸ sb æ˜¯ä»€ä¹ˆæ°´å¹³ï¼Ÿ\nâ€”â€” å›½å®¶é˜Ÿæ°´å¹³ã€‚\n sb é”™è¯¯   å¼€ long long æ—¶è®°å¾—å¿«è¯»ä¹Ÿè¦å¼€ long longã€‚\n  è®°å¾—åˆ è°ƒè¯•ä¿¡æ¯ï¼Œå°¤å…¶æ˜¯ cerrã€‚\n  å¤šæµ‹æ—¶è¦å°å¿ƒä½¿ç”¨ memsetã€‚\n  operator å‰é¢è®°å¾—åŠ è¿”å›å€¼ç±»å‹åã€‚ï¼ˆdev c++ ä¸æŠ¥é”™ä¸è­¦å‘Šï¼‰\n  è·‘çš„å¾ˆå¿«å¯èƒ½æ˜¯å› ä¸ºè¢«ä¼˜åŒ–äº†ï¼Œå› æ­¤ä¸è¦ç”¨ç©ºå¾ªç¯æµ‹è¿è¡Œç”¨æ—¶ã€‚\n  ï¼ˆç”¨äºåœ¨çº¿æ¯”èµ›ï¼‰RE å¯èƒ½æ˜¯çˆ†æ ˆäº†ã€‚\n  ä¸è¦å‡æ ¹å·åˆ†æ²»ï¼ˆå¯èƒ½å¤§äº / å°äºæ ¹å·çš„åŒæ ·å¯ä»¥å¤„ç†å°äº / å¤§äºæ ¹å·çš„ï¼‰ã€‚\n  å¯¹å¸¸æ•°æœ‰è¦æ±‚æ—¶åº”å°½å¯èƒ½åœ°é¿å…å¤æ‚åº¦ç“¶é¢ˆä¸Šçš„ push_back/emplace_backï¼Œè§£å†³æ–¹æ³•æœ‰ï¼šåœ¨ push_back å‰ reserveã€ä½¿ç”¨ resizeã€ä½¿ç”¨ä¼ ç»Ÿæ•°ç»„ç­‰ã€‚\n  for (auto element : container) éœ€è¦åœ¨åŸå¤„ä¿®æ”¹æ—¶ä½¿ç”¨ auto \u0026amp; è€Œé autoã€‚\n  ä¸è¦åŒæ—¶ vector\u0026lt;...\u0026gt; a(...) å’Œ a.push_back(...) è€Œå¯¼è‡´æ•°ç»„é•¿åº¦ç¿»å€ä¸”å‰ä¸€åŠæ˜¯ç©ºçš„ã€‚\n  q=0 ä¸ä¸€å®šæ˜¯ä¸è¾“å‡ºï¼Œä¾‹å¦‚é¢˜ç›®è¦æ±‚è¾“å‡ºç­”æ¡ˆçš„å¼‚æˆ–å’Œæ—¶ï¼Œå°±è¦è¾“å‡º 0ã€‚\n  OI èµ›åˆ¶è®°å¾—è‡ªå·±æµ‹æé™æ•°æ®ï¼ˆæœ€å¤§ \u0026amp; æœ€å°ï¼‰ã€‚\n  ä¸è¦æŠŠåŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘å†™æˆå¯æŒä¹…åŒ–çº¿æ®µæ ‘ï¼ˆå¸¸æ•°ä¼šå¤§ï¼‰ã€‚\n  æ— ç¬¦å·æ•´å‹ï¼ˆå¦‚ container.size()ï¼‰å‡å»ä¸€ä¸ªæ­£æ•°æ—¶éœ€è¦ç•™æ„ï¼Œè‹¥ä¸èƒ½ä¿è¯ç»“æœéè´Ÿï¼Œåˆ™éœ€è¦å°†æ— ç¬¦å·æ•´å‹æ˜¾å¼è½¬æ¢ä¸ºæœ‰ç¬¦å·æ•´å‹å†è¿›è¡Œè¿ç®—ã€‚\n  sb æƒ³ä¸åˆ°   è®¡æ•° â†’ ä»€ä¹ˆæ˜¯é‡å¤çš„ï¼Œä»€ä¹ˆæ˜¯ç›¸åŒçš„ã€‚è¦åšåˆ°ä¸é‡ä¸æ¼\n  æœ€ä¼˜åŒ– â†’ ä»€ä¹ˆæ˜¯ä¸ä¼˜çš„ï¼Œä»€ä¹ˆæ˜¯ä¸åŠ£çš„ã€‚\n  è¦æ˜¯æ€ä¹ˆæ ·å°±å¥½äº† â†’ èƒ½ä¸èƒ½è½¬åŒ–æˆè¿™æ ·ã€‚\n  å­˜åœ¨åä¾‹ â†’ åä¾‹èƒ½å¦ç‰¹æ®Šå¤„ç†ã€‚\n  åªç”¨ç®¡å¤§å°è€Œä¸å…³å¿ƒå…·ä½“å€¼ â†’ ä»å°åˆ°å¤§ã€ä»å¤§åˆ°å°è€ƒè™‘ / äºŒåˆ†ç­”æ¡ˆè½¬æˆ 01ã€‚\n  æ„é€ æœ€å°å€¼ â†’ æ‰¾åˆ°ä¸€ä¸ªè¾ƒç´§çš„ä¸‹ç•Œï¼Œæ„é€ å‡ºä¸‹ç•Œï¼ˆæˆ–è€…æ„é€ å‡ºä¸€ä¸ªæ–¹æ¡ˆï¼Œè¯æ˜å®ƒæ˜¯ä¸‹ç•Œï¼‰ã€‚\n  å¤šæ¬¡äºŒåˆ†æ—¶æƒ³ä¸€æƒ³èƒ½ä¸èƒ½ç”¨åŒæŒ‡é’ˆã€‚\n  æˆåŒæˆå¯¹çš„å…ƒç´ ï¼Œåœ¨ä¸€èµ·æ€ä¹ˆæ ·ï¼Œä¸åœ¨ä¸€èµ·æ€ä¹ˆæ ·ï¼Œç»å¸¸å¯ä»¥ç”¨éšæœºæ•°å¼‚æˆ–æ¥å¤„ç†ã€‚\n  æŠŠæ•´ä¸ªåºåˆ—åˆ†æˆè‹¥å¹²æ®µï¼Œæ¯æ®µæ±‚ä¸€ä¸ªå€¼å†åŠ èµ·æ¥æ±‚æœ€å€¼ï¼Œæš´åŠ›æ˜¯ DPï¼Œç»å¸¸å¯ä»¥ç”¨å†³ç­–å•è°ƒæ€§ä¼˜åŒ–ã€‚\n  å›¾è®ºç›¸å…³é—®é¢˜ï¼ˆåŒ…æ‹¬æ ‘ä¸Šé—®é¢˜ï¼‰å¯ä»¥è€ƒè™‘ç‚¹å’Œè¾¹äº’ç›¸è½¬åŒ–ã€‚\n  èƒ½å¤Ÿå·ç§¯æ—¶æƒ³ä¸€æƒ³èƒ½ä¸èƒ½ç›´æ¥èƒŒåŒ…ã€‚\n  æ±‚ç”Ÿæˆå‡½æ•°ç„¶åå¸¦å€¼è¿›å»æ±‚ç­”æ¡ˆï¼Œå¯ä»¥è¿‡ç¨‹ä¸­ç›´æ¥ç®—ç‚¹å€¼ã€‚\n  æ— æ³•ç»§ç»­ä¼˜åŒ–å¾€å¾€æ˜¯å› ä¸ºæ±‚äº†ä¸å¿…è¦çš„ä¸œè¥¿ã€‚\n  è·¯å¾„åŠ å•ç‚¹æ±‚å€¼å¯ä»¥æ ‘ä¸Šå·®åˆ† + æ ‘çŠ¶æ•°ç»„ï¼Œä¸éœ€è¦æ ‘å‰–/LCTã€‚\n  ä¸è¦ä½¿ç”¨åŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘æ¥æ±‚ä¸å¸¦ä¿®çš„åŒºé—´å’Œï¼Œåœ¨å¯¹å¸¸æ•°æœ‰è¦æ±‚æ—¶ä¹Ÿä¸è¦ä½¿ç”¨ mapï¼Œè€Œåº”ä½¿ç”¨ vector + äºŒåˆ† + å‰ç¼€å’Œã€‚\n  å¤šæ¬¡æ±‚çŸ©é˜µå¿«é€Ÿå¹‚ä¹˜ä¸€ä¸ªå‘é‡æ—¶ï¼Œå¯ä»¥é¢„å¤„ç†çŸ©é˜µçš„å¹‚ï¼ˆä¸€æ¬¡ï¼ŒäºŒæ¬¡ï¼Œå››æ¬¡ï¼Œå…«æ¬¡\u0026hellip;ï¼‰ï¼Œç„¶åæ¯æ¬¡éƒ½ç”¨çŸ©é˜µä¹˜å‘é‡ï¼ˆä»å³å‘å·¦ä¾æ¬¡ç®—ï¼‰ï¼Œè¿™æ ·é¢„å¤„ç†å¤æ‚åº¦æ˜¯ $O(n^3\\log k)$ï¼Œå•æ¬¡è¯¢é—®å¤æ‚åº¦æ˜¯ $O(n^2\\log k)$ã€‚æ›´ä¸€èˆ¬åœ°ï¼Œæ±‚å¤šä¸ªçŸ©é˜µï¼ˆæ¯ä¸ªçŸ©é˜µéƒ½æ˜¯å·²çŸ¥çš„ï¼‰çš„ç§¯ä¹˜ä¸Šä¸€ä¸ªå‘é‡æ—¶ï¼Œå¯ä»¥åˆ©ç”¨ç»“åˆå¾‹æ¯æ¬¡éƒ½ç”¨çŸ©é˜µä¹˜å‘é‡ã€‚\n ","date":"2019-08-19T00:22:36+08:00","permalink":"https://ouuan.github.io/post/%E4%B8%80%E4%BA%9B%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/","tags":["æ³¨æ„äº‹é¡¹"],"title":"ä¸€äº›æ³¨æ„äº‹é¡¹"},{"categories":["æŠ€æœ¯"],"contents":" è¯´å®è¯æˆ‘è§‰å¾—ç«èµ›é¢˜ç›®æŒºå‘çˆ¹çš„â€¦â€¦æœ¨æœ‰å•¥æ„æ€ã€‚äººç±»ä¸ºä½•è¦å‡ºé¢˜åˆéš¾äººç±»ã€‚\næˆ‘æ›´å–œæ¬¢åšçš„äº‹æƒ…æ˜¯å†™ç‚¹å·¥ç¨‹å•¥çš„ \u0026gt;_\u0026lt;\u0026hellip; åšåšå°æ¸¸æˆæŒºå¥½ç©çš„ã€‚\nâ€”â€” vfk ã€Šå››è‰²çš„ NOIã€‹\n ï¼ˆè¿™ç®—å“ªé—¨å­å¼•ç”¨å•Šï¼‰\nCP Editor è¿™ä¸ªæ˜¯æˆ‘å’Œå…¶ä»–äººä¸€èµ·å†™çš„ã€‚\næ˜¯ä¸€ä¸ªä¸º OI è€Œè®¾è®¡çš„ IDEï¼Œæœ‰å¾ˆå¤šä¸º OI è®¾è®¡çš„ featureã€‚\né•¿æœŸæ¬¢è¿ contributorsï¼\nUOJ Data Converter å°†æ•°æ®è½¬æ¢ä¸º UOJ çš„æ ¼å¼ã€‚\nBZOJ-Local-Judge æˆ‘è‡ªå·±ç°åœ¨åš BZOJ ä¸Šæœ‰çš„é¢˜ï¼ˆ5000 ä¹‹å‰ï¼‰å…¨éƒ½ç”¨è¿™ä¸ªäº†ã€‚çœŸçš„éå¸¸æ–¹ä¾¿ã€‚\næˆ‘ä»¥å‰è‡ªå·±åš BZOJ ä¸Šæœ‰çš„é¢˜ï¼ˆ5000 ä¹‹å‰ï¼‰å…¨éƒ½ç”¨è¿™ä¸ªã€‚\nHinata Online Judge æ˜¯ UOJ çš„é­”æ”¹ï¼Œæœ‰ æŒºå¤š feature çš„ã€‚\nDespised é™¤äº†é€‰é¡¹å•ä¸€ï¼Œæˆ‘è§‰å¾—è¿™æ˜¯æˆ‘ç”¨è¿‡ä½“éªŒæœ€å¥½çš„è¢«é„™è§†å°ç¨‹åºäº†ã€‚æ„Ÿè§‰åŠ ä¸€äº›é”™è¯¯é€‰é¡¹æ¯”è¾ƒå¥½ï¼Œä¸ç„¶èƒŒç€èƒŒç€å°±å˜æˆèƒŒé”™è¯¯é€‰é¡¹äº†ã€‚å¸Œæœ›æ˜å¹´ä¸è¦å’•ã€‚\nTree-Generator é€ æ ‘æŒºæ–¹ä¾¿çš„ã€‚ï¼ˆé¡ºä¾¿ æ±‚ upï¼‰ã€‚\nsegmentTree åŸºç¡€çº¿æ®µæ ‘ä¸‡èƒ½æ¿å­ï¼Œåªç”¨å†™ä¸¤ä¸ªå‡½æ•°ï¼ˆmerge å’Œ updateï¼‰å°±æ‹¥æœ‰äº†ä¸€æ£µçº¿æ®µæ ‘ã€‚ï¼ˆç»§ç»­ æ±‚ upï¼‰\nAnti-YiGeDingLia Demo\nå¤§å®¶çŸ¥é“ QQ çš„æ¥é¾™çº¢åŒ…å—ï¼Ÿæˆ‘å†™è¿™ä¸ªä¸œè¥¿çš„æ—¶å€™æ¥é¾™çº¢åŒ…ç‰¹åˆ«ç«ï¼Œç„¶è€Œå¤§å®¶éƒ½å¾ˆå–œæ¬¢â€œä¸€ä¸ªé¡¶ä¿©â€ qaqã€‚æœ‰äº†è¿™ä¸ªé¡¹ç›®ï¼Œå½“ä½ çœ‹åˆ° yi ç»“å°¾æ—¶å°±èƒ½åŠæ—¶æ„æ°”é«˜æ˜‚å•¦ï¼\nLuoguPaintBoard é¡¾åæ€ä¹‰ï¼Œæ˜¯ç”»æ´›è°·å†¬æ—¥ç»˜æ¿ç”¨çš„ã€‚æˆ‘æ˜å¹´ä¸€å®šç”»ä¸ªã²ãªãŸï¼\nCode-Disturber å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œå®é™…ä½œç”¨æ˜¯ç”¨ emoji ç¾åŒ–ä»£ç ã€‚\nSwapArrayDimension æˆ–è®¸æ˜¯ä¸ªå®ç”¨çš„ä¸œè¥¿ã€‚\n","date":"2019-08-10T19:22:23+08:00","permalink":"https://ouuan.github.io/post/%E4%B8%80%E4%BA%9B%E6%9C%89%E8%B6%A3%E7%9A%84%E5%B0%8F%E5%B7%A5%E7%A8%8B/","tags":["å·¥ç¨‹"],"title":"ä¸€äº›æœ‰è¶£çš„å°å·¥ç¨‹"},{"categories":["æŠ€æœ¯"],"contents":"ä½ åœ¨ä½¿ç”¨æµè§ˆå™¨æ—¶æ˜¯å¦æœ‰è¿™æ ·çš„çƒ¦æ¼ï¼Ÿ\n åˆ°åº•å¼€å¤šå°‘ä¸ªæ ‡ç­¾é¡µï¼Ÿ  å¼€å¾ˆå¤šæµè§ˆå™¨æ ‡ç­¾é¡µ â‡’ æ‰¾ä¸åˆ°æ ‡ç­¾é¡µåœ¨å“ªï¼Œåˆ‡æ¢éº»çƒ¦ã€‚ å¼€å¾ˆå°‘æµè§ˆå™¨æ ‡ç­¾é¡µ â‡’ éœ€è¦é¢‘ç¹åœ°æ‰“å¼€ã€å…³é—­æ ‡ç­¾é¡µã€‚   æ ‡ç­¾é¡µä¹‹é—´å±‚æ¬¡æ··ä¹±ï¼Œä¸åŒç±»åˆ«çš„æ ‡ç­¾é¡µæ··åœ¨ä¸€èµ·ã€‚ ä»ä¸åŒçš„åœ°æ–¹ç‚¹é“¾æ¥æ‰“å¼€åŒä¸€ä¸ªç½‘å€ï¼Œå…³äº†ä¸€ä¸ªå¿˜è®°å…³å¦ä¸€ä¸ªã€‚ â€¦â€¦  ä½¿ç”¨ Firefox çš„ Tree Style Tab å’Œ Duplicate Tabs Closer æ’ä»¶ï¼Œå°±å¯ä»¥è§£å†³ä¸Šè¿°çƒ¦æ¼ã€‚\nï¼ˆç¯å¢ƒï¼šArch Linux, KDE Plasma, Dark Breezeï¼‰\nå®‰è£… Tree Style Tab  å®‰è£…æ‰©å±•ï¼šTree Style Tab â€“ ä¸‹è½½ ğŸ¦Š Firefox æ‰©å±• æ‰“å¼€ä¾§æ ï¼ˆé»˜è®¤å¿«æ·é”®ä¸º F1ï¼‰ã€‚ ï¼ˆå¯é€‰ï¼‰åœ¨ Firefox çš„é¦–é€‰é¡¹ä¸­å¼€å¯â€œæ¢å¤å…ˆå‰çš„æµè§ˆçŠ¶æ€â€ã€‚è¿™èƒ½ä½¿é•¿æœŸæ‰“å¼€å¾ˆå¤šæ ‡ç­¾é¡µå˜å¾—æœ‰æ„ä¹‰ã€‚ ï¼ˆå¯é€‰ï¼‰éšè—ä¼ ç»Ÿæ ‡ç­¾æ ï¼šHow to hide tab bar (tabstrip) in Firefox 57+ Quantum - Super User ï¼ˆå¯é€‰ï¼‰ä½¿ç”¨ Firefox çš„â€œå®šåˆ¶â€åŠŸèƒ½ï¼Œåœ¨åœ°å€æ å·¦ä¾§çš„æŒ‰é’®çš„å·¦ä¾§æ·»åŠ å¼¹æ€§ç©ºç™½ï¼Œä½¿ä¾§æ ä¸ç©ºç™½ç­‰å®½ã€‚  å®‰è£… Duplicate Tabs Closer   å®‰è£…æ‰©å±•ï¼šDuplicate Tabs Closer â€“ ä¸‹è½½ ğŸ¦Š Firefox æ‰©å±•\n  ç‚¹å‡»æ‰©å±•å›¾æ ‡â†’è®¾ç½®æŒ‰é’®è¿›è¡Œé…ç½®ã€‚\næˆ‘çš„é…ç½®ï¼š\nå…¶ä¸­ï¼Œâ€œãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆâ€æ˜¯ç™½åå•ï¼Œå†…å®¹æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¡¨ç¤ºå“ªäº›æ ‡ç­¾é¡µä¼šè¢«æ’é™¤åœ¨å¤–ï¼ˆé‡å¤äº†ä¹Ÿä¸ä¼šè¢«å…³é—­ï¼‰ï¼ˆæˆ‘æ„Ÿè§‰è¿™ä¸ªä¸œè¥¿åº”è¯¥å«é»‘åå• ğŸŒšï¼‰ï¼Œè€Œ ^(?!.*github.com).*$ åŒ¹é…çš„æ˜¯æ‰€æœ‰ä¸åŒ…å« github.com çš„ç½‘å€ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ç½‘å€åŒ…å« github.com çš„é‡å¤æ ‡ç­¾é¡µæ‰ä¼šè¢«è‡ªåŠ¨å…³é—­ã€‚æˆ‘è®¾ç½®è¿™ä¸ªè§„åˆ™æ˜¯å› ä¸º GitHub ä¸Šçš„å¾ˆå¤šé¡µé¢æ˜¯æˆ‘ä¸€ç›´æ‰“å¼€ç€çš„ï¼Œè€Œæˆ‘åˆç»å¸¸ä¼šä»é‚®ç®±é‡Œç‚¹è¿›å·²æ‰“å¼€çš„é¡µé¢ã€‚\n  ä½¿ç”¨ Tree Style Tab å’Œ Duplicate Tabs Closer éšå¿ƒæ‰€æ¬²åœ°æ–°å»ºæ ‡ç­¾é¡µ å¼€ä¸å¼€æ ‡ç­¾é¡µï¼Ÿå¼€ï¼\nä»¥åè¿™ä¸ªæ ‡ç­¾é¡µè¿˜å¯èƒ½ä¼šç”¨åˆ°ï¼Œè¦ç•™ç€å—ï¼Ÿç•™ï¼\nFirefox 67 çš„æ›´æ–° ä½¿å¾—å¼€å¾ˆå¤šæ ‡ç­¾é¡µä¸ä¼šå ç”¨è¿‡å¤šçš„å†…å­˜ï¼ŒTree Style Tab åˆ™ä½¿å¾—å¼€å¾ˆå¤šæ ‡ç­¾é¡µä¸ä¼šå˜å¾—æ‚ä¹±æ— ç« ï¼ŒDuplicate Tabs Closer ä½¿å¾—ä½ ä¸ä¼šæ‰“å¼€å¾ˆå¤šé‡å¤çš„æ ‡ç­¾é¡µã€‚æ‰€ä»¥ï¼Œä½ åœ¨æ‰“å¼€æ–°æ ‡ç­¾é¡µæ—¶åŸºæœ¬ä¸Šä¸éœ€è¦æ‹…å¿ƒæ‰“å¼€çš„æ ‡ç­¾é¡µè¿‡å¤šï¼ˆå½“ç„¶ï¼Œå¦‚æœçœŸçš„å¤ªå¤šï¼ˆä¸Šç™¾ä¸ªï¼‰ï¼Œæˆ–è€…æ ‘çš„èŠ‚ç‚¹çš„åº¦æ•°å¤ªå¤§ï¼Œå°±å¦è¯´äº†ï¼‰ã€‚\næŠ˜å ï¼Œç„¶åæ‰¹é‡å…³é—­ è‹¥ä¸€æ£µå­æ ‘å¤„äºæŠ˜å çŠ¶æ€ï¼Œä½ å¯ä»¥ä¸€é”®å…³æ‰æ•´æ£µå­æ ‘ã€‚\nè¿™åœ¨æœç´¢è§£å†³æ–¹æ¡ˆæ—¶éå¸¸æœ‰ç”¨ \n ","date":"2020-07-09T13:00:46+08:00","permalink":"https://ouuan.github.io/post/firefox-tree-style-tab-and-duplicate-tabs-closer/","tags":["æµè§ˆå™¨"],"title":"Firefox çš„ Tree Style Tab å’Œ Duplicate Tabs Closer æ’ä»¶"},{"categories":["æŠ€æœ¯"],"contents":"C++ NB $\\times$\nC++ UB $\\sqrt{}$\nè¿™æ˜¯ä¸€ç¯‡æµæ°´å¸ã€‚\nå­¦JS å‰ä¸€å¤©ï¼Œæˆ‘å­¦ä¹ äº† JavaScript ä¸­çš„é—­åŒ…ã€‚\nå†™é¢˜ å½“å¤©ï¼Œæˆ‘åœ¨å†™ä¸€é“éœ€è¦ä½¿ç”¨ SAM çš„é¢˜ã€‚\næƒ³å†™é—­åŒ… æˆ‘æƒ³åˆ°äº†æ˜¨å¤©å­¦çš„é—­åŒ…ï¼Œäºæ˜¯æƒ³â€œè¦æ˜¯ç”¨ JS å°±èƒ½å†™ä¸€ä¸ªä¼˜ç¾çš„è¿­ä»£å™¨ç”¨äºè®¿é—® SAM äº†â€ã€‚\nï¼ˆæƒ³è±¡ä¸­çš„ä»£ç ï¼šï¼‰\nfunction\u0026lt;int(char)\u0026gt; makeIterator() { int cur = 0; return [this, \u0026amp;cur](char nxt) { return cur = t[cur].ch[nxt - 'a']; }; }  æµ‹è¯•äº†ä¸€ä¸‹ï¼Œå‘ç°å®ƒ work äº†ï¼ ï¼ˆArch Linuxï¼Œg++ 10.1.0ï¼Œ-std=c++11 -O2ï¼‰\nauto makeCounter = [] { int cnt = 0; return [\u0026amp;cnt] { return ++cnt; }; }; auto counter1 = makeCounter(); auto counter2 = makeCounter(); wtb(counter1()); wtb(counter1()); wtb(counter2()); wtb(counter1()); wtb(counter2()); wtb(counter2());  è¾“å‡ºï¼š\n1 2 1 3 2 3  å‘ç°å‡½æ•°è¿”å›æ—¶è¿˜æ˜¯ä¼šè°ƒç”¨ææ„å‡½æ•° #include \u0026lt;iostream\u0026gt; #include \u0026lt;functional\u0026gt; using namespace std; class Test { public: Test(int id) : m_id(id), m_value(new int(0)) { cout \u0026lt;\u0026lt; \u0026quot;constructor: \u0026quot; \u0026lt;\u0026lt; m_id \u0026lt;\u0026lt; endl; } ~Test() { cout \u0026lt;\u0026lt; \u0026quot;destructor: \u0026quot; \u0026lt;\u0026lt; m_id \u0026lt;\u0026lt; endl; } void add(int delta) { *m_value += delta; } int value() const { return *m_value; } private: int m_id; int *m_value; }; int main() { auto makeCounter = [](int id) { Test cnt(id); return [\u0026amp;cnt] { cnt.add(1); return cnt.value(); }; }; auto counter1 = makeCounter(1); auto counter2 = makeCounter(2); cout \u0026lt;\u0026lt; counter1() \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; counter1() \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; counter2() \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; counter1() \u0026lt;\u0026lt; endl; return 0; }  è¾“å‡ºï¼š\nconstructor: 1 destructor: 1 constructor: 2 destructor: 2 1 2 1 3  ç”šè‡³ä¼šè½»è€Œæ˜“ä¸¾åœ° UB ï¼ˆå…¶å®ƒä»£ç ä¸å˜ï¼‰\nauto makeCounter = [](int id) { Test cnt(id); auto ret = [\u0026amp;cnt] { cnt.add(1); return cnt.value(); }; cnt.add(1); return ret; };  constructor: 1 destructor: 1 constructor: 2 destructor: 2 2 -72537979 -72537978 -72537977  ç”šè‡³ æœ€å¼€å§‹ é‚£ä¸ªç‰ˆæœ¬ï¼Œåªè¦ä¸å¼€ O2 å°±ä¼š è¾“å‡ºï¼š\n1 2 3 4 5 6  å‘ç°æœ‰åšå®¢è®²è¿™ä¸ª Modern C++ä¸­lambdaè¡¨è¾¾å¼çš„é™·é˜±_å°˜ä¸­è¿œçš„ç¨‹åºå¼€å‘è®°å½•\nå¾—å‡ºç»“è®º å½“ä½ ä»¥ä¸º C++ NB çš„æ—¶å€™ï¼Œå®é™…ä¸Šå®ƒå¯èƒ½åœ¨ UBã€‚\nC++ çš„å±€éƒ¨å˜é‡ç¡®å®æ˜¯ä¼šåœ¨å‡½æ•°è¿”å›/è¯­å¥å—ç»“æŸæ—¶é”€æ¯çš„ï¼Œä½†é”€æ¯åç”±äº UB å¯èƒ½è¿˜èƒ½ç”¨ï¼ˆ\næ€»ä¹‹ä¸è¦åœ¨å±€éƒ¨å˜é‡é”€æ¯åè¿˜èƒ½æ‰§è¡Œçš„ lambda ä¸­ä»¥å¼•ç”¨æ•è·å±€éƒ¨å˜é‡ã€‚\n","date":"2020-07-08T14:08:38+08:00","permalink":"https://ouuan.github.io/post/lambda-capture-local-variable-by-reference/","tags":["C++"],"title":"C++ lambda ä½¿ç”¨å¼•ç”¨æ•è·å±€éƒ¨å˜é‡çš„é™·é˜±"},{"categories":["æ¸¸è®°"],"contents":"\u0026lt;area/\u0026gt; \u0026lt;base/\u0026gt; \u0026lt;br/\u0026gt; \u0026lt;col/\u0026gt; \u0026lt;command/\u0026gt; \u0026lt;embed/\u0026gt; \u0026lt;hr/\u0026gt; \u0026lt;img/\u0026gt; \u0026lt;input/\u0026gt; \u0026lt;keygen/\u0026gt; \u0026lt;link/\u0026gt; \u0026lt;menuitem/\u0026gt; \u0026lt;meta/\u0026gt; \u0026lt;param/\u0026gt; \u0026lt;source/\u0026gt; \u0026lt;track/\u0026gt; \u0026lt;wbr/\u0026gt;\nè‹±æ–‡æ ‡é¢˜ï¼ˆé“¾æ¥æœ«å°¾ï¼‰å« \u0026ldquo;HBSX2020\u0026rdquo; æ˜¯å› ä¸ºå‰ä¸¤å¹´æ–‡ä»¶å¤¹åå­—éƒ½å« \u0026ldquo;HBSX201X\u0026rdquo;ï¼Œè™½ç„¶ä»Šå¹´æ˜¯ \u0026ldquo;NOIçœé€‰\u0026rdquo;ã€‚\nå­æ ‡é¢˜å¸¦â€œ2020 çœé€‰â€æ˜¯å› ä¸ºå¬è¯´è¿™æ ·æ›´åˆ©äº SEOã€‚\n2020 çœé€‰ Day 1 å› ä¸ºæ›¾ç»é‡åˆ°è¿‡ï¼š\n æ¨¡æ‹Ÿèµ›è‡ªå·±å†™çš„ $\\log^2$ æ ‘çŠ¶æ•°ç»„å¤–é¢äºŒåˆ†æ¯”åˆ«äººå†™çš„ $\\log$ çº¿æ®µæ ‘é‡Œé¢äºŒåˆ†å¿«ï¼› NOIP2018 D2T1 åœ¨æ‰€æœ‰ OJ ä¸Šä¸å¼€ O2 éƒ½è¿‡ä¸äº†ï¼Œä½†åœ¨ 8700kï¼ˆå…¨å›½ç»Ÿä¸€è¯„æµ‹æœºï¼‰ä¸Šè¿‡äº†  è¿™ä¹ˆä¸¤ä»¶äº‹ï¼Œäºæ˜¯ä¸å‡æ€ç´¢åœ°å¦æ‰äº† T1 çš„çº¿æ®µæ ‘äºŒåˆ†å†™äº†ä¸ªæ ‘çŠ¶æ•°ç»„å¤–é¢äºŒåˆ†ç”šè‡³è¿˜èŠ±äº†åŠå°æ—¶ç»™è¿™ä¸ªåšæ³•å¡å¸¸æœ€åç”¨æ—¶ 8s å·¦å³ã€‚\nåšäº†ä¸Šè¿°è¿™ä»¶äº‹çš„æˆ‘è‡ªé—­äº†ã€‚\n æ‰“å¼€é¢˜é¢ç«‹åˆ»çœ‹åˆ°ç¼–è¯‘é€‰é¡¹æœ‰ O2ï¼Œä½†ä¸‹é¢åˆå†™äº†â€œè¯„æµ‹æ—¶ä¸å¼€å¯ä»»ä½•ä¼˜åŒ–é€‰é¡¹â€ã€‚\n è€ƒåœºæ˜¯ Windows 10 + NOI Linux è™šæ‹Ÿæœºã€‚å¾€è™šæ‹Ÿæœºé‡Œæ‹·è´æ–‡ä»¶çš„æ—¶å€™è™šæ‹Ÿæœºå¡äº†ï¼Œç„¶ååœ¨ä»»åŠ¡ç®¡ç†å™¨é‡Œç›´æ¥ kill æ‰äº†ï¼Œç„¶åå°±æ‰“ä¸å¼€è™šæ‹Ÿæœºäº†ã€‚\nåæ¥å¯¹æ‹çš„æ—¶å€™ä¸å°å¿ƒç»™æš´åŠ›æäº†ä¸ªéå¸¸å¤§çš„æ•°æ®ï¼Œç„¶å MLE äº†ï¼Œç„¶åå°±æ­»æœºäº†ï¼Œç„¶åå°±é‡å¯äº†ï¼Œç„¶åå°±å¯ä»¥è¿›è™šæ‹Ÿæœºäº†ã€‚\n2020 çœé€‰ Day 1.5 å°±ä¸€å¤©æ²¡å¤„ç† CP Editor ç›¸å…³çš„äº‹ï¼Œç»“æœå°±é‡ä¸Šäº† CP Editor é™¤äº†æˆ‘å¼€çš„ PR çš„ PR æœ€å¤šçš„ä¸€å¤©ï¼Œæœ‰ä¸¤ä¸ª first-time contributorï¼Œå¤„ç† PR å°±æäº†ä¸€ä¸‹åˆã€‚æœ‰æ–° contributor å€’æ˜¯å¥½äº‹ ï¼Œæ¯•ç«Ÿè¿‡ä¸äº†å¤šä¹…æˆ‘å¯èƒ½å°±è¦æ–‡åŒ–è¯¾äº†ã€‚\næ™šä¸Šå†™äº† AGC çš„ Aï¼Œç„¶åçœ‹äº†çœ¼ B å¥½åƒä¸å¤ªä¼šï¼Œçœ‹äº†çœ¼ C ä¼šäº†ä½†æ‡’å¾—å†™äº†ã€‚\n2020 çœé€‰ Day 2 æ‰“å¼€é¢˜é¢ç«‹åˆ»çœ‹åˆ°ç¼–è¯‘é€‰é¡¹æ²¡æœ‰ O2ï¼Œä½†ä¸‹é¢è²Œä¼¼æ”¹æˆäº†ï¼ˆä¹Ÿå¯èƒ½æ˜¯æˆ‘ Day 1 çœ‹é”™äº†ï¼‰â€œè¯„æµ‹æ—¶é™¤ç¼–è¯‘é€‰é¡¹å¤–ä¸å¼€å¯ä»»ä½•ä¼˜åŒ–é€‰é¡¹â€ã€‚\nå‘ç° T1 å¥½åƒä¼šï¼Œåœ¨è‰ç¨¿çº¸ä¸Šå†™äº†ä¸‹è½¬ç§»æ–¹ç¨‹åå°±å¼€å§‹å†™ï¼Œå†™å®Œå‘ç°è¿‡ä¸äº†å¤§æ ·ä¾‹ï¼Œç„¶åå‘ç°å‡äº†ï¼Œè€Œä¸”æ¯”è¾ƒ naive åœ°æ”¹å¯¹ä¼šè®©å¤æ‚åº¦å˜æˆ $O(n+2^mm^2)$ã€‚æƒ³äº†ä¸€ä¼šå„¿åå‘ç°ä¸€ä¸ªç©ºé—´å¤æ‚åº¦ $O(2^mm)$ çš„åšæ³•æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n+2^mm)$ï¼Œä½†è²Œä¼¼è¦ MLEï¼Œäºæ˜¯æŠŠ vector éƒ½æ¢æˆäº†æ•°ç»„ï¼Œä½†è¿˜æ˜¯çˆ†äº†ã€‚ç„¶åå‘ç°ä¸€ä¸ªæ€§è´¨ï¼š$n$ åªæœ‰ $10^5$ï¼Œè€Œé‚£ä¸ªéå¸¸å¤§çš„æ•°ç»„æ¯ä¸ªå€¼æœ€å¤§æ˜¯ $\\frac12n$ï¼Œäºæ˜¯ä¸ä¼šçˆ† unsigned shortï¼Œç„¶åå°±å¡åˆ°äº† $470\\rm MiB$ å·¦å³ã€‚\nç„¶åæ„Ÿè§‰ T2 æ¯”è¾ƒå¯åšï¼Œäºæ˜¯å…ˆæŠŠ T3 çš„æš´åŠ›å†™äº†ã€‚æ„Ÿè§‰ Matrix Tree æ²¡æœ‰é‚£ä¹ˆå¥½å†™ï¼Œäºæ˜¯å…ˆåªå†™äº† $30$ åˆ†ã€‚\nT2 å…ˆæ‰“äº†ä¸ªæš´åŠ›ï¼Œç„¶åå‘ç°è²Œä¼¼å¯ä»¥ $O(n\\sqrt n+n\\log^2n)$ï¼Œç„¶åå‘ç°ç”¨ bitset å¯ä»¥ $O(n\\sqrt\\frac nw+n\\log^2n)$ ($w$ æ˜¯å­—é•¿, ä¸€èˆ¬ä¸º $32$)ï¼Œè¿™æ—¶å·²ç»å¿« 12 ç‚¹äº†ï¼ŒT3 çš„ Matrix Tree è¿˜æ²¡å†™ï¼Œå¾ˆæ–¹ï¼Œä½†å› ä¸ºï¼ˆå½“æ—¶ä»¥ä¸ºï¼‰æœ‰ 30/70 åˆ†ï¼ˆå®é™…ä¸Šæ˜¯ 30/90 åˆ†ï¼‰ï¼Œå°±è¿˜æ˜¯å†™äº†ï¼Œç„¶åå¾ˆå¿«å°±è¿‡äº†å¤§æ ·ä¾‹ï¼Œç„¶åå°æ•°æ®è¿‡æ‹äº†ï¼Œç„¶åå¤§æ•°æ®æ²¡è¿‡æ‹ï¼Œç„¶åå‘ç°æ˜¯ bitset å¼€å°äº†ï¼Œè°ƒäº†ä¹‹åè¿‡äº†ï¼Œç„¶ååœ¨ Linux ä¸Šæµ‹äº†å¤§æ ·ä¾‹ï¼Œç„¶ååœ¨ Windows ä¸Šæµ‹äº†é“¾è·‘äº† $4.3s$ï¼Œæ„Ÿè§‰ 8700k è‚¯å®šèƒ½è¿‡ï¼Œä½†è¿˜æ˜¯æœ€å¥½åœ¨ Linux ä¸Šæµ‹ä¸€ä¸‹ï¼Œç„¶ååœ¨ Linux ä¸Šæ®µé”™è¯¯äº†ï¼Œç„¶åè°ƒäº†ä¸€ä¼šå„¿æ•°ç»„å¤§å°ï¼Œç„¶åæƒ³èµ·æ¥å¯èƒ½æ˜¯çˆ†æ ˆäº†ï¼Œç„¶åå‘ç°è‡ªå·±å¹¶ä¸ä¼šåœ¨ Linux ä¸Šå¼€æ ˆï¼Œç„¶åå°±è‡ªé—­äº†ï¼Œç„¶åæ²¡æ—¶é—´äº†ï¼ŒMatrix Tree å†™ä¸äº†äº†ï¼Œè€ƒè¯•ç»“æŸäº†ã€‚\nå‡ºè€ƒåœºå¬è¯´ T2 æ˜¯åŸé¢˜å¯ä»¥ $O(n\\log^2 n)$ï¼Œå¬è¯´ yls T2 å†™çš„å’Œæˆ‘æ˜¯ä¸€ä¸ªä¸œè¥¿ä½†æ²¡ç”¨ bitsetï¼Œå¬è¯´æœºæˆ¿ç”µè„‘å¾ˆå¿«æ‰€ä»¥ä¸ä¼šæ¯” 8700k æ…¢å¤ªå¤šï¼Œå¬è¯´ Day 1 å‰ä¸¤é¢˜å¾ˆç®€å•ï¼Œå¬è¯´ wcx 500+ã€‚\n","date":"2020-06-20T14:46:43+08:00","permalink":"https://ouuan.github.io/post/hbsx2020/","tags":["CCFç³»åˆ—èµ›äº‹","çœé€‰"],"title":"2020çœé€‰è‡ªé—­è®°"},{"categories":["çŸ¥è¯†ç‚¹"],"contents":"â€œåŠ¨æ€ DPâ€é€šè¿‡æ ‘é“¾å‰–åˆ†å°†å¸¦ä¿®æ”¹çš„æ ‘ä¸Š DP é—®é¢˜æ‹†åˆ†ä¸ºè§„æ¨¡æ›´å°çš„åºåˆ—ä¸Šçš„åŠç¾¤åˆå¹¶é—®é¢˜å’Œæ ‘ä¸Š DP é—®é¢˜ï¼Œä»è€Œå¯ä»¥å¿«é€Ÿåœ°æ”¯æŒä¿®æ”¹ã€‚\nï¼ˆè¿™ä¸€ç¯‡ä¸­æˆ‘ä¼šå°è¯•å°†å½¢å¼åŒ–çš„é—®é¢˜é€šå¼å’Œå…·ä½“çš„ä¾‹é¢˜ä¸€å¹¶è¿›è¡Œè®²è§£ã€‚ï¼‰\néœ€è§£å†³çš„é—®é¢˜ æ¦‚è¿° ä¸€ä¸ªæ ‘ä¸Š DP é—®é¢˜ï¼Œéœ€è¦æ”¯æŒå•ç‚¹ä¿®æ”¹ï¼Œå•ç‚¹è¯¢é—® DP å€¼ã€‚\nå½¢å¼åŒ–æè¿° ç»™ä½ ä¸€æ£µæœ‰æ ¹æ ‘ï¼Œæ ‘ä¸Šçš„æ¯ä¸ªç‚¹æœ‰ æƒå€¼ ä¸ DP å€¼ ä¸¤ä¸ªå±æ€§ï¼Œå…¶ä¸­ æƒå€¼ æ˜¯é¢˜ç›®ç»™å®šçš„ï¼ŒDP å€¼ æ˜¯ä½ éœ€è¦è®¡ç®—çš„ã€‚\nä»¤ç‚¹ $u$ çš„æƒå€¼ä¸º $a_u$ï¼ŒDP å€¼ä¸º $d_u$ã€‚é¢˜ç›®ç»™å®šäº†æ ‘çš„å½¢æ€ï¼Œæ¯ä¸ªç‚¹çš„åˆå§‹æƒå€¼ï¼Œä»¥åŠ DP å€¼çš„è®¡ç®—æ–¹æ³•ï¼š$d_u=f(a_u, d_{v_1}, d_{v_2}, \\ldots)$ï¼Œå…¶ä¸­ $v_i$ æ˜¯ $u$ çš„å„¿å­èŠ‚ç‚¹ï¼Œ$f$ æ˜¯ä¸€ä¸ªæ¥å—ä¸€ä¸ªæƒå€¼å’Œå¤šä¸ª DP å€¼ï¼Œè¿”å›ä¸€ä¸ª DP å€¼çš„å‡½æ•°ï¼Œæ¯ä¸ª $d_{v_i}$ å¯¹ $f$ çš„è´¡çŒ®éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸”å¯ä»¥å¿«é€Ÿåœ°è®¡ç®—åŠ å…¥/åˆ é™¤ä¸€ä¸ª $d_{v_i}$ åçš„ $f$.\nç°åœ¨ï¼Œä½ éœ€è¦æ‰§è¡Œè‹¥å¹²æ¬¡æ“ä½œï¼Œæ¯æ¬¡æ“ä½œä¸ºä»¥ä¸‹ä¹‹ä¸€ï¼š\n ç»™å®šä¸€ä¸ªç‚¹å’Œä¸€ä¸ªæƒå€¼ï¼Œå°†è¿™ä¸ªç‚¹çš„æƒå€¼ä¿®æ”¹ä¸ºç»™å®šçš„æƒå€¼ã€‚ ç»™å®šä¸€ä¸ªç‚¹ï¼Œæ±‚æ­¤æ—¶è¿™ä¸ªç‚¹çš„ DP å€¼ã€‚  é¢å¤–åœ°ï¼Œå¦‚æœå°†è®¡ç®— $f(a_1, f(a_2, f(a_3, \\ldots)))$ è§†ä½œä¸€è¿ä¸²äºŒå…ƒè¿ç®—çš„è¯ï¼Œåº”å½“å¯ä»¥å°†æƒå€¼å’Œ DP å€¼æ˜ å°„åˆ°ä¸€ä¸ªåŠç¾¤æ¥è¿›è¡Œè¿™æ ·çš„è¿ç®—ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™æ ·çš„è¿ç®—æ»¡è¶³ç»“åˆå¾‹ã€‚å¹¶ä¸”ï¼Œè¿™æ ·çš„è¿ç®—åº”å½“èƒ½å¤Ÿå¿«é€Ÿè¿›è¡Œã€‚\nä¾‹é¢˜ æ´›è°· P4719\nç»™ä½ ä¸€æ£µç”± $n$ ä¸ªç‚¹æ„æˆçš„ï¼Œç‚¹å¸¦æƒçš„æ ‘ã€‚$m$ æ¬¡ä¿®æ”¹å•ç‚¹æƒå€¼ï¼Œæ¯æ¬¡ä¿®æ”¹åä½ éœ€è¦æ±‚å‡ºæ•´æ£µæ ‘çš„æœ€å¤§æƒç‹¬ç«‹é›†çš„æƒå€¼å’Œã€‚\nâ€œç‹¬ç«‹é›†â€æ˜¯ç»™å®šçš„æ ‘ç‚¹é›†çš„ä¸€ä¸ªå­é›†ï¼Œå…¶ä¸­ä»»æ„ä¸¤ç‚¹åœ¨æ ‘ä¸Šä¸ç›¸é‚»ã€‚\n$1\\le n, m\\le 10^5$ã€‚\n åœ¨é“¾ä¸Šè§£å†³é—®é¢˜ å¦‚æœæ ‘æ˜¯ä¸€æ¡é“¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦åšçš„å…¶å®å°±æ˜¯æ±‚ä¸€ä¸ªåç¼€çš„æƒå€¼åˆå¹¶èµ·æ¥çš„ç»“æœï¼Œæ”¯æŒå•ç‚¹ä¿®æ”¹ã€‚\nåœ¨åºåˆ—ä¸Šï¼Œè¿™æ ·çš„é—®é¢˜å¾€å¾€å¯ä»¥é€šè¿‡çº¿æ®µæ ‘æ¥è§£å†³ã€‚ä½¿ç”¨çº¿æ®µæ ‘æ¥åŠ¨æ€ç»´æŠ¤åç¼€å’Œï¼Œæˆ‘ä»¬éœ€è¦èƒ½å¤Ÿå°†ä¸¤æ®µç›¸é‚»åŒºé—´çš„ä¿¡æ¯è¿›è¡Œåˆå¹¶ï¼Œè¿™ä¸€ç‚¹æ˜¯ç”±é¢˜ç›®æ€§è´¨æ‰€ä¿è¯çš„ã€‚\nä»¥ä¾‹é¢˜ä¸ºä¾‹ï¼šæˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸€æ®µåŒºé—´å¼€å¤´é€‰/ä¸é€‰ï¼Œç»“å°¾é€‰/ä¸é€‰å…±å››ç§æƒ…å†µå„è‡ªçš„æœ€å¤§æƒç‹¬ç«‹é›†æƒå€¼å’Œï¼Œé‚£ä¹ˆï¼Œåœ¨åˆå¹¶åï¼Œä¸¤ç«¯æ˜¯å¦é€‰æ‹©ä¿æŒä¸å˜ï¼Œä¸­é—´åªæœ‰ä¸¤æ®µéƒ½ä¸é€‰æˆ–å…¶ä¸­ä¸€æ®µé€‰æ‰èƒ½åˆå¹¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼š\nç”¨ $l_{i, j}$ ($i, j\\in\\{0, 1\\}$) è¡¨ç¤ºå·¦åŠæ®µå¼€å¤´æ˜¯å¦é€‰æ‹©ä¸º $i$ï¼Œç»“å°¾æ˜¯å¦é€‰æ‹©ä¸º $j$ æ—¶çš„æœ€å¤§æƒç‹¬ç«‹é›†æƒå€¼å’Œï¼Œå³åŠæ®µç”¨ $r_{i, j}$ï¼Œåˆå¹¶åç”¨ $c_{i, j}$ ç±»ä¼¼åœ°è¡¨ç¤ºï¼Œé‚£ä¹ˆï¼š\n$$ c_{i, j} = \\max(l_{i, 0} + r_{0, j}, l_{i, 0} + r_{1, j}, l_{i, 1} + r_{0, j}) $$\nè¿™æ ·çš„è¯ï¼Œä½¿ç”¨çº¿æ®µæ ‘æ¥ç»´æŠ¤ä¿¡æ¯å¹¶ï¼Œç”¨è¿™ä¸ªå…¬å¼æ¥åˆå¹¶ç›¸é‚»ä¸¤æ®µï¼Œæˆ‘ä»¬å°±åœ¨æ ‘æ˜¯ä¸€æ¡é“¾æ—¶è§£å†³äº†å¸¦ä¿®æ”¹çš„æ ‘ä¸Š DP é—®é¢˜ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿåœ°æ±‚å‡ºå¹¶æ›´æ–°é“¾ä¸Šä»»ä½•ä¸€ä¸ªåŒºé—´çš„ä¿¡æ¯å¹¶ã€‚\nè§£å†³åŸé—®é¢˜ å½“é“¾ä¸Šé—®é¢˜å¯ä»¥è§£å†³æ—¶ï¼Œæˆ‘ä»¬å¾€å¾€å¯ä»¥ä½¿ç”¨æ ‘é“¾å‰–åˆ†æ¥å°†é—®é¢˜æ¨å¹¿åˆ°æ ‘ä¸Šã€‚\næ³¨æ„ï¼Œè¿™é‡Œçš„â€œæ ‘é“¾å‰–åˆ†â€æŒ‡ä»»æ„çš„ä¸€ç§å‰–åˆ†ï¼Œä¸ä¸€å®šæ˜¯â€œé‡é“¾å‰–åˆ†â€ã€‚ä½†ä¸ºäº†å™è¿°æ–¹ä¾¿ï¼Œä¾ç„¶ä½¿ç”¨â€œé‡é“¾â€â€œè½»é“¾â€â€œé‡å„¿å­â€â€œè½»å„¿å­â€ç­‰æœ¯è¯­ã€‚\nå½“æˆ‘ä»¬å°†æ ‘å‰–åˆ†æˆè‹¥å¹²æ¡é“¾åï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿè·å¾—ä»»æ„ä¸€æ¡é‡é“¾çš„ä¸€ä¸ªåŒºé—´çš„ä¿¡æ¯å¹¶ã€‚æˆ‘ä»¬éœ€è¦åšçš„ï¼Œå…¶å®å°±æ˜¯å°†è½»å„¿å­æ‰€åœ¨é‡é“¾çš„ä¿¡æ¯åˆå¹¶ä¸Šæ¥ã€‚\næˆ‘ä»¬åœ¨è¿›è¡Œé“¾ä¸é“¾çš„ä¿¡æ¯åˆå¹¶æ—¶ï¼Œè¦æ±‚ä¸¤æ¡é“¾æ˜¯é¦–å°¾ç›¸æ¥çš„ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨é“¾ä¸é“¾çš„ä¿¡æ¯åˆå¹¶æ¥æŠŠè½»å„¿å­æ‰€åœ¨é‡é“¾çš„ä¿¡æ¯åˆå¹¶ä¸Šæ¥æ˜¯è¡Œä¸é€šçš„ã€‚ä½†ä¸è¦å¿˜äº†åŸæœ¬çš„é¢˜ç›®ï¼šæ ‘å½¢ DPã€‚æˆ‘ä»¬é™¤äº†å¯ä»¥å°†é¦–å°¾ç›¸æ¥çš„ä¸¤æ¡é“¾åˆå¹¶ï¼Œè¿˜èƒ½å°†ä¸€ä¸ªç‚¹ä¸å®ƒçš„è‹¥å¹²å­æ ‘åˆå¹¶ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªç‚¹çš„è½»å„¿å­æ‰€åœ¨é‡é“¾çš„ä¿¡æ¯åˆå¹¶åˆ°è¿™ä¸ªç‚¹ä¸Šï¼Œè®¡ç®—å‡ºè¿™ä¸ªç‚¹ä¸å…¶æ‰€æœ‰è½»å­æ ‘çš„å¹¶ï¼Œç­‰æ•ˆä¸ºä¸€ä¸ªç‚¹ã€‚\nè¿˜æ˜¯ä»¥ä¾‹é¢˜ä¸ºä¾‹ï¼šç”¨ $a_u$ ä»£æŒ‡ $u$ çš„æƒå€¼ï¼Œ$c_{v_i, 0/1, 0/1}$ ä»£æŒ‡ $v_i$ï¼ˆ$u$ çš„ä¸€ä¸ªè½»å„¿å­ï¼‰æ‰€å±çš„æ•´æ¡é‡é“¾çš„ä¿¡æ¯å¹¶ï¼Œé‚£ä¹ˆï¼š\nåœ¨è®¡ç®— $u$ æ‰€å±çš„é‡é“¾çš„ä¿¡æ¯å¹¶æ—¶ï¼Œä»¤ $[u, u]$ è¿™ä¸€æ®µçš„ä¿¡æ¯å¹¶ä¸º $c_{u, 0/1, 0/1}$ï¼Œé‚£ä¹ˆï¼š\n $c_{u, 0, 1} = c_{u, 1, 0} = -\\infty$ï¼ˆä¸€ä¸ªè¶³å¤Ÿå°çš„æ•°ï¼‰ $c_{u, 1, 1} = a_u + \\sum \\max(c_{v_i, 0, 0}, c_{v_i, 0, 1})$ $c_{u, 0, 0} = \\sum \\max(c_{v_i, 0, 0}, c_{v_i, 0, 1}, c_{v_i, 1, 0}, c_{v_i, 1, 1})$  è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†è½»é“¾çš„ä¿¡æ¯åˆå¹¶åˆ°é‡é“¾ä¸Šã€‚å¹¶ä¸”ï¼Œè½»å­æ ‘çš„è´¡çŒ®æ˜¯ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥å¯ä»¥å¿«é€Ÿåœ°æ›´æ–°ä¸€ä¸ªè½»å­æ ‘çš„ä¿¡æ¯ã€‚æ­¤æ—¶ï¼Œä¸€ä¸ªç‚¹åˆ°å…¶æ‰€åœ¨é‡é“¾çš„åº•ç«¯çš„ä¿¡æ¯å¹¶å°±æ˜¯è¿™ä¸ªç‚¹çš„ DP å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™æ ·çš„ä¸€æ®µé“¾å®é™…ä¸Šæ˜¯æ•´ä¸ªå­æ ‘çš„ä¿¡æ¯å¹¶ã€‚\nä¸ºäº†å¿«é€Ÿåœ°è¿›è¡Œè¿™æ ·çš„è®¡ç®—ï¼Œå¯ä»¥ï¼šï¼ˆæ—¶é—´å¤æ‚åº¦æ˜¯åœ¨ä¿¡æ¯åˆå¹¶å¤æ‚åº¦ä¸º $O(1)$ çš„æƒ…å†µä¸‹ï¼‰\n ä½¿ç”¨é‡é“¾å‰–åˆ†ï¼Œæ¯æ¬¡å•ç‚¹ä¿®æ”¹æ—¶ä¸æ–­å‘ä¸Šå°†å½“å‰æ‰€åœ¨é‡é“¾åˆå¹¶åˆ°å½“å‰æ‰€åœ¨é‡é“¾é¡¶ç«¯çš„çˆ¶äº²ã€‚ï¼ˆ$O(n\\log n+m\\log^2n)$ï¼‰ ä½¿ç”¨ LCT æ¥ç»´æŠ¤å®é“¾å‰–åˆ†ï¼Œç”¨ç±»ä¼¼ç»´æŠ¤å­æ ‘ä¿¡æ¯çš„æ–¹å¼æ¥ç»´æŠ¤è½»å„¿å­çš„ä¿¡æ¯ã€‚ï¼ˆ$O((n + m)\\log n))$ï¼Œå¸¸æ•°ç•¥å¤§ï¼‰ ä½¿ç”¨å…¨å±€å¹³è¡¡äºŒå‰æ ‘ã€‚ï¼ˆ$O((n + m)\\log n))$ï¼Œå¸¸æ•°è¾ƒå°ï¼‰  ä¾‹é¢˜å‚è€ƒä»£ç  æ ‘é“¾å‰–åˆ† ï¼ˆä½¿ç”¨äº† CPTHï¼‰\nï¼ˆå¸¸æ•°æœ‰ç‚¹å¤§ï¼Œè¢«è¿«åœ¨ Val é‡Œä½¿ç”¨æ•°ç»„è€Œé vectorï¼‰\n#ifndef CPTH_SEGMENTTREE #define CPTH_SEGMENTTREE #include\u0026lt;cassert\u0026gt; #include\u0026lt;climits\u0026gt; #include\u0026lt;functional\u0026gt; #include\u0026lt;vector\u0026gt; namespace CPTH{template\u0026lt;typename valueType,typename modType\u0026gt;struct SegmentTreeNode{std::size_t id;long long left,right;valueType val;modType mod;};template\u0026lt;typename valueType,typename modType,bool elementModificationOnly=false\u0026gt;class SegmentTree{public:SegmentTree()=default;SegmentTree(const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,std::function\u0026lt;valueType(const valueType\u0026amp;,const valueType\u0026amp;)\u0026gt;_merge,std::function\u0026lt;void(SegmentTreeNode\u0026lt;valueType,modType\u0026gt;\u0026amp;,const modType\u0026amp;)\u0026gt;_update,long long _startPoint=1,const valueType\u0026amp;_valueZero=valueType(),const modType\u0026amp;_modZero=modType());void init(const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,std::function\u0026lt;valueType(const valueType\u0026amp;,const valueType\u0026amp;)\u0026gt;_merge,std::function\u0026lt;void(SegmentTreeNode\u0026lt;valueType,modType\u0026gt;\u0026amp;,const modType\u0026amp;)\u0026gt;_update,long long _startPoint=1,const valueType\u0026amp;_valueZero=valueType(),const modType\u0026amp;_modZero=modType());void modify(long long l,long long r,const modType\u0026amp;mod);void modify(long long p,const modType\u0026amp;mod);valueType query(long long l,long long r);valueType query(long long p);private:void pushup(std::size_t cur);void pushdown(std::size_t cur);void build(std::size_t cur,long long l,long long r,const std::vector\u0026lt;valueType\u0026gt;\u0026amp;initValue);void m_init(const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,std::function\u0026lt;valueType(const valueType\u0026amp;,const valueType\u0026amp;)\u0026gt;_merge,std::function\u0026lt;void(SegmentTreeNode\u0026lt;valueType,modType\u0026gt;\u0026amp;,const modType\u0026amp;)\u0026gt;_update,const valueType\u0026amp;_valueZero,const modType\u0026amp;_modZero);void modify(std::size_t cur,long long l,long long r,long long L,long long R,const modType\u0026amp;mod);valueType query(std::size_t cur,long long l,long long r,long long L,long long R);std::function\u0026lt;valueType(const valueType\u0026amp;,const valueType\u0026amp;)\u0026gt;merge;std::function\u0026lt;void(SegmentTreeNode\u0026lt;valueType,modType\u0026gt;\u0026amp;,const modType\u0026amp;)\u0026gt;update;std::vector\u0026lt;SegmentTreeNode\u0026lt;valueType,modType\u0026gt;\u0026gt;nodes;long long leftRange=0,rightRange=0;valueType valueZero;modType modZero;};template\u0026lt;typename valueType,typename modType,bool elementModificationOnly\u0026gt;SegmentTree\u0026lt;valueType,modType,elementModificationOnly\u0026gt;::SegmentTree(const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,std::function\u0026lt;valueType(const valueType\u0026amp;,const valueType\u0026amp;)\u0026gt;_merge,std::function\u0026lt;void(SegmentTreeNode\u0026lt;valueType,modType\u0026gt;\u0026amp;,const modType\u0026amp;)\u0026gt;_update,long long _startPoint,const valueType\u0026amp;_valueZero,const modType\u0026amp;_modZero){init(_initValue,_merge,_update,_startPoint,_valueZero,_modZero);}template\u0026lt;typename valueType,typename modType,bool elementModificationOnly\u0026gt;void SegmentTree\u0026lt;valueType,modType,elementModificationOnly\u0026gt;::init(const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,std::function\u0026lt;valueType(const valueType\u0026amp;,const valueType\u0026amp;)\u0026gt;_merge,std::function\u0026lt;void(SegmentTreeNode\u0026lt;valueType,modType\u0026gt;\u0026amp;,const modType\u0026amp;)\u0026gt;_update,long long _startPoint,const valueType\u0026amp;_valueZero,const modType\u0026amp;_modZero){assert(_startPoint\u0026gt;=LLONG_MIN/2);assert(_startPoint\u0026lt;=LLONG_MAX/2-(long long)_initValue.size());leftRange=_startPoint;rightRange=_startPoint+_initValue.size();m_init(_initValue,_merge,_update,_valueZero,_modZero);}template\u0026lt;typename valueType,typename modType,bool elementModificationOnly\u0026gt;void SegmentTree\u0026lt;valueType,modType,elementModificationOnly\u0026gt;::modify(long long l,long long r,const modType\u0026amp;mod){assert(!elementModificationOnly);modify(1,leftRange,rightRange,l,r,mod);}template\u0026lt;typename valueType,typename modType,bool elementModificationOnly\u0026gt;void SegmentTree\u0026lt;valueType,modType,elementModificationOnly\u0026gt;::modify(long long p,const modType\u0026amp;mod){assert(p\u0026lt;LLONG_MAX);modify(1,leftRange,rightRange,p,p+1,mod);}template\u0026lt;typename valueType,typename modType,bool elementModificationOnly\u0026gt;valueType SegmentTree\u0026lt;valueType,modType,elementModificationOnly\u0026gt;::query(long long l,long long r){return query(1,leftRange,rightRange,l,r);}template\u0026lt;typename valueType,typename modType,bool elementModificationOnly\u0026gt;valueType SegmentTree\u0026lt;valueType,modType,elementModificationOnly\u0026gt;::query(long long p){return query(p,p+1);}template\u0026lt;typename valueType,typename modType,bool elementModificationOnly\u0026gt;void SegmentTree\u0026lt;valueType,modType,elementModificationOnly\u0026gt;::pushup(std::size_t cur){nodes[cur].val=merge(nodes[cur\u0026lt;\u0026lt;1].val,nodes[cur\u0026lt;\u0026lt;1|1].val);}template\u0026lt;typename valueType,typename modType,bool elementModificationOnly\u0026gt;void SegmentTree\u0026lt;valueType,modType,elementModificationOnly\u0026gt;::pushdown(std::size_t cur){update(nodes[cur\u0026lt;\u0026lt;1],nodes[cur].mod);update(nodes[cur\u0026lt;\u0026lt;1|1],nodes[cur].mod);nodes[cur].mod=modZero;}template\u0026lt;typename valueType,typename modType,bool elementModificationOnly\u0026gt;void SegmentTree\u0026lt;valueType,modType,elementModificationOnly\u0026gt;::build(std::size_t cur,long long l,long long r,const std::vector\u0026lt;valueType\u0026gt;\u0026amp;initValue){nodes[cur].id=cur;nodes[cur].left=l;nodes[cur].right=r;nodes[cur].mod=modZero;if(l==r-1)nodes[cur].val=initValue[l-leftRange];else{build(cur\u0026lt;\u0026lt;1,l,(l+r)\u0026gt;\u0026gt;1,initValue);build(cur\u0026lt;\u0026lt;1|1,(l+r)\u0026gt;\u0026gt;1,r,initValue);pushup(cur);}}template\u0026lt;typename valueType,typename modType,bool elementModificationOnly\u0026gt;void SegmentTree\u0026lt;valueType,modType,elementModificationOnly\u0026gt;::m_init(const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,std::function\u0026lt;valueType(const valueType\u0026amp;,const valueType\u0026amp;)\u0026gt;_merge,std::function\u0026lt;void(SegmentTreeNode\u0026lt;valueType,modType\u0026gt;\u0026amp;,const modType\u0026amp;)\u0026gt;_update,const valueType\u0026amp;_valueZero,const modType\u0026amp;_modZero){merge=_merge;update=_update;valueZero=_valueZero;modZero=_modZero;nodes.resize((rightRange-leftRange)\u0026lt;\u0026lt;2);build(1,leftRange,rightRange,_initValue);}template\u0026lt;typename valueType,typename modType,bool elementModificationOnly\u0026gt;void SegmentTree\u0026lt;valueType,modType,elementModificationOnly\u0026gt;::modify(std::size_t cur,long long l,long long r,long long L,long long R,const modType\u0026amp;mod){if(l\u0026gt;=R||r\u0026lt;=L)return;if(L\u0026lt;=l\u0026amp;\u0026amp;r\u0026lt;=R)update(nodes[cur],mod);else{if(!elementModificationOnly)pushdown(cur);modify(cur\u0026lt;\u0026lt;1,l,(l+r)\u0026gt;\u0026gt;1,L,R,mod);modify(cur\u0026lt;\u0026lt;1|1,(l+r)\u0026gt;\u0026gt;1,r,L,R,mod);pushup(cur);}}template\u0026lt;typename valueType,typename modType,bool elementModificationOnly\u0026gt;valueType SegmentTree\u0026lt;valueType,modType,elementModificationOnly\u0026gt;::query(std::size_t cur,long long l,long long r,long long L,long long R){if(l\u0026gt;=R||r\u0026lt;=L)return valueZero;if(L\u0026lt;=l\u0026amp;\u0026amp;r\u0026lt;=R)return nodes[cur].val;if(!elementModificationOnly)pushdown(cur);return merge(query(cur\u0026lt;\u0026lt;1,l,(l+r)\u0026gt;\u0026gt;1,L,R),query(cur\u0026lt;\u0026lt;1|1,(l+r)\u0026gt;\u0026gt;1,r,L,R));}} #endif #ifndef CPTH_HLD #define CPTH_HLD #include\u0026lt;algorithm\u0026gt; #include\u0026lt;cassert\u0026gt; #include\u0026lt;vector\u0026gt; namespace CPTH{class HLD{public:HLD(std::size_t size=0);void reset(std::size_t size);void addEdge(std::size_t u,std::size_t v);void build(std::size_t root=1);std::size_t lca(std::size_t u,std::size_t v)const;std::size_t id(std::size_t u)const;std::size_t atId(std::size_t x)const;std::size_t top(std::size_t u)const;std::size_t bottom(std::size_t u)const;std::size_t parent(std::size_t u)const;std::vector\u0026lt;std::size_t\u0026gt;children(std::size_t u)const;std::pair\u0026lt;std::size_t,std::size_t\u0026gt;subtree(std::size_t u)const;std::vector\u0026lt;std::pair\u0026lt;std::size_t,std::size_t\u0026gt;\u0026gt;path(std::size_t u,std::size_t v)const;private:void dfs1(std::size_t u);void dfs2(std::size_t u);void validate(std::size_t u)const;private:bool built;std::size_t n,dfntot;std::vector\u0026lt;std::vector\u0026lt;std::size_t\u0026gt;\u0026gt;g;std::vector\u0026lt;std::size_t\u0026gt;pa,heavy,dep,siz,tp,bt,dfn,rdfn,exi;};HLD::HLD(std::size_t size){reset(size);}void HLD::reset(std::size_t size){assert(size\u0026lt;g.max_size());assert(size\u0026lt;pa.max_size());built=false;n=size;dfntot=0;g.clear();g.resize(n+1);pa.assign(n+1,0);heavy=dep=siz=tp=bt=dfn=rdfn=exi=pa;}void HLD::addEdge(std::size_t u,std::size_t v){validate(u);validate(v);g[u].push_back(v);g[v].push_back(u);}void HLD::build(std::size_t root){if(built)return;assert(n\u0026gt;=1);validate(root);dfs1(root);tp[root]=root;dfs2(root);assert(dfntot==n);built=true;}std::size_t HLD::lca(std::size_t u,std::size_t v)const{assert(built);validate(u);validate(v);while(tp[u]!=tp[v]){if(dep[tp[u]]\u0026gt;dep[tp[v]])u=pa[tp[u]];else v=pa[tp[v]];}return dep[u]\u0026lt;dep[v]?u:v;}std::size_t HLD::id(std::size_t u)const{assert(built);validate(u);return dfn[u];}std::size_t HLD::atId(std::size_t x)const{assert(built);validate(x);return rdfn[x];}std::size_t HLD::top(std::size_t u)const{assert(built);validate(u);return tp[u];}std::size_t HLD::bottom(std::size_t u)const{assert(built);validate(u);return bt[tp[u]];}std::size_t HLD::parent(std::size_t u)const{assert(built);validate(u);return pa[u];}std::vector\u0026lt;std::size_t\u0026gt;HLD::children(std::size_t u)const{auto ret=g[u];if(pa[u])ret.erase(std::find(ret.begin(),ret.end(),pa[u]));return ret;}std::pair\u0026lt;std::size_t,std::size_t\u0026gt;HLD::subtree(std::size_t u)const{assert(built);validate(u);return{dfn[u],exi[u]};}std::vector\u0026lt;std::pair\u0026lt;std::size_t,std::size_t\u0026gt;\u0026gt;HLD::path(std::size_t u,std::size_t v)const{assert(built);validate(u);validate(v);std::vector\u0026lt;std::pair\u0026lt;std::size_t,std::size_t\u0026gt;\u0026gt;res;while(tp[u]!=tp[v]){if(dep[tp[u]]\u0026gt;dep[tp[v]]){res.emplace_back(dfn[tp[u]],dfn[u]);u=pa[tp[u]];}else{res.emplace_back(dfn[tp[v]],dfn[v]);v=pa[tp[v]];}}if(dep[u]\u0026gt;dep[v])std::swap(u,v);res.emplace_back(dfn[u],dfn[v]);return res;}void HLD::dfs1(std::size_t u){assert(siz[u]==0);siz[u]=1;for(auto v:g[u]){if(v==pa[u])continue;dep[v]=dep[u]+1;pa[v]=u;dfs1(v);siz[u]+=siz[v];if(siz[v]\u0026gt;siz[heavy[u]])heavy[u]=v;}}void HLD::dfs2(std::size_t u){bt[tp[u]]=u;dfn[u]=++dfntot;rdfn[dfn[u]]=u;if(heavy[u]){tp[heavy[u]]=tp[u];dfs2(heavy[u]);for(auto v:g[u]){if(v==pa[u]||v==heavy[u])continue;tp[v]=v;dfs2(v);}}exi[u]=dfntot;}void HLD::validate(std::size_t u)const{assert(u\u0026gt;=1);assert(u\u0026lt;=n);}} #endif #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;set\u0026gt; #include \u0026lt;map\u0026gt; int read() { int out = 0, f = 1; char c = getchar(); while (!isdigit(c) \u0026amp;\u0026amp; c != '-') c = getchar(); if (c == '-') { f = -1; c = getchar(); } for (; isdigit(c); c = getchar()) out = out * 10 + c - '0'; return out * f; } using namespace CPTH; using namespace std; typedef vector\u0026lt;int\u0026gt; vi; typedef vector\u0026lt;vi\u0026gt; vvi; const int INF = 1e9; struct Val { int a[2][2]; Val() { a[0][0] = a[1][1] = -INF; a[0][1] = a[1][0] = 0; } int *operator[](int x) { return a[x]; } const int *operator[](int x) const { return a[x]; } Val operator+(const Val \u0026amp;b) const { Val ret; for (int i = 0; i \u0026lt; 2; ++i) { for (int j = 0; j \u0026lt; 2; ++j) { ret[i][j] = max({a[i][0] + b[0][j], a[i][0] + b[1][j], a[i][1] + b[0][j]}); } } return ret; } int ans() { return max({a[0][0], a[0][1], a[1][0], a[1][1]}); } }; struct SingleVal : public Val // è‡ªè¡Œæœç´¢ï¼šC++ ç±»ç»§æ‰¿ { int self, ch0, ch1; explicit SingleVal(int x = 0) : Val(), self(x), ch0(0), ch1(0) { update(); } void update() { a[0][0] = ch1; a[1][1] = self + ch0; a[0][1] = a[1][0] = -INF; } void modify(int x) { self = x; update(); } void add(const Val \u0026amp;x) { ch0 += max(x[0][0], x[0][1]); ch1 += max({x[0][0], x[0][1], x[1][0], x[1][1]}); update(); } void del(const Val \u0026amp;x) { ch0 -= max(x[0][0], x[0][1]); ch1 -= max({x[0][0], x[0][1], x[1][0], x[1][1]}); update(); } }; int main() { int n = read(); int m = read(); vector\u0026lt;SingleVal\u0026gt; a(n + 1); vector\u0026lt;Val\u0026gt; init(n), b(n + 1); for (int i = 1; i \u0026lt;= n; ++i) a[i] = SingleVal(read()); HLD hld(n); for (int i = 1; i \u0026lt; n; ++i) hld.addEdge(read(), read()); hld.build(); for (int i = 1; i \u0026lt;= n; ++i) init[i - 1] = a[hld.atId(i)]; SegmentTree\u0026lt;Val, bool, true\u0026gt; seg( init, plus\u0026lt;Val\u0026gt;(), [\u0026amp;](SegmentTreeNode\u0026lt;Val, bool\u0026gt; \u0026amp;u, bool x) { if (x) u.val = a[hld.atId(u.left)]; } ); for (int i = n; i \u0026gt;= 2; --i) { int u = hld.atId(i); if (u == (int)hld.top(u)) { b[u] = seg.query(i, hld.id(hld.bottom(u)) + 1); a[hld.parent(u)].add(b[u]); seg.modify(hld.id(hld.parent(u)), true); } } while (m--) { int x = read(); int y = read(); a[x].modify(y); seg.modify(hld.id(x), true); while (1) { x = hld.top(x); y = hld.parent(x); if (!y) break; a[y].del(b[x]); b[x] = seg.query(hld.id(x), hld.id(hld.bottom(x)) + 1); a[y].add(b[x]); seg.modify(hld.id(y), true); x = y; } printf(\u0026quot;%d\\n\u0026quot;, seg.query(1, hld.id(hld.bottom(1)) + 1).ans()); } return 0; }   LCT #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;algorithm\u0026gt; #include \u0026lt;functional\u0026gt; using namespace std; int read() { int out = 0, f = 1; char c = getchar(); while (!isdigit(c) \u0026amp;\u0026amp; c != '-') c = getchar(); if (c == '-') { f = -1; c = getchar(); } for (; isdigit(c); c = getchar()) out = out * 10 + c - '0'; return out * f; } const int INF = 1e9; typedef vector\u0026lt;int\u0026gt; vi; struct Val { int a[2][2]; Val() { a[0][0] = a[1][1] = -INF; a[0][1] = a[1][0] = 0; } int *operator[](int x) { return a[x]; } const int *operator[](int x) const { return a[x]; } Val operator+(const Val \u0026amp;b) const { Val ret; for (int i = 0; i \u0026lt; 2; ++i) { for (int j = 0; j \u0026lt; 2; ++j) { ret[i][j] = max({a[i][0] + b[0][j], a[i][0] + b[1][j], a[i][1] + b[0][j]}); } } return ret; } int ans() { return max({a[0][0], a[0][1], a[1][0], a[1][1]}); } }; struct SingleVal : public Val // è‡ªè¡Œæœç´¢ï¼šC++ ç±»ç»§æ‰¿ { int self, ch0, ch1; explicit SingleVal(int x = 0) : Val(), self(x), ch0(0), ch1(0) { update(); } void update() { a[0][0] = ch1; a[1][1] = self + ch0; a[0][1] = a[1][0] = -INF; } void modify(int x) { self = x; update(); } void add(const Val \u0026amp;x) { ch0 += max(x[0][0], x[0][1]); ch1 += max({x[0][0], x[0][1], x[1][0], x[1][1]}); update(); } void del(const Val \u0026amp;x) { ch0 -= max(x[0][0], x[0][1]); ch1 -= max({x[0][0], x[0][1], x[1][0], x[1][1]}); update(); } }; struct LCT { struct Node { vi ch; int pa; Val sum; SingleVal self; Node() : ch(2), pa(0), sum(), self() {} }; vector\u0026lt;Node\u0026gt; t; LCT(int n) : t(n + 1) {} bool nroot(int x) { return x == t[t[x].pa].ch[0] || x == t[t[x].pa].ch[1]; } void pushup(int x) { t[x].sum = t[t[x].ch[0]].sum + t[x].self + t[t[x].ch[1]].sum; } void rotate(int x) { int y = t[x].pa; int z = t[y].pa; int k = x == t[y].ch[1]; if (nroot(y)) t[z].ch[y == t[z].ch[1]] = x; t[x].pa = z; t[y].ch[k] = t[x].ch[k ^ 1]; t[t[x].ch[k ^ 1]].pa = y; t[x].ch[k ^ 1] = y; t[y].pa = x; pushup(y); pushup(x); } void Splay(int x) { while (nroot(x)) { int y = t[x].pa; int z = t[y].pa; if (nroot(y)) rotate((x == t[y].ch[1]) ^ (y == t[z].ch[1]) ? x : y); rotate(x); } } void access(int x) { for (int y = 0; x; x = t[y = x].pa) { Splay(x); if (y) t[x].self.del(t[y].sum); if (t[x].ch[1]) t[x].self.add(t[t[x].ch[1]].sum); t[x].ch[1] = y; pushup(x); } } void link(int u, int pa) { // ä¸ºäº†åªç”¨ä»è½»å„¿å­å‘ä¸Šæ›´æ–°ä¸€æ¬¡ï¼Œlink æ—¶ä¸¤æ®µéƒ½è¦ access, Splay access(u); Splay(u); access(pa); Splay(pa); t[u].pa = pa; t[pa].self.add(t[u].sum); pushup(pa); } void modify(int u, int x) { access(u); Splay(u); t[u].self.modify(x); pushup(u); } int query() { Splay(1); return max({t[1].sum[0][0], t[1].sum[0][1], t[1].sum[1][0], t[1].sum[1][1]}); } }; int main() { int n = read(); int m = read(); LCT lct(n); for (int i = 1; i \u0026lt;= n; ++i) lct.modify(i, read()); vector\u0026lt;vi\u0026gt; g(n + 1); for (int i = 1; i \u0026lt; n; ++i) { int u = read(); int v = read(); g[u].push_back(v); g[v].push_back(u); } function\u0026lt;void(int, int)\u0026gt; dfs = [\u0026amp;](int u, int pa) { for (auto v : g[u]) { if (v == pa) continue; lct.link(v, u); dfs(v, u); } }; dfs(1, 0); while (m--) { int u = read(); int x = read(); lct.modify(u, x); printf(\u0026quot;%d\\n\u0026quot;, lct.query()); } return 0; }   å…¶å®ƒé¢˜ç›® BZOJ5210 æœ€å¤§è¿é€šå­å—å’Œï¼Œæ„Ÿè§‰èƒ½ç”¨çº¿æ®µæ ‘ç»´æŠ¤æœ€å¤§å­æ®µå’Œé‚£ä¸€å¥—ï¼ˆæ ¹æœ¬ä¸éœ€è¦ä»€ä¹ˆâ€œå¹¿ä¹‰çŸ©é˜µâ€ï¼Œä¼šåºåˆ—é—®é¢˜å°±èƒ½åšçš„å•Š..ï¼‰ï¼Œå†™äº†ä¸‹è¿‡äº†æ ·ä¾‹ï¼Œä½†åªåœ¨ BZOJ æ‰¾åˆ°äº†è¿™é“é¢˜ï¼Œä¸€ä¸å°å¿ƒ ç”¨äº† C++11ï¼Œæ‡’å¾—æ”¹æˆ C++98 äº†ï¼Œå°±æ²¡äº¤ã€‚æ„Ÿè§‰æŒºå¯¹çš„ï¼Œå°±ç®—æŒ‚äº†ä¹Ÿåº”è¯¥æ˜¯å†™æŒ‚äº†..\nè¯´å¥é—²è¯ ä¸ºå•¥å…¶ä»–äººçš„åšå®¢è®²åŠ¨æ€ DP ä¸Šæ¥å°±ä¸€ä¸ªçŸ©é˜µå•Š..å‡­å•¥æƒ³åˆ°å¯ä»¥ç”¨çŸ©é˜µè½¬ç§»å•Š..æ ¹æœ¬å°±ä¸éœ€è¦çŸ©é˜µçš„..éšä¾¿æ¥ä¸ªåŠç¾¤å°±å¥½äº†..ç²¾é«“æ ¹æœ¬ä¸åœ¨çŸ©é˜µå§..èƒ½è½¬åŒ–æˆçŸ©é˜µçš„å½¢å¼è€Œå·²..\n","date":"2020-05-07T20:58:54+08:00","permalink":"https://ouuan.github.io/post/tree-dp-with-modification/","tags":["åŠ¨æ€DP","æ ‘å½¢DP","çº¿æ®µæ ‘","LCT","æ•°æ®ç»“æ„"],"title":"å¸¦ä¿®æ”¹çš„æ ‘ä¸Š DP é—®é¢˜ï¼ˆåŠ¨æ€ DPï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥\né¢˜ç›®æè¿°\nç»™ä½ ä¸€ä¸ªæ•°åˆ— $a_{1..n}$ï¼Œè¿›è¡Œ $m$ æ¬¡è¯¢é—®ï¼Œæ¯æ¬¡è¯¢é—®ç»™å‡ºä¸€ä¸ªåŒºé—´ $[l, r]$ åŠå‚æ•° $w$ï¼Œè¯¢é—® $\\max_{i = l}^{r-w+1}\\{\\min_{j=i}^{i+w-1}\\{a_j\\}\\}$ã€‚\næ•°åˆ—é•¿åº¦å’Œè¯¢é—®æ¬¡æ•° $10^5$ã€‚\n ç®€è¦åšæ³• O((n+m)log^2n) åšæ³• äºŒåˆ†ç­”æ¡ˆï¼Œè®°å½“å‰äºŒåˆ†çš„å€¼ä¸º $x$ï¼Œå®šä¹‰ $b_i=\\begin{cases}1\u0026amp;a_i\\ge x\\\\-n\u0026amp;a_i\u0026lt;x\\end{cases}$ï¼Œé‚£ä¹ˆç­”æ¡ˆä¸å°äº $x$ å½“ä¸”ä»…å½“ $b_{l..r}$ çš„æœ€å¤§å­æ®µå’Œä¸å°äº $w$ã€‚\næœ€å¤§å­æ®µå’Œå¯ä»¥ç”¨çº¿æ®µæ ‘ç»´æŠ¤ï¼Œè®°å½•æ¯ä¸ªåŒºé—´çš„æœ€å¤§å­æ®µå’Œï¼Œæœ€å¤§å‰ç¼€ï¼Œæœ€å¤§åç¼€ï¼Œä»¥åŠæ€»å’Œå³å¯ã€‚\nç„¶åç”¨ä¸»å¸­æ ‘æˆ– æ•´ä½“äºŒåˆ† å°±èƒ½åœ¨ $O((n+m)\\log^2n)$ çš„æ—¶é—´å¤æ‚åº¦å†…è§£å†³è¿™é“é¢˜ã€‚\nï¼ˆå…¶å®æˆ‘è‡ªå·±æ²¡å†™ä¸»å¸­æ ‘åšæ³•ï¼Œå¬è¯´åˆ«äººéƒ½å†™çš„ä¸»å¸­æ ‘ï¼Œå£èƒ¡äº†ä¸€ä¸‹ï¼Œæ„Ÿè§‰åº”è¯¥å’Œæ•´ä½“äºŒåˆ†åšæ³•å·®ä¸å¤š..ï¼‰\nO((n+m)(logn+logm)) åšæ³• é¦–å…ˆç”¨å•è°ƒæ ˆæ±‚å‡ºæ¯ä¸ªç‚¹ä½œä¸ºæœ€å°å€¼æœ€è¿œèƒ½å‘å·¦å»¶ä¼¸åˆ° $p_i$ï¼Œå‘å³å»¶ä¼¸åˆ° $q_i$ã€‚\né‚£ä¹ˆï¼Œæˆ‘ä»¬å°†æ¯ä¸ª $[p_i, q_i]$ çœ‹ä½œä¸€æ¡æƒå€¼ä¸º $a_i$ çš„çº¿æ®µï¼Œæ¯æ¬¡è¯¢é—®å°±æ˜¯æ±‚ä¸ $[l, r]$ çš„äº¤ä¸å°äº $w$ çš„çº¿æ®µé‡Œæœ€å¤§çš„æƒå€¼ã€‚\n$[p_i, q_i]$ å’Œ $[l, r]$ ç›¸äº¤æœ‰ä¸¤ç§æƒ…å†µï¼š\n  $p_i\u0026lt;l$\næ­¤æ—¶è‹¥ $[p_i, q_i]$ å’Œ $[l, r]$ çš„äº¤ä¸å°äº $w$ï¼Œåˆ™ $[l, l+w-1]$ å¿…ç„¶æ˜¯ä¸€ä¸ªåˆæ³•çš„äº¤ã€‚è€Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ$\\min_{j=l}^{l+w-1}\\{a_j\\}$ å¿…ç„¶ä¸å°äº $a_i$ï¼ˆå› ä¸º $a_i$ æ˜¯ $[p_i, q_i]$ å†…çš„æœ€å°å€¼ï¼Œè€Œ $[p_i, q_i]$ åŒ…å« $[l, l+w-1]$ï¼‰ï¼Œæ‰€ä»¥åªéœ€è€ƒè™‘ $[l, l+w-1]$ ä¾¿ä¸åŠ£äºè¿™ç§æƒ…å†µä¸‹çš„ä»»ä¸€çº¿æ®µã€‚\n  $p_i\\ge l$\nè¿™ç§æƒ…å†µä¸‹ï¼Œ$[p_i, q_i]$ å’Œ $[l, r]$ çš„äº¤ä¸å°äº $w$ ç­‰ä»·äº $l\\le p_i\\le r-w+1$ ä¸” $q_i-p_i+1\\ge w$ã€‚åªè¦å¯¹çº¿æ®µå’Œè¯¢é—®åˆ†åˆ«æŒ‰é•¿åº¦å’Œ $w$ ä»å¤§åˆ°å°æ’åºï¼ŒåŒæŒ‡é’ˆæšä¸¾å°±å¯ä»¥æ»¡è¶³ $q_i-p_i+1\\ge w$ï¼Œè€Œ $\\max_{l\\le p_i\\le r-w+1}a_i$ å¯ä»¥ç”¨çº¿æ®µæ ‘ç»´æŠ¤ï¼ˆæšä¸¾åˆ°çº¿æ®µæ—¶åœ¨ $p_i$ å¤„å¯¹ $a_i$ å– maxï¼Œæšä¸¾åˆ°è¯¢é—®æ—¶åœ¨ $[l, r-w+1]$ è¿™ä¸ªåŒºé—´ä¸Šæ±‚ maxï¼‰ã€‚\n  ç„¶åæŠŠè¿™ä¸¤ç§æƒ…å†µçš„ç­”æ¡ˆå– maxï¼Œå°±åšå®Œäº†ã€‚\nå‚è€ƒä»£ç  ä»£ç ä¸­çš„çº¿æ®µæ ‘ç”¨äº† æ¿å­ã€‚æ•´ä½“äºŒåˆ†è¿™ä»½ä»£ç è¿˜ç”¨äº† CF æ¿å­ã€‚\næ•´ä½“äºŒåˆ† O((n\u0026#43;m)log^2n) #ifndef OUUAN #pragma GCC optimize(\u0026quot;Ofast,no-stack-protector,unroll-loops,fast-math\u0026quot;) #endif #include\u0026lt;bits/stdc++.h\u0026gt; template\u0026lt;typename valueType,typename modType\u0026gt;struct SegmentTreeNode{public:std::size_t id;long long left,right;valueType val;modType mod;};template\u0026lt;typename valueType,typename modType,bool elementModificationOnly=false\u0026gt;class SegmentTree{public:SegmentTree()=default;SegmentTree(const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,std::function\u0026lt;valueType(const valueType\u0026amp;,const valueType\u0026amp;)\u0026gt;_merge,std::function\u0026lt;void(SegmentTreeNode\u0026lt;valueType,modType\u0026gt;\u0026amp;,const modType\u0026amp;)\u0026gt;_update,long long _startPoint=1,const valueType\u0026amp;_valueZero=valueType(),const modType\u0026amp;_modZero=modType()){init(_initValue,_merge,_update,_startPoint,_valueZero,_modZero);}void init(const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,std::function\u0026lt;valueType(const valueType\u0026amp;,const valueType\u0026amp;)\u0026gt;_merge,std::function\u0026lt;void(SegmentTreeNode\u0026lt;valueType,modType\u0026gt;\u0026amp;,const modType\u0026amp;)\u0026gt;_update,long long _startPoint=1,const valueType\u0026amp;_valueZero=valueType(),const modType\u0026amp;_modZero=modType()){assert(_startPoint\u0026gt;=LLONG_MIN/2);assert(_startPoint\u0026lt;=LLONG_MAX/2-(long long)_initValue.size());leftRange=_startPoint;rightRange=_startPoint+_initValue.size();m_init(_initValue,_merge,_update,_valueZero,_modZero);}void modify(long long l,long long r,const modType\u0026amp;mod){assert(!elementModificationOnly);modify(1,leftRange,rightRange,l,r,mod);}void modify(long long p,const modType\u0026amp;mod){assert(p\u0026lt;LLONG_MAX);modify(1,leftRange,rightRange,p,p+1,mod);}valueType query(long long l,long long r){return query(1,leftRange,rightRange,l,r);}valueType query(long long p){return query(p,p+1);}private:void pushup(std::size_t cur){nodes[cur].val=merge(nodes[cur\u0026lt;\u0026lt;1].val,nodes[cur\u0026lt;\u0026lt;1|1].val);}void pushdown(std::size_t cur){update(nodes[cur\u0026lt;\u0026lt;1],nodes[cur].mod);update(nodes[cur\u0026lt;\u0026lt;1|1],nodes[cur].mod);nodes[cur].mod=modZero;}void build(std::size_t cur,long long l,long long r,const std::vector\u0026lt;valueType\u0026gt;\u0026amp;initValue){nodes[cur].id=cur;nodes[cur].left=l;nodes[cur].right=r;nodes[cur].mod=modZero;if(l==r-1)nodes[cur].val=initValue[l-leftRange];else{build(cur\u0026lt;\u0026lt;1,l,(l+r)\u0026gt;\u0026gt;1,initValue);build(cur\u0026lt;\u0026lt;1|1,(l+r)\u0026gt;\u0026gt;1,r,initValue);pushup(cur);}}void m_init(const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,std::function\u0026lt;valueType(const valueType\u0026amp;,const valueType\u0026amp;)\u0026gt;_merge,std::function\u0026lt;void(SegmentTreeNode\u0026lt;valueType,modType\u0026gt;\u0026amp;,const modType\u0026amp;)\u0026gt;_update,const valueType\u0026amp;_valueZero,const modType\u0026amp;_modZero){merge=_merge;update=_update;valueZero=_valueZero;modZero=_modZero;nodes.resize((rightRange-leftRange)\u0026lt;\u0026lt;2);build(1,leftRange,rightRange,_initValue);}void modify(std::size_t cur,long long l,long long r,long long L,long long R,const modType\u0026amp;mod){if(l\u0026gt;=R||r\u0026lt;=L)return;if(L\u0026lt;=l\u0026amp;\u0026amp;r\u0026lt;=R)update(nodes[cur],mod);else{if(!elementModificationOnly)pushdown(cur);modify(cur\u0026lt;\u0026lt;1,l,(l+r)\u0026gt;\u0026gt;1,L,R,mod);modify(cur\u0026lt;\u0026lt;1|1,(l+r)\u0026gt;\u0026gt;1,r,L,R,mod);pushup(cur);}}valueType query(std::size_t cur,long long l,long long r,long long L,long long R){if(l\u0026gt;=R||r\u0026lt;=L)return valueZero;if(L\u0026lt;=l\u0026amp;\u0026amp;r\u0026lt;=R)return nodes[cur].val;if(!elementModificationOnly)pushdown(cur);return merge(query(cur\u0026lt;\u0026lt;1,l,(l+r)\u0026gt;\u0026gt;1,L,R),query(cur\u0026lt;\u0026lt;1|1,(l+r)\u0026gt;\u0026gt;1,r,L,R));}std::function\u0026lt;valueType(const valueType\u0026amp;,const valueType\u0026amp;)\u0026gt;merge;std::function\u0026lt;void(SegmentTreeNode\u0026lt;valueType,modType\u0026gt;\u0026amp;,const modType\u0026amp;)\u0026gt;update;std::vector\u0026lt;SegmentTreeNode\u0026lt;valueType,modType\u0026gt;\u0026gt;nodes;long long leftRange=0,rightRange=0;valueType valueZero;modType modZero;}; // #define int ll // #define FAST_IOSTREAM 1 #define For(i,l,r)for(int i=(l),i##end=(r);i\u0026lt;=i##end;++i) #define FOR(i,r,l)for(int i=(r),i##end=(l);i\u0026gt;=i##end;--i) #define SON(i,u)for(int i=head[u];i;i=nxt[i]) #define BE(x)(x).begin(),(x).end() #define fi first #define se second #define pb push_back #define eb emplace_back #define pq priority_queue #define min minOfDifferentTypes #define max maxOfDifferentTypes #define y1 why_is_there_a_function_called_y1 using namespace std;typedef long long ll;typedef pair\u0026lt;int,int\u0026gt;pii;typedef vector\u0026lt;int\u0026gt;vi;typedef vector\u0026lt;vi\u0026gt; vvi;typedef vvi v2i;typedef vector\u0026lt;vvi\u0026gt;v3i;typedef vector\u0026lt;v3i\u0026gt;v4i;typedef vector\u0026lt;bool\u0026gt;vb;typedef vector\u0026lt;vb\u0026gt;vvb;typedef vvb v2b;typedef vector\u0026lt;vvb\u0026gt;v3b;typedef vector\u0026lt;v3b\u0026gt;v4b;typedef vector\u0026lt;pii\u0026gt;vpii;typedef vector\u0026lt;vpii\u0026gt;vvpii;typedef vvpii v2pii;typedef vector\u0026lt;vvpii\u0026gt;v3pii;typedef vector\u0026lt;v3pii\u0026gt;v4pii;typedef long double ld;typedef vector\u0026lt;ld\u0026gt;vd;typedef vector\u0026lt;vd\u0026gt;vvd;typedef vvd v2d;typedef vector\u0026lt;v2d\u0026gt;v3d;typedef vector\u0026lt;v3d\u0026gt;v4d;const ld inf=1e121;const ld eps=1e-10;mt19937 rng(chrono::steady_clock::now().time_since_epoch().count());int randint(int l,int r){int out=rng()%(r-l+1)+l;return out\u0026gt;=l?out:out+r-l+1;}template\u0026lt;typename A,typename B\u0026gt;string to_string(pair\u0026lt;A,B\u0026gt;p);template\u0026lt;typename A,typename B,typename C\u0026gt;string to_string(tuple\u0026lt;A,B,C\u0026gt;p);template\u0026lt;typename A,typename B,typename C,typename D\u0026gt;string to_string(tuple\u0026lt;A,B,C,D\u0026gt;p);string to_string(const string\u0026amp;s){return '\u0026quot;'+s+'\u0026quot;';}string to_string(const char*s){return to_string((string)s);}string to_string(bool b){return(b?\u0026quot;true\u0026quot;:\u0026quot;false\u0026quot;);}string to_string(vector\u0026lt;bool\u0026gt;v){bool first=true;string res=\u0026quot;{\u0026quot;;for(int i=0;i\u0026lt;static_cast\u0026lt;int\u0026gt;(v.size());i++){if(!first){res+=\u0026quot;,\u0026quot;;}first=false;res+=to_string(v[i]);}res+=\u0026quot;}\u0026quot;;return res;}template\u0026lt;size_t N\u0026gt;string to_string(bitset\u0026lt;N\u0026gt;v){string res=\u0026quot;\u0026quot;;for(size_t i=0;i\u0026lt;N;i++){res+=static_cast\u0026lt;char\u0026gt;('0'+v[i]);}return res;}template\u0026lt;typename A\u0026gt;string to_string(A v){bool first=true;string res=\u0026quot;{\u0026quot;;for(const auto\u0026amp;x:v){if(!first){res+=\u0026quot;,\u0026quot;;}first=false;res+=to_string(x);}res+=\u0026quot;}\u0026quot;;return res;}template\u0026lt;typename A,typename B\u0026gt;string to_string(pair\u0026lt;A,B\u0026gt;p){return \u0026quot;(\u0026quot;+to_string(p.first)+\u0026quot;,\u0026quot;+to_string(p.second)+\u0026quot;)\u0026quot;;}template\u0026lt;typename A,typename B,typename C\u0026gt;string to_string(tuple\u0026lt;A,B,C\u0026gt;p){return \u0026quot;(\u0026quot;+to_string(get\u0026lt;0\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;1\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;2\u0026gt;(p))+\u0026quot;)\u0026quot;;}template\u0026lt;typename A,typename B,typename C,typename D\u0026gt;string to_string(tuple\u0026lt;A,B,C,D\u0026gt;p){return \u0026quot;(\u0026quot;+to_string(get\u0026lt;0\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;1\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;2\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;3\u0026gt;(p))+\u0026quot;)\u0026quot;;}template\u0026lt;typename A,typename B,typename C,typename D,typename E\u0026gt;string to_string(tuple\u0026lt;A,B,C,D,E\u0026gt;p){return \u0026quot;(\u0026quot;+to_string(get\u0026lt;0\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;1\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;2\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;3\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;4\u0026gt;(p))+\u0026quot;)\u0026quot;;}void debug_out(){cerr\u0026lt;\u0026lt;endl;}template\u0026lt;typename Head,typename...Tail\u0026gt;void debug_out(Head H,Tail...T){cerr\u0026lt;\u0026lt;\u0026quot; \u0026quot;\u0026lt;\u0026lt;to_string(H);debug_out(T...);}template\u0026lt;typename T\u0026gt;struct is_pair{static const bool value=false;};template\u0026lt;typename T,typename U\u0026gt;struct is_pair\u0026lt;std::pair\u0026lt;T,U\u0026gt;\u0026gt;{static const bool value=true;}; #ifdef OUUAN #define debug(...)cerr\u0026lt;\u0026lt;\u0026quot;[\u0026quot;\u0026lt;\u0026lt;#__VA_ARGS__\u0026lt;\u0026lt;\u0026quot;]:\u0026quot;,debug_out(__VA_ARGS__) #else #define debug(...)42 #endif #ifdef int const int INF=0x3f3f3f3f3f3f3f3fll; #else const int INF=0x3f3f3f3f; #endif #ifdef FAST_IOSTREAM #define br cout\u0026lt;\u0026lt;'\\n' #define sp cout\u0026lt;\u0026lt;' ' #define fl cout.flush() ll read(){ll x;cin\u0026gt;\u0026gt;x;return x;}template\u0026lt;typename T\u0026gt;void read(T\u0026amp;x){cin\u0026gt;\u0026gt;x;}template\u0026lt;typename T\u0026gt;void write(const T\u0026amp;x){cout\u0026lt;\u0026lt;x;} #else #define br putchar('\\n') #define sp putchar(' ') #define fl fflush(stdout) template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;!is_integral\u0026lt;T\u0026gt;::value\u0026amp;\u0026amp;!is_pair\u0026lt;T\u0026gt;::value,void\u0026gt;::type read(T\u0026amp;x){cin\u0026gt;\u0026gt;x;}ll read(){char c;ll out=0,f=1;for(c=getchar();!isdigit(c)\u0026amp;\u0026amp;c!='-';c=getchar());if(c=='-'){f=-1;c=getchar();}for(;isdigit(c);c=getchar())out=(out\u0026lt;\u0026lt;3)+(out\u0026lt;\u0026lt;1)+c-'0';return out*f;}template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;is_integral\u0026lt;T\u0026gt;::value,T\u0026gt;::type read(T\u0026amp;x){char c;T f=1;x=0;for(c=getchar();!isdigit(c)\u0026amp;\u0026amp;c!='-';c=getchar());if(c=='-'){f=-1;c=getchar();}for(;isdigit(c);c=getchar())x=(x\u0026lt;\u0026lt;3)+(x\u0026lt;\u0026lt;1)+c-'0';return x*=f;}char read(char\u0026amp;x){for(x=getchar();isspace(x);x=getchar());return x;}double read(double\u0026amp;x){scanf(\u0026quot;%lf\u0026quot;,\u0026amp;x);return x;}ld read(ld\u0026amp;x){scanf(\u0026quot;%Lf\u0026quot;,\u0026amp;x);return x;}template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;!is_integral\u0026lt;T\u0026gt;::value\u0026amp;\u0026amp;!is_pair\u0026lt;T\u0026gt;::value,void\u0026gt;::type write(const T\u0026amp;x){cout\u0026lt;\u0026lt;x;}template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;is_integral\u0026lt;T\u0026gt;::value,void\u0026gt;::type write(const T\u0026amp;x){if(x\u0026lt;0){putchar('-');write(-x);return;}if(x\u0026gt;9)write(x/10);putchar(x%10+'0');}void write(const char\u0026amp;x){putchar(x);}void write(const double\u0026amp;x){printf(\u0026quot;%.10lf\u0026quot;,x);}void write(const ld\u0026amp;x){printf(\u0026quot;%.10Lf\u0026quot;,x);} #endif template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;is_pair\u0026lt;T\u0026gt;::value,void\u0026gt;::type read(T\u0026amp;x){read(x.fi);read(x.se);}template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;is_pair\u0026lt;T\u0026gt;::value,void\u0026gt;::type write(const T\u0026amp;x){write(x.fi);sp;write(x.se);}template\u0026lt;typename T,typename...Args\u0026gt;void read(T\u0026amp;x,Args\u0026amp;...args){read(x);read(args...);}template\u0026lt;typename OutputIt,typename=typename enable_if\u0026lt;is_same\u0026lt;output_iterator_tag,typename iterator_traits\u0026lt;OutputIt\u0026gt;::iterator_category\u0026gt;::value||(is_base_of\u0026lt;forward_iterator_tag,typename iterator_traits\u0026lt;OutputIt\u0026gt;::iterator_category\u0026gt;::value\u0026amp;\u0026amp;!is_const\u0026lt;OutputIt\u0026gt;::value)\u0026gt;::type\u0026gt;void read(OutputIt __first,OutputIt __last){for(;__first!=__last;++__first)read(*__first);}template\u0026lt;typename InputIt,typename=typename enable_if\u0026lt;is_base_of\u0026lt;input_iterator_tag,typename iterator_traits\u0026lt;InputIt\u0026gt;::iterator_category\u0026gt;::value\u0026gt;::type\u0026gt;void wts(InputIt __first,InputIt __last){bool isFirst=true;for(;__first!=__last;++__first){if(isFirst)isFirst=false;else sp;write(*__first);}br;}template\u0026lt;typename InputIt,typename=typename enable_if\u0026lt;is_base_of\u0026lt;input_iterator_tag,typename iterator_traits\u0026lt;InputIt\u0026gt;::iterator_category\u0026gt;::value\u0026gt;::type\u0026gt;void wtb(InputIt __first,InputIt __last){for(;__first!=__last;++__first){write(*__first);br;}}template\u0026lt;typename T\u0026gt;void wts(const T\u0026amp;x){write(x);sp;}template\u0026lt;typename T\u0026gt;void wtb(const T\u0026amp;x){write(x);br;}template\u0026lt;typename T\u0026gt;void wte(const T\u0026amp;x){write(x);exit(0);}template\u0026lt;typename T,typename...Args\u0026gt;void wts(const T\u0026amp;x,Args...args){wts(x);wts(args...);}template\u0026lt;typename T,typename...Args\u0026gt;void wtb(const T\u0026amp;x,Args...args){wts(x);wtb(args...);}template\u0026lt;typename T,typename...Args\u0026gt;void wte(const T\u0026amp;x,Args...args){wts(x);wte(args...);}template\u0026lt;typename T1,typename T2\u0026gt;inline bool up(T1\u0026amp;x,const T2\u0026amp;y){return x\u0026lt;y?x=y,1:0;}template\u0026lt;typename T1,typename T2\u0026gt;inline bool dn(T1\u0026amp;x,const T2\u0026amp;y){return y\u0026lt;x?x=y,1:0;}template\u0026lt;typename T1,typename T2,typename T3\u0026gt;inline bool inRange(const T1\u0026amp;x,const T2\u0026amp;l,const T3\u0026amp;r){return!(x\u0026lt;l)\u0026amp;\u0026amp;!(r\u0026lt;x);}template\u0026lt;typename T1,typename T2\u0026gt;inline auto minOfDifferentTypes(const T1\u0026amp;x,const T2\u0026amp;y)-\u0026gt;decltype(x\u0026lt;y?x:y){return x\u0026lt;y?x:y;}template\u0026lt;typename T1,typename T2\u0026gt;inline auto maxOfDifferentTypes(const T1\u0026amp;x,const T2\u0026amp;y)-\u0026gt;decltype(x\u0026lt;y?y:x){return x\u0026lt;y?y:x;}template\u0026lt;typename T1,typename T2,typename T3\u0026gt;inline T1\u0026amp;madd(T1\u0026amp;x,const T2\u0026amp;y,const T3\u0026amp;modulo){return x=(ll)(x+y+modulo)%modulo;}template\u0026lt;typename T1,typename T2,typename T3\u0026gt;inline T1\u0026amp;mmul(T1\u0026amp;x,const T2\u0026amp;y,const T3\u0026amp;modulo){return x=(ll)x*y%modulo;}inline int modadd(int x,int y,int modulo){return(x+=y)\u0026gt;=modulo?x-modulo:x;}inline int isinf(int x){return x\u0026lt;INF?x:-1;}inline void yesno(bool x){wtb(x?\u0026quot;Yes\u0026quot;:\u0026quot;No\u0026quot;);} /* ------------------------------------------------------------------------------------------------------------------- */ struct Modify { int p, x; }; struct Query { int l, r, w, id; }; struct Val { int ans, pre, suf, sum; }; signed main() { #ifdef FAST_IOSTREAM ios_base::sync_with_stdio(false); cin.tie(0); cout.tie(0); #endif int n = read(); vector\u0026lt;Modify\u0026gt; modify; vi lsh; For (i, 1, n) { int x = read(); lsh.pb(x); modify.pb({i, x}); } sort(BE(lsh)); lsh.resize(unique(BE(lsh)) - lsh.begin()); for (auto \u0026amp;m : modify) m.x = lower_bound(BE(lsh), m.x) - lsh.begin(); int k = read(); vector\u0026lt;Query\u0026gt; query; For (i, 0, k - 1) { int l = read(); int r = read(); int w = read(); query.pb({l, r, w, i}); } SegmentTree\u0026lt;Val, int, true\u0026gt; seg ( vector\u0026lt;Val\u0026gt;(n, {0, 0, 0, -n}), [n](const Val \u0026amp;x, const Val \u0026amp;y) { Val res; res.ans = max(x.suf + y.pre, max(x.ans, y.ans)); res.pre = max(x.pre, x.sum + y.pre); res.suf = max(y.suf, x.suf + y.sum); res.sum = max(x.sum + y.sum, -n); return res; }, [](SegmentTreeNode\u0026lt;Val, int\u0026gt; \u0026amp;node, int x) { if (x == INF) return; node.val.ans = node.val.pre = node.val.suf = max(0, x); node.val.sum = x; }, 1, {0, 0, 0, 0}, INF ); vi ans(k); function\u0026lt;void(vector\u0026lt;Modify\u0026gt; \u0026amp;, vector\u0026lt;Query\u0026gt; \u0026amp;, int, int)\u0026gt; solve = [\u0026amp;](vector\u0026lt;Modify\u0026gt; \u0026amp;ms, vector\u0026lt;Query\u0026gt; \u0026amp;qs, int l, int r) { if (qs.empty()) return; if (l == r - 1) { for (auto q : qs) { ans[q.id] = lsh[l]; } return; } vector\u0026lt;Modify\u0026gt; lm, rm; int mid = (l + r) \u0026gt;\u0026gt; 1; for (auto m : ms) { if (m.x \u0026gt;= mid) { seg.modify(m.p, 1); rm.push_back(m); } else lm.push_back(m); } vector\u0026lt;Query\u0026gt; lq, rq; for (auto q : qs) { if (seg.query(q.l, q.r + 1).ans \u0026gt;= q.w) rq.push_back(q); else lq.push_back(q); } vector\u0026lt;Modify\u0026gt;().swap(ms); vector\u0026lt;Query\u0026gt;().swap(qs); solve(lm, lq, l, mid); for (auto m : rm) seg.modify(m.p, -n); solve(rm, rq, mid, r); }; solve(modify, query, 0, lsh.size()); for (auto x : ans) wtb(x); return 0; }   O((n\u0026#43;m)(logn\u0026#43;logm)) #include \u0026lt;bits/stdc++.h\u0026gt; template\u0026lt;typename valueType,typename modType\u0026gt;struct SegmentTreeNode{public:std::size_t id;long long left,right;valueType val;modType mod;};template\u0026lt;typename valueType,typename modType,bool elementModificationOnly=false\u0026gt;class SegmentTree{public:SegmentTree()=default;SegmentTree(const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,std::function\u0026lt;valueType(const valueType\u0026amp;,const valueType\u0026amp;)\u0026gt;_merge,std::function\u0026lt;void(SegmentTreeNode\u0026lt;valueType,modType\u0026gt;\u0026amp;,const modType\u0026amp;)\u0026gt;_update,long long _startPoint=1,const valueType\u0026amp;_valueZero=valueType(),const modType\u0026amp;_modZero=modType()){init(_initValue,_merge,_update,_startPoint,_valueZero,_modZero);}void init(const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,std::function\u0026lt;valueType(const valueType\u0026amp;,const valueType\u0026amp;)\u0026gt;_merge,std::function\u0026lt;void(SegmentTreeNode\u0026lt;valueType,modType\u0026gt;\u0026amp;,const modType\u0026amp;)\u0026gt;_update,long long _startPoint=1,const valueType\u0026amp;_valueZero=valueType(),const modType\u0026amp;_modZero=modType()){assert(_startPoint\u0026gt;=LLONG_MIN/2);assert(_startPoint\u0026lt;=LLONG_MAX/2-(long long)_initValue.size());leftRange=_startPoint;rightRange=_startPoint+_initValue.size();m_init(_initValue,_merge,_update,_valueZero,_modZero);}void modify(long long l,long long r,const modType\u0026amp;mod){assert(!elementModificationOnly);modify(1,leftRange,rightRange,l,r,mod);}void modify(long long p,const modType\u0026amp;mod){assert(p\u0026lt;LLONG_MAX);modify(1,leftRange,rightRange,p,p+1,mod);}valueType query(long long l,long long r){return query(1,leftRange,rightRange,l,r);}valueType query(long long p){return query(p,p+1);}private:void pushup(std::size_t cur){nodes[cur].val=merge(nodes[cur\u0026lt;\u0026lt;1].val,nodes[cur\u0026lt;\u0026lt;1|1].val);}void pushdown(std::size_t cur){update(nodes[cur\u0026lt;\u0026lt;1],nodes[cur].mod);update(nodes[cur\u0026lt;\u0026lt;1|1],nodes[cur].mod);nodes[cur].mod=modZero;}void build(std::size_t cur,long long l,long long r,const std::vector\u0026lt;valueType\u0026gt;\u0026amp;initValue){nodes[cur].id=cur;nodes[cur].left=l;nodes[cur].right=r;nodes[cur].mod=modZero;if(l==r-1)nodes[cur].val=initValue[l-leftRange];else{build(cur\u0026lt;\u0026lt;1,l,(l+r)\u0026gt;\u0026gt;1,initValue);build(cur\u0026lt;\u0026lt;1|1,(l+r)\u0026gt;\u0026gt;1,r,initValue);pushup(cur);}}void m_init(const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,std::function\u0026lt;valueType(const valueType\u0026amp;,const valueType\u0026amp;)\u0026gt;_merge,std::function\u0026lt;void(SegmentTreeNode\u0026lt;valueType,modType\u0026gt;\u0026amp;,const modType\u0026amp;)\u0026gt;_update,const valueType\u0026amp;_valueZero,const modType\u0026amp;_modZero){merge=_merge;update=_update;valueZero=_valueZero;modZero=_modZero;nodes.resize((rightRange-leftRange)\u0026lt;\u0026lt;2);build(1,leftRange,rightRange,_initValue);}void modify(std::size_t cur,long long l,long long r,long long L,long long R,const modType\u0026amp;mod){if(l\u0026gt;=R||r\u0026lt;=L)return;if(L\u0026lt;=l\u0026amp;\u0026amp;r\u0026lt;=R)update(nodes[cur],mod);else{if(!elementModificationOnly)pushdown(cur);modify(cur\u0026lt;\u0026lt;1,l,(l+r)\u0026gt;\u0026gt;1,L,R,mod);modify(cur\u0026lt;\u0026lt;1|1,(l+r)\u0026gt;\u0026gt;1,r,L,R,mod);pushup(cur);}}valueType query(std::size_t cur,long long l,long long r,long long L,long long R){if(l\u0026gt;=R||r\u0026lt;=L)return valueZero;if(L\u0026lt;=l\u0026amp;\u0026amp;r\u0026lt;=R)return nodes[cur].val;if(!elementModificationOnly)pushdown(cur);return merge(query(cur\u0026lt;\u0026lt;1,l,(l+r)\u0026gt;\u0026gt;1,L,R),query(cur\u0026lt;\u0026lt;1|1,(l+r)\u0026gt;\u0026gt;1,r,L,R));}std::function\u0026lt;valueType(const valueType\u0026amp;,const valueType\u0026amp;)\u0026gt;merge;std::function\u0026lt;void(SegmentTreeNode\u0026lt;valueType,modType\u0026gt;\u0026amp;,const modType\u0026amp;)\u0026gt;update;std::vector\u0026lt;SegmentTreeNode\u0026lt;valueType,modType\u0026gt;\u0026gt;nodes;long long leftRange=0,rightRange=0;valueType valueZero;modType modZero;}; using namespace std; int read() { int out = 0; char c; while (!isdigit(c = getchar())); for (; isdigit(c); c = getchar()) out = out * 10 + c - '0'; return out; } typedef vector\u0026lt;int\u0026gt; vi; const int INF = 1e9; struct Query { int l, r, w, id; bool operator\u0026lt;(const Query \u0026amp;b) const { return w \u0026gt; b.w; } }; int main() { int n = read(); vi a(n); for (int i = 0; i \u0026lt; n; ++i) a[i] = read(); vi p(n), len(n); stack\u0026lt;int\u0026gt; stk; for (int i = 0; i \u0026lt; n; ++i) { while (stk.size() \u0026amp;\u0026amp; a[stk.top()] \u0026gt;= a[i]) stk.pop(); if (stk.empty()) p[i] = 0; else p[i] = stk.top() + 1; stk.push(i); } stack\u0026lt;int\u0026gt;().swap(stk); for (int i = n - 1; i \u0026gt;= 0; --i) { while (stk.size() \u0026amp;\u0026amp; a[stk.top()] \u0026gt;= a[i]) stk.pop(); int r; if (stk.empty()) r = n - 1; else r = stk.top() - 1; len[i] = r - p[i] + 1; stk.push(i); } vi id(n); for (int i = 0; i \u0026lt; n; ++i) id[i] = i; sort(id.begin(), id.end(), [\u0026amp;](int x, int y) { return len[x] \u0026gt; len[y]; }); SegmentTree\u0026lt;int, bool, true\u0026gt; mn ( a, [](int x, int y) { return min(x, y); }, [](SegmentTreeNode\u0026lt;int, bool\u0026gt; \u0026amp;, bool) {}, 1, INF ); int m = read(); vi ans(m); vector\u0026lt;Query\u0026gt; query; for (int i = 0; i \u0026lt; m; ++i) { int l = read(); int r = read(); int w = read(); query.push_back({l, r, w, i}); ans[i] = mn.query(l, l + w); } sort(query.begin(), query.end()); SegmentTree\u0026lt;int, int, true\u0026gt; mx ( vi(n), [](int x, int y) { return max(x, y); }, [](SegmentTreeNode\u0026lt;int, int\u0026gt; \u0026amp;node, int x) { node.val = max(node.val, x); node.mod = max(node.mod, x); } ); auto it = id.begin(); for (auto t : query) { while (it != id.end() \u0026amp;\u0026amp; len[*it] \u0026gt;= t.w) { mx.modify(p[*it] + 1, a[*it]); ++it; } ans[t.id] = max(ans[t.id], mx.query(t.l, t.r - t.w + 2)); } for (auto x : ans) printf(\u0026quot;%d\\n\u0026quot;, x); return 0; }  ","date":"2020-04-20T23:05:37+08:00","permalink":"https://ouuan.github.io/post/cf484e/","tags":["çº¿æ®µæ ‘","æ•´ä½“äºŒåˆ†","ä¸»å¸­æ ‘","æ•°æ®ç»“æ„"],"title":"CF484E Sign on Fence"},{"categories":["é¢˜è§£"],"contents":"LOJ\né¢˜ç›®æè¿°\nç»™ä½ ä¸€æ£µæœ‰æ ¹æ ‘ï¼Œä¸€å¼€å§‹æ¯ä¸ªç‚¹éƒ½æœ‰ä¸åŒçš„é¢œè‰²ã€‚æœ‰ä¸‰ç§æ“ä½œï¼š\n ç»™å®š $x$ï¼Œå°† $x$ åˆ°æ ¹çš„è·¯å¾„ä¿®æ”¹ä¸ºä¸€ç§å½“å‰æ ‘ä¸Šæ²¡æœ‰å‡ºç°çš„é¢œè‰²ã€‚ ç»™å®š $x$ å’Œ $y$ï¼Œè¯¢é—® $x$ åˆ° $y$ çš„è·¯å¾„ä¸Šä¸åŒé¢œè‰²çš„æ•°é‡ã€‚ ç»™å®š $x$ï¼Œä»¤ä¸€ä¸ªç‚¹çš„æƒå€¼ä¸ºå®ƒåˆ°æ ¹è·¯å¾„ä¸Šä¸åŒé¢œè‰²çš„æ•°é‡ï¼Œæ±‚å­æ ‘ $x$ ä¸­çš„æœ€å¤§æƒå€¼ã€‚  ç‚¹æ•°å’Œæ“ä½œæ•° $10^5$ã€‚\n ç®€è¦åšæ³• å¤§è‡´æ–¹å‘è‚¯å®šæ˜¯ç»´æŠ¤æ¯ä¸ªç‚¹åˆ°æ ¹è·¯å¾„ä¸Šä¸åŒé¢œè‰²çš„æ•°é‡ï¼Œç”±äºæ“ä½œ 3ï¼Œç”¨å·®åˆ†ç»´æŠ¤ä¸å¤ªå¯è¡Œï¼Œäºæ˜¯é”å®šä¸ºä½¿ç”¨çº¿æ®µæ ‘ä»¥ DFS åºä¸ºä¸‹æ ‡ç»´æŠ¤æ¯ä¸ªç‚¹åˆ°æ ¹çš„é¢œè‰²æ•°é‡ã€‚å¦‚æœèƒ½å¤Ÿç»´æŠ¤è¿™ä¸ªï¼Œæ“ä½œ 2, 3 å°±å¥½åŠäº†ï¼š\n æ“ä½œ 3 ç›´æ¥åŒºé—´æœ€å¤§å€¼å³å¯ã€‚ï¼ˆå­æ ‘çš„ DFS åºè¿ç»­ï¼‰ ä»¤ $x$ åˆ°æ ¹çš„é¢œè‰²æ•°é‡ä¸º $a_x$ï¼Œé‚£ä¹ˆ $x$ åˆ° $y$ çš„é¢œè‰²æ•°é‡ä¸º $a_x+a_y-2a_{lca(x, y)}+1$ã€‚è¿™ä¸ªå¯ä»¥ç”¨æ ‘ä¸Šå·®åˆ†æ¥ç†è§£ã€‚  ç°åœ¨çš„é—®é¢˜å°±æ˜¯å¦‚ä½•åœ¨è¿›è¡Œæ“ä½œ 1 æ—¶åœ¨çº¿æ®µæ ‘ä¸Šæ›´æ–°æ¯ä¸ªç‚¹åˆ°æ ¹çš„é¢œè‰²æ•°é‡ã€‚\né¦–å…ˆï¼Œå®šä¹‰â€œå…³é”®ç‚¹â€ä¸ºæ ¹æˆ–ä¸ parent é¢œè‰²ä¸åŒçš„ç‚¹ï¼Œé‚£ä¹ˆï¼š\n æ¯ä¸ªç‚¹åˆ°æ ¹çš„é¢œè‰²æ•°å³ä¸ºåˆ°æ ¹è·¯å¾„ä¸Šçš„å…³é”®ç‚¹ä¸ªæ•°ã€‚ åœ¨æ“ä½œ 1 ä¸­ï¼Œæœ‰ä¸¤ç±»ç‚¹ï¼ˆä¸‹æ–‡ä¸­ä¹Ÿä¼šç”¨â€œä¸¤ç±»ç‚¹â€æ¥æŒ‡ä»£è¿™ä¸¤ç±»ç‚¹ï¼‰çš„å…³é”®ç‚¹å±æ€§ä¼šå‘ç”Ÿæ”¹å˜ï¼š  ä» $x$ åˆ°æ ¹çš„è·¯å¾„ä¸Šï¼Œé™¤æ ¹å¤–å…¨éƒ¨å˜æˆéå…³é”®ç‚¹ã€‚ æ¯ä¸ªè¢«æ”¹å˜çš„é¢œè‰²æ®µï¼Œæ²¡è¢«æ”¹å˜çš„é‚£ä¸€éƒ¨åˆ†çš„é¡¶ç«¯å˜ä¸ºå…³é”®ç‚¹ã€‚    ï¼ˆP.S. ä¸ºå•¥è¦ç”¨ç”»å›¾ï¼ˆå®é™…ä¸Šæ˜¯ KolourPaint è€Œé mspaintï¼‰è€Œä¸æ˜¯ PPT å‘¢ï¼Ÿå› ä¸º 1. PPT è™½ç„¶å¥½çœ‹ï¼Œä½†æ‰‹ç»˜è²Œä¼¼æ›´æœ‰çµé­‚ 2. ä¸€ç›´ç”¨ PPTï¼Œæƒ³è¯•ç€æ¢ä¸ªç”»é£ 3. æ‡’ï¼‰\nåœ¨å›¾ä¸­ï¼Œ$2$ å’Œ $4$ ä»å…³é”®ç‚¹å˜æˆäº†éå…³é”®ç‚¹ï¼Œè€Œ $6$ å’Œ $8$ ä»éå…³é”®ç‚¹å˜æˆäº†å…³é”®ç‚¹ã€‚\nå…³é”®ç‚¹å’Œéå…³é”®ç‚¹çš„è½¬æ¢å…¶å®å°±æ˜¯å­æ ‘åŠ ä¸€æˆ–å‡ä¸€ï¼Œäºæ˜¯ï¼Œé—®é¢˜çš„å…³é”®å°±åœ¨äºå¦‚ä½•å¿«é€Ÿæ‰¾åˆ°è¿™ä¸¤ç±»ç‚¹ã€‚\nå¯ä»¥å‘ç°ï¼Œæ“ä½œ 1 å…¶å®å°±å’Œ LCT çš„ access æ“ä½œæ˜¯ä¸€æ ·çš„ï¼ŒLCT ä¸­çš„å®é“¾å³ä¸ºæœ¬é¢˜ä¸­é¢œè‰²ç›¸åŒçš„æ®µï¼Œè€Œä½¿ç”¨ LCT çš„ç¡®èƒ½å¿«é€Ÿæ‰¾åˆ°è¿™ä¸¤ç±»ç‚¹ï¼ˆå‰ä¸€ç±»æ˜¯å®é“¾çš„é¡¶ç«¯ï¼Œå³ Splay ä¸­çš„æœ€å°ç‚¹ï¼›åä¸€ç±»æ˜¯è¢«ä¿®æ”¹çš„æœ«ç«¯çš„å®å„¿å­ï¼Œå³è¢«ä¿®æ”¹çš„æœ«ç«¯åœ¨ Splay ä¸Šçš„å³å­æ ‘ä¸­çš„æœ€å°ç‚¹ï¼‰ï¼Œå…·ä½“æ€ä¹ˆæ‰¾è¿™ä¸¤ç±»ç‚¹å¯ä»¥å‚è€ƒä¸‹é¢çš„ä»£ç ã€‚\næ—¶é—´å¤æ‚åº¦æ˜¯ $O((n+m)\\log^2 n)$ï¼ˆè¯´ä¸å®šæ˜¯ $\\Theta(n\\log n+m\\log^2 n)$ æˆ–è€… $\\Theta(n\\log^2 n+m\\log n)$ï¼Œä¸ä¼šç®— /kkï¼‰ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;algorithm\u0026gt; #include \u0026lt;functional\u0026gt; using namespace std; int read() { int out = 0; char c; while (!isdigit(c = getchar())); for (; isdigit(c); c = getchar()) out = out * 10 + c - '0'; return out; } typedef vector\u0026lt;int\u0026gt; vi; typedef pair\u0026lt;int, int\u0026gt; pii; struct SegmentTree { #define ls (cur \u0026lt;\u0026lt; 1) #define rs (cur \u0026lt;\u0026lt; 1 | 1) #define mid ((l + r) \u0026gt;\u0026gt; 1) vi mx, tag; SegmentTree(int n, const vi \u0026amp;init) : mx(n * 4), tag(n * 4) { build(1, 1, n + 1, init); } void pushup(int cur) { mx[cur] = max(mx[ls], mx[rs]); } void build(int cur, int l, int r, const vi \u0026amp;init) { if (l == r - 1) mx[cur] = init[l]; else { build(ls, l, mid, init); build(rs, mid, r, init); pushup(cur); } } void modify(int cur, int x) { mx[cur] += x; tag[cur] += x; } void pushdown(int cur) { modify(ls, tag[cur]); modify(rs, tag[cur]); tag[cur] = 0; } void modify(int cur, int l, int r, int L, int R, int x) { if (l \u0026gt;= R || r \u0026lt;= L) return; if (L \u0026lt;= l \u0026amp;\u0026amp; r \u0026lt;= R) modify(cur, x); else { pushdown(cur); modify(ls, l, mid, L, R, x); modify(rs, mid, r, L, R, x); pushup(cur); } } int query(int cur, int l, int r, int L, int R) { if (l \u0026gt;= R || r \u0026lt;= L) return 0; if (L \u0026lt;= l \u0026amp;\u0026amp; r \u0026lt;= R) return mx[cur]; pushdown(cur); return max(query(ls, l, mid, L, R), query(rs, mid, r, L, R)); } #undef ls #undef rs #undef mid }; struct LCT { struct Node { vi ch; int pa; Node() : ch(2), pa(0) {} }; vector\u0026lt;Node\u0026gt; t; LCT(int n) : t(n + 1) {} bool nroot(int x) { return x == t[t[x].pa].ch[0] || x == t[t[x].pa].ch[1]; } void rotate(int x) { int y = t[x].pa; int z = t[y].pa; int k = x == t[y].ch[1]; if (nroot(y)) t[z].ch[y == t[z].ch[1]] = x; t[x].pa = z; t[y].ch[k] = t[x].ch[k ^ 1]; t[t[x].ch[k ^ 1]].pa = y; t[x].ch[k ^ 1] = y; t[y].pa = x; } void Splay(int x) { while (nroot(x)) { int y = t[x].pa; int z = t[y].pa; if (nroot(y)) rotate((x == t[y].ch[1]) ^ (y == t[z].ch[1]) ? x : y); rotate(x); } } int gettop(int x) { while (t[x].ch[0]) x = t[x].ch[0]; return x; } vector\u0026lt;pii\u0026gt; access(int x) // è¿”å›å€¼ä¸ºæ¯ä¸€å¯¹â€œä¸¤ç±»ç‚¹â€ { vector\u0026lt;pii\u0026gt; res; for (int y = 0; x; x = t[y = x].pa) { Splay(x); res.emplace_back(gettop(x), gettop(t[x].ch[1])); t[x].ch[1] = y; } return res; } }; int main() { int n = read(); int m = read(); vector\u0026lt;vi\u0026gt; g(n + 1); for (int i = 1; i \u0026lt; n; ++i) { int u = read(); int v = read(); g[u].push_back(v); g[v].push_back(u); } LCT lct(n); int dfntot = 0; vi dfn(n + 1), exi(n + 1), pa(n + 1), son(n + 1), siz(n + 1), dep(n + 1), tp(n + 1); function\u0026lt;void(int)\u0026gt; dfs1 = [\u0026amp;](int u) { siz[u] = 1; dfn[u] = ++dfntot; for (auto v : g[u]) { if (v == pa[u]) continue; dep[v] = dep[u] + 1; lct.t[v].pa = u; pa[v] = u; dfs1(v); siz[u] += siz[v]; if (siz[v] \u0026gt; siz[son[u]]) son[u] = v; } exi[u] = dfntot; }; function\u0026lt;void(int)\u0026gt; dfs2 = [\u0026amp;](int u) { if (!son[u]) return; tp[son[u]] = tp[u]; dfs2(son[u]); for (auto v : g[u]) { if (v == pa[u] || v == son[u]) continue; tp[v] = v; dfs2(v); } }; auto lca = [\u0026amp;](int u, int v) { while (tp[u] != tp[v]) { if (dep[tp[u]] \u0026gt; dep[tp[v]]) u = pa[tp[u]]; else v = pa[tp[v]]; } return dep[u] \u0026gt; dep[v] ? v : u; }; dep[1] = tp[1] = 1; dfs1(1); dfs2(1); vi init(n + 1); for (int i = 1; i \u0026lt;= n; ++i) init[dfn[i]] = dep[i]; SegmentTree seg(n, init); while (m--) { switch(read()) { case 1: { int x = read(); lct.Splay(x); auto res = lct.access(x); for (auto p : res) { int u = p.first; int v = p.second; if (u != 1) seg.modify(1, 1, n + 1, dfn[u], exi[u] + 1, -1); if (v) seg.modify(1, 1, n + 1, dfn[v], exi[v] + 1, 1); } break; } case 2: { int x = read(); int y = read(); int u = lca(x, y); int ans = seg.query(1, 1, n + 1, dfn[x], dfn[x] + 1); ans += seg.query(1, 1, n + 1, dfn[y], dfn[y] + 1); ans -= 2 * seg.query(1, 1, n + 1, dfn[u], dfn[u] + 1); ans += 1; printf(\u0026quot;%d\\n\u0026quot;, ans); break; } case 3: { int x = read(); printf(\u0026quot;%d\\n\u0026quot;, seg.query(1, 1, n + 1, dfn[x], exi[x] + 1)); break; } } } return 0; }  ï¼ˆæ²¡æœ‰å…¨å±€å˜é‡çš„ä»£ç æ˜¯ä¸æ˜¯éå¸¸æ¸…çˆ½ï¼‰\n","date":"2020-04-17T12:38:34+08:00","permalink":"https://ouuan.github.io/post/sdoi2017-%E6%A0%91%E7%82%B9%E6%B6%82%E8%89%B2/","tags":["LCT","çº¿æ®µæ ‘","æ•°æ®ç»“æ„"],"title":"ã€ŒSDOI2017ã€æ ‘ç‚¹æ¶‚è‰²"},{"categories":["æŠ€æœ¯"],"contents":"å¤§å®¶çŸ¥é“æˆ‘æ•´å¤©åœ¨ GitHub ä¸Šæ ¹æœ¬å‡ ä¹ä¸åšé¢˜ï¼Œé‚£ä¸ºä»€ä¹ˆä¸åˆ©ç”¨ GitHub æ¥ç£ä¿ƒè‡ªå·±åšé¢˜å‘¢ï¼Ÿ\nGitHub çš„ Projects åŠŸèƒ½æ­£å¥½é€‚åˆè¿™ä¹ˆåšã€‚\næˆ‘çš„ Project\nåˆ›å»º Project åœ¨è‡ªå·±çš„ GitHub ä¸ªäººä¿¡æ¯é¡µä¸Šçš„ Project é‡Œåˆ›å»ºå°±å¯ä»¥äº†ã€‚\næ·»åŠ  column å’Œ notes ç‚¹å³è¾¹çš„ Add column å’Œæ¯ä¸€æ é‡Œçš„åŠ å·å°±å¯ä»¥äº†ã€‚\nä½¿ç”¨ Copy as Markdown æ’ä»¶ ç”±äºåŠ é¢˜çš„æ—¶å€™ç»å¸¸è¦å¤åˆ¶é¢˜ç›®é“¾æ¥å†æ”¹æˆ Markdownï¼Œå¯ä»¥ä½¿ç”¨ Copy as Markdown æ’ä»¶ æ¥æ›´åŠ ä¾¿æ·åœ°å®Œæˆè¿™ä¸ªæ“ä½œã€‚\nä½¿ç”¨æ–¹æ³•ï¼š\n é€‰ä¸­ Link çš„ä¸€éƒ¨åˆ†ï¼Œå³å‡»ï¼Œç„¶å \u0026ldquo;Copy [Link Content](URL)\u0026quot;ï¼Œé€‰ä¸­çš„éƒ¨åˆ†ä¼šä½œä¸º \u0026ldquo;Link Content\u0026rdquo;ã€‚ ç‚¹å‡»æ‰©å±•ç¨‹åºå›¾æ ‡ï¼Œå¯ä»¥å¤åˆ¶å½“å‰ / å…¨éƒ¨æ ‡ç­¾é¡µã€‚  ç»“æ„ å¯ä»¥å‚è€ƒ æˆ‘çš„ Projectï¼Œåˆ†ä¸º \u0026ldquo;Check contests\u0026rdquo;, \u0026ldquo;Topics\u0026rdquo;, \u0026ldquo;LOJ AC desc\u0026rdquo;ï¼ˆåœ¨ LOJ ä¸­æœç´¢ \u0026ldquo;OI\u0026rdquo; å¹¶æŒ‰ AC äººæ•°é™åºæ’åºï¼‰å’Œ \u0026ldquo;NOI\u0026rdquo; å››ä¸ªéƒ¨åˆ†ã€‚æ¯ä¸ª Topic å’Œæ¯å±Š NOI å•ç‹¬æ”¾ä¸€æ ï¼Œé‡Œé¢æ”¾ä¸Šé¢˜ç›®å’Œç›¸åº”çš„åšå®¢ã€‚\u0026ldquo;Topics\u0026rdquo; å’Œ \u0026ldquo;NOI\u0026rdquo; ä¸­æ”¾ä¸Šå¯¹åº”æ çš„ Linkï¼ˆåœ¨æ¯ä¸€æ çš„èœå•é‡Œå¯ä»¥ \u0026ldquo;Copy column link\u0026rdquo;ï¼‰ï¼Œè¿™ä¸ª link åªä¿ç•™ç±»ä¼¼äº \u0026ldquo;#column-8321611\u0026rdquo; çš„éƒ¨åˆ†å°±å¥½äº†ï¼Œå¦åˆ™ç‚¹çš„æ—¶å€™å¯èƒ½ä¼šåˆ·æ–°é¡µé¢ã€‚\nå½’æ¡£ å½“ä¸€ä¸ªä»»åŠ¡å®Œæˆååœ¨å®ƒçš„å³ä¸Šè§’èœå•ä¸­ç‚¹ \u0026ldquo;Archive\u0026rdquo; å°±å¯ä»¥å½’æ¡£ã€‚å½’æ¡£åçš„ notes å¯ä»¥åœ¨ Menu-\u0026gt;\u0026hellip;-\u0026gt;View Archive æŸ¥çœ‹ã€‚\nå›ºå®šæ ‡ç­¾é¡µ åœ¨ Chrome ä¸­å¯ä»¥åœ¨æ ‡ç­¾é¡µçš„å³é”®èœå•ä¸­å›ºå®šæ ‡ç­¾é¡µï¼ŒæŠŠè¿™ä¸ª Project é¡µé¢å›ºå®šä¸‹æ¥è¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚\nå…³äºæˆ‘çš„ Project è¿™é‡Œé¢çš„é¢˜éƒ½æ˜¯æˆ‘æ²¡åšè¿‡çš„ï¼Œåšè¿‡çš„éƒ½æ²¡åŠ è¿›æ¥ã€‚\nå»ºè®®ä¸è¦å®Œå…¨ç…§æ¬é¢˜ç›®ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹ç»“æ„ï¼Œè‡ªå·±æ‰¾é¢˜ã€‚\næœ€åå¸Œæœ›è‡ªå·±æœ‰äº†è¿™ä¸ªä¸è¦å†å’•å’•å’•äº†..\n","date":"2020-03-14T13:14:15+08:00","permalink":"https://ouuan.github.io/post/use-github-project-to-create-a-to-do-list/","tags":["è®¡åˆ’"],"title":"ä½¿ç”¨ GitHub Project åˆ›å»ºä¸€ä»½ To Do List"},{"categories":["é¢˜è§£"],"contents":"æ´›è°·\nBZOJ\né¢˜ç›®æè¿°\nç»™ä½ ä¸€å¼ è¾¹å¸¦æƒçš„æ— å‘è¿é€šå›¾ï¼Œå¤šæ¬¡ä¿®æ”¹ï¼Œæ¯æ¬¡ä¿®æ”¹ä¸€æ¡è¾¹çš„è¾¹æƒï¼Œæ¯æ¬¡ä¿®æ”¹å®Œåæ±‚æœ€å°ç”Ÿæˆæ ‘çš„è¾¹æƒä¹‹å’Œã€‚\nç‚¹æ•° $2\\cdot 10^4$, è¾¹æ•°å’Œä¿®æ”¹æ•° $5\\cdot 10^4$ï¼Œæ—¶é™ 3sã€‚\n ç®€è¦åšæ³• LCT åšæ³• æŠŠæ¯æ¡è¾¹æŒ‰ä¸¤æ¬¡ä¿®æ”¹ä¹‹é—´ä»¥åŠå¤´å°¾åˆ†æˆè‹¥å¹²æ®µï¼Œç„¶åæŒ‰å‡ºç°æ—¶é—´çº¿æ®µæ ‘åˆ†æ²»ï¼ŒLCT ç»´æŠ¤æœ€å°ç”Ÿæˆæ ‘ã€‚\næ—¶é—´å¤æ‚åº¦ $O(n+(m+q)\\log q\\log n)$ ï¼Œå¸¸æ•°æœ‰ç‚¹å¤§ï¼Œå¬è¯´å¾ˆéš¾å¡åˆ°æ»¡åˆ†ï¼Œè‡ªå·±æ²¡å†™ã€‚\nKruskal åšæ³• è¿˜æ˜¯çº¿æ®µæ ‘åˆ†æ²»ï¼Œä½†å°è¯•ç”¨ Kruskal ç®—æ³•æ±‚æœ€å°ç”Ÿæˆæ ‘ã€‚\nç„¶è€Œï¼ŒKruskal ç®—æ³•è¦æ±‚è¾¹æƒä»å°åˆ°å¤§åŠ å…¥ï¼Œç›´æ¥çº¿æ®µæ ‘åˆ†æ²»æ— æ³•æ»¡è¶³è¿™ä¸ªè¦æ±‚ã€‚\nï¼ˆæ³¨ï¼šä¸ºäº†ä¸¥è°¨ï¼Œä½ å¯ä»¥è®¤ä¸ºä¸‹æ–‡ä¸­åœ¨æ¯”è¾ƒå¤§å°æ—¶ç»™ç¬¬ $i$ ($1\\le i\\le m$) æ¡è¾¹çš„è¾¹æƒåŠ ä¸Šäº† $2^{-i}$ï¼Œè¿™æ ·ä¿è¯äº† MST æ˜¯å”¯ä¸€çš„ã€‚å½“ç„¶ï¼Œåœ¨ä»£ç ä¸­æ— éœ€å¦‚æ­¤ã€‚ï¼‰\nå¯ä»¥è§‚å¯Ÿåˆ°ï¼Œéšç€åˆ†æ²»åŒºé—´è¶Šæ¥è¶Šå°ï¼Œä¿®æ”¹çš„è¾¹ä¹Ÿè¶Šæ¥è¶Šå°‘ï¼Œå›¾ä¸­å¤§å¤šæ•°çš„è¾¹æ˜¯ä¸ä¼šè¢«ä¿®æ”¹çš„ã€‚æ­£å› å¦‚æ­¤ï¼Œå¯ä»¥çŒœæƒ³ï¼Œå¤§å¤šæ•°è¾¹åœ¨æˆ–ä¸åœ¨ MST ä¸­æ˜¯å›ºå®šçš„ï¼Œè€Œæˆ‘ä»¬éœ€è¦å…³æ³¨çš„ï¼Œåªæœ‰é‚£äº›å› ä¼šä¿®æ”¹çš„è¾¹çš„è¾¹æƒå˜åŒ–è€Œæ—¢å¯èƒ½åœ¨ MST ä¸­åˆå¯èƒ½ä¸åœ¨ MST ä¸­çš„è¾¹ã€‚\nå¦‚æœæˆ‘ä»¬æœ‰ä¸€å¼ å›¾ $G=(V, E)$ï¼Œå…¶ä¸­ $E\u0026rsquo;\\subseteq E$ æ˜¯ä»¥åä¼šè¢«ä¿®æ”¹çš„è¾¹ï¼Œé‚£ä¹ˆï¼Œå¦‚ä½•æ±‚å‡ºé‚£äº›æ— è®º $E'$ ä¸­çš„è¾¹è¾¹æƒå¦‚ä½•å˜åŒ–éƒ½ä¸€å®šåœ¨ MST ä¸­/ä¸€å®šä¸åœ¨ MST ä¸­çš„è¾¹å‘¢ï¼Ÿ\n å°† $E'$ ä¸­çš„è¾¹è¾¹æƒè®¾ä¸ºæ­£æ— ç©·ï¼Œæ±‚ MSTï¼Œæ­¤æ—¶ä¸åœ¨ $E'$ ä¸­ä¸”ä¸åœ¨ MST ä¸­çš„è¾¹ï¼Œæ— è®º $E'$ ä¸­çš„è¾¹è¾¹æƒå¦‚ä½•å˜åŒ–ï¼Œéƒ½ä¸åœ¨ MST ä¸­ï¼Œä¸‹æ–‡ä¸­ç§°è¿™äº›è¾¹ä¸ºâ€œä¸€ç±»è¾¹â€ã€‚ å°† $E'$ ä¸­çš„è¾¹è¾¹æƒè®¾ä¸º $0$ï¼Œæ±‚ MSTï¼Œæ­¤æ—¶ä¸åœ¨ $E'$ ä¸­ä¸”åœ¨ MST ä¸­çš„è¾¹ï¼Œæ— è®º $E'$ ä¸­çš„è¾¹è¾¹æƒå¦‚ä½•å˜åŒ–ï¼Œéƒ½åœ¨ MST ä¸­ï¼Œä¸‹æ–‡ä¸­ç§°è¿™äº›è¾¹ä¸ºâ€œäºŒç±»è¾¹â€ã€‚  é‚£ä¹ˆï¼Œåœ¨ç»§ç»­åˆ†æ²»ä¸‹å»çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°±åªéœ€å…³æ³¨ $E'$ ä¸­çš„è¾¹ä»¥åŠæ˜¯ä¸€ç±»è¾¹è€Œä¸æ˜¯äºŒç±»è¾¹çš„è¾¹ã€‚\nç”±äºä¸€ç±»è¾¹æœ€å¤šæœ‰ $|V|-1$ æ¡ï¼Œè€ŒäºŒç±»è¾¹è‡³å°‘æœ‰ $|V|-1-|E'|$ æ¡ï¼Œæ‰€ä»¥æ˜¯ä¸€ç±»è¾¹è€Œä¸æ˜¯äºŒç±»è¾¹çš„è¾¹æœ€å¤šæœ‰ $|E'|$ æ¡ï¼Œäºæ˜¯ï¼Œå‘ä¸‹åˆ†æ²»æ—¶éœ€è¦å…³æ³¨çš„è¾¹å°±ä¸è¶…è¿‡ $2|E'|$ æ¡ã€‚\nè™½ç„¶åªéœ€å…³æ³¨è¿™äº›è¾¹ï¼Œä½†äºŒç±»è¾¹ä¾ç„¶è¦åœ¨åˆ†æ²»è¿‡ç¨‹ä¸­ä¿ç•™ï¼ˆè®¡ç®— MST æ—¶å¹¶æŸ¥é›†ä¸­è¦ä¿ç•™ï¼Œæœ€åè¾¹æƒè¦è®¡å…¥ç­”æ¡ˆï¼‰ã€‚è¾¹æƒè®¡å…¥ç­”æ¡ˆå¾ˆå¥½åŠï¼Œè€Œä¿ç•™åœ¨å¹¶æŸ¥é›†ä¸­å¯ä»¥é€šè¿‡å¯å›é€€å¹¶æŸ¥é›†æ¥å®ç°ã€‚\nä¸€å±‚åˆ†æ²»ä¸­æ¯ä¸ªåˆ†æ²»å†…ä¼šè¢«ä¿®æ”¹çš„è¾¹åŠ èµ·æ¥æ˜¯ $O(m+q)$ æ¡ï¼Œå¹¶æŸ¥é›†è¦å¯å›é€€ï¼Œåªèƒ½æŒ‰ç§©åˆå¹¶ã€‚æ‰€ä»¥æ€»æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n+(m+q)\\log(m+q)+(m+q)\\log q\\log n)$ ã€‚\næ—¶é—´å¤æ‚åº¦å’Œ LCT åšæ³•å·®ä¸å¤šï¼ˆä½ æ„¿æ„çš„è¯ä½ å¯ä»¥è¯´æ—¶é—´å¤æ‚åº¦æ›´å¤§ï¼‰ï¼Œä½†è·‘å¾—é£å¿«ã€‚\næœ‰ä¸ªå®ç°ä¸Šçš„å°ç»†èŠ‚ï¼šå°† $E'$ ä¸­çš„è¾¹è¾¹æƒè®¾ä¸ºæ— ç©·å¤§å’Œ $0$ æ—¶ä¸éœ€è¦çœŸçš„ä¿®æ”¹å†æ’åºï¼Œæœ€ååŠ å…¥ï¼ˆå…¶å®å¯ä»¥ç›´æ¥ä¸åŠ å…¥ï¼‰/æœ€å…ˆåŠ å…¥å³å¯ï¼Œè€Œå…¶å®ƒè¾¹çš„æ’åºå¯ä»¥åœ¨ä¸»å‡½æ•°ä¸­å®Œæˆï¼Œè€Œåœ¨åˆ†æ²»è¿‡ç¨‹ä¸­ä¿æŒåŸåºã€‚è¿™æ ·æ—¶é—´å¤æ‚åº¦çš„ç“¶é¢ˆä¸Šå°±åªæœ‰å¹¶æŸ¥é›†è€Œæ²¡æœ‰æ’åºäº†ï¼ˆå½“ç„¶æˆ‘è¯´çš„æ˜¯ (m+q)logqlogn è¿™ä¸ªç“¶é¢ˆï¼Œä¸æ˜¯ (m+q)log(m+q) è¿™ä¸ªç“¶é¢ˆï¼‰ã€‚\nKruskal åšæ³•å‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;stack\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef long long ll; struct Edge { int u, v, w, l, r; bool operator\u0026lt;(const Edge \u0026amp;b) const { return w \u0026lt; b.w; } bool change(int left, int right) { return (l \u0026gt; left \u0026amp;\u0026amp; l \u0026lt;= right) || (r \u0026gt;= left \u0026amp;\u0026amp; r \u0026lt; right); } }; struct UFS { vector\u0026lt;int\u0026gt; f, siz; struct Change { int x, y; }; stack\u0026lt;Change\u0026gt; c; void init(int n) { f.resize(n + 1); siz.resize(n + 1, 1); for (int i = 0; i \u0026lt;= n; ++i) f[i] = i; } int find(int x) { return x == f[x] ? x : find(f[x]); } bool merge(int x, int y) { x = find(x); y = find(y); if (x == y) return false; if (siz[x] \u0026lt; siz[y]) swap(x, y); c.push({x, y}); siz[x] += siz[y]; f[y] = x; return true; } void rollback(int x) { while ((int)c.size() \u0026gt; x) { f[c.top().y] = c.top().y; siz[c.top().x] -= siz[c.top().y]; c.pop(); } } int status() const { return c.size(); } } ufs; vector\u0026lt;ll\u0026gt; ans; void solve(int l, int r, vector\u0026lt;Edge\u0026gt; \u0026amp;e, ll delta = 0) { if (l == r) { ans[l] = delta; int ver = ufs.status(); for (int i = 0; i \u0026lt; (int)e.size(); ++i) if (ufs.merge(e[i].u, e[i].v)) ans[l] += e[i].w; ufs.rollback(ver); return; } vector\u0026lt;bool\u0026gt; ininf(e.size(), false), inzero(e.size(), false); int ver = ufs.status(); for (int i = 0; i \u0026lt; (int)e.size(); ++i) if (!e[i].change(l, r)) ininf[i] = ufs.merge(e[i].u, e[i].v); ufs.rollback(ver); for (int i = 0; i \u0026lt; (int)e.size(); ++i) if (e[i].change(l, r)) ufs.merge(e[i].u, e[i].v); for (int i = 0; i \u0026lt; (int)e.size(); ++i) { if (!e[i].change(l, r) \u0026amp;\u0026amp; ufs.merge(e[i].u, e[i].v)) { inzero[i] = true; delta += e[i].w; } } int mid = (l + r) \u0026gt;\u0026gt; 1; vector\u0026lt;Edge\u0026gt; le, re; for (int i = 0; i \u0026lt; (int)e.size(); ++i) { if (e[i].change(l, r) || (ininf[i] \u0026amp;\u0026amp; !inzero[i])) { if (e[i].l \u0026lt;= mid) le.push_back(e[i]); if (e[i].r \u0026gt; mid) re.push_back(e[i]); } } ufs.rollback(ver); for (int i = 0; i \u0026lt; (int)e.size(); ++i) if (inzero[i]) ufs.merge(e[i].u, e[i].v); solve(l, mid, le, delta); solve(mid + 1, r, re, delta); ufs.rollback(ver); } int main() { int n, m, q; scanf(\u0026quot;%d%d%d\u0026quot;, \u0026amp;n, \u0026amp;m, \u0026amp;q); vector\u0026lt;Edge\u0026gt; e; vector\u0026lt;int\u0026gt; u(m), v(m), w(m), last(m, 1); for (int i = 0; i \u0026lt; m; ++i) scanf(\u0026quot;%d%d%d\u0026quot;, \u0026amp;u[i], \u0026amp;v[i], \u0026amp;w[i]); for (int i = 1; i \u0026lt;= q; ++i) { int p, x; scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;p, \u0026amp;x); --p; if (i \u0026gt; 1) e.push_back({u[p], v[p], w[p], last[p], i - 1}); last[p] = i; w[p] = x; } for (int i = 0; i \u0026lt; m; ++i) e.push_back({u[i], v[i], w[i], last[i], q}); sort(e.begin(), e.end()); ans.resize(q + 1); ufs.init(n); solve(1, q, e); for (int i = 1; i \u0026lt;= q; ++i) printf(\u0026quot;%lld\\n\u0026quot;, ans[i]); return 0; } ","date":"2020-02-26T23:12:33+08:00","permalink":"https://ouuan.github.io/post/hnoi2010-%E5%9F%8E%E5%B8%82%E5%BB%BA%E8%AE%BE/","tags":["çº¿æ®µæ ‘åˆ†æ²»","åˆ†æ²»","LCT","å¹¶æŸ¥é›†","Kruskal"],"title":"ã€ŒHNOI2010ã€åŸå¸‚å»ºè®¾ï¼ˆçº¿æ®µæ ‘åˆ†æ²»ï¼ŒLCT/Kruskalï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥\né¢˜æ„ç®€è¿°\nç»™ä½ ä¸€å¼ è¾¹å¸¦æƒä¸”è¾¹ä» $1$ åˆ° $m$ ç¼–å·çš„æ— å‘å›¾ $G$ï¼Œç§°ä¸€å¼ å›¾ $H$ æ˜¯â€œå¥½çš„â€ï¼Œå½“ä¸”ä»…å½“å­˜åœ¨ä¸€ä¸ª $H$ çš„ç”Ÿæˆå­å›¾ $F$ ä½¿å¾— $F$ ä¸­æ¯ä¸ªç‚¹çš„åº¦æ•°éƒ½æ˜¯å¥‡æ•°ã€‚ç°åœ¨ï¼Œä½ éœ€è¦å›ç­” $m$ ä¸ªé—®é¢˜ï¼Œç¬¬ $i$ ä¸ªé—®é¢˜æ˜¯ï¼šæ±‚æœ€å°çš„ $x$ï¼Œä½¿å¾—ä»…ä¿ç•™ $G$ ä¸­ç¼–å·ä¸è¶…è¿‡ $i$ ä¸”è¾¹æƒä¸è¶…è¿‡ $x$ çš„è¾¹æ—¶ï¼Œå¾—åˆ°çš„ç”Ÿæˆå­å›¾æ˜¯â€œå¥½çš„â€ï¼Œæˆ–è€…æŒ‡å‡ºä¸å­˜åœ¨è¿™æ ·çš„ $x$ã€‚\n$2\\le n\\le 10^5$, $1\\le m\\le 3\\cdot 10^5$, TL 4sã€‚\n ç®€è¦åšæ³• ç¬¬ä¸€æ­¥è½¬åŒ– è¿™é“é¢˜é¢˜æ„å°±éå¸¸ç»•å£ï¼Œä¸è½¬åŒ–ä¸€ä¸‹å¾ˆéš¾ä¸‹æ‰‹ã€‚\næˆ‘ä»¬éœ€è¦å¾—åˆ°è¿™æ ·ä¸€ä¸ªç»“è®ºï¼š\n$G$ çš„ä¸€ä¸ªç”Ÿæˆå­å›¾æ˜¯â€œå¥½çš„â€ï¼Œå½“ä¸”ä»…å½“å®ƒçš„æ¯ä¸€ä¸ªè¿é€šå—éƒ½åŒ…å«å¶æ•°ä¸ªç‚¹ã€‚\nç»“è®ºçš„è¯æ˜ å¿…è¦æ€§\nå¦‚æœå­˜åœ¨ä¸€ä¸ªè¿é€šå—æœ‰å¥‡æ•°ä¸ªç‚¹ï¼Œè¿™å¼ å›¾çš„ä»»ä½•ä¸€ä¸ªç”Ÿæˆå­å›¾éƒ½å¿…ç„¶åŒ…å«ä¸€ä¸ªåŒ…å«å¥‡æ•°ä¸ªç‚¹çš„è¿é€šå—ã€‚ç”±äºæ— å‘å›¾ä¸­æ‰€æœ‰ç‚¹çš„åº¦æ•°ä¹‹å’Œä¸ºå¶æ•°ï¼Œä¸€ä¸ªåŒ…å«å¥‡æ•°ä¸ªç‚¹çš„è¿é€šå—ä¸­å¿…ç„¶å­˜åœ¨åº¦æ•°ä¸ºå¶æ•°çš„ç‚¹ï¼Œä»è€Œä¸ç¬¦åˆé¢˜æ„ã€‚\nå……åˆ†æ€§\nä¸€å¥è¯è¯´æ˜ï¼šå¯¹æ¯ä¸ªåŒ…å«å¶æ•°ä¸ªç‚¹çš„è¿é€šå—æ‰¾ä¸€ä¸ªç”Ÿæˆæ ‘ï¼Œæ¯ä¸ªç‚¹å¦‚æœæœ‰å¥‡æ•°ä¸ªå„¿å­å°±æ–­å¼€ä¸çˆ¶äº²çš„è¾¹ï¼Œå°±æ„é€ å‡ºæ¥äº†ã€‚\nä¸‹é¢æ˜¯è¯¦ç»†çš„è¯æ˜ã€‚\nå…ˆæ˜¯é—®é¢˜çš„è½¬åŒ–ï¼š\néœ€è¯ä¸€å¼ å›¾æ˜¯â€œå¥½çš„â€ï¼Œåªéœ€è¯æ˜å®ƒçš„æ¯ä¸€ä¸ªè¿é€šå—éƒ½æ˜¯â€œå¥½çš„â€ã€‚\néœ€è¯ä¸€å¼ è¿é€šå›¾æ˜¯â€œå¥½çš„â€ï¼Œåªéœ€è¯æ˜å®ƒçš„ä»»æ„ä¸€ä¸ªç”Ÿæˆæ ‘éƒ½æ˜¯â€œå¥½çš„â€ã€‚\néœ€è¯ä»»æ„ä¸€å¼ æ¯ä¸ªè¿é€šå—éƒ½åŒ…å«å¶æ•°ä¸ªç‚¹çš„å›¾éƒ½æ˜¯â€œå¥½çš„â€ï¼Œåªéœ€è¯æ˜ä»»æ„ä¸€æ£µåŒ…å«å¶æ•°ä¸ªç‚¹çš„æ ‘éƒ½æ˜¯â€œå¥½çš„â€ã€‚\nä¸‹é¢å¼€å§‹è¯æ˜ä»»æ„ä¸€æ£µåŒ…å«å¶æ•°ä¸ªç‚¹çš„æ ‘éƒ½æ˜¯â€œå¥½çš„â€ï¼š\né¦–å…ˆï¼Œä»»é€‰ä¸€ä¸ªç‚¹ä½œä¸ºæ ‘æ ¹ã€‚\nçº¦å®šï¼šä¸€ä¸ªå•ç‚¹çš„é«˜åº¦æ˜¯ $1$ï¼Œæ ‘æ ¹çš„æ‰€æœ‰å„¿å­å‡æ˜¯å¶å­çš„æ ‘é«˜åº¦ä¸º $2$ã€‚\næ¥ç€ï¼Œä½¿ç”¨å½’çº³æ³•è¯æ˜ã€‚\nå½’çº³åŸºç¡€ï¼šé«˜åº¦ä¸º $2$ ä¸”æœ‰å¶æ•°ä¸ªç‚¹çš„æ ‘æ˜¾ç„¶æ˜¯â€œå¥½çš„â€ã€‚é«˜åº¦ä¸º $1$ æˆ– $2$ ä¸”æœ‰å¥‡æ•°ä¸ªç‚¹çš„æ ‘æ˜¾ç„¶æœ‰ä¸”ä»…æœ‰æ ¹çš„åº¦æ•°ä¸ºå¶æ•°ã€‚\nå½’çº³å‡è®¾ï¼šé«˜åº¦ä¸è¶…è¿‡ $i$ ä¸”æœ‰å¶æ•°ä¸ªç‚¹çš„æ ‘æ˜¯â€œå¥½çš„â€ï¼Œé«˜åº¦ä¸è¶…è¿‡ $i$ ä¸”æœ‰å¥‡æ•°ä¸ªç‚¹çš„æ ‘å¯ä»¥é€šè¿‡åˆ è¾¹ä½¿å¾—æœ‰ä¸”ä»…æœ‰æ ¹çš„åº¦æ•°ä¸ºå¶æ•°ã€‚\nå½’çº³è¯æ˜ï¼š\n  é«˜åº¦ä¸º $i+1$ ä¸”æœ‰å¶æ•°ä¸ªç‚¹çš„æ ‘æ˜¯â€œå¥½çš„â€\nåˆ å»æ ‘æ ¹ä¸åŒ…å«å¶æ•°ä¸ªç‚¹çš„å­æ ‘ä¹‹é—´çš„è¿è¾¹ï¼Œç”±å½’çº³å‡è®¾å¾—åˆ°è¿™äº›å­æ ‘éƒ½æ˜¯â€œå¥½çš„â€ï¼Œæ‰€ä»¥åªéœ€è¯æ˜å‰©ä¸‹æ²¡è¢«åˆ å»çš„éƒ¨åˆ†æ˜¯â€œå¥½çš„â€ã€‚\nåˆ å»åï¼Œæ•´æ£µæ ‘ä¾ç„¶åŒ…å«å¶æ•°ä¸ªç‚¹ï¼Œå› æ­¤ï¼Œæ ¹æœ‰å¥‡æ•°ä¸ªå„¿å­ï¼Œä¹Ÿå°±æ˜¯è¯´æ ¹çš„åº¦æ•°ä¸ºå¥‡æ•°ã€‚ç”±å½’çº³å‡è®¾å¾—åˆ°å‰©ä¸‹çš„æ¯æ£µå­æ ‘éƒ½å¯ä»¥è½¬åŒ–æˆæœ‰ä¸”ä»…æœ‰æ ¹çš„åº¦æ•°ä¸ºå¶æ•°çš„æ ‘ï¼ŒåŠ ä¸Šä¸æ ¹ç›¸è¿çš„è¿™æ¡è¾¹ï¼Œæ‰€æœ‰å­æ ‘å†…çš„ç‚¹çš„åº¦æ•°å°±éƒ½ä¸ºå¥‡æ•°äº†ã€‚æ‰€ä»¥ï¼Œé«˜åº¦ä¸º $i+1$ ä¸”æœ‰å¶æ•°ä¸ªç‚¹çš„æ ‘æ˜¯â€œå¥½çš„â€ã€‚\n  é«˜åº¦ä¸º $i+1$ ä¸”æœ‰å¥‡æ•°ä¸ªç‚¹çš„æ ‘å¯ä»¥é€šè¿‡åˆ è¾¹ä½¿å¾—æœ‰ä¸”ä»…æœ‰æ ¹çš„åº¦æ•°ä¸ºå¶æ•°ã€‚\nä¸ä¸Šé¢ç±»ä¼¼ï¼Œå”¯ä¸€ä¸åŒçš„åœ°æ–¹åœ¨äºåˆ å»åŒ…å«å¶æ•°ä¸ªç‚¹çš„å­æ ‘åæ ¹æœ‰å¶æ•°ä¸ªå„¿å­ï¼Œæ­¤æ—¶æœ‰ä¸”ä»…æœ‰æ ¹çš„åº¦æ•°ä¸ºå¶æ•°ã€‚\n  é€šè¿‡ä¸Šè¿°å½’çº³å¯ä»¥å¾—åˆ°ï¼Œä»»æ„ä¸€æ£µåŒ…å«å¶æ•°ä¸ªç‚¹çš„æ ‘éƒ½æ˜¯â€œå¥½çš„â€ï¼Œä»è€Œå……åˆ†æ€§å¾—è¯ã€‚\n æœ‰äº†è¿™ä¸ªç»“è®ºä¹‹åï¼Œé—®é¢˜å°±å˜æˆäº†ï¼šå¯¹äºå‰ $i$ ($1\\le i\\le m$) æ¡è¾¹ï¼Œè‡³å°‘è¦ä¿ç•™å…¶ä¸­è¾¹æƒä¸å¤§äºå¤šå°‘çš„è¾¹ï¼Œæ‰èƒ½ä½¿å¾—å›¾ä¸­æ‰€æœ‰è¿é€šå—éƒ½åŒ…å«å¶æ•°ä¸ªç‚¹ï¼ˆæˆ–è€…ä¿ç•™æ‰€æœ‰å‰ $i$ æ¡è¾¹ä¾ç„¶æ— æ³•æ»¡è¶³ï¼‰ã€‚\nLCT åšæ³• è€ƒè™‘æŒ‰ç¼–å·é¡ºåºåŠ è¾¹ï¼Œç”¨å †/priority_queue æŒ‰è¾¹æƒå¤§å°ç»´æŠ¤è¾¹ï¼Œæ¯åŠ ä¸€æ¡è¾¹å°±æŒ‰è¾¹æƒä»å¤§åˆ°å°åˆ è¾¹ç›´è‡³å‡ºç°å¤§å°ä¸ºå¥‡æ•°çš„è¿é€šå—ï¼Œæœ€ååˆ æ‰çš„é‚£æ¡è¾¹çš„è¾¹æƒå°±æ˜¯ç­”æ¡ˆã€‚ç”±äºè¾¹æƒå¤§çš„è¾¹æ€»æ˜¯å…ˆè¢«åˆ æ‰ï¼Œå¯ä»¥ç”¨ LCT ç»´æŠ¤æœ€å°ç”Ÿæˆæ£®æ—è€Œéæ•´å¼ å›¾ã€‚\nå¤æ‚åº¦ $O(n+m\\log n)$ ã€‚\nåˆ†æ²»åšæ³• è¿™é¢˜è¿˜æœ‰ä¸€ä¸ªç¥å¥‡çš„åˆ†æ²»åšæ³•ã€‚\né¦–å…ˆï¼Œâ€œç¼–å·â€å’Œâ€œè¾¹æƒâ€å¯ä»¥çœ‹æˆæ˜¯ä¸¤ç»´åæ ‡ï¼Œä»è€Œå¯ä»¥æŠŠæ¯æ¡è¾¹è§†ä½œäºŒç»´å¹³é¢ä¸Šçš„ä¸€ä¸ªç‚¹ï¼Œâ€œç¼–å·ä¸è¶…è¿‡ $x$ ä¸”è¾¹æƒä¸è¶…è¿‡ $y$ çš„è¾¹â€å°±å¯¹åº”ç€ $(0, 0)$ åˆ° $(x, y)$ è¿™ä¸ªçŸ©å½¢ã€‚\nåœ¨ä¸‹æ–‡ä¸­ï¼Œç”¨ $(x_1, y_1, x_2, y_2)$ è¡¨ç¤ºç¼–å·åœ¨ $[x_1, x_2]$ ä¹‹å†…ï¼Œè¾¹æƒåœ¨ $[y_1, y_2]$ ä¹‹å†…çš„æ‰€æœ‰è¾¹æ„æˆçš„é›†åˆã€‚\näºæ˜¯ï¼ŒåŸé—®é¢˜å°±è½¬å˜æˆäº†ï¼Œå¯¹äºæ¯ä¸ªæ¨ªåæ ‡ $x$ï¼Œæ±‚å‡ºæœ€å°çš„ $y$ï¼Œä½¿å¾—åŸå›¾ä»…ä¿ç•™ $(0, 0, x, y)$ å†…çš„è¾¹æ—¶ï¼Œæ‰€æœ‰è¿é€šå—éƒ½åŒ…å«å¶æ•°ä¸ªç‚¹ã€‚\nä¸ºäº†æ–¹ä¾¿ï¼Œä¸‹æ–‡ä¸è€ƒè™‘æ— è§£çš„æƒ…å†µï¼Œå†™ä»£ç æ—¶ç®€å•åˆ¤ä¸€åˆ¤å°±å¥½äº†ã€‚\nåˆ†æ²»çš„æ¦‚è¿°ï¼š\n å…¨å±€ç»´æŠ¤ä¸€ä¸ªæ”¯æŒæ’¤é”€çš„å¹¶æŸ¥é›†ã€‚ solve(xl, xr, yl, yr) ä¼šç®—å‡º $[xl, xr]$ çš„ç­”æ¡ˆï¼Œå·²çŸ¥è¿™äº›ç­”æ¡ˆéƒ½åœ¨ $[yl, yr]$ å†…ã€‚è°ƒç”¨ä¹‹å‰éœ€è¦ä¿è¯å¹¶æŸ¥é›†å†…çš„è¾¹é›†ä¸º $(0, 0, xl - 1, yl - 1)$ã€‚ ä»¤ $xmid = (xl + xr) / 2$ï¼Œsolve(xl, xr, yl, yr) å…ˆè®¡ç®—å‡º $xmid$ çš„ç­”æ¡ˆä¸º $ans[xmid]$ï¼Œç„¶åé€’å½’è®¡ç®— solve(xl, xmid - 1, ans[xmid], yr) å’Œ solve(xmid + 1, xr, yl, ans[xmid])ã€‚  è¿™å¸¦æ¥äº†ä¸¤ä¸ªé—®é¢˜ï¼š\n é€’å½’ä¸‹å»æ—¶å¦‚ä½•ä¿è¯å¹¶æŸ¥é›†å†…åˆ†åˆ«å«æœ‰ $(0, 0, xl-1, ansmid-1)$ å’Œ $(0, 0, xmid, yl-1)$ï¼Ÿ æ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ  è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹æ›´åŠ å®Œæ•´çš„æµç¨‹ï¼š\nsolve(xl, xr, yl, yr): å¦‚æœ xl \u0026gt; xr: return å¦‚æœ yl = yr: [xl, xr] çš„ç­”æ¡ˆä¸º yl return ä»¤æ­¤æ—¶çš„å¹¶æŸ¥é›†çŠ¶æ€ä¸º ver1 = (0, 0, xl - 1, yl - 1) åŠ ä¸Š (xl, 0, xmid, yl - 1) çš„è¾¹ ä»¤æ­¤æ—¶çš„å¹¶æŸ¥é›†çŠ¶æ€ä¸º ver2 = (0, 0, xmid, yl - 1) å°† (0, yl, xmid, yr) çš„è¾¹æŒ‰çºµåæ ‡ï¼ˆè¾¹æƒï¼‰é¡ºåºä»å°åˆ°å¤§åŠ å…¥ï¼Œç›´è‡³å›¾ä¸­æ²¡æœ‰å¥‡è¿é€šå— ä¸Šä¸€æ­¥ä¸­æœ€ååŠ å…¥çš„è¾¹çš„è¾¹æƒå³ä¸º xmid çš„ç­”æ¡ˆ ans[xmid] å›é€€è‡³ ver2 = (0, 0, xmid, yl - 1) solve(xmid + 1, xr, yl, ans[xmid]) å›é€€è‡³ ver1 = (0, 0, xl - 1, yl - 1) åŠ ä¸Š (0, yl, xl - 1, ans[xmid] - 1) çš„è¾¹ï¼Œæ­¤æ—¶å¹¶æŸ¥é›†å†…çš„è¾¹ä¸º (0, 0, xl - 1, ansmid - 1) solve(xl, xmid - 1, ans[xmid], yr) å›é€€è‡³ ver1 = (0, 0, xl - 1, yl - 1)  ç»“åˆå›¾æ¥ç†è§£ï¼š\n ä¸€å¼€å§‹å¹¶æŸ¥é›†é‡Œæ˜¯ â‘ ã€‚ åŠ ä¸Š â‘¡ã€‚ åœ¨ â‘¢ + â‘£ ä¸­æŒ‰è¾¹æƒä»å°åˆ°å¤§åŠ è¾¹ï¼Œç›´è‡³åªæœ‰å¶è¿é€šå—ã€‚çœŸæ­£åŠ äº†çš„è¾¹æ˜¯ â‘£ï¼Œans[xmid] æ˜¯ â‘£ çš„é¡¶ç«¯ã€‚ åˆ æ‰ â‘£ï¼Œé€’å½’è§£å†³çº¢è‰²éƒ¨åˆ†ã€‚ åˆ æ‰ â‘¡ï¼ŒåŠ ä¸Š â‘¤ï¼Œé€’å½’è§£å†³è“è‰²éƒ¨åˆ†ã€‚  è¿˜æœ‰ä¸€ä¸ªç»†èŠ‚ï¼šä¸ºäº†å¿«é€Ÿè·å–ä¸€ä¸ªçŸ©å½¢å†…çš„è¾¹ï¼Œå¯ä»¥å°† $(0, 0, xr, yr)\\setminus(0, 0, xl-1, yl-1)$ è¿™äº›è¾¹ä½œä¸º solve çš„å‚æ•°ã€‚\næœ‰äº†è¿™ä¸ªå®Œæ•´æµç¨‹ï¼Œç¬¬ä¸€ä¸ªé—®é¢˜ï¼ˆæ­£ç¡®æ€§ï¼‰è§£å†³äº†ã€‚\næ¥ä¸‹æ¥æ˜¯ç¬¬äºŒä¸ªé—®é¢˜ï¼šæ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ\næˆ‘ä»¬æ¥çœ‹æ¯ä¸€å±‚åˆ†æ²»çš„ solve å‡½æ•°çš„å‚æ•°æ„æˆçš„çš„è¿™äº›çŸ©å½¢ï¼Œå®é™…ä¸Šæ˜¯ä»å·¦ä¸Šåˆ°å³ä¸‹æ’åˆ—ï¼Œè€Œ solve å‡½æ•°ä¸­æ·»åŠ /å›é€€/ä½œä¸ºå‚æ•°çš„è¾¹æ˜¯å‘å·¦å’Œå‘ä¸‹çš„ä¸¤æ¡ã€‚å¯ä»¥çœ‹å‡ºï¼šåœ¨æ¯ä¸€å±‚åˆ†æ²»å†…ï¼Œæ¯æ¡è¾¹æœ€å¤šåœ¨ä¸‰ä¸ª solve å‡½æ•°å†…å¸¦æ¥äº†å¸¸æ•°æ¬¡æ“ä½œã€‚ï¼ˆå¹¶ä¸ä¼šå‡ºç°å¤šä¸ªé«˜åº¦ä¸º $1$ çš„çŸ©å½¢æ’æˆä¸€æ’çš„æƒ…å†µï¼Œå› ä¸ºé«˜åº¦ä¸º $1$ æ—¶ç›´æ¥å¾—åˆ°ç­”æ¡ˆç»ˆæ­¢é€’å½’äº†ã€‚ï¼‰\näºæ˜¯ï¼Œæ¯ä¸€å±‚åˆ†æ²»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(m\\log n)$ï¼Œæ€»æ—¶é—´å¤æ‚åº¦å°±æ˜¯ $O(n+m\\log^2 n+m\\log m)$ã€‚\nè™½ç„¶ä¸¤ä¸ª logï¼Œä½†å®ƒæ˜¯åˆ†æ²»å’Œå¹¶æŸ¥é›†ï¼Œæ‰€ä»¥è·‘çš„æ¯” LCT å¿«ã€‚\næˆ‘å†™çš„ç©ºé—´å¤æ‚åº¦æ˜¯ $O(n+m\\log n)$ã€‚è²Œä¼¼å¯ä»¥ä¸åœ¨å‚æ•°é‡Œæ”¾ $(0, 0, xr, yr)\\setminus(0, 0, xl-1, yl-1)$ï¼Œç„¶åå¯ä»¥çº¿æ€§ç©ºé—´å¤æ‚åº¦ï¼Œä¸æ˜¯å¾ˆæ‡‚..ï¼ˆå¦‚æœè¿½æ±‚ç†è®ºå¤æ‚åº¦çš„è¯ LCT å®ƒä¸é¦™å—ï¼›å¦åˆ™ï¼Œåªè¦èƒ½è¿‡ï¼Œä¸”ä½“ä¼šåˆ°è¿™ä¸ªåšæ³•çš„ç²¾é«“å°±å¥½ã€‚ï¼‰\nP.S. æˆ‘æ˜¯åœ¨ ä¸€äº›å¸¸ç”¨çš„æ•°æ®ç»“æ„ç»´æŠ¤æ‰‹æ³• - zzq çœ‹åˆ°è¿™é¢˜å’Œè¿™ä¸ªåšæ³•çš„ï¼ˆå…¶å®æ˜¯æˆ‘ä¸€å¼€å§‹æ²¡çœ‹æ‡‚ä»–çš„ä¼ªç åœ¨å¹²å˜›ï¼Œåæ¥è‡ªå·±æƒ³å‡ºæ¥çš„..ï¼‰ã€‚æˆ‘ä¸ªäººè§‰å¾—è¿™ä¸ªå’Œæ•´ä½“äºŒåˆ†å·®çš„æŒºå¤§çš„ï¼Œå¥—ä¸åˆ° æ•´ä½“äºŒåˆ†çš„æ¡†æ¶ ä¸­ã€‚ä½†æˆ‘ä¹Ÿä¸çŸ¥é“æ•´ä½“äºŒåˆ†æœ‰æ²¡æœ‰ä¸€ä¸ªå®˜æ–¹è€Œç²¾ç¡®çš„å®šä¹‰ï¼Œå¤§å®¶å„è‡ªçš„å®šä¹‰æˆ–ç‹­ä¹‰æˆ–å¹¿ä¹‰ï¼Œè¯»è€…å¯ä»¥è‡ªè¡Œåˆ¤æ–­æ˜¯å¦è¦æŠŠè¿™ä¸ªåšæ³•è§†ä½œä¸€ç§æ•´ä½“äºŒåˆ†ã€‚ï¼ˆæŠŠè¿™ä¸ªè§†ä½œæ•´ä½“äºŒåˆ†çš„äººå¤šåŠä¼šè®¤ä¸ºå†³ç­–å•è°ƒæ€§ä¼˜åŒ– DP é‚£ä¸ªåˆ†æ²»ä¹Ÿæ˜¯æ•´ä½“äºŒåˆ†å§..ï¼‰\nå‚è€ƒä»£ç  LCT åšæ³• #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;queue\u0026gt; #include \u0026lt;stack\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int INF = 2e9; int read() { int out = 0; char c; while (!isdigit(c = getchar())); for (; isdigit(c); c = getchar()) out = out * 10 + c - '0'; return out; } struct Edge { int u, v, w, id; bool operator\u0026lt;(const Edge \u0026amp;b) const { return w \u0026lt; b.w; } }; struct LCT { struct Node { vector\u0026lt;int\u0026gt; ch; int pa; bool node, odd, vir, rev; Edge e, mx; Node() : ch(2, 0), pa(0), node(true), odd(true), vir(false), rev(false), e({0, 0, 0, 0}), mx({0, 0, 0, 0}) {} Node(int u, int v, int w, int id) : ch(2, 0), pa(0), node(false), odd(false), vir(false), rev(false), e({u, v, w, id}), mx({u, v, w, id}) {} }; int odd; vector\u0026lt;Node\u0026gt; t; LCT(int n, int m) { t.resize(n + 1); t[0] = Node(0, 0, 0, 0); t.reserve(n + m + 1); odd = n; } bool nroot(int x) { return x == t[t[x].pa].ch[0] || x == t[t[x].pa].ch[1]; } void pushup(int x) { t[x].mx = max(t[x].e, max(t[t[x].ch[0]].mx, t[t[x].ch[1]].mx)); t[x].odd = t[t[x].ch[0]].odd ^ t[t[x].ch[1]].odd ^ t[x].vir ^ t[x].node; } void rotate(int x) { int y = t[x].pa; int z = t[y].pa; int k = x == t[y].ch[1]; if (nroot(y)) t[z].ch[y == t[z].ch[1]] = x; t[x].pa = z; t[y].ch[k] = t[x].ch[k ^ 1]; t[t[x].ch[k ^ 1]].pa = y; t[x].ch[k ^ 1] = y; t[y].pa = x; pushup(y); pushup(x); } void reverse(int x) { swap(t[x].ch[0], t[x].ch[1]); t[x].rev ^= 1; } void pushdown(int x) { if (t[x].rev) { reverse(t[x].ch[0]); reverse(t[x].ch[1]); t[x].rev = false; } } void Splay(int x) { static vector\u0026lt;int\u0026gt; stk; // ä¸€ä»¶ç„å­¦çš„äº‹æ˜¯è¿™é‡Œ vector 1.7s, stack 2.8s... int u = x; stk.push_back(x); while (nroot(u)) stk.push_back(u = t[u].pa); while (!stk.empty()) { pushdown(stk.back()); stk.pop_back(); } while (nroot(x)) { int y = t[x].pa; int z = t[y].pa; if (nroot(y)) (x == t[y].ch[1]) ^ (y == t[z].ch[1]) ? rotate(x) : rotate(y); rotate(x); } } void access(int x) { for (int y = 0; x; x = t[y = x].pa) { Splay(x); t[x].vir ^= t[y].odd ^ t[t[x].ch[1]].odd; t[x].ch[1] = y; pushup(x); } } void makeroot(int x) { access(x); Splay(x); reverse(x); } int findroot(int x) { access(x); Splay(x); while (t[x].ch[0]) { pushdown(x); x = t[x].ch[0]; } Splay(x); return x; } void link(int x, int y, int w, int id) { int e = t.size(); t.emplace_back(x, y, w, id); makeroot(x); makeroot(y); odd -= t[x].odd + t[y].odd; t[x].pa = t[y].pa = e; t[e].vir = t[x].odd ^ t[y].odd; pushup(e); odd += t[e].odd; } void cut(int x, int y, int id) { makeroot(x); if (findroot(y) == x) { if (t[t[x].ch[1]].e.id == id || t[t[t[x].ch[1]].ch[0]].e.id == id) { odd -= t[x].odd; t[x].ch[1] = t[y].pa = t[y].ch[0] = 0; pushup(x); pushup(y); odd += t[x].odd + t[y].odd; } } } }; int main() { int n = read(); int m = read(); LCT t(n, m); priority_queue\u0026lt;Edge\u0026gt; q; int ans = INF; for (int i = 1; i \u0026lt;= m; ++i) { int u = read(); int v = read(); int w = read(); q.push({u, v, w, i}); t.makeroot(u); if (t.findroot(v) == u) { Edge e = t.t[u].mx; if (e.w \u0026gt; w) { t.cut(e.u, e.v, e.id); t.link(u, v, w, i); } else if (!t.odd) ans = min(ans, w); } else t.link(u, v, w, i); while (!t.odd) { Edge e = q.top(); q.pop(); ans = min(ans, e.w); t.cut(e.u, e.v, e.id); } printf(\u0026quot;%d\\n\u0026quot;, ans == INF ? -1 : ans); } return 0; }   åˆ†æ²»åšæ³• #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;stack\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; int read() { int out = 0; char c; while (!isdigit(c = getchar())); for (; isdigit(c); c = getchar()) out = out * 10 + c - '0'; return out; } const int INF = 1e9 + 1; struct UFS { int odd; vector\u0026lt;int\u0026gt; f, s; struct Change { int x, y, s; }; stack\u0026lt;Change\u0026gt; c; void init(int n) { f.resize(n + 1, 0); s.resize(n + 1, 1); for (int i = 1; i \u0026lt;= n; ++i) f[i] = i; odd = n; } int find(int x) { return x == f[x] ? x : find(f[x]); } void merge(int x, int y) { x = find(x); y = find(y); if (x == y) return; if (s[x] \u0026lt; s[y]) swap(x, y); c.push({x, y, s[x]}); if ((s[x] \u0026amp; 1) \u0026amp;\u0026amp; (s[y] \u0026amp; 1)) odd -= 2; s[x] += s[y]; f[y] = x; } void rollback(int x) { while ((int)c.size() \u0026gt; x) { Change t = c.top(); c.pop(); if ((t.s \u0026amp; 1) \u0026amp;\u0026amp; (s[t.y] \u0026amp; 1)) odd += 2; s[t.x] = t.s; f[t.y] = t.y; } } int status() const { return c.size(); } } ufs; struct Edge { int u, v, w, id; bool operator\u0026lt;(const Edge \u0026amp;b) const { return w \u0026lt; b.w; } bool in(int x1, int y1, int x2, int y2) const { return id \u0026gt;= x1 \u0026amp;\u0026amp; id \u0026lt;= x2 \u0026amp;\u0026amp; w \u0026gt;= y1 \u0026amp;\u0026amp; w \u0026lt;= y2; } }; vector\u0026lt;int\u0026gt; ans; void solve(int xl, int xr, int yl, int yr, vector\u0026lt;Edge\u0026gt;\u0026amp; e) { if (xl \u0026gt; xr) return; if (yl == yr) { for (int i = xl; i \u0026lt;= xr; ++i) ans[i] = yl; return; } int ver1 = ufs.status(); int xmid = (xl + xr) \u0026gt;\u0026gt; 1; int p; for (p = 0; p \u0026lt; (int)e.size() \u0026amp;\u0026amp; e[p].w \u0026lt; yl; ++p) if (e[p].in(xl, 0, xmid, yl - 1)) ufs.merge(e[p].u, e[p].v); int ver2 = ufs.status(); for (int i = p; i \u0026lt; (int)e.size(); ++i) { if (e[i].in(0, yl, xmid, yr)) { ufs.merge(e[i].u, e[i].v); if (!ufs.odd) { ans[xmid] = e[i].w; break; } } } vector\u0026lt;Edge\u0026gt; le, re; for (auto x : e) if (x.in(0, 0, xr, ans[xmid]) \u0026amp;\u0026amp; !x.in(0, 0, xmid, yl - 1)) re.push_back(x); for (auto x : e) if (x.in(0, 0, xmid - 1, yr) \u0026amp;\u0026amp; !x.in(0, 0, xl - 1, ans[xmid] - 1)) le.push_back(x); ufs.rollback(ver2); solve(xmid + 1, xr, yl, ans[xmid], re); if (ans[xmid] \u0026lt; INF) { ufs.rollback(ver1); for (int i = p; i \u0026lt; (int)e.size(); ++i) if (e[i].in(0, yl, xl - 1, ans[xmid] - 1)) ufs.merge(e[i].u, e[i].v); solve(xl, xmid - 1, ans[xmid], yr, le); } ufs.rollback(ver1); } int main() { int n = read(); int m = read(); vector\u0026lt;Edge\u0026gt; e; for (int i = 0; i \u0026lt; m; ++i) { int u = read(); int v = read(); int w = read(); e.push_back({u, v, w, i}); } sort(e.begin(), e.end()); ans.resize(m, INF); ufs.init(n); solve(0, m - 1, 1, INF, e); for (auto x : ans) printf(\u0026quot;%d\\n\u0026quot;, x == INF ? -1 : x); return 0; }  ","date":"2020-02-18T11:45:02+08:00","permalink":"https://ouuan.github.io/post/cf603e/","tags":["ç»“è®º","å›¾è®º","LCT","åˆ†æ²»","å¹¶æŸ¥é›†"],"title":"CF603E Pastoral Odditiesï¼ˆç»“è®ºï¼ŒLCT/åˆ†æ²»+å¹¶æŸ¥é›†ï¼‰"},{"categories":["çŸ¥è¯†ç‚¹"],"contents":"æ•´ä½“äºŒåˆ†æ˜¯ä¸€ç§ç¦»çº¿ç®—æ³•ï¼Œå¯ä»¥å°†ä¸€ä¸ªä¿®æ”¹åŒæ—¶ä½œç”¨äºå¤šä¸ªè¯¢é—®ï¼Œä»è€Œå‡å°‘ä¸å¿…è¦çš„å¼€é”€ï¼Œå°†äºŒåˆ†ç­”æ¡ˆä»å•æ¬¡è¯¢é—®æ‰©å±•åˆ°å¤šæ¬¡è¯¢é—®ã€‚\nåœ¨ä¸€äº›é¢˜ç›®ä¸­ï¼Œç›¸æ¯”ä¸å…¶å®ƒè§£æ³•ï¼Œæ•´ä½“äºŒåˆ†å¯ä»¥é¿å…å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œé™ä½ä»£ç éš¾åº¦ä¸ç©ºé—´å¤æ‚åº¦ã€‚\nè§£å†³çš„é—®é¢˜ æ¦‚è¿° ç»™ä½ å¤šç»„ä¿®æ”¹ä¸è¯¢é—®ï¼Œå…¶ä¸­æ¯ä¸ªä¿®æ”¹æœ‰ä¸€ä¸ªå¯äºŒåˆ†çš„æŒ‡æ ‡ï¼Œæ¯ä¸ªè¯¢é—®æœ‰ä¸€ä¸ªç›®æ ‡ï¼Œä½ éœ€è¦å¯¹æ¯ä¸ªè¯¢é—®å›ç­”ï¼šåº”ç”¨äº†æŒ‡æ ‡ä¸è¶…è¿‡å¤šå°‘çš„æ‰€æœ‰ä¿®æ”¹åï¼Œè¿™ä¸ªè¯¢é—®çš„ç›®æ ‡å¯ä»¥è¾¾åˆ°ï¼Œæˆ–è€…åº”ç”¨äº†æ‰€æœ‰ä¿®æ”¹åè¯¥ç›®æ ‡ä¾ç„¶æ— æ³•è¾¾åˆ°ã€‚å¹¶ä¸”ï¼Œä½ å¯ä»¥åœ¨å¾—çŸ¥æ‰€æœ‰ä¿®æ”¹å’Œè¯¢é—®åå¼€å§‹å›ç­”ï¼Œå³å…è®¸ç¦»çº¿ã€‚\nå½¢å¼åŒ–æè¿° æŒ‡æ ‡é›†åˆ ä¸ æŒ‡æ ‡æ¯”è¾ƒ æ„æˆäº†ä¸€ä¸ªæœ‰é™ å…¨åºé›† ã€‚å…¶ä¸­æŒ‡æ ‡é›†åˆç”¨ $\\mathbf{INDEX}$ è¡¨ç¤ºï¼ŒæŒ‡æ ‡æ¯”è¾ƒç”¨ $\\le$ è¡¨ç¤ºã€‚\nè´¡çŒ®é›†åˆ å’Œ è´¡çŒ®ç´¯åŠ  æ„æˆäº†ä¸€ä¸ª äº¤æ¢å¹ºåŠç¾¤ ã€‚å…¶ä¸­è´¡çŒ®é›†åˆç”¨ $\\mathbf{CONTRIBUTION}$ è¡¨ç¤ºï¼Œè´¡çŒ®ç´¯åŠ ç”¨ $+$ è¡¨ç¤ºï¼Œä¹Ÿå¯ç”¨ $\\Sigma$ è¡¨ç¤ºå¤šä¸ªè´¡çŒ®ç´¯åŠ ã€‚\nä¸€ä¸ª ä¿®æ”¹ $m$ å…·æœ‰ æŒ‡æ ‡ $m.index$ å’Œ è´¡çŒ® $m.contribution$ ä¸¤ä¸ªå±æ€§ï¼Œå…¶ä¸­æŒ‡æ ‡å±äºæŒ‡æ ‡é›†åˆï¼Œè´¡çŒ®å±äºè´¡çŒ®é›†åˆã€‚\nä¸€ä¸ª è¯¢é—® $q$ åŒ…å«ä¸€ä¸ª ç›®æ ‡å‡½æ•° $q.f:\\mathbf{CONTRIBUTION}\\to\\{0, 1\\}$ï¼ˆè¾“å…¥æ˜¯ä¸€ä¸ªè´¡çŒ®ï¼Œè¾“å‡ºæ˜¯ $0$ æˆ– $1$ï¼‰ï¼Œæ»¡è¶³ $\\forall x, y\\in\\mathbf{CONTRIBUTION}, q.f(x)=1\\implies q.f(x+y)=1$ï¼ˆè¿™æ¡æ€§è´¨ä¿è¯äº†å¯äºŒåˆ†æ€§ï¼‰ã€‚\né‚£ä¹ˆï¼Œä¸€ä¸ªå¯ä»¥è¢«æ•´ä½“äºŒåˆ†è§£å†³çš„é—®é¢˜å¯ä»¥è¡¨è¿°å¦‚ä¸‹ï¼š\né¢˜ç›®æè¿°\n ç»™å®šä¿®æ”¹é›†åˆ $M$ å’Œè¯¢é—®é›†åˆ $Q$ï¼Œ å¯¹äºæ¯ä¸ª $q\\in Q$ï¼Œæ±‚å‡ºæœ€å°çš„ $x\\in\\mathbf{INDEX}$ ä½¿å¾— $q.f(\\sum_{m\\in M}[m.index\\le x]m.contribution)=1$ï¼Œæˆ–æŒ‡å‡ºè¿™æ ·çš„ $x$ ä¸å­˜åœ¨ã€‚ï¼ˆå…¶ä¸­ $[m.index\\le x]$ æ˜¯ è‰¾å¼—æ£®æ‹¬å· ã€‚ï¼‰   å¯¹ä¼ ç»ŸäºŒåˆ†çš„åˆ†æ å¦‚æœè¯¢é—®åªæœ‰ä¸€ä¸ªï¼Œä½¿ç”¨ äºŒåˆ†ç­”æ¡ˆ å³å¯æ±‚è§£ã€‚\nå¦‚æœå¯¹æ¯æ¬¡è¯¢é—®å•ç‹¬ä½¿ç”¨äºŒåˆ†ç­”æ¡ˆï¼Œæ•ˆç‡å°†ååˆ†ä½ä¸‹ï¼Œç©¶å…¶åŸå› ï¼Œåœ¨äºâ€œè®¡ç®—ä¿®æ”¹å¯¹è¯¢é—®çš„è´¡çŒ®â€è¿™ä¸€æ­¥æœ‰å¤§é‡é‡å¤çš„æ“ä½œï¼Œå†—ä½™çš„è®¡ç®—æ²¡æœ‰å¾—åˆ°æœ‰æ•ˆçš„åˆå¹¶ã€‚\nå› æ­¤ï¼Œæ•´ä½“äºŒåˆ†çš„ä¼˜åŒ–é‡ç‚¹å°±åœ¨äºâ€œå°†å¤šä¸ªæ“ä½œåŒæ—¶ä½œç”¨äºå¤šä¸ªè¯¢é—®â€ã€‚\nç®—æ³•æ¡†æ¶ æ¦‚è¿°  é€’å½’åœ°å¤„ç†æŒ‡æ ‡/ç­”æ¡ˆåœ¨ä¸€ä¸ªåŒºé—´å†…çš„ä¿®æ”¹å’Œè¯¢é—®ã€‚ æ¯æ¬¡è®¡ç®—å‡ºå·¦åŠçš„ä¿®æ”¹å¯¹æ‰€æœ‰è¯¢é—®çš„è´¡çŒ®ã€‚ ä¾æ¬¡åˆ¤æ–­æ¯ä¸ªè¯¢é—®åœ¨åŠ ä¸Šæ¥è‡ªå·¦åŠä¿®æ”¹çš„è´¡çŒ®åæ˜¯å¦æ»¡è¶³äº†è¦æ±‚ã€‚ æŒ‰ä¿®æ”¹çš„æŒ‡æ ‡ï¼Œè¯¢é—®æ˜¯å¦åœ¨åŠ ä¸Šæ¥è‡ªå·¦åŠä¿®æ”¹çš„è´¡çŒ®åæ»¡è¶³äº†è¦æ±‚ï¼Œå°†ä¿®æ”¹å’Œè¯¢é—®åˆ’åˆ†æˆä¸¤åŠï¼Œç»§ç»­é€’å½’ä¸‹å»ã€‚ é€’å½’åœ¨æŒ‡æ ‡åŒºé—´å¤§å°ä¸º $1$ æ—¶ç»ˆæ­¢ã€‚  ä¼ªä»£ç  1 è¿™ä»½ä¼ªä»£ç ä¸­å¯¹æ¯ä¸ªè¯¢é—®ç»´æŠ¤ä¸€ä¸ª $q.current$ å±æ€§ï¼Œè¡¨ç¤ºè¿™ä¸ªè¯¢é—®å·²ç»åŠ ä¸Šäº†å¤šå°‘è´¡çŒ®ï¼ˆåœ¨å®é™…ä»£ç å®ç°ä¸­ $q.current$ å¾€å¾€ä¸å¿…å’Œâ€œè´¡çŒ®â€æ˜¯åŒä¸€ç±»å‹çš„ï¼Œå¦‚â€œè´¡çŒ®â€å¯èƒ½ç”¨ä¸€ä¸ªæ•°æ®ç»“æ„ç»´æŠ¤ï¼Œè€Œâ€œæ»¡è¶³äº†å¤šå°‘â€å¯ä»¥ç®€å•åœ°ç”¨ä¸€ä¸ªæ•°è¡¨ç¤ºï¼‰ã€‚\n$$ \\begin{array}{rl} 1\u0026amp;\\textbf{function}\\text{ PARALLEL_BINARY_SEARCH}(l, r, M, Q)\\\\\n2\u0026amp;\\qquad\\textbf{if }Q=\\varnothing\\\\\n3\u0026amp;\\qquad\\qquad\\textbf{return}\\\\\n4\u0026amp;\\qquad \\textbf{if }l=r\\\\\n5\u0026amp;\\qquad\\qquad \\text{The answer of all queries in }Q\\text{ is }l\\\\\n6\u0026amp;\\qquad\\qquad \\textbf{return}\\\\\n7\u0026amp;\\qquad mid\\gets \\text{middle of }l\\text{ and }r\\\\\n8\u0026amp;\\qquad \\mathrm{LM}\\gets\\varnothing\\\\\n9\u0026amp;\\qquad \\mathrm{RM}\\gets\\varnothing\\\\\n10\u0026amp;\\qquad sum\\gets(\\mathbf{CONTRIBUTION}, +)\\text{ çš„å•ä½å…ƒ}\\\\\n11\u0026amp;\\qquad \\textbf{for each }m\\in M\\\\\n12\u0026amp;\\qquad\\qquad \\textbf{if }m.index\\le mid\\\\\n13\u0026amp;\\qquad\\qquad\\qquad sum\\gets sum+m.contribution\\\\\n14\u0026amp;\\qquad\\qquad\\qquad \\mathrm{LM}\\gets \\mathrm{LM}\\bigcup\\{m\\}\\\\\n15\u0026amp;\\qquad\\qquad \\textbf{else}\\\\\n16\u0026amp;\\qquad\\qquad\\qquad \\mathrm{RM}\\gets \\mathrm{RM}\\bigcup\\{m\\}\\\\\n17\u0026amp;\\qquad \\mathrm{LQ}\\gets\\varnothing\\\\\n18\u0026amp;\\qquad \\mathrm{RQ}\\gets\\varnothing\\\\\n19\u0026amp;\\qquad \\textbf{for each }q\\in Q\\\\\n20\u0026amp;\\qquad\\qquad \\textbf{if }q.f(q.current+sum)=1\\\\\n21\u0026amp;\\qquad\\qquad\\qquad \\mathrm{LQ}\\gets \\mathrm{LQ}\\bigcup \\{q\\}\\\\\n22\u0026amp;\\qquad\\qquad \\textbf{else}\\\\\n23\u0026amp;\\qquad\\qquad\\qquad q.current\\gets q.current+sum\\\\\n24\u0026amp;\\qquad\\qquad\\qquad \\mathrm{RQ}\\gets \\mathrm{RQ}\\bigcup \\{q\\}\\\\\n25\u0026amp;\\qquad \\text{PARALLEL_BINARY_SEARCH}(l, mid, \\mathrm{LM}, \\mathrm{LQ})\\\\\n26\u0026amp;\\qquad \\text{PARALLEL_BINARY_SEARCH}(mid\\text{ çš„åç»§}, r, \\mathrm{RM}, \\mathrm{RQ})\\\\\n27\u0026amp;\\\\\n28\u0026amp;\\textbf{function}\\text{ SOLVE(M, Q)}\\\\\n29\u0026amp;\\qquad \\textbf{for each }q\\in Q\\\\\n30\u0026amp;\\qquad\\qquad q.current\\gets(\\mathbf{CONTRIBUTION}, +)\\text{ çš„å•ä½å…ƒ}\\\\\n31\u0026amp;\\qquad \\text{PARALLEL_BINARY_SEARCH}(\\min\\{\\mathbf{INDEX}\\}, \\max\\{\\mathbf{INDEX}\\}, M, Q) \\end{array} $$\nä¼ªä»£ç  2 è¿™ä»½ä¼ªä»£ç ç»´æŠ¤äº†ä¸€ä¸ªå…¨å±€çš„è´¡çŒ®ï¼Œæ¯æ¬¡åŠ ä¸Šå·¦åŠä¿®æ”¹çš„è´¡çŒ®åï¼Œå…ˆé€’å½’è§£å†³å³åŠéƒ¨åˆ†ï¼Œç„¶åå°†è¿™äº›ä¿®æ”¹å›é€€ï¼Œå†å»è§£å†³å·¦åŠéƒ¨åˆ†ã€‚\n$$ \\begin{array}{rl} 1\u0026amp;current\\gets(\\mathbf{CONTRIBUTION}, +)\\text{ çš„å•ä½å…ƒ}\\\\\n2\u0026amp;\\\\\n3\u0026amp;\\textbf{function}\\text{ PARALLEL_BINARY_SEARCH}(l, r, M, Q)\\\\\n4\u0026amp;\\qquad\\textbf{if }Q=\\varnothing\\\\\n5\u0026amp;\\qquad\\qquad\\textbf{return}\\\\\n6\u0026amp;\\qquad \\textbf{if }l=r\\\\\n7\u0026amp;\\qquad\\qquad \\text{The answer of all queries in }Q\\text{ is }l\\\\\n8\u0026amp;\\qquad\\qquad \\textbf{return}\\\\\n9\u0026amp;\\qquad mid\\gets \\text{middle of }l\\text{ and }r\\\\\n10\u0026amp;\\qquad \\mathrm{LM}\\gets\\varnothing\\\\\n11\u0026amp;\\qquad \\mathrm{RM}\\gets\\varnothing\\\\\n12\u0026amp;\\qquad old\\gets current\\\\\n13\u0026amp;\\qquad \\textbf{for each }m\\in M\\\\\n14\u0026amp;\\qquad\\qquad \\textbf{if }m.index\\le mid\\\\\n15\u0026amp;\\qquad\\qquad\\qquad current\\gets current+m.contribution\\\\\n16\u0026amp;\\qquad\\qquad\\qquad \\mathrm{LM}\\gets \\mathrm{LM}\\bigcup\\{m\\}\\\\\n17\u0026amp;\\qquad\\qquad \\textbf{else}\\\\\n18\u0026amp;\\qquad\\qquad\\qquad \\mathrm{RM}\\gets \\mathrm{RM}\\bigcup\\{m\\}\\\\\n19\u0026amp;\\qquad \\mathrm{LQ}\\gets\\varnothing\\\\\n20\u0026amp;\\qquad \\mathrm{RQ}\\gets\\varnothing\\\\\n21\u0026amp;\\qquad \\textbf{for each }q\\in Q\\\\\n22\u0026amp;\\qquad\\qquad \\textbf{if }q.f(current)=1\\\\\n23\u0026amp;\\qquad\\qquad\\qquad \\mathrm{LQ}\\gets \\mathrm{LQ}\\bigcup \\{q\\}\\\\\n24\u0026amp;\\qquad\\qquad \\textbf{else}\\\\\n25\u0026amp;\\qquad\\qquad\\qquad \\mathrm{RQ}\\gets \\mathrm{RQ}\\bigcup \\{q\\}\\\\\n26\u0026amp;\\qquad \\text{PARALLEL_BINARY_SEARCH}(mid\\text{ çš„åç»§}, r, \\mathrm{RM}, \\mathrm{RQ})\\\\\n27\u0026amp;\\qquad current\\gets old\\\\\n28\u0026amp;\\qquad \\text{PARALLEL_BINARY_SEARCH}(l, mid, \\mathrm{LM}, \\mathrm{LQ})\\\\\n29\u0026amp;\\\\\n30\u0026amp;\\textbf{function}\\text{ SOLVE(M, Q)}\\\\\n31\u0026amp;\\qquad \\text{PARALLEL_BINARY_SEARCH}(\\min\\{\\mathbf{INDEX}\\}, \\max\\{\\mathbf{INDEX}\\}, M, Q) \\end{array} $$\nç®—æ³•åˆ†æ æ•´ä½“äºŒåˆ†ç®—æ³•çš„æ ¸å¿ƒåœ¨äºï¼š\n æ•´ä½“åœ°è®¡ç®—å¤šä¸ªä¿®æ”¹å¯¹å¤šä¸ªè¯¢é—®çš„è´¡çŒ®ã€‚ ä¼ªä»£ç  1 çš„ 23 è¡Œå¤„ / ä¼ªä»£ç  2 çš„å…ˆå¤„ç†å³åŠéƒ¨åˆ†å†å›é€€å·¦åŠä¿®æ”¹ï¼Œå°†å·¦åŠä¿®æ”¹å¯¹å³åŠè¯¢é—®çš„è´¡çŒ®åº”ç”¨åˆ°æ•´ä¸ªå¤„ç†å³åŠéƒ¨åˆ†çš„è¿‡ç¨‹ä¸­ï¼Œä¹‹åä¸å†é‡å¤è®¡ç®—ã€‚  ä»¤è®¡ç®—ä¸¤ä¸ªè´¡çŒ®ä¹‹å’Œçš„æ—¶é—´å¤æ‚åº¦ä¸º $O(f(\\cdots))$ï¼Œåˆ¤å®šä¸€ä¸ªè´¡çŒ®æ˜¯å¦è¾¾åˆ°ä¸€ä¸ªè¯¢é—®çš„ç›®æ ‡çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(g(\\cdots))$ï¼Œé‚£ä¹ˆæ€»çš„æ—¶é—´å¤æ‚åº¦ä¸º:ï¼ˆ\u0026ldquo;$\\cdots$\u0026rdquo; è¡¨ç¤ºä¼šå¯¹å¤æ‚åº¦é€ æˆå½±å“çš„å„ç§å› ç´ ï¼‰\n$$O(((|M|+|Q|)\\cdot f(\\cdots)+|Q|\\cdot g(\\cdots))\\cdot\\log|\\mathbf{INDEX}|)$$\nä¸ºä»€ä¹ˆä¸¤ä¾§æ“ä½œä¸ªæ•°åˆ†å¸ƒä¸å‡è€Œå¤æ‚åº¦ä¾ç„¶æ­£ç¡®ï¼Ÿ è™½ç„¶æ“ä½œåˆ’åˆ†åˆ°ä¸¤ä¾§åå¯èƒ½ä¸€ä¾§æ“ä½œå¤šå¦ä¸€ä¾§æ“ä½œå°‘ï¼Œä½†æŒ‡æ ‡çš„åˆ†å¸ƒæ˜¯å‡åŒ€çš„ï¼Œä»è€Œä¿è¯äº†åˆ†æ²»çš„å±‚æ•°æ˜¯ $O(\\log|\\mathbf{INDEX}|)$ï¼Œè€Œæ¯ä¸€å±‚çš„æ“ä½œæ€»æ•°æ˜¯å›ºå®šçš„ï¼Œæ€»çš„å¤æ‚åº¦å°±æ˜¯æ­£ç¡®çš„ã€‚\n warning\nè¿™é‡Œçš„æ—¶é—´å¤æ‚åº¦æ²¡æœ‰è®¡ç®—é¢„å¤„ç†çš„æ—¶é—´å¤æ‚åº¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨æ•´ä½“äºŒåˆ†çš„å‡½æ•°ä¸­ï¼Œé™¤ç»§ç»­é€’å½’ä¸‹å»çš„éƒ¨åˆ†ï¼Œå¤æ‚åº¦åº”è¯¥æ˜¯å½“å‰çš„ä¿®æ”¹æ•°åŠ ä¸Šæ“ä½œæ•°ï¼Œå¯èƒ½å†ä¹˜ä¸Šè‹¥å¹²ä¸ª logã€‚è€Œå¤æ‚åº¦ä¸æ€»æ“ä½œä¸ªæ•°/å€¼åŸŸå¤§å°å¤šé¡¹å¼ç›¸å…³çš„æ­¥éª¤ï¼ˆå¦‚ï¼Œåˆå§‹åŒ–æ•°æ®ç»“æ„ï¼‰åº”è¯¥åœ¨ä¸»å‡½æ•°ä¸­å®Œæˆï¼Œåœ¨äºŒåˆ†è¿‡ç¨‹ä¸­ï¼Œå¦‚æœéœ€è¦æ¸…ç©ºæ•°æ®ç»“æ„ï¼Œåº”è¯¥ä½¿ç”¨ä¸€äº›å¿«é€Ÿçš„æ¸…ç©ºæ–¹æ³•ï¼Œå¦‚å°†ä¹‹å‰çš„æ“ä½œå›é€€ã€ä½¿ç”¨æ—¶é—´æˆ³æ¸…ç©ºç­‰ã€‚\n ä¾‹é¢˜ ä¸Šé¢ç»™å‡ºçš„æ˜¯ç®—æ³•æŠ½è±¡çš„æ¡†æ¶ï¼Œå®é™…ä»£ç ä¸­ï¼Œä¸éœ€è¦çœŸçš„å°†â€œè´¡çŒ®â€å¯¹è±¡åŒ–ï¼Œè€Œåº”è¯¥é‡‡ç”¨é«˜æ•ˆçš„æ–¹å¼ï¼ˆæ•°æ®ç»“æ„ï¼‰å»è®¡ç®—ä¿®æ”¹å¯¹è¯¢é—®çš„è´¡çŒ®ã€‚\nï¼ˆæ³¨ï¼šä¸‹é¢çš„ä¾‹é¢˜å¾€å¾€å¯ä»¥é€šè¿‡å¯æŒä¹…åŒ–æ•°æ®ç»“æ„ã€æ•°æ®ç»“æ„åµŒå¥—æ¥åœ¨çº¿åœ°å¤„ç†ï¼Œè¿™é‡Œåªä»‹ç»æ•´ä½“äºŒåˆ†çš„è§£æ³•ã€‚ï¼‰\né™æ€åŒºé—´ç¬¬ k å° é¢˜ç›®æè¿°\nç»™ä½ ä¸€ä¸ªé•¿ä¸º $n$ çš„æ•°åˆ— $a_1, a_2, \\ldots, a_n$ ä»¥åŠ $m$ ç»„è¯¢é—®ï¼Œæ¯æ¬¡è¯¢é—®ä¸€ä¸ªåŒºé—´ $[l, r]$ï¼Œæ±‚ ${a_l, a_{l+1}, \\ldots, a_r}$ ä¸­ç¬¬ $k$ å°çš„æ•°ã€‚\n åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œå¥—ç”¨ä¸Šé¢çš„å½¢å¼åŒ–å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·çœ‹å¾…ï¼š\n è´¡çŒ®ï¼šä¸€ä¸ªé•¿ä¸º $n$ çš„æ•°ç»„ï¼Œæ¯ä¸ªä½ç½®ä¸Šçš„æ•°ä¸º $1$ è¡¨ç¤ºè¿™ä¸ªä½ç½®â€œç¬¦åˆè¦æ±‚â€ï¼ˆå°äºç­‰äºæŸä¸ªæ•°ï¼‰ï¼Œå¦åˆ™è¡¨ç¤ºè¿™ä¸ªä½ç½®â€œä¸ç¬¦åˆè¦æ±‚â€ã€‚ æŒ‡æ ‡ï¼šä¸€ä¸ªæ•°çš„å€¼ã€‚ ä¿®æ”¹ï¼šä¸€ä¸ªä¿®æ”¹ä»£è¡¨ç€æ•°ç»„ä¸Šä¸€ä¸ªä½ç½®çš„å€¼ï¼Œå¦‚ï¼Œ$a_2=7$ å¯¹åº”ç€è¿™æ ·çš„ä¸€ä¸ªä¿®æ”¹ï¼šè´¡çŒ®æ˜¯å°†ä¸‹æ ‡ $2$ åŠ ä¸€ï¼ŒæŒ‡æ ‡æ˜¯ $7$ã€‚ è¯¢é—®çš„ç›®æ ‡ï¼šè´¡çŒ®çš„ $[l, r]$ ä¹‹å’Œä¸å°äº $k$ ã€‚  é€šè¿‡æ•´ä½“äºŒåˆ†ï¼Œæˆ‘ä»¬å¯ä»¥å°†é—®é¢˜è½¬åŒ–æˆï¼šå•ç‚¹åŠ ã€åŒºé—´æ±‚å’Œï¼Œæ‰€æœ‰å•ç‚¹åŠ éƒ½åœ¨åŒºé—´æ±‚å’Œä¹‹å‰ï¼Œå…è®¸ç¦»çº¿ï¼Œè¦æ±‚å¤æ‚åº¦ä¸å½“å‰æ“ä½œæ•°ç›¸å…³è€Œéä¸æ€»æ“ä½œæ•° $n$, $m$ ç›¸å…³ã€‚\nä¸€ä¸ªå®¹æ˜“æƒ³åˆ°çš„åšæ³•æ˜¯ä½¿ç”¨æ ‘çŠ¶æ•°ç»„æ¥ç»´æŠ¤ï¼Œä½¿ç”¨æ—¶é—´æˆ³æ¸…ç©ºã€‚\næ€æ ·ä½¿ç”¨æ—¶é—´æˆ³æ¸…ç©ºæ•°ç»„ï¼Ÿ ç»´æŠ¤ä¸€ä¸ªæ—¶é—´æˆ³ tim ä»¥åŠä¸€ä¸ªæ•°ç»„ visï¼Œæ¸…ç©ºæ—¶ ++timï¼Œè®¿é—®æ•°ç»„çš„ä¸‹æ ‡ i å‰æ£€æŸ¥ vis[i] æ˜¯å¦ç­‰äº timï¼Œè‹¥å¦å°±å°† vis[i] è®¾ä¸º tim å¹¶æ¸…ç©º vis[i] ã€‚\n å…¶å®ï¼Œè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„æ€§è´¨ï¼šæ‰€æœ‰ä¿®æ”¹å‡åœ¨è¯¢é—®å‰ã€‚è¿™æ ·çš„è¯ï¼Œå°±å¯ä»¥é€šè¿‡è®¡ç®—å‰ç¼€å’Œæ¥æ±‚è§£ã€‚ä½†å…ˆè®¡ç®—å‰ç¼€å’Œå†æŸ¥è¯¢å¤æ‚åº¦ä¼šå’Œ $n$ ç›¸å…³ï¼Œå…ˆç¦»æ•£åŒ–å†è®¡ç®—å‰ç¼€å’Œå¤æ‚åº¦ä¼šå¤šä¸€ä¸ª logã€‚å…¶å®è¿˜æœ‰ä¸€ç§å¤„ç†æ–¹æ³•ï¼šå¦‚æœä¿®æ”¹å’Œè¯¢é—®çš„ä½ç½®æœ‰åºï¼Œå¯ä»¥åœ¨æ‰«ä¸€éçš„è¿‡ç¨‹ä¸­ç»´æŠ¤å‰ç¼€å’Œå¹¶æŸ¥è¯¢ã€‚å¦‚æœæ¯æ¬¡éƒ½æ’åºçš„è¯å¤æ‚åº¦ä¼šå¤šä¸€ä¸ª logï¼Œä½†æˆ‘ä»¬å¯ä»¥åªåœ¨ä¸»å‡½æ•°ä¸­è¿›è¡Œä¸€éæ’åºï¼Œåœ¨æ•´ä½“äºŒåˆ†çš„è¿‡ç¨‹ä¸­ä¿æŒç›¸å¯¹é¡ºåºä¸å˜ï¼Œè¿™æ ·çš„è¯æ€»å¤æ‚åº¦å°±æ˜¯ $O((n+m)\\log n)$ï¼ˆå¦‚æœå€¼åŸŸå¤§å¯ä»¥ç¦»æ•£åŒ–ï¼‰ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; struct Operation { int x, id, type; Operation(int _x, int _id = -1, int _type = 0) : x(_x), id(_id), type(_type) {} }; vector\u0026lt;int\u0026gt; ans, cur, tmp; #define mid ((l + r) \u0026gt;\u0026gt; 1) void solve(int l, int r, vector\u0026lt;Operation\u0026gt; \u0026amp;ops) // è¿™é‡Œ l å’Œ r è¡¨ç¤ºå·¦é—­å³å¼€åŒºé—´ [l, r) { if (l == r - 1) { for (auto op : ops) { if (op.type) ans[op.id] = l; } return; } int sum = 0; for (auto op : ops) { if (op.type) tmp[op.id] += sum * op.type; // ä½¿ç”¨ tmp è®°å½•ä¸€ä¸ªè¯¢é—®å—åˆ°çš„è´¡çŒ®æ€»å’Œ else if (op.x \u0026lt; mid) ++sum; } vector\u0026lt;Operation\u0026gt; lop, rop; for (auto op : ops) { if (op.type) { if (cur[op.id] + tmp[op.id] \u0026gt;= op.x) lop.push_back(op); else { if (op.type == 1) cur[op.id] += tmp[op.id]; // åœ¨è¢«æ‹†æˆä¸¤ä¸ªçš„è¯¢é—®ä¸­çš„åä¸€ä¸ªå¤„æ›´æ–° current rop.push_back(op); } if (op.type == 1) tmp[op.id] = 0; // åœ¨è¢«æ‹†æˆä¸¤ä¸ªçš„è¯¢é—®ä¸­çš„åä¸€ä¸ªå¤„æ¸…ç©º tmp } else // ç”±äºè¿™é‡Œæ“ä½œä¹‹é—´çš„é¡ºåºæ˜¯é‡è¦çš„ï¼Œä¿®æ”¹å’Œè¯¢é—®è¦æŒ‰åŸåºåˆ’åˆ†åˆ°å·¦å³ä¸¤è¾¹ï¼Œè€Œä¸èƒ½å…ˆåˆ’åˆ†ä¿®æ”¹å†åˆ’åˆ†è¯¢é—® { if (op.x \u0026lt; mid) lop.push_back(op); else rop.push_back(op); } } vector\u0026lt;Operation\u0026gt;().swap(ops); // é‡Šæ”¾ç©ºé—´ï¼Œå¦åˆ™ç©ºé—´å¤æ‚åº¦å¸¦ log solve(l, mid, lop); solve(mid, r, rop); } int main() { int n, m; scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;n, \u0026amp;m); vector\u0026lt;int\u0026gt; a(n), lsh(n); for (int i = 0; i \u0026lt; n; ++i) { scanf(\u0026quot;%d\u0026quot;, \u0026amp;a[i]); lsh[i] = a[i]; } sort(lsh.begin(), lsh.end()); lsh.resize(unique(lsh.begin(), lsh.end()) - lsh.begin()); // ç¦»æ•£åŒ– vector\u0026lt;vector\u0026lt;Operation\u0026gt; \u0026gt; bucket(n); // æ¡¶æ’åº for (int i = 0; i \u0026lt; n; ++i) bucket[i].emplace_back(lower_bound(lsh.begin(), lsh.end(), a[i]) - lsh.begin()); for (int i = 0; i \u0026lt; m; ++i) { int l, r, x; scanf(\u0026quot;%d%d%d\u0026quot;, \u0026amp;l, \u0026amp;r, \u0026amp;x); if (l \u0026gt; 1) bucket[l - 2].emplace_back(x, i, -1); bucket[r - 1].emplace_back(x, i, 1); } vector\u0026lt;Operation\u0026gt; ops; for (auto i : bucket) { for (auto j : i) { ops.push_back(j); } } ans.resize(m, 0); cur = tmp = ans; solve(0, lsh.size(), ops); for (auto x : ans) printf(\u0026quot;%d\\n\u0026quot;, lsh[x]); return 0; }   ã€ŒZJOI2013ã€Kå¤§æ•°æŸ¥è¯¢ é¢˜ç›®æè¿°\nç»™ä½ ä¸€ä¸ªç”± $n$ ä¸ªåˆå§‹ä¸ºç©ºçš„å¯é‡é›†æ„æˆçš„åºåˆ—ï¼Œéœ€è¦æ”¯æŒä¸¤ç§æ“ä½œï¼š\n å‘ä¸€æ®µåŒºé—´ $[l, r]$ å†…çš„æ¯ä¸€ä¸ªå¯é‡é›†å†…åŠ å…¥ä¸€ä¸ªæ•° $c$ ã€‚ æŸ¥è¯¢ä¸€æ®µåŒºé—´ $[l, r]$ å†…çš„æ‰€æœ‰å¯é‡é›†å¹¶èµ·æ¥ï¼ˆä¸å»é‡ï¼‰åç¬¬ $c$ å¤§çš„æ•°ã€‚   ç»è¿‡æ•´ä½“äºŒåˆ†åé—®é¢˜è½¬åŒ–ä¸ºï¼šåŒºé—´åŠ ï¼ŒåŒºé—´æ±‚å’Œï¼Œè¦æ±‚å¤æ‚åº¦ä¸å½“å‰æ“ä½œæ•°ç›¸å…³ã€‚\nè¿™æ¬¡æ²¡æœ‰ä¿®æ”¹åœ¨è¯¢é—®ä¹‹å‰çš„æ€§è´¨ï¼Œæ‰€ä»¥æ²¡ä»€ä¹ˆå¯ä¼˜åŒ–çš„åœ°æ–¹ï¼Œå¤æ‚åº¦ä¸å½“å‰æ“ä½œæ•°ç›¸å…³æœ‰å¾ˆå¤šç§æ–¹å¼ï¼š\n åŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘ã€‚ ç¦»æ•£åŒ–+çº¿æ®µæ ‘ã€‚ æ ‘çŠ¶æ•°ç»„+æ—¶é—´æˆ³æ¸…ç©ºã€‚  å‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef long long ll; struct Operation { int l, r, id; ll target, current, tmp; Operation(int _l, int _r, int _id, ll _target) : l(_l), r(_r), id(_id), target(_target), current(0) {} }; struct BIT { int tim; vector\u0026lt;ll\u0026gt; a; vector\u0026lt;int\u0026gt; vis; BIT() : tim(0) {} void resize(int size) { a.resize(size + 1, 0); vis.resize(size + 1, 0); } void modify(int p, int x) { for (; p \u0026lt; (int)a.size(); p += (p \u0026amp; -p)) { if (vis[p] != tim) { vis[p] = tim; a[p] = 0; } a[p] += x; } } ll query(int p) { ll out = 0; for (; p; p -= (p \u0026amp; -p)) { if (vis[p] == tim) out += a[p]; } return out; } void clear() { ++tim; } } bitk, bitb; void modify(int p, int x) { bitk.modify(p, x); bitb.modify(p, (1 - p) * x); } ll query(int p) { return bitk.query(p) * p + bitb.query(p); } void clear() { bitk.clear(); bitb.clear(); } vector\u0026lt;int\u0026gt; ans; #define mid ((l + r) \u0026gt;\u0026gt; 1) void solve(int l, int r, vector\u0026lt;Operation\u0026gt; \u0026amp;ops) { if (l == r - 1) { for (auto op : ops) { if (~op.id) ans[op.id] = l; } return; } clear(); for (auto \u0026amp;op : ops) { if (~op.id) op.tmp = query(op.r) - query(op.l - 1); else if (op.target \u0026lt; mid) { modify(op.l, 1); modify(op.r + 1, -1); } } vector\u0026lt;Operation\u0026gt; lop, rop; for (auto op : ops) { if (op.id == -1) { if (op.target \u0026lt; mid) lop.push_back(op); else rop.push_back(op); } else { if (op.current + op.tmp \u0026gt;= op.target) lop.push_back(op); else { op.current += op.tmp; rop.push_back(op); } } } vector\u0026lt;Operation\u0026gt;().swap(ops); solve(l, mid, lop); solve(mid, r, rop); } int main() { int n, m; scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;n, \u0026amp;m); int qid = 0; vector\u0026lt;Operation\u0026gt; ops; for (int i = 0; i \u0026lt; m; ++i) { int op, l, r; ll x; scanf(\u0026quot;%d%d%d%lld\u0026quot;, \u0026amp;op, \u0026amp;l, \u0026amp;r, \u0026amp;x); if (op == 1) ops.emplace_back(l, r, -1, -x); // å–è´Ÿå°†ç¬¬ k å¤§è½¬åŒ–ä¸ºç¬¬ k å° else ops.emplace_back(l, r, qid++, x); } ans.resize(qid); bitk.resize(n); bitb.resize(n); solve(-n, n + 1, ops); for (auto x : ans) printf(\u0026quot;%d\\n\u0026quot;, -x); return 0; }   ç»ƒä¹   ã€ŒPOI2011ã€Meteors çŸ©é˜µä¹˜æ³• ã€ŒHNOI2016ã€ç½‘ç»œ ","date":"2020-02-14T14:50:32+08:00","permalink":"https://ouuan.github.io/post/parallel-binary-search/","tags":["æ•´ä½“äºŒåˆ†","ç¦»çº¿ç®—æ³•","åˆ†æ²»"],"title":"æ•´ä½“äºŒåˆ†å­¦ä¹ ç¬”è®°"},{"categories":null,"contents":"","date":"2020-02-07T17:43:21+08:00","permalink":"https://ouuan.github.io/search/","tags":null,"title":"æœç´¢"},{"categories":null,"contents":"å‹æƒ…é“¾æ¥  EternalAlexander ustze xht37 PinkRabbit lk Sooke wxw memset0 AprilGrimoire zbw  ä¸€äº›ç½‘ç«™  å›¾åºŠ å‡ ä½• å›¾è®º å‡½æ•° æ•°åˆ— åœ¨çº¿æ±‡ç¼–ç¼–è¯‘å™¨ C++ LaTeX å…¬å¼å¤§å…¨ LaTeX å…¬å¼å¥†å…¨ .tex æ•™ç¨‹ OI Wiki Wolfram Alpha OIerDb OI ä¸­è½¬ç«™ çº¿ç¨¿ä¸Šè‰²  ","date":"2020-02-06T22:53:11+08:00","permalink":"https://ouuan.github.io/links/","tags":null,"title":"é“¾æ¥"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ LOJ\næ´›è°·\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€å¼ å¸¦è¾¹æƒçš„æ— å‘å›¾ï¼Œè¾¹æƒéƒ½å½¢å¦‚ $2^a3^b$ ï¼Œè‹¥å¹²è¯¢é—®ï¼Œæ¯æ¬¡é—®æ˜¯å¦å­˜åœ¨ $u$ åˆ° $v$ ä¸”è¾¹æƒçš„æœ€å°å…¬å€æ•°ä¸º $2^a3^b$ çš„é€”å¾„ï¼ˆå¯ä»¥ä¸æ˜¯ç®€å•è·¯å¾„ï¼‰ã€‚\nç‚¹æ•° $5\\cdot 10^4$ï¼Œè¾¹æ•° $10^5$ï¼Œè¯¢é—®æ•° $5\\cdot 10^4$ ã€‚\nç®€è¦åšæ³• é¦–å…ˆè½¬åŒ–é—®é¢˜ï¼šä»…ä¿ç•™å›¾ä¸­ $2$ çš„æŒ‡æ•°ä¸è¶…è¿‡ $a$ ä¸” $3$ çš„æŒ‡æ•°ä¸è¶…è¿‡ $b$ çš„è¾¹ï¼Œæ˜¯å¦æ»¡è¶³â€œ$u$ å’Œ $v$ è¿é€šï¼Œä¸”è¿é€šå—å†… $2$ çš„æœ€é«˜æŒ‡æ•°ä¸º $a$ï¼Œ$3$ çš„æœ€é«˜æŒ‡æ•°ä¸º $b$â€ï¼Ÿ\nå‘ç° $a$ å’Œ $b$ åœ¨å¢å¤§/å‡å°æ—¶ä¼šå¯¼è‡´è¾¹åŠ å…¥å›¾ä¸­/ä»å›¾ä¸­åˆ å»ï¼Œè¿™å’Œè«é˜Ÿçš„å·¦å³æŒ‡é’ˆå¾ˆåƒã€‚äº‹å®ä¸Šè¿™é¢˜çš„ç¡®å¯ä»¥çœ‹ä½œä¸€ç§é•¿å¾—æ¯”è¾ƒå¥‡æ€ªçš„è«é˜Ÿã€‚\nå…·ä½“æ¥è¯´ï¼Œç»´æŠ¤ $a$ æŒ‡é’ˆå’Œ $b$ æŒ‡é’ˆï¼Œç”±äºæ¯æ¡è¾¹è¦ä¹ˆå…ˆè¢« $a$ æŒ‡é’ˆæ‰«åˆ°ï¼Œè¦ä¹ˆå…ˆè¢« $b$ æŒ‡é’ˆæ‰«åˆ°ï¼Œå¢å¤§å…¶ä¸­ä¸€ä¸ªæŒ‡é’ˆæ—¶åˆ¤ä¸€ä¸‹æ˜¯å¦æ»¡è¶³å¦ä¸€ä¸ªæŒ‡é’ˆçš„è¦æ±‚ï¼Œè‹¥æ»¡è¶³åˆ™åŠ å…¥å›¾ä¸­å³å¯ã€‚\nç”±äºåˆ è¾¹ä¸å¥½ç»´æŠ¤ï¼Œå¯ä»¥ä½¿ç”¨ç±»ä¼¼ å›æ»šè«é˜Ÿ çš„æ–¹æ³•å¤„ç†ï¼Œä½†ç”±äºæœ¬é¢˜çš„ç‰¹æ®Šæ€§ï¼Œä¸å­˜åœ¨â€œå·¦å³ç«¯ç‚¹åœ¨åŒä¸€å—çš„æš´åŠ›è®¡ç®—â€è¿™ç§æƒ…å†µã€‚\nå…·ä½“å®ç°å¯ä»¥å‚è€ƒä»£ç ï¼ˆ\nå‘ å½¢å¦‚ u u 0 0 çš„è¯¢é—®è‹¥ä¸å­˜åœ¨ $(u, v)$ çš„è¾¹æƒä¸º $1$ åˆ™ç­”æ¡ˆä¸º Noï¼Œæ‰€ä»¥è¿é€šå—å†… $2$ å’Œ $3$ æŒ‡æ•°çš„åˆå€¼è¦èµ‹ä¸º $-1$ ã€‚\nä¸ªäººè§‰å¾— u u 0 0 ç­”æ¡ˆä¸ä¸º Yes å¾ˆè ¢..\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cmath\u0026gt; #include \u0026lt;stack\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; int B; struct Edge { int u, v, a, b; Edge(int _a = 0, int _b = 0): a(_a), b(_b) {} }; vector\u0026lt;Edge\u0026gt; a, b; struct Query { int u, v, a, b, ra, rb, id; Query(int _u, int _v, int _a, int _b, int _ra, int _rb, int _id): u(_u), v(_v), a(_a), b(_b), ra(_ra), rb(_rb), id(_id) {} bool operator\u0026lt;(const Query\u0026amp; y) const { return b \u0026lt; y.b; } }; vector\u0026lt;vector\u0026lt;Query\u0026gt; \u0026gt; q; int n, m, k, qa, qb; vector\u0026lt;bool\u0026gt; ans; struct UnionFindSet { int tim; vector\u0026lt;int\u0026gt; f, siz, two, three; struct Change { int x, y, x2, x3; Change(int _x, int _y, int _x2, int _x3): x(_x), y(_y), x2(_x2), x3(_x3) {} }; stack\u0026lt;Change\u0026gt; c; int find(int x) { return x == f[x] ? x : find(f[x]); } void merge(int x, int y, int tw, int th) { x = find(x); y = find(y); if (x == y) { c.emplace(x, -1, two[x], three[x]); two[x] = max(two[x], tw); three[x] = max(three[x], th); return; } if (siz[x] \u0026lt; siz[y]) swap(x, y); c.emplace(x, y, two[x], three[x]); siz[x] += siz[y]; f[y] = x; two[x] = max(tw, max(two[x], two[y])); three[x] = max(th, max(three[x], three[y])); } void record() { tim = c.size(); } void rollback() { while (c.size() \u0026gt; tim) { auto t = c.top(); c.pop(); if (~t.y) { f[t.y] = t.y; siz[t.x] -= siz[t.y]; two[t.x] = t.x2; three[t.x] = t.x3; } else { two[t.x] = t.x2; three[t.x] = t.x3; } } } void reset() { f.resize(n + 1); siz.assign(n + 1, 1); two.assign(n + 1, -1); three = two; for (int i = 1; i \u0026lt;= n; ++i) f[i] = i; tim = 0; while (!c.empty()) c.pop(); } void check(Query t) { int u = find(t.u); int v = find(t.v); ans[t.id] = u == v \u0026amp;\u0026amp; two[u] == t.ra \u0026amp;\u0026amp; three[u] == t.rb; } } ufs; bool cmpa(const Edge\u0026amp; x, const Edge\u0026amp; y) { return x.a \u0026lt; y.a; } bool cmpb(const Edge\u0026amp; x, const Edge\u0026amp; y) { return x.b \u0026lt; y.b; } void adda(int x) { if (~qb \u0026amp;\u0026amp; a[x].b \u0026lt;= b[qb].b) { ufs.merge(a[x].u, a[x].v, a[x].a, a[x].b); } } void addb(int x) { if (~qa \u0026amp;\u0026amp; b[x].a \u0026lt;= a[qa].a) { ufs.merge(b[x].u, b[x].v, b[x].a, b[x].b); } } int main() { scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;n, \u0026amp;m); a.resize(m); for (int i = 0; i \u0026lt; m; ++i) scanf(\u0026quot;%d%d%d%d\u0026quot;, \u0026amp;a[i].u, \u0026amp;a[i].v, \u0026amp;a[i].a, \u0026amp;a[i].b); b = a; sort(a.begin(), a.end(), cmpa); sort(b.begin(), b.end(), cmpb); scanf(\u0026quot;%d\u0026quot;, \u0026amp;k); B = m / sqrt(k) + 1; q.resize(m / B + 1); ans.resize(k); for (int i = 0; i \u0026lt; k; ++i) { int u, v, ra, rb; scanf(\u0026quot;%d%d%d%d\u0026quot;, \u0026amp;u, \u0026amp;v, \u0026amp;ra, \u0026amp;rb); int aa = upper_bound(a.begin(), a.end(), Edge(ra, rb), cmpa) - a.begin() - 1; int bb = upper_bound(b.begin(), b.end(), Edge(ra, rb), cmpb) - b.begin() - 1; if (~aa \u0026amp;\u0026amp; ~bb) q[aa / B].emplace_back(u, v, aa, bb, ra, rb, i); else ans[i] = false; } for (int i = 0; i \u0026lt; q.size(); ++i) { sort(q[i].begin(), q[i].end()); ufs.reset(); qb = -1; qa = i * B; for (auto t : q[i]) { while (qb \u0026lt; t.b) addb(++qb); ufs.record(); while (qa \u0026lt; t.a) adda(++qa); ufs.check(t); ufs.rollback(); qa = i * B; } } for (auto x : ans) puts(x ? \u0026quot;Yes\u0026quot; : \u0026quot;No\u0026quot;); return 0; } ","date":"2020-01-08T14:49:06+08:00","permalink":"https://ouuan.github.io/post/hnoi2016%E6%9C%80%E5%B0%8F%E5%85%AC%E5%80%8D%E6%95%B0%E5%9B%9E%E6%BB%9A%E8%8E%AB%E9%98%9F%E5%B9%B6%E6%9F%A5%E9%9B%86/","tags":["è«é˜Ÿ","å¹¶æŸ¥é›†"],"title":"ã€ŒHNOI2016ã€æœ€å°å…¬å€æ•°ï¼ˆå›æ»šè«é˜Ÿï¼Œå¹¶æŸ¥é›†ï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ UOJ\nLOJ\næ´›è°·\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² $S$ï¼Œæœ‰ $q$ æ¬¡è¯¢é—®ï¼Œæ¯æ¬¡ç»™ä½ è¯¢é—®ä¸² $T$ ä»¥åŠå·¦å³ç«¯ç‚¹ $l$, $r$ï¼Œè¯¢é—® $T$ æœ‰å¤šå°‘ä¸ª æœ¬è´¨ä¸åŒ çš„å­ä¸² ä¸æ˜¯ $S[l..r]$ çš„å­ä¸²ã€‚\n$|S|\\le 5\\cdot 10^5$, $\\sum|T|\\le 10^6$, $q\\le 10^5$ ã€‚\nç®€è¦åšæ³• ä¸éœ€è¦æœ¬è´¨ä¸åŒã€l=1ã€r=|S| æšä¸¾ $T$ çš„å‰ç¼€ï¼Œæ‰¾åˆ°è¿™ä¸ªå‰ç¼€çš„æœ€é•¿åç¼€ä½¿å…¶æ˜¯ $S$ çš„å­ä¸²ï¼Œå°±å¯ä»¥æ±‚å‡ºç­”æ¡ˆäº†ã€‚\næ¢å¥è¯è¯´ï¼Œå¯¹äºæ¯ä¸ª $i$ï¼Œæ±‚å‡ºæœ€å°çš„ $j$ ($1\\le j\\le i+1$) ä½¿å¾— $T[j..i]$ æ˜¯ $S$ çš„å­ä¸²ï¼Œé‚£ä¹ˆ $\\sum j-1$ å°±æ˜¯ç­”æ¡ˆã€‚\nå¯ä»¥å¯¹ $S$ å»º SAMï¼Œç»´æŠ¤ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ $T[j..i]$ åœ¨ SAM ä¸Šå¯¹åº”çš„é¡¶ç‚¹ï¼Œå¦‚æœæ‹“å±•ä¸€ä¸ªå­—ç¬¦åä¸æ˜¯ $S$ çš„å­ä¸²å°±æŠŠ $j$ åŠ ä¸€ï¼Œå¦‚æœä½äºå½“å‰ SAM ä¸ŠèŠ‚ç‚¹çš„é•¿åº¦é™åˆ¶å°±è·³ parent è¾¹ï¼Œä¹Ÿå°±æ˜¯ ä»é¦–éƒ¨åˆ å»å­—ç¬¦ ã€‚\néœ€è¦æœ¬è´¨ä¸åŒã€l=1ã€r=|S| ç”±æœ¬è´¨ä¸åŒå¯ä»¥æƒ³åˆ°ç”¨ SAM å»é‡ã€‚å…·ä½“æ¥è¯´ï¼Œå¯¹ $T$ å»º SAMï¼Œå¯¹æ¯ä¸ª $T[j..i]$ åœ¨ SAM ä¸Šæ‰“ä¸ªæ ‡è®°ï¼Œè¡¨ç¤º $T[j..i]$ åŠå…¶æ‰€æœ‰åç¼€ï¼ˆå³å¯¹åº”é¡¶ç‚¹åŠå…¶åœ¨ parent æ ‘ä¸Šçš„ç¥–å…ˆï¼‰éƒ½æ˜¯ $S$ çš„å­ä¸²ï¼Œæœ€å DFS ä¸€éå³å¯æ±‚å‡ºç­”æ¡ˆã€‚\nåŸé—®é¢˜ å¦‚æœè¯¢é—®çš„ä¸æ˜¯æ•´ä¸ª $S$ è€Œæ˜¯å…¶ä¸€ä¸ªå­ä¸²ï¼Œå…³é”®åœ¨äºå¦‚ä½•åˆ¤æ–­ $T[j..i]$ æ˜¯ä¸æ˜¯ $S[l..r]$ çš„å­ä¸²ã€‚\nå¯ä»¥ä½¿ç”¨çº¿æ®µæ ‘åˆå¹¶ç»´æŠ¤ $S$ çš„ SAM ä¸Šçš„æ¯ä¸ªç‚¹çš„ right é›†åˆï¼Œ$T[j..i]$ æ˜¯ $S[l..r]$ çš„å­ä¸²ç­‰ä»·äº $T[j..i]$ åœ¨ $S$ ä¸­çš„ right é›†åˆå«æœ‰æŸä¸ªåŒºé—´å†…çš„å…ƒç´ ï¼ŒåŒºé—´æ±‚å’Œå³å¯æŸ¥è¯¢ã€‚\nè¿˜æœ‰ä¸€ä¸ªç»†èŠ‚ï¼Œåœ¨ $T$ çš„ SAM ä¸Šæ‰“æ ‡è®°æ—¶ï¼Œå¯èƒ½å‡ºç° SAM ä¸Šçš„ä¸€ä¸ªèŠ‚ç‚¹å¯¹åº”çš„è¾ƒçŸ­çš„é‚£äº›ä¸²æ˜¯ $S[l..r]$ çš„å­ä¸²ï¼Œä½†è¾ƒé•¿çš„ä¸²ä¸æ˜¯ã€‚æ‰€ä»¥æ ‡è®°è¿˜éœ€è¦è®°å½•ä¸æ˜¯ $S[l..r]$ å­ä¸²æ‰€éœ€çš„é•¿åº¦ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; using namespace std; typedef long long ll; struct SAM { struct Node { int len, pa, tag; vector\u0026lt;int\u0026gt; ch; Node(int _len = 0, int _pa = -1, vector\u0026lt;int\u0026gt; _ch = vector\u0026lt;int\u0026gt;(26, 0)): len(_len), pa(_pa), tag(0), ch(_ch) {} }; vector\u0026lt;Node\u0026gt; t; int p; vector\u0026lt;int\u0026gt; endp; vector\u0026lt;vector\u0026lt;int\u0026gt; \u0026gt; g; void extend(int x) { int np = t.size(); t.emplace_back(t[p].len + 1); while (~p \u0026amp;\u0026amp; !t[p].ch[x]) { t[p].ch[x] = np; p = t[p].pa; } if (p == -1) t[np].pa = 0; else { int q = t[p].ch[x]; if (t[q].len == t[p].len + 1) t[np].pa = q; else { int nq = t.size(); t.emplace_back(t[p].len + 1, t[q].pa, t[q].ch); t[q].pa = t[np].pa = nq; while (~p \u0026amp;\u0026amp; t[p].ch[x] == q) { t[p].ch[x] = nq; p = t[p].pa; } } } p = np; } SAM(const string\u0026amp; s): t(1), p(0) { t.reserve(s.size() * 2); endp.resize(s.size()); for (int i = 0; i \u0026lt; s.size(); ++i) { extend(s[i] - 'a'); endp[i] = p; } g.resize(t.size()); for (int i = 1; i \u0026lt; t.size(); ++i) g[t[i].pa].push_back(i); } ll dfs(int u = 0) { ll out = 0; for (auto v : g[u]) { if (!v) continue; out += dfs(v); t[u].tag = max(t[u].tag, t[v].tag); } if (u) out += max(0, t[u].len - max(t[u].tag, t[t[u].pa].len)); return out; } }; struct SegmentTree { #define mid ((l + r) \u0026gt;\u0026gt; 1) struct Node { int sum, ls, rs; Node(int _sum = 0, int _ls = 0, int _rs = 0): sum(_sum), ls(_ls), rs(_rs) {} }; vector\u0026lt;Node\u0026gt; t; int add(int x, int p, int l, int r) { int cur = t.size(); t.push_back(t[x]); ++t[cur].sum; if (l == r - 1) return cur; if (p \u0026lt; mid) t[cur].ls = add(t[x].ls, p, l, mid); else t[cur].rs = add(t[x].rs, p, mid, r); return cur; } int merge(int x, int y) { if (!x || !y) return x | y; t.emplace_back(t[x].sum + t[y].sum, merge(t[x].ls, t[y].ls), merge(t[x].rs, t[y].rs)); return t.size() - 1; } int query(int x, int L, int R, int l, int r) { if (L \u0026gt;= r || R \u0026lt;= l) return 0; if (L \u0026lt;= l \u0026amp;\u0026amp; r \u0026lt;= R) return t[x].sum; return query(t[x].ls, L, R, l, mid) + query(t[x].rs, L, R, mid, r); } #undef mid } seg; vector\u0026lt;int\u0026gt; rt; void dfs(const vector\u0026lt;vector\u0026lt;int\u0026gt; \u0026gt;\u0026amp; g, int u = 0) { for (auto v : g[u]) { dfs(g, v); rt[u] = seg.merge(rt[u], rt[v]); } } int main() { ios_base::sync_with_stdio(false); cin.tie(0); cout.tie(0); string s; cin \u0026gt;\u0026gt; s; SAM sams(s); seg.t.resize(1); seg.t.reserve(s.size() \u0026lt;\u0026lt; 5); rt.resize(sams.t.size(), 0); for (int i = 0; i \u0026lt; s.size(); ++i) rt[sams.endp[i]] = seg.add(rt[sams.endp[i]], i, 0, s.size()); dfs(sams.g); int q; cin \u0026gt;\u0026gt; q; while (q--) { int l, r; string t; cin \u0026gt;\u0026gt; t \u0026gt;\u0026gt; l \u0026gt;\u0026gt; r; SAM samt(t); for (int i = 0, u = 0, v = 0, p = 0; i \u0026lt; t.size(); ++i) { while (p \u0026lt; i \u0026amp;\u0026amp; !sams.t[u].ch[t[i] - 'a']) { ++p; if (u \u0026amp;\u0026amp; i - p \u0026lt;= sams.t[sams.t[u].pa].len) u = sams.t[u].pa; if (v \u0026amp;\u0026amp; i - p \u0026lt;= samt.t[samt.t[v].pa].len) v = samt.t[v].pa; } if (!sams.t[u].ch[t[i] - 'a']) { p = i + 1; u = v = 0; continue; } u = sams.t[u].ch[t[i] - 'a']; v = samt.t[v].ch[t[i] - 'a']; while (p \u0026lt;= i \u0026amp;\u0026amp; seg.query(rt[u], l + i - p - 1, r, 0, s.size()) == 0) { ++p; if (u \u0026amp;\u0026amp; i - p + 1 \u0026lt;= sams.t[sams.t[u].pa].len) u = sams.t[u].pa; if (v \u0026amp;\u0026amp; i - p + 1 \u0026lt;= samt.t[samt.t[v].pa].len) v = samt.t[v].pa; } samt.t[v].tag = max(samt.t[v].tag, i - p + 1); } cout \u0026lt;\u0026lt; samt.dfs() \u0026lt;\u0026lt; '\\n'; } return 0; } ","date":"2020-01-07T18:33:42+08:00","permalink":"https://ouuan.github.io/post/noi2018%E4%BD%A0%E7%9A%84%E5%90%8D%E5%AD%97sam%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%90%88%E5%B9%B6/","tags":["SAM","çº¿æ®µæ ‘åˆå¹¶","å­—ç¬¦ä¸²","æ•°æ®ç»“æ„"],"title":"ã€ŒNOI2018ã€ä½ çš„åå­—ï¼ˆSAMï¼Œçº¿æ®µæ ‘åˆå¹¶ï¼‰"},{"categories":["æ¸¸è®°"],"contents":"éå¸¸è£å¹¸èƒ½å¤Ÿå‚åŠ è¿™åœºè·¨åº¦ 300+ å¤©çš„æ¯”èµ›ã€‚\nä¸Šæ¥ 2019THUWC/WCå†¬çœ è®° ã€‚\nDay 333 æ”¶åˆ°é€šçŸ¥æ¯”èµ›ç¯å¢ƒçš„é‚®ä»¶ã€‚\nä»Šå¹´ç¯å¢ƒæ€ä¹ˆå•¥é¢å¤–è½¯ä»¶éƒ½æ²¡æœ‰ï¼ˆæ²¡æœ‰ GIMP ä¹Ÿæ²¡æœ‰ WireShark ä»€ä¹ˆçš„ï¼‰ã€‚ä¹Ÿæ²¡çœ‹åˆ°é¢˜å‹/èµ›åˆ¶è¯´æ˜ä»€ä¹ˆçš„..æ²¡æ³•æŠ¼ Day2+ äº† T_T\nä¸ŠåˆæŠŠå‰ä¸€å¤©æ™šä¸Šï¼ˆå…¶å®æ˜¯å½“å¤©å‡Œæ™¨ï¼‰æµ·å­å§ï¼ˆ@ä¸ƒæµ·Nana7miï¼‰çš„ç›¸ç°¿åˆ†äº«ä¼šè¡¥äº†ï¼ˆå¹¸å¥½æ²¡é¡¶ç€å¼ºè¡Œçœ‹ç›´æ’­ï¼Œä¸ç„¶äººæ²¡äº†.pngï¼‰ã€‚\nä¸‹åˆå’Œæ™šä¸ŠæŠŠè¿œå¤å·¨å‘å¡«äº†ï¼šchen_zheçš„å·å“­ ã€‚\nå…¨éƒ¨åšå¥½ä¹‹åæ¸²æŸ“ï¼Œ2min åç”µè„‘å¡äº†..é‡å¯ä¹‹åé‡æ–°æ¸²æŸ“ï¼Œè¿™ä¸ªæ—¶å€™æµ·å­å§å·²ç»å¼€æ’­äº†ï¼ˆ\nå› ä¸ºç”µè„‘åœ¨æ¸²æŸ“ï¼Œæ‰€ä»¥å°±åªèƒ½ä¸€è¾¹ç”¨æ‰‹æœºçœ‹ç›´æ’­ä¸€è¾¹æ¸²æŸ“ï¼ˆ\næœ€ååœ¨æ˜¾ç¤ºè¿˜å‰© 2min æ¸²æŸ“å®Œæ¯•çš„æ—¶å€™åˆå¡ä½äº†..æ­£å½“æˆ‘é•¿æŒ‰å…³æœºé”®è¿˜ä¸åˆ° 10s æ—¶ï¼Œç”µè„‘çªç„¶æ´»è¿‡æ¥äº†..èµ¶ç´§æ¾å¼€å…³æœºé”®ï¼Œå·®ç‚¹äººæ²¡äº†ã€‚\nç„¶åå°±ä¸€è¾¹çœ‹ç›´æ’­ä¸€è¾¹ä¼ è§†é¢‘ï¼ŒæˆåŠŸæ‰è¿›æµ·å­å§å‘ 8 ç»™ 9 æŠ•ç¥¨çš„é™·é˜±..è¿˜ç¬¬ä¸€æ¬¡è¢«æµ·å­å§è¯»å¼¹å¹•äº†ï¼ˆåœ¨å¤§å®¶æŠ•ç¥¨æ—¶å‘äº†ä¸€å¥â€œç¬¬ä¸€æ­¥ä¸‹è§’ç¬¬äºŒæ­¥å¿…é¡»ä¸‹ 5â€ï¼Œç„¶åå¤§å®¶æŠ•çš„ 9ï¼Œæœ€åè¿˜å¹³äº†..ï¼‰ã€‚\næ€»ç»“ï¼šå› ä¸º SC è€ƒäº† WireSharkï¼Œæ‰€ä»¥æ¥çœ‹é²¨é±¼ç›´æ’­å‡†å¤‡ Day2+ã€‚\nDay 334 ä¸€å¤©å¤§éƒ¨åˆ†æ—¶é—´ï¼ˆï¼Ÿå…¶å®ç®—ä¸€ç®—å¹¶æ²¡æœ‰ï¼‰éƒ½åœ¨é«˜é“ä¸Šã€‚\nå¤§æ¦‚æ˜¯ BEASTARS + æµ·å­å§å½•æ’­ + ä¸‰ç‹®æ¼«ç”»ã€‚\né«˜é“è¿˜æ˜¯ä¸€å¦‚æ—¢å¾€çš„åµï¼Œä¸€ç›´æˆ´ç€è€³æœºï¼Œåˆ°äº†åŒ—äº¬ä¹‹åäººéƒ½æ™•äº†ã€‚\nç„¶åæ™šä¸Šä¸æ˜¯å»å®¾é¦†ï¼Œè€Œæ˜¯ä½ä¸€ä¸ªäº²æˆšå®¶ã€‚\nç”±äºäº²æˆšå®¶å­©å­åˆšå¼€å§‹æ—¶åœ¨æ—è¾¹çœ‹ç€ï¼Œäºæ˜¯å°±ä½¯è£…çœ‹è‡ªå·±åšå®¢é‡Œçš„é¢˜è§£ã€‚ä¹‹åå°±é¡ºåŠ¿çœ‹ä¸‹å»äº†..èµ›å‰çœ‹çœ‹è‡ªå·±å†™çš„é¢˜è§£æˆ–è®¸çš„ç¡®ä¸é”™..\nè¯´èµ·æ¥ï¼Œä¸åˆ° 18 ç‚¹çš„æ—¶å€™è·¯è¿‡å¤©æ´¥ï¼Œ20:39 æ”¶åˆ°å¤©æ´¥æ–‡æ—…å±€çŸ­ä¿¡æ˜¯ä»€ä¹ˆæ“ä½œï¼ˆ\nDay 335 èµ›å‰ è‡ªç„¶é†’å¥½è¯„ï¼ˆ\nè¯•æœº 10 ç‚¹å¤šæ‰å»ï¼ŒT1 ç…§ä¾‹ A+Bï¼ŒT2 æ˜¯ä¹‹å‰çœ‹æ¸¸è®°è§åˆ°è¿‡çš„ THUWC2018 ç­¾åˆ°é¢˜ï¼Œç„¶è€Œä¸€å¼€å§‹æƒ³äº†ä¸ªå‡åšæ³•ï¼ŒåŠä¸ªå¤šå°æ—¶æ‰è¿‡æ‰..è¿‡æ‰çš„æ—¶å€™å¤§å®¶éƒ½è·‘è·¯äº†ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿæ²¡å»çœ‹å‰©ä¸‹ä¸¤é¢˜ï¼Œä½†è®°å¾—é¢˜ç›®åï¼Œå›æ¥ä¸€æŸ¥æœç„¶æ˜¯ THUWC2018 çš„å¦å¤–ä¸¤é¢˜ã€‚\nå¼€è¥å¼æ¯” SC çŸ­äº†æ¥è¿‘ 1hï¼Œæ‰€ä»¥æ¯”èµ›æ²¡å’•ï¼Œå¥½è¯„ï¼ˆ\nç®€è¦é¢˜æ„ T1 ç»™ä½  $n$ ä¸ªåœ¨é•¿ä¸º $k$ çš„æ•°åˆ— $a_1,a_2,\\ldots,a_n$ ä¸Šè¿›è¡Œçš„æ“ä½œï¼Œç¬¬ $i$ ä¸ªæ“ä½œå½¢å¦‚ â€œ$p(i)$, $b(i)_1, b(i)_2, \\ldots, b(i)_k$â€ï¼Œè¡¨ç¤ºâ€œè‹¥ $a_{p_i}\u0026lt; b(i)_{p_i}$ï¼Œåˆ™å°† $a$ ä¿®æ”¹ä¸º $b(i)$â€ã€‚å†ç»™ä½  $m$ ä¸ªåˆå§‹åºåˆ— $a$ï¼Œæ±‚ä¾æ¬¡è¿›è¡Œè¿™ $n$ ä¸ªæ“ä½œåä¼šå¾—åˆ°ä»€ä¹ˆæ•°åˆ—ã€‚\n$1\\le n, m\\le 10^5$ , $1\\le k\\le 20$ ï¼Œæ—¶é™ $\\mathtt{3s}$ã€‚\nT2 ç»™ä½ ä¸€å¼ å¸¦éè´Ÿè¾¹æƒçš„æœ‰å‘å›¾ï¼Œä½ éœ€è¦åœ¨ä¸Šé¢ç§»åŠ¨æ£‹å­ã€‚æ£‹å­çš„ç§»åŠ¨è§„åˆ™ï¼šé€‰æ‹© æƒå€¼ éé›¶çš„å‡ºè¾¹ä¸­ ç¼–å· æœ€å°çš„ä¸€æ¡ç§»åŠ¨ï¼Œç„¶åå°†è¿™æ¡è¾¹çš„ æƒå€¼ å‡ä¸€ã€‚æ¯æ¬¡æ“ä½œä¼šç»™ä½ æ£‹å­çš„åˆå§‹ä½ç½®ä»¥åŠç§»åŠ¨æ­¥æ•°ä¸Šé™ï¼Œæ£‹å­ä¼šåœ¨æ— æ³•ç§»åŠ¨æˆ–ç§»åŠ¨æ­¥æ•°è¾¾åˆ°ä¸Šé™æ—¶åœæ­¢ç§»åŠ¨ï¼Œä½ éœ€è¦æ±‚å‡ºæ¯æ¬¡æ“ä½œçš„æ£‹å­åœä¸‹æ¥çš„ä½ç½®ã€‚å‰é¢çš„æ“ä½œä¼šå¯¹åé¢çš„æ“ä½œäº§ç”Ÿå½±å“ã€‚\nç‚¹æ•°ã€è¯¢é—®æ•° $10^5$ ï¼Œè¾¹æ•° $1.5\\cdot 10^5$ ï¼Œæ—¶é™ $\\mathtt{8s}$ ã€‚\nT3 ç»™ä½ ä¸€å¼ æ‰€æœ‰è¾¹é•¿åº¦éƒ½ä¸º $1$ çš„æ ‘ $G=(V, E)$ ä»¥åŠå¸¸é‡ $k$ ï¼Œè®° $G$ ä¸­ä¸¤ç‚¹ $u$ å’Œ $v$ ä¹‹é—´çš„è·ç¦»ä¸º $dis(u, v)$ ï¼Œæ„é€ æ— å‘å›¾ $H=(V, \\{(u, v)|dis(u, v)\\le k\\})$ ï¼Œ$q$ æ¬¡è¯¢é—®ï¼Œæ¯æ¬¡ç»™å‡º $l$ å’Œ $r$ ï¼Œæ±‚ $H$ åœ¨ $[l, r]$ ä¸Šçš„å¯¼å‡ºå­å›¾ï¼ˆå³ä»…ä¿ç•™ $[l, r]$ å†…çš„ç‚¹ä»¥åŠå®ƒä»¬ä¹‹é—´çš„æ‰€æœ‰è¿è¾¹å¾—åˆ°çš„å­å›¾ï¼‰çš„è¿é€šå—æ•°é‡ã€‚\nç‚¹æ•° $3\\cdot 10^5$ ï¼Œè¾¹æ•° $6\\cdot 10^5$ ï¼Œæ—¶é™ $\\mathtt{6s}$ ã€‚\næ¯”èµ› ç™»å½•ç”¨æˆ·åç«Ÿç„¶æ˜¯ \u0026ldquo;THUWC2020\u0026rdquo; å¼€å¤´ï¼Œæ˜æ˜æ˜¯ 2019 å¹´çš„æ¯”èµ›ï¼ˆ\nT1 çœ‹äº†ä¸€å°ä¼šå„¿å°±ä¼šäº†ï¼Œå†™å®Œä¹‹åæŠŠç¼–è¯‘é”™è¯¯æ”¹å®Œå°± pp äº†ã€‚\nè¿‡äº†ä¹‹åå»æŠŠ lower_bound æ”¹æˆäº† upper_bound ï¼Œç„¶å å¹¶ä¸æ„‰å¿«åœ° åˆ pp äº†..è¯´å¥½çš„å®è´¨ IOI èµ›åˆ¶å‘¢ QAQã€‚äºæ˜¯è·‘å»å†™äº†ä¸ªå¯¹æ‹ï¼Œupper_bound å¾ˆå¿«æ‹å‡ºé”™äº†ï¼Œä¸€å¼€å§‹çš„ç‰ˆæœ¬å‡ ä¸‡ç»„æ²¡å‡ºé”™ï¼Œæé™æ•°æ®ä¸å¼€ O2 è¿‡ä¸äº†ï¼Œå¼€ O2 $\\mathtt{1.5s}$ ã€‚äºæ˜¯ T1 å°±æäº† 1h+\u0026hellip;\nä¸€å¼€å§‹çš„é¢˜é¢è¿˜æ²¡å†™å€¼åŸŸï¼Œç»“æœæé—®å‘å‡ºå»çš„ 20s å‰å‘äº†ä¸ªå…¬å‘Šè¡¥å……äº†å€¼åŸŸï¼Œç„¶åå°±å¾—åˆ°äº†â€œè¯·ä»”ç»†é˜…è¯»å…¬å‘Šâ€çš„å›å¤\u0026hellip;\nçœ‹äº†çœ¼ T2 å’Œ T3ï¼Œå‘ç°éƒ½ä¸å¤ªä¼šåšã€‚\nT3 ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œç¬¬ä¸€çœ¼æˆ‘å°±æŠŠå®ƒè½¬åŒ–æˆäº†â€œæ±‚æ¯ä¸ªç‚¹ç¼–å·å·¦å³ç¼–å·æœ€é è¿‘å®ƒçš„è·ç¦»ä¸è¶…è¿‡ $k$ çš„ç‚¹ï¼Œç„¶åè«é˜Ÿâ€ï¼Œå¯¹ç€è¿™ä¸ªæƒ³äº†å¥½ä¹…ï¼Œç„¶åå‘ç°è¿™æ˜¯ä¸ªæ˜æ˜¾çš„å‡è½¬åŒ–ï¼Œç„¶åå‘ç°è‡ªå·±è¿ $k=1$ çš„æ•°æ™®é€šè¿é€šå—éƒ½ä¸ä¼šåšäº†ï¼Œç„¶åå‘ç°é“¾å¹¶ä¸ä¿è¯ç¼–å·æ˜¯é¡ºç€æ¥çš„æ‰€ä»¥é“¾ä¹Ÿä¸ä¼šäº†ï¼Œå°±æ»šå»çœ‹ T2 äº†..\nT2 çš„â€œæ•°æ®éšæœºâ€é‚£æ¡£éƒ¨åˆ†åˆ†ç»™çš„å¾ˆè¿·ï¼Œè¯´ä»€ä¹ˆâ€œæ¯æ¡è¾¹å‡ºç°æ¦‚ç‡ä¸º $\\dfrac{1}{n^2}$â€ï¼Œå¬èµ·æ¥åƒæ˜¯æœŸæœ›åªæœ‰ä¸€æ¡è¾¹çš„æ„Ÿè§‰ï¼Œç„¶åæˆ‘äº¤ä¸Šå»æµ‹äº†ä¸€ä¸‹ï¼Œå‘ç°ä¸æ­¢ $10$ æ¡è¾¹ï¼Œæ€€ç–‘æ˜¯ç¬”è¯¯..åªä¸è¿‡è¿™æ¡£å¤§æ¦‚æ˜¯ç»™æš´åŠ›çš„å§ï¼Œæˆ‘æš´åŠ›ä¹Ÿè¿‡äº†è¿™æ¡£ï¼Œå°±æ²¡æé—®äº†..\nç„¶è€Œé—®é¢˜åœ¨äºï¼Œæš´åŠ›ç”šè‡³å¯ä»¥è¿‡ç¯å¥—æ ‘åŠ ä¸Šä¸è¶…è¿‡ $50$ æ¡é¢å¤–è¾¹çš„é‚£æ¡£..ï¼ˆè¿‡ä¸äº†ç¯å¥—æ ‘é‚£æ¡£ã€‚ï¼‰\nç„¶åå»å†™ä¸éœ€è¦è€ƒè™‘åˆ è¾¹é‚£æ¡£ï¼Œä¸€å¼€å§‹æˆ‘å»å†™äº†ä¸ªæ‹“æ‰‘æ’åºæ‰¾ç¯ï¼Œå¿«å†™å®Œçš„æ—¶å€™çªç„¶å‘ç°è‡ªå·±æ²¡æœ‰å¤„ç†æ­¥æ•°ä¸Šé™æ—¢æ²¡åˆ°é“¾çš„æœ«å°¾ä¹Ÿæ²¡åˆ°ç¯ä¸Šçš„æƒ…å†µï¼Œç«‹åˆ»æƒ³åˆ°å¯ä»¥ç”¨å€å¢å¤„ç†ï¼Œç´§æ¥ç€æƒ³åˆ°è¿™æ¡£é™¤äº†å€å¢å•¥éƒ½ä¸ç”¨å†™ï¼Œç„¶åå°±æŠŠå†™äº†åŠå¤©çš„æ‹“æ‰‘æ’åºå…¨åˆ äº†..\nç„¶åå»å†™æ ‘çš„éƒ¨åˆ†åˆ†ï¼Œä¸€å¼€å§‹ä¸€ä¸ªåœ°æ–¹æƒ³é”™å†™è‡ªé—­äº†ï¼Œç„¶åå»å†™ T3 çš„ $8$ åˆ†ï¼Œå†™å®Œå›æ¥å‘ç°è‡ªå·± sb äº†ï¼Œç„¶åå†™å®Œäº†æ ‘çš„éƒ¨åˆ†åˆ†ï¼Œç»“æœè°ƒäº† 1h..ç„¶åå°±è€ƒè¯•ç»“æŸäº†ã€‚\næ„Ÿè§‰å°‘æƒ³ä¸€ä¼šå„¿æ­£è§£ï¼Œéƒ¨åˆ†åˆ†æ‰“å¿«ç‚¹ï¼Œç¯å¥—æ ‘å°±å¯ä»¥å†™å‡ºæ¥äº†..\nPT æ˜¯ $165$ åˆ†ï¼Œä½†ç¯å¥—æ ‘åŠ ä¸Šä¸è¶…è¿‡ $50$ æ¡é¢å¤–è¾¹æ˜¾ç„¶è¿‡ä¸äº†ï¼Œæ‰€ä»¥å¤§æ¦‚æ˜¯ $100+49+8=157$ åˆ†ã€‚çœ‹èµ·æ¥å°±å¾ˆå¤§ä¼—åˆ†çš„æ ·å­ï¼Œç„¶è€ŒæŒç»­ä¸¤å¤©çš„æ¯”èµ›ç¬¬ä¸€å¤©ç»“æŸå½“ç„¶æ˜¯ä¸èƒ½å»çœ‹åˆ«äººå¤šå°‘åˆ†çš„ã€‚\nDay 336 ç®€è¦é¢˜æ„ T1 ç»™ä½ ä¸€ä¸ªæ•°ä»¥åŠ $n$ ä¸ªå¯¹ä¸€ä¸ªæ•°è¿›è¡Œçš„æ“ä½œï¼Œå…¶ä¸­ç¬¬ $i$ ä¸ªæ“ä½œæ˜¯å°† $x$ å˜æˆ $a_i|x|+b_ix+c_i$ ï¼Œä½ å¯ä»¥æ”¹å˜æ“ä½œè¿›è¡Œçš„é¡ºåºï¼Œæ±‚æœ€åå¾—åˆ°çš„æ•°çš„æœ€å¤§å€¼ã€‚\n$1\\le n\\le 15$ ï¼Œ$-15\\le a_i, b_i, c_i\\le 15$ ï¼Œæ—¶é™ $\\mathtt{1s}$ ã€‚\nT2 ç»™ä½ ä¸€å¼ æœ‰å‘æ— ç¯å›¾ $G$ ï¼Œä»¤ $G$ çš„ DFS æ ‘ä¸º $T$ï¼ˆä»¥ $1$ ä¸ºæ ¹ï¼Œä¼˜å…ˆè®¿é—®ç¼–å·å°çš„ç‚¹ï¼‰ï¼Œå¤šç»„è¯¢é—®ï¼Œæ¯æ¬¡ç»™å‡º $a$ å’Œ $b$ ï¼Œä¿è¯ $a$ åœ¨ $T$ ä¸Šæ˜¯ $b$ çš„ç¥–å…ˆï¼Œè¯¢é—®â€œåœ¨ $G$ ä¸­åˆ å» $T$ ä¸Š $a$ åˆ° $b$ çš„ç®€å•è·¯å¾„ä¸Šçš„è¾¹ä¹‹åï¼Œ$T$ ä¸­ä»¥ $b$ ä¸ºæ ¹çš„å­æ ‘å†…çš„ç‚¹æœ‰å¤šå°‘ä¸ªåœ¨ $G$ ä¸­æ˜¯ä» $1$ å‡ºå‘ä¸å¯è¾¾çš„â€ã€‚\nç‚¹æ•°ã€è¯¢é—®æ•° $10^5$ ï¼Œè¾¹æ•° $1.5\\cdot 10^5$ ï¼Œæ—¶é™ $\\mathtt{1s}$ ã€‚\nT3 ç»™ä½ ä¸€æ£µç‚¹æƒæ˜¯ä¸€ä¸ªæ’åˆ—çš„æ ‘ï¼Œå¤šç»„è¯¢é—®ï¼Œæ¯æ¬¡ç»™å‡ºä¸¤ä¸ªç‚¹å’Œä¸€ä¸ªéè´Ÿæ•´æ•° $k$ ï¼Œæ±‚è¿™ä¸¤ç‚¹é—´è·¯å¾„ä¸Šçš„ç‚¹æƒæ„æˆçš„åºåˆ—å¯ä»¥ç”±å¤šå°‘ä¸ªä¸åŒçš„åºåˆ—ç”±æ°å¥½ $k$ è½® å†’æ³¡æ’åºå¾—åˆ°ã€‚\nç‚¹æ•°ã€è¯¢é—®æ•° $5\\cdot 10^5$ ï¼Œæ—¶é™ $\\mathtt{4s}$ ã€‚\næ¯”èµ› ä»Šå¤© T1 æ€ä¹ˆä¸ä¼šåš..ä»Šå¤© T2 å’Œ T3 ä¾ç„¶ä¸ä¼šåš..\næŠŠ T1 æš´åŠ›æ‰“äº†ã€‚\næŠŠ T2 æš´åŠ›æ‰“äº†ã€‚\næŠŠ T3 æš´åŠ›æ‰“äº†ã€‚æ€ä¹ˆ T æ‰äº†..\nT3 æ‰“ä¸ªè¡¨ï¼Œå•¥è§„å¾‹éƒ½æ²¡æœ‰ã€‚\næŠŠ T1 éƒ¨åˆ†åˆ†æ‰“å…¨äº†ã€‚\næˆ‘å¥½åƒä¼š T2 æ‰€æœ‰éƒ¨åˆ†åˆ†ï¼Ÿ\nå†™å®Œ subtask2ï¼Œå‡äº†ã€‚\nå†™å®Œ subtask4ï¼Œå‡äº†ã€‚\nå†™å®Œ subtask3ï¼Œè¿˜å‰©ä¸åˆ° 1h äº†ã€‚\nå¡äº†ä¸‹ T3 æš´åŠ›å¸¸æ•°ï¼Œæš´åŠ›è¿‡äº†ã€‚\næˆ‘è‡ªé—­äº†ã€‚\nä»Šå¤© pt å¥½åƒæ›´å¼±ï¼ˆï¼Ÿï¼‰ï¼Œå¥½åƒ T1 éšä¾¿å†™éƒ½èƒ½è¿‡è‹¥å¹² subtaskï¼Œsubtask1 æ²¡è¿‡å‰©ä¸‹éƒ½è¿‡ã€subtask2 æ²¡è¿‡å‰©ä¸‹éƒ½è¿‡ä¹‹ç±»çš„ã€‚åæ­£æˆ‘çš„éƒ¨åˆ†åˆ†éƒ½å¯¹æ‹äº†ï¼Œåº”è¯¥æ²¡å•¥é—®é¢˜..\nå¥½åƒæ˜¯æ¯”å¤§ä¼—åˆ†ä½ä½†æ˜¯å¹¶ä¸çŸ¥é“çš„ $55+31+8=94$ ã€‚\nä¸‹åˆ ä¸‹åˆå¥½çŸ­å•Š..æˆ‘æ€ä¹ˆå†™ä¸ªæ¸¸è®°å°±å¿«è¦åƒé¥­äº† QAQ\næœ¬æ¥è¿˜æƒ³å­¦ä¸€ä¸‹ Python äºŒè¿›åˆ¶æ–‡ä»¶è¯»å†™çš„..\nDay 336+ è¿™æ¬¡ä¸ç”¨äºŒè¿›åˆ¶æ–‡ä»¶è¯»å†™äº†ï¼Œä»»åŠ¡æ˜¯æ¨¡æ‹Ÿ Cacheã€‚\nå¼€åœºå‰ä¸€ç›´åœ¨æƒ³ï¼šâ€œAPIO ä¸Šåˆ°åº•è®²äº†å•¥\u0026hellip;â€\nå¼€åœºå…ˆè¯»äº† 10min å­¦ä¹ æ‰‹å†Œï¼Œå‘ç°ä¸å¯¹åŠ²ï¼Œå›æƒ³ä¸€ä¸‹è‡ªå·±å¹³æ—¶å†™å·¥ç¨‹æ—¶çš„æµç¨‹ï¼ˆéœ€è¦ä»€ä¹ˆ â†’ æœä»€ä¹ˆ â†’ å‘ç°å“ªçœ‹ä¸æ‡‚ â†’ DFS å‰ç½®çŸ¥è¯†ï¼‰ä»¥åŠå‰ä¸¤æ¬¡å·¥ç¨‹é¢˜çš„æ•™è®­ï¼Œäºæ˜¯å°±å…ˆå»çœ‹äº†çœ‹é¢˜ï¼Œç›´æ¥å»æ‰¾å­¦ä¹ æ‰‹å†Œä¸­å¯¹åº”çš„éƒ¨åˆ†ï¼Œç„¶åå‘ç°é¢˜ç›®åç§°å’Œå­¦ä¹ æ‰‹å†Œæ ‡é¢˜é¡ºåºæ˜¯ç›¸åçš„ï¼ˆ\n5min åå‘ç° T1 éœ€è¦ç”¨åˆ°çš„åªæœ‰å€’æ•°ç¬¬äºŒé¡µçš„ä¸€å¼ è¡¨æ ¼..ç„¶åéå¸¸æ„‰å¿«åœ° OOP å®ç°äº†ä¸€å‘ï¼Œç„¶åå› ä¸ºè¯­æ–‡é—®é¢˜æ²¡è¿‡æ ·ä¾‹ï¼Œè¿‡æ ·ä¾‹ä¹‹åäº¤ä¸Šå»åªè¿‡äº† subtask1ï¼Œä»”ç»†é˜…è¯»ä¹‹åå‘ç°è¿˜æ˜¯è¯­æ–‡é—®é¢˜ï¼Œæ”¹äº†ä¹‹åå°±è¿‡äº†ã€‚æ­¤æ—¶ 1:20 å·¦å³ã€‚\nT2 å¥½åƒå·®ä¸å¤šå°±æ˜¯ APIO ä¸Šè®²çš„é‚£ä¸ªä¸œè¥¿ï¼Œå†™ç€å†™ç€å°±åªå‰©åŠå°æ—¶äº†..\nç„¶åæŠŠ T3 çš„ subtask1 å†™å®Œå°±åªå‰©ä¸åˆ° 10min äº†..\nT3 å‰©ä¸‹çš„ subtask å·®ä¸å¤šå°±æ˜¯æŠŠ T2 å°è£…ä¸€ä¸‹ç”¨ä¸Šå»ï¼Œæ„Ÿè§‰ 20min å°±å¯ä»¥å†™å®Œ..\næœ€åæ˜¯å¤§ä¼—åˆ† $40+56+16=112$ ã€‚\nDay 337 é¢è¯• å¬è¯´ 0 ç‚¹åŠçš„æ—¶å€™æ•™ç»ƒæ”¶åˆ°äº†é¢è¯•é€šçŸ¥..\nä¾ç„¶æ˜¯æŒ‰å­—å…¸åºæ’åºï¼Œåˆç­‰åˆ°äº†æ¥è¿‘ 12 ç‚¹ï¼Œä½†è¿™æ¬¡æ²¡æœ‰è¦æ±‚å…³æ‰‹æœºï¼Œäºæ˜¯å¯ä»¥æ„‰å¿«åœ°æ°´ç¾¤ã€‚\né¢è¯•çš„æ—¶å€™è¯´äº†ä¸€ä¸‹ä¹‹å‰é¢“ OI Wiki æ—¶å­¦çš„æ—¶é—´å¤æ‚æ€§ç†è®ºï¼Œè¿˜æœ‰ capacity scaling ä»€ä¹ˆçš„ï¼Œç„¶åæœç„¶è¢«é—®äº†â€œä»€ä¹ˆæ˜¯ NP é—®é¢˜ï¼Ÿä»€ä¹ˆæ˜¯ NPC é—®é¢˜ï¼Ÿâ€ã€‚\nè‹±è¯­é˜…è¯»æ˜¯ä¸€ç¯‡å›¾è®ºåŸºç¡€æ¦‚å¿µï¼ˆç‚¹å’Œè¾¹çš„å®šä¹‰ä¹‹ç±»çš„ï¼‰ï¼Œä¹‹å‰å†™ OI Wiki çš„æ—¶å€™ä¹ŸæŸ¥è¿‡å¾ˆå¤šå›¾è®ºç›¸å…³çš„ en Wikipediaï¼Œæ‰€ä»¥æ„Ÿè§‰å¾ˆç¨³ï¼Œç„¶åè¯»å®Œä¹‹åï¼Œç”¨è‹±è¯­é—®äº†æˆ‘â€œä½ çŸ¥é“å›¾è®ºåœ¨ç”Ÿæ´»ä¸­æœ‰å“ªäº›è¿ç”¨å—ï¼Ÿâ€ï¼Œçªç„¶ä¸æŒ‰å‰§æœ¬ï¼Œç„¶åå°±éšä¾¿è¯´äº†ä¸ªå¯¼èˆªï¼Œç„¶åé˜…è¯»éƒ¨åˆ†ç«Ÿç„¶å°±ç»“æŸäº†..è¿™å’Œå›¾è®ºåŸºç¡€æ¦‚å¿µåˆ°åº•æœ‰ä»€ä¹ˆå…³ç³»å•Š..\nç„¶åæ˜¯â€œè¿˜æœ‰ä¸€åˆ†é’Ÿï¼Œè¦ä¸é—®ä½ ä¸ªæ•°å­¦é¢˜å§â€ã€‚ä¸Šæ¬¡æ²¡é—®æ•°å­¦é¢˜ï¼Œä½†çœ‹å¾ˆå¤šäººæ¸¸è®°éƒ½æœ‰æåˆ°ï¼Œè€Œä¸”æ®è¯´å¾ˆç®€å•ã€‚é—®çš„æ˜¯â€œä¸€æ”¯é“…ç¬”æŠ˜ä¸‰æ¬¡ï¼Œç»„æˆä¸‰è§’å½¢çš„æ¦‚ç‡æ˜¯å¤šå¤§â€ã€‚é¢˜é¢éå¸¸è¿·æƒ‘ï¼Œæˆ‘å‘è€ƒå®˜ç¡®è®¤äº†ä¸€ä¸‹ï¼Œæ„æ€å°±æ˜¯â€œå°†ä¸€æ¡çº¿æ®µå‡åŒ€éšæœºåœ°åˆ†æˆä¸‰æ®µï¼Œè¿™ä¸‰æ®µèƒ½å¤Ÿç»„æˆä¸‰è§’å½¢çš„æ¦‚ç‡æ˜¯å¤šå¤§â€ã€‚ç„¶è€Œæˆ‘ä»å°ä¸æ“…é•¿å½“é¢å›ç­”é—®é¢˜ï¼Œå½“æ—¶åŠåˆ†é’Ÿè„‘å­ä¸€ç‰‡ç©ºç™½ï¼Œè€ƒå®˜é—®æˆ‘æœ‰ä»€ä¹ˆæ€è·¯ï¼Œæˆ‘è¯´äº†ä¸ªâ€œæœ€é•¿é‚£æ®µè¦å°äºäºŒåˆ†ä¹‹ä¸€â€ï¼Œè¢«å›äº†ä¸ªâ€œæ˜¾ç„¶â€ï¼Œç„¶åæ—¶é—´å°±åˆ°äº†ã€‚\nå‡ºè€ƒåœºåç¬é—´ä¼šåšï¼Œæ„Ÿè§‰è‡ªå·±æ²¡æ•‘äº†ã€‚\nå®£è®² æ„Ÿè§‰è¿™æ¬¡å®£è®²æ˜¯ä»Šå¹´ WC ç¬¬ä¸€è½®ï¼ˆæŒ‡ 2019 å¹´ 1 æœˆé‚£æ¬¡ï¼‰å’Œä»Šå¹´ SC çš„ç»“åˆï¼Œæ€»ä½“æ•ˆæœæ„Ÿè§‰å’Œ WC ç¬¬ä¸€è½®å·®ä¸å¤šï¼Œæ²¡æœ‰ SC é‚£ä¹ˆæ— èŠï¼ˆ\nç„¶è€Œè¿™æ¬¡å®Œå…¨æ²¡æœ‰è®²é¢˜ï¼Œè¿ Day336+ T6ï¼ˆæœŸå¾…ä½ çš„å£°éŸ³ï¼‰çš„åˆ†äº«éƒ½æ²¡æœ‰ï¼ˆ\nå‘å¥– ä»Šå¹´æ²¡è¿›é¢è¯•éƒ½æœ‰å¥–ï¼ˆ\nä¸ºå•¥çº¿è¿™ä¹ˆä½å•Š..\næˆ‘å¥½åƒå‹çº¿ 1= äº†ã€‚\n","date":"2019-12-20T20:37:57+08:00","permalink":"https://ouuan.github.io/post/thuwc2019-%E7%AC%AC%E4%BA%8C%E8%BD%AE%E5%86%AC%E7%9C%A0/","tags":["æ¸…åè¥"],"title":"THUWC2019 ç¬¬äºŒè½®å†¬çœ "},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ CF\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€ä¸ªé•¿ä¸º $n$ çš„æ•°åˆ—ï¼Œå¯¹äº $1\\le k\\le n$ çš„æ‰€æœ‰æ•´æ•° $k$ï¼Œæ±‚å‡ºè¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆï¼šå°†æ•°åˆ—åˆ’åˆ†æˆè‹¥å¹²è¿ç»­æ®µï¼Œæ¯æ®µå†…æœ€å¤šæœ‰ $k$ ä¸ª ä¸åŒ çš„æ•°ï¼Œè‡³å°‘è¦åˆ’åˆ†æˆå‡ æ®µï¼Ÿ\n$n\\le 10^5$ ã€‚\nç®€è¦åšæ³• é¦–å…ˆæ˜¯ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„è´ªå¿ƒï¼šåˆ†æ®µæ—¶åœ¨ä¸€æ®µå†…æ”¾æ›´å¤šçš„æ•°ä¸€å®šä¸åŠ£ã€‚è¿™ä¸ªç»“è®ºåœ¨ä¸‹é¢ä¸¤ä¸ªåšæ³•éƒ½ä¼šç”¨åˆ°ã€‚\næ ¹å·åˆ†æ²» æ ¹æ®ä¸Šé¢çš„é‚£ä¸ªç»“è®ºï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ª $k$ å›ºå®šæ—¶å¤æ‚åº¦ä¸º $O(n)$ çš„åšæ³•ã€‚éœ€è¦ä½¿ç”¨æ—¶é—´æˆ³æ¸…ç©ºè®¿é—®æ•°ç»„ã€‚\nç„¶åå°±å¯ä»¥è¿›è¡Œæ ¹å·åˆ†æ²»ï¼š\nå–ä¸€ä¸ªåˆé€‚çš„å€¼ $B$ ã€‚\nå¯¹äº $1\\le k\\le B$ ï¼Œç›´æ¥åšï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(nB)$ ã€‚\nå¯¹äº $B+1\\le k\\le n$ ï¼Œç­”æ¡ˆä¸è¶…è¿‡ $n/B$ ï¼Œå¯ä»¥å¯¹äºæ¯ä¸ªç­”æ¡ˆäºŒåˆ†æ±‚å‡º $k$ çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n^2\\log n/B)$ ã€‚\nå– $B=\\sqrt{n\\log n}$ï¼Œæ€»æ—¶é—´å¤æ‚åº¦ä¸º $O(n\\sqrt{n\\log n})$ï¼Œå¯ä»¥é€šè¿‡æœ¬é¢˜ã€‚\nä¸»å¸­æ ‘ æ¯ä¸ª $k$ çš„ç­”æ¡ˆä¸è¶…è¿‡ $n/k$ï¼Œæ ¹æ®è°ƒå’Œçº§æ•°ï¼Œå¯ä»¥å¾—åˆ°æ€»ç­”æ¡ˆçš„çº§åˆ«ä¸º $O(n\\log n)$ ï¼Œæ‰€ä»¥åªè¦èƒ½å¤Ÿå¿«é€Ÿæ±‚å‡ºä¸€æ¬¡åˆ†æ®µçš„å³ç«¯ç‚¹ï¼Œå°±èƒ½å¤Ÿå¿«é€Ÿæ±‚å‡ºæ€»ç­”æ¡ˆäº†ã€‚\nè¿™é¢˜ä¾ç„¶å¯ä»¥æ²¿ç”¨ ã€ŒSDOI2009ã€HH çš„é¡¹é“¾ çš„æ ‘çŠ¶æ•°ç»„åšæ³•ï¼Œä½†ç”±äºè¦ä¸æ–­åœ°æ±‚åˆ†æ®µçš„å³ç«¯ç‚¹ï¼Œéœ€è¦ä½¿ç”¨ä¸»å¸­æ ‘ï¼Œå†åŠ ä¸Šçº¿æ®µæ ‘äºŒåˆ†ï¼Œå°±å¯ä»¥ $O(\\log n)$ æ±‚å‡ºä¸€æ®µçš„å³ç«¯ç‚¹ï¼Œæ€»æ—¶é—´å¤æ‚åº¦å³ä¸º $O(n\\log^2n)$ ã€‚\nå…·ä½“æ¥è¯´ï¼Œ$f_{l, i}\\in\\{0, 1\\}$ ï¼Œ$f_{l, i}=1$ å½“ä¸”ä»…å½“ $i$ æ˜¯ $l$ åŠå…¶å³ä¾§ç¬¬ä¸€ä¸ªä¸º $a_i$ çš„æ•°ï¼Œå³ $i\\ge l$ ä¸”ä¸å­˜åœ¨ $j$ ä½¿å¾— $l\\le j\\le i-1, a_j=a_i$ ã€‚é‚£ä¹ˆï¼Œ$[l, r]$ çš„é¢œè‰²æ•°å°±æ˜¯ $\\sum_{i=l}^rf_{l, i}$ ã€‚ä½¿ç”¨ $n$ æ£µä¸»å¸­æ ‘åˆ†åˆ«ç»´æŠ¤ $f_{1..n, i}$ å³å¯ã€‚\nå‚è€ƒä»£ç  æ ¹å·åˆ†æ²» #ifndef OUUAN #pragma GCC optimize(\u0026quot;Ofast,no-stack-protector,unroll-loops,fast-math\u0026quot;) #endif #include\u0026lt;bits/stdc++.h\u0026gt; //#define int LoveLive //#define FAST_IOSTREAM 1 #define For(i,l,r)for(int i=(l),i##end=(r);i\u0026lt;=i##end;++i) #define FOR(i,r,l)for(int i=(r),i##end=(l);i\u0026gt;=i##end;--i) #define SON(i,u)for(int i=head[u];i;i=nxt[i]) #define ms(a,x)memset(a,x,sizeof(a)) #define fi first #define se second #define pb emplace_back #define pq priority_queue #define isinf(x)(x\u0026gt;=INF?-1:x) #define y1 why_is_there_a_function_called_y1 using namespace std;typedef long long LoveLive;typedef pair\u0026lt;int,int\u0026gt;pii;typedef vector\u0026lt;int\u0026gt;vi;typedef long double ld;const double inf=1e121;const double eps=1e-10;mt19937 rng(chrono::steady_clock::now().time_since_epoch().count());int randint(int l,int r){int out=rng()%(r-l+1)+l;return out\u0026gt;=l?out:out+r-l+1;}template\u0026lt;typename A,typename B\u0026gt;string to_string(pair\u0026lt;A,B\u0026gt;p);template\u0026lt;typename A,typename B,typename C\u0026gt;string to_string(tuple\u0026lt;A,B,C\u0026gt;p);template\u0026lt;typename A,typename B,typename C,typename D\u0026gt;string to_string(tuple\u0026lt;A,B,C,D\u0026gt;p);string to_string(const string\u0026amp;s){return '\u0026quot;'+s+'\u0026quot;';}string to_string(const char*s){return to_string((string)s);}string to_string(bool b){return(b?\u0026quot;true\u0026quot;:\u0026quot;false\u0026quot;);}string to_string(vector\u0026lt;bool\u0026gt;v){bool first=true;string res=\u0026quot;{\u0026quot;;for(int i=0;i\u0026lt;static_cast\u0026lt;int\u0026gt;(v.size());i++){if(!first){res+=\u0026quot;,\u0026quot;;}first=false;res+=to_string(v[i]);}res+=\u0026quot;}\u0026quot;;return res;}template\u0026lt;size_t N\u0026gt;string to_string(bitset\u0026lt;N\u0026gt;v){string res=\u0026quot;\u0026quot;;for(size_t i=0;i\u0026lt;N;i++){res+=static_cast\u0026lt;char\u0026gt;('0'+v[i]);}return res;}template\u0026lt;typename A\u0026gt;string to_string(A v){bool first=true;string res=\u0026quot;{\u0026quot;;for(const auto\u0026amp;x:v){if(!first){res+=\u0026quot;,\u0026quot;;}first=false;res+=to_string(x);}res+=\u0026quot;}\u0026quot;;return res;}template\u0026lt;typename A,typename B\u0026gt;string to_string(pair\u0026lt;A,B\u0026gt;p){return \u0026quot;(\u0026quot;+to_string(p.first)+\u0026quot;,\u0026quot;+to_string(p.second)+\u0026quot;)\u0026quot;;}template\u0026lt;typename A,typename B,typename C\u0026gt;string to_string(tuple\u0026lt;A,B,C\u0026gt;p){return \u0026quot;(\u0026quot;+to_string(get\u0026lt;0\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;1\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;2\u0026gt;(p))+\u0026quot;)\u0026quot;;}template\u0026lt;typename A,typename B,typename C,typename D\u0026gt;string to_string(tuple\u0026lt;A,B,C,D\u0026gt;p){return \u0026quot;(\u0026quot;+to_string(get\u0026lt;0\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;1\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;2\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;3\u0026gt;(p))+\u0026quot;)\u0026quot;;}template\u0026lt;typename A,typename B,typename C,typename D,typename E\u0026gt;string to_string(tuple\u0026lt;A,B,C,D,E\u0026gt;p){return \u0026quot;(\u0026quot;+to_string(get\u0026lt;0\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;1\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;2\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;3\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;4\u0026gt;(p))+\u0026quot;)\u0026quot;;}void debug_out(){cerr\u0026lt;\u0026lt;endl;}template\u0026lt;typename Head,typename...Tail\u0026gt;void debug_out(Head H,Tail...T){cerr\u0026lt;\u0026lt;\u0026quot; \u0026quot;\u0026lt;\u0026lt;to_string(H);debug_out(T...);} #ifdef OUUAN #define debug(...)cerr\u0026lt;\u0026lt;\u0026quot;[\u0026quot;\u0026lt;\u0026lt;#__VA_ARGS__\u0026lt;\u0026lt;\u0026quot;]:\u0026quot;,debug_out(__VA_ARGS__) #else #define debug(...)42 #endif #ifdef int const int INF=0x3f3f3f3f3f3f3f3fll; #else const int INF=0x3f3f3f3f;typedef long long ll; #endif #ifdef FAST_IOSTREAM #define br cout\u0026lt;\u0026lt;'\\n' #define sp cout\u0026lt;\u0026lt;' ' long long read(){long long x;cin\u0026gt;\u0026gt;x;return x;}template\u0026lt;typename T\u0026gt;void read(T\u0026amp;x){cin\u0026gt;\u0026gt;x;}template\u0026lt;typename T\u0026gt;void write(const T\u0026amp;x){cout\u0026lt;\u0026lt;x;} #else #define br putchar('\\n') #define sp putchar(' ') template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;!is_integral\u0026lt;T\u0026gt;::value,void\u0026gt;::type read(T\u0026amp;x){cin\u0026gt;\u0026gt;x;}long long read(){char c;long long out=0,f=1;for(c=getchar();!isdigit(c)\u0026amp;\u0026amp;c!='-';c=getchar());if(c=='-'){f=-1;c=getchar();}for(;isdigit(c);c=getchar())out=(out\u0026lt;\u0026lt;3)+(out\u0026lt;\u0026lt;1)+c-'0';return out*f;}template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;is_integral\u0026lt;T\u0026gt;::value,T\u0026gt;::type read(T\u0026amp;x){char c;T f=1;x=0;for(c=getchar();!isdigit(c)\u0026amp;\u0026amp;c!='-';c=getchar());if(c=='-'){f=-1;c=getchar();}for(;isdigit(c);c=getchar())x=(x\u0026lt;\u0026lt;3)+(x\u0026lt;\u0026lt;1)+c-'0';return x*=f;}char read(char\u0026amp;x){for(x=getchar();isspace(x);x=getchar());return x;}double read(double\u0026amp;x){scanf(\u0026quot;%lf\u0026quot;,\u0026amp;x);return x;}ld read(ld\u0026amp;x){scanf(\u0026quot;%Lf\u0026quot;,\u0026amp;x);return x;}template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;!is_integral\u0026lt;T\u0026gt;::value,void\u0026gt;::type write(const T\u0026amp;x){cout\u0026lt;\u0026lt;x;}template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;is_integral\u0026lt;T\u0026gt;::value,void\u0026gt;::type write(const T\u0026amp;x){if(x\u0026lt;0){putchar('-');write(-x);return;}if(x\u0026gt;9)write(x/10);putchar(x%10+'0');}void write(const char\u0026amp;x){putchar(x);}void write(const double\u0026amp;x){printf(\u0026quot;%.10lf\u0026quot;,x);}void write(const ld\u0026amp;x){printf(\u0026quot;%.10Lf\u0026quot;,x);} #endif template\u0026lt;typename T,typename...Args\u0026gt;void read(T\u0026amp;x,Args\u0026amp;...args){read(x);read(args...);}template\u0026lt;typename OutputIt,typename=typename enable_if\u0026lt;is_same\u0026lt;output_iterator_tag,typename iterator_traits\u0026lt;OutputIt\u0026gt;::iterator_category\u0026gt;::value||(is_base_of\u0026lt;forward_iterator_tag,typename iterator_traits\u0026lt;OutputIt\u0026gt;::iterator_category\u0026gt;::value\u0026amp;\u0026amp;!is_const\u0026lt;OutputIt\u0026gt;::value)\u0026gt;::type\u0026gt;void read(OutputIt __first,OutputIt __last){for(;__first!=__last;++__first)read(*__first);}template\u0026lt;typename InputIt,typename=typename enable_if\u0026lt;is_base_of\u0026lt;input_iterator_tag,typename iterator_traits\u0026lt;InputIt\u0026gt;::iterator_category\u0026gt;::value\u0026gt;::type\u0026gt;void wts(InputIt __first,InputIt __last){bool isFirst=true;for(;__first!=__last;++__first){if(isFirst)isFirst=false;else sp;write(*__first);}br;}template\u0026lt;typename InputIt,typename=typename enable_if\u0026lt;is_base_of\u0026lt;input_iterator_tag,typename iterator_traits\u0026lt;InputIt\u0026gt;::iterator_category\u0026gt;::value\u0026gt;::type\u0026gt;void wtb(InputIt __first,InputIt __last){for(;__first!=__last;++__first){write(*__first);br;}}template\u0026lt;typename T\u0026gt;void wts(const T\u0026amp;x){write(x);sp;}template\u0026lt;typename T\u0026gt;void wtb(const T\u0026amp;x){write(x);br;}template\u0026lt;typename T\u0026gt;void wte(const T\u0026amp;x){write(x);exit(0);}template\u0026lt;typename T,typename...Args\u0026gt;void wts(const T\u0026amp;x,Args...args){wts(x);wts(args...);}template\u0026lt;typename T,typename...Args\u0026gt;void wtb(const T\u0026amp;x,Args...args){wts(x);wtb(args...);}template\u0026lt;typename T,typename...Args\u0026gt;void wte(const T\u0026amp;x,Args...args){wts(x);wte(args...);}template\u0026lt;typename T\u0026gt;inline bool up(T\u0026amp;x,const T\u0026amp;y){return x\u0026lt;y?x=y,1:0;}template\u0026lt;typename T\u0026gt;inline bool dn(T\u0026amp;x,const T\u0026amp;y){return y\u0026lt;x?x=y,1:0;}template\u0026lt;typename T\u0026gt;inline bool inRange(const T\u0026amp;x,const T\u0026amp;l,const T\u0026amp;r){return!(x\u0026lt;l)\u0026amp;\u0026amp;!(r\u0026lt;x);}template\u0026lt;typename valueType,typename tagType\u0026gt;class segmentTreeNode{public:int id,left,right;valueType val;tagType tag;};template\u0026lt;typename valueType, typename tagType, valueType(*merge)(valueType,valueType), void(*update)(segmentTreeNode\u0026lt;valueType,tagType\u0026gt;\u0026amp;,tagType)\u0026gt;class segmentTree{private:std::vector\u0026lt;segmentTreeNode\u0026lt;valueType,tagType\u0026gt;\u0026gt;nodes;int leftRange,rightRange;valueType valueZero;tagType tagZero;void pushup(int cur){nodes[cur].val=merge(nodes[cur\u0026lt;\u0026lt;1].val,nodes[cur\u0026lt;\u0026lt;1|1].val);}void pushdown(int cur){update(nodes[cur\u0026lt;\u0026lt;1],nodes[cur].tag);update(nodes[cur\u0026lt;\u0026lt;1|1],nodes[cur].tag);nodes[cur].tag=tagZero;}void build(int cur,int l,int r,const std::vector\u0026lt;valueType\u0026gt;\u0026amp;initValue){nodes[cur].id=cur;nodes[cur].left=l;nodes[cur].right=r;nodes[cur].tag=tagZero;if(l==r-1)nodes[cur].val=initValue[l-leftRange];else{build(cur\u0026lt;\u0026lt;1,l,(l+r)\u0026gt;\u0026gt;1,initValue);build(cur\u0026lt;\u0026lt;1|1,(l+r)\u0026gt;\u0026gt;1,r,initValue);pushup(cur);}}void init(const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,const valueType\u0026amp;_valueZero,const tagType\u0026amp;_tagZero){valueZero=_valueZero;tagZero=_tagZero;nodes.resize((rightRange-leftRange)\u0026lt;\u0026lt;2);build(1,leftRange,rightRange,_initValue);}void modify(int cur,int l,int r,int L,int R,const tagType\u0026amp;tag){if(l\u0026gt;=R||r\u0026lt;=L)return;if(L\u0026lt;=l\u0026amp;\u0026amp;r\u0026lt;=R)update(nodes[cur],tag);else{pushdown(cur);modify(cur\u0026lt;\u0026lt;1,l,(l+r)\u0026gt;\u0026gt;1,L,R,tag);modify(cur\u0026lt;\u0026lt;1|1,(l+r)\u0026gt;\u0026gt;1,r,L,R,tag);pushup(cur);}}valueType query(int cur,int l,int r,int L,int R){if(l\u0026gt;=R||r\u0026lt;=L)return valueZero;if(L\u0026lt;=l\u0026amp;\u0026amp;r\u0026lt;=R)return nodes[cur].val;pushdown(cur);return merge(query(cur\u0026lt;\u0026lt;1,l,(l+r)\u0026gt;\u0026gt;1,L,R), query(cur\u0026lt;\u0026lt;1|1,(l+r)\u0026gt;\u0026gt;1,r,L,R));}public:segmentTree(){}segmentTree(int _leftRange,int _rightRange,const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,const valueType\u0026amp;_valueZero,const tagType\u0026amp;_tagZero){leftRange=_leftRange;rightRange=_rightRange;init(_initValue,_valueZero,_tagZero);}segmentTree(int size,const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,const valueType\u0026amp;_valueZero,const tagType\u0026amp;_tagZero){leftRange=1;rightRange=size+1;init(_initValue,_valueZero,_tagZero);}void modify(int l,int r,const tagType\u0026amp;tag){modify(1,leftRange,rightRange,l,r,tag);}void modify(int p,const tagType\u0026amp;tag){modify(p,p+1,tag);}valueType query(int l,int r){return query(1,leftRange,rightRange,l,r);}valueType query(int p){return query(p,p+1);}};class maxFlow{private:typedef long long ll;std::queue\u0026lt;int\u0026gt;q;std::vector\u0026lt;int\u0026gt;head,cur,nxt,to,dep;std::vector\u0026lt;ll\u0026gt;cap;public:maxFlow(int _n=0){init(_n);}void init(int _n){head.clear();head.resize(_n+1,0);nxt.resize(2);to.resize(2);cap.resize(2);}void init(){init(head.size()-1);}void add(int u,int v,ll w){nxt.push_back(head[u]);head[u]=to.size();to.push_back(v);cap.push_back(w);}void Add(int u,int v,ll w){add(u,v,w);add(v,u,0);}void del(int x){cap[x\u0026lt;\u0026lt;1]=cap[x\u0026lt;\u0026lt;1|1]=0;}bool bfs(int s,int t){dep.clear();dep.resize(head.size(),-1);dep[s]=0;q.push(s);while(!q.empty()){int u=q.front();q.pop();for(int i=head[u];i;i=nxt[i]){int v=to[i];ll w=cap[i];if(w\u0026gt;0\u0026amp;\u0026amp;dep[v]==-1){dep[v]=dep[u]+1;q.push(v);}}}return ~dep[t];}ll dfs(int u,ll flow,int t){if(dep[u]==dep[t])return u==t?flow:0;ll out=0;for(int\u0026amp;i=cur[u];i;i=nxt[i]){int v=to[i];ll w=cap[i];if(w\u0026gt;0\u0026amp;\u0026amp;dep[v]==dep[u]+1){ll f=dfs(v,std::min(w,flow-out),t);cap[i]-=f;cap[i ^ 1]+=f;out+=f;if(out==flow)return out;}}return out;}ll maxflow(int s,int t){ll out=0;while(bfs(s,t)){cur=head;out+=dfs(s,0x7fffffffffffffffll,t);}return out;}ll getflow(int x)const{return cap[x\u0026lt;\u0026lt;1|1];}};struct customHash{static uint64_t splitmix64(uint64_t x){x+=0x9e3779b97f4a7c15;x=(x ^(x\u0026gt;\u0026gt;30))*0xbf58476d1ce4e5b9;x=(x ^(x\u0026gt;\u0026gt;27))*0x94d049bb133111eb;return x ^(x\u0026gt;\u0026gt;31);}size_t operator()(uint64_t x)const{static const uint64_t FIXED_RANDOM=rng();return splitmix64(x+FIXED_RANDOM);}}; const int B = 1400; int n, tim; vi a, vis; int solve(int k) { int out = 0, p = 0; do { int cnt = 0; ++tim; ++out; while (p \u0026lt; n) { if (vis[a[p]] != tim) { if (++cnt \u0026gt; k) break; vis[a[p]] = tim; } ++p; } } while (p \u0026lt; n); return out; } signed main() { #ifdef FAST_IOSTREAM cin.sync_with_stdio(false); cin.tie(0); #endif read(n); a.resize(n); vis.resize(n + 1, 0); read(a.begin(), a.end()); For (i, 1, min(B, n)) wts(solve(i)); int p = min(B, n) + 1; FOR (i, n / B + 1, 1) { int l = p - 1; int r = n; while (l \u0026lt; r) { int mid = (l + r + 1) \u0026gt;\u0026gt; 1; if (solve(mid) \u0026lt; i) r = mid - 1; else l = mid; } for (; p \u0026lt;= l; ++p) wts(i); } return 0; }   ä¸»å¸­æ ‘ #ifndef OUUAN #pragma GCC optimize(\u0026quot;Ofast,no-stack-protector,unroll-loops,fast-math\u0026quot;) #endif #include\u0026lt;bits/stdc++.h\u0026gt; //#define int LoveLive //#define FAST_IOSTREAM 1 #define For(i,l,r)for(int i=(l),i##end=(r);i\u0026lt;=i##end;++i) #define FOR(i,r,l)for(int i=(r),i##end=(l);i\u0026gt;=i##end;--i) #define SON(i,u)for(int i=head[u];i;i=nxt[i]) #define ms(a,x)memset(a,x,sizeof(a)) #define fi first #define se second #define pb emplace_back #define pq priority_queue #define isinf(x)(x\u0026gt;=INF?-1:x) #define y1 why_is_there_a_function_called_y1 using namespace std;typedef long long LoveLive;typedef pair\u0026lt;int,int\u0026gt;pii;typedef vector\u0026lt;int\u0026gt;vi;typedef long double ld;const double inf=1e121;const double eps=1e-10;mt19937 rng(chrono::steady_clock::now().time_since_epoch().count());int randint(int l,int r){int out=rng()%(r-l+1)+l;return out\u0026gt;=l?out:out+r-l+1;}template\u0026lt;typename A,typename B\u0026gt;string to_string(pair\u0026lt;A,B\u0026gt;p);template\u0026lt;typename A,typename B,typename C\u0026gt;string to_string(tuple\u0026lt;A,B,C\u0026gt;p);template\u0026lt;typename A,typename B,typename C,typename D\u0026gt;string to_string(tuple\u0026lt;A,B,C,D\u0026gt;p);string to_string(const string\u0026amp;s){return '\u0026quot;'+s+'\u0026quot;';}string to_string(const char*s){return to_string((string)s);}string to_string(bool b){return(b?\u0026quot;true\u0026quot;:\u0026quot;false\u0026quot;);}string to_string(vector\u0026lt;bool\u0026gt;v){bool first=true;string res=\u0026quot;{\u0026quot;;for(int i=0;i\u0026lt;static_cast\u0026lt;int\u0026gt;(v.size());i++){if(!first){res+=\u0026quot;,\u0026quot;;}first=false;res+=to_string(v[i]);}res+=\u0026quot;}\u0026quot;;return res;}template\u0026lt;size_t N\u0026gt;string to_string(bitset\u0026lt;N\u0026gt;v){string res=\u0026quot;\u0026quot;;for(size_t i=0;i\u0026lt;N;i++){res+=static_cast\u0026lt;char\u0026gt;('0'+v[i]);}return res;}template\u0026lt;typename A\u0026gt;string to_string(A v){bool first=true;string res=\u0026quot;{\u0026quot;;for(const auto\u0026amp;x:v){if(!first){res+=\u0026quot;,\u0026quot;;}first=false;res+=to_string(x);}res+=\u0026quot;}\u0026quot;;return res;}template\u0026lt;typename A,typename B\u0026gt;string to_string(pair\u0026lt;A,B\u0026gt;p){return \u0026quot;(\u0026quot;+to_string(p.first)+\u0026quot;,\u0026quot;+to_string(p.second)+\u0026quot;)\u0026quot;;}template\u0026lt;typename A,typename B,typename C\u0026gt;string to_string(tuple\u0026lt;A,B,C\u0026gt;p){return \u0026quot;(\u0026quot;+to_string(get\u0026lt;0\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;1\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;2\u0026gt;(p))+\u0026quot;)\u0026quot;;}template\u0026lt;typename A,typename B,typename C,typename D\u0026gt;string to_string(tuple\u0026lt;A,B,C,D\u0026gt;p){return \u0026quot;(\u0026quot;+to_string(get\u0026lt;0\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;1\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;2\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;3\u0026gt;(p))+\u0026quot;)\u0026quot;;}template\u0026lt;typename A,typename B,typename C,typename D,typename E\u0026gt;string to_string(tuple\u0026lt;A,B,C,D,E\u0026gt;p){return \u0026quot;(\u0026quot;+to_string(get\u0026lt;0\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;1\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;2\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;3\u0026gt;(p))+\u0026quot;,\u0026quot;+to_string(get\u0026lt;4\u0026gt;(p))+\u0026quot;)\u0026quot;;}void debug_out(){cerr\u0026lt;\u0026lt;endl;}template\u0026lt;typename Head,typename...Tail\u0026gt;void debug_out(Head H,Tail...T){cerr\u0026lt;\u0026lt;\u0026quot; \u0026quot;\u0026lt;\u0026lt;to_string(H);debug_out(T...);} #ifdef OUUAN #define debug(...)cerr\u0026lt;\u0026lt;\u0026quot;[\u0026quot;\u0026lt;\u0026lt;#__VA_ARGS__\u0026lt;\u0026lt;\u0026quot;]:\u0026quot;,debug_out(__VA_ARGS__) #else #define debug(...)42 #endif #ifdef int const int INF=0x3f3f3f3f3f3f3f3fll; #else const int INF=0x3f3f3f3f;typedef long long ll; #endif #ifdef FAST_IOSTREAM #define br cout\u0026lt;\u0026lt;'\\n' #define sp cout\u0026lt;\u0026lt;' ' long long read(){long long x;cin\u0026gt;\u0026gt;x;return x;}template\u0026lt;typename T\u0026gt;void read(T\u0026amp;x){cin\u0026gt;\u0026gt;x;}template\u0026lt;typename T\u0026gt;void write(const T\u0026amp;x){cout\u0026lt;\u0026lt;x;} #else #define br putchar('\\n') #define sp putchar(' ') template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;!is_integral\u0026lt;T\u0026gt;::value,void\u0026gt;::type read(T\u0026amp;x){cin\u0026gt;\u0026gt;x;}long long read(){char c;long long out=0,f=1;for(c=getchar();!isdigit(c)\u0026amp;\u0026amp;c!='-';c=getchar());if(c=='-'){f=-1;c=getchar();}for(;isdigit(c);c=getchar())out=(out\u0026lt;\u0026lt;3)+(out\u0026lt;\u0026lt;1)+c-'0';return out*f;}template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;is_integral\u0026lt;T\u0026gt;::value,T\u0026gt;::type read(T\u0026amp;x){char c;T f=1;x=0;for(c=getchar();!isdigit(c)\u0026amp;\u0026amp;c!='-';c=getchar());if(c=='-'){f=-1;c=getchar();}for(;isdigit(c);c=getchar())x=(x\u0026lt;\u0026lt;3)+(x\u0026lt;\u0026lt;1)+c-'0';return x*=f;}char read(char\u0026amp;x){for(x=getchar();isspace(x);x=getchar());return x;}double read(double\u0026amp;x){scanf(\u0026quot;%lf\u0026quot;,\u0026amp;x);return x;}ld read(ld\u0026amp;x){scanf(\u0026quot;%Lf\u0026quot;,\u0026amp;x);return x;}template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;!is_integral\u0026lt;T\u0026gt;::value,void\u0026gt;::type write(const T\u0026amp;x){cout\u0026lt;\u0026lt;x;}template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;is_integral\u0026lt;T\u0026gt;::value,void\u0026gt;::type write(const T\u0026amp;x){if(x\u0026lt;0){putchar('-');write(-x);return;}if(x\u0026gt;9)write(x/10);putchar(x%10+'0');}void write(const char\u0026amp;x){putchar(x);}void write(const double\u0026amp;x){printf(\u0026quot;%.10lf\u0026quot;,x);}void write(const ld\u0026amp;x){printf(\u0026quot;%.10Lf\u0026quot;,x);} #endif template\u0026lt;typename T,typename...Args\u0026gt;void read(T\u0026amp;x,Args\u0026amp;...args){read(x);read(args...);}template\u0026lt;typename OutputIt,typename=typename enable_if\u0026lt;is_same\u0026lt;output_iterator_tag,typename iterator_traits\u0026lt;OutputIt\u0026gt;::iterator_category\u0026gt;::value||(is_base_of\u0026lt;forward_iterator_tag,typename iterator_traits\u0026lt;OutputIt\u0026gt;::iterator_category\u0026gt;::value\u0026amp;\u0026amp;!is_const\u0026lt;OutputIt\u0026gt;::value)\u0026gt;::type\u0026gt;void read(OutputIt __first,OutputIt __last){for(;__first!=__last;++__first)read(*__first);}template\u0026lt;typename InputIt,typename=typename enable_if\u0026lt;is_base_of\u0026lt;input_iterator_tag,typename iterator_traits\u0026lt;InputIt\u0026gt;::iterator_category\u0026gt;::value\u0026gt;::type\u0026gt;void wts(InputIt __first,InputIt __last){bool isFirst=true;for(;__first!=__last;++__first){if(isFirst)isFirst=false;else sp;write(*__first);}br;}template\u0026lt;typename InputIt,typename=typename enable_if\u0026lt;is_base_of\u0026lt;input_iterator_tag,typename iterator_traits\u0026lt;InputIt\u0026gt;::iterator_category\u0026gt;::value\u0026gt;::type\u0026gt;void wtb(InputIt __first,InputIt __last){for(;__first!=__last;++__first){write(*__first);br;}}template\u0026lt;typename T\u0026gt;void wts(const T\u0026amp;x){write(x);sp;}template\u0026lt;typename T\u0026gt;void wtb(const T\u0026amp;x){write(x);br;}template\u0026lt;typename T\u0026gt;void wte(const T\u0026amp;x){write(x);exit(0);}template\u0026lt;typename T,typename...Args\u0026gt;void wts(const T\u0026amp;x,Args...args){wts(x);wts(args...);}template\u0026lt;typename T,typename...Args\u0026gt;void wtb(const T\u0026amp;x,Args...args){wts(x);wtb(args...);}template\u0026lt;typename T,typename...Args\u0026gt;void wte(const T\u0026amp;x,Args...args){wts(x);wte(args...);}template\u0026lt;typename T\u0026gt;inline bool up(T\u0026amp;x,const T\u0026amp;y){return x\u0026lt;y?x=y,1:0;}template\u0026lt;typename T\u0026gt;inline bool dn(T\u0026amp;x,const T\u0026amp;y){return y\u0026lt;x?x=y,1:0;}template\u0026lt;typename T\u0026gt;inline bool inRange(const T\u0026amp;x,const T\u0026amp;l,const T\u0026amp;r){return!(x\u0026lt;l)\u0026amp;\u0026amp;!(r\u0026lt;x);}template\u0026lt;typename valueType,typename tagType\u0026gt;class segmentTreeNode{public:int id,left,right;valueType val;tagType tag;};template\u0026lt;typename valueType, typename tagType, valueType(*merge)(valueType,valueType), void(*update)(segmentTreeNode\u0026lt;valueType,tagType\u0026gt;\u0026amp;,tagType)\u0026gt;class segmentTree{private:std::vector\u0026lt;segmentTreeNode\u0026lt;valueType,tagType\u0026gt;\u0026gt;nodes;int leftRange,rightRange;valueType valueZero;tagType tagZero;void pushup(int cur){nodes[cur].val=merge(nodes[cur\u0026lt;\u0026lt;1].val,nodes[cur\u0026lt;\u0026lt;1|1].val);}void pushdown(int cur){update(nodes[cur\u0026lt;\u0026lt;1],nodes[cur].tag);update(nodes[cur\u0026lt;\u0026lt;1|1],nodes[cur].tag);nodes[cur].tag=tagZero;}void build(int cur,int l,int r,const std::vector\u0026lt;valueType\u0026gt;\u0026amp;initValue){nodes[cur].id=cur;nodes[cur].left=l;nodes[cur].right=r;nodes[cur].tag=tagZero;if(l==r-1)nodes[cur].val=initValue[l-leftRange];else{build(cur\u0026lt;\u0026lt;1,l,(l+r)\u0026gt;\u0026gt;1,initValue);build(cur\u0026lt;\u0026lt;1|1,(l+r)\u0026gt;\u0026gt;1,r,initValue);pushup(cur);}}void init(const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,const valueType\u0026amp;_valueZero,const tagType\u0026amp;_tagZero){valueZero=_valueZero;tagZero=_tagZero;nodes.resize((rightRange-leftRange)\u0026lt;\u0026lt;2);build(1,leftRange,rightRange,_initValue);}void modify(int cur,int l,int r,int L,int R,const tagType\u0026amp;tag){if(l\u0026gt;=R||r\u0026lt;=L)return;if(L\u0026lt;=l\u0026amp;\u0026amp;r\u0026lt;=R)update(nodes[cur],tag);else{pushdown(cur);modify(cur\u0026lt;\u0026lt;1,l,(l+r)\u0026gt;\u0026gt;1,L,R,tag);modify(cur\u0026lt;\u0026lt;1|1,(l+r)\u0026gt;\u0026gt;1,r,L,R,tag);pushup(cur);}}valueType query(int cur,int l,int r,int L,int R){if(l\u0026gt;=R||r\u0026lt;=L)return valueZero;if(L\u0026lt;=l\u0026amp;\u0026amp;r\u0026lt;=R)return nodes[cur].val;pushdown(cur);return merge(query(cur\u0026lt;\u0026lt;1,l,(l+r)\u0026gt;\u0026gt;1,L,R), query(cur\u0026lt;\u0026lt;1|1,(l+r)\u0026gt;\u0026gt;1,r,L,R));}public:segmentTree(){}segmentTree(int _leftRange,int _rightRange,const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,const valueType\u0026amp;_valueZero,const tagType\u0026amp;_tagZero){leftRange=_leftRange;rightRange=_rightRange;init(_initValue,_valueZero,_tagZero);}segmentTree(int size,const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,const valueType\u0026amp;_valueZero,const tagType\u0026amp;_tagZero){leftRange=1;rightRange=size+1;init(_initValue,_valueZero,_tagZero);}void modify(int l,int r,const tagType\u0026amp;tag){modify(1,leftRange,rightRange,l,r,tag);}void modify(int p,const tagType\u0026amp;tag){modify(p,p+1,tag);}valueType query(int l,int r){return query(1,leftRange,rightRange,l,r);}valueType query(int p){return query(p,p+1);}};class maxFlow{private:typedef long long ll;std::queue\u0026lt;int\u0026gt;q;std::vector\u0026lt;int\u0026gt;head,cur,nxt,to,dep;std::vector\u0026lt;ll\u0026gt;cap;public:maxFlow(int _n=0){init(_n);}void init(int _n){head.clear();head.resize(_n+1,0);nxt.resize(2);to.resize(2);cap.resize(2);}void init(){init(head.size()-1);}void add(int u,int v,ll w){nxt.push_back(head[u]);head[u]=to.size();to.push_back(v);cap.push_back(w);}void Add(int u,int v,ll w){add(u,v,w);add(v,u,0);}void del(int x){cap[x\u0026lt;\u0026lt;1]=cap[x\u0026lt;\u0026lt;1|1]=0;}bool bfs(int s,int t){dep.clear();dep.resize(head.size(),-1);dep[s]=0;q.push(s);while(!q.empty()){int u=q.front();q.pop();for(int i=head[u];i;i=nxt[i]){int v=to[i];ll w=cap[i];if(w\u0026gt;0\u0026amp;\u0026amp;dep[v]==-1){dep[v]=dep[u]+1;q.push(v);}}}return ~dep[t];}ll dfs(int u,ll flow,int t){if(dep[u]==dep[t])return u==t?flow:0;ll out=0;for(int\u0026amp;i=cur[u];i;i=nxt[i]){int v=to[i];ll w=cap[i];if(w\u0026gt;0\u0026amp;\u0026amp;dep[v]==dep[u]+1){ll f=dfs(v,std::min(w,flow-out),t);cap[i]-=f;cap[i ^ 1]+=f;out+=f;if(out==flow)return out;}}return out;}ll maxflow(int s,int t){ll out=0;while(bfs(s,t)){cur=head;out+=dfs(s,0x7fffffffffffffffll,t);}return out;}ll getflow(int x)const{return cap[x\u0026lt;\u0026lt;1|1];}};struct customHash{static uint64_t splitmix64(uint64_t x){x+=0x9e3779b97f4a7c15;x=(x ^(x\u0026gt;\u0026gt;30))*0xbf58476d1ce4e5b9;x=(x ^(x\u0026gt;\u0026gt;27))*0x94d049bb133111eb;return x ^(x\u0026gt;\u0026gt;31);}size_t operator()(uint64_t x)const{static const uint64_t FIXED_RANDOM=rng();return splitmix64(x+FIXED_RANDOM);}}; #define mid ((l + r) \u0026gt;\u0026gt; 1) struct Node { int val, ls, rs; bool l1; Node() { val = ls = rs = 0; l1 = false; } }; vector\u0026lt;Node\u0026gt; t; int modify(int u, int l, int r, int p, int x) { int cur = t.size(); t.push_back(t[u]); t[cur].val += x; if (p == l) t[cur].l1 = x == 1; if (l == r - 1) return cur; if (p \u0026lt; mid) { int ls = modify(t[u].ls, l, mid, p, x); t[cur].ls = ls; } else { int rs = modify(t[u].rs, mid, r, p, x); t[cur].rs = rs; } return cur; } int query(int u, int l, int r, int k) { if (l == r - 1) return l; if (t[t[u].ls].val \u0026lt; k || (t[t[u].ls].val == k \u0026amp;\u0026amp; !t[t[u].rs].l1)) return query(t[u].rs, mid, r, k - t[t[u].ls].val); else return query(t[u].ls, l, mid, k); } int n; vi a, rt, pre; int solve(int k) { int p = 0, out = 0; while (p \u0026lt; n) { ++out; p = query(rt[p], 0, n, k) + 1; } return out; } signed main() { #ifdef FAST_IOSTREAM cin.sync_with_stdio(false); cin.tie(0); #endif read(n); a.resize(n); rt.resize(n + 1, 0); pre.resize(n + 1, -1); read(a.begin(), a.end()); t.resize(1); FOR (i, n - 1, 0) { rt[i] = modify(rt[i + 1], 0, n, i, 1); if (~pre[a[i]]) rt[i] = modify(rt[i], 0, n, pre[a[i]], -1); pre[a[i]] = i; } For (i, 1, n) wts(solve(i)); return 0; }  ","date":"2019-12-06T19:24:14+08:00","permalink":"https://ouuan.github.io/post/cf786c-till-i-collapse%E6%A0%B9%E5%8F%B7%E5%88%86%E6%B2%BB%E4%BA%8C%E5%88%86%E7%AD%94%E6%A1%88-%E4%B8%BB%E5%B8%AD%E6%A0%91%E8%B0%83%E5%92%8C%E7%BA%A7%E6%95%B0/","tags":["æ ¹å·åˆ†æ²»","äºŒåˆ†ç­”æ¡ˆ","ä¸»å¸­æ ‘","æ•°é¢œè‰²","è°ƒå’Œçº§æ•°","æ•°æ®ç»“æ„","è´ªå¿ƒ"],"title":"CF786C Till I Collapseï¼ˆæ ¹å·åˆ†æ²»ï¼ŒäºŒåˆ†ç­”æ¡ˆ / ä¸»å¸­æ ‘ï¼Œè°ƒå’Œçº§æ•°ï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ CF\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•°åºåˆ—ï¼Œå¤šæ¬¡è¯¢é—®ç»™å®šåŒºé—´å†…æ¯ä¸ªæ•°ä¹‹ç§¯çš„æ¬§æ‹‰å‡½æ•° ($\\varphi$)ï¼Œå¯¹ $10^9+7$ å–æ¨¡ã€‚\næ•°åˆ—é•¿åº¦ã€è¯¢é—®ä¸ªæ•°ä¸è¶…è¿‡ $2\\cdot 10^5$ï¼Œæ•°çš„å¤§å°ä¸è¶…è¿‡ $10^6$ ã€‚\nç®€è¦åšæ³• å…¶å®è¿™é¢˜å’Œ ã€ŒSDOI2009ã€HH çš„é¡¹é“¾ æœ¬è´¨æ˜¯ä¸€æ ·çš„ã€‚\nç”±è®¡ç®—æ¬§æ‹‰å‡½æ•°çš„å…¬å¼å¾—ï¼š\n$$ \\varphi\\left(\\prod\\limits_{i=l}^ra_i\\right)=\\left(\\prod\\limits_{i=l}^ra_i\\right)\\cdot\\left(\\prod\\limits_{p\\text{ is a prime factor of }a_{l..r}}\\frac{p-1}p\\right) $$\nå³ï¼ŒåŒºé—´ç§¯ä¹˜ä¸Šæ¯ä¸ªåœ¨è¿™ä¸ªåŒºé—´ä¸­å‡ºç°äº†çš„è´¨å› æ•°å‡ä¸€é™¤ä»¥æœ¬èº«ã€‚\nåŒºé—´ç§¯å¯ä»¥é€šè¿‡è®¡ç®—å‰ç¼€ç§¯çº¿æ€§è§£å†³ï¼Œå…³é”®åœ¨äºæ±‚å‡ºåˆ†æ¯ã€‚\nå¦‚æœæ¯ä¸ªè´¨å› æ•°çš„è´¡çŒ®ä¸æ˜¯ $(p-1)/p$ è€Œæ˜¯ $1$ï¼Œå¹¶ä¸”è´¡çŒ®ä¸æ˜¯ç›¸ä¹˜è€Œæ˜¯ç›¸åŠ ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªåŒºé—´æ•°é¢œè‰²é—®é¢˜äº†ã€‚äº‹å®ä¸Šï¼ŒåŒºé—´æ•°é¢œè‰²é—®é¢˜çš„è§£æ³•çš„ç¡®å¯ä»¥å¥—ç”¨è¿‡æ¥ã€‚\nï¼ˆä¸‹æ–‡ä¸­å¤æ‚åº¦é‡Œçš„ $w$ å‡æŒ‡å€¼åŸŸï¼Œ$\\omega(w)$ æŒ‡å€¼åŸŸå†…ä¸€ä¸ªæ•°ä¸å¯é‡è´¨å› å­ä¸ªæ•°çš„æœ€å¤§å€¼ï¼Œå³ A111972 ï¼Œ$m$ æŒ‡æ¨¡æ•°ï¼Œå³ $10^9+7$ ã€‚ï¼‰\nè«é˜Ÿåšæ³• æ„Ÿè§‰ $O(w+w\\log m/\\log w+n\\sqrt q\\log w+q\\log q)$ åšæ³•æ²¡å•¥å¥½è®²çš„ï¼Œä¼šè«é˜Ÿå°±ä¼šäº†å§..ä½†è¿™ä¸ªå¤æ‚åº¦æˆ‘å†™çš„è¿‡ä¸äº†ã€‚\næ•°è®ºç›¸å…³çš„è«é˜Ÿé¢˜ç»å¸¸å¯ä»¥æ ¹å·åˆ†æ²»å»æ‰ä¸€ä¸ª log ã€‚\nå…·ä½“æ¥è¯´ï¼Œå¤§å°è¶…è¿‡ $\\sqrt w$ çš„è´¨å› æ•°åœ¨ä¸€ä¸ªæ•°ä¸­æœ€å¤šå‡ºç°ä¸€æ¬¡ï¼Œæ‰€ä»¥å¯ä»¥æŠŠè¿™äº›â€œå¤§è´¨æ•°â€ç”¨è«é˜Ÿå¤„ç†ï¼Œå…¶å®ƒâ€œå°è´¨æ•°â€ç”¨å‰ç¼€å’Œé¢„å¤„ç†ï¼Œç„¶åæ—¶é—´å¤æ‚åº¦å°±æ˜¯ $O(w+w\\log m/\\log w+n\\sqrt q+q\\log q)$ äº†ï¼ˆ$O(w\\log m/\\log w)$ æ˜¯è®¡ç®— $(p-1)/p$ ä»¥åŠ $p/(p-1)$ çš„å¤æ‚åº¦ï¼Œå½“ç„¶ï¼Œå¯ä»¥é€šè¿‡çº¿æ€§æ±‚é€†å…ƒå»æ‰è¿™ä¸ª $\\log m$ï¼‰ï¼ˆç©ºé—´å¤æ‚åº¦ä¸º $O(w+n\\sqrt w + m)$ï¼‰ã€‚\nè¿™æ ·ä¼˜åŒ–ä¹‹åå¯ä»¥é€šè¿‡æœ¬é¢˜ã€‚\nè¿˜æœ‰å¦å¤–ä¸€ç§æ–¹å¼ï¼šä¸æšä¸¾é‡å¤çš„è´¨å› æ•°ï¼Œå¯ä»¥ä¼˜åŒ–åˆ° $O(w+w\\log m/\\log w+n\\sqrt q\\omega(w)+q\\log q)$ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æœ¬é¢˜ã€‚\næ ‘çŠ¶æ•°ç»„åšæ³• è¿™ä¹Ÿæ˜¯åŒºé—´æ•°é¢œè‰²çš„ç»å…¸åšæ³•ã€‚\nè®° $pre(p, r)$ è¡¨ç¤ºè´¨å› æ•° $p$ åœ¨ $[1, r]$ ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå³ï¼š\n$$ pre(p, r)=\\max\\left(\\{x|x\\in\\mathbb{N}, x\\in[1, r], p|a_x\\}\\bigcup\\{0\\}\\right) $$\né‚£ä¹ˆï¼Œ$ans(l, r)=\\left(\\prod_{pre(p, r)\\ge l}(p-1)/p\\right)\\cdot\\left(\\prod_{i=l}^ra_i\\right)$ ã€‚\nå°†è¯¢é—®ç¦»çº¿ä¸‹æ¥ï¼ŒæŒ‰å³ç«¯ç‚¹æ’åºï¼Œä»å·¦å¾€å³éå†æ¯ä¸ªç‚¹ä½œä¸º $r$ï¼Œä½¿ç”¨æ•°æ®ç»“æ„ï¼ˆå¦‚æ ‘çŠ¶æ•°ç»„ï¼‰ç»´æŠ¤ $pre(1..r, r)$ å¹¶æŸ¥è¯¢ç­”æ¡ˆï¼Œå°±å¥½äº†ã€‚\nå¦‚æœä¸æšä¸¾é‡å¤çš„è´¨å› æ•°ï¼Œå¤æ‚åº¦ä¸º $O(w+w\\log p/\\log w+n\\omega(w)\\log n+q(\\log n+\\log m))$ ã€‚\nå‚è€ƒä»£ç  ç“¶é¢ˆä¸å¸¦ log çš„è«é˜Ÿåšæ³• #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef long long ll; int read() { int out = 0; char c; while (!isdigit(c = getchar())); for (; isdigit(c); c = getchar()) out = out * 10 + c - '0'; return out; } const int B = 168; const int W = 1e6; const int BLOCK = 500; const int mod = 1e9 + 7; int qpow(int x, int y) { int out = 1; while (y) { if (y \u0026amp; 1) out = (ll) out * x % mod; x = (ll) x * x % mod; y \u0026gt;\u0026gt;= 1; } return out; } vector\u0026lt;bool\u0026gt; np; int n, m, ans = 1; vector\u0026lt;vector\u0026lt;int\u0026gt; \u0026gt; tot; vector\u0026lt;int\u0026gt; a, p, k, invk, maxp, mul, cnt, out; struct Query { int l, r, id; Query(int _l, int _r, int _id) { l = _l; r = _r; id = _id; } bool operator\u0026lt;(const Query\u0026amp; y) const { return l / BLOCK == y.l / BLOCK ? ((l / BLOCK) \u0026amp; 1 ? r \u0026gt; y.r : r \u0026lt; y.r) : l \u0026lt; y.l; } }; vector\u0026lt;Query\u0026gt; q; void add(int x) { if (maxp[x] \u0026gt;= B) { if (++cnt[maxp[x]] == 1) { ans = (ll) ans * k[maxp[x]] % mod; } } } void del(int x) { if (maxp[x] \u0026gt;= B) { if (--cnt[maxp[x]] == 0) { ans = (ll) ans * invk[maxp[x]] % mod; } } } int main() { n = read(); np.resize(W + 1, false); maxp.resize(W + 1); for (int i = 2; i \u0026lt;= W; ++i) { if (!np[i]) { maxp[i] = p.size(); p.push_back(i); k.push_back((ll) (i - 1) * qpow(i, mod - 2) % mod); invk.push_back(qpow(k.back(), mod - 2)); } for (int j = 0; j \u0026lt; p.size() \u0026amp;\u0026amp; i * p[j] \u0026lt;= W; ++j) { int x = i * p[j]; np[x] = true; maxp[x] = max(j, maxp[i]); if (i % p[j] == 0) break; } } a.resize(n + 1); mul.resize(n + 1, 1); cnt.resize(p.size(), 0); tot.resize(B, vector\u0026lt;int\u0026gt;(n + 1, 0)); for (int i = 1; i \u0026lt;= n; ++i) { a[i] = read(); mul[i] = (ll) mul[i - 1] * a[i] % mod; for (int j = 0; j \u0026lt; B; ++j) tot[j][i] = tot[j][i - 1]; for (int x = a[i]; x \u0026gt; 1; x /= p[maxp[x]]) if (maxp[x] \u0026lt; B) ++tot[maxp[x]][i]; } m = read(); out.resize(m); int l, r; for (int i = 0; i \u0026lt; m; ++i) { l = read(); r = read(); q.push_back(Query(l, r, i)); } sort(q.begin(), q.end()); l = 1, r = 0; for (int i = 0; i \u0026lt; m; ++i) { while (l \u0026gt; q[i].l) add(a[--l]); while (r \u0026lt; q[i].r) add(a[++r]); while (l \u0026lt; q[i].l) del(a[l++]); while (r \u0026gt; q[i].r) del(a[r--]); int tmp = (ll) ans * mul[q[i].r] % mod * qpow(mul[q[i].l - 1], mod - 2) % mod; for (int j = 0; j \u0026lt; B; ++j) if (tot[j][q[i].r] - tot[j][q[i].l - 1]) tmp = (ll) tmp * k[j] % mod; out[q[i].id] = tmp; } for (int i = 0; i \u0026lt; m; ++i) printf(\u0026quot;%d\\n\u0026quot;, out[i]); return 0; }   æ ‘çŠ¶æ•°ç»„åšæ³• #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef long long ll; typedef pair\u0026lt;int, int\u0026gt; pii; int read() { int out = 0; char c; while (!isdigit(c = getchar())); for (; isdigit(c); c = getchar()) out = out * 10 + c - '0'; return out; } const int mod = 1e9 + 7; const int W = 1e6; int qpow(int x, int y) { int out = 1; while (y) { if (y \u0026amp; 1) out = (ll) out * x % mod; x = (ll) x * x % mod; y \u0026gt;\u0026gt;= 1; } return out; } struct BIT { vector\u0026lt;int\u0026gt; A; void resize(int size) { A.resize(size + 1, 1); } void add(int p, int x) { for (; p \u0026lt; A.size(); p += (p \u0026amp; -p)) { A[p] = (ll) A[p] * x % mod; } } int query(int p) { int out = 1; for (; p; p -= (p \u0026amp; -p)) out = (ll) out * A[p] % mod; return out; } } bit; vector\u0026lt;vector\u0026lt;pii\u0026gt; \u0026gt; q; int n, m; vector\u0026lt;bool\u0026gt; np; vector\u0026lt;int\u0026gt; a, mul, p, minp, nxt, k, invk, pre, out; int main() { np.resize(W + 1); nxt.resize(W + 1); minp.resize(W + 1); for (int i = 2; i \u0026lt;= W; ++i) { if (!np[i]) { nxt[i] = 1; minp[i] = p.size(); p.push_back(i); k.push_back((ll) (i - 1) * qpow(i, mod - 2) % mod); invk.push_back(qpow(k.back(), mod - 2)); } for (int j = 0; j \u0026lt; p.size() \u0026amp;\u0026amp; i * p[j] \u0026lt;= W; ++j) { int x = i * p[j]; np[x] = true; minp[x] = j; if (i % p[j]) nxt[x] = i; else { nxt[x] = nxt[i]; break; } } } n = read(); a.resize(n + 1); mul.resize(n + 1, 1); for (int i = 1; i \u0026lt;= n; ++i) { a[i] = read(); mul[i] = (ll) mul[i - 1] * a[i] % mod; } m = read(); q.resize(n + 1); for (int i = 0; i \u0026lt; m; ++i) { int l = read(); int r = read(); q[r].push_back(pii(l, i)); } pre.resize(p.size(), 0); out.resize(m); bit.resize(n); for (int i = 1; i \u0026lt;= n; ++i) { for (int x = a[i]; x \u0026gt; 1; x = nxt[x]) { if (pre[minp[x]]) bit.add(pre[minp[x]], invk[minp[x]]); bit.add(pre[minp[x]] = i, k[minp[x]]); } int tmp = (ll) bit.query(i) * mul[i] % mod; for (auto x : q[i]) out[x.second] = (ll) tmp * qpow((ll) bit.query(x.first - 1) * mul[x.first - 1] % mod, mod - 2) % mod; } for (int i = 0; i \u0026lt; m; ++i) printf(\u0026quot;%d\\n\u0026quot;, out[i]); return 0; }  ","date":"2019-12-05T16:41:23+08:00","permalink":"https://ouuan.github.io/post/cf594d-req%E6%95%B0%E9%A2%9C%E8%89%B2%E8%8E%AB%E9%98%9F%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84%E6%95%B0%E8%AE%BA/","tags":["æ•°é¢œè‰²","è«é˜Ÿ","æ ‘çŠ¶æ•°ç»„","æ•°è®º","æ•°æ®ç»“æ„"],"title":"CF594D REQï¼ˆæ•°é¢œè‰²ï¼Œè«é˜Ÿï¼Œæ ‘çŠ¶æ•°ç»„ï¼Œæ•°è®ºï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ CF\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€ä¸ªåºåˆ—ï¼Œåœ¨çº¿åœ°æ”¯æŒä¸¤ä¸ªæ“ä½œï¼š\n  å°†ä¸€ä¸ªåŒºé—´å¾ªç¯ç§»ä½ã€‚\n  æŸ¥è¯¢ä¸€ä¸ªåŒºé—´ä¸­æŸä¸ªæ•°å‡ºç°çš„æ¬¡æ•°ã€‚\n  åºåˆ—é•¿åº¦ã€æŸ¥è¯¢ä¸ªæ•°éƒ½ä¸è¶…è¿‡ $10^5$ï¼Œæ—¶é™ $\\texttt{4s}$ ã€‚\nO((n+m)sqrtn) åšæ³• å¤§è‡´æ€è·¯ï¼šåˆ†æˆè‹¥å¹²å—ï¼Œæ¯å—ç»´æŠ¤å—å†…æ¯ä¸ªæ•°çš„å‡ºç°æ¬¡æ•°ï¼ˆè¿™å¯¼è‡´ç©ºé—´å¤æ‚åº¦æ˜¯ $O(n\\sqrt n)$ï¼‰ï¼Œä»¥åŠè¿™ä¸€å—å¯¹åº”çš„åºåˆ—ï¼ˆç›¸å½“äºå—çŠ¶é“¾è¡¨ï¼‰ã€‚\nå…·ä½“æ¥è¯´ï¼Œæœ‰è‡³å°‘å››ç§å¤§åŒå°å¼‚çš„åšæ³•ï¼š\n  ç®—æ³•ï¼š\n  æ¯æ¬¡å¾ªç¯ç§»ä½æ—¶åªå°†ç»™å®šåŒºé—´çš„æœ«å°¾ç§»è‡³ç»™å®šåŒºé—´çš„å¼€å¤´ï¼Œè¿™æ ·çš„è¯æ¯å—çš„å¤§å°ä¼šç»å¸¸æ”¹å˜ï¼Œæ¯æ ¹å·æ¬¡å¾ªç¯ç§»ä½éœ€è¦é‡æ„ä¸€æ¬¡ã€‚\n  æ¯æ¬¡å¾ªç¯ç§»ä½æ—¶é™¤äº†å°†ç»™å®šåŒºé—´çš„æœ«å°¾ç§»è‡³ç»™å®šåŒºé—´çš„å¼€å¤´ï¼Œè¿˜å°†åŒºé—´å†…æ¯ä¸€å—çš„æœ«å°¾ç§»è‡³ä¸‹ä¸€å—çš„å¼€å¤´ï¼Œè¿™æ ·çš„è¯æ¯å—çš„å¤§å°æ€»æ˜¯ä¸å˜çš„ã€‚\n    æ•°æ®ç»“æ„ï¼š\n  ä½¿ç”¨é“¾è¡¨ç»´æŠ¤æ¯ä¸€å—ï¼Œæ‰¾åˆ°éœ€è¦æ’å…¥ã€åˆ é™¤çš„ä½ç½®å¯ä»¥åšåˆ° $O(\\sqrt n)$ï¼Œæ’å…¥ã€åˆ é™¤å¯ä»¥åšåˆ° $O(1)$ ï¼Œæ¢å—ï¼ˆæœ«å°¾åˆ é™¤ã€å¤´éƒ¨æ’å…¥ï¼‰å¯ä»¥åšåˆ° $O(1)$ ã€‚\n  ä½¿ç”¨åŒç«¯é˜Ÿåˆ—ç»´æŠ¤æ¯ä¸€å—ï¼Œæ‰¾åˆ°éœ€è¦æ’å…¥ã€åˆ é™¤çš„ä½ç½®å¯ä»¥åšåˆ° $O(1)$ï¼Œæ’å…¥ã€åˆ é™¤å¯ä»¥åšåˆ° $O(\\sqrt n)$ ï¼Œæ¢å—ï¼ˆæœ«å°¾åˆ é™¤ã€å¤´éƒ¨æ’å…¥ï¼‰å¯ä»¥åšåˆ° $O(1)$ ã€‚\n    é€‰æ‹©ä¸€ä¸ªç®—æ³•å’Œä¸€ä¸ªæ•°æ®ç»“æ„ç»„åˆåœ¨ä¸€èµ·ï¼Œå°±å¯ä»¥å¾—åˆ°å››ç§åšæ³•ã€‚\nO(n+mlog^2n) åšæ³• ä½¿ç”¨ä¸€æ£µå¹³è¡¡æ ‘ç»´æŠ¤æ•´ä¸ªåºåˆ—ï¼Œå†ä½¿ç”¨ $n$ æ£µå¹³è¡¡æ ‘åˆ†åˆ«ç»´æŠ¤å€¼ä¸º $i$ çš„æ•°ä¹‹é—´çš„ç›¸å¯¹ä½ç½®ã€‚\nå³ï¼Œ$t_0$ ä¸­çš„å…ƒç´ æ˜¯åºåˆ—ä¸­çš„æ¯ä¸ªæ•°ï¼Œ$t_i$ ($1\\le i\\le n$) ä¸­çš„å…ƒç´ æ˜¯æ‰€æœ‰å¤§å°ä¸º $i$ çš„æ•°ï¼Œç”¨äºæ¯”è¾ƒçš„é”®å€¼æ˜¯è¿™ä¸ªæ•°åœ¨åºåˆ—ä¸­çš„ä½ç½®ã€‚\n$t_0$ çš„ç»´æŠ¤æ˜¯ç»å…¸é—®é¢˜ï¼Œè€Œç»´æŠ¤ $t_i$ æ—¶éœ€è¦æŸ¥æ‰¾ä½ç½®ä¸è¶…è¿‡/ä¸å°äºç»™å®šå€¼çš„æœ€é å³/æœ€é å·¦å…ƒç´ ï¼Œæ‰¾è¿™ä¸ªçš„æ—¶å€™éœ€è¦åˆ©ç”¨ $t_0$ æ¥æŸ¥è¯¢ä¸€ä¸ªæ•°åœ¨åºåˆ—ä¸­çš„ä½ç½®ï¼Œå…·ä½“å®ç°æ—¶éœ€è¦è®°å½• $t_i$ çš„æ¯ä¸ªèŠ‚ç‚¹åœ¨ $t_0$ ä¸­å¯¹åº”çš„èŠ‚ç‚¹ã€‚\nç”±äºåœ¨ $t_i$ ä¸­è°ƒç”¨äº† $t_0$ï¼Œå¤æ‚åº¦å°±æ˜¯ $O(n+m\\log^2 n)$ ã€‚\næœ‰ç‚¹éš¾å†™ï¼Œæˆ‘å†™äº† 5KBï¼Œè°ƒäº†ä¸€å¹´..CF ä¸Šæœ‰ 2.3KB çš„æäº¤ï¼ˆæ²¡ä»”ç»†çœ‹ï¼Œä½†åº”è¯¥æ˜¯ä¸€æ ·çš„åšæ³•..ï¼‰ã€‚\nç„¶åè¿™é¢˜è¿˜æˆåŠŸåŠé€€ç»“æ„ä½“æ•°ç»„é€‰æ‰‹ï¼Œè®©æˆ‘æ”¹ç”¨æŒ‡é’ˆäº†..æœ€åå†…å­˜å ç”¨æ¯”åˆ†å—è¿˜å¤§ã€‚\nå‚è€ƒä»£ç  nsqrtn åšæ³•ï¼ˆé“¾è¡¨ï¼Œæ¯æ¬¡æ¢å—ï¼‰ #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;list\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N = 1e5 + 5; const int B = 1000; int n, m, a[N], bl[N], bll[N], blr[N], cnt[N / B + 5][N]; list\u0026lt;int\u0026gt; lst[N / B + 5]; int main() { scanf(\u0026quot;%d\u0026quot;, \u0026amp;n); for (int i = 1; i \u0026lt;= n; ++i) scanf(\u0026quot;%d\u0026quot;, a + i); for (int i = 1, l = 1, r; l \u0026lt;= n; l = r + 1, ++i) { r = min(n, l + B - 1); bll[i] = l; blr[i] = r; for (int j = l; j \u0026lt;= r; ++j) { bl[j] = i; ++cnt[i][a[j]]; lst[i].push_back(a[j]); } } scanf(\u0026quot;%d\u0026quot;, \u0026amp;m); int ans = 0; while (m--) { int type, l, r; scanf(\u0026quot;%d%d%d\u0026quot;, \u0026amp;type, \u0026amp;l, \u0026amp;r); l = (l + ans - 1) % n + 1; r = (r + ans - 1) % n + 1; if (l \u0026gt; r) swap(l, r); if (type == 1) { auto it = lst[bl[r]].begin(); for (int i = bll[bl[r]]; i \u0026lt; r; ++i) ++it; int tmp = *it; --cnt[bl[r]][tmp]; ++cnt[bl[l]][tmp]; lst[bl[r]].erase(it); it = lst[bl[l]].begin(); for (int i = bll[bl[l]]; i \u0026lt; l; ++i) ++it; lst[bl[l]].insert(it, tmp); for (int i = bl[l]; i \u0026lt; bl[r]; ++i) { int t = lst[i].back(); lst[i].pop_back(); lst[i + 1].push_front(t); --cnt[i][t]; ++cnt[i + 1][t]; } } else { int k; scanf(\u0026quot;%d\u0026quot;, \u0026amp;k); k = (k + ans - 1) % n + 1; ans = 0; if (bl[l] == bl[r]) { auto it = lst[bl[l]].begin(); for (int i = bll[bl[l]]; i \u0026lt;= r; ++i) { if (i \u0026gt;= l) ans += *it == k; ++it; } } else { auto it = lst[bl[l]].begin(); for (int i = bll[bl[l]]; i \u0026lt;= blr[bl[l]]; ++i) { if (i \u0026gt;= l) ans += *it == k; ++it; } it = lst[bl[r]].begin(); for (int i = bll[bl[r]]; i \u0026lt;= r; ++i) { ans += *it == k; ++it; } for (int i = bl[l] + 1; i \u0026lt; bl[r]; ++i) ans += cnt[i][k]; } printf(\u0026quot;%d\\n\u0026quot;, ans); } } return 0; }   nlog^2n åšæ³•ï¼ˆSplayï¼‰ #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;queue\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; struct Node; int n, m; vector\u0026lt;int\u0026gt; a; vector\u0026lt;Node *\u0026gt; rt; vector\u0026lt;queue\u0026lt;Node *\u0026gt; \u0026gt; q; // q[i] å­˜çš„æ˜¯å€¼ä¸º i çš„æ•°åœ¨ t_0 ä¸­å¯¹åº”çš„èŠ‚ç‚¹ Node *empty, *lsen, *rsen; struct Node { int val, siz; Node *pa, *mir; // mir æ˜¯åœ¨ t_0 ä¸­å¯¹åº”çš„èŠ‚ç‚¹ vector\u0026lt;Node *\u0026gt; ch; Node(Node *_pa = empty, int _val = 0, Node *_mir = empty) { siz = 1; pa = _pa; mir = _mir; val = _val; ch.resize(2, empty); } }; void pushup(Node *x) { x-\u0026gt;siz = x-\u0026gt;ch[0]-\u0026gt;siz + x-\u0026gt;ch[1]-\u0026gt;siz + 1; } void rotate(Node *x) { Node *y = x-\u0026gt;pa; Node *z = y-\u0026gt;pa; int k = x == y-\u0026gt;ch[1]; z-\u0026gt;ch[y == z-\u0026gt;ch[1]] = x; x-\u0026gt;pa = z; y-\u0026gt;ch[k] = x-\u0026gt;ch[k ^ 1]; x-\u0026gt;ch[k ^ 1]-\u0026gt;pa = y; x-\u0026gt;ch[k ^ 1] = y; y-\u0026gt;pa = x; pushup(y); pushup(x); } void Splay(Node *x, Node *goal) { while (x-\u0026gt;pa != goal) { Node *y = x-\u0026gt;pa; Node *z = y-\u0026gt;pa; if (z != goal) rotate((x == y-\u0026gt;ch[1]) ^ (y == z-\u0026gt;ch[1]) ? x : y); rotate(x); } } void makeroot(Node *\u0026amp; root, Node *x) { Splay(x, empty); root = x; } Node* kth(Node *root, int x) { Node *u = root; while (1) { if (u-\u0026gt;ch[0]-\u0026gt;siz \u0026gt;= x) u = u-\u0026gt;ch[0]; else if (u-\u0026gt;ch[0]-\u0026gt;siz + 1 == x) return u; else { x -= u-\u0026gt;ch[0]-\u0026gt;siz + 1; u = u-\u0026gt;ch[1]; } } } int rk(Node *\u0026amp; root, Node *x) { makeroot(root, x); return x-\u0026gt;ch[0]-\u0026gt;siz + 1; } void link(Node *\u0026amp; root, Node *x, Node *y, int type = 0) { makeroot(root, y); if (root-\u0026gt;ch[type] != empty) { Node *u = kth(y-\u0026gt;ch[0], y-\u0026gt;ch[0]-\u0026gt;siz); makeroot(root, u); } y-\u0026gt;ch[type] = x; x-\u0026gt;pa = y; pushup(y); if (y-\u0026gt;pa != empty) pushup(y-\u0026gt;pa); } void cut(Node *\u0026amp; root, Node *x) { makeroot(root, x); Node *u = kth(x-\u0026gt;ch[0], x-\u0026gt;ch[0]-\u0026gt;siz); makeroot(root, u); u-\u0026gt;ch[1] = x-\u0026gt;ch[1]; x-\u0026gt;ch[1]-\u0026gt;pa = u; x-\u0026gt;ch[0] = x-\u0026gt;ch[1] = x-\u0026gt;pa = empty; x-\u0026gt;siz = 1; pushup(u); } Node* rkle(Node *root, int x) { Node *u = root; while (1) { if (u-\u0026gt;ch[1] != empty \u0026amp;\u0026amp; rk(rt[0], kth(u-\u0026gt;ch[1], 1)-\u0026gt;mir) \u0026lt;= x) u = u-\u0026gt;ch[1]; else if (rk(rt[0], u-\u0026gt;mir) \u0026lt;= x) return u; else u = u-\u0026gt;ch[0]; } } Node* rkge(Node *root, int x) { Node *u = root; while (1) { if (u-\u0026gt;ch[0] != empty \u0026amp;\u0026amp; rk(rt[0], kth(u-\u0026gt;ch[0], u-\u0026gt;ch[0]-\u0026gt;siz)-\u0026gt;mir) \u0026gt;= x) u = u-\u0026gt;ch[0]; else if (rk(rt[0], u-\u0026gt;mir) \u0026gt;= x) return u; else u = u-\u0026gt;ch[1]; } } Node* split(Node *\u0026amp; root, int l, int r) { Node *x = kth(root, l); Node *y = kth(root, r + 2); makeroot(root, x); Splay(y, x); return y-\u0026gt;ch[0]; } Node* get(Node *\u0026amp; root, int p) { Node *x = rkle(root, p); Node *y = rkge(root, p + 2); makeroot(root, x); Splay(y, x); return y-\u0026gt;ch[0]; } Node* build1(vector\u0026lt;int\u0026gt;::iterator l, vector\u0026lt;int\u0026gt;::iterator r, Node *pa) { if (l == r) return empty; auto mid = l + (r - l) / 2; Node *cur = new Node(pa, *mid); cur-\u0026gt;ch[0] = build1(l, mid, cur); q[*mid].push(cur); cur-\u0026gt;ch[1] = build1(mid + 1, r, cur); pushup(cur); return cur; } void build1(Node *\u0026amp; root, vector\u0026lt;int\u0026gt;\u0026amp; a) { root = build1(a.begin(), a.end(), empty); lsen = new Node(); link(root, lsen, kth(root, 1)); rsen = new Node(); link(root, rsen, kth(root, root-\u0026gt;siz), 1); } Node* build2(int l, int r, int val, Node *pa) { if (l == r) return empty; int mid = (l + r) \u0026gt;\u0026gt; 1; Node *cur = new Node(pa, val); cur-\u0026gt;ch[0] = build2(l, mid, val, cur); cur-\u0026gt;mir = q[val].front(); q[val].pop(); cur-\u0026gt;ch[1] = build2(mid + 1, r, val, cur); pushup(cur); return cur; } void build2(Node *\u0026amp; root, int size, int val) { if (size == 0) return; root = build2(0, size, val, empty); Node *lsentry = new Node(empty, 0, lsen); link(root, lsentry, kth(root, 1)); Node *rsentry = new Node(empty, 0, rsen); link(root, rsentry, kth(root, root-\u0026gt;siz), 1); } int main() { empty = new Node(); empty-\u0026gt;siz = 0; empty-\u0026gt;ch[0] = empty-\u0026gt;ch[1] = empty-\u0026gt;pa = empty-\u0026gt;mir = empty; scanf(\u0026quot;%d\u0026quot;, \u0026amp;n); a.resize(n, 0); for (int i = 0; i \u0026lt; n; ++i) scanf(\u0026quot;%d\u0026quot;, \u0026amp;a[i]); rt.resize(n + 1); q.resize(n + 1); build1(rt[0], a); for (int i = 1; i \u0026lt;= n; ++i) build2(rt[i], q[i].size(), i); scanf(\u0026quot;%d\u0026quot;, \u0026amp;m); int ans = 0; while (m--) { int type, l, r; scanf(\u0026quot;%d%d%d\u0026quot;, \u0026amp;type, \u0026amp;l, \u0026amp;r); l = (l + ans - 1) % n + 1; r = (r + ans - 1) % n + 1; if (l \u0026gt; r) swap(l, r); if (type == 1) { if (l == r) continue; Node *x = split(rt[0], l, r); Node *y = kth(x, 1); Node *z = kth(x, x-\u0026gt;siz); int k = z-\u0026gt;val; x = get(rt[k], r); cut(rt[k], x); Node *qaq = rkle(rt[k], l); Node *qwq = rkge(rt[k], l + 1); makeroot(rt[k], qaq); Splay(qwq, qaq); link(rt[k], x, qwq); cut(rt[0], z); link(rt[0], z, y); } else { int k; scanf(\u0026quot;%d\u0026quot;, \u0026amp;k); k = (k + ans - 1) % n + 1; if (rt[k] == 0) { ans = 0; puts(\u0026quot;0\u0026quot;); continue; } Node *x = rkle(rt[k], l); Node *y = rkge(rt[k], r + 2); makeroot(rt[k], x); Splay(y, x); ans = y-\u0026gt;ch[0]-\u0026gt;siz; printf(\u0026quot;%d\\n\u0026quot;, ans); } } return 0; }  ","date":"2019-12-04T15:20:52+08:00","permalink":"https://ouuan.github.io/post/cf455d-serega-and-fun%E5%88%86%E5%9D%97-%E5%B9%B3%E8%A1%A1%E6%A0%91/","tags":["åˆ†å—","å¹³è¡¡æ ‘","æ•°æ®ç»“æ„"],"title":"CF455D Serega and Funï¼ˆåˆ†å— / å¹³è¡¡æ ‘ï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ CF\né¢˜æ„ç®€è¿° å®šä¹‰ä¸€ä¸ªâ€œå¶ç¯â€ä¸ºè¾¹æ•°ä¸ºå¶æ•°çš„å›è·¯ï¼ˆå›è·¯åˆè¢«ç§°ä½œâ€œè¾¹ç®€å•ç¯â€ï¼Œå³ä¸ç»è¿‡é‡å¤è¾¹ä¸”é¦–å°¾ç‚¹ç›¸åŒçš„é€”å¾„ï¼‰ã€‚\nç»™ä½ ä¸€å¼ ä¸å«â€œå¶ç¯â€çš„æ— å‘å›¾ã€‚ç§°ä¸€ä¸ªåŒºé—´æ˜¯â€œå¥½çš„â€ï¼Œå½“ä¸”ä»…å½“ç¼–å·åœ¨è¿™ä¸ªåŒºé—´ä¸­çš„ç‚¹çš„å¯¼å‡ºå­å›¾æ˜¯ä¸€å¼ äºŒåˆ†å›¾ã€‚\nå¤šç»„è¯¢é—®ï¼Œæ¯æ¬¡è¯¢é—®ä¸€ä¸ªç»™å®šåŒºé—´æœ‰å¤šå°‘ä¸ªå­åŒºé—´æ˜¯â€œå¥½çš„â€ã€‚\nç‚¹æ•°ã€è¾¹æ•°ã€è¯¢é—®æ•°å‡ä¸è¶…è¿‡ $3\\cdot 10^5$ ã€‚\nç®€è¦åšæ³• ç”±äºå›¾ä¸­æ²¡æœ‰å¶ç¯ï¼Œå®¹æ˜“æƒ³åˆ°ä¸€ä¸ªå­å›¾æ˜¯äºŒåˆ†å›¾ç­‰ä»·äºæ²¡æœ‰ç¯ï¼ˆå› ä¸ºäºŒåˆ†å›¾ç­‰ä»·äºæ²¡æœ‰å¥‡ç¯ï¼‰ã€‚\nä½†â€œæ²¡æœ‰å¶ç¯â€çš„ç”¨å¤„è¿œä¸æ­¢æ­¤ï¼šæ²¡æœ‰å¶ç¯è¿˜æ„å‘³ç€æ¯ä¸ªç‚¹æœ€å¤šå¤„äºä¸€ä¸ªç¯å†…ï¼ˆå¦åˆ™å–ä¸¤ä¸ªåŒ…å«åŒä¸€ä¸ªç‚¹çš„å¥‡ç¯ï¼ŒæŠŠé‡å¤çš„è¾¹å»æ‰ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªå¶ç¯ï¼‰ã€‚\né‚£ä¹ˆï¼Œæ‰¾å‡ºå›¾ä¸­çš„æ¯ä¸ªç¯çš„æœ€å°èŠ‚ç‚¹ç¼–å·å’Œæœ€å¤§èŠ‚ç‚¹ç¼–å·ï¼Œä»¥æœ€å°å€¼å’Œæœ€å¤§å€¼ä½œä¸ºå·¦å³ç«¯ç‚¹ï¼Œå°±å¯ä»¥å¾—åˆ°è‹¥å¹²æ¡çº¿æ®µã€‚è€Œä¸€ä¸ªåŒºé—´åˆæ³•å°±ç­‰ä»·äºå…¶ä¸åŒ…å«è¿™äº›çº¿æ®µä¸­çš„ä»»æ„ä¸€æ¡ã€‚\nç°åœ¨é—®é¢˜å·²ç»è½¬åŒ–æˆäº†ï¼šç»™ä½  $k$ æ¡çº¿æ®µ $\\{[c_i, d_i]\\}_{i=1}^k$ï¼Œ$q$ æ¬¡è¯¢é—®ï¼Œç¬¬ $i$ æ¬¡è¯¢é—®ç»™ä½ ä¸€ä¸ªåŒºé—´ $[l_i, r_i]$ï¼Œæ±‚ $[l_i, r_i]$ æœ‰å¤šå°‘ä¸ªå­åŒºé—´ä¸åŒ…å«è¿™ $k$ æ¡çº¿æ®µä¸­çš„ä»»æ„ä¸€æ¡ã€‚\né¦–å…ˆï¼Œå¯ä»¥è§‚å¯Ÿåˆ°ï¼Œè‹¥æœ‰ä¸€æ¡çº¿æ®µè¢«å¦ä¸€æ¡çº¿æ®µå®Œå…¨åŒ…å«ï¼ŒåŒ…å«å®ƒçš„è¿™æ¡çº¿æ®µå°±å¯ä»¥è¢«æ— è§†äº†ã€‚\nå»é™¤æ‰ä¸Šè¿°æ— ç”¨çº¿æ®µåï¼Œå‰©ä¸‹çš„çº¿æ®µä¸¤ä¸¤äº’ä¸åŒ…å«ï¼Œé‚£ä¹ˆå°†å®ƒä»¬æŒ‰å·¦ç«¯ç‚¹æ’åºï¼Œä¼šæ»¡è¶³ï¼š$\\forall 1\\le i\u0026lt; k, c_i\u0026lt; c_{i+1}, d_i\u0026lt; d_{i+1}$ ï¼ˆä¸å–ç­‰å·æ˜¯å› ä¸º $1\\sim n$ ä¸­çš„æ¯ä¸ªæ•°åœ¨ $c_{1..n}$ å’Œ $d_{1..n}$ ä¸­æœ€å¤šåªå‡ºç°ä¸€æ¬¡ï¼Œè€Œè¿™æ˜¯å› ä¸ºåœ¨åŸé¢˜æ„ä¸­æ¯ä¸ªç‚¹æœ€å¤šå¤„äºä¸€ä¸ªç¯å†…ï¼‰ã€‚\nå¦‚æœä¸ç®¡ $r_i$ çš„é™åˆ¶ï¼Œå¯¹äºæ¯ä¸ªå·¦ç«¯ç‚¹æ±‚ç­”æ¡ˆï¼Œç”»ä¸ªå›¾æ‰‹ç©ä¸€ä¸‹å¯ä»¥å‘ç°ï¼Œä»¥ $p$ ä¸ºå·¦ç«¯ç‚¹æ—¶ï¼Œåˆæ³•åŒºé—´çš„å³ç«¯ç‚¹æœ€å¤šåˆ° $\\min\\left(\\{d_j-1|c_j\\ge p\\}\\bigcup\\{n\\}\\right)$ ï¼Œå³ $p$ â€œå³è¾¹â€çš„ç¬¬ä¸€æ¡çº¿æ®µçš„å³ç«¯ç‚¹å‡ä¸€ï¼ˆä¸å­˜åœ¨åˆ™ä¸º $n$ï¼‰ã€‚æ¯ä¸ªå·¦ç«¯ç‚¹æ— è§†å³ç«¯ç‚¹é™åˆ¶çš„åˆæ³•åŒºé—´æ•°å¯ä»¥æ±‚ä¸ªå‰ç¼€å’Œï¼Œè€Œ $p$ â€œå³è¾¹â€çš„ç¬¬ä¸€æ¡çº¿æ®µå¯ä»¥äºŒåˆ†æ±‚å¾—ï¼Œä¹Ÿå¯ä»¥çº¿æ€§é¢„å¤„ç†å $O(1)$ æ±‚å¾—ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬å°±ä¼šåš $r_i=n$ çš„æƒ…å†µäº†ã€‚\nç„¶åè€ƒè™‘å¦‚ä½•å¤„ç† $r_i$ çš„é™åˆ¶ã€‚å¯¹ç§°åœ°ï¼ˆæŒ‡è¿™ä¸ªå¼å­å’Œä¸Šé¢é‚£ä¸ªå¼å­å‡ ä¹æ˜¯å¯¹ç§°çš„ï¼‰ï¼Œä»¤ $t=\\max\\left(\\{c_j|d_j\\le r_i\\}\\bigcup\\{0\\}\\right)$ï¼Œå³ $r_i$ â€œå·¦è¾¹â€çš„ç¬¬ä¸€æ¡çº¿æ®µçš„å·¦ç«¯ç‚¹ï¼ˆä¸å­˜åœ¨åˆ™ä¸º $0$ï¼‰ï¼Œé‚£ä¹ˆå¯¹äºä¸å°äº $t$ çš„å·¦ç«¯ç‚¹ï¼Œ$r_i$ è¿™ä¸ªé™åˆ¶æ˜¯æ— ç”¨çš„ï¼Œè€Œå¯¹äºå¤§äº $t$ çš„å·¦ç«¯ç‚¹ï¼Œå³ç«¯ç‚¹æœ€å¤šå¯ä»¥å–åˆ° $r_i$ ã€‚ $t$ åŒæ ·å¯ä»¥äºŒåˆ†æ±‚å¾—æˆ–è€…çº¿æ€§é¢„å¤„ç†å $O(1)$ æ±‚å¾—ï¼Œå°†å·¦ç«¯ç‚¹åˆ†æˆ $[l_i, t]$ å’Œ $[t+1, r_i]$ ä¸¤éƒ¨åˆ†ï¼Œå‰åŠéƒ¨åˆ†ç”¨å‰ç¼€å’Œè®¡ç®—ï¼ŒååŠéƒ¨åˆ†å³ä¸º $[t+1, r_i]$ çš„å­åŒºé—´æ•°ï¼Œç„¶åå°±åšå®Œäº†ã€‚å®ç°æ—¶æ³¨æ„ç‰¹åˆ¤ $t\u0026lt; l_i$ çš„æƒ…å†µã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef long long ll; typedef pair\u0026lt;int, int\u0026gt; pii; vector\u0026lt;int\u0026gt; pa, dfn, rt, uncut; vector\u0026lt;vector\u0026lt;int\u0026gt; \u0026gt; g; int n, m, q, dfntot; vector\u0026lt;ll\u0026gt; pre; vector\u0026lt;pii\u0026gt; s; void dfs(int u) { dfn[u] = ++dfntot; for (auto v : g[u]) { if (v == pa[u]) continue; if (!dfn[v]) { pa[v] = u; dfs(v); } else if (dfn[v] \u0026lt; dfn[u]) { int mn = u, mx = u, x = u; while (x != v) { x = pa[x]; mn = min(mn, x); mx = max(mx, x); } rt[mn] = mx; } } } int main() { scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;n, \u0026amp;m); g.resize(n + 1); pa.resize(n + 1, 0); pre.resize(n + 1, 0); dfn.resize(n + 1, 0); uncut.resize(n + 1, 0); rt.resize(n + 1, n + 1); for (int i = 1; i \u0026lt;= m; ++i) { int u, v; scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;u, \u0026amp;v); g[u].push_back(v); g[v].push_back(u); } for (int i = 1; i \u0026lt;= n; ++i) if (!dfn[i]) dfs(i); int mn = n; for (int i = n; i \u0026gt;= 1; --i) { mn = min(mn, rt[i]); if (rt[i] \u0026lt;= mn) s.push_back(pii(i, rt[i])); } reverse(s.begin(), s.end()); s.push_back(pii(n + 1, n + 1)); int p = 0, ban = s[0].second; for (int i = 1; i \u0026lt;= n; ++i) { if (i \u0026gt; s[p].first) ban = s[++p].second; pre[i] = pre[i - 1] + ban - i; uncut[i] = uncut[i - 1] + (i == s[uncut[i - 1]].second); } scanf(\u0026quot;%d\u0026quot;, \u0026amp;q); while (q--) { int l, r; scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;l, \u0026amp;r); int k = uncut[r]; if (k == 0 || s[k - 1].first \u0026lt; l) printf(\u0026quot;%I64d\\n\u0026quot;, (ll) (r - l + 1) * (r - l + 2) / 2); else printf(\u0026quot;%I64d\\n\u0026quot;, pre[s[k - 1].first] - pre[l - 1] + (ll) (r - s[k - 1].first) * (r - s[k - 1].first + 1) / 2); } return 0; } ","date":"2019-11-29T20:54:11+08:00","permalink":"https://ouuan.github.io/post/cf901c-bipartite-segments%E4%BA%8C%E5%88%86%E5%9B%BE/","tags":["äºŒåˆ†å›¾"],"title":"CF901C Bipartite Segmentsï¼ˆäºŒåˆ†å›¾ï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ CF\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€æ£µæ ‘ï¼Œæ¯ä¸ªç‚¹çš„é¢œè‰²ä¸ºä¸€ä¸ªåŒºé—´å†…çš„æ•´æ•°ï¼Œä¸€ç§æŸ“è‰²æ–¹æ¡ˆçš„æƒå€¼æ˜¯æ‰€æœ‰åŒè‰²æ— åºç‚¹å¯¹çš„è·ç¦»ä¹‹å’Œï¼Œæ±‚æ‰€æœ‰ä¸åŒæŸ“è‰²æ–¹æ¡ˆçš„æƒå€¼ä¹‹å’Œã€‚\nç‚¹æ•°ã€é¢œè‰²æ•°å‡ä¸è¶…è¿‡ $10^5$ ã€‚\nç®€è¦åšæ³• é¦–å…ˆæ˜¯ $O(n^2)$ åšæ³•ï¼šæŠŠè®¡ç®—æ€»å’Œè½¬åŒ–ä¸ºè®¡ç®—æœŸæœ›ï¼Œç„¶åå°±å¯ä»¥æšä¸¾ç‚¹å¯¹ï¼Œè®¡ç®—åŒè‰²æ¦‚ç‡ï¼Œä¹˜ä¸Šè·ç¦»ï¼Œæœ€åæŠŠæœŸæœ›ä¹˜ä¸Šæ–¹æ¡ˆæ•°å°±æ˜¯ç­”æ¡ˆã€‚è¿›è¡Œ $n$ æ¬¡ DFS è€Œä¸æ˜¯æ¯æ¬¡æ±‚ LCA å°±å¯ä»¥åšåˆ° $O(n^2)$ ã€‚\nç„¶åæ˜¯ $O(n\\log n\\log c)$ï¼ˆ$c$ ä¸ºé¢œè‰²æ•°ï¼‰åšæ³•ï¼šç‚¹åˆ†æ²»ï¼Œä»¤ $f(u, v)=\\max(0, \\min(r_u, r_v)-\\max(l_u, l_v)+1)$, ç‚¹ $u$ çš„è´¡çŒ®æ˜¯ $\\sum_{v}f(u, v)(dep_u+dep_v)(r_u-l_u+1)^{-1}(r_v-l_v+1)^{-1}$ï¼Œå³ $\\left(dep_u\\cdot(r_u-l_u+1)^{-1}\\right)\\cdot\\left(\\sum_{v}f(u, v)(r_v-l_v+1)^{-1}\\right)+(r_u-l_u+1)^{-1}\\cdot\\left(\\sum_{v}f(u, v)dep_v(r_v-l_v+1)^{-1}\\right)$ ï¼Œç”¨ä»¥é¢œè‰²ä¸ºä¸‹æ ‡ã€æ”¯æŒåŒºé—´åŠ /æŸ¥è¯¢åŒºé—´å’Œçš„çº¿æ®µæ ‘ç»´æŠ¤ $\\sum_{v}(r_v-l_v+1)^{-1}$ ä»¥åŠ $\\sum_{v}dep_v(r_v-l_v+1)^{-1}$ å³å¯ã€‚\nå¦‚æœä½ å†™çš„æ˜¯å…¶å®ƒ $O(n\\log n\\log c)$ åšæ³•ï¼Œå¦‚é“¾åˆ†æ²»ï¼ˆdsu on treeï¼‰ï¼Œæˆ–è€…ä½ çš„å¸¸æ•°æ¯”è¾ƒå°ï¼ˆæ¯”å¦‚ä½¿ç”¨æ ‘çŠ¶æ•°ç»„è€Œä¸æ˜¯çº¿æ®µæ ‘ï¼‰ï¼Œä½ å¯èƒ½å°±è¿‡äº†ã€‚\nå¦åˆ™ï¼Œä½ å¯èƒ½ TLE on 6 æˆ–è€… TLE on 14 ä¹‹ç±»çš„ã€‚\nä½†æ˜¯ï¼Œå¤§å¸¸æ•°é€‰æ‰‹å¹¶ä¸æ˜¯æ²¡æœ‰æ´»è·¯çš„ï¼Œå› ä¸ºè¿™é¢˜æœ‰ $O(n\\log n)$ åšæ³•ã€‚\nå…¶ä¸­ä¸€ç§ï¼Œæ˜¯ä½¿ç”¨å·®åˆ†ä»£æ›¿ä¸Šè¿°åšæ³•ä¸­çš„çº¿æ®µæ ‘ã€‚ä½†å¦‚æœåœ¨ç‚¹åˆ†æ²»å†…è¿›è¡Œæ¯”è¾ƒæ’åºï¼Œå¤æ‚åº¦æ˜¯ $O(n\\log^2 n)$ï¼ˆå°½ç®¡ç“¶é¢ˆéƒ¨åˆ†çš„å¸¸æ•°å¾ˆå°ï¼‰ï¼Œè§£å†³æ–¹æ³•æ˜¯åœ¨ç‚¹åˆ†æ²»çš„å¤–éƒ¨è¿›è¡Œä¸€æ¬¡æ’åºï¼Œç„¶ååœ¨å†…éƒ¨å°±å¯ä»¥çº¿æ€§åœ°å°†æ¯æ£µå­æ ‘çš„ä¿®æ”¹ä¸è¯¢é—®åˆ’åˆ†å¼€æ¥ã€‚\nâ€œåˆ’åˆ†â€æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåŒå…³é”®å­—æ’åºï¼Œç¬¬ä¸€å…³é”®å­—ä¸ºæ‰€åœ¨å­æ ‘çš„ç¼–å·ï¼Œç¬¬äºŒå…³é”®å­—ä¸ºä¿®æ”¹/è¯¢é—®åŸæœ¬çš„æ’åºæ–¹å¼ï¼Œåˆ©ç”¨åŸºæ•°æ’åºçš„æ€æƒ³ï¼Œç”±äºç¬¬äºŒå…³é”®å­—å·²ç»æœ‰åºï¼Œå¯¹ç¬¬ä¸€å…³é”®å­—è¿›è¡Œç¨³å®šæ’åºå³å¯ã€‚ä½¿ç”¨è®¡æ•°æ’åºå¯ä»¥åšåˆ°çº¿æ€§å¤æ‚åº¦ï¼Œæ€»å¤æ‚åº¦å°±æ˜¯ $O(n\\log n)$ ã€‚\nå‚è€ƒä»£ç  nlognlogc #ifndef OUUAN #pragma GCC optimize(\u0026quot;Ofast,no-stack-protector,unroll-loops,fast-math\u0026quot;) #endif #include\u0026lt;bits/stdc++.h\u0026gt; //#define int LoveLive //#define FAST_IOSTREAM 1 #define For(i,l,r)for(int i=(l),i##end=(r);i\u0026lt;=i##end;++i) #define FOR(i,r,l)for(int i=(r),i##end=(l);i\u0026gt;=i##end;--i) #define SON(i,u)for(int i=head[u];i;i=nxt[i]) #define ms(a,x)memset(a,x,sizeof(a)) #define fi first #define se second #define pb emplace_back #define pq priority_queue #define isinf(x)(x\u0026gt;=INF?-1:x) #define y1 why_is_there_a_function_called_y1 #define DEBUG(x)cerr\u0026lt;\u0026lt;(#x)\u0026lt;\u0026lt;\u0026quot;:\u0026quot;\u0026lt;\u0026lt;x\u0026lt;\u0026lt;endl using namespace std;typedef long long LoveLive;typedef pair\u0026lt;int,int\u0026gt;pii;typedef vector\u0026lt;int\u0026gt;vi;typedef long double ld;const double inf=1e121;const double eps=1e-10;mt19937 rng(chrono::steady_clock::now().time_since_epoch().count());int randint(int l,int r){int out=rng()%(r-l+1)+l;return out\u0026gt;=l?out:out+r-l+1;} #ifdef int const int INF=0x3f3f3f3f3f3f3f3fll; #else const int INF=0x3f3f3f3f;typedef long long ll; #endif #ifdef FAST_IOSTREAM #define br cout\u0026lt;\u0026lt;'\\n' #define sp cout\u0026lt;\u0026lt;' ' long long read(){long long x;cin\u0026gt;\u0026gt;x;return x;}template\u0026lt;typename T\u0026gt;void read(T\u0026amp;x){cin\u0026gt;\u0026gt;x;}template\u0026lt;typename T\u0026gt;void write(const T\u0026amp;x){cout\u0026lt;\u0026lt;x;} #else #define br putchar('\\n') #define sp putchar(' ') template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;!is_integral\u0026lt;T\u0026gt;::value,void\u0026gt;::type read(T\u0026amp;x){cin\u0026gt;\u0026gt;x;}long long read(){char c;long long out=0,f=1;for(c=getchar();!isdigit(c)\u0026amp;\u0026amp;c!='-';c=getchar());if(c=='-'){f=-1;c=getchar();}for(;isdigit(c);c=getchar())out=(out\u0026lt;\u0026lt;3)+(out\u0026lt;\u0026lt;1)+c-'0';return out*f;}template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;is_integral\u0026lt;T\u0026gt;::value,T\u0026gt;::type read(T\u0026amp;x){char c;T f=1;x=0;for(c=getchar();!isdigit(c)\u0026amp;\u0026amp;c!='-';c=getchar());if(c=='-'){f=-1;c=getchar();}for(;isdigit(c);c=getchar())x=(x\u0026lt;\u0026lt;3)+(x\u0026lt;\u0026lt;1)+c-'0';return x*=f;}char read(char\u0026amp;x){for(x=getchar();isspace(x);x=getchar());return x;}double read(double\u0026amp;x){scanf(\u0026quot;%lf\u0026quot;,\u0026amp;x);return x;}ld read(ld\u0026amp;x){scanf(\u0026quot;%Lf\u0026quot;,\u0026amp;x);return x;}template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;!is_integral\u0026lt;T\u0026gt;::value,void\u0026gt;::type write(const T\u0026amp;x){cout\u0026lt;\u0026lt;x;}template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;is_integral\u0026lt;T\u0026gt;::value,void\u0026gt;::type write(const T\u0026amp;x){if(x\u0026lt;0){putchar('-');write(-x);return;}if(x\u0026gt;9)write(x/10);putchar(x%10+'0');}void write(const char\u0026amp;x){putchar(x);}void write(const double\u0026amp;x){printf(\u0026quot;%.10lf\u0026quot;,x);}void write(const ld\u0026amp;x){printf(\u0026quot;%.10Lf\u0026quot;,x);} #endif template\u0026lt;typename T,typename...Args\u0026gt;void read(T\u0026amp;x,Args\u0026amp;...args){read(x);read(args...);}template\u0026lt;typename OutputIt,typename=typename enable_if\u0026lt;is_same\u0026lt;output_iterator_tag,typename iterator_traits\u0026lt;OutputIt\u0026gt;::iterator_category\u0026gt;::value||(is_base_of\u0026lt;forward_iterator_tag,typename iterator_traits\u0026lt;OutputIt\u0026gt;::iterator_category\u0026gt;::value\u0026amp;\u0026amp;!is_const\u0026lt;OutputIt\u0026gt;::value)\u0026gt;::type\u0026gt;void read(OutputIt __first,OutputIt __last){for(;__first!=__last;++__first)read(*__first);}template\u0026lt;typename InputIt,typename=typename enable_if\u0026lt;is_base_of\u0026lt;input_iterator_tag,typename iterator_traits\u0026lt;InputIt\u0026gt;::iterator_category\u0026gt;::value\u0026gt;::type\u0026gt;void wts(InputIt __first,InputIt __last){bool isFirst=true;for(;__first!=__last;++__first){if(isFirst)isFirst=false;else sp;write(*__first);}br;}template\u0026lt;typename InputIt,typename=typename enable_if\u0026lt;is_base_of\u0026lt;input_iterator_tag,typename iterator_traits\u0026lt;InputIt\u0026gt;::iterator_category\u0026gt;::value\u0026gt;::type\u0026gt;void wtb(InputIt __first,InputIt __last){for(;__first!=__last;++__first){write(*__first);br;}}template\u0026lt;typename T\u0026gt;void wts(const T\u0026amp;x){write(x);sp;}template\u0026lt;typename T\u0026gt;void wtb(const T\u0026amp;x){write(x);br;}template\u0026lt;typename T\u0026gt;void wte(const T\u0026amp;x){write(x);exit(0);}template\u0026lt;typename T,typename...Args\u0026gt;void wts(const T\u0026amp;x,Args...args){wts(x);wts(args...);}template\u0026lt;typename T,typename...Args\u0026gt;void wtb(const T\u0026amp;x,Args...args){wts(x);wtb(args...);}template\u0026lt;typename T,typename...Args\u0026gt;void wte(const T\u0026amp;x,Args...args){wts(x);wte(args...);}template\u0026lt;typename T\u0026gt;inline bool up(T\u0026amp;x,const T\u0026amp;y){return x\u0026lt;y?x=y,1:0;}template\u0026lt;typename T\u0026gt;inline bool dn(T\u0026amp;x,const T\u0026amp;y){return y\u0026lt;x?x=y,1:0;}template\u0026lt;typename T\u0026gt;inline bool inRange(const T\u0026amp;x,const T\u0026amp;l,const T\u0026amp;r){return!(x\u0026lt;l)\u0026amp;\u0026amp;!(r\u0026lt;x);}template\u0026lt;typename valueType,typename tagType\u0026gt;class segmentTreeNode{public:int id,left,right;valueType val;tagType tag;};template\u0026lt;typename valueType, typename tagType, valueType(*merge)(valueType,valueType), void(*update)(segmentTreeNode\u0026lt;valueType,tagType\u0026gt;\u0026amp;,tagType)\u0026gt;class segmentTree{private:std::vector\u0026lt;segmentTreeNode\u0026lt;valueType,tagType\u0026gt;\u0026gt;nodes;int leftRange,rightRange;valueType valueZero;tagType tagZero;void pushup(int cur){nodes[cur].val=merge(nodes[cur\u0026lt;\u0026lt;1].val,nodes[cur\u0026lt;\u0026lt;1|1].val);}void pushdown(int cur){update(nodes[cur\u0026lt;\u0026lt;1],nodes[cur].tag);update(nodes[cur\u0026lt;\u0026lt;1|1],nodes[cur].tag);nodes[cur].tag=tagZero;}void build(int cur,int l,int r,const std::vector\u0026lt;valueType\u0026gt;\u0026amp;initValue){nodes[cur].id=cur;nodes[cur].left=l;nodes[cur].right=r;nodes[cur].tag=tagZero;if(l==r-1)nodes[cur].val=initValue[l-leftRange];else{build(cur\u0026lt;\u0026lt;1,l,(l+r)\u0026gt;\u0026gt;1,initValue);build(cur\u0026lt;\u0026lt;1|1,(l+r)\u0026gt;\u0026gt;1,r,initValue);pushup(cur);}}void init(const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,const valueType\u0026amp;_valueZero,const tagType\u0026amp;_tagZero){valueZero=_valueZero;tagZero=_tagZero;nodes.resize((rightRange-leftRange)\u0026lt;\u0026lt;2);build(1,leftRange,rightRange,_initValue);}void modify(int cur,int l,int r,int L,int R,const tagType\u0026amp;tag){if(l\u0026gt;=R||r\u0026lt;=L)return;if(L\u0026lt;=l\u0026amp;\u0026amp;r\u0026lt;=R)update(nodes[cur],tag);else{pushdown(cur);modify(cur\u0026lt;\u0026lt;1,l,(l+r)\u0026gt;\u0026gt;1,L,R,tag);modify(cur\u0026lt;\u0026lt;1|1,(l+r)\u0026gt;\u0026gt;1,r,L,R,tag);pushup(cur);}}valueType query(int cur,int l,int r,int L,int R){if(l\u0026gt;=R||r\u0026lt;=L)return valueZero;if(L\u0026lt;=l\u0026amp;\u0026amp;r\u0026lt;=R)return nodes[cur].val;pushdown(cur);return merge(query(cur\u0026lt;\u0026lt;1,l,(l+r)\u0026gt;\u0026gt;1,L,R), query(cur\u0026lt;\u0026lt;1|1,(l+r)\u0026gt;\u0026gt;1,r,L,R));}public:segmentTree(){}segmentTree(int _leftRange,int _rightRange,const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,const valueType\u0026amp;_valueZero,const tagType\u0026amp;_tagZero){leftRange=_leftRange;rightRange=_rightRange;init(_initValue,_valueZero,_tagZero);}segmentTree(int size,const std::vector\u0026lt;valueType\u0026gt;\u0026amp;_initValue,const valueType\u0026amp;_valueZero,const tagType\u0026amp;_tagZero){leftRange=1;rightRange=size+1;init(_initValue,_valueZero,_tagZero);}void modify(int l,int r,const tagType\u0026amp;tag){modify(1,leftRange,rightRange,l,r,tag);}void modify(int p,const tagType\u0026amp;tag){modify(p,p+1,tag);}valueType query(int l,int r){return query(1,leftRange,rightRange,l,r);}valueType query(int p){return query(p,p+1);}};class maxFlow{private:typedef long long ll;std::queue\u0026lt;int\u0026gt;q;std::vector\u0026lt;int\u0026gt;head,cur,nxt,to,dep;std::vector\u0026lt;ll\u0026gt;cap;public:maxFlow(int _n=0){init(_n);}void init(int _n){head.clear();head.resize(_n+1,0);nxt.resize(2);to.resize(2);cap.resize(2);}void init(){init(head.size()-1);}void add(int u,int v,ll w){nxt.push_back(head[u]);head[u]=to.size();to.push_back(v);cap.push_back(w);}void Add(int u,int v,ll w){add(u,v,w);add(v,u,0);}void del(int x){cap[x\u0026lt;\u0026lt;1]=cap[x\u0026lt;\u0026lt;1|1]=0;}bool bfs(int s,int t){dep.clear();dep.resize(head.size(),-1);dep[s]=0;q.push(s);while(!q.empty()){int u=q.front();q.pop();for(int i=head[u];i;i=nxt[i]){int v=to[i];ll w=cap[i];if(w\u0026gt;0\u0026amp;\u0026amp;dep[v]==-1){dep[v]=dep[u]+1;q.push(v);}}}return ~dep[t];}ll dfs(int u,ll flow,int t){if(dep[u]==dep[t])return u==t?flow:0;ll out=0;for(int\u0026amp;i=cur[u];i;i=nxt[i]){int v=to[i];ll w=cap[i];if(w\u0026gt;0\u0026amp;\u0026amp;dep[v]==dep[u]+1){ll f=dfs(v,std::min(w,flow-out),t);cap[i]-=f;cap[i ^ 1]+=f;out+=f;if(out==flow)return out;}}return out;}ll maxflow(int s,int t){ll out=0;while(bfs(s,t)){cur=head;out+=dfs(s,0x7fffffffffffffffll,t);}return out;}ll getflow(int x)const{return cap[x\u0026lt;\u0026lt;1|1];}};struct customHash{static uint64_t splitmix64(uint64_t x){x+=0x9e3779b97f4a7c15;x=(x ^(x\u0026gt;\u0026gt;30))*0xbf58476d1ce4e5b9;x=(x ^(x\u0026gt;\u0026gt;27))*0x94d049bb133111eb;return x ^(x\u0026gt;\u0026gt;31);}size_t operator()(uint64_t x)const{static const uint64_t FIXED_RANDOM=rng();return splitmix64(x+FIXED_RANDOM);}}; typedef pair\u0026lt;bool, pii\u0026gt; pbii; const int W = 100000; const int mod = (1e9 + 7//, 998244353 ); vector\u0026lt;vi\u0026gt; g; vector\u0026lt;bool\u0026gt; vis; int n, tsiz, rt, ans; vi l, r, siz, wt, inv; int qpow(int x, int y) { int out = 1; while (y) { if (y \u0026amp; 1) out = (ll) out * x % mod; x = (ll) x * x % mod; y \u0026gt;\u0026gt;= 1; } return out; } int modadd(int x, int y) { return (x += y) \u0026gt;= mod ? x - mod : x; } pii merge(pii x, pii y) { return pii(modadd(x.fi, y.fi), modadd(x.se, y.se)); } void update(segmentTreeNode\u0026lt;pii, pbii\u0026gt;\u0026amp; u, pbii x) { if (x.first) { u.tag = pbii(true, pii(0, 0)); u.val = pii(0, 0); } else if (x.se == pii(0, 0)) return; u.tag.se = merge(u.tag.se, x.se); u.val.fi = (u.val.fi + (ll) x.se.fi * (u.right - u.left)) % mod; u.val.se = (u.val.se + (ll) x.se.se * (u.right - u.left)) % mod; } segmentTree\u0026lt;pii, pbii, merge, update\u0026gt; t(W, vector\u0026lt;pii\u0026gt;(W, pii(0, 0)), pii(0, 0), pbii(false, pii(0, 0))); void getroot(int u, int pa) { siz[u] = wt[u] = 1; for (auto v : g[u]) { if (v == pa || vis[v]) continue; getroot(v, u); siz[u] += siz[v]; up(wt[u], siz[v]); } up(wt[u], tsiz - siz[u]); if (!rt || wt[u] \u0026lt; wt[rt]) rt = u; } void calc(int u, int pa, int dep) { auto res = t.query(l[u], r[u] + 1); ans = (ans + (ll) inv[u] * dep % mod * res.fi + (ll) inv[u] * res.se) % mod; for (auto v : g[u]) { if (v == pa || vis[v]) continue; calc(v, u, dep + 1); } } void insert(int u, int pa, int dep) { t.modify(l[u], r[u] + 1, pbii(false, pii(inv[u], (ll) inv[u] * dep % mod))); for (auto v : g[u]) { if (v == pa || vis[v]) continue; insert(v, u, dep + 1); } } void solve(int u) { vis[u] = true; t.modify(1, W + 1, pbii(true, pii(0, 0))); t.modify(l[u], r[u] + 1, pbii(false, pii(inv[u], 0))); for (auto v : g[u]) { if (vis[v]) continue; calc(v, u, 1); insert(v, u, 1); } for (auto v : g[u]) { if (vis[v]) continue; rt = 0; tsiz = siz[v]; getroot(v, u); solve(rt); } } signed main() { #ifdef FAST_IOSTREAM cin.sync_with_stdio(false); cin.tie(0); #endif read(n); l.resize(n + 1); g.resize(n + 1); vis.resize(n + 1, false); r = wt = siz = inv = l; For (i, 1, n) { read(l[i], r[i]); inv[i] = qpow(r[i] - l[i] + 1, mod - 2); } For (i, 2, n) { int u, v; read(u, v); g[u].pb(v); g[v].pb(u); } tsiz = n; getroot(1, 0); solve(rt); for (int i = 1; i \u0026lt;= n; ++i) ans = (ll) ans * (r[i] - l[i] + 1) % mod; cout \u0026lt;\u0026lt; ans; return 0; }   nlogn#1 #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef long long ll; const int mod = 1e9 + 7; int qpow(int x, int y) { int out = 1; while (y) { if (y \u0026amp; 1) out = (ll) out * x % mod; x = (ll) x * x % mod; y \u0026gt;\u0026gt;= 1; } return out; } vector\u0026lt;bool\u0026gt; vis; int n, tsiz, rt, ans; vector\u0026lt;vector\u0026lt;int\u0026gt; \u0026gt; g; vector\u0026lt;int\u0026gt; siz, wt, bel, dep, inv; struct Modification { int id, p, inv, l; Modification(int _id, int _p, int _inv, int _l): id(_id), p(_p), inv(_inv), l(_l) {} bool operator\u0026lt;(const Modification\u0026amp; b) const { return p \u0026lt; b.p; } int k1() const { return inv; } int b1() const { return p == l ? (ll) (1 - l + mod) * k1() % mod : (ll) (mod - p + 1) * k1() % mod; } int k2() const { return (ll) inv * dep[id] % mod; } int b2() const { return p == l ? (ll) (1 - l + mod) * k2() % mod : (ll) (mod - p + 1) * k2() % mod; } }; struct Query { int id, p, inv; Query(int _id, int _p, int _inv): id(_id), p(_p), inv(_inv) {} bool operator\u0026lt;(const Query\u0026amp; b) const { return p \u0026lt; b.p; } void calc(int x1, int x2, int type) const { ans = (ans + (ll) type * inv * ((ll) dep[id] * x1 % mod + x2) % mod + mod) % mod; } }; void getroot(int u, int pa) { siz[u] = wt[u] = 1; for (auto v : g[u]) { if (v == pa || vis[v]) continue; getroot(v, u); siz[u] += siz[v]; wt[u] = max(wt[u], siz[v]); } wt[u] = max(wt[u], tsiz - siz[u]); if (!rt || wt[u] \u0026lt; wt[rt]) rt = u; } void calc(const vector\u0026lt;Modification\u0026gt;\u0026amp; ms, const vector\u0026lt;Query\u0026gt;\u0026amp; qs, int type) { int k1 = 0, b1 = 0, k2 = 0, b2 = 0, i = 0; for (auto q : qs) { while (i \u0026lt; ms.size() \u0026amp;\u0026amp; ms[i].p \u0026lt;= q.p) { k1 = (k1 + ms[i].k1()) % mod; b1 = (b1 + ms[i].b1()) % mod; k2 = (k2 + ms[i].k2()) % mod; b2 = (b2 + ms[i].b2()) % mod; ++i; } q.calc(((ll) k1 * q.p + b1) % mod, ((ll) k2 * q.p + b2) % mod, type); } } void dfs(int u, int pa) { for (auto v : g[u]) { if (v == pa || vis[v]) continue; dep[v] = dep[u] + 1; bel[v] = bel[u]; dfs(v, u); } } void solve(int u, vector\u0026lt;Modification\u0026gt;\u0026amp; ms, vector\u0026lt;Query\u0026gt;\u0026amp; qs) { vis[u] = true; vector\u0026lt;vector\u0026lt;Query\u0026gt; \u0026gt; qson(1, vector\u0026lt;Query\u0026gt;()); vector\u0026lt;vector\u0026lt;Modification\u0026gt; \u0026gt; mson(1, vector\u0026lt;Modification\u0026gt;()); for (auto v : g[u]) { if (vis[v]) continue; mson.push_back(vector\u0026lt;Modification\u0026gt;()); qson.push_back(vector\u0026lt;Query\u0026gt;()); bel[v] = mson.size() - 1; dep[v] = 1; dfs(v, u); } bel[u] = dep[u] = 0; calc(ms, qs, 1); for (auto m : ms) mson[bel[m.id]].push_back(m); for (auto q : qs) qson[bel[q.id]].push_back(q); vector\u0026lt;Modification\u0026gt;().swap(ms); // free memory, the memory complexity is O(n) instead of O(nlogn) because of these two lines vector\u0026lt;Query\u0026gt;().swap(qs); for (auto v : g[u]) { if (vis[v]) continue; calc(mson[bel[v]], qson[bel[v]], -1); tsiz = siz[v]; rt = 0; getroot(v, u); solve(rt, mson[bel[v]], qson[bel[v]]); } } int main() { scanf(\u0026quot;%d\u0026quot;, \u0026amp;n); g.resize(n + 1); siz.resize(n + 1, 0); vis.resize(n + 1, false); wt = bel = dep = inv = siz; vector\u0026lt;Modification\u0026gt; ms; vector\u0026lt;Query\u0026gt; qs; int mul = (mod + 1) / 2; for (int i = 1; i \u0026lt;= n; ++i) { int l, r; scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;l, \u0026amp;r); mul = (ll) mul * (r - l + 1) % mod; inv[i] = qpow(r - l + 1, mod - 2); ms.push_back(Modification(i, l, inv[i], l)); ms.push_back(Modification(i, r + 1, mod - inv[i], l)); qs.push_back(Query(i, l - 1, mod - inv[i])); qs.push_back(Query(i, r, inv[i])); } for (int i = 1; i \u0026lt; n; ++i) { int u, v; scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;u, \u0026amp;v); g[u].push_back(v); g[v].push_back(u); } sort(ms.begin(), ms.end()); sort(qs.begin(), qs.end()); tsiz = n; getroot(1, 0); solve(rt, ms, qs); cout \u0026lt;\u0026lt; (ll) ans * mul % mod; return 0; }   nlogn#2 #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef long long ll; const int mod = 1e9 + 7; static unsigned fast_mod(uint64_t x) { #if !defined(_WIN32) || defined(_WIN64) return x % mod; #endif // Optimized mod for Codeforces 32-bit machines. // x must be less than 2^32 * m for this to work, so that x / m fits in a 32-bit integer. unsigned x_high = x \u0026gt;\u0026gt; 32, x_low = (unsigned) x; unsigned quot, rem; asm(\u0026quot;divl %4\\n\u0026quot; : \u0026quot;=a\u0026quot; (quot), \u0026quot;=d\u0026quot; (rem) : \u0026quot;d\u0026quot; (x_high), \u0026quot;a\u0026quot; (x_low), \u0026quot;r\u0026quot; (mod)); return rem; } int modadd(int x, int y) { return (x += y) \u0026gt;= mod ? x - mod : x; } int qpow(int x, int y) { int out = 1; while (y) { if (y \u0026amp; 1) out = fast_mod((ll) out * x); x = fast_mod((ll) x * x); y \u0026gt;\u0026gt;= 1; } return out; } vector\u0026lt;bool\u0026gt; vis; int n, tsiz, rt, ans; vector\u0026lt;vector\u0026lt;int\u0026gt; \u0026gt; g; vector\u0026lt;int\u0026gt; siz, wt, bel, dep, inv, cnt, ma, mb, qa, qb; struct Modification { int id, p, inv, l; Modification(int _id, int _p, int _inv, int _l): id(_id), p(_p), inv(_inv), l(_l) {} bool operator\u0026lt;(const Modification\u0026amp; b) const { return p \u0026lt; b.p; } int k1() const { return inv; } int b1() const { return p == l ? fast_mod((ll) (1 - l + mod) * k1()) : fast_mod((ll) (mod - p + 1) * k1()); } int k2() const { return (ll) inv * dep[id] % mod; } int b2() const { return p == l ? fast_mod((ll) (1 - l + mod) * k2()) : fast_mod((ll) (mod - p + 1) * k2()); } }; vector\u0026lt;Modification\u0026gt; ms; struct Query { int id, p, inv; Query(int _id, int _p, int _inv): id(_id), p(_p), inv(_inv) {} bool operator\u0026lt;(const Query\u0026amp; b) const { return p \u0026lt; b.p; } void calc(int x1, int x2, int type) const { ans = fast_mod(ans + type * fast_mod((ll) inv * (fast_mod((ll) dep[id] * x1 + x2))) + mod); } }; vector\u0026lt;Query\u0026gt; qs; void getroot(int u, int pa) { siz[u] = wt[u] = 1; for (auto v : g[u]) { if (v == pa || vis[v]) continue; getroot(v, u); siz[u] += siz[v]; wt[u] = max(wt[u], siz[v]); } wt[u] = max(wt[u], tsiz - siz[u]); if (!rt || wt[u] \u0026lt; wt[rt]) rt = u; } void calc(int l, int r, int type) { int k1 = 0, b1 = 0, k2 = 0, b2 = 0, i = l; for (int j = l; j \u0026lt;= r; ++j) { Query\u0026amp; q = qs[qa[j]]; while (i \u0026lt;= r) { Modification\u0026amp; m = ms[ma[i]]; if (m.p \u0026gt; q.p) break; k1 = modadd(k1, m.k1()); b1 = modadd(b1, m.b1()); k2 = modadd(k2, m.k2()); b2 = modadd(b2, m.b2()); ++i; } q.calc(fast_mod((ll) k1 * q.p + b1), fast_mod((ll) k2 * q.p + b2), type); } } void dfs(int u, int pa) { cnt[bel[u]] += 2; for (auto v : g[u]) { if (v == pa || vis[v]) continue; dep[v] = dep[u] + 1; bel[v] = bel[u]; dfs(v, u); } } void solve(int u, int l, int r) { vis[u] = true; int soncnt = bel[u] = dep[u] = 0; cnt[0] = l + 1; for (auto v : g[u]) { if (vis[v]) continue; bel[v] = ++soncnt; cnt[bel[v]] = cnt[bel[v] - 1]; dep[v] = 1; dfs(v, u); } calc(l, r, 1); vector\u0026lt;int\u0026gt; cnt2(cnt.begin(), cnt.begin() + soncnt + 1); for (int i = r; i \u0026gt;= l; --i) mb[cnt2[bel[ms[ma[i]].id]]--] = ma[i]; for (int i = l; i \u0026lt;= r; ++i) ma[i] = mb[i]; for (int i = 0; i \u0026lt;= soncnt; ++i) cnt2[i] = cnt[i]; for (int i = r; i \u0026gt;= l; --i) qb[cnt2[bel[qs[qa[i]].id]]--] = qa[i]; for (int i = l; i \u0026lt;= r; ++i) qa[i] = qb[i]; for (int i = 0; i \u0026lt;= soncnt; ++i) cnt2[i] = cnt[i]; for (auto v : g[u]) { if (vis[v]) continue; calc(cnt2[bel[v] - 1] + 1, cnt2[bel[v]], -1); tsiz = siz[v]; rt = 0; getroot(v, u); solve(rt, cnt2[bel[v] - 1] + 1, cnt2[bel[v]]); } } int main() { scanf(\u0026quot;%d\u0026quot;, \u0026amp;n); g.resize(n + 1); siz.resize(n + 1, 0); vis.resize(n + 1, false); wt = bel = dep = inv = cnt = siz; int mul = (mod + 1) / 2; for (int i = 1; i \u0026lt;= n; ++i) { int l, r; scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;l, \u0026amp;r); mul = fast_mod((ll) mul * (r - l + 1)); inv[i] = qpow(r - l + 1, mod - 2); ms.push_back(Modification(i, l, inv[i], l)); ms.push_back(Modification(i, r + 1, mod - inv[i], l)); qs.push_back(Query(i, l - 1, mod - inv[i])); qs.push_back(Query(i, r, inv[i])); } for (int i = 1; i \u0026lt; n; ++i) { int u, v; scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;u, \u0026amp;v); g[u].push_back(v); g[v].push_back(u); } ma.resize(n * 2); mb = qa = qb = ma; for (int i = 0; i \u0026lt; n * 2; ++i) ma[i] = qa[i] = i; sort(ma.begin(), ma.end(), [](int x, int y) { return ms[x] \u0026lt; ms[y]; }); sort(qa.begin(), qa.end(), [](int x, int y) { return qs[x] \u0026lt; qs[y]; }); tsiz = n; getroot(1, 0); solve(rt, 0, 2 * n - 1); cout \u0026lt;\u0026lt; fast_mod((ll) ans * mul); return 0; }  ","date":"2019-11-29T14:00:53+08:00","permalink":"https://ouuan.github.io/post/cf1260f-colored-tree%E7%82%B9%E5%88%86%E6%B2%BB%E5%B7%AE%E5%88%86%E5%9F%BA%E6%95%B0%E6%8E%92%E5%BA%8F/","tags":["ç‚¹åˆ†æ²»","å·®åˆ†","åŸºæ•°æ’åº","æ•°æ®ç»“æ„","æ¦‚ç‡æœŸæœ›","åˆ†æ²»"],"title":"CF1260F Colored Treeï¼ˆç‚¹åˆ†æ²»ï¼Œå·®åˆ†ï¼ŒåŸºæ•°æ’åºï¼‰"},{"categories":["æŠ€æœ¯"],"contents":"æœ¬æ–‡è®²çš„æ˜¯è‡ªå·±æ­å»ºçš„ UOJ å¦‚ä½•è§£å†³æ— é™ waitingï¼Œè€Œä¸æ˜¯ https://uoj.ac å¦‚ä½•è§£å†³æ— é™ waitingï¼ˆåè€…å¤§æ¦‚è¦è”ç³» vfk..åæ­£æˆ‘æ˜¯æ²¡é‡åˆ°è¿‡ï¼‰ã€‚\nè¿™ä¸ªé—®é¢˜å›°æ‰°äº†æˆ‘å¾ˆä¹…..\nç„¶ååœ¨è‹¥å¹²æ¬¡æ•°æ®å›æ»šåï¼Œæˆ‘å‘ç°æ¯æ¬¡éƒ½æ˜¯ä½¿ç”¨ git åå‡ºç°æ— é™ waitingã€‚è¿›è€Œå‘ç°æ˜¯åœ¨ git reset --hard åå‘ç”Ÿè¿™ç§æƒ…å†µã€‚\næœ€åï¼Œæˆ‘å‘ç°äº†é—®é¢˜çš„çœŸæ­£åŸå› ï¼šgit æŠŠæŸäº›æ–‡ä»¶çš„æƒé™æ”¹äº†ï¼Œå¯¼è‡´ docker å¯åŠ¨æ—¶æ— æ³•è¿è¡Œ judgerã€‚\nè§£å†³æ–¹æ³•ï¼š\ndocker exec -it uoj chmod +x /opt/uoj/judger/judge_client docker exec -it uoj chown local_main_judger: /opt/uoj/judger/log/judger.log docker restart uoj  ï¼ˆå½“ç„¶ï¼Œå¦‚æœä½ æ”¹äº† docker å®¹å™¨å / judger ç”¨æˆ·åï¼Œç”šè‡³ç½‘é¡µå’Œ judger ä¸æ˜¯åŒä¸€ä¸ª dockerï¼Œå°±ä¸èƒ½ç…§æ¬ä¸Šé¢çš„å‘½ä»¤äº†ã€‚ï¼‰\n","date":"2019-11-28T20:10:41+08:00","permalink":"https://ouuan.github.io/post/uoj-%E6%97%A0%E9%99%90-waiting-%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/","tags":["OJ"],"title":"UOJ æ— é™ waiting çš„è§£å†³æ–¹æ³•"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ UOJ\næ´›è°·\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€æ£µæ ‘ï¼Œ$i$ å·ç‚¹æœ‰ $p_i$ã€$q_i$ å’Œ $l_i$ ä¸‰ä¸ªå±æ€§ï¼Œæ¯æ¡è¾¹æœ‰ç»™å®šçš„é•¿åº¦ã€‚\nä»ä¸€ä¸ªç‚¹å‡ºå‘å¯ä»¥åˆ°è¾¾å…¶ç¥–å…ˆä¸­ä¸å…¶è·ç¦»ä¸è¶…è¿‡ $l_i$ çš„ç‚¹ï¼Œè´¹ç”¨ä¸º $p_i\\cdot dis+q_i$ï¼Œæ±‚æ¯ä¸ªç‚¹åˆ°æ ¹çš„æœ€å°è´¹ç”¨ã€‚\nç‚¹æ•°ä¸è¶…è¿‡ $2\\cdot 10^5$ ã€‚\nç®€è¦åšæ³• ç”¨ $dis[i]$ è¡¨ç¤º$i$ åˆ°æ ¹çš„è·ç¦»ï¼Œ$f_i$ è¡¨ç¤ºç‚¹ $i$ çš„ç­”æ¡ˆï¼Œé‚£ä¹ˆï¼š $$ f_i=\\min\\limits_{\\begin{array}{cc}j\\text{ is an ancestor of }i\\\\dis[j]\\ge dis[i]-l_i\\end{array}}\\{f_j-p_i dis[j]+p_i dis[i]+q[i]\\} $$ è¿™ä¸ªä¸œè¥¿å¯ä»¥ç”¨æ–œç‡ä¼˜åŒ–ï¼Œç„¶è€Œæœ‰ä¸‰ä¸ªä¸å¤ªå‹å¥½çš„åœ°æ–¹ï¼š\n è¿™æ˜¯æ£µæ ‘ï¼› æœ‰ $dis[j]\\ge dis[i]-l_i$ è¿™ä¸ªé™åˆ¶ï¼› $p_i$ ä¸æ˜¯å•è°ƒçš„ã€‚  ç±»ä¼¼äº ã€ŒNOI2007ã€è´§å¸å…‘æ¢ ï¼Œå¯ä»¥ç”¨ç±»ä¼¼äº CDQ åˆ†æ²»çš„ç‚¹åˆ†æ²»æ¥è§£å†³ä¸Šè¿°ä¸‰ä¸ªé—®é¢˜ã€‚ï¼ˆç„¶è€Œæˆ‘ä¸ä»…æ²¡åšè¿‡è´§å¸å…‘æ¢ï¼Œè€Œä¸”æƒ³åˆ°è¿™ä¸ªåšæ³•çš„æ—¶å€™éƒ½æ²¡æ„è¯†åˆ°å®ƒæ˜¯ CDQ åˆ†æ²»ï¼Œåªæ˜¯åœ¨ å››è‰²çš„ NOI ä¸­å¬è¯´äº†è¿™é¢˜å¯ä»¥ç‚¹åˆ†æ²»ç„¶åå°± yy å‡ºæ¥äº†..ï¼‰\nå…·ä½“æ¥è¯´ï¼Œæ¯ä¸ªè½¬ç§»éƒ½å¯ä»¥çœ‹æˆä¸€æ¡è·¯å¾„ï¼Œä½†åªæœ‰ç«–ç›´å‘ä¸Šçš„è·¯å¾„æ˜¯åˆæ³•çš„ï¼Œæ‰€ä»¥â€œå‘ä¸Šâ€çš„é‚£ä¸ªå­æ ‘éœ€è¦ç‰¹æ®Šå¤„ç†ã€‚ç±»ä¼¼äº CDQ åˆ†æ²»å…ˆå¤„ç†å·¦åŠéƒ¨åˆ†å†è®¡ç®—å·¦åŠéƒ¨åˆ†å¯¹å³åŠéƒ¨åˆ†çš„è´¡çŒ®ï¼Œè¿™é¢˜æ¯æ¬¡åˆ†æ²»æ—¶å…ˆå¤„ç†â€œå‘ä¸Šâ€çš„é‚£ä¸ªå­æ ‘ï¼Œç„¶åç”¨åˆ†æ²»ä¸­å¿ƒåˆ°æ ¹çš„é“¾é™¤äº†åˆ†æ²»ä¸­å¿ƒæœ¬èº«å¤–åœ¨å½“å‰åˆ†æ²»æ ‘ä¸Šçš„éƒ¨åˆ†æ¥æ›´æ–°åˆ†æ²»ä¸­å¿ƒçš„ DP å€¼ï¼Œå†ç”¨åˆ†æ²»ä¸­å¿ƒåˆ°æ ¹çš„é“¾åœ¨å½“å‰åˆ†æ²»æ ‘ä¸Šçš„éƒ¨åˆ†æ¥æ›´æ–°é™¤äº†â€œå‘ä¸Šâ€çš„é‚£ä¸ªå¤–çš„å…¶å®ƒå­æ ‘çš„ DP å€¼ï¼Œæœ€åå†åˆ†æ²»ä¸‹å»å¤„ç†é™¤äº†â€œå‘ä¸Šâ€çš„é‚£ä¸ªå¤–çš„å…¶å®ƒå­æ ‘ã€‚\næ›´æ–°é™¤äº†â€œå‘ä¸Šâ€çš„é‚£ä¸ªå¤–çš„å…¶å®ƒå­æ ‘çš„ DP å€¼æ—¶ï¼Œéœ€è¦æŠŠè¿™äº›å­æ ‘é‡Œçš„ç‚¹æŒ‰ $dis[i]-l_i$ æ’åºï¼Œç„¶åä»ä¸‹å¾€ä¸ŠæŠŠåˆ†æ²»ä¸­å¿ƒåˆ°æ ¹çš„é“¾åœ¨å½“å‰åˆ†æ²»æ ‘ä¸Šçš„éƒ¨åˆ†åœ¨å¯è¡Œæ—¶åŠ å…¥å‡¸åŒ…ã€‚\nç”±äº $p_i$ ä¸æ˜¯å•è°ƒçš„ï¼Œå¹¶ä¸æ˜¯ç”¨å•è°ƒé˜Ÿåˆ—/å•è°ƒæ ˆç»´æŠ¤å‡¸åŒ…ï¼Œè€Œæ˜¯ä¿ç•™æ•´ä¸ªå‡¸åŒ…ï¼ŒæŸ¥è¯¢çš„æ—¶å€™äºŒåˆ†ã€‚\nç”¨å‰ç§¯åˆ¤æ–œç‡ä¼šçˆ† long longï¼Œå¯ä»¥ç”¨ __int128 / double è§£å†³ã€‚\næ€»å¤æ‚åº¦ $O(n\\log^2 n)$ ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef long long ll; const ll INF = 1e18; vector\u0026lt;bool\u0026gt; vis; int n, type, tsiz, rt; vector\u0026lt;vector\u0026lt;int\u0026gt; \u0026gt; g; vector\u0026lt;ll\u0026gt; dis, p, q, k, f; vector\u0026lt;int\u0026gt; siz, wt, dep, pa; void getroot(int u, int fa) { siz[u] = wt[u] = 1; for (int i = 0; i \u0026lt; g[u].size(); ++i) { int v = g[u][i]; if (v == fa || vis[v]) continue; getroot(v, u); siz[u] += siz[v]; wt[u] = max(wt[u], siz[v]); } wt[u] = max(wt[u], tsiz - siz[u]); if (!rt || wt[u] \u0026lt; wt[rt]) rt = u; } void getchildren(int u, vector\u0026lt;int\u0026gt;\u0026amp; children) { for (int i = 0; i \u0026lt; g[u].size(); ++i) { int v = g[u][i]; if (v == pa[u] || vis[v]) continue; children.push_back(v); getchildren(v, children); } } bool cmp(int x, int y) { return dis[x] - k[x] \u0026gt; dis[y] - k[y]; } bool check(int x, int y, int z) { return 1.0 * (f[x] - f[y]) / (dis[x] - dis[y]) \u0026lt; 1.0 * (f[y] - f[z]) / (dis[y] - dis[z]); } ll calc(int i, int j) { return f[j] + p[i] * (dis[i] - dis[j]) + q[i]; } void solve(int u) { vis[u] = true; vector\u0026lt;int\u0026gt; anc(1, u); while (pa[anc.back()] \u0026amp;\u0026amp; !vis[pa[anc.back()]]) anc.push_back(pa[anc.back()]); if (anc.size() \u0026gt; 1) { rt = 0; tsiz = siz[pa[u]]; getroot(pa[u], u); solve(rt); for (int i = 1; i \u0026lt; anc.size() \u0026amp;\u0026amp; dis[anc[i]] \u0026gt;= dis[u] - k[u]; ++i) f[u] = min(f[u], calc(u, anc[i])); } vector\u0026lt;int\u0026gt; children; getchildren(u, children); sort(children.begin(), children.end(), cmp); vector\u0026lt;int\u0026gt; convex; int t = 0; for (int i = 0; i \u0026lt; children.size(); ++i) { int v = children[i]; while (t \u0026lt; anc.size() \u0026amp;\u0026amp; dis[anc[t]] \u0026gt;= dis[v] - k[v]) { while (convex.size() \u0026gt;= 2 \u0026amp;\u0026amp; check(convex[convex.size() - 2], convex.back(), anc[t])) convex.pop_back(); convex.push_back(anc[t++]); } if (convex.empty()) continue; int l = 0, r = convex.size() - 1; while (l \u0026lt; r) { int mid = (l + r + 1) \u0026gt;\u0026gt; 1; if (mid \u0026amp;\u0026amp; calc(v, convex[mid - 1]) \u0026lt; calc(v, convex[mid])) r = mid - 1; else l = mid; } f[v] = min(f[v], calc(v, convex[l])); } for (int i = 0; i \u0026lt; children.size(); ++i) { int v = children[i]; if (v == pa[u] || vis[v]) continue; rt = 0; tsiz = siz[v]; getroot(v, u); solve(v); } } int main() { scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;n, \u0026amp;type); vis.resize(n + 1, false); f.resize(n + 1, INF); dis.resize(n + 1, 0); dep.resize(n + 1, 0); siz.resize(n + 1, 0); wt.resize(n + 1, 0); pa.resize(n + 1, 0); g.resize(n + 1); p.resize(n + 1); q.resize(n + 1); k.resize(n + 1); for (int i = 2; i \u0026lt;= n; ++i) { scanf(\u0026quot;%d%lld%lld%lld%lld\u0026quot;, \u0026amp;pa[i], \u0026amp;dis[i], \u0026amp;p[i], \u0026amp;q[i], \u0026amp;k[i]); g[pa[i]].push_back(i); g[i].push_back(pa[i]); dis[i] += dis[pa[i]]; } f[1] = 0; tsiz = n; getroot(1, 0); solve(rt); for (int i = 2; i \u0026lt;= n; ++i) printf(\u0026quot;%lld\\n\u0026quot;, f[i]); return 0; } ","date":"2019-11-25T16:07:04+08:00","permalink":"https://ouuan.github.io/post/noi2014%E8%B4%AD%E7%A5%A8%E6%96%9C%E7%8E%87%E4%BC%98%E5%8C%96%E7%82%B9%E5%88%86%E6%B2%BB/","tags":["æ–œç‡ä¼˜åŒ–","ç‚¹åˆ†æ²»","cdqåˆ†æ²»","åˆ†æ²»"],"title":"ã€ŒNOI2014ã€è´­ç¥¨ï¼ˆæ–œç‡ä¼˜åŒ–ï¼Œç‚¹åˆ†æ²»ï¼‰"},{"categories":["å…¶å®ƒ"],"contents":"æ€€ç€ä¼¤æ„Ÿçš„å¿ƒæƒ…å†™ä¸‹è¿™æ®µæ–‡å­—ï¼Œç„¶åå¼€å§‹ä¸€æ®µæ–°çš„å¾ç¨‹ã€‚\nStarting point çœ‹åˆ°å·¦è¾¹é‚£å‡ æ’ç°è‰²çš„æ–¹æ ¼äº†å—ã€‚\nç¬¬ä¸€ä¸ªç»¿è‰²çš„æ–¹æ ¼æ˜¯ 2018 å¹´ 12 æœˆ 4 æ—¥ã€‚\né‚£æ˜¯ä»€ä¹ˆæ—¥å­å‘¢ï¼Ÿ\nè¦è¯´çš„è¯ï¼Œé‚£æ˜¯æˆ‘å¼€å§‹ä½¿ç”¨ hexo åšå®¢çš„æ—¥å­ã€‚\né‚£è¿˜æ˜¯æˆ‘å¾—çŸ¥è‡ªå·±åœ¨ NOIP2018 ä¸­å¤ºå¾— HB rk1 åä¸ä¹…ã€‚\nåœ¨é‚£ä¹‹åæ²¡è¿‡å‡ å¤©ï¼Œæˆ‘åä¸Šé«˜é“ï¼Œç¬¬ä¸€æ¬¡é•¿æœŸï¼ˆå¤§äºä¸€å‘¨ï¼‰åœ¨å¤–å‚åŠ é›†è®­ã€‚\nä¹Ÿå°±æ˜¯é‚£æ—¶ï¼Œæˆ‘è°‹ç”Ÿäº†åŠä¸€åœº CF çš„æƒ³æ³•ã€‚\nä½¿ç”¨ hexo åšå®¢ï¼Œä¹Ÿè®©æˆ‘ä»ä¸€ä¸ª Github çš„æ—è§‚è€…ï¼Œå˜æˆäº†ä½¿ç”¨è€…ã€‚\nç©¶ç«Ÿæ˜¯å…¶ä¸­çš„å“ªä¸€ä¸ªï¼Œæ”¹å˜äº†æ•…äº‹çš„ä¸»äººå…¬ï¼Œæˆ‘ä»¬ä¸å¾—è€ŒçŸ¥ã€‚\nä½†é‚£å¤©ï¼Œå°±è¿™æ ·æˆäº†æ•…äº‹çš„èµ·ç‚¹ã€‚\nProblem Setting æ•…äº‹çš„ç¬¬ä¸€ç«™ï¼Œå«åš Problem Setting ã€‚\nè¿™ä¸€ç«™å¾ˆé•¿ï¼Œå¯ä»¥è¯´ä»æ•…äº‹å¼€å§‹å‰â€”â€”2018 å¹´ 8 æœˆâ€”â€”å°±å¼€å§‹äº†ã€‚é‚£æ˜¯ä¸¤åœºæ´›è°·å…¬å¼€èµ›ï¼Œéé…‹yyfçš„sifä¹‹æ—… ä¸ è’Ÿè’»ä»¬çš„è¡¥ç•ªä¹‹æ—… ã€‚å®ƒä»¬å¹¶ä¸å®Œå–„ï¼Œæ‰€ä»¥è¿™ä¸¤åœºæ—…é€”å¹¶æ²¡æœ‰è¢«çº³å…¥æœ¬æ–‡æ‰€è®²çš„è¿™ä¸ªæ•…äº‹ä¹‹ä¸­ã€‚\nè¿™ä¸€ç«™çš„æ•…äº‹æˆ‘ä¹Ÿæ›¾ç»è®²è¿°è¿‡ï¼Œé¢˜ç›®å«åš ã€Œbad round ä¸å‡ºé¢˜äººçš„åšå®ˆã€ ã€‚\nè¿™å…¶ä¸­çš„è¿‡ç¨‹å…¶å®å¹¶ä¸é‡è¦ï¼Œä½†å°±åƒ åè®° ä¸­æ‰€è¯´çš„ï¼Œè¿™ä¸€ç«™æ”¹å˜äº†æ•…äº‹çš„ä¸»äººå…¬ã€‚\nä»–ä¼šå¯¹æœ‰æ¼æ´çš„é¢˜é¢æ„Ÿåˆ°æ„¤æ€’â€”â€”æ— è®ºæ˜¯è‡ªå·±è¿‡å»å‡ºçš„é¢˜ï¼Œè¿˜æ˜¯åœ¨å“ªçœ‹åˆ°çš„é¢˜ç›®ã€‚\nCodeforces Round #564ï¼Œåœ¨ CF ä¸Šç•™ä¸‹çš„åªæ˜¯å…«é“é¢˜ç›®ä¸è‹¥å¹² rating çš„å˜åŒ–ï¼Œä½†å®ƒè®©æ•…äº‹çš„ä¸»äººå…¬å¯¹äº‹ç‰©çš„çœ‹æ³•æœ‰äº†å˜åŒ–ï¼š\n æˆ‘è®¨åŒä¸ç”¨å¿ƒçš„å‡ºé¢˜äººï¼Œè®¨åŒä¸ä¸¥è°¨ç”šè‡³è¯¯å¯¼äººçš„åšå®¢ï¼Œå› ä¸ºï¼Œæˆ‘è®¤ä¸ºå‡ºé¢˜ç»™åˆ«äººåšã€å†™åšå®¢ç»™åˆ«äººçœ‹æ˜¯åº”å½“å¯¹åˆ«äººè´Ÿè´£çš„ã€‚å¦‚æœæ²¡æœ‰ç²¾åŠ›ã€ä¸æƒ³è´Ÿè´£çš„è¯ï¼Œå‡ºé¢˜ç»™è‡ªå·±åšï¼Œåšå®¢ä¿å­˜åœ¨æœ¬åœ°å°±å¥½äº†ï¼Œå‘å‡ºæ¥å¹²ä»€ä¹ˆï¼Ÿå³ä½¿æ˜¯èƒ½åŠ›ä¸å¤Ÿï¼Œä¹Ÿå¾—æœ‰è®¤çœŸè´Ÿè´£çš„æ€åº¦æ‰è¡Œã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ«äººéª‚ä½ ï¼Œåªå½“éª‚é†’å¥½äº†ã€‚å¦‚æœéª‚ä¸é†’ï¼Œé‚£ç€å®è¯¥éª‚ã€‚\nå½“æˆ‘æŒ‡å‡ºå…¶ä»–äººé¢˜ç›®é‡Œçš„ç§ç§ä¸è¶³ï¼Œå½“æˆ‘æŠ›å¼€ä»–äººåšå®¢ä¸­ä¸ä¸¥è°¨çš„è¯è¯­è€Œè±ç„¶å¼€æœ—å¤§å«åŸæ–‡ä¹‹æ¼æ´æ»¡ç¯‡æ—¶ï¼Œæœ‰æ²¡æœ‰æƒ³è¿‡ä»–äººä»˜å‡ºçš„å¿ƒè¡€å‘¢ï¼Ÿå½“ç„¶æœ‰ï¼Œåªæ˜¯æˆ‘è®¤ä¸ºå°Šé‡ä¸æ˜¯åŸºäºä»˜å‡ºï¼Œè€Œæ˜¯åŸºäºè´Ÿè´£çš„æ€åº¦ï¼ŒåŸºäºçœŸæ­£åšäº†ä»€ä¹ˆçš„ã€‚å°±å¥½æ¯”ä½ è¿½ä¸€ä¸ªå¥³å­©å­ï¼Œè¾›è¾›è‹¦è‹¦ä»˜å‡ºäº†é‚£ä¹ˆå¤šï¼Œå¦‚æœä¸æå‡è‡ªå·±ï¼Œå¦‚æœä¸ä»˜å‡ºçœŸå¿ƒï¼Œåˆ«äººå‡­ä»€ä¹ˆå–œæ¬¢ä½ ï¼Ÿ\nè¯´åˆ°åº•ï¼Œå¯¹å†™ç»™åˆ«äººçš„ä¸œè¥¿è´Ÿè´£ï¼Œæ˜¯æˆ‘è‡ªå·±çš„ä¸€ç§åšå®ˆï¼Œæˆ‘è‡ªå·±å¹¶ä¸æ˜¯æ€»èƒ½åšåˆ°ï¼Œä¹Ÿä¸æ˜¯ç”Ÿæ¥å°±èƒ½åšåˆ°ã€‚ä½†æˆ‘ä¼šåŠªåŠ›å»åšï¼Œæ— è®ºåœ¨æ€æ ·çš„å¤§ç¯å¢ƒä¸‹ï¼Œæˆ‘æƒ³å°½æˆ‘æ‰€èƒ½åˆ›é€ ä¸€ç‰‡å°å°çš„å‡€åœŸã€‚\n å¾ˆå¿«ï¼Œä»–å°†å‘ç°ï¼Œä»–ä¸æ­¢å­¦ä¼šäº†å‡ºé¢˜ã€‚\nGithub Github æ˜¯ä»€ä¹ˆï¼Ÿ\nå®ƒä¸åªæ˜¯ä¸€ä¸ª â€œä»£ç æ‰˜ç®¡å¹³å°â€ï¼Œæ›´æ˜¯ä¸€ä¸ª â€œå¼€æºç¤¾åŒºâ€ã€‚\nåœ¨è¿™é‡Œï¼Œä½ å¯ä»¥å‚ä¸ä»–äººçš„é¡¹ç›®ï¼Œä¹Ÿå¯ä»¥è®©è‡ªå·±çš„é¡¹ç›®è¢«æ›´å¤šäººå‘ç°ï¼Œè®©ä»–äººä¹Ÿèƒ½å¤Ÿå‚ä¸å…¶ä¸­ã€‚\nåœ¨è¿™ä¸ªæ•…äº‹ä¸­ï¼Œæˆ‘ä»¬çš„ä¸»äººå…¬ä¹Ÿå†™è¿‡ä¸€äº›å°ä¸œè¥¿ï¼Œè™½ç„¶éƒ½ä¸æ˜¯ä»€ä¹ˆå¤§å·¥ç¨‹ï¼Œä½†ä¹Ÿåˆ—åœ¨è¿™äº†ï¼Œæœ‰å…´è¶£çš„è¯»è€…ä¸å¦¨ç¿»ä¸€ç¿»ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰ä»€ä¹ˆèƒ½å¤Ÿç”¨å¾—ä¸Šçš„ï¼šä¸€äº›æœ‰è¶£çš„å°å·¥ç¨‹ ã€‚\nè¿™ä¸€ç«™åªæ˜¯æ•…äº‹çš„ä¸€ä¸ªå°æ’æ›²ï¼Œè®©æˆ‘ä»¬æ¥ç€å¾€ä¸‹ã€‚\nOI Wiki OI Wiki åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\nå®ƒä¹Ÿæ˜¯æ‰˜ç®¡åœ¨ Github ä¸Šçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå¯å®ƒå’Œä¸Šé¢åˆšåˆšè¯´è¿‡çš„é‚£äº›å°ä¸œè¥¿ä¸åŒï¼ŒOI Wiki æ˜¯ä¸€ä¸ªæœ‰ç€ 3.5k stars å’Œ 700+ forks (æˆªè‡³ 2019.11.23) çš„å¤§é¡¹ç›®ã€‚\né‚£æ˜¯ä¸€ä¸ªå´‡å°šçŸ¥è¯†è‡ªç”±çš„ OI å­¦ä¹ èµ„æºæ•´åˆç«™ç‚¹ï¼Œå¯å®ƒï¼Œå¾ˆä¸å®Œå–„ã€‚\nä¿¡æ­¥åœ¨ OI Wiki ä¸­çš„ä¸»äººå…¬ï¼Œå‘ç°äº†æ»¡çœ¼çš„ç©ºç™½ä¸æ¼æ´ã€‚\nä»–æ„è¯†åˆ°è¿™æ˜¯æ€æ ·çš„ä¸€ä¸ªå¹³å°â€”â€”å®ƒä¸åƒå‡ºé¢˜ï¼Œåªæ˜¯æ˜™èŠ±ä¸€ç°ï¼Œè‹¥é¢˜ç›®ä¸å¤Ÿä¼˜ç¾ï¼Œè¿˜ä¸çŸ¥æ˜¯å¦æœ‰äººä»ä¸­æœ‰æ‰€æ”¶è·ï¼›å®ƒä¸åƒå†™åšå®¢ï¼Œåœ¨è¿™ä¸ªå¹³å°ä¸Šï¼Œä¼šæœ‰äººå’Œä½ ä¸€èµ·åä½œï¼Œä¹Ÿæœ‰æ›´å¤šçš„ç›®å…‰ï¼Œèšç„¦åœ¨ä½ æ•²æ‰“å‡ºçš„æ–‡å­—ä¹‹ä¸Šã€‚\nè¿™ä¸€ç«™ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿæ—¶è‡³ä»Šæ—¥ï¼Œæˆ‘ä¹Ÿè¯´ä¸æ¸…æ¥šï¼Œç•™ä¸‹çš„åªæœ‰æ•°å­—ï¼š59 pull requestsï¼Œ182 commitsï¼Œ7966 additions ï¼Œ4675 delections ï¼Œ100 pull requests reviewedã€‚\nä¼´éšç€è¿™äº›æ•°å­—çš„ï¼Œè¿˜æœ‰ä¸€ä¸ªè°œä¸€æ ·çš„ OIerï¼Œä»–ä»ä¸åœ¨æœºæˆ¿æ‰“æ¸¸æˆï¼Œä½†ä»–çš„æäº¤è®°å½•å´æ€»æ˜¯å¯¥å¯¥æ— å‡ ã€‚\nValue è¿™ä¸ªæ•…äº‹ï¼Œå¥½åƒä¸æ˜¯å¾ˆé•¿ï¼Œé‚£æˆ‘ä»¬æ¥è®²ä¸€è®²æ•…äº‹ä¹‹å¤–çš„ä¸€äº›å†…å®¹ï¼Œæœ‰å…³ä¸€ä¸ªçœ‹ä¼¼å¤±è´¥çš„ OIer èƒŒåçš„æ•…äº‹ã€‚\nä¸€åˆ‡å¾—è¿½æº¯åˆ°ä¸€æœ¬å«åš ä»é›¶å¼€å§‹å­¦ç†è´¢ çš„ä¹¦ï¼Œä¹¦ä¸­çš„å†…å®¹æˆ‘éƒ½ä¸å¤ªè®°å¾—äº†ï¼Œæ•…äº‹çš„ä¸»äººå…¬ç°åœ¨ä¹Ÿå¯¹ç»æµä¸æ˜¯å¾ˆæ„Ÿå…´è¶£ï¼Œé‚£æ˜¯ä»–å°å­¦ä¸€äºŒå¹´çº§æ—¶çœ‹çš„ï¼Œç°åœ¨åªè®°å¾—å…¶ä¸­çš„ä¸€ä¸ªç‰‡æ®µï¼š\n æœ‰æ¬¡æå˜‰è¯šç»“æŸé…’ä¼šï¼Œå‡ºé…’åº—åˆšè¦ä¸Šè½¦ï¼Œä¸€æšä¸€å…ƒç¡¬å¸æ‰è½ï¼Œæ»šå‘ä¸‹æ°´é“ï¼Œæå˜‰è¯šä¾¿ç´§èµ°å‡ æ­¥è¦èµ¶ä¸Šå»æ¡å–ã€‚\næ—è¾¹é…’åº—é—¨ç«¥çœ¼ç–¾æ‰‹å¿«ï¼Œä»åœ°ä¸Šæ¡èµ·ç¡¬å¸ï¼Œäº¤ç»™æå˜‰è¯šã€‚æå˜‰è¯šå¾ˆé«˜å…´ï¼Œå½“å³ç»™äº†é—¨ç«¥ 100 å…ƒå°è´¹ã€‚\næ®è¯´æå˜‰è¯šæ˜¯è¿™æ ·è¯´çš„ï¼šâ€œå¦‚æœæˆ‘ä¸æ¡ï¼Œè¿™ä¸€å…ƒå°±ä»å¸‚é¢æ¶ˆå¤±ï¼Œæ¯«æ— ä»·å€¼ï¼Œè€Œé—¨ç«¥æ¡èµ·æ¥ç»™äº†æˆ‘ï¼Œæˆ‘çš„ä¸€å…ƒæ²¡æœ‰ä¸¢å¤±ï¼›é—¨ç«¥ä¸ºæˆ‘ä¿ä½ä¸€å…ƒï¼Œå€¼å¾—å¥–åŠ±ï¼Œ100 å…ƒä»–èŠ±å‡ºå»å¯ä»¥åƒå¥½çš„ï¼Œå¯ä»¥ç»™å®¶äººä¹°ä¸œè¥¿ï¼Œå¾ˆæœ‰æ„ä¹‰ï¼Œè°éƒ½æ²¡æœ‰æŸå¤±ã€‚â€\n è¿™ä¸ªæ•…äº‹çš„çœŸå‡æš‚ä¸”ä¸è®ºï¼Œä¸¢å¤±ä¸€å…ƒç¡¬å¸åœ¨ç»æµå­¦æ„ä¹‰ä¸Šç©¶ç«Ÿå¸¦æ¥äº†ä»€ä¹ˆä¹Ÿä¸é‡è¦ï¼Œä½†è¿™ä¸ªæ•…äº‹ç»™ä»–å±•ç¤ºäº†ä¸€ä¸ªæ–°çš„è§†è§’ï¼Œä¸€ä¸ªä»å…¨å±€çœ‹é—®é¢˜çš„è§†è§’ã€‚\nåœ¨å°å­¦å››å¹´çº§çš„å¥¥æ•°è¯¾ä¸Šï¼Œä»–åˆå­¦ä¹ äº†â€œç»Ÿç­¹ä¸è§„åˆ’â€ï¼ŒçŸ¥é“äº†äººä»¬æ’é˜Ÿæ‰“æ°´æ—¶åº”å½“å¦‚ä½•å®‰æ’é¡ºåºã€‚\nåœ¨å¬è¯´äº†å›šå¾’å›°å¢ƒï¼Œå¹¶åœ¨ç”Ÿæ´»ä¸­æ‰¾åˆ°äº†æ— æ•°ä¸ªå®ä¾‹åï¼Œä»–å‘ç°ï¼Œåˆä½œåšå¼ˆçš„å¹³è¡¡ç‚¹ä¸éåˆä½œåšå¼ˆæˆªç„¶ä¸åŒã€‚\nvfk æ‰€å†™çš„ ç¾åœ¨è¿™é‡Œ ç‚¹é†’äº†ä»–ï¼Œè®©ä»–çœ‹åˆ°äº† ã€Œç¾å°±åœ¨äººä¸äººçš„ç›¸äº’å¸®åŠ©ï¼Œç›¸äº’ä¿¡ä»»ä¸­ã€ï¼Œæ˜ç™½äº† UOJ ç²¾ç¥ä¹‹æºæµç©¶ç«Ÿåœ¨ä½•å¤„ã€‚\nåœ¨ OI çš„å­¦ä¹ ä¸­ï¼Œä¸€ä¸ªåˆä¸€ä¸ªçš„æœ€ä¼˜åŒ–é—®é¢˜ï¼Œè®©ä»–æ˜ç™½äº†ï¼Œçœ‹é—®é¢˜ä¸èƒ½ç‰‡é¢ã€‚\nåœ¨ CF contribution æœºåˆ¶çš„æ¿€åŠ±ä¸‹ï¼Œä»–ç™»ä¸Šäº†ä¸­å›½ contribution æ¦œçš„é¡¶å³°ã€‚\nç»è¿‡ä¸Šé¢é‚£ä¸ªæ•…äº‹ï¼Œcontribute å·²ç»æˆäº†ä»–ç”Ÿæ´»çš„ä¸€éƒ¨åˆ†ã€‚\nä¸‰æœˆã®ãƒ©ã‚¤ã‚ªãƒ³ ä¸­ ã²ãªãŸ å–Šå‡ºçš„ ã€Œå¾Œæ‚”ãªã‚“ã¦ã—ãªã„ã£ã£ ã—ã¡ã‚ƒãƒ€ãƒ¡ã ã£ ã ã£ã¦ ç§ã®ã—ãŸäº‹ã¯ ãœã£ãŸã„ ã¾ã¡ãŒã£ã¦ãªã‚“ã‹ ãªã„ï¼ã€ï¼Œè®©ä»–åšå®šäº†è‡ªå·±çš„å†³å¿ƒã€‚\nä»–ç»™è‡ªå·±çš„ä»·å€¼è§‚ä¸‹äº†å®šä¹‰ï¼šä»¥æœ€å¤§åŒ–ç¤¾ä¼šå…¨ä½“æˆå‘˜çš„åˆ©ç›Šæ€»å’Œä¸ºç›®æ ‡ã€‚\nè¿™ä¸æ˜¯åˆ©ä»–ä¸»ä¹‰ï¼šè‡ªå·±æ˜¯ç¤¾ä¼šå…¨ä½“çš„ä¸€éƒ¨åˆ†ï¼Œä»–äººçš„åˆ©ç›Šä¸æ¯”è‡ªå·±çš„åˆ©ç›Šé‡è¦ï¼Œä½†å¤šæ•°äººçš„åˆ©ç›Šå¾€å¾€æ›´åŠ é‡è¦ã€‚\nè¿™ä¸€ä»·å€¼è§‚ä¹Ÿä¸ä¼šè®©ä»–å¸®åŠ©æ¶äººï¼Œå› ä¸ºè¿™ä¼šé—´æ¥åœ°ä½¿ä»–äººåˆ©ç›Šå—æŸã€‚è¿™ä¹Ÿä½¿ä»–æ˜ç™½ï¼Œæƒ©æ²»æ¶äººçš„ç›®çš„ä¸æ˜¯æŠ¥å¤ï¼Œè€Œæ˜¯ä½¿å…¶æ”¹è¿‡è‡ªæ–°ï¼Œä¸å†ä½œæ¶ã€‚\nè¿™ä¸€ä»·å€¼è§‚è¿˜è®©ä»–ç›¸ä¿¡ï¼Œç«äº‰æ˜¯ä»¥å…±åŒè¿›æ­¥ä¸ºç›®çš„çš„ï¼Œæ­£å¦‚ä»–åœ¨åšå®¢çš„ã€Œå…³äºã€ä¸€æ ä¸­æ‰€å†™ï¼Œã€Œæˆ‘ä¸æƒ³å’Œä»–äººäº‰æŠ¢ä¿é€çš„åé¢ï¼Œä½†æˆ‘ç°é˜¶æ®µçš„æ¢¦æƒ³ï¼Œæ˜¯æé«˜å›½å®¶é›†è®­é˜Ÿç¬¬ 50 åçš„æ°´å¹³ã€ï¼Œä»–ç›¸ä¿¡ç«äº‰çš„å—ç›Šè€…ä¸ä¼šæ˜¯å°‘æ•°äººï¼Œè€Œæ˜¯å…¨ä½“ã€‚\nä»–ä¸èƒ½åšåˆ°åƒé›·é”‹ä¸€æ ·æ€»æ˜¯å¸®åŠ©èº«è¾¹çš„äººï¼Œä»–ä¸æ‡‚å¦‚ä½•å®‰æ…°ä»–äººï¼Œå¦‚ä½•é¼“åŠ±ä»–äººï¼Œå¦‚ä½•åœ¨æ°å½“çš„æ—¶å€™ç»™èº«è¾¹çš„äººä»¥å¸®åŠ©ï¼Œä»–ä¹Ÿä¸æ„¿èŠ±è´¹æ¯”å—ç›Šäººæ‰€å—ä¹‹ç›Šæ›´å¤§çš„ä»£ä»·æ¥å¸®åŠ©ä»–äººã€‚æ‰€ä»¥ï¼Œä»–é€‰æ‹©äº† contribute ï¼Œé€‰æ‹©äº†åœ¨æ’é˜Ÿæ—¶ç­‰åœ¨æœ€åï¼Œé€‰æ‹©äº†åœ¨è½¦å¢ä¸Šæœ‰ç©ºä½æ—¶è‹¥æ²¡æœ‰å…¶ä»–äººç«™ç€ä¾¿åä¸‹ã€‚\nFuture ä½†ä»–åœ¨ contribute è¿™æ¡è·¯ä¸Šæ¸è¡Œæ¸è¿œï¼Œå›å¤´æœ›å»æ—¶ï¼Œä»–å‘ç°ï¼Œè‡ªå·±æ— æ³•åƒ ã²ãªãŸ ä¸€æ ·ï¼Œåšä¿¡è‡ªå·±æ‰€åšæ˜¯æ²¡æœ‰é”™çš„ã€‚\n æ„Ÿè§‰ NOIP æ—¶æœŸè‡ªå·±è¿˜æ˜¯æœ‰ç‚¹æ™ºå•†çš„ï¼Œä»å»å¹¿äºŒé›†è®­èµ·æ™ºå•†ä¸¥é‡ä¸‹æ»‘ã€‚\nè‡ªä»æ­äº† hexo åšå®¢ç»å¸¸æ²‰è¿·å¼€å‘ã€å†™å·¥ç¨‹ã€‚ç„¶è€Œåˆ°ç°åœ¨ Pythonã€JS ä»€ä¹ˆçš„è¿˜ä¸¥é‡ä¾èµ–æœç´¢å¼•æ“ã€‚\nè‡ªä»åœ¨ CF å‡ºäº†é¢˜ï¼Œç»å¸¸æ²‰è¿·å–·å‡ºé¢˜äººã€å¸®å‡ºé¢˜äººæ”¹é¢˜é¢ã€å†™å‡ºé¢˜è§„èŒƒï¼Œç”šè‡³ä¸åˆ‡å®é™…åœ°å¸Œæœ›æ´›è°·å…¬å¼€èµ›èƒ½æœ‰æ‰€æ”¹å–„ã€‚\nCF contribution è¿˜æŒºé«˜çš„ï¼Œä½† rating å·²ç»å¤§åŠå¹´åœæ»ä¸å‰äº†ã€‚\næ€»ä¹‹æœ€è¿‘ä¸€å¹´å­¦äº†åˆ«äººä¸€ä¸ªæœˆå°±èƒ½å­¦å®Œçš„çŸ¥è¯†ç‚¹ï¼Œä½†æ™ºå•†ä¸‹æ»‘ï¼Œå¯¼è‡´æ°´å¹³æ²¡æœ‰æé«˜ã€‚å€’æ˜¯å­¦ä¹ äº†å„ç§å„æ · contribute çš„å§¿åŠ¿ã€‚æ„Ÿè§‰è¦é€€å½¹ã€‚\n ä»–æ„è¯†åˆ°ï¼Œè‡ªå·±çš„è§†è§’è™½ç„¶å¤Ÿå¹¿ï¼Œä½†è¿˜ä¸å¤Ÿé•¿è¿œã€‚\nä»–æƒ³èµ·äº†è‡ªå·±çš„æ¢¦æƒ³ï¼Œæƒ³èµ·äº†æ›¾ç»ç«‹ä¸‹çš„èª“è¨€ã€‚\næ˜¯æ—¶å€™æŠŠæ‰‹å¤´çš„äº‹æƒ…æ”¾ä¸‹äº†ï¼Œå˜å¾—æ›´åƒä¸€å OIerã€‚\nç›´åˆ° 2021 å¹´çš„å¤æ—¥ï¼Œæ— è®ºæ˜¯ä¸€è·¯åœ¨ OI ä¹‹è·¯ä¸Šå‰è¡Œï¼Œè¿˜æ˜¯èµ°ä¸Šé«˜è€ƒè¿™æ¡é“è·¯ã€‚\nä»–åœ¨å¿ƒé‡Œæš—æš—å‘èª“ï¼Œåˆ°é‚£æ—¶ï¼Œä»–è¿˜è¦å›å½’ contribute è¿™æ¡ä¸å½’è·¯ï¼Œç»§ç»­èµ°ä¸‹å»ã€‚\nä¸€å¥è¯é¢˜æ„ æˆ‘ç›´åˆ°é«˜ä¸­æ¯•ä¸šå¤§æ¦‚éƒ½ä¸ä¼šå†å‚ä¸å‡ºé¢˜ / å†™ OI Wiki ç­‰ contribute æ€§è´¨çš„æ´»åŠ¨äº†ã€‚\n","date":"2019-11-23T19:28:56+08:00","permalink":"https://ouuan.github.io/post/2019%E4%BB%A5%E5%8F%8A%E6%AF%95%E4%B8%9A%E4%B9%8B%E5%89%8D/","tags":["contribute"],"title":"2019ï¼Œä»¥åŠæ¯•ä¸šä¹‹å‰"},{"categories":["æ¸¸è®°"],"contents":"æ ‡é¢˜æ¥è‡ª ä¸‰æœˆã®ãƒ©ã‚¤ã‚ªãƒ³ Chapter.64 éŠ€ã®ç¾½æ ¹ ï¼š\n ç­”æ¡ˆåªåœ¨æ¼†é»‘çš„æ°´åº•ã€‚\nè¶Šæ˜¯å‰è¿›ï¼Œä¸‹ä¸€ä¸ªç­”æ¡ˆå°±åªèƒ½åœ¨æ›´æ·±çš„åœ°æ–¹æ‰¾åˆ°ã€‚\nä»¥å‰è¶Šæ˜¯æ½œå…¥ï¼Œå°±èƒ½è·å¾—ç­”æ¡ˆã€‚\næ¯”èµ·ææ€–ï¼Œæ¬²æœ›æ›´èƒœä¸€ç­¹ã€‚\nä½†æ˜¯æˆä¸ºèŒä¸šæ£‹æ‰‹ 6 å¹´åï¼Œå¦‚ä»Šå˜å¾—å®Œå…¨ä¸èƒ½å‰è¿›ã€‚\nå³ä¾¿å¸¦ç€è¦æ’•ç¢å…¨èº«çš„æƒ³æ³•å»æ½œå…¥ï¼Œä½†æ˜¯å´ç©ºæ‰‹è€Œå›ï¼Œå·²ç»æ˜¯å¾ˆå¸¸è§çš„äº‹äº†ã€‚\næ¯”èµ· ã€Œä¹Ÿè®¸èƒ½æ‰¾åˆ°ã€ï¼Œã€Œåæ­£åˆä¸ä¸€å®šèƒ½æ‰¾åˆ°ã€è¿™ä¸ªå¿µå¤´èƒœåˆ©çš„æ—¶å€™ï¼Œå°±åªèƒ½è¿›è¡Œæœ‰é™çš„åŠªåŠ›äº†ã€‚\nä½†æ˜¯ï¼Œæ¡å±±å’ŒäºŒæµ·å ‚æ— è§†äº†é‚£æ ·çš„æˆ‘ã€‚\nç†æ‰€å½“ç„¶ä¸€æ ·æ— è®ºå¤šå°‘æ¬¡éƒ½è·³å…¥å…¶ä¸­ã€‚æ ¹æœ¬å°±ä¸æ­£å¸¸ã€‚\nä»–ä»¬å³ä¾¿å±¡æ¬¡ç©ºæ‰‹è€Œå½’ï¼Œä¹Ÿä¼šåˆ¶å®šå¯¹ç­–ç»§ç»­æŒ‘æˆ˜ã€‚\nä¸æ¯«ä¸ä»‹æ„ç—›è‹¦ï¼Œæ— è®ºå¤šå°‘æ¬¡éƒ½æŠ•èº«å…¶ä¸­ã€‚\nåªç•™ä¸‹ï¼Œè¢«ææƒ§å‹å€’çš„æˆ‘ã€‚\n Day 1 åƒå¾€å¸¸ä¸€æ ·ï¼Œå¬äº† YUKI çš„ä¸¤é¦–ä¸‰ç‹® OP å’Œ IOI2018 ä¸»é¢˜æ›²ï¼ŒæŠ½ç­¾è¿›è€ƒåœºã€‚\nç”±äºè‡ªå·±è¿˜ç®—å°æœ‰åæ°”ï¼Œè¿™æ¬¡ä¹Ÿä¸æ˜¯ NOI æˆ–æ˜¯ä»€ä¹ˆæ¯”èµ›ï¼Œåªæ˜¯ CSPï¼Œäºæ˜¯é¿å¼€äº†äººç¾¤ï¼Œä¹Ÿå¹¶æ²¡æœ‰äººè¿‡æ¥æ­è¯ã€‚å¤§æ¦‚ä¸éœ²å‡ºå‡†è€ƒè¯ä¸Šçš„åå­—çš„è¯ï¼Œå…¶ä»–äººè¦ä¹ˆä¸è®¤è¯†æˆ‘ï¼Œè¦ä¹ˆå·²ç»é€€å½¹äº†ï¼Œè¦ä¹ˆçŸ¥é“æˆ‘å®é™…ä¸Šæœ‰å¤šèœå§ã€‚\nT1 å½“ç„¶æ˜¯çœ‹å®Œé¢˜å°±ä¼šåšäº†ã€‚$n\\le 64$ çœŸæ¯’ç˜¤ï¼Œåªä¸è¿‡ç»™ä¸ª $95%$ çš„ $k\\le 2^{63}-1$ æç¤ºå¤ªæ˜æ˜¾äº†ï¼ˆç„¶è€Œå $50%$ çš„æ•°æ® $n$ è¿˜æ˜¯å¯ä»¥åˆ° $64$\u0026hellip;ä¸çŸ¥é“æœ‰æ²¡æœ‰è¿™æ ·çš„æ•°æ®ï¼‰ã€‚\nT2 ä¸€å¼€å§‹æƒ³äº†ä¸ªç¥ç§˜çš„æ ‘å¥—æ ‘åšæ³•ï¼Œæ„Ÿè§‰éå¸¸è ¢ï¼Œäºæ˜¯å»çœ‹ T3ï¼Œå‘ç°å¹¶ä¸ä¼šåšï¼Œå°±æŠŠ T2 çš„ $O(n^3)$ å’Œ T3 çš„æš´åŠ›å†™äº†ã€‚\nå†™å®Œä¹‹åæƒ³åˆ°äº†è‹¥å¹² T2 çš„å‡åšæ³•ï¼Œç„¶åæƒ³åˆ°äº†ä¸€ä¸ªç•¥éº»çƒ¦çš„çº¿æ€§åšæ³•ï¼Œåªä¸è¿‡å†™èµ·æ¥ä¹Ÿæ²¡èŠ±å¤ªå¤šæ—¶é—´ã€‚æ‹ä¸Šçš„æ—¶å€™å·²ç» 10:30 äº†ï¼Œå¥½åƒæ¯”å¤§ä¼— AC æ—¶é—´ 9:00 æ™šäº†ä¸å°‘ã€‚\nä¹‹åå¼€å§‹è‡ªé—­ã€‚å¤§æ¦‚ 11:20 çš„æ—¶å€™å»ä¸Šäº†ä¸ªå•æ‰€ï¼Œæƒ³åˆ°äº†ä¸ªæ„Ÿè§‰æŒºå¯¹çš„åšæ³•ï¼šæŠŠåˆ è¾¹è§†ä½œç»™è¾¹ç¼–å·ï¼Œæ¯ä¸ªç‚¹å‡ºå‘å…ˆèµ°ç¼–å·æœ€å°çš„å‡ºè¾¹ï¼Œç„¶åèµ°æ¥åˆ°å½“å‰ç‚¹çš„è¾¹åœ¨å½“å‰ç‚¹å‡ºè¾¹ä¸­ç¼–å·çš„åç»§ã€‚äºæ˜¯å¯ä»¥å…³äºæ¯ä¸ªç‚¹ç”¨é“¾è¡¨ç»´æŠ¤ä¸€ä¸ªå‡ºè¾¹çš„é¡ºåºï¼Œå†æšä¸¾æ¯ä¸ªæ•°å­—ï¼ŒDFS æ±‚å‡ºå®ƒçš„ç»ˆç‚¹å¯ä»¥åœ¨å“ªäº›ä½ç½®ï¼Œé€‰æ‹©å…¶ä¸­æœ€å°çš„ä¸€ä¸ªã€‚æ„Ÿè§‰æŒºéš¾å†™çš„ï¼Œ11:54 çš„æ—¶å€™ç®—æ˜¯å†™å®Œäº†ï¼Œä½†ç”±äºèµ¶æ—¶é—´å‡ ä¹æ˜¯ä¹±å†™çš„ï¼Œæµ‹æ ·ä¾‹ RE äº†ï¼Œäºæ˜¯å°±æ³¨é‡Šæ‰äº†ï¼Œæ¢æˆäº†æš´åŠ›ã€‚\næˆ‘æ˜¯ä»å­¦ OI ä¸€ä¸ªæœˆèµ·å°± using namespace std; çš„é€‰æ‰‹ï¼Œä½†è¿™æ¬¡å°±çªç„¶æƒ³ä¸ using æ¥é˜²æ­¢ CEï¼Œè€Œä¸”æ¯é¢˜éƒ½åœ¨ NOI Linux è™šæ‹Ÿæœºä¸‹ç¼–è¯‘äº†ï¼Œä½† 11:58 çš„æ—¶å€™çªç„¶å‘ç°è‡ªå·± T3 æš´åŠ›çš„ next_permutation æ²¡æœ‰åŠ  stdï¼Œä¸æ˜¯å¾ˆæ¸…æ¥šä¸ºä»€ä¹ˆä¸ä¼š CEï¼Œå½“æ—¶çš„ä»£ç ä¹Ÿæ²¡æœ‰äº†ï¼Œå¯èƒ½æ˜¯æˆ‘å“ªçœ‹é”™äº†ï¼Œæ€»ä¹‹æˆ‘æœ€åæ˜¯æŠŠ using namespace std; åŠ ä¸Šäº†..\næ‰€ä»¥è¯´ä¸è¦è¯•å›¾åœ¨è€ƒåœºä¸Šæ”¹ä»£ç ä¹ æƒ¯ã€‚\nè€ƒåœºé¡»çŸ¥çš„ç­¾åæ˜¯åœ¨ç›‘è€ƒè¯´è€ƒè¯•ç»“æŸä¹‹åå†™çš„ï¼Œå†™çš„æ—¶å€™æ‰‹éƒ½åœ¨æŠ–..æ‰€ä»¥è¯´æœ€å 10min éƒ½åˆ«å†™ä»£ç äº†ï¼Œ5min æ ¹æœ¬ä¸å¤Ÿã€‚\nè€ƒå®Œç«‹åˆ»å‡ºäº†è€ƒåœºï¼Œæ— è§†æ‰èº«è¾¹æ‰€æœ‰äººï¼Œå‡è£…ä¸–ç•Œä¸Šåªæœ‰è‡ªå·±ä¸€ä¸ªäººè€ƒäº† CSPï¼ˆ\nç„¶åç”±äºæœ€åæå¾—æœ‰ç‚¹ç´§å¼ ï¼Œè¿˜æœ‰ç¥ç§˜çš„ std::next_permutation äº‹ä»¶ï¼Œä¸€ç›´æ‹…å¿ƒæ–‡ä»¶é”™è¯¯ / CE ã€‚äºæ˜¯å°±ä¸‹äº†ä¸€ä¸‹åˆï¼ˆé…’é¦†æˆ˜ï¼‰æ£‹ï¼Œè¯•å›¾å¿˜æ‰ Day 1ã€‚\nå¯æ˜¯å±è”½ QQ å¹¶ä¸èƒ½å¦¨ç¢æˆ‘å¦ˆæ™šé¤æ—¶å‘Šè¯‰æˆ‘äººå‡ 210ï¼Œmyh AK ä¹‹ç±»çš„ã€‚\nDay 2 ä»Šå¤©æ˜¯ä¸€æ¬¡å´­æ–°çš„æ¯”èµ›ï¼ˆè‡ªæˆ‘æ´—è„‘æˆåŠŸï¼‰ã€‚\nä¾ç„¶æ˜¯ YUKI çš„ä¸¤é¦–ä¸‰ç‹® OP å’Œ IOI2018 ä¸»é¢˜æ›²ï¼Œç„¶è€Œå› ä¸ºä¼°é”™æ—¶é—´ï¼Œä¸ºäº†é¿å…å¬è½¦è½½å¹¿æ’­ï¼Œå¤šå¬äº†ä¸€é Euphoria ã€‚\nä»Šå¤©ä¸ç”¨æ ¡å†…é›†åˆï¼Œç„¶è€Œè€ƒåœºåœ¨ 8 æ¥¼ï¼Œäºæ˜¯è¦åç”µæ¢¯ã€‚åªä¸è¿‡è¿˜æ˜¯æ²¡äººè¿‡æ¥æ­è¯ã€‚\nT1ï¼Œæ€ä¹ˆæ˜¯è®¡æ•°å•Šï¼ˆ\nçœ‹äº†å‡ åˆ†é’Ÿæ„Ÿè§‰ä¸å¤ªä¼šåšï¼Œäººè¦æ‡µäº†ï¼Œè¿™æ˜¯ D2T1 å—ï¼ˆ\nå†·é™äº†ä¸€ä¸‹ï¼Œæƒ³åˆ°ä¸€ä¸ªå‡çš„ $O(n^2m)$ åšæ³•ã€‚\nç„¶åå»çœ‹ T2ï¼Œæ€ä¹ˆåŠæˆ‘åªä¼š $O(n^3)$..ä½† $O(n^2)$ å¥½åƒå¾ˆå¯åšçš„æ ·å­ã€‚\nç„¶åå»çœ‹ T3ï¼Œæ€ä¹ˆåŠæˆ‘åªä¼š $O(n^2)$..ä½†é“¾å’ŒèŠèŠ±å¥½åƒå¾ˆå¯åšçš„æ ·å­ã€‚\nå†™ T1 å†™åˆ°ä¸€åŠï¼Œå‘ç°è‡ªå·±å‡äº†ã€‚å†·é™äº†ä¸€ä¸‹ï¼Œæƒ³åˆ°ä¸€ä¸ª $O(n^3m)$ åšæ³•ã€‚8700k åº”è¯¥å•¥éƒ½èƒ½è¿‡å§.png\nå†™å®Œä¸€æµ‹ï¼Œ4.8sï¼Œäººæ²¡äº†ã€‚\nå¡äº†å¡å¸¸ï¼Œ3.6sï¼Œäººæ²¡äº†ã€‚\nå¼€ O2ï¼Œ1.2sã€‚ä½†è¦æ˜¯æ‰‹å¼€ O2 æˆ‘å°±çœŸæ²¡äº†ã€‚æ€ä¹ˆæ‰‹å†™å–æ¨¡ä¼˜åŒ–å•Š.png\nç„¶åå»å†™ T2ï¼Œè¿˜æ²¡å¼€å§‹å†™å°±å‘ç°å¯ä»¥ $O(n^2\\log n)$ã€‚å†™å®Œä¸€æµ‹ï¼Œ5sï¼Œæˆ‘åˆæ²¡äº†ã€‚å‘ç°å¤šæ¬¡äºŒåˆ†å¯ä»¥ç”¨åŒæŒ‡é’ˆï¼ˆåœ¨ ä¸€äº›æ³¨æ„äº‹é¡¹ ä¸­æœ‰ï¼‰ï¼Œäºæ˜¯å°± $O(n^2)$ äº†ï¼Œè·‘çš„æŒºå¿«ã€‚\nç„¶åå»å†™ T3ã€‚$O(n^2)$ æŒºå¥½å†™çš„ã€‚é“¾å¥½åƒå¾ˆç®€å•ã€‚å®Œç¾äºŒå‰æ ‘æ˜¯å•¥..æ‰‹ç”»ä¸€ä¸‹ï¼Œå‘ç°å‰©ä¸‹æ¥è¾ƒå¤§çš„é‚£éƒ¨åˆ†çš„é‡å¿ƒåªèƒ½æ˜¯æ ¹æˆ–æ ¹çš„å„¿å­æˆ–æ ¹å’Œæ ¹çš„å„¿å­ï¼Œäºæ˜¯ä¹Ÿå¾ˆå¥½å†™ã€‚\næ­¤æ—¶ 11:00 äº†ã€‚\nä¸ºä»€ä¹ˆæˆ‘ä¸ä¼šåš D2T1 å•Š..äºæ˜¯é€‰æ‹©å»çœ‹ T1ã€‚è¿™ä¸ªèƒŒåŒ…å¯ä»¥ NTT ä¼˜åŒ–å—..åœ¨è„‘å†…æ€è€ƒäº† 5s NTT æ˜¯å¦åº”å½“å‡ºç°åœ¨ CSP ä¸­åï¼Œæˆ‘æˆåŠŸç®—é”™äº†å¤æ‚åº¦ï¼Œä»¥ä¸ºå®ƒæ˜¯ $O(n^2m\\log)$ çš„ï¼Œç„¶åå†™äº†ä¸ªæé™æ•°æ®è·‘ 80s çš„ $O(n^2m\\log^2)$\u0026hellip;\næœ€åä¹Ÿæ²¡æœ‰è·å¾—æ›´å¤šåˆ†æ•°äº†ã€‚åªä¸è¿‡è¿™å¤©æå‰ 10min å°±å¼€å§‹æ£€æŸ¥æ–‡ä»¶ç›¸å…³é—®é¢˜äº†ã€‚è€Œä¸”å…¨éƒ¨éƒ½ using namespace std; äº†ï¼Œä¹Ÿåœ¨ NOI Linux ä¸‹ç¼–è¯‘äº†ã€‚æ„Ÿè§‰æŒºæ”¾å¿ƒçš„ã€‚\nè¿™æ¬¡å‡ºæ¥æ²¡æœ‰ç›´æ¥è·‘æ‰ï¼Œç„¶åå°±å¬è¯´é—«è€å¸ˆ A äº† T1ï¼ŒT2 88ã€‚è¿˜å¬è¯´åä¸€å‰å‡ å¤©æ ¡å†…è®²äº† T2..\nåœ¨å›å®¶çš„è·¯ä¸Šè¢«å‘ŠçŸ¥ä¸‹åˆè¦å»å­¦æ ¡ä¸Š whk..ç„¶åä¹¦åŒ…éƒ½æ²¡æ‹¿ï¼ˆå®é™…ä¸Šä¹¦åŒ…é‡Œä¹Ÿæ²¡æœ‰ä»»ä½• whk ç›¸å…³çš„ä¸œè¥¿ï¼‰ï¼Œåƒå®Œé¥­å°±å»äº†ï¼Œè¿˜è¿Ÿåˆ°äº† 5minã€‚\nå¬è¯´æ˜¯ä¸å‰æ®µæ—¶é—´å†…å®¹æ— å…³çš„ç‰©ç†è¯¾ï¼Œç„¶åè¿˜çœŸæ˜¯ä¸å‰é¢çš„ç”µå­¦æ— å…³çš„åŠ¨é‡ï¼Œç»™äººçš„æ„Ÿè§‰å‡ ä¹æ˜¯æ¥ç€æˆ‘åœè¯¾å‰å¾€åè®²ï¼Œäºæ˜¯è¿˜ç®—é¡ºç•…ã€‚\né€‰ä¿® 3-5 åé¢çš„å‡ ç« è¿˜ç¨å¾®æœ‰ä¸€ç‚¹ç‚¹æ¶‰åŠç”µå­¦å†…å®¹ï¼Œé‡å­åŠ›å­¦ä»€ä¹ˆçš„ä¹Ÿæ²¡æœ‰å®Œå…¨çœ‹æ‡‚ï¼Œè®¡ç®—ä»€ä¹ˆçš„éƒ½è·³è¿‡äº†ï¼Œç„¶è€Œæˆ‘æ™šè‡ªä¹ å°±é¡ºç€æŠŠä¹¦çœ‹å®Œäº†ï¼ˆæ„Ÿè§‰çœ‹å®Œåå•¥éƒ½æ²¡å­¦ä¼šï¼‰ã€‚\nDay 3 ä¸Šåˆæ˜¯å¿«ä¹çš„ whk ç”Ÿæ´»ã€‚è¯­æ–‡è¯¾è®²æœŸä¸­è€ƒè¯•å·å­ï¼Œæˆ‘å°±æ‹¿åˆ«äººçš„å·å­çœ‹äº†ä¸‹ä¸Šé¢çš„å‡ ç¯‡é˜…è¯»ã€‚æ•°å­¦è¯¾è®²æ±‚å¯¼ï¼Œäºæ˜¯å°±å†™äº†ä¸‹ç‰©ç†ä½œä¸šï¼ˆæ²¡æ¯›ç—…ï¼‰ã€‚åŒ–å­¦è¯¾å®Œå…¨è‡ªé—­äº†ï¼Œäºæ˜¯å°±å†™å®Œäº†ç‰©ç†ä½œä¸šï¼ˆå¦ä¸€ç§æ„ä¹‰ä¸Šçš„æ²¡æ¯›ç—…ï¼‰ã€‚\nä¸‹åˆå¥½åƒå•¥éƒ½æ²¡å¹²ï¼Œçœ‹ç€é—«è€å¸ˆå’Œè‚–è€å¸ˆæ‹¿æ°‘é—´æ•°æ®æµ‹å…¨çœï¼Œç„¶åå‘ç° jxl å¯èƒ½ 535\u0026hellip;\næ™šä¸Šå†™æ¸¸è®°ã€‚\nç„¶åå‘ç° D1T3 wqy çš„é¢˜è§£å¥½åƒå’Œæˆ‘çš„æ€è·¯å·®ä¸å¤šï¼Œå°±è¯•å›¾æ‹¿æˆ‘çš„è€ƒåœºä»£ç è°ƒï¼Œå‘ç°è°ƒä¸å‡ºæ¥ï¼Œå°±é‡å†™äº†ä¸€éï¼Œè°ƒè¿‡å°æ ·ä¾‹ä¹‹åè·å¾—äº†é“¾çš„ 25 åˆ†..\nDay 4 ä»Šå¤©ä¸Šäº†ä¸€æ•´å¤© whkï¼Œä¸Šåˆè¿˜æ˜¯åŒ–å­¦è‡ªé—­ï¼Œå…¶å®ƒè¯¾è¿˜å¥½ï¼Œä¸‹åˆæ˜¯ä½“æ£€ \u0026amp; åœ°ç† \u0026amp; æ”¿æ²»ï¼ˆé©¬ä¸Šå­¦è€ƒäº†ï¼‰ã€‚\næ™šä¸Šè¿‡æ¥ç»™ UOJ #487 åŠ äº†ä¸ªè´Ÿè‡ªç¯çš„æ ·ä¾‹ï¼Œç¨å¾®ä¿®äº†ä¸‹é¢˜é¢ã€‚ç¬¬ä¸€æ¬¡ç”¨ svnã€‚ï¼ˆå¹¶ä¸çŸ¥é“ UOJ ç¤¾åŒºç‰ˆæŠŠ svn é˜‰å‰²æ‰ä¹‹åæ€ä¹ˆè¿œç¨‹ä¸‹è½½æ•°æ®ï¼Œåªä¸è¿‡ Hinata Online Judge æ˜¯èµ„ç“·çš„ã€‚ï¼‰\nç„¶åç»§ç»­è°ƒ D1T3ï¼Œä¸€å¼€å§‹ç”¨ $n=10$ çš„æ•°æ®è°ƒè‡ªé—­äº†ï¼Œå¯¹æ‹å‡º $n=4$ çš„æ•°æ®ä¹‹å 5min å°±è°ƒå‡ºæ¥äº†..\næ„Ÿè§‰è¦æ˜¯å¤´è„‘æ¸…é†’è€Œä¸”åƒå…”é‚£æ · 30min AC T1T2ï¼Œè¿˜æ˜¯èƒ½åœ¨è€ƒåœºä¸Šå†™å‡ºæ¥çš„..\né¢˜è§£ D1T1 ä¾é¢˜æ„æ¨¡æ‹Ÿï¼Œè®°å¾—å¼€ unsigned long long ã€‚\nè€ƒåœºä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; typedef unsigned long long ull; void solve(int n, ull k) { if (n == 0) return; if (k \u0026lt; (1ull \u0026lt;\u0026lt; (n - 1))) { std::cout \u0026lt;\u0026lt; 0; solve(n - 1, k); } else { std::cout \u0026lt;\u0026lt; 1; solve(n - 1, (1ull \u0026lt;\u0026lt; (n - 1)) - 1 - (k \u0026amp; ((1ull \u0026lt;\u0026lt; (n - 1)) - 1))); } } int main() { int n; ull k; std::cin \u0026gt;\u0026gt; n \u0026gt;\u0026gt; k; solve(n, k); puts(\u0026quot;\u0026quot;); return 0; }   D1T2 æˆ‘çš„è€ƒåœºåšæ³•å¥½åƒæ¯”è¾ƒéº»çƒ¦..\nå¤§è‡´æ€è·¯æ˜¯å®šä¹‰ä¸€ä¸ªç‚¹çš„æƒå€¼æ˜¯å®ƒåˆ°æ ¹çš„è·¯å¾„ä¸Šå·¦æ‹¬å·ä¸ªæ•°å‡å»å³æ‹¬å·ä¸ªæ•°ï¼Œå¹¶ä¸”ç»´æŠ¤æ¯ä¸ªç‚¹å‘ä¸Šå¤šå°‘ä¸ªç‚¹æ»¡è¶³å³æ‹¬å·ä¸ªæ•°ä¹‹å’Œä¸å°‘äºå·¦æ‹¬å·ä¸ªæ•°ä¹‹å’Œï¼Œåé¢è¿™ä¸ªä¸œè¥¿ç»´æŠ¤çš„æ—¶å€™è¦åˆ†å‡ ç§æƒ…å†µè®¨è®ºã€‚\nç»´æŠ¤äº†è¿™ä¸¤ä¸ªä¿¡æ¯ï¼Œæ¯ä¸ªç‚¹æ–°å¢çš„åˆæ³•æ‹¬å·ä¸²å°±æ˜¯ä¸€æ®µåŒºé—´é‡Œæƒå€¼ä¸ºæŸä¸ªæ•°çš„ç‚¹çš„ä¸ªæ•°ï¼Œç¦»çº¿ä¸‹æ¥å°±å¯ä»¥ $O(n)$ ä¸”æ— éœ€é«˜çº§æ•°æ®ç»“æ„åœ°è§£å†³äº†ã€‚\nè€ƒåœºä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;string\u0026gt; #include \u0026lt;fstream\u0026gt; using std::cin; using std::string; using std::vector; typedef long long ll; typedef std::pair\u0026lt;int, int\u0026gt; pii; int n; string s, t; vector\u0026lt;ll\u0026gt; ans; vector\u0026lt;vector\u0026lt;int\u0026gt; \u0026gt; g; vector\u0026lt;vector\u0026lt;pii\u0026gt; \u0026gt; q; vector\u0026lt;int\u0026gt; jump, tot, pa; void dfs(int u, int cnt) { cnt += s[u - 1] == '(' ? 1 : -1; if (s[u - 1] == ')') ans[u] = tot[cnt + n]; if (u == 1) jump[u] = 1; else if (s[u - 1] == ')') jump[u] = jump[pa[jump[pa[u]]]]; else if (s[pa[u] - 1] == ')') jump[u] = jump[pa[pa[u]]]; else jump[u] = u; if (s[u - 1] == ')') q[pa[pa[jump[pa[u]]]]].push_back(pii(u, cnt)); ++tot[cnt + n]; for (int i = 0; i \u0026lt; g[u].size(); ++i) dfs(g[u][i], cnt); for (int i = 0; i \u0026lt; q[u].size(); ++i) ans[q[u][i].first] -= tot[q[u][i].second + n]; --tot[cnt + n]; } int main() { cin \u0026gt;\u0026gt; n \u0026gt;\u0026gt; s; g.resize(n + 1); q.resize(n + 1); ans.resize(n + 1); pa.resize(n + 1, 0); jump.resize(n + 1, 1); tot.resize(2 * n + 1, 0); for (int i = 2; i \u0026lt;= n; ++i) { cin \u0026gt;\u0026gt; pa[i]; g[pa[i]].push_back(i); } jump[0] = 1; tot[n] = 1; dfs(1, 0); ll out = ans[1]; for (int i = 2; i \u0026lt;= n; ++i) { ans[i] += ans[pa[i]]; out ^= ans[i] * i; } std::cout \u0026lt;\u0026lt; out \u0026lt;\u0026lt; std::endl; return 0; }   D1T3 ï¼ˆæˆ‘åœ¨æ¸¸è®°é‡Œè¯´è¿‡å¤§è‡´æ€è·¯äº†ã€‚ï¼‰\næŠŠåˆ è¾¹è§†ä½œç»™è¾¹ç¼–å·ï¼Œæ¯ä¸ªç‚¹å‡ºå‘å…ˆèµ°ç¼–å·æœ€å°çš„å‡ºè¾¹ï¼Œç„¶åèµ°æ¥åˆ°å½“å‰ç‚¹çš„è¾¹åœ¨å½“å‰ç‚¹å‡ºè¾¹ä¸­ç¼–å·çš„åç»§ã€‚äºæ˜¯å¯ä»¥å…³äºæ¯ä¸ªç‚¹ç”¨é“¾è¡¨ç»´æŠ¤ä¸€ä¸ªå‡ºè¾¹çš„é¡ºåºï¼Œå†æšä¸¾æ¯ä¸ªæ•°å­—ï¼ŒDFS æ±‚å‡ºå®ƒçš„ç»ˆç‚¹å¯ä»¥åœ¨å“ªäº›ä½ç½®ï¼Œé€‰æ‹©å…¶ä¸­æœ€å°çš„ä¸€ä¸ªã€‚\nç„¶åä¼šå‘ç°æœ‰å¾ˆå¤šç»†èŠ‚ï¼Œä½¿ç”¨å¹¶æŸ¥é›†ä¼šæ¯”é“¾è¡¨å¥½å†™ä¸€äº›ï¼ˆè™½ç„¶å¤æ‚åº¦ä¼šç•¥å¾®å¤§ä¸€ç‚¹ç‚¹ï¼‰ã€‚\nä»£ç æ˜¯è°ƒè¯•äº†ä¸€ä¸‡éå†™å‡ºæ¥çš„ï¼Œå¯èƒ½æœ‰åœ°æ–¹ä¼šæœ‰äº›å†—ä½™..\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; using namespace std; vector\u0026lt;bool\u0026gt; able; vector\u0026lt;vector\u0026lt;bool\u0026gt; \u0026gt; haspre; vector\u0026lt;int\u0026gt; a, pa, ans, head, tail; vector\u0026lt;vector\u0026lt;int\u0026gt; \u0026gt; f, g, nxt, siz; int find(int u, int x) { return x == f[u][x] ? x : f[u][x] = find(u, f[u][x]); } void dfs(int u) { if (!pa[u]) { if (head[u]) { int v = head[u]; pa[v] = u; dfs(v); } else { for (int i = 0; i \u0026lt; g[u].size(); ++i) { int v = g[u][i]; if (!haspre[u][v] \u0026amp;\u0026amp; !(tail[u] \u0026amp;\u0026amp; find(u, v) == find(u, tail[u]) \u0026amp;\u0026amp; siz[u][find(u, v)] \u0026lt; g[u].size())) { pa[v] = u; dfs(v); } } } } else { if (nxt[u][pa[u]]) { int v = nxt[u][pa[u]]; pa[v] = u; dfs(v); } else { if (!tail[u] \u0026amp;\u0026amp; !(find(u, pa[u]) == find(u, head[u]) \u0026amp;\u0026amp; siz[u][find(u, head[u])] \u0026lt; g[u].size())) able[u] = true; if (find(u, pa[u]) != find(u, tail[u])) { for (int i = 0; i \u0026lt; g[u].size(); ++i) { int v = g[u][i]; if (find(u, v) != find(u, head[u]) \u0026amp;\u0026amp; find(u, pa[u]) != find(u, v) \u0026amp;\u0026amp; !haspre[u][v] \u0026amp;\u0026amp; !(find(u, pa[u]) == find(u, head[u]) \u0026amp;\u0026amp; find(u, v) == find(u, tail[u]) \u0026amp;\u0026amp; siz[u][find(u, pa[u])] + siz[u][find(u, v)] \u0026lt; g[u].size())) { pa[v] = u; dfs(v); } } } } } } void apply(int u, int from) { if (!from) tail[u] = pa[u]; else if (!pa[u]) { head[u] = from; return; } else { nxt[u][pa[u]] = from; haspre[u][from] = true; siz[u][find(u, from)] += siz[u][find(u, pa[u])]; f[u][find(u, pa[u])] = find(u, from); } apply(pa[u], u); } int main() { int T; cin \u0026gt;\u0026gt; T; while (T--) { int n; cin \u0026gt;\u0026gt; n; a.resize(n + 1); ans.resize(n + 1); head.assign(n + 1, 0); tail.assign(n + 1, 0); g.assign(n + 1, vector\u0026lt;int\u0026gt;()); f.assign(n + 1, vector\u0026lt;int\u0026gt;(n + 1, 0)); siz.assign(n + 1, vector\u0026lt;int\u0026gt;(n + 1, 1)); nxt.assign(n + 1, vector\u0026lt;int\u0026gt;(n + 1, 0)); haspre.assign(n + 1, vector\u0026lt;bool\u0026gt;(n + 1, false)); for (int i = 1; i \u0026lt;= n; ++i) cin \u0026gt;\u0026gt; a[i]; for (int i = 1; i \u0026lt; n; ++i) { int u, v; cin \u0026gt;\u0026gt; u \u0026gt;\u0026gt; v; g[u].push_back(v); g[v].push_back(u); f[u][v] = v; f[v][u] = u; } if (n == 1) { puts(\u0026quot;1\u0026quot;); continue; } for (int i = 1; i \u0026lt;= n; ++i) { able.assign(n + 1, false); pa.assign(n + 1, 0); dfs(a[i]); for (int j = 1; j \u0026lt;= n; ++j) { if (able[j]) { cout \u0026lt;\u0026lt; j \u0026lt;\u0026lt; \u0026quot; \\n\u0026quot;[i == n]; apply(j, 0); break; } } } } return 0; }   D2T1 é¦–å…ˆå¯ä»¥é€šè¿‡ $O(n^2)$ çš„ DP æ±‚å‡ºæ²¡æœ‰ Yazid çš„é™åˆ¶ï¼ˆæ¯ç§ä¸»è¦é£Ÿæä¸è¶…è¿‡ä¸€åŠï¼‰çš„ç­”æ¡ˆã€‚\nç„¶åæšä¸¾æ¯ç§ä¸»è¦é£Ÿæï¼Œç®—å‡ºè¶…è¿‡ä¸€åŠçš„æ–¹æ¡ˆæ•°ã€‚\nä¸¤éƒ¨åˆ†ç­”æ¡ˆç›¸å‡å³ä¸ºæœ€ç»ˆç­”æ¡ˆã€‚\nç¬¬ä¸€éƒ¨åˆ†æ¯”è¾ƒç®€å•ï¼Œæˆ‘çŒœå¤§å®¶éƒ½ä¼šï¼Œæ¯•ç«Ÿè¿™æ˜¯ä¸ªåŸºæœ¬çš„èƒŒåŒ…é—®é¢˜..\nç¬¬äºŒéƒ¨åˆ†çš„è¯ï¼Œæšä¸¾ä¸»è¦é£Ÿæåæœ‰ä¸€ä¸ªæ¯”è¾ƒå®¹æ˜“æƒ³åˆ°çš„ $O(n^3)$ DPï¼Œä½†åº”è¯¥æ˜¯æ— æ³•é€šè¿‡æœ¬é¢˜çš„ã€‚\nè¿™ä¸ª $O(n^3)$ DP è®¡ç®—äº†ä½¿ç”¨å¤šå°‘ç§å½“å‰æšä¸¾çš„é£Ÿæä»¥åŠå¤šå°‘ç§éå½“å‰æšä¸¾çš„é£Ÿæçš„æ–¹æ¡ˆæ•°ï¼Œä½†å®é™…ä¸Šæˆ‘ä»¬å¹¶ä¸å…³å¿ƒè¿™ä¸¤ç§æƒ…å†µå…·ä½“æœ‰å¤šå°‘ç§é£Ÿæï¼Œè€Œåªå…³å¿ƒå®ƒä»¬çš„å·®ï¼Œæ‰€ä»¥å¯ä»¥å¾—åˆ°ä¸‹é¢è¿™ç§ $O(n^2)$ çš„ DP æ–¹æ³•ï¼š\nä»¤ $f_{i, j}$ è¡¨ç¤ºä½¿ç”¨ $1\\sim i$ è¿™äº›çƒ¹é¥ªæ–¹æ³•ï¼Œåšäº† $x$ é“å½“å‰æšä¸¾çš„é£Ÿæï¼Œ$x-j$ é“éå½“å‰æšä¸¾çš„é£Ÿæï¼Œçš„æ–¹æ¡ˆæ•°ã€‚ä»¤å½“å‰æšä¸¾çš„é£Ÿæä¸º $t$ ã€‚\nè½¬ç§»æœ‰ä¸‰ç§æƒ…å†µï¼Œä¸åš/åšæšä¸¾çš„/åšéæšä¸¾çš„ï¼Œæ‰€ä»¥ï¼Œ$f_{i,j}=f_{i-1,j}+a_{i,t}f_{i-1,j-1}+\\left(\\left(\\sum_{p=1}^m a_{i, p}\\right)-a_{i,t}\\right)f_{i-1,j+1}$ ã€‚\nå¯¹ç¬¬äºŒéƒ¨åˆ†ç­”æ¡ˆçš„è´¡çŒ®æ˜¯ $\\sum_{i=1}^nf_{n,i}$ ã€‚\næ€»å¤æ‚åº¦ $O(n^2m)$ ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; using namespace std; typedef long long ll; const int mod = 998244353; int n, m, ans; vector\u0026lt;int\u0026gt; sum; vector\u0026lt;vector\u0026lt;int\u0026gt; \u0026gt; a, f; int main() { scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;n, \u0026amp;m); sum.resize(n + 1, 0); a.resize(n + 1, vector\u0026lt;int\u0026gt;(m + 1)); for (int i = 1; i \u0026lt;= n; ++i) { for (int j = 1; j \u0026lt;= m; ++j) { scanf(\u0026quot;%d\u0026quot;, \u0026amp;a[i][j]); sum[i] = (sum[i] + a[i][j]) % mod; } } f.resize(n + 1, vector\u0026lt;int\u0026gt;(n + 1, 0)); f[0][0] = 1; for (int i = 1; i \u0026lt;= n; ++i) { f[i][0] = 1; for (int j = 1; j \u0026lt;= i; ++j) { f[i][j] = (f[i - 1][j] + (ll) f[i - 1][j - 1] * sum[i]) % mod; } } for (int i = 1; i \u0026lt;= n; ++i) ans = (ans + f[n][i]) % mod; for (int i = 1; i \u0026lt;= m; ++i) { f.assign(n + 1, vector\u0026lt;int\u0026gt;(2 * n + 3, 0)); f[0][n + 1] = 1; // ä¸‹æ ‡åŠ ä¸Š n+1 é¿å…è´Ÿæ•°ä¸‹æ ‡ for (int j = 1; j \u0026lt;= n; ++j) { for (int k = n + 1 - j; k \u0026lt;= n + 1 + j; ++k) { f[j][k] = ((ll) a[j][i] * f[j - 1][k - 1] + (ll) (sum[j] - a[j][i] + mod) * f[j - 1][k + 1] + f[j - 1][k]) % mod; } } for (int j = n + 2; j \u0026lt;= n * 2 + 1; ++j) ans = (ans - f[n][j] + mod) % mod; } cout \u0026lt;\u0026lt; ans; return 0; }   D2T2 é¦–å…ˆæ˜¯ä¸€ä¸ªç»“è®ºï¼šæœ€åä¸€ä¸ªæ–­ç‚¹æœ€å¤§çš„è§£æ˜¯æœ€ä¼˜è§£ã€‚è¯æ˜è¯·å‚è€ƒ myy çš„é¢˜è§£ã€‚ï¼ˆå› ä¸ºè‡ªå·±å¹¶æ²¡æœ‰æƒ³åˆ°ä»€ä¹ˆæ›´åŠ ç®€æ´çš„è¯æ³•..ï¼‰ï¼ˆå½“ç„¶è¿˜å¯ä»¥æ‰“è¡¨å‘ç°ã€‚ï¼‰\næœ‰äº†è¿™ä¸ªç»“è®ºä¹‹åï¼Œä»¤ $f_i$ è¡¨ç¤º $[1,i]$ è¿™æ®µçš„æœ€åä¸€ä¸ªæ–­ç‚¹çš„æœ€å¤§å€¼ï¼Œé‚£ä¹ˆï¼Œ$f_i=\\max\\{j|j\\in\\mathbb{N},(\\sum_{t=f_j+1}^ja_t)\\le(\\sum_{t=j+1}^ia_t)\\}$ ã€‚\né¢„å¤„ç†å‰ç¼€å’Œ $pre[i]=\\sum_{j=1}^ia_i$ï¼Œé‚£ä¹ˆ $f_{i}=\\max\\{j|j\\in\\mathbb{N},2pre[j]-pre[f_j]\\le pre[i]\\}$ ï¼Œç„¶åå°±å¯ä»¥ç”¨å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–äº†ã€‚\néœ€è¦é«˜ç²¾çš„åªæœ‰æœ€åçš„ç­”æ¡ˆè®¡ç®—ï¼Œè¿™å¯ä»¥ç”¨ __int128 å®ç°ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; struct IO { #define MAXSIZE (1 \u0026lt;\u0026lt; 20) #define isdigit(x) (x \u0026gt;= '0' \u0026amp;\u0026amp; x \u0026lt;= '9') char buf[MAXSIZE], *p1, *p2; char pbuf[MAXSIZE], *pp; #if DEBUG #else IO() : p1(buf), p2(buf), pp(pbuf) {} ~IO() { fwrite(pbuf, 1, pp - pbuf, stdout); } #endif inline char gc() { #if DEBUG return getchar(); #endif if (p1 == p2) p2 = (p1 = buf) + fread(buf, 1, MAXSIZE, stdin); return p1 == p2 ? ' ' : *p1++; } inline bool blank(char ch) { return ch == ' ' || ch == '\\n' || ch == '\\r' || ch == '\\t'; } template \u0026lt;class T\u0026gt; inline void read(T \u0026amp;x) { register double tmp = 1; register bool sign = 0; x = 0; register char ch = gc(); for (; !isdigit(ch); ch = gc()) if (ch == '-') sign = 1; for (; isdigit(ch); ch = gc()) x = x * 10 + (ch - '0'); if (ch == '.') for (ch = gc(); isdigit(ch); ch = gc()) tmp /= 10.0, x += tmp * (ch - '0'); if (sign) x = -x; } inline void read(char *s) { register char ch = gc(); for (; blank(ch); ch = gc()) ; for (; !blank(ch); ch = gc()) *s++ = ch; *s = 0; } inline void read(char \u0026amp;c) { for (c = gc(); blank(c); c = gc()) ; } inline void push(const char \u0026amp;c) { #if DEBUG putchar(c); #else if (pp - pbuf == MAXSIZE) fwrite(pbuf, 1, MAXSIZE, stdout), pp = pbuf; *pp++ = c; #endif } template \u0026lt;class T\u0026gt; inline void write(T x) { if (x \u0026lt; 0) x = -x, push('-'); static T sta[35]; T top = 0; do { sta[top++] = x % 10, x /= 10; } while (x); while (top) push(sta[--top] + '0'); } template \u0026lt;class T\u0026gt; inline void write(T x, char lastChar) { write(x), push(lastChar); } } io; const int N = 4e7 + 5; typedef long long ll; ll a[N]; int n, type, f[N], q[N], ql = 1, qr; ll calc(int x) { return a[x] * 2 - a[f[x]]; } void write(__int128 x) { if (x \u0026gt; 9) write(x / 10); putchar(x % 10 + '0'); } int main() { io.read(n); io.read(type); if (type == 0) for (int i = 1; i \u0026lt;= n; ++i) io.read(a[i]); else { int x, y, z, b, c, m; io.read(x); io.read(y); io.read(z); io.read(b); io.read(c); io.read(m); int k = 1; for (int i = 1; i \u0026lt;= m; ++i) { int p, l, r; io.read(p); io.read(l); io.read(r); while (k \u0026lt;= p) { int t; if (k == 1) t = b; else if (k == 2) t = c; else { t = ((ll) x * c + (ll) y * b + z) \u0026amp; ((1 \u0026lt;\u0026lt; 30) - 1); b = c; c = t; } a[k++] = t % (r - l + 1) + l; } } } for (int i = 2; i \u0026lt;= n; ++i) a[i] += a[i - 1]; for (int i = 1; i \u0026lt;= n; ++i) { while (ql \u0026lt; qr \u0026amp;\u0026amp; calc(q[ql + 1]) \u0026lt;= a[i]) ++ql; if (ql \u0026gt; qr || calc(q[ql]) \u0026gt; a[i]) f[i] = 0; else f[i] = q[ql]; ll tmp = calc(i); while (ql \u0026lt;= qr \u0026amp;\u0026amp; tmp \u0026lt;= calc(q[qr])) --qr; q[++qr] = i; } __int128 ans = 0; for (int i = n; i; i = f[i]) ans += (__int128) (a[i] - a[f[i]]) * (a[i] - a[f[i]]); write(ans); return 0; }   D2T3 æ€ä¹ˆä»Šå¹´ D2T3 åˆæ˜¯ NOI é€‰æ‰‹ä»¬çº·çº·ç”¨ç¥ä»™åšæ³•ç§’æ‰ï¼Œç„¶åé¢˜è§£åŒºçªœå‡ºä¸€ä¸ªç¥å¥‡çš„å€å¢åšæ³•ï¼ˆ\nçŸäº†çœ¼ä¸»å¸­æ ‘é¢˜è§£ï¼Œæ„Ÿè§‰è‡ªå·±å¤§çº¦èƒ½æƒ³å‡ºæ¥ï¼Œäºæ˜¯å»å­¦ä¹ äº†ä¸€ä¸‹ç¥å¥‡çš„å€å¢åšæ³•ï¼š\nè¿›è¡Œæ ‘é“¾å‰–åˆ†ï¼ˆå®é™…ä¸Šåªç”¨æ±‚å‡ºé‡å„¿å­è€Œä¸ç”¨è¿›è¡Œå‰–åˆ†ï¼‰ï¼Œæœ‰ä¸€ä¸ªæ€§è´¨ï¼šå¦‚æœé‡å¿ƒåœ¨ä¸€ä¸ªå­æ ‘å†…ï¼Œä¸”è¿™ä¸ªå­æ ‘çš„æ ¹ä¸æ˜¯é‡å¿ƒï¼Œé‚£ä¹ˆé‡å¿ƒä¸€å®šåœ¨æ ¹çš„é‡å„¿å­é‚£æ£µå­æ ‘é‡Œã€‚\nï¼ˆå¦‚æœæœ‰å¤šä¸ªå„¿å­å¤§å°ä¸€æ ·ï¼Œé‡å¿ƒåªèƒ½æ˜¯æ ¹ã€‚ï¼‰\nç„¶åå°±å¯ä»¥å‘ä¸‹å€å¢æ‰¾åˆ°é‡å¿ƒï¼ˆå¦‚æœè·³è¿‡å»ä¹‹åâ€œå‘ä¸Šâ€çš„å­æ ‘å¤§å°ä¸è¶…è¿‡æ€»ç‚¹æ•°ä¸€åŠå°±è·³è¿‡å»ï¼‰ã€‚æ‰¾åˆ°ä¹‹åè¿˜è¦åˆ¤å…¶çˆ¶äº²æ˜¯å¦ä¹Ÿæ˜¯é‡å¿ƒã€‚\nç„¶è€Œè¿™æ ·åªèƒ½å¤„ç†æœ‰æ ¹æ ‘çš„å­æ ‘ï¼Œå¦ä¸€åŠçš„å­æ ‘ï¼ˆâ€œå‘ä¸Šâ€çš„å­æ ‘ï¼‰éœ€è¦ç±»ä¼¼æ¢æ ¹ DP è¿›è¡Œå¤„ç†ï¼Œéœ€è¦åˆ†å‡ ç§æƒ…å†µè®¨è®ºï¼Œå…·ä½“ç»†èŠ‚å¯ä»¥è‡ªè¡Œè„‘è¡¥ + å¯¹æ‹å‘ç°è‡ªå·±æ¼äº†å“ªç§æƒ…å†µã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef pair\u0026lt;int, int\u0026gt; pii; int read() { int out = 0; char c; while (!isdigit(c = getchar())); for (; isdigit(c); c = getchar()) out = out * 10 + c - '0'; return out; } int n, dfntot; long long ans; vector\u0026lt;vector\u0026lt;int\u0026gt; \u0026gt; g, bz; vector\u0026lt;int\u0026gt; dep, siz, pa, dfn, exi; struct Val { pii fi, se; Val() { fi = se = pii(0, 0); } void insert(pii x) { if (x \u0026gt; fi) { se = fi; fi = x; } else if (x \u0026gt; se) se = x; } pii get(pii x = pii(-1, -1)) { if (x == fi) return se; return fi; } }; vector\u0026lt;Val\u0026gt; son; void dfs1(int u) { siz[u] = 1; dfn[u] = ++dfntot; for (int i = 0; i \u0026lt; g[u].size(); ++i) { int v = g[u][i]; if (v == pa[u]) continue; dep[v] = dep[u] + 1; pa[v] = u; dfs1(v); siz[u] += siz[v]; son[u].insert(pii(siz[v], v)); } exi[u] = dfntot; if (u == 1) return; bz[u][0] = son[u].get().second; for (int i = 1; i \u0026lt;= 17; ++i) bz[u][i] = bz[bz[u][i - 1]][i - 1]; int x = u; for (int i = 17; i \u0026gt;= 0; --i) { int v = bz[x][i]; if (v \u0026amp;\u0026amp; siz[u] - siz[v] \u0026lt;= siz[u] / 2) x = v; } ans += x; if (siz[x] \u0026lt;= siz[u] / 2) ans += pa[x]; } bool judge(int u, int v) { if (!v) return false; int f = pa[u]; if (v == f) return true; if (dfn[f] \u0026gt;= dfn[v] \u0026amp;\u0026amp; dfn[f] \u0026lt;= exi[v]) return siz[pa[v]] - siz[u] \u0026lt;= (n - siz[u]) / 2; return n - siz[u] - siz[v] \u0026lt;= (n - siz[u]) / 2; } bool judge2(int u, int v) { if (v == u || !v) return false; int f = pa[u]; if (dfn[f] \u0026gt;= dfn[v] \u0026amp;\u0026amp; dfn[f] \u0026lt;= exi[v]) { return n - siz[v] \u0026lt;= (n - siz[u]) / 2 \u0026amp;\u0026amp; son[v].get(pii(siz[pa[v]], pa[v])).first \u0026lt;= (n - siz[u]) / 2; } return son[v].get().first \u0026lt;= (n - siz[u]) / 2; } void dfs2(int u) { vector\u0026lt;int\u0026gt; tmp = bz[u]; Val rson = son[u]; int f = pa[u]; int paf = pa[f]; if (u != 1) { pa[f] = u; son[u].insert(pii(n - siz[u], f)); bz[f][0] = son[f].get(pii(siz[u], u)).second; for (int i = 1; i \u0026lt;= 17; ++i) bz[f][i] = bz[bz[f][i - 1]][i - 1]; int x = f; for (int i = 17; i \u0026gt;= 0; --i) { int v = bz[x][i]; if (judge(u, v)) x = v; } ans += x; if (judge2(u, pa[x])) ans += pa[x]; } for (int i = 0; i \u0026lt; g[u].size(); ++i) { int v = g[u][i]; if (v == f) continue; dfs2(v); } bz[u] = tmp; pa[f] = paf; son[u] = rson; } int main() { int T; T = read(); while (T--) { n = read(); bz.resize(n + 1, vector\u0026lt;int\u0026gt;(18, 0)); g.assign(n + 1, vector\u0026lt;int\u0026gt;()); son.assign(n + 1, Val()); dep.resize(n + 1, 0); dfn.resize(n + 1, 0); exi.resize(n + 1, 0); siz.resize(n + 1, 0); pa.resize(n + 1, 0); ans = dfntot = 0; for (int i = 1; i \u0026lt; n; ++i) { int u = read(); int v = read(); g[u].push_back(v); g[v].push_back(u); } dfs1(1); dfs2(1); cout \u0026lt;\u0026lt; ans \u0026lt;\u0026lt; endl; } return 0; }  ","date":"2019-11-18T18:15:31+08:00","permalink":"https://ouuan.github.io/post/%E6%82%AC%E5%B4%96%E8%BE%B9%E7%9A%84%E8%B8%9F%E8%B9%B0-csp-s-2019/","tags":["CCFç³»åˆ—èµ›äº‹"],"title":"æ‚¬å´–è¾¹çš„è¸Ÿè¹° â€”â€” CSP-S 2019"},{"categories":["çŸ¥è¯†ç‚¹"],"contents":"å¤§å¤šæ•°äººæ‰€ä½¿ç”¨çš„è´¹ç”¨æµç®—æ³•ï¼Œå³æ¯æ¬¡æ±‚å‡ºæ®‹é‡ç½‘ç»œä¸­ $s$ åˆ° $t$ å…³äºè´¹ç”¨çš„æœ€çŸ­è·¯è¿›è¡Œå¢å¹¿ï¼ˆå°† Dinic æœ€å¤§æµç®—æ³•ä¸­çš„ BFS æ”¹ä¸º SPFAï¼‰ï¼Œæ˜¯ä¼ªå¤šé¡¹å¼å¤æ‚åº¦çš„ï¼Œæœ€åæƒ…å†µä¸‹å¤æ‚åº¦ä¸º $O(nmf)$ï¼Œå…¶ä¸­ $f$ ä¸ºæœ€å¤§æµã€‚å·²çŸ¥æœ‰ä¸€ç§åœ¨ç‚¹æ•°ä¸º $n$ï¼Œè¾¹æ•°ä¸º $O(n^2)$ï¼Œå€¼åŸŸä¸º $O(2^{n/2})$ æ—¶å°†å…¶ç”¨æ—¶å¡æˆå…³äº $n$ çš„æŒ‡æ•°çº§å¤æ‚åº¦çš„æ„é€ æ–¹æ³•ã€‚\næœ¬æ–‡å°†ä»‹ç»ä¸€ç§å¤æ‚åº¦ä¸ºè¿›è¡Œ $O(m\\log U)$ æ¬¡ï¼ˆ$U$ è¡¨ç¤ºè¾¹çš„æœ€å¤§å®¹é‡ï¼‰æ— è´Ÿæƒè¾¹å•æºæœ€çŸ­è·¯ï¼ˆä½¿ç”¨ priority_queue å®ç° Dijkstra ç®—æ³•ï¼Œæ€»å¤æ‚åº¦å³ä¸º $O(m^2\\log U\\log m)$ï¼‰çš„å¼±å¤šé¡¹å¼å¤æ‚åº¦ç®—æ³•ã€‚\nå…¶å®è¿™ä¸ªç®—æ³•å¹¶ä¸æ˜¯å¾ˆå¤æ‚ï¼ˆåªæ˜¯ç›¸å…³èµ„æ–™æ¯”è¾ƒå°‘ï¼Œä¼šå¯¹å­¦ä¹ é€ æˆä¸€å®šå›°éš¾ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘å†™è¿™ç¯‡åšå®¢çš„åŸå› ï¼‰ï¼Œæœ€å°è´¹ç”¨æœ€å¤§æµçš„æ¨¡æ¿ä¹Ÿåªéœ€è¦ $2.5KB$ï¼Œå¹¶ä¸æ¯”å¸¸è§çš„ä¼ªå¤šé¡¹å¼å¤æ‚åº¦ç®—æ³•é•¿å¾ˆå¤šã€‚\nhack å¸¸è§çš„è´¹ç”¨æµç®—æ³• å¯ä»¥å‚è€ƒ è¿™ç¯‡åšå®¢ï¼Œé‡Œé¢ç»™å‡ºäº†ä¸€ä¸ªç”¨ Python å†™çš„æ•°æ®ç”Ÿæˆå™¨ï¼Œè°ƒç”¨å‡½æ•° mcmf_worst_instance(k) å¯ä»¥å¾—åˆ° $2k+2$ ä¸ªç‚¹çš„æ•°æ®ï¼Œæ ¼å¼ä¸ºç¬¬ä¸€è¡Œç‚¹æ•°å’Œè¾¹æ•°ï¼Œåé¢æ¯è¡Œæè¿°ä¸€æ¡è¾¹ï¼ˆèµ·ç‚¹ã€ç»ˆç‚¹ã€å®¹é‡ã€è´¹ç”¨ï¼‰ï¼Œæºç‚¹æ˜¯ $1$ æ±‡ç‚¹æ˜¯ $2k+2$ã€‚\nk=20 ç”Ÿæˆçš„æ•°æ® 42 421 1 2 1 0 1 3 3 0 1 4 5 0 1 5 10 0 1 6 20 0 1 7 40 0 1 8 80 0 1 9 160 0 1 10 320 0 1 11 640 0 1 12 1280 0 1 13 2560 0 1 14 5120 0 1 15 10240 0 1 16 20480 0 1 17 40960 0 1 18 81920 0 1 19 163840 0 1 20 327680 0 1 21 655360 0 2 22 5242880 0 2 23 5242880 1 2 24 5242880 3 2 25 5242880 7 2 26 5242880 15 2 27 5242880 31 2 28 5242880 63 2 29 5242880 127 2 30 5242880 255 2 31 5242880 511 2 32 5242880 1023 2 33 5242880 2047 2 34 5242880 4095 2 35 5242880 8191 2 36 5242880 16383 2 37 5242880 32767 2 38 5242880 65535 2 39 5242880 131071 2 40 5242880 262143 2 41 5242880 524287 3 22 5242880 1 3 24 5242880 3 3 25 5242880 7 3 26 5242880 15 3 27 5242880 31 3 28 5242880 63 3 29 5242880 127 3 30 5242880 255 3 31 5242880 511 3 32 5242880 1023 3 33 5242880 2047 3 34 5242880 4095 3 35 5242880 8191 3 36 5242880 16383 3 37 5242880 32767 3 38 5242880 65535 3 39 5242880 131071 3 40 5242880 262143 3 41 5242880 524287 4 22 5242880 3 4 23 5242880 3 4 25 5242880 7 4 26 5242880 15 4 27 5242880 31 4 28 5242880 63 4 29 5242880 127 4 30 5242880 255 4 31 5242880 511 4 32 5242880 1023 4 33 5242880 2047 4 34 5242880 4095 4 35 5242880 8191 4 36 5242880 16383 4 37 5242880 32767 4 38 5242880 65535 4 39 5242880 131071 4 40 5242880 262143 4 41 5242880 524287 5 22 5242880 7 5 23 5242880 7 5 24 5242880 7 5 26 5242880 15 5 27 5242880 31 5 28 5242880 63 5 29 5242880 127 5 30 5242880 255 5 31 5242880 511 5 32 5242880 1023 5 33 5242880 2047 5 34 5242880 4095 5 35 5242880 8191 5 36 5242880 16383 5 37 5242880 32767 5 38 5242880 65535 5 39 5242880 131071 5 40 5242880 262143 5 41 5242880 524287 6 22 5242880 15 6 23 5242880 15 6 24 5242880 15 6 25 5242880 15 6 27 5242880 31 6 28 5242880 63 6 29 5242880 127 6 30 5242880 255 6 31 5242880 511 6 32 5242880 1023 6 33 5242880 2047 6 34 5242880 4095 6 35 5242880 8191 6 36 5242880 16383 6 37 5242880 32767 6 38 5242880 65535 6 39 5242880 131071 6 40 5242880 262143 6 41 5242880 524287 7 22 5242880 31 7 23 5242880 31 7 24 5242880 31 7 25 5242880 31 7 26 5242880 31 7 28 5242880 63 7 29 5242880 127 7 30 5242880 255 7 31 5242880 511 7 32 5242880 1023 7 33 5242880 2047 7 34 5242880 4095 7 35 5242880 8191 7 36 5242880 16383 7 37 5242880 32767 7 38 5242880 65535 7 39 5242880 131071 7 40 5242880 262143 7 41 5242880 524287 8 22 5242880 63 8 23 5242880 63 8 24 5242880 63 8 25 5242880 63 8 26 5242880 63 8 27 5242880 63 8 29 5242880 127 8 30 5242880 255 8 31 5242880 511 8 32 5242880 1023 8 33 5242880 2047 8 34 5242880 4095 8 35 5242880 8191 8 36 5242880 16383 8 37 5242880 32767 8 38 5242880 65535 8 39 5242880 131071 8 40 5242880 262143 8 41 5242880 524287 9 22 5242880 127 9 23 5242880 127 9 24 5242880 127 9 25 5242880 127 9 26 5242880 127 9 27 5242880 127 9 28 5242880 127 9 30 5242880 255 9 31 5242880 511 9 32 5242880 1023 9 33 5242880 2047 9 34 5242880 4095 9 35 5242880 8191 9 36 5242880 16383 9 37 5242880 32767 9 38 5242880 65535 9 39 5242880 131071 9 40 5242880 262143 9 41 5242880 524287 10 22 5242880 255 10 23 5242880 255 10 24 5242880 255 10 25 5242880 255 10 26 5242880 255 10 27 5242880 255 10 28 5242880 255 10 29 5242880 255 10 31 5242880 511 10 32 5242880 1023 10 33 5242880 2047 10 34 5242880 4095 10 35 5242880 8191 10 36 5242880 16383 10 37 5242880 32767 10 38 5242880 65535 10 39 5242880 131071 10 40 5242880 262143 10 41 5242880 524287 11 22 5242880 511 11 23 5242880 511 11 24 5242880 511 11 25 5242880 511 11 26 5242880 511 11 27 5242880 511 11 28 5242880 511 11 29 5242880 511 11 30 5242880 511 11 32 5242880 1023 11 33 5242880 2047 11 34 5242880 4095 11 35 5242880 8191 11 36 5242880 16383 11 37 5242880 32767 11 38 5242880 65535 11 39 5242880 131071 11 40 5242880 262143 11 41 5242880 524287 12 22 5242880 1023 12 23 5242880 1023 12 24 5242880 1023 12 25 5242880 1023 12 26 5242880 1023 12 27 5242880 1023 12 28 5242880 1023 12 29 5242880 1023 12 30 5242880 1023 12 31 5242880 1023 12 33 5242880 2047 12 34 5242880 4095 12 35 5242880 8191 12 36 5242880 16383 12 37 5242880 32767 12 38 5242880 65535 12 39 5242880 131071 12 40 5242880 262143 12 41 5242880 524287 13 22 5242880 2047 13 23 5242880 2047 13 24 5242880 2047 13 25 5242880 2047 13 26 5242880 2047 13 27 5242880 2047 13 28 5242880 2047 13 29 5242880 2047 13 30 5242880 2047 13 31 5242880 2047 13 32 5242880 2047 13 34 5242880 4095 13 35 5242880 8191 13 36 5242880 16383 13 37 5242880 32767 13 38 5242880 65535 13 39 5242880 131071 13 40 5242880 262143 13 41 5242880 524287 14 22 5242880 4095 14 23 5242880 4095 14 24 5242880 4095 14 25 5242880 4095 14 26 5242880 4095 14 27 5242880 4095 14 28 5242880 4095 14 29 5242880 4095 14 30 5242880 4095 14 31 5242880 4095 14 32 5242880 4095 14 33 5242880 4095 14 35 5242880 8191 14 36 5242880 16383 14 37 5242880 32767 14 38 5242880 65535 14 39 5242880 131071 14 40 5242880 262143 14 41 5242880 524287 15 22 5242880 8191 15 23 5242880 8191 15 24 5242880 8191 15 25 5242880 8191 15 26 5242880 8191 15 27 5242880 8191 15 28 5242880 8191 15 29 5242880 8191 15 30 5242880 8191 15 31 5242880 8191 15 32 5242880 8191 15 33 5242880 8191 15 34 5242880 8191 15 36 5242880 16383 15 37 5242880 32767 15 38 5242880 65535 15 39 5242880 131071 15 40 5242880 262143 15 41 5242880 524287 16 22 5242880 16383 16 23 5242880 16383 16 24 5242880 16383 16 25 5242880 16383 16 26 5242880 16383 16 27 5242880 16383 16 28 5242880 16383 16 29 5242880 16383 16 30 5242880 16383 16 31 5242880 16383 16 32 5242880 16383 16 33 5242880 16383 16 34 5242880 16383 16 35 5242880 16383 16 37 5242880 32767 16 38 5242880 65535 16 39 5242880 131071 16 40 5242880 262143 16 41 5242880 524287 17 22 5242880 32767 17 23 5242880 32767 17 24 5242880 32767 17 25 5242880 32767 17 26 5242880 32767 17 27 5242880 32767 17 28 5242880 32767 17 29 5242880 32767 17 30 5242880 32767 17 31 5242880 32767 17 32 5242880 32767 17 33 5242880 32767 17 34 5242880 32767 17 35 5242880 32767 17 36 5242880 32767 17 38 5242880 65535 17 39 5242880 131071 17 40 5242880 262143 17 41 5242880 524287 18 22 5242880 65535 18 23 5242880 65535 18 24 5242880 65535 18 25 5242880 65535 18 26 5242880 65535 18 27 5242880 65535 18 28 5242880 65535 18 29 5242880 65535 18 30 5242880 65535 18 31 5242880 65535 18 32 5242880 65535 18 33 5242880 65535 18 34 5242880 65535 18 35 5242880 65535 18 36 5242880 65535 18 37 5242880 65535 18 39 5242880 131071 18 40 5242880 262143 18 41 5242880 524287 19 22 5242880 131071 19 23 5242880 131071 19 24 5242880 131071 19 25 5242880 131071 19 26 5242880 131071 19 27 5242880 131071 19 28 5242880 131071 19 29 5242880 131071 19 30 5242880 131071 19 31 5242880 131071 19 32 5242880 131071 19 33 5242880 131071 19 34 5242880 131071 19 35 5242880 131071 19 36 5242880 131071 19 37 5242880 131071 19 38 5242880 131071 19 40 5242880 262143 19 41 5242880 524287 20 22 5242880 262143 20 23 5242880 262143 20 24 5242880 262143 20 25 5242880 262143 20 26 5242880 262143 20 27 5242880 262143 20 28 5242880 262143 20 29 5242880 262143 20 30 5242880 262143 20 31 5242880 262143 20 32 5242880 262143 20 33 5242880 262143 20 34 5242880 262143 20 35 5242880 262143 20 36 5242880 262143 20 37 5242880 262143 20 38 5242880 262143 20 39 5242880 262143 20 41 5242880 524287 21 22 5242880 524287 21 23 5242880 524287 21 24 5242880 524287 21 25 5242880 524287 21 26 5242880 524287 21 27 5242880 524287 21 28 5242880 524287 21 29 5242880 524287 21 30 5242880 524287 21 31 5242880 524287 21 32 5242880 524287 21 33 5242880 524287 21 34 5242880 524287 21 35 5242880 524287 21 36 5242880 524287 21 37 5242880 524287 21 38 5242880 524287 21 39 5242880 524287 21 40 5242880 524287 22 42 2 0 23 42 2 0 24 42 5 0 25 42 10 0 26 42 20 0 27 42 40 0 28 42 80 0 29 42 160 0 30 42 320 0 31 42 640 0 32 42 1280 0 33 42 2560 0 34 42 5120 0 35 42 10240 0 36 42 20480 0 37 42 40960 0 38 42 81920 0 39 42 163840 0 40 42 327680 0 41 42 655360 0   å‰ç½®çŸ¥è¯† æœ¬æ–‡å‡å®šè¯»è€…å¯¹ç½‘ç»œæµæœ‰åŸºæœ¬çš„äº†è§£ï¼ˆæŒæ¡å¹¶å¤§è‡´ç†è§£äº†æœ€å¤§æµçš„å¢å¹¿è·¯è§£æ³•ï¼ˆEK / Dinicï¼‰å³å¯ï¼‰ã€‚\nè¿˜è¦ä¼šè§£å†³æ— è´Ÿæƒè¾¹çš„å•æºæœ€çŸ­è·¯é—®é¢˜ï¼ˆä¼š Dijkstra ç®—æ³•å³å¯ï¼‰ã€‚\nä¸€äº›å®šä¹‰ æ— æºæ±‡çš„æµï¼Œæ¯ä¸ªç‚¹éœ€è¦æ»¡è¶³æµå…¥é‡ç­‰äºæµå‡ºé‡ï¼ˆæµé‡å¹³è¡¡ï¼‰ï¼Œå¹¶ä¸”æ¯æ¡è¾¹çš„æµé‡ä¸è¶…è¿‡ä¸Šé™ã€‚\næœ‰æºæ±‡çš„æµï¼Œå­˜åœ¨æºç‚¹ $s$ å’Œæ±‡ç‚¹ $t$ï¼Œ$s$ åªæµå‡ºä¸æµå…¥ï¼Œ$t$ åªæµå…¥ä¸æµå‡ºï¼Œå…¶å®ƒç‚¹æ»¡è¶³æµé‡å¹³è¡¡ï¼Œå¹¶ä¸”æ¯æ¡è¾¹çš„æµé‡ä¸è¶…è¿‡ä¸Šé™ã€‚\næœ€å¤§æµé—®é¢˜ï¼Œåªåœ¨æœ‰æºæ±‡çš„æµä¸­æœ‰æ„ä¹‰ï¼Œå³æœ€å¤§åŒ– $s$ çš„æµå‡ºé‡ï¼ˆä¹Ÿå°±æ˜¯ $t$ çš„æµå…¥é‡ï¼‰ã€‚\næµçš„è´¹ç”¨ï¼Œæ˜¯æ¯æ¡è¾¹çš„æµé‡ä¸è´¹ç”¨ä¹‹ç§¯çš„å’Œã€‚\næœ€å°è´¹ç”¨æœ€å¤§æµé—®é¢˜ï¼Œåœ¨æœ€å¤§æµçš„å‰æä¸‹ï¼Œæœ€å°åŒ–æµçš„è´¹ç”¨ã€‚\nï¼ˆæ— æºæ±‡ï¼‰æœ€å°è´¹ç”¨æµé—®é¢˜ï¼Œåªç”¨æœ€å°åŒ–æµçš„è´¹ç”¨ã€‚\næ®‹é‡ç½‘ç»œï¼Œæ˜¯åŸå›¾ä¸­æ¯æ¡æ²¡æ»¡æµçš„è¾¹ä»¥åŠæ¯æ¡æœ‰æµçš„è¾¹çš„åè¾¹ï¼ˆåè¾¹æŒ‡æ–¹å‘ç›¸åï¼Œè´¹ç”¨ä¸ºç›¸åæ•°ï¼‰æ„æˆçš„å›¾ã€‚\nå¢å¹¿è·¯ï¼Œåœ¨æœ‰æºæ±‡çš„æµä¸­æŒ‡æ®‹é‡ç½‘ç»œä¸Šä¸€æ¡ $s$ åˆ° $t$ çš„è·¯å¾„ï¼Œåœ¨æ— æºæ±‡çš„æµä¸­æŒ‡æ®‹é‡ç½‘ç»œä¸Šçš„ä¸€ä¸ªç¯ã€‚\nå¢å¹¿ï¼ŒæŒ‡çš„æ˜¯å°†ä¸€æ¡å¢å¹¿è·¯æµé‡åŠ ä¸€ï¼ˆå¢å¹¿è·¯ä¸Šçš„è¾¹å®¹é‡å‡ä¸€ï¼Œå¯¹åº”çš„åè¾¹å®¹é‡åŠ ä¸€ï¼‰ã€‚\nä¸åŠ è¯´æ˜æ—¶ï¼Œè¾¹çš„é•¿åº¦ / è·¯å¾„çš„é•¿åº¦ / ç¯çš„é•¿åº¦ï¼ˆå½“ç„¶è¿˜æœ‰â€œæœ€é•¿è·¯å¾„â€ã€â€œè´Ÿç¯â€ä¹‹ç±»çš„è¡¨è¿°ï¼‰ä¸­çš„â€œé•¿åº¦â€éƒ½æŒ‡è´¹ç”¨ã€‚\n$(u, v)$ è¡¨ç¤ºä» $u$ åˆ° $v$ çš„æœ‰å‘è¾¹ï¼ˆæœ¬æ–‡åªè®¨è®ºåŸå›¾ä¸ºç®€å•å›¾çš„æƒ…å†µï¼Œéç®€å•å›¾æ˜¯ç±»ä¼¼çš„ï¼‰ï¼Œ$cap(u, v)$ è¡¨ç¤º $(u, v)$ è¿™æ¡è¾¹çš„å®¹é‡ï¼Œ$cost(u, v)$ è¡¨ç¤º $(u, v)$ è¿™æ¡è¾¹çš„è´¹ç”¨ã€‚\nå°†æœ€å°è´¹ç”¨æœ€å¤§æµé—®é¢˜è½¬åŒ–ä¸ºæ— æºæ±‡æœ€å°è´¹ç”¨æµé—®é¢˜ æœ€å°è´¹ç”¨æœ€å¤§æµé—®é¢˜å¯ä»¥è½¬åŒ–ä¸ºæ— æºæ±‡æœ€å°è´¹ç”¨æµé—®é¢˜ï¼Œæ–¹æ³•æ˜¯è¿ä¸€æ¡ $t$ åˆ° $s$ï¼Œå®¹é‡è¶³å¤Ÿå¤§ï¼Œè´¹ç”¨è¶³å¤Ÿå°ï¼ˆä¸ºä¸€ä¸ªè´Ÿæ•°ï¼‰çš„è¾¹ã€‚è¿™é‡Œçš„â€œå®¹é‡è¶³å¤Ÿå¤§â€æŒ‡çš„æ˜¯ä¸å°äºæœ€å¤§æµï¼Œâ€œè´¹ç”¨è¶³å¤Ÿå°â€æŒ‡çš„æ˜¯å°äº $s$ åˆ° $t$ çš„æœ€é•¿ç®€å•è·¯å¾„è´¹ç”¨çš„ç›¸åæ•°ã€‚\nç”±äºâ€œè´¹ç”¨è¶³å¤Ÿå°â€ï¼Œè‹¥æ²¡æœ‰è¾¾æˆæœ€å¤§æµï¼Œå³å­˜åœ¨ $s$ åˆ° $t$ çš„å¢å¹¿è·¯ï¼Œä»»ä½•ä¸€æ¡ä¸ç»è¿‡æ­£ç¯ï¼ˆè‹¥å­˜åœ¨ç»è¿‡æ­£ç¯çš„å¢å¹¿è·¯ï¼Œä¸€å®šä¹Ÿå­˜åœ¨ä¸ç»è¿‡æ­£ç¯çš„å¢å¹¿è·¯ï¼‰çš„ $s$ åˆ° $t$ çš„å¢å¹¿è·¯åŠ ä¸Š $(t, s)$ è¿™æ¡è¾¹çš„è´¹ç”¨ä¸€å®šä¸ºè´Ÿï¼Œæ‰€ä»¥é€šè¿‡è¿™æ¡å¢å¹¿è·¯å¢å¹¿æ€»è´¹ç”¨ä¸€å®šæ›´å°ï¼Œè¿™è¯´æ˜ï¼Œæ— æºæ±‡æµä¸­æ»¡è¶³æœ€å°è´¹ç”¨æ—¶ï¼ŒåŸé—®é¢˜åŒæ—¶æ»¡è¶³äº†æœ€å°è´¹ç”¨ä¸æœ€å¤§æµã€‚\nä¸‹æ–‡ä¸­è®¨è®ºçš„éƒ½æ˜¯æ— æºæ±‡æœ€å°è´¹ç”¨æµé—®é¢˜ï¼Œä¹Ÿä¸ä¼šå†æ¬¡å¼ºè°ƒâ€œæ— æºæ±‡â€ã€‚\nè´Ÿç¯ ä¸€ä¸ªæµæ˜¯æœ€å°è´¹ç”¨æµï¼Œå½“ä¸”ä»…å½“å…¶æ®‹é‡ç½‘ç»œä¸­æ²¡æœ‰è´Ÿç¯ã€‚\nè¯æ˜ ä»…å½“ï¼ˆå¿…è¦æ¡ä»¶ï¼‰ï¼šè‹¥å­˜åœ¨è´Ÿç¯å¯ä»¥åœ¨è´Ÿç¯ä¸Šå¢å¹¿ï¼Œä»è€Œå¾—åˆ°è´¹ç”¨æ›´å°çš„æµã€‚\nå½“ï¼ˆå……åˆ†æ¡ä»¶ï¼‰ï¼šä»¤æ‰€è€ƒè™‘çš„è¿™ä¸ªæµä¸º $f$ï¼Œå–ä»»æ„ä¸€ä¸ªæœ€å°è´¹ç”¨æµ $f^{\\ast}$ï¼Œè®¡ç®—å®ƒä»¬ä¹‹é—´çš„å·® $f^{\\ast}-f$ï¼ˆå¯¹åº”è¾¹æµé‡ç›¸å‡ï¼‰ã€‚å‡è®¾ $f$ ä¸æ˜¯æœ€å°è´¹ç”¨æµï¼Œé‚£ä¹ˆ $f^{\\ast}-f$ çš„æ€»è´¹ç”¨ä¸€å®šä¸ºè´Ÿã€‚ç”±äº $f$ å’Œ $f^{\\ast}$ éƒ½æµé‡å¹³è¡¡ï¼Œ$f^{\\ast}-f$ ä¸€å®šä¹Ÿæµé‡å¹³è¡¡ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ˜¯ä¸ªåˆæ³•çš„æµï¼Œè€Œä¸€ä¸ªæµä¸€å®šå¯ä»¥æ‹†æˆè‹¥å¹²ä¸ªç¯ï¼ˆç”±äºæµé‡å¹³è¡¡ï¼Œæ¯ä¸ªè”é€šéƒ¨åˆ†éƒ½æœ‰æ¬§æ‹‰å›è·¯ï¼‰ï¼Œè‹¥æ€»è´¹ç”¨ä¸ºè´Ÿå°±ä¸€å®šåŒ…å«è´Ÿç¯ã€‚åˆå› ä¸º $f^{\\ast}-f$ æ˜¯åœ¨ $f$ çš„åŸºç¡€ä¸Šå¢å¹¿çš„ï¼Œ$f^{\\ast}-f$ ä¸€å®šæ˜¯ $f$ æ®‹é‡ç½‘ç»œçš„ä¸€ä¸ªå­å›¾ï¼Œè€Œå…¶åŒ…å«è´Ÿç¯ä¸ $f$ çš„æ®‹é‡ç½‘ç»œä¸­æ²¡æœ‰è´Ÿç¯çŸ›ç›¾ï¼Œæ‰€ä»¥å‡è®¾ä¸æˆç«‹ã€‚\n èŠ‚ç‚¹åŠ¿èƒ½ \u0026amp; è¾¹çš„ reduced cost è¿™ä¸¤ä¸ªæ¦‚å¿µçš„æå‡ºä¸æœ€å°è´¹ç”¨æµçš„çº¿æ€§è§„åˆ’å½¢å¼çš„å¯¹å¶é—®é¢˜ç›¸å…³ï¼Œä½†äº†è§£è¿™ä¸ªå¯¹å¶é—®é¢˜å¹¶ä¸æ˜¯å¿…è¦çš„ï¼Œæ‰€ä»¥æœ¬ç¯‡åšå®¢ä¸­ä¸ä¼šæåŠã€‚\nç»™æ¯ä¸ªèŠ‚ç‚¹ $u$ æŒ‡å®šä¸€ä¸ªä»»æ„çš„åŠ¿èƒ½ $p(u)$ã€‚ï¼ˆè¿™ä¸ªæ¦‚å¿µçœ‹èµ·æ¥å¾ˆçªå…€ï¼Œæ€»ä¹‹å°±æ˜¯ç»™æ¯ä¸ªèŠ‚ç‚¹æ–°å¢äº†ä¸€ä¸ªå±æ€§ï¼Œå®ƒçš„å€¼æ˜¯ä»»æ„çš„ã€‚ï¼‰ï¼ˆæœ¬è´¨ä¸Šæ˜¯çº¿æ€§è§„åˆ’å¯¹å¶é—®é¢˜ä¸­çš„ä¸€ä¸ªæ— é™åˆ¶å˜é‡ã€‚ï¼‰\nå®šä¹‰ä¸€æ¡è¾¹ $(u, v)$ å…³äºæŸä¸€ç»„åŠ¿èƒ½ $p$ çš„ reduced costï¼ˆå¹¶ä¸çŸ¥é“æ€ä¹ˆç¿»è¯‘..ï¼‰$C_p(u, v)$ ä¸º $p(u)+cost(u, v)-p(v)$ã€‚\nreduced cost æœ‰ä¸¤ä¸ªå¾ˆå¥½çš„æ€§è´¨ï¼š\n  å°†åŸè´¹ç”¨æ›¿æ¢ä¸º reduced cost ä¸å½±å“æœ€çŸ­è·¯ã€‚ï¼ˆä¸æ˜¯ä¸å½±å“æœ€çŸ­è·¯é•¿åº¦ï¼Œè€Œæ˜¯ä¸å½±å“æœ€çŸ­è·¯æ˜¯å“ªä¸€æ¡ã€‚ï¼‰\n  å°†åŸè´¹ç”¨æ›¿æ¢ä¸º reduced cost ä¸å½±å“ç¯çš„æ€»è´¹ç”¨ã€‚\n  è¿™ä¸¤ä¸ªæ€§è´¨éƒ½å¯ä»¥ç”± $C_p(u, v)+C_p(v, w)=p(u)+cost(u, v)+cost(v, w)-p(w)$ï¼ˆä¸­é—´ç»è¿‡çš„ç‚¹çš„åŠ¿èƒ½ç›¸åŠ åæŠµæ¶ˆï¼‰è¯´æ˜ã€‚\nå¦‚æœå¤§å®¶æœ‰äº†è§£è¿‡ Johnson å…¨æºæœ€çŸ­è·¯å¾„ç®—æ³•ï¼Œé‡Œé¢ä¹Ÿæœ‰ç±»ä¼¼çš„æ“ä½œï¼Œç”¨äºä¿è¯è¾¹æƒéè´Ÿï¼Œä½¿å¾— Dijkstra ç®—æ³•å¯ä»¥å¾—åˆ°åº”ç”¨ã€‚åœ¨æœ¬æ–‡æ‰€ä»‹ç»çš„æœ€å°è´¹ç”¨æµç®—æ³•ä¸­ä¹Ÿæ˜¯ä¸€æ ·ï¼Œä¸ºäº†èƒ½å¤Ÿä½¿ç”¨ Dijkstra ç®—æ³•è®¡ç®—æœ€çŸ­è·¯ï¼Œåœ¨è¿‡ç¨‹ä¸­éœ€è¦ä¿è¯ reduced cost éè´Ÿã€‚\ncapacity scaling ï¼ˆè¿™ä¸ªä¹Ÿä¸çŸ¥é“æ€ä¹ˆç¿»è¯‘..ï¼‰\ncapacity scaling ä»é«˜åˆ°ä½è€ƒè™‘å®¹é‡çš„æœ€é«˜è‹¥å¹²ä½ï¼ˆæ¯”å¦‚å®¹é‡ä¸º $5$ ($101_2$)ï¼Œç¬¬ä¸€æ¬¡è¿­ä»£æ—¶è€ƒè™‘æœ€é«˜ä¸€ä½ï¼Œå³ $1$ ($1_2$)ï¼Œç¬¬äºŒæ¬¡è¿­ä»£æ—¶è€ƒè™‘æœ€é«˜ä¸¤ä½ï¼Œå³ $2$ ($10_2$)ï¼Œç¬¬ä¸‰æ¬¡è¿­ä»£æ—¶è€ƒè™‘æœ€é«˜ä¸‰ä½ï¼Œå³ $5$ ($101_2$)ï¼‰ï¼Œæ¯æ¬¡åŠ å…¥æ›´ä½çš„ä½åæ›´æ–°ç­”æ¡ˆã€‚ï¼ˆè¿™ä¸ªè¿‡ç¨‹å’Œæ±‚å¿«é€Ÿå¹‚æœ‰ç‚¹åƒã€‚ï¼‰\nå®ƒåŸºäºä¸€ä¸ªæ€§è´¨ï¼šå°†åŸå›¾ä¸­æ¯æ¡è¾¹çš„å®¹é‡ä¹˜äºŒåï¼Œæœ€å°è´¹ç”¨æµæ¯æ¡è¾¹çš„æµé‡åˆ†åˆ«ä¹˜äºŒã€‚\né‚£ä¹ˆï¼Œè‹¥è®¡ç®—å‡ºäº†ä»¥ $\\left\\lfloor\\frac{cap(u, v)}{2^k}\\right\\rfloor$ ä¸ºè¾¹ $(u, v)$ çš„å®¹é‡çš„æœ€å°è´¹ç”¨æµï¼Œç°åœ¨è¦å¾—åˆ°ä»¥ $\\left\\lfloor\\frac{cap(u, v)}{2^{k-1}}\\right\\rfloor$ ä¸ºè¾¹ $(u, v)$ çš„å®¹é‡çš„æœ€å°è´¹ç”¨æµï¼Œåªéœ€è¦å…ˆå°†æµä¹˜äºŒï¼Œç„¶åå¯¹æ¯æ¡äºŒè¿›åˆ¶ä¸­è¯¥ä½ä¸º $1$ çš„è¾¹è¿›è¡Œå®¹é‡åŠ ä¸€çš„æ“ä½œå³å¯ã€‚\næ‰€ä»¥ï¼Œé—®é¢˜è½¬åŒ–ä¸ºäº†ç»™ä¸€æ¡è¾¹çš„å®¹é‡åŠ ä¸€ï¼Œæ›´æ–°æœ€å°è´¹ç”¨æµã€‚\nç»™ä¸€æ¡è¾¹çš„å®¹é‡åŠ ä¸€ åœ¨ä¸Šæ–‡ä¸­å·²ç»è¯æ˜ï¼Œæœ€å°è´¹ç”¨æµç­‰ä»·äºæ®‹é‡ç½‘ç»œä¸­æ²¡æœ‰è´Ÿç¯ã€‚\næ‰€ä»¥ï¼Œè‹¥å®¹é‡åŠ ä¸€åè‹¥äº§ç”Ÿè´Ÿç¯ï¼Œè¿›è¡Œå¢å¹¿å³å¯ã€‚\nä¸ºäº†ä¼˜åŒ–å¸¸æ•°ï¼Œå¯ä»¥ç‰¹åˆ¤æ‰å®¹é‡åŠ ä¸€å‰è¯¥è¾¹å·²å­˜åœ¨äºæ®‹é‡ç½‘ç»œçš„æƒ…å†µï¼Œç›´æ¥è·³è¿‡ã€‚\nä»¤å®¹é‡åŠ ä¸€çš„è¿™æ¡è¾¹ä¸º $(u, v)$ï¼Œæ‰¾è´Ÿç¯å¯ä»¥å…ˆæ±‚å‡ºä» $v$ å‡ºå‘ä»¥ reduced cost ä¸ºé•¿åº¦åˆ°æ¯ä¸ªç‚¹ $i$ çš„æœ€çŸ­è·¯ $d(i)$ï¼ˆè¿™ä¸ªæœ€çŸ­è·¯ä¸åŒ…æ‹¬ $(u, v)$ è¿™æ¡è¾¹ï¼Œ ç”±äºå½“å‰ç»´æŠ¤çš„æ®‹é‡ç½‘ç»œæ˜¯å®¹é‡åŠ ä¸€ä¹‹å‰çš„æœ€å°è´¹ç”¨æµï¼Œä¸å­˜åœ¨è´Ÿç¯ï¼Œæ‰€ä»¥æœ€çŸ­è·¯æ˜¯å¯ä»¥æ±‚çš„ï¼‰ï¼Œåˆ¤æ–­ $d(u)+C_p(u, v)$ æ˜¯å¦å°äº $0$ å³å¯ã€‚\nä¸ºäº†ä½¿ç”¨ Dijkstra ç®—æ³•ï¼Œè¿˜éœ€è¦ä¿è¯ reduced cost éè´Ÿï¼Œæ‰€ä»¥éœ€è¦è°ƒæ•´èŠ‚ç‚¹çš„åŠ¿èƒ½ã€‚\nè¿™é‡Œç›´æ¥ç»™å‡ºä¸€ç§åšæ³•ï¼šæ±‚å‡ºä¸Šæ–‡æ‰€è¿°çš„æœ€çŸ­è·¯ $d(i)$ï¼ˆè‹¥ $x$ ä¸å¯è¾¾å°±å°† $d(x)$ è®¾ä¸º $\\max_{\\text{èŠ‚ç‚¹ }i\\text{ å¯è¾¾}}\\{d(i)\\}+max(0, -C_p(u, v))$ï¼‰ï¼Œç„¶åå°†æ¯ä¸ªç‚¹ $i$ çš„åŠ¿èƒ½åŠ ä¸Š $d(i)$ï¼ˆç”¨ $p\u0026rsquo;(i)$ è¡¨ç¤ºèŠ‚ç‚¹ $i$ æ›´æ–°åçš„åŠ¿èƒ½ï¼‰ã€‚\nè¿™æ ·è°ƒæ•´åæ®‹é‡ç½‘ç»œä¸­çš„æ¯ä¸€æ¡è¾¹çš„ reduced cost ä¾ç„¶éè´Ÿçš„è¯æ˜ å¯¹äº $(u, v)$ è¿™æ¡è¾¹ï¼Œè‹¥ $u$ ä¸å¯è¾¾ï¼Œé‚£ä¹ˆï¼š\n$$ \\begin{aligned} C_{p\u0026rsquo;}(u, v) \u0026amp;=p\u0026rsquo;(u)+cost(u, v)-p\u0026rsquo;(v)\\\\\n\u0026amp;=p(u)+max(0, -C_p(u, v))+cost(u, v)-p(v)\\\\\n\u0026amp;\\ge p(u)-(p(u)+cost(u, v)-p(v))+cost(u, v)-p(v)\\\\\n\u0026amp;=0 \\end{aligned} $$\nè‹¥ $u$ å¯è¾¾ä¸” $(u, v)$ è¿™æ¡è¾¹åŠ å…¥åäº§ç”Ÿäº†è´Ÿç¯ï¼Œè´Ÿç¯ä¼šè¢«å¢å¹¿ï¼Œ$(u, v)$ è¿™æ¡è¾¹å°±ä¸å­˜åœ¨äº†ã€‚\nè‹¥ $u$ å¯è¾¾ä¸” $(u, v)$ è¿™æ¡è¾¹åŠ å…¥åæ²¡æœ‰äº§ç”Ÿè´Ÿç¯ï¼Œå³ $d(u)+C_p(u, v)\\ge 0$ï¼Œé‚£ä¹ˆ $C_{p\u0026rsquo;}(u, v)=d(u)+C_p(u, v)-d(v)=d(u)+C_p(u, v)\\ge 0$ã€‚\ncapacity scaling ç®—æ³•åœ¨åˆå§‹æ—¶æ‰€æœ‰è¾¹å®¹é‡å‡ä¸º $0$ï¼ˆä¹Ÿå°±æ˜¯è¯´æ®‹é‡ç½‘ç»œä¸ºç©ºï¼‰ï¼Œæ‰€ä»¥å¯ä»¥åœ¨é™¤ $(u, v)$ å¤–æ¯æ¡è¾¹çš„ reduced cost å‡éè´Ÿçš„åŸºç¡€ä¸Šå½’çº³è¯æ˜ã€‚\nå¯¹äºå…¶å®ƒä» $u$ å¯è¾¾çš„è¾¹ $(x, y)$ï¼Œç”±äº $d(y)\\le d(x)+C_p(x, y)$ï¼ˆæœ€çŸ­è·¯çš„æ€§è´¨ï¼‰ï¼Œå³ $d(y)\\le d(x)+p(x)+cost(x, y)-p(y)$ï¼Œæ‰€ä»¥ $p(x)+d(x)+cost(x, y)-(p(y)+d(y))\\ge 0$ï¼Œå³ $p\u0026rsquo;(x)+cost(x, y)-p\u0026rsquo;(y)\\ge 0$ï¼Œä¹Ÿå°±æ˜¯è¯´ $u$ å¯è¾¾çš„è¾¹ reduced cost è°ƒæ•´åéè´Ÿã€‚\nå¯¹äºå…¶å®ƒä» $u$ å¯è¾¾ä¸ä» $u$ ä¸å¯è¾¾äº¤ç•Œå¤„çš„è¾¹ $(x, y)$ï¼ˆç”±äºè¿™æ¡è¾¹ä¸å¯è¾¾ï¼Œä¸€å®šæ˜¯ $x$ ä¸å¯è¾¾ $y$ å¯è¾¾ï¼‰ï¼Œç”±äº $C_p(x, y)\\ge 0$ ä¸” $d(x)=\\max_{\\text{èŠ‚ç‚¹ }i\\text{ å¯è¾¾}}\\{d(i)\\}+max(0, -C_p(u, v))\\ge d(y)$ï¼Œè¿™æ ·çš„è¾¹è°ƒæ•´å reduced cost ä¹Ÿéè´Ÿã€‚\nå¯¹äºè¿æ¥ä» $u$ ä¸å¯è¾¾çš„ä¸¤ä¸ªç‚¹ $x$ï¼Œ$y$ çš„è¾¹ï¼Œ$d(x)=d(y)$ï¼Œè°ƒæ•´å reduced cost ä¹Ÿéè´Ÿã€‚\nç»¼ä¸Šæ‰€è¿°ï¼Œè°ƒæ•´åæ®‹é‡ç½‘ç»œä¸­çš„æ¯ä¸€æ¡è¾¹çš„ reduced cost ä¾ç„¶éè´Ÿã€‚\n è¿›è€Œæˆ‘ä»¬è¿˜å¯ä»¥å¾—å‡ºï¼Œä¸Šè¿°æµç¨‹ç»“æŸåï¼Œæ®‹é‡ç½‘ç»œä¸­ä¸å­˜åœ¨è´Ÿç¯ï¼Œå³ä¸Šè¿°æµç¨‹å¯ä»¥è®¡ç®—å‡ºå½“å‰çš„æœ€å°è´¹ç”¨æµã€‚\né˜²æ­¢æº¢å‡º ä¸Šä¸€éƒ¨åˆ†ä¸­ç»™å‡ºçš„åŠ¿èƒ½è°ƒæ•´æ–¹å¼èƒ½å¤Ÿä¿è¯ reduced cost éè´Ÿï¼Œä½†åœ¨å®é™…å®ç°æ—¶ä¼šæœ‰åŠ¿èƒ½å¤ªå¤§ä»è€Œæº¢å‡ºçš„é£é™©ã€‚\né˜²æ­¢æº¢å‡ºçš„æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œæ–°å»ºä¸€ä¸ªç‚¹ $k$ï¼Œä» $k$ å‘æ‰€æœ‰ç‚¹è¿é•¿åº¦ä¸º $0$ çš„è¾¹ï¼Œæ±‚ä» $k$ å‡ºå‘ä»¥åŸè´¹ç”¨ï¼ˆè€Œé reduced costï¼‰ä¸ºé•¿åº¦çš„æœ€çŸ­è·¯ï¼ˆç”±äºæ›´æ–°åçš„æ®‹é‡ç½‘ç»œæ˜¯å½“å‰çš„æœ€å°è´¹ç”¨æµï¼Œä¸å­˜åœ¨è´Ÿç¯ï¼Œæ–°å¢çš„ $k$ ä»¥åŠ $k$ è¿å‘å…¶å®ƒèŠ‚ç‚¹çš„è¾¹ä¹Ÿä¸ä¼šå¸¦æ¥æ–°çš„è´Ÿç¯ï¼Œæ‰€ä»¥æœ€çŸ­è·¯æ˜¯å¯ä»¥æ±‚çš„ï¼‰ï¼Œä»¥ $k$ åˆ° $i$ çš„æœ€çŸ­è·¯ä½œä¸ºè°ƒæ•´åèŠ‚ç‚¹ $i$ çš„åŠ¿èƒ½ã€‚è¿™æ ·è°ƒæ•´åï¼Œ$C_p(x, y)=d(x)+cost(x, y)-d(y)\\ge 0$ï¼ˆç”±æœ€çŸ­è·¯æ€§è´¨å¾—åˆ°ï¼‰ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹çš„åŠ¿èƒ½çš„å€¼åŸŸä¸ä¼šè¶…è¿‡ $[\\min(0, (n-1)\\min\\{cost(u, v)\\}), 0]$ã€‚\nè™½ç„¶æ˜¯ä»¥åŸè´¹ç”¨ä¸ºé•¿åº¦ï¼Œè®¡ç®—æœ€çŸ­è·¯æ—¶è¿˜æ˜¯å¯ä»¥åˆ©ç”¨ reduced cost æ¥è®¡ç®—ã€‚ç”±äºåªæœ‰ä» $k$ è¿å‡ºçš„è¾¹å¯èƒ½ reduced cost ä¸ºè´Ÿï¼Œè€Œ $k$ åˆæ˜¯ç¬¬ä¸€ä¸ªæ¾å¼›çš„ï¼Œæ‰€ä»¥è¿™ä¸ä¼šå½±å“ Dijkstra ç®—æ³•çš„æ­£ç¡®æ€§ï¼ˆå½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä¸º $k$ è®¾ç½®ä¸€ä¸ªè¶³å¤Ÿå¤§çš„åŠ¿èƒ½æ¥ä¿è¯ä» $k$ è¿å‡ºçš„è¾¹ reduced cost ä¹Ÿéè´Ÿï¼‰ã€‚\næµç¨‹æ€»ç»“ è‹¥æ±‚çš„æ˜¯æœ€å°è´¹ç”¨æœ€å¤§æµï¼Œé¦–å…ˆé€šè¿‡åŠ ä¸€æ¡ $t$ åˆ° $s$ çš„è¾¹è½¬åŒ–ä¸ºæ— æºæ±‡æœ€å°è´¹ç”¨æµã€‚\nä½¿ç”¨ capacity scalingï¼Œæšä¸¾è€ƒè™‘å®¹é‡çš„æœ€é«˜ $k$ ä½ï¼Œæ¯æ¬¡è¿­ä»£å¼€å§‹æ—¶å°†æ®‹é‡ç½‘ç»œä¸­æ¯æ¡è¾¹çš„å®¹é‡ä»¥åŠç­”æ¡ˆä¹˜äºŒï¼Œç„¶åæšä¸¾æ¯æ¡äºŒè¿›åˆ¶ä¸­è¯¥ä½ä¸º $1$ çš„è¾¹ï¼Œä½¿å…¶å®¹é‡åŠ ä¸€ã€‚\nç»™ä¸€æ¡è¾¹å®¹é‡åŠ ä¸€æ—¶ï¼Œå…ˆç‰¹åˆ¤æ‰è¿™æ¡è¾¹æœ¬æ¥å°±åœ¨æ®‹é‡ç½‘ç»œä¸­çš„æƒ…å†µï¼ˆä¼˜åŒ–å¸¸æ•°ï¼‰ï¼Œç„¶ååˆ¤æ˜¯å¦äº§ç”Ÿäº†è´Ÿç¯ï¼Œè‹¥äº§ç”Ÿäº†è´Ÿç¯å°±å¢å¹¿è¿™ä¸ªè´Ÿç¯ï¼Œç„¶åè°ƒæ•´èŠ‚ç‚¹åŠ¿èƒ½ä½¿å¾—æ‰€æœ‰ reduced cost éè´Ÿï¼Œæœ€åé€šè¿‡è®¡ç®—æ–°å¢èŠ‚ç‚¹åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„æœ€çŸ­è·¯æ¥æ›´æ–°èŠ‚ç‚¹åŠ¿èƒ½é˜²æ­¢æº¢å‡ºã€‚\nå¤æ‚åº¦ç“¶é¢ˆåœ¨æ±‚æ— è´Ÿæƒè¾¹å•æºæœ€çŸ­è·¯ä¸Šï¼Œæ€»å…±éœ€è¦è®¡ç®— $O(m\\log U)$ æ¬¡ï¼ˆ$U$ ä¸ºè¾¹çš„æœ€å¤§å®¹é‡ï¼‰æœ€çŸ­è·¯ï¼Œå¦‚æœä½¿ç”¨ priority_queue æ¥å®ç° Dijkstra ç®—æ³•ï¼Œæ€»å¤æ‚åº¦ä¸º $O(m^2\\log U\\log m)$ã€‚\nä»£ç  æ¨¡æ¿é¢˜ã€‚\nä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;queue\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef long long ll; typedef pair\u0026lt;ll, int\u0026gt; pli; const ll INF = 1e18; const ll LARGE = 1e12; int n, m; vector\u0026lt;bool\u0026gt; vis; vector\u0026lt;int\u0026gt; head, nxt, from, to, pre; vector\u0026lt;ll\u0026gt; raw_cap, cap, cost, p, dis; priority_queue\u0026lt;pli, vector\u0026lt;pli\u0026gt;, greater\u0026lt;pli\u0026gt; \u0026gt; q; void add(int u, int v, ll f, ll w) { nxt.push_back(head[u]); head[u] = to.size(); from.push_back(u); to.push_back(v); raw_cap.push_back(f); cap.push_back(0); cost.push_back(w); } void add_edge(int u, int v, ll f, ll w) { add(u, v, f, w); add(v, u, 0, -w); } ll c(int id) { return p[from[id]] + cost[id] - p[to[id]]; } void dijkstra(int s) { vis.assign(n + 2, false); dis.assign(n + 2, INF); pre.assign(n + 2, -1); dis[s] = 0; q.push(pli(0, s)); while (!q.empty()) { int u = q.top().second; ll w = q.top().first; q.pop(); if (vis[u]) continue; vis[u] = true; for (int i = head[u]; ~i; i = nxt[i]) { int v = to[i]; if (cap[i] \u0026amp;\u0026amp; dis[v] \u0026gt; w + c(i)) { dis[v] = w + c(i); pre[v] = i; q.push(pli(dis[v], v)); } } } } void add_one_cap(int id) { int u = from[id]; int v = to[id]; if (cap[id]) { ++cap[id]; return; } dijkstra(v); if (dis[u] \u0026lt; INF \u0026amp;\u0026amp; dis[u] + c(id) \u0026lt; 0) { ++cap[id ^ 1]; while (u != v) { int x = pre[u]; --cap[x]; ++cap[x ^ 1]; u = from[x]; } } else ++cap[id]; ll max_dis = 0; ll cur_len = c(id); for (int i = 1; i \u0026lt;= n; ++i) if (dis[i] \u0026lt; INF) max_dis = max(max_dis, dis[i]); for (int i = 1; i \u0026lt;= n; ++i) p[i] += dis[i] \u0026lt; INF ? dis[i] : max_dis + max(0ll, -cur_len); dijkstra(n + 1); for (int i = 1; i \u0026lt;= n; ++i) p[i] += dis[i]; } int main() { int s, t; cin \u0026gt;\u0026gt; n \u0026gt;\u0026gt; m \u0026gt;\u0026gt; s \u0026gt;\u0026gt; t; head.resize(n + 2, -1); p.resize(n + 2, 0); for (int i = 1; i \u0026lt;= m; ++i) { ll u, v, f, w; cin \u0026gt;\u0026gt; u \u0026gt;\u0026gt; v \u0026gt;\u0026gt; f \u0026gt;\u0026gt; w; add_edge(u, v, f, w); } add_edge(t, s, LARGE, -LARGE); for (int i = 1; i \u0026lt;= n; ++i) { add_edge(n + 1, i, 0, 0); cap[to.size() - 2] = 1; } for (int i = 40; i \u0026gt;= 0; --i) { for (int j = 0; j \u0026lt;= m * 2 + 1; ++j) cap[j] \u0026lt;\u0026lt;= 1; for (int j = 0; j \u0026lt;= m * 2; j += 2) { if ((raw_cap[j] \u0026gt;\u0026gt; i) \u0026amp; 1) { add_one_cap(j); } } } ll min_cost = 0; for (int i = 0; i \u0026lt; m; ++i) min_cost += cap[i \u0026lt;\u0026lt; 1 | 1] * cost[i \u0026lt;\u0026lt; 1]; cout \u0026lt;\u0026lt; cap[m \u0026lt;\u0026lt; 1 | 1] \u0026lt;\u0026lt; ' ' \u0026lt;\u0026lt; min_cost; return 0; }   å…³äº SPFA å¦‚æœæŠŠç®—æ³•ä¸­çš„ Dijkstra æ¢æˆ SPFAï¼Œreduced cost å°±ä¸éœ€è¦äº†ï¼Œè°ƒæ•´åŠ¿èƒ½å’Œé˜²æ­¢æº¢å‡ºä¸¤éƒ¨åˆ†éƒ½å¯ä»¥å»æ‰ï¼ŒåŠ ä¸Š SPFA æœ¬èº«å°±ç•¥å¾®æ¯” Dijkstra å¥½å†™ï¼Œæ€»ä½“ä¼šå¥½å†™ä¸å°‘ï¼Œå¤æ‚åº¦æ˜¯ $O(nm^2\\log U)$ï¼Œä½†å¾ˆéš¾å¡æ»¡ï¼Œè€Œä¸”ç”±äºä¸ç”¨é˜²æ­¢æº¢å‡ºï¼Œå°‘è·‘å¾ˆå¤šéæœ€çŸ­è·¯ï¼Œæ€»ä½“è·‘çš„éå¸¸å¿«ã€‚\nä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;queue\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef long long ll; typedef pair\u0026lt;ll, int\u0026gt; pli; const ll INF = 1e18; const ll LARGE = 1e12; int n, m; queue\u0026lt;int\u0026gt; q; vector\u0026lt;bool\u0026gt; inq; vector\u0026lt;ll\u0026gt; raw_cap, cap, cost, dis; vector\u0026lt;int\u0026gt; head, nxt, from, to, pre; void add(int u, int v, ll f, ll w) { nxt.push_back(head[u]); head[u] = to.size(); from.push_back(u); to.push_back(v); raw_cap.push_back(f); cap.push_back(0); cost.push_back(w); } void add_edge(int u, int v, ll f, ll w) { add(u, v, f, w); add(v, u, 0, -w); } void spfa(int s) { inq.assign(n + 1, false); dis.assign(n + 1, INF); pre.assign(n + 1, -1); dis[s] = 0; q.push(s); while (!q.empty()) { int u = q.front(); inq[u] = false; q.pop(); for (int i = head[u]; ~i; i = nxt[i]) { int v = to[i]; ll w = cost[i]; if (cap[i] \u0026amp;\u0026amp; dis[v] \u0026gt; dis[u] + w) { dis[v] = dis[u] + w; pre[v] = i; if (!inq[v]) { inq[v] = true; q.push(v); } } } } } void add_one_cap(int id) { int u = from[id]; int v = to[id]; if (cap[id]) { ++cap[id]; return; } spfa(v); if (dis[u] \u0026lt; INF \u0026amp;\u0026amp; dis[u] + cost[id] \u0026lt; 0) { ++cap[id ^ 1]; while (u != v) { int x = pre[u]; --cap[x]; ++cap[x ^ 1]; u = from[x]; } } else ++cap[id]; } int main() { int s, t; cin \u0026gt;\u0026gt; n \u0026gt;\u0026gt; m \u0026gt;\u0026gt; s \u0026gt;\u0026gt; t; head.resize(n + 1, -1); for (int i = 1; i \u0026lt;= m; ++i) { ll u, v, f, w; cin \u0026gt;\u0026gt; u \u0026gt;\u0026gt; v \u0026gt;\u0026gt; f \u0026gt;\u0026gt; w; add_edge(u, v, f, w); } add_edge(t, s, LARGE, -LARGE); for (int i = 40; i \u0026gt;= 0; --i) { for (int j = 0; j \u0026lt;= m * 2 + 1; ++j) cap[j] \u0026lt;\u0026lt;= 1; for (int j = 0; j \u0026lt;= m * 2; j += 2) { if ((raw_cap[j] \u0026gt;\u0026gt; i) \u0026amp; 1) { add_one_cap(j); } } } ll min_cost = 0; for (int i = 0; i \u0026lt; m; ++i) min_cost += cap[i \u0026lt;\u0026lt; 1 | 1] * cost[i \u0026lt;\u0026lt; 1]; cout \u0026lt;\u0026lt; cap[m \u0026lt;\u0026lt; 1 | 1] \u0026lt;\u0026lt; ' ' \u0026lt;\u0026lt; min_cost; return 0; }   å…³äºå‡ºé¢˜ å°½ç®¡å¤šæ•°äººä½¿ç”¨çš„è´¹ç”¨æµç®—æ³•æ˜¯ä¼ªå¤šé¡¹å¼å¤æ‚åº¦çš„ï¼Œæˆ‘å¹¶ä¸å»ºè®®åœ¨é¢˜ç›®ä¸­å¡æ‰å®ƒã€‚\nä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œâ€œä¸å¡æ‰â€æ˜¯æŒ‡è®¾ç½®åˆé€‚çš„æ•°æ®èŒƒå›´ï¼Œä½¿å¾—å¸¸è§è´¹ç”¨æµç®—æ³•å¯ä»¥ç¡®ä¿é€šè¿‡ã€‚å¦‚æœè®¾ç½®äº†ä¸åˆç†çš„æ•°æ®èŒƒå›´è€Œæµ‹è¯•æ•°æ®ä¸­æ²¡æœ‰å¡æ‰å¸¸è§è´¹ç”¨æµç®—æ³•ï¼Œé‚£ä¹ˆä¸ä»… å¡äº† å¸¸è§è´¹ç”¨æµç®—æ³•ï¼Œæ•°æ®ä¹Ÿé€ çš„ä¸åˆæ ¼ã€‚\nå‚è€ƒèµ„æ–™   Min_25 æœ€å°è²»ç”¨æœ€å¤§æµã®æ‚ªä¾‹é¡Œ\n  Stanford CS 361B: Advanced Algorithms, Spring 2014 Lecture Notes\n  A Faster Strongly Polynomial Minimum Cost Flow Algorithm\n  Theoretical Improvements in Algorithmic Efficiency for Network Flow Problems\n  Github repo Laakeri/tiralabra\n ","date":"2019-10-26T19:50:25+08:00","permalink":"https://ouuan.github.io/post/%E5%9F%BA%E4%BA%8E-capacity-scaling-%E7%9A%84%E5%BC%B1%E5%A4%9A%E9%A1%B9%E5%BC%8F%E5%A4%8D%E6%9D%82%E5%BA%A6%E6%9C%80%E5%B0%8F%E8%B4%B9%E7%94%A8%E6%B5%81%E7%AE%97%E6%B3%95/","tags":["å›¾è®º","ç½‘ç»œæµ","è´¹ç”¨æµ"],"title":"åŸºäº Capacity Scaling çš„å¼±å¤šé¡¹å¼å¤æ‚åº¦æœ€å°è´¹ç”¨æµç®—æ³•"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ CF\né¢˜æ„ç®€è¿° æœ‰ä¸€ä¸ªé•¿ä¸º $n$ çš„æ‹¬å·åºåˆ—ï¼Œå…¶ä¸­ä¸€äº›ä½ç½®æ˜¯é—®å·ï¼Œæ¯ä¸ªé—®å·æ›¿æ¢æˆå·¦æ‹¬å·æˆ–æ›¿æ¢æˆå³æ‹¬å·å„æœ‰ç»™å®šçš„ä»£ä»·ï¼Œåˆ¤æ–­æ˜¯å¦èƒ½å¤Ÿæ„é€ å‡ºä¸€ä¸ªåˆæ³•çš„æ‹¬å·åºåˆ—ï¼Œå¦‚æœå¯ä»¥ï¼Œæ±‚å‡ºæœ€å°ä»£ä»·ã€‚\n$n\\le 5\\cdot 10^4$ï¼ˆå®é™…ä¸Šå¯ä»¥å¤§å¾ˆå¤šï¼‰ã€‚\nç®€è¦åšæ³• è€ƒè™‘ä½¿ç”¨å¸¦åæ‚”çš„è´ªå¿ƒã€‚\nå¦‚æœç”¨ $cnt[i]$ è¡¨ç¤º $\\sum_{j=1}^i(-1)^{[a_i=\u0026rsquo;)']}$ï¼ˆå·¦æ‹¬å·æ¯”å³æ‹¬å·å¤šçš„ä¸ªæ•°ï¼‰ï¼Œæ‹¬å·åºåˆ—åˆæ³•å½“ä¸”ä»…å½“ $\\forall i,cnt[i]\\ge 0$ ä¸” $cnt[n]=0$ã€‚\nå¦‚æœæŠŠå³æ‹¬å·åæ‚”æˆå·¦æ‹¬å·ï¼Œä¸€å®šå¯ä»¥ä¿è¯ $cnt[i]\\ge 0$ è¿™ä¸ªæ¡ä»¶ä¾ç„¶æ»¡è¶³ã€‚\nä½†æ˜¯ï¼Œå¦‚æœæŠŠå·¦æ‹¬å·åæ‚”æˆå³æ‹¬å·ï¼Œæœ‰å¯èƒ½é€ æˆæœ¬æ¥ $cnt[i]\\ge 0$ çš„ä½ç½®å°äº $0$ã€‚\nå¹¶ä¸”ï¼Œå¦‚æœé€‰æ‹©äº†å¤šä½™çš„å·¦æ‹¬å·ï¼Œè¿˜ä¼šå¯¼è‡´ $cnt[n]\u0026gt;0$ã€‚\nå¦‚ä½•è§£å†³è¿™äº›é—®é¢˜å‘¢ï¼Ÿ\nå¯ä»¥å‘ç°ï¼Œå¦‚æœåˆå§‹æ—¶ä¼˜å…ˆé€‰æ‹©å³æ‹¬å·ï¼Œä¸Šè¿°é—®é¢˜å°±éƒ½å¾—åˆ°è§£å†³äº†ã€‚\nå³ï¼Œæ¯æ¬¡ç¢°åˆ°é—®å·éƒ½é€‰å³æ‹¬å·ï¼Œå¹¶ä¸”å°†å…¶æ ‡è®°ä¸ºå¯ä»¥åæ‚”ä¸ºå·¦æ‹¬å·ã€‚å¦‚æœ $cnt[i]\u0026lt;0$ï¼Œå°±ä»å¯åæ‚”çš„å³æ‹¬å·é‡Œé€‰åæ‚”ä»£ä»·æœ€å°çš„æ”¹æˆå·¦æ‹¬å·ã€‚è¿™æ ·çš„è¯ï¼Œ$cnt[i]\\ge 0$ ä¸ä¼šå› åæ‚”è€Œè¢«ç ´åï¼Œ$cnt[n]\u0026gt;0$ ä¹Ÿä¸ä¼šåœ¨æœ‰è§£æ—¶å‘ç”Ÿã€‚\nå…·ä½“å®ç°å¯ä»¥ç”¨å †ï¼ˆpriority_queueï¼‰ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;string\u0026gt; #include \u0026lt;queue\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef pair\u0026lt;int, int\u0026gt; pii; const int N = 50010; int n; char s[N]; long long ans; priority_queue\u0026lt;pii, vector\u0026lt;pii\u0026gt;, greater\u0026lt;pii\u0026gt; \u0026gt; q; int main() { scanf(\u0026quot;%s\u0026quot;, s + 1); n = strlen(s + 1); int cnt = 0; for (int i = 1; i \u0026lt;= n; ++i) { if (s[i] == '(') ++cnt; else if (s[i] == ')') --cnt; else { int a, b; scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;a, \u0026amp;b); --cnt; s[i] = ')'; ans += b; q.push(pii(a - b, i)); } if (cnt \u0026lt; 0) { if (q.empty()) break; cnt += 2; ans += q.top().first; s[q.top().second] = '('; q.pop(); } } if (cnt == 0) printf(\u0026quot;%I64d\\n%s\u0026quot;, ans, s + 1); else puts(\u0026quot;-1\u0026quot;); return 0; } ","date":"2019-10-16T21:50:44+08:00","permalink":"https://ouuan.github.io/post/cf3d-least-cost-bracket-sequence%E8%B4%AA%E5%BF%83/","tags":["è´ªå¿ƒ"],"title":"CF3D Least Cost Bracket Sequenceï¼ˆè´ªå¿ƒï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ CF\né¢˜æ„ç®€è¿° ç»™ä½  $n$ ä¸ªæ•´æ•°ï¼Œéœ€è¦å°†å®ƒä»¬åˆ†æˆä»»æ„ä¸ªè‡³å°‘åŒ…å« $3$ ä¸ªæ•°çš„ç¯ï¼Œä½¿å¾—æ¯ç›¸é‚»ä¸¤ä¸ªæ•°åŠ èµ·æ¥æ˜¯ä¸€ä¸ªè´¨æ•°ã€‚\nåˆ¤æ–­æ˜¯å¦æœ‰è§£ï¼Œè‹¥æœ‰è§£è¾“å‡ºä»»æ„ä¸€ç»„è§£ã€‚\n$3\\le n\\le 200$, æ•°çš„èŒƒå›´æ˜¯ $[2,10^4]$ã€‚\nç®€è¦åšæ³• é¦–å…ˆï¼Œç”±äºæ¯ä¸ªæ•°éƒ½å¤§äºç­‰äº $2$ï¼ŒåŠ èµ·æ¥æ˜¯è´¨æ•°çš„å¿…è¦æ¡ä»¶æ˜¯ä¸€å¥‡ä¸€å¶ã€‚\næ‰€ä»¥ï¼Œå¦‚æœæŠŠæ•°çœ‹æˆç‚¹ï¼Œç›¸åŠ å¾—åˆ°è´¨æ•°çœ‹æˆè¾¹ï¼Œå°±å¾—åˆ°äº†ä¸€å¼ äºŒåˆ†å›¾ã€‚\nè€Œé¢˜ç›®çš„è¦æ±‚å¯ä»¥çœ‹ä½œæ˜¯æ¯ä¸ªç‚¹éƒ½åŒ¹é…ä¸¤ä¸ªç‚¹ã€‚å› ä¸ºæ‰€æœ‰ç‚¹åº¦æ•°éƒ½ä¸º $2$ çš„ç®€å•æ— å‘å›¾ä¸€å®šæ˜¯ä¸€ä¸ªè‡³å°‘åŒ…å« $3$ ä¸ªç‚¹çš„ç¯ã€‚\næ‰€ä»¥å¯ä»¥è¿™æ ·å»ºå›¾ï¼šæºç‚¹åˆ°å¥‡æ•°ï¼Œå®¹é‡ä¸º $2$ï¼›å¥‡æ•°åˆ°ä¸å…¶ä¹‹å’Œä¸ºè´¨æ•°çš„å¶æ•°ï¼Œå®¹é‡ä¸º $1$ï¼›å¶æ•°åˆ°æ±‡ç‚¹ï¼Œå®¹é‡ä¸º $2$ã€‚\nå¦‚æœæœ€å¤§æµä¸º $n$ å°±æœ‰è§£ã€‚è¾“å‡ºæ–¹æ¡ˆå°±å’Œæ™®é€šçš„ç½‘ç»œæµè¾“å‡ºæ–¹æ¡ˆå·®ä¸å¤šï¼ˆå¯ä»¥å‚è€ƒä»£ç ï¼‰ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;queue\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N = 210; const int W = 20010; int n, a[N], p[W], tot; bool np[W]; struct Flow { const int s = N - 2; const int t = N - 1; int head[N], nxt[N * N], to[N * N], edge[N * N], cnt; queue\u0026lt;int\u0026gt; q; bool vis[N]; int dep[N]; void add(int u, int v, int w) { nxt[++cnt] = head[u]; head[u] = cnt; to[cnt] = v; edge[cnt] = w; } void Add(int u, int v, int w) { add(u, v, w); add(v, u, 0); } bool bfs() { memset(dep, -1, sizeof(dep)); dep[s] = 0; q.push(s); while (!q.empty()) { int u = q.front(); q.pop(); for (int i = head[u]; i; i = nxt[i]) { int v = to[i]; int w = edge[i]; if (w \u0026gt; 0 \u0026amp;\u0026amp; dep[v] == -1) { dep[v] = dep[u] + 1; q.push(v); } } } return ~dep[t]; } int dfs(int u, int flow) { if (dep[u] == dep[t]) return u == t ? flow : 0; int out = 0; for (int i = head[u]; i \u0026amp;\u0026amp; flow - out; i = nxt[i]) { int v = to[i]; int w = edge[i]; if (dep[v] == dep[u] + 1) { int f = dfs(v, min(flow - out, w)); edge[i] -= f; edge[i ^ 1] += f; out += f; } } return out; } int maxFlow() { int out = 0; while (bfs()) out += dfs(s, N); return out; } void init() { cnt = 1; for (int i = 1; i \u0026lt;= n; ++i) { if (a[i] \u0026amp; 1) Add(s, i, 2); else Add(i, t, 2); } for (int i = 1; i \u0026lt;= n; ++i) { if (!(a[i] \u0026amp; 1)) continue; for (int j = 1; j \u0026lt;= n; ++j) { if (np[a[i] + a[j]]) continue; Add(i, j, 1); } } } vector\u0026lt;int\u0026gt; cycle(int u) { vector\u0026lt;int\u0026gt; out(1, u); vis[u] = true; while (1) { bool flag = false; for (int i = head[u]; i; i = nxt[i]) { int v = to[i]; int w = edge[i]; if (((a[u] \u0026amp; 1) ^ (w \u0026gt; 0)) \u0026amp;\u0026amp; v \u0026lt;= n \u0026amp;\u0026amp; !vis[v]) { vis[v] = flag = true; out.push_back(v); u = v; break; } } if (!flag) break; } return out; } void output() { vector\u0026lt;vector\u0026lt;int\u0026gt; \u0026gt; ans; for (int i = 1; i \u0026lt;= n; ++i) if (!vis[i]) ans.push_back(cycle(i)); printf(\u0026quot;%d\\n\u0026quot;, ans.size()); for (int i = 0; i \u0026lt; ans.size(); ++i) { printf(\u0026quot;%d\u0026quot;, ans[i].size()); for (int j = 0; j \u0026lt; ans[i].size(); ++j) printf(\u0026quot; %d\u0026quot;, ans[i][j]); puts(\u0026quot;\u0026quot;); } } } flow; int main() { for (int i = 2; i \u0026lt; W; ++i) { if (!np[i]) p[++tot] = i; for (int j = 1; j \u0026lt;= tot \u0026amp;\u0026amp; i * p[j] \u0026lt; W; ++j) { np[i * p[j]] = true; if (i % p[j] == 0) break; } } scanf(\u0026quot;%d\u0026quot;, \u0026amp;n); for (int i = 1; i \u0026lt;= n; ++i) scanf(\u0026quot;%d\u0026quot;, a + i); flow.init(); if (flow.maxFlow() != n) { puts(\u0026quot;Impossible\u0026quot;); return 0; } flow.output(); return 0; } ","date":"2019-10-15T19:50:54+08:00","permalink":"https://ouuan.github.io/post/cf512c-fox-and-dinner%E4%BA%8C%E5%88%86%E5%9B%BE%E6%9C%80%E5%A4%A7%E6%B5%81/","tags":["å›¾è®º","äºŒåˆ†å›¾","ç½‘ç»œæµ","æœ€å¤§æµ"],"title":"CF512C Fox And Dinnerï¼ˆäºŒåˆ†å›¾ï¼Œæœ€å¤§æµï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ CF\né¢˜æ„ç®€è¿° æœ‰ä¸€ä¸ªå­—ç¬¦ä¸² $S[1..n+2]$ï¼Œå‘Šè¯‰ä½  $\\forall 1\\le i\\le n, S[i..i+2]$ï¼ˆæ‰€æœ‰é•¿ä¸º $3$ çš„å­ä¸²ï¼‰ï¼Œæ±‚ä»»æ„ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„ $S$ã€‚\n$1\\le n\\le 2\\cdot 10^5$ï¼Œå­—ç¬¦é›†ä¸ºå¤§å°å†™å­—æ¯ + æ•°å­—ã€‚\nç®€è¦åšæ³• å®¹æ˜“æƒ³åˆ°éœ€è¦å»ºå›¾ã€‚\nä½†æ˜¯ï¼Œå¦‚æœæŠŠæ¯ä¸ªé•¿ä¸º $3$ çš„å­ä¸²çœ‹æˆç‚¹ï¼Œå‰åç¼€åŒ¹é…çœ‹æˆè¾¹ï¼Œå°±åšä¸ä¸‹å»äº†ã€‚\næ­£ç¡®åšæ³•æ˜¯æŠŠæ¯ä¸ªé•¿ä¸º $2$ çš„å­ä¸²çœ‹æˆç‚¹ï¼Œé•¿ä¸º $3$ çš„å­ä¸²çœ‹æˆè¾¹ã€‚è¿™æ ·åŸé—®é¢˜å°±è½¬åŒ–æˆäº†æ±‚æœ‰å‘å›¾çš„æ¬§æ‹‰è·¯å¾„ã€‚ï¼ˆä¸ä¼šè¿™ä¸ªçš„è¯å»ºè®®è‡ªè¡Œæœç´¢ä¸€ä¸‹ã€‚ï¼‰\nå¦‚æœæ¯æ¬¡ dfs åŒä¸€ä¸ªç‚¹æ—¶éƒ½éå†æ‰€æœ‰å‡ºè¾¹ï¼Œåº¦æ•°æ¯”è¾ƒå¤§å°±ä¼šæŒ‚ã€‚ä½¿ç”¨ vector å­˜è¾¹çš„è¯å¯ä»¥ pop_back() æˆ–è€…è®°å½•ä¸€ä¸‹å·²ç»éå†åˆ°äº†å“ªä¸€æ¡è¾¹ï¼Œä½¿ç”¨å‰å‘æ˜Ÿçš„è¯å¯ä»¥åƒå½“å‰å¼§ä¼˜åŒ–é‚£æ ·ä¿®æ”¹ headã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;cstdlib\u0026gt; using namespace std; const int N = 200010; const int W = 62 * 62; int head[N], nxt[N], to[N], cnt; int n, ind[N], outd[N], tot; char s[N], ans[N]; int charToInt(char x) { if (isdigit(x)) return x - '0'; if (islower(x)) return x - 'a' + 10; return x - 'A' + 36; } char intToChar(int x) { if (x \u0026lt; 10) return x + '0'; if (x \u0026lt; 36) return x - 10 + 'a'; return x - 36 + 'A'; } int wordToInt(char x, char y) { return charToInt(x) * 62 + charToInt(y); } void add(int u, int v) { nxt[++cnt] = head[u]; head[u] = cnt; to[cnt] = v; } void fail() { puts(\u0026quot;NO\u0026quot;); exit(0); } void dfs(int u) { for (int\u0026amp; i = head[u]; i; ) { int v = to[i]; i = nxt[i]; dfs(v); } ans[--tot] = intToChar(u % 62); } int main() { scanf(\u0026quot;%d\u0026quot;, \u0026amp;n); for (int i = 1; i \u0026lt;= n; ++i) { scanf(\u0026quot;%s\u0026quot;, s); int u = wordToInt(s[0], s[1]); int v = wordToInt(s[1], s[2]); ++outd[u]; ++ind[v]; add(u, v); } int oneMoreIn = 0, oneMoreOut = 0; for (int i = 0; i \u0026lt; W; ++i) { if (ind[i] == outd[i]) continue; if (ind[i] == outd[i] + 1) { if (oneMoreIn) fail(); oneMoreIn = i; } else if (ind[i] + 1 == outd[i]) { if (oneMoreOut) fail(); oneMoreOut = i; } else fail(); } if (!oneMoreOut) { for (int i = 0; i \u0026lt; W; ++i) { if (outd[i]) { oneMoreOut = i; break; } } } tot = n + 2; dfs(oneMoreOut); ans[--tot] = intToChar(oneMoreOut / 62); if (!tot) printf(\u0026quot;YES\\n%s\u0026quot;, ans); else puts(\u0026quot;NO\u0026quot;); return 0; } ","date":"2019-10-15T15:01:00+08:00","permalink":"https://ouuan.github.io/post/cf508d-tanya-and-password%E6%AC%A7%E6%8B%89%E8%B7%AF%E5%BE%84/","tags":["å›¾è®º","å»ºå›¾","æ¬§æ‹‰è·¯å¾„"],"title":"CF508D Tanya and Passwordï¼ˆæ¬§æ‹‰è·¯å¾„ï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ CF\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€å¼ äºŒåˆ†å›¾ï¼šå·¦è¾¹ $t$ ä¸ªä½ç½®ï¼Œç¬¬ $i$ ä¸ªä½ç½®ä¸Šæœ‰ $a_i$ ä¸ªç‚¹ï¼›å³è¾¹ $n$ ä¸ªå¸¦æƒçš„ç‚¹ï¼Œç¬¬ $i$ ä¸ªç‚¹ä¸ä½ç½®åœ¨ $[l_i, r_i]$ ä¹‹é—´çš„æ‰€æœ‰å·¦è¾¹çš„ç‚¹æœ‰è¿è¾¹ï¼›åŒ¹é…æƒå€¼ä¸ºåŒ¹é…ä¸­å³è¾¹ç‚¹çš„æƒå€¼ä¹‹å’Œï¼›æ±‚æœ€å¤§æƒåŒ¹é…ã€‚\n$1\\le n,t\\le 3\\cdot 10^5$ï¼Œä¿è¯ $l_i\\le l_{i+1}$, $r_i\\le r_{i+1}$ã€‚\nç®€è¦åšæ³• é¦–å…ˆï¼Œå°†å³è¾¹çš„ç‚¹æŒ‰æƒå€¼ä»å¤§åˆ°å°æ’åºï¼Œä¾æ¬¡åŠ å…¥ï¼Œçœ‹æœ‰æ²¡æœ‰å®Œå…¨åŒ¹é…ï¼Œæœ‰å°±é€‰è¿™ä¸ªç‚¹ã€‚è¿™æ ·ä¸€å®šæ˜¯æœ€ä¼˜çš„ï¼Œå¥½åƒå¯ä»¥ç”¨æ‹Ÿé˜µç›¸å…³çš„ç†è®ºè¯æ˜ï¼Œä½†æˆ‘ä¸å¤ªä¼š..\näºæ˜¯ï¼Œé—®é¢˜è½¬åŒ–æˆäº†å¦‚ä½•åˆ¤å®šæ˜¯å¦å­˜åœ¨å®Œå…¨åŒ¹é…ï¼Œè€Œéœå°”å®šç†æ°æ°æ˜¯ç”¨æ¥åšè¿™ä»¶äº‹çš„â€”â€”è€ƒè™‘å³è¾¹çš„ç‚¹ä¸­è¢«é€‰æ‹©çš„é‚£äº›ï¼Œé€‰æ‹©å…¶ä¸€ä¸ªå­é›†ï¼Œåˆ¤æ–­æ˜¯å¦æ‰€æœ‰å­é›†çš„é‚»åŸŸï¼ˆå³ä¸å…¶ç›¸é‚»çš„ç‚¹æ„æˆçš„é›†åˆï¼‰å¤§å°éƒ½æ¯”å­é›†æœ¬èº«å¤§ã€‚\nå¦‚æœé€‰æ‹©çš„å­é›†ä¸­å…ƒç´ å¯¹åº”çš„åŒºé—´çš„å¹¶é›†ä¸æ˜¯è¿ç»­çš„ï¼Œéœå°”å®šç†çš„æ¡ä»¶æˆç«‹ç­‰ä»·äºå¯¹äºæ–­ç‚¹ä¸¤è¾¹åˆ†åˆ«æˆç«‹ï¼Œæ‰€ä»¥åªéœ€è¦è€ƒè™‘å­é›†å¯¹åº”çš„åŒºé—´è¿ç»­çš„æƒ…å†µã€‚\nåˆç”±äº $l_i\\le l_{i+1}$, $r_i\\le r_{i+1}$ï¼Œåªç”¨è€ƒè™‘å­é›†ä¸­çš„å…ƒç´ æœ¬èº«ç¼–å·è¿ç»­çš„æƒ…å†µã€‚é‚£ä¹ˆï¼Œéœå°”å®šç†çš„æ¡ä»¶å°±å¯ä»¥è¡¨ç¤ºä¸ºï¼š\n$$ \\forall 1\\le i\u0026lt; j\\le n,[i,j]\\text{ä¸­è¢«é€‰æ‹©çš„å³ä¾§ç‚¹ä¸ªæ•°}\\le [l_i,r_j]\\text{ä¸­å·¦ä¾§ç‚¹æ•°é‡} $$\nå¦‚æœå¤„ç†å‡º $a_{1..t}$ çš„å‰ç¼€å’Œ $pre[i]=\\sum_{j=1}^ia_j$ï¼Œç”¨ $p[i]$ è¡¨ç¤º $[1,i]$ ä¸­è¢«é€‰æ‹©çš„å³ä¾§ç‚¹ä¸ªæ•°ï¼Œé‚£ä¹ˆå¼å­å°±å˜æˆäº†ï¼š\n$$ \\forall1\\le i\u0026lt; j\\le n, p[j]-p[i-1]\\le pre[r_j]-pre[l_i-1] $$\nä¹Ÿå°±æ˜¯ï¼š\n$$ \\forall1\\le i\u0026lt; j\\le n, pre[l_i-1]-p[i-1]\\le pre[r_j]-p[j] $$\næ‰€ä»¥ï¼Œå¯ä»¥å¯¹æ¯ä¸ªå…ƒç´  $i$ ç»´æŠ¤ $pre[l_{i+1}-1]-p[i]$ ä»¥åŠ $pre[r_j]-p[j]$ã€‚\n$pre$ æ˜¯å®šå€¼ï¼Œè€ƒè™‘å¦‚ä½•æ›´æ–° $p$ã€‚äº‹å®ä¸Šï¼Œå¾€å·²é€‰æ‹©çš„ç‚¹ä¸­åŠ å…¥ä¸€ä¸ªç‚¹ï¼Œå°±æ˜¯æŠŠä¸€æ®µåç¼€çš„ $p$ åŠ ä¸€ã€‚æ‰€ä»¥å¯ä»¥è€ƒè™‘ç”¨çº¿æ®µæ ‘ç»´æŠ¤ã€‚\nå¹¶ä¸”ï¼Œä¸€æ®µåç¼€åŠ ä¸€ï¼ˆä»¤è¿™æ®µåç¼€ä¸º $[x..n]$ï¼‰åï¼Œåªæœ‰ $i\u0026lt; x,j\\ge x$ çš„æ•°å¯¹ $(i,j)$ å¯¹åº”çš„å¤§å°å…³ç³»å‘ç”Ÿæ”¹å˜ï¼Œäº‹å®ä¸Šåªç”¨åˆ¤æ–­ $i\u0026lt;x$ çš„ $pre[l_i-1]-p[i-1]$ çš„æœ€å¤§å€¼ä¸ $j\\ge x$ çš„ $pre[r_j]-p[j]$ çš„æœ€å°å€¼çš„å¤§å°å…³ç³»å³å¯ï¼ŒåŒæ ·å¯ä»¥ä½¿ç”¨çº¿æ®µæ ‘ç»´æŠ¤ã€‚\nå¦ä¸€ç§åˆ¤æ–­æ–¹æ³•ï¼Œæ˜¯åœ¨çº¿æ®µæ ‘ä¸Šçš„æ¯ä¸ªèŠ‚ç‚¹å¤„åˆ¤æ–­å·¦å„¿å­ä¸å³å„¿å­æœ‰æ²¡æœ‰å‡ºç°ä¸æ»¡è¶³éœå°”å®šç†æ¡ä»¶çš„æƒ…å†µã€‚\nå‚è€ƒä»£ç  ä»£ç ä¸­ä½¿ç”¨äº† segmenttree.hã€‚\næ¯æ¬¡åˆ¤æ–­å‰ç¼€ä¸åç¼€çš„å¤§å°å…³ç³» #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;algorithm\u0026gt; #include \u0026quot;segmenttree.h\u0026quot; using namespace std; typedef long long ll; int read() { int out = 0; char c; while (!isdigit(c = getchar())); for (; isdigit(c); c = getchar()) out = out * 10 + c - '0'; return out; } const int N = 300010; const ll INF = 1e18; int n, m; ll pre[N], ans; struct Girl { int l, r, p, id; bool operator\u0026lt;(const Girl\u0026amp; y) const { return p \u0026gt; y.p; } } g[N]; struct Value { ll mn, mx; Value(ll _mn = INF, ll _mx = -INF) { mn = _mn; mx = _mx; } }; vector\u0026lt;Value\u0026gt; a; Value merge(Value x, Value y) { return Value(min(x.mn, y.mn), max(x.mx, y.mx)); } void update(segmentTreeNode\u0026lt;Value, int\u0026gt;\u0026amp; u, int x) { u.val.mx += x; u.val.mn += x; u.tag += x; } int main() { n = read(); m = read(); for (int i = 1; i \u0026lt;= m; ++i) pre[i] = pre[i - 1] + read(); a.resize(n + 1); for (int i = 1; i \u0026lt;= n; ++i) { g[i].l = read(); g[i].r = read(); g[i].p = read(); g[i].id = i; a[i].mn = pre[g[i].r]; a[i - 1].mx = pre[g[i].l - 1]; } sort(g + 1, g + n + 1); segmentTree\u0026lt;Value, int, merge, update\u0026gt; t(0, n + 1, a, Value()); for (int i = 1; i \u0026lt;= n; ++i) { if (t.query(0, g[i].id).mx \u0026gt;= t.query(g[i].id, n + 1).mn) continue; t.modify(g[i].id, n + 1, -1); ans += g[i].p; } cout \u0026lt;\u0026lt; ans; return 0; }  åœ¨çº¿æ®µæ ‘çš„æ¯ä¸ªèŠ‚ç‚¹å¤„åˆ¤æ–­ #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;algorithm\u0026gt; #include \u0026quot;segmenttree.h\u0026quot; using namespace std; typedef long long ll; int read() { int out = 0; char c; while (!isdigit(c = getchar())); for (; isdigit(c); c = getchar()) out = out * 10 + c - '0'; return out; } const int N = 300010; const ll INF = 1e18; int n, m; ll pre[N], ans; struct Girl { int l, r, p, id; bool operator\u0026lt;(const Girl\u0026amp; y) const { return p \u0026gt; y.p; } } g[N]; struct Value { ll mn, mx; bool inv; Value(ll _mn = INF, ll _mx = -INF, int _inv = false) { mn = _mn; mx = _mx; inv = _inv; } }; vector\u0026lt;Value\u0026gt; a; Value merge(Value x, Value y) { return Value(min(x.mn, y.mn), max(x.mx, y.mx), x.inv || y.inv || x.mx \u0026gt; y.mn); } void update(segmentTreeNode\u0026lt;Value, int\u0026gt;\u0026amp; u, int x) { u.val.mx += x; u.val.mn += x; u.tag += x; } int main() { n = read(); m = read(); for (int i = 1; i \u0026lt;= m; ++i) pre[i] = pre[i - 1] + read(); a.resize(n + 1); for (int i = 1; i \u0026lt;= n; ++i) { g[i].l = read(); g[i].r = read(); g[i].p = read(); g[i].id = i; a[i].mn = pre[g[i].r]; a[i - 1].mx = pre[g[i].l - 1]; } sort(g + 1, g + n + 1); segmentTree\u0026lt;Value, int, merge, update\u0026gt; t(0, n + 1, a, Value()); for (int i = 1; i \u0026lt;= n; ++i) { t.modify(g[i].id, n + 1, -1); if (t.query(0, n + 1).inv) t.modify(g[i].id, n + 1, 1); else ans += g[i].p; } cout \u0026lt;\u0026lt; ans; return 0; } ","date":"2019-10-11T11:30:32+08:00","permalink":"https://ouuan.github.io/post/gym102268d-dates%E8%B4%AA%E5%BF%83%E4%BA%8C%E5%88%86%E5%9B%BE%E5%8C%B9%E9%85%8D%E7%BA%BF%E6%AE%B5%E6%A0%91/","tags":["è´ªå¿ƒ","å›¾è®º","äºŒåˆ†å›¾","äºŒåˆ†å›¾åŒ¹é…","æ•°æ®ç»“æ„","çº¿æ®µæ ‘"],"title":"gym102268D Datesï¼ˆè´ªå¿ƒï¼ŒäºŒåˆ†å›¾åŒ¹é…ï¼Œçº¿æ®µæ ‘ï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ CF\né¢˜æ„ç®€è¿° å¯¹äºä¸€ä¸ªæ•°åˆ—ï¼Œæ¯æ¬¡æ“ä½œå¯ä»¥å°†ç›¸é‚»çš„ä¸¤ä¸ªæ•° $x$ å’Œ $y$ åˆå¹¶æˆä¸€ä¸ªæ•° $x+2y$ï¼Œå®šä¹‰ä¸€ä¸ªæ•°åˆ—çš„æƒå€¼ä¸ºè¿›è¡Œæ“ä½œç›´è‡³åªå‰©ä¸€ä¸ªæ•°èƒ½å¾—åˆ°çš„æœ€å¤§å€¼ã€‚\nå¤šç»„è¯¢é—®ï¼Œæ¯æ¬¡ç»™å®šä¸€ä¸ªåŒºé—´ï¼Œæ±‚è¿™ä¸ªåŒºé—´çš„æƒå€¼ã€‚\næ•°åˆ—å€¼åŸŸ $-10^9\\sim10^9$ï¼Œæ•°åˆ—é•¿åº¦å’Œè¯¢é—®ä¸ªæ•°ä¸è¶…è¿‡ $10^5$ã€‚\nç®€è¦åšæ³• å…ˆä¸è€ƒè™‘å¤šç»„è¯¢é—®ã€‚\nç»è¿‡ï¼ˆå¹¶ä¸ï¼‰ç®€å•çš„æ¨ç†ï¼Œå¯ä»¥å‘ç°ï¼Œè®¾æ•°åˆ— $a_{1..n}$ çš„æƒå€¼ä¸º $\\sum_{i=1}^na_i2^{k_i}$ï¼Œé‚£ä¹ˆ $k_1=0$, $1\\le k_i\\le k_{i-1}+1(i\\ge 2)$ã€‚\né‚£ä¹ˆï¼Œæœ€ä¼˜æ–¹æ¡ˆä¸­ï¼Œ$k_{2..n}$ ä¸€å®šæ˜¯ä¸€å—ä¸€å—ä» $1$ å¼€å§‹ä¸¥æ ¼é€’å¢çš„ã€‚\nå¦‚æœæˆ‘ä»¬å·²ç»çŸ¥é“äº†ä¸€ä¸ªæ•°åˆ— $k_i$ çš„æ„æˆï¼Œè¿™æ—¶è¦åœ¨å…¶æœ«ç«¯åŠ å…¥ä¸€ä¸ªæ•°ï¼Œé‚£ä¹ˆå¯ä»¥å¾—åˆ°è´ªå¿ƒç­–ç•¥ï¼š\n è‹¥åŠ å…¥çš„æ•°æ˜¯æ­£æ•°ï¼Œä¸å‰ä¸€å—åˆå¹¶ã€‚è‹¥åˆå¹¶åæ•´å—æ„æˆçš„ç­‰æ¯”æ•°åˆ—ä¹‹å’Œä»ä¸ºæ­£æ•°ï¼Œç»§ç»­åˆå¹¶ã€‚ å¦åˆ™ç»“æŸåˆå¹¶è¿‡ç¨‹ã€‚  è¿™ä¸ªåˆå¹¶çš„è¿‡ç¨‹å¯ä»¥ç”¨å¹¶æŸ¥é›†ç»´æŠ¤ã€‚\né—®é¢˜åœ¨äºï¼Œå¦‚ä½•åˆ¤æ–­ä¸€å—çš„æ­£è´Ÿã€‚å¯ä»¥å¯¹æ¯å—ç»´æŠ¤å®ƒçš„å¤§å°ï¼ˆå—ä¸­çš„ç¬¬ $i$ ä¸ªæ•°ä¸ $2^i$ çš„ä¹˜ç§¯ä¹‹å’Œï¼‰ï¼Œåˆå¹¶æ—¶æ›´æ–°ã€‚ä½†è¿™æ ·åšå¯èƒ½ä¼šæº¢å‡ºï¼Œä½†å¯ä»¥å‘ç°ï¼Œä¸€æ—¦ä¸€å—çš„å¤§å°è¾¾åˆ° $10^9$ï¼Œä¸€å®šä¼šä¸€ç›´åˆå¹¶åˆ°æœ€å‰é¢ï¼Œæ‰€ä»¥å¤§äº $10^9$ çš„éƒ½å¯ä»¥è§†ä½œ $10^9$ï¼›ä¸€æ—¦å‰ä¸€å—çš„é•¿åº¦è¶…è¿‡ $30$ ä¸”å½“å‰å—å¤§å°ä¸ºæ­£ï¼Œä¹Ÿä¸€å®šä¼šä¸€ç›´åˆå¹¶åˆ°æœ€å‰é¢ï¼Œä¹Ÿå¯ä»¥è§†ä½œ $10^9$ã€‚\næ¥ä¸‹æ¥è€ƒè™‘å¦‚ä½•å›ç­”è¯¢é—®ã€‚\næŠŠè¯¢é—®ç¦»çº¿ä¸‹æ¥ï¼Œå³ç«¯ç‚¹ç›¸åŒçš„è¯¢é—®ä¸€èµ·å¤„ç†ã€‚å¤„ç†ä¸€ä¸ªè¯¢é—®ä¹‹å‰å…ˆè®¡ç®—å‡º $a_{1..r}$ çš„å—ï¼Œè‹¥ $l=1$ ç­”æ¡ˆå°±æ˜¯æ‰€æœ‰å—å¤§å°çš„å’Œï¼Œå¦åˆ™çš„è¯ç­”æ¡ˆä¼šæ˜¯è‹¥å¹²å—çš„ç­”æ¡ˆä¹‹å’ŒåŠ ä¸Šä¸€ä¸ªå—çš„åç¼€ã€‚å› ä¸ºå–ä¸€ä¸ªå—çš„åç¼€ï¼Œæ–­ç‚¹æ‰€åœ¨å—ä¸€å®šä¸ä¼šåˆ†å¼€ï¼ˆä¸€å—çš„çœŸåç¼€ä¸€å®šä¸ºæ­£ï¼‰ï¼Œåé¢çš„å—ä¹Ÿä¸ä¼šåˆå¹¶åˆ°å‰é¢å»ã€‚å¤„ç†å‡ºæ¨¡æ„ä¹‰ä¸‹å—ç­”æ¡ˆçš„å‰ç¼€å’Œï¼Œä»¥åŠ $presum_i=\\sum_{j=1}^i2^{i-1}a_i$ï¼Œå°±å¯ä»¥å¿«é€Ÿå›ç­”è¯¢é—®äº†ã€‚\nè¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼šåªæœ‰ç¬¬ä¸€å—çš„ç³»æ•°æ˜¯ä» $2^0=1$ å¼€å§‹çš„ã€‚ç”±äºè®¡ç®—æ—¶ç¬¬ä¸€å—ä¸€å®šæ˜¯é‚£ä¸ªåç¼€ï¼Œè®¡ç®—åç¼€ç­”æ¡ˆæ—¶ä» $1$ å¼€å§‹ï¼Œè®¡ç®—æ•´å—ç­”æ¡ˆæ—¶ä» $2$ å¼€å§‹å³å¯ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef long long ll; typedef pair\u0026lt;int, int\u0026gt; pii; const int N = 100010; const int mod = 1e9 + 7; int n, m, a[N], presum[N], inv2[N], f[N], len[N], sum[N], preans[N], out[N]; vector\u0026lt;pii\u0026gt; q[N]; int find(int x) { return x == f[x] ? x : f[x] = find(f[x]); } int calc(int l, int r) { return (ll) (presum[r] - presum[l - 1] + mod) * inv2[l - 1] % mod; } int main() { scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;n, \u0026amp;m); inv2[0] = 1; for (int i = 1, two = 1; i \u0026lt;= n; ++i, two = two * 2 % mod) { scanf(\u0026quot;%d\u0026quot;, a + i); inv2[i] = (ll) inv2[i - 1] * (mod + 1) / 2 % mod; presum[i] = (presum[i - 1] + (ll) two * a[i] % mod + mod) % mod; } for (int i = 1; i \u0026lt;= m; ++i) { int l, r; scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;l, \u0026amp;r); q[r].push_back(pii(l, i)); } for (int i = 1; i \u0026lt;= n; ++i) { f[i] = i; len[i] = 1; sum[i] = a[i]; while (find(i) \u0026gt; 1 \u0026amp;\u0026amp; sum[find(i)] \u0026gt; 0) { int x = find(i); int y = find(x - 1); if (len[y] \u0026gt;= 30 || (((ll) sum[x]) \u0026lt;\u0026lt; len[y]) + sum[y] \u0026gt;= 1e9) sum[y] = 1e9; else sum[y] += sum[x] \u0026lt;\u0026lt; len[y]; len[y] += len[x]; f[x] = y; } preans[find(i)] = (preans[find(find(i) - 1)] + 2ll * calc(find(i), i)) % mod; for (int j = 0; j \u0026lt; q[i].size(); ++j) { int l = q[i][j].first; int id = q[i][j].second; out[id] = (0ll + preans[find(i)] - preans[find(l)] + mod + calc(l, find(l) + len[find(l)] - 1)) % mod; } } for (int i = 1; i \u0026lt;= m; ++i) printf(\u0026quot;%d\\n\u0026quot;, out[i]); return 0; } ","date":"2019-10-08T20:49:18+08:00","permalink":"https://ouuan.github.io/post/cf878e-numbers-on-the-blackboard%E8%B4%AA%E5%BF%83%E5%B9%B6%E6%9F%A5%E9%9B%86/","tags":["è´ªå¿ƒ","å¹¶æŸ¥é›†","ç¦»çº¿ç®—æ³•"],"title":"CF878E Numbers on the blackboardï¼ˆè´ªå¿ƒï¼Œå¹¶æŸ¥é›†ï¼‰"},{"categories":["æŠ€æœ¯"],"contents":"ä½œä¸ºä¸€ä¸ªåˆšåˆšä¸Šçº¿ä¸¤å‘¨å°±å›æ»šäº†æ— æ•°æ¬¡æ•°æ®çš„ OJï¼Œå¤‡ä»½è‡ªç„¶æ˜¯å¾ˆé‡è¦çš„~\nä¸€äº›è„šæœ¬ commit.sh #!/bin/bash time=$(date \u0026quot;+%Y%m%d%H%M%S\u0026quot;) echo ${time} docker commit uoj uoj_backup_${time} docker images --format \u0026quot;{{.ID}}: {{.CreatedSince}}\u0026quot; | grep 'day' | cut -d : -f 1 | xargs docker image rm  commitï¼Œç„¶ååˆ æ‰æ¯”è¾ƒä¹…è¿œï¼ˆåœ¨ CREATED ä¸­æ˜¾ç¤ºä¸º XX days agoï¼‰çš„é•œåƒèŠ‚çº¦ç©ºé—´ï¼ˆä¸ç„¶åœ¨è‡ªåŠ¨å¤‡ä»½ä¸‹è¿‡ä¸äº†å‡ å¤©ç¡¬ç›˜å°±çˆ†äº†ï¼‰ã€‚\nsave.sh #!/bin/bash time=$(date \u0026quot;+%Y%m%d%H%M%S\u0026quot;) echo ${time} docker commit uoj uoj_backup_${time} docker save -o /home/ouuan/uoj/uoj_backup_${time}.tar uoj_backup_${time} docker images --format \u0026quot;{{.ID}}: {{.CreatedSince}}\u0026quot; | grep 'day' | cut -d : -f 1 | xargs docker image rm  å…ˆ commitï¼Œç„¶åå­˜ä¸º tarã€‚å³ä½¿ç³»ç»ŸæŒ‚äº†ï¼Œä¹Ÿèƒ½ä»æ–‡ä»¶æ¢å¤ã€‚\nnew.sh #!/bin/bash time=$(date \u0026quot;+%Y%m%d%H%M%S\u0026quot;) echo ${time} docker commit uoj uoj_backup_${time} docker stop uoj docker rm uoj docker image ls echo \u0026quot;Please enter the version (after uoj_backup_): \u0026quot; read version docker run --name uoj -dit -p 23333:80 -p 3690:3690 --cap-add SYS_PTRACE \u0026quot;uoj_backup_$version\u0026quot;  ä¾¿æ·åœ°ä»é•œåƒåˆ›å»ºæ–°å®¹å™¨ï¼Œåœ¨åˆ é™¤å½“å‰å®¹å™¨ä¹‹å‰ commitã€‚\nè®¡åˆ’ä»»åŠ¡ è¾“å…¥å‘½ä»¤ sudo crontab -eã€‚\nï¼ˆå¯èƒ½ä¼šå…ˆè®©ä½ é€‰æ‹©ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ï¼‰ç„¶åè¾“å…¥ï¼š\n30 * * * * bash path/commit.sh 0 22 * * * bash path/save.sh  path å°±æ˜¯æ”¾è„šæœ¬æ–‡ä»¶çš„è·¯å¾„ã€‚\nå‰é¢äº”é¡¹åˆ†åˆ«æ˜¯ åˆ†é’Ÿ / å°æ—¶ / æ—¥æœŸ / æœˆä»½ / æ˜ŸæœŸï¼Œåœ¨ç¬¦åˆæ¡ä»¶æ—¶å°±ä¼šæ‰§è¡Œåé¢çš„å‘½ä»¤ã€‚\nä¸Šé¢çš„ä¾‹å­ä¼šåœ¨ xx:30 æ—¶ commit ä¸€æ¬¡ï¼Œåœ¨æ¯å¤©æ™šä¸Š 10 ç‚¹ save ä¸€æ¬¡ã€‚\n","date":"2019-09-27T12:01:05+08:00","permalink":"https://ouuan.github.io/post/uoj-%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BD/","tags":["OJ"],"title":"UOJ è‡ªåŠ¨å¤‡ä»½"},{"categories":["æŠ€æœ¯"],"contents":"ç¨‹åºå‘˜å°±æ˜¯ä»£ç é‡ç”¨çš„è‰ºæœ¯å®¶ï¼ˆ\nè¿™å‘¨å›åˆ°å­¦æ ¡ï¼ŒåŸºäº ç¤¾åŒºç‰ˆ UOJ æ­äº†ä¸€ä¸ªæ ¡å†… OJã€‚\nè¿‡ç¨‹ä¸­ç°åœ¨è¿˜è®°å¾—çš„é‡åˆ°çš„é—®é¢˜ï¼Œæ˜¯é‡å¯åæ˜¾ç¤º \u0026ldquo;wrong database\u0026rdquo;ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯ docker é‡Œè¿è¡Œå‘½ä»¤ service mysql restartã€‚\nä¸€å‘¨é‡Œå¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯åœ¨é­”æ”¹ï¼Œå¹¶ä¸”æ˜¯ å¼€æº çš„ã€‚\nè¿™å‡ å¤©ç®—æ˜¯ç¨å¾®ä½“éªŒäº†ä¸€ä¸‹ç¨‹åºå‘˜çš„ç”Ÿæ´»ã€‚ä¼šä¸ºç²¾å¦™çš„ä»£ç é‡ç”¨è€ŒæƒŠå¹ï¼Œä¹Ÿä¼šä¸ºä¸€ä¸ª bug è€Œè‹¦è‹¦æ±‚ç´¢ã€‚commit ä¸­çš„ä¸¤è¡Œä»£ç ï¼Œå¯èƒ½æ˜¯è‹¥å¹²å°æ—¶æœç´¢çš„ç»“æœï¼Œç»è¿‡äº†æ•°åæ¬¡é”™è¯¯çš„å°è¯•ã€‚\nä»¥å‰æˆ‘å¯¹ç¨‹åºå‘˜çš„å°è±¡æ˜¯ã€Œè‹¦åŠ›æ´»ã€ï¼Œç°åœ¨ç¨å¾®æœ‰ç‚¹æ”¹å˜äº†ã€‚è¯—äººç»™åŒä¸€ä¸ªäº‹ç‰©èµ·ä¸åŒçš„åå­—ï¼Œæ•°å­¦å®¶ç»™ä¸åŒçš„äº‹ç‰©èµ·ç›¸åŒçš„åå­—ï¼Œç¨‹åºå‘˜ç»™ä¸åŒçš„éœ€æ±‚ä½¿ç”¨åŒä¸€ä¸ªå‡½æ•°ã€‚\nå›æƒ³èµ·æ¥ï¼Œä¸åˆ°ä¸€å¹´å‰ï¼Œä¹Ÿå°±æ˜¯æˆ‘å¼€å§‹ä½¿ç”¨ hexo åšå®¢ä¹‹å‰ï¼Œæˆ‘è¿˜å¯¹ web å¼€å‘ä¸€æ— æ‰€çŸ¥ã€‚åªä¸è¿‡ç°åœ¨æ‰€ä¼šçš„é‚£äº›ä¸œè¥¿éƒ½æ˜¯é€šè¿‡é˜…è¯»æºç  + éœ€è¦ä»€ä¹ˆå°±æœä»€ä¹ˆå­¦åˆ°çš„ï¼Œå¯¼è‡´æœ‰å¾ˆå¤šä¸æ¸…æ¥šçš„åœ°æ–¹ï¼Œè¿™ä¹Ÿæ˜¯å¯¼è‡´æ•ˆç‡ä½ä¸‹çš„é‡è¦åŸå› ã€‚\næ€»ä¹‹ï¼Œæ¬¢è¿å¤§å®¶è‡ªç”±é€‰å– Hinata Online Judge çš„ feature copy åˆ°è‡ªå·±çš„ UOJ é‡Œï¼\nç„¶è€Œä»£ç å¤ªä¸è§„èŒƒäº†ï¼Œæ‰€ä»¥æš‚æ—¶ä¸å¤ªå‡†å¤‡å‘ pr\u0026hellip;ä¹Ÿæ¬¢è¿å¤§å®¶æ¥å¸®æˆ‘è§„èŒƒä¸€ä¸‹å‘ prã€‚\n","date":"2019-09-21T21:58:04+08:00","permalink":"https://ouuan.github.io/post/hinata-online-judge-%E7%9A%84%E6%90%AD%E5%BB%BA/","tags":["OJ","å·¥ç¨‹"],"title":"Hinata Online Judge çš„æ­å»º"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\nLOJ\nBZOJ\né¢˜æ„ç®€è¿° ä¸€ä¸ªæ•°åˆ—æ˜¯â€œå¯åˆ é™¤çš„â€ï¼Œå½“ä¸”ä»…å½“å¯ä»¥é€šè¿‡è¿™ç§æ“ä½œå°†å…¶æ¸…ç©ºï¼šå°†æ•°åˆ—ä¸­ç­‰äºè¿™ä¸ªæ•°åˆ—é•¿åº¦çš„æ•°åˆ å»ã€‚\nå¦‚ï¼Œ$[1, 2, 4, 4]$ æ˜¯â€œå¯åˆ é™¤çš„â€ï¼Œç¬¬ä¸€æ¬¡æ“ä½œåˆ æˆ $[1, 2]$ï¼Œç¬¬äºŒæ¬¡æ“ä½œåˆ æˆ $[1]$ï¼Œç¬¬ä¸‰æ¬¡æ“ä½œæ¸…ç©ºã€‚\nå®šä¹‰ä¸€ä¸ªæ•°åˆ—çš„æƒå€¼ä¸ºè‡³å°‘éœ€è¦è¿›è¡Œçš„å•ç‚¹ä¿®æ”¹æ•°ç›®ï¼Œä½¿å¾—è¿™ä¸ªæ•°åˆ—å˜æˆâ€œå¯åˆ é™¤çš„â€ã€‚\nç°åœ¨ç»™ä½ ä¸€ä¸ªæ•°åˆ— $a_{1..n}$ï¼Œä»¥åŠ $m$ æ¬¡ä¿®æ”¹æ“ä½œï¼Œä½ éœ€è¦åœ¨æ¯æ¬¡ä¿®æ”¹åå›ç­”è¿™ä¸ªæ•°åˆ—çš„æƒå€¼ã€‚\nä¿®æ”¹æ“ä½œæœ‰ä¸‰ç§ï¼š\n å•ç‚¹ä¿®æ”¹ã€‚ å…¨å±€åŠ ä¸€ã€‚ å…¨å±€å‡ä¸€ã€‚  $1\\le n,m\\le 150000$ï¼Œæ•°åˆ—åˆå§‹å€¼ä»¥åŠå•ç‚¹ä¿®æ”¹æˆçš„å€¼åœ¨ $[1,n]$ å†…ï¼Œä½†å…¨å±€ä¿®æ”¹å¯èƒ½ä½¿æ•°åˆ—ä¸­çš„å…ƒç´ è¶…è¿‡è¿™ä¸ªèŒƒå›´ã€‚\nç®€è¦åšæ³• è®¡ç®—æ•°åˆ—çš„æƒå€¼ å¦‚æœå°†æ•° $i$ å‡ºç°çš„æ¬¡æ•° $cnt[i]$ çœ‹åšä¸€ä¸ªé«˜åº¦ä¸º $cnt[i]$ã€æ”¾åœ¨ä½ç½® $i$ çš„æŸ±å­ï¼Œè®©æ‰€æœ‰æŸ±å­å‘å·¦å€’ï¼Œæ¯ä¸ªä½ç½®å°±ä¼šè¢«è‹¥å¹²ä¸ªæŸ±å­è¦†ç›–ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ$i$ è¿™ä¸ªæŸ±å­è¦†ç›–äº† $[i-cnt[i]+1,i]$ã€‚\nä¸€ä¸ªæ•°åˆ—æ˜¯â€œå¯åˆ é™¤çš„â€å½“ä¸”ä»…å½“ $[1,n]$ éƒ½è¢«æ°å¥½è¦†ç›–äº†ä¸€æ¬¡ã€‚\nå¹¶ä¸”ï¼Œä¸€ä¸ªæ•°åˆ—çš„æƒå€¼å°±æ˜¯å®ƒæ²¡è¢«è¦†ç›–çš„ä½ç½®æ•°é‡ï¼Œè¯æ˜å¦‚ä¸‹ï¼š\n è¿™æ˜¯ç­”æ¡ˆçš„ä¸‹ç•Œï¼Œå› ä¸ºæ¯æ¬¡å•ç‚¹ä¿®æ”¹æœ€å¤šè¦†ç›–ä¸€ä¸ªæ–°ä½ç½®ã€‚ è¿™æ˜¯ç­”æ¡ˆçš„ä¸Šç•Œï¼Œå› ä¸ºä½ å¯ä»¥æŠŠé‡å¤è¦†ç›–çš„æ¢åˆ°æœªè¦†ç›–å¤„ã€‚  å…¨å±€ä¿®æ”¹ å…¨å±€ä¿®æ”¹ä¼šå¯¼è‡´ $cnt$ ä»¥åŠè¦†ç›–æ•°é‡å‘ç”Ÿä½ç§»ï¼Œæ‰€ä»¥å¯ä»¥è€ƒè™‘ä½¿ç”¨ä¸€ä¸ªæ ‡è®° $delta$ æ¥è¡¨ç¤ºç°åœ¨å…¨å±€åŠ äº†å¤šå°‘ï¼Œé‚£ä¹ˆ $cnt[i]$ è¡¨ç¤º $cnt[i+delta]$ï¼Œä½ç½® $i$ è¢«è¦†ç›–çš„æ¬¡æ•°è¢«è®°å½•åœ¨ $i-delta$ å¤„ï¼Œ$a[i]$ è¡¨ç¤º $a_i-delta$ã€‚\néœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œå…¨å±€åŠ æ—¶éœ€è¦å‡å»åŸæ¥ä½ç½® $n$ çš„è´¡çŒ®ï¼Œå› ä¸ºå®ƒä»¬æ¥åˆ° $n+1$ åå¿…å®šä¼šæ˜¯ç´¯èµ˜ï¼Œå…¨å±€å‡æ—¶è¦å†åŠ å›æ¥ã€‚ä½†ä¸éœ€è¦ç‰¹æ®Šå¤„ç†ä½ç½® $1$ çš„è´¡çŒ®ï¼Œå› ä¸ºè¦†ç›–æ˜¯å‘å·¦çš„ï¼ŒæŸ¥è¯¢æ—¶åªä¼šæŸ¥è¯¢ $[1,n]$ çš„è¦†ç›–æ¬¡æ•°ï¼Œå°äº $1$ çš„ä½ç½®å¯¹ç­”æ¡ˆæ²¡æœ‰å½±å“ã€‚\nå¯ä»¥ç”¨çº¿æ®µæ ‘ç»´æŠ¤è¦†ç›–æ¬¡æ•°ã€‚\nå®ç°ç»†èŠ‚ ä½¿ç”¨ä¸€ä¸ªçº¿æ®µæ ‘æ¥ç»´æŠ¤è¦†ç›–æ¬¡æ•°ï¼Œå®ƒæ”¯æŒåŒºé—´åŠ å‡ã€åŒºé—´æŸ¥è¯¢æœ€å°å€¼åŠå…¶å‡ºç°æ¬¡æ•°ã€‚\nä¸‹é¢æ˜¯å®ç°çš„ç»†èŠ‚ã€‚ï¼ˆä»£ç ä¸­æ‰€æœ‰ $cnt$ çš„ä¸‹æ ‡éƒ½è¦åŠ ä¸Š $m$ é¿å…è´Ÿæ•°ä¸‹æ ‡ã€‚ï¼‰\nå•ç‚¹ä¿®æ”¹ é¦–å…ˆå¤„ç†åŸæ¥çš„ $a_p$ã€‚\nå…ˆåˆ¤æ–­ $a_p$ æ˜¯å¦å°äºç­‰äº $n$ï¼Œåªæœ‰ $a_p\\le n$ æ—¶æ‰ä¼šæœ‰è´¡çŒ®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ $a[p]+delta\\le n$ æ—¶éœ€è¦åœ¨çº¿æ®µæ ‘ä¸Š $a[p]-cnt[a[p]]+1$ å¤„å•ç‚¹å‡ä¸€ã€‚\nç„¶åå°† $cnt[a[p]]$ å‡ä¸€ã€‚\næ¥ç€å¤„ç†æ–°å¢çš„ $x$ã€‚\n$x$ å¿…å®šåœ¨ $[1,n]$ å†…ï¼Œæ‰€ä»¥ä¸€å®šéœ€è¦åœ¨çº¿æ®µæ ‘ä¸Š $x-cnt[x-delta]-delta$ å¤„å•ç‚¹åŠ ä¸€ã€‚\nç„¶åå°† $cnt[x-delta]$ åŠ ä¸€ã€‚\næœ€åå°† $a[p]$ ä¿®æ”¹ä¸º $x-delta$ã€‚\nå…¨å±€åŠ  éœ€è¦å‡å»ä½ç½® $n$ çš„è´¡çŒ®ï¼š$[n-cnt[n-delta]+1-delta,n-delta]$ åŒºé—´å‡ä¸€ã€‚\nç„¶åå°† $delta$ åŠ ä¸€ã€‚\nå…¨å±€å‡ å…ˆå°† $delta$ å‡ä¸€ã€‚\nç„¶ååŠ ä¸Šä½ç½® $n$ çš„è´¡çŒ®ï¼š$[n-cnt[n-delta]+1-delta,n-delta]$ åŒºé—´åŠ ä¸€ã€‚\næŸ¥è¯¢ç­”æ¡ˆ æŸ¥è¯¢ $[1-delta,n-delta]$ çš„æœ€å°å€¼åŠå‡ºç°æ¬¡æ•°ã€‚\nè‹¥æœ€å°å€¼ä¸ä¸º $0$ åˆ™ç­”æ¡ˆä¸º $0$ã€‚\nå¦åˆ™ç­”æ¡ˆä¸ºæœ€å°å€¼çš„å‡ºç°æ¬¡æ•°ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; using namespace std; const int N = 150010; struct Min { int val, cnt; Min(int _val = 0, int _cnt = 0): val(_val), cnt(_cnt) {} }; Min merge(Min a, Min b) { if (a.val \u0026lt; b.val) return a; if (b.val \u0026lt; a.val) return b; return Min(a.val, a.cnt + b.cnt); } struct SegmentTree { #define ls (cur \u0026lt;\u0026lt; 1) #define rs (cur \u0026lt;\u0026lt; 1 | 1) #define mid ((l + r) \u0026gt;\u0026gt; 1) Min mn[N \u0026lt;\u0026lt; 4]; int tag[N \u0026lt;\u0026lt; 4]; void pushup(int cur) { mn[cur] = merge(mn[ls], mn[rs]); } void add(int cur, int x) { mn[cur].val += x; tag[cur] += x; } void pushdown(int cur) { add(ls, tag[cur]); add(rs, tag[cur]); tag[cur] = 0; } void build(int cur, int l, int r) { if (l == r - 1) mn[cur] = Min(0, 1); else { build(ls, l, mid); build(rs, mid, r); pushup(cur); } } void add(int cur, int l, int r, int L, int R, int x) { if (l \u0026gt;= R || r \u0026lt;= L) return; if (L \u0026lt;= l \u0026amp;\u0026amp; r \u0026lt;= R) add(cur, x); else { pushdown(cur); add(ls, l, mid, L, R, x); add(rs, mid, r, L, R, x); pushup(cur); } } Min min(int cur, int l, int r, int L, int R) { if (l \u0026gt;= R || r \u0026lt;= L) return Min(N, -1); if (L \u0026lt;= l \u0026amp;\u0026amp; r \u0026lt;= R) return mn[cur]; pushdown(cur); return merge(min(ls, l, mid, L, R), min(rs, mid, r, L, R)); } #undef ls #undef rs #undef mid } t; int n, m, delta, a[N], cnt[N * 3]; int main() { scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;n, \u0026amp;m); for (int i = 1; i \u0026lt;= n; ++i) { scanf(\u0026quot;%d\u0026quot;, a + i); ++cnt[a[i] + m]; } const int ll = 1 - m - n, rr = m + n + 2; t.build(1, ll, rr); for (int i = 1; i \u0026lt;= n; ++i) t.add(1, ll, rr, i - cnt[i + m] + 1, i + 1, 1); for (int i = 1; i \u0026lt;= m; ++i) { int p, x; scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;p, \u0026amp;x); if (p == 0) { if (x == -1) { --delta; t.add(1, ll, rr, n + 1 - cnt[n - delta + m] - delta, n - delta + 1, 1); } else { t.add(1, ll, rr, n + 1 - cnt[n - delta + m] - delta, n - delta + 1, -1); ++delta; } } else { if (a[p] + delta \u0026lt;= n) t.add(1, ll, rr, a[p] - cnt[a[p] + m] + 1, a[p] - cnt[a[p] + m] + 2, -1); --cnt[a[p] + m]; t.add(1, ll, rr, x - cnt[x - delta + m] - delta, x - cnt[x - delta + m] - delta + 1, 1); ++cnt[x - delta + m]; a[p] = x - delta; } Min res = t.min(1, ll, rr, 1 - delta, n - delta + 1); if (res.val \u0026gt; 0) puts(\u0026quot;0\u0026quot;); else printf(\u0026quot;%d\\n\u0026quot;, res.cnt); } return 0; } ","date":"2019-09-16T11:11:10+08:00","permalink":"https://ouuan.github.io/post/bjoi2019-%E5%88%A0%E6%95%B0%E8%B4%AA%E5%BF%83%E7%BA%BF%E6%AE%B5%E6%A0%91/","tags":["è´ªå¿ƒ","æ•°æ®ç»“æ„","çº¿æ®µæ ‘"],"title":"BJOI2019 åˆ æ•°ï¼ˆè´ªå¿ƒï¼Œçº¿æ®µæ ‘ï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ CF\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€å¼  $n$ ä¸ªç‚¹ $m$ æ¡è¾¹çš„æ— å‘è¿é€šå›¾ï¼Œä¸€æ¡è·¯å¾„çš„æƒå€¼æ˜¯è·¯å¾„ä¸Šçš„è¾¹çš„ç¼–å·ï¼ˆåè¿›åˆ¶ï¼‰é¡ºæ¬¡è¿æ¥è€Œæˆçš„æ•°å­—ã€‚æ±‚ $1$ åˆ°æ¯ä¸ªç‚¹çš„æœ€çŸ­è·¯ï¼Œè¾“å‡º å¯¹ $10^9+7$ å–æ¨¡ã€‚\n$2\\le n\\le10^5$, $n-1\\le m\\le10^5$ã€‚\nç®€è¦åšæ³• æ•°å­—è¶Šé•¿å°±è¶Šå¤§ï¼Œæ‰€ä»¥è½¬åŒ–æˆä¼˜å…ˆé•¿åº¦çŸ­ï¼Œå…¶æ¬¡å­—å…¸åºå°ã€‚\næŠŠæ¯æ¡è¾¹æ‹†æˆä½æ•°æ¡è¾¹ï¼ˆå¦‚ $(u, v, 718)$ æ‹†æˆ $(u, x, 7)$, $(x, y, 1)$, $(y, v, 8)$, $(v, x, 7)$, $(y, u, 8)$ï¼‰ï¼Œè¿™æ ·çš„è¯é•¿åº¦çš„è¾¹æƒå°±å…¨æ˜¯ä¸€ï¼Œå¯ä»¥ç”¨ BFS è§£å†³ã€‚\nå¦‚ä½•ä½¿å­—å…¸åºæœ€å°å‘¢ï¼Ÿå®¹æ˜“æƒ³åˆ°ä¼˜å…ˆéå†è¾¹æƒï¼ˆæ‹†è¾¹åå…¨æ˜¯ä¸€ä½æ•°ï¼‰å°çš„è¾¹ï¼Œä½†æ˜¯ï¼Œå¦‚æœä¸¤ä¸ªç‚¹çš„æœ€çŸ­è·¯ç›¸åŒï¼Œè¿™æ ·åšå°±ä¼šå¯¼è‡´é”™è¯¯ã€‚ï¼ˆå¦‚ï¼š$dis[u]=dis[v]=233$ï¼Œ$u$ åœ¨é˜Ÿåˆ—é‡Œåœ¨ $v$ çš„å‰é¢ï¼Œ$(u, x, 3)$ å’Œ $(v, x, 2)$ è¿™ä¸¤æ¡è¾¹éƒ½å­˜åœ¨ï¼Œ$dis[x]$ å°±ä¼šè¢«é”™è¯¯åœ°è®¾ä¸º $2333$ï¼Œè€Œå®ƒåº”å½“æ˜¯ $2332$ã€‚ï¼‰\næ­£ç¡®çš„åšæ³•æ˜¯å°†æœ€çŸ­è·¯ç›¸åŒçš„ç‚¹ç»‘åœ¨ä¸€èµ·æ”¾å…¥é˜Ÿåˆ—ï¼Œå®ç°å¯ä»¥ä½¿ç”¨ vectorã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;queue\u0026gt; #include \u0026lt;cstring\u0026gt; using namespace std; const int N = 100010; const int mod = 1e9 + 7; int n, m, tot, dis[N * 5], digit[10]; vector\u0026lt;int\u0026gt; g[N * 5][10]; queue\u0026lt;vector\u0026lt;int\u0026gt; \u0026gt; q; int main() { scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;n, \u0026amp;m); tot = n; for (int ww = 1; ww \u0026lt;= m; ++ww) { int u, v, w = ww; scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;u, \u0026amp;v); if (w \u0026lt; 10) { g[u][w].push_back(v); g[v][w].push_back(u); } else // æ‹†è¾¹ { int l = ++tot; int r = l; int d = 0; while (w) { digit[++d] = w % 10; w /= 10; } for (int i = d - 1; i \u0026gt; 1; --i) { g[tot][digit[i]].push_back(tot + 1); r = ++tot; } g[u][digit[d]].push_back(l); g[r][digit[1]].push_back(u); g[v][digit[d]].push_back(l); g[r][digit[1]].push_back(v); } } memset(dis, -1, sizeof(dis)); q.push(vector\u0026lt;int\u0026gt;(1, 1)); dis[1] = 0; while (!q.empty()) { vector\u0026lt;int\u0026gt; vec = q.front(); q.pop(); for (int i = 0; i \u0026lt;= 9; ++i) { vector\u0026lt;int\u0026gt; nxt; // nxt é‡Œå­˜çš„æ˜¯æœ€çŸ­è·¯ç›¸åŒçš„ç‚¹ for (auto u : vec) { for (auto v : g[u][i]) { if (dis[v] == -1) { dis[v] = (dis[u] * 10ll + i) % mod; nxt.push_back(v); } } } if (!nxt.empty()) q.push(nxt); } } for (int i = 2; i \u0026lt;= n; ++i) printf(\u0026quot;%d\\n\u0026quot;, dis[i]); return 0; } ","date":"2019-09-16T08:58:32+08:00","permalink":"https://ouuan.github.io/post/cf1209f-koala-and-notebookbfs%E6%9C%80%E7%9F%AD%E8%B7%AF/","tags":["å›¾è®º","æœ€çŸ­è·¯","BFS"],"title":"CF1209F Koala and Notebookï¼ˆBFSï¼Œæœ€çŸ­è·¯ï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ CF\næ´›è°·\né¢˜æ„ç®€è¿° ç»™å®šä¸€æ£µ $n$ ä¸ªç‚¹å¸¦è¾¹æƒçš„æ ‘ï¼Œå®šä¹‰ $d(u)$ ä¸ºæ ‘ä¸Šç¦»å®ƒæœ€è¿œçš„ç‚¹åˆ°å®ƒçš„è·ç¦»ï¼Œ$q$ æ¬¡è¯¢é—®ï¼Œæ¯æ¬¡è¯¢é—®ç»™å®š $l$ï¼Œæ±‚ä¸€ä¸ªæœ€å¤§çš„æ ‘ä¸Šè¿é€šå— $V'$ çš„å¤§å°ï¼Œæ»¡è¶³ $\\forall u, v\\in V'$ï¼Œ$|d(u)-d(v)|\\le l$ã€‚\n$1\\le n\\le 10^5$, $1\\le q\\le 50$ã€‚\nç®€è¦åšæ³• é¦–å…ˆä½¿ç”¨ up and downï¼ˆä¸¤é dfsï¼Œç¬¬ä¸€éæ±‚å¾€ä¸‹èµ°çš„æœ€è¿œè·ç¦»ï¼Œç¬¬äºŒéæ±‚å¾€ä¸Šèµ°çš„æœ€è¿œè·ç¦»ï¼‰æ±‚å‡º $d(u)$ã€‚\næœ‰ä¸€ä¸ªæ€§è´¨ï¼šå¦‚æœä»¥ $d(u)$ æœ€å°çš„ $u$ ä¸ºæ ¹ï¼Œ$\\forall v, d(v)\\ge d(parent(v))$ã€‚ï¼ˆä¸‹æ–‡ä¸­çš„â€œå­æ ‘â€éƒ½æ˜¯ä»¥ $d$ æœ€å°çš„ç‚¹ä¸ºæ ¹çš„ã€‚ï¼‰\nç®€å•è¯æ˜ ä¸éš¾å‘ç°ï¼Œæˆ‘ä»¬åªè¦è¯æ˜ $u$ çš„æ¯ä¸ªå„¿å­ $v$ éƒ½æ˜¯å­æ ‘ $v$ ä¸­ $d$ æœ€å°çš„ï¼Œå³å¯å½’çº³åœ°è¯æ˜åŸå‘½é¢˜ã€‚\nå‡è®¾å­æ ‘ $v$ ä¸­å­˜åœ¨ä¸€ä¸ªç‚¹ $w$ï¼Œ$d(w)\u0026lt;d(v)$ï¼Œé‚£ä¹ˆä» $v$ å‡ºå‘çš„æœ€é•¿è·¯çš„ç¬¬ä¸€æ­¥ä¸€å®šæ˜¯ $v$ åˆ° $w$ çš„è·¯å¾„ä¸Šçš„ç¬¬ä¸€æ¡è¾¹ï¼ˆå¦åˆ™çš„è¯ï¼Œä» $w$ å‡ºå‘å¯ä»¥èµ°åˆ° $v$ å†èµ°ä» $v$ å‡ºå‘çš„æœ€é•¿è·¯ï¼Œå°±ä¼šå¯¼è‡´ $d(w)\u0026gt;d(v)$ï¼‰ï¼Œè¿™æ ·çš„è¯ï¼Œä» $u$ å‡ºå‘ä¹Ÿå¯ä»¥å…ˆèµ°åˆ° $v$ å†èµ° $v$ å‡ºå‘çš„æœ€é•¿è·¯ï¼Œè¿™æ ·çš„è¯ $d(u)\u0026gt;d(v)$ï¼Œä¸é¢˜è®¾çŸ›ç›¾ã€‚\n é¢˜ç›®æ‰€æ±‚çš„è¿é€šå—ä¸€å®šæ˜¯ $d$ çš„å¤§å°è¿ç»­çš„ä¸€æ®µï¼Œä»¤æ‰€æ±‚è¿é€šå—ä¸­ $d$ æœ€å°ä¸”ç¦»æ ¹æœ€è¿‘çš„ç‚¹ä¸º $u$ï¼Œç”±ä¸Šé¢çš„æ€§è´¨ä¸éš¾å‘ç°ï¼Œæ‰€æ±‚è¿é€šå—ä¸€å®šåœ¨å­æ ‘ $u$ ä¸­ã€‚\nå¦‚æœæŒ‰ $d$ ä»å¤§åˆ°å°æšä¸¾æ¯ä¸ªç‚¹ï¼Œç”¨å¹¶æŸ¥é›†ç»´æŠ¤ç¬¦åˆæ¡ä»¶çš„ç‚¹çš„è¿é€šæ€§ä»¥åŠæ¯å—çš„å¤§å°ï¼Œå¯ä»¥å‘ç°ï¼Œåˆ å»ä¸€ä¸ªç‚¹ï¼ˆä¸€ä¸ª $d\u0026gt;d(u)+l$ çš„ç‚¹ï¼‰å¹¶ä¸å½±å“è¿é€šæ€§ï¼Œåªéœ€è¦å°†å…¶æ‰€åœ¨å—çš„å¤§å°å‡ä¸€å³å¯ã€‚ï¼ˆåŠ å…¥ä¸€ä¸ªç‚¹å°±æ˜¯åˆå¹¶å­æ ‘ï¼Œåˆ å»ä¸€ä¸ªç‚¹æ˜¯åˆ å»å¶å­ã€‚ï¼‰\nè¿™æ ·çš„è¯ç­”æ¡ˆå°±æ˜¯è¿‡ç¨‹ä¸­æœ€å¤§çš„ä¸€å—çš„å¤§å°ã€‚\næ€»æ—¶é—´å¤æ‚åº¦å°±æ˜¯ $O(qn\\alpha(n)+n\\log n)$ æˆ– O(qn+nlogn) æˆ– $O(qn\\log n)$ã€‚\nå‚è€ƒä»£ç  ï¼ˆéå¸¸æŠ±æ­‰ï¼Œä½¿ç”¨äº† CF æ¨¡æ¿ qaqï¼‰\n#ifndef OUUAN #pragma GCC optimize(\u0026quot;Ofast,no-stack-protector,unroll-loops,fast-math\u0026quot;) #endif #include\u0026lt;bits/stdc++.h\u0026gt; #define int LoveLive //#define FAST_IOSTREAM 1 #define For(i,l,r)for(int i=(l),i##end=(r);i\u0026lt;=i##end;++i) #define FOR(i,r,l)for(int i=(r),i##end=(l);i\u0026gt;=i##end;--i) #define SON(i,u)for(int i=head[u];i;i=nxt[i]) #define ms(a,x)memset(a,x,sizeof(a)) #define fi first #define se second #define pb emplace_back #define pq priority_queue #define isinf(x)(x\u0026gt;=INF?-1:x) #define y1 why_is_there_a_function_called_y1 #define DEBUG(x)cerr\u0026lt;\u0026lt;(#x)\u0026lt;\u0026lt;\u0026quot;:\u0026quot;\u0026lt;\u0026lt;x\u0026lt;\u0026lt;endl using namespace std; typedef long long LoveLive;typedef pair\u0026lt;int,int\u0026gt;pii;typedef vector\u0026lt;int\u0026gt;vi; #ifdef int const int INF=0x3f3f3f3f3f3f3f3fll; #else const int INF=0x3f3f3f3f; #endif const double eps=1e-9;mt19937 rng(chrono::steady_clock::now().time_since_epoch(). count());int randint(int l,int r){int out=rng()%(r-l+1)+l;return out\u0026gt;=l?out:out+ r-l+1;} #ifdef FAST_IOSTREAM #define br cout\u0026lt;\u0026lt;'\\n' #define sp cout\u0026lt;\u0026lt;' ' long long read(){long long x;cin\u0026gt;\u0026gt;x;return x;}template\u0026lt;typename T\u0026gt;void read(T\u0026amp;x){ cin\u0026gt;\u0026gt;x;}template\u0026lt;typename T\u0026gt;void write(const T\u0026amp;x){cout\u0026lt;\u0026lt;x;} #else #define br putchar('\\n') #define sp putchar(' ') template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;!is_integral\u0026lt;T\u0026gt;::value,void\u0026gt;::type read(T \u0026amp;x){cin\u0026gt;\u0026gt;x;}long long read(){char c;long long out=0,f=1;for(c=getchar();!isdigit (c)\u0026amp;\u0026amp;c!='-';c=getchar());if(c=='-'){f=-1;c=getchar();}for(;isdigit(c);c=getchar()) out=(out\u0026lt;\u0026lt;3)+(out\u0026lt;\u0026lt;1)+c-'0';return out*f;}template\u0026lt;typename T\u0026gt;typename enable_if \u0026lt;is_integral\u0026lt;T\u0026gt;::value,T\u0026gt;::type read(T\u0026amp;x){char c;T f=1;x=0;for(c=getchar();!isdigit (c)\u0026amp;\u0026amp;c!='-';c=getchar());if(c=='-'){f=-1;c=getchar();}for(;isdigit(c);c=getchar()) x=(x\u0026lt;\u0026lt;3)+(x\u0026lt;\u0026lt;1)+c-'0';return x*=f;}char read(char\u0026amp;x){for(x=getchar();isspace(x); x=getchar());return x;}double read(double\u0026amp;x){scanf(\u0026quot;%lf\u0026quot;,\u0026amp;x);return x;}template\u0026lt; typename T\u0026gt;typename enable_if\u0026lt;!is_integral\u0026lt;T\u0026gt;::value,void\u0026gt;::type write(const T\u0026amp;x ){cout\u0026lt;\u0026lt;x;}template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;is_integral\u0026lt;T\u0026gt;::value,void\u0026gt;::type write(const T\u0026amp;x){if(x\u0026lt;0){putchar('-');write(-x);return;}if(x\u0026gt;9)write(x/10);putchar (x%10+'0');}void write(const char\u0026amp;x){putchar(x);}void write(const double\u0026amp;x){printf (\u0026quot;%.10lf\u0026quot;,x);} #endif template\u0026lt;typename T,typename...Args\u0026gt;void read(T\u0026amp;x,Args\u0026amp;...args){read(x);read(args ...);}template\u0026lt;typename OutputIt,typename=typename enable_if\u0026lt;is_same\u0026lt;output_iterator_tag ,typename iterator_traits\u0026lt;OutputIt\u0026gt;::iterator_category\u0026gt;::value||( is_base_of\u0026lt;forward_iterator_tag,typename iterator_traits\u0026lt;OutputIt\u0026gt;::iterator_category\u0026gt;::value \u0026amp;\u0026amp;!is_const\u0026lt;OutputIt\u0026gt;::value)\u0026gt;::type\u0026gt;void read(OutputIt __first,OutputIt __last){for(;__first !=__last;++__first)read(*__first);}template\u0026lt;typename InputIt,typename=typename enable_if \u0026lt;is_base_of\u0026lt;input_iterator_tag,typename iterator_traits\u0026lt;InputIt\u0026gt;::iterator_category \u0026gt;::value\u0026gt;::type\u0026gt;void wts(InputIt __first,InputIt __last){bool isFirst=true;for(; __first!=__last;++__first){if(isFirst)isFirst=false;else sp;write(*__first);}br;} template\u0026lt;typename InputIt,typename=typename enable_if\u0026lt;is_base_of\u0026lt;input_iterator_tag ,typename iterator_traits\u0026lt;InputIt\u0026gt;::iterator_category\u0026gt;::value\u0026gt;::type\u0026gt;void wtb(InputIt __first,InputIt __last){for(;__first!=__last;++__first){write(*__first);br;}}template \u0026lt;typename T\u0026gt;void wts(const T\u0026amp;x){write(x);sp;}template\u0026lt;typename T\u0026gt;void wtb(const T\u0026amp;x){write(x);br;}template\u0026lt;typename T\u0026gt;void wte(const T\u0026amp;x){write(x);exit(0);}template \u0026lt;typename T,typename...Args\u0026gt;void wts(const T\u0026amp;x,Args...args){wts(x);wts(args...);} template\u0026lt;typename T,typename...Args\u0026gt;void wtb(const T\u0026amp;x,Args...args){wts(x);wtb(args ...);}template\u0026lt;typename T,typename...Args\u0026gt;void wte(const T\u0026amp;x,Args...args){wts(x); wte(args...);}template\u0026lt;typename T\u0026gt;inline bool up(T\u0026amp;x,const T\u0026amp;y){return x\u0026lt;y?x=y,1 :0;}template\u0026lt;typename T\u0026gt;inline bool dn(T\u0026amp;x,const T\u0026amp;y){return y\u0026lt;x?x=y,1:0;} const int N = 100010; const int mod = 1000000007; int head[N], nxt[N \u0026lt;\u0026lt; 1], to[N \u0026lt;\u0026lt; 1], edge[N \u0026lt;\u0026lt; 1], cnt; int n, f[N], siz[N], id[N], rid[N]; struct Element { int fi, se; Element() { fi = 0; se = -INF; } void insert(int x) { if (x \u0026gt; fi) { se = fi; fi = x; } else if (x \u0026gt; se) se = x; } int get(int x) { if (x == fi) return se; return fi; } } dis[N]; void dfsdn(int u, int fa) { SON (i, u) { int v = to[i]; int w = edge[i]; if (v == fa) continue; dfsdn(v, u); dis[u].insert(dis[v].fi + w); } } void dfsup(int u, int fa) { SON (i, u) { int v = to[i]; int w = edge[i]; if (v == fa) continue; dis[v].insert(dis[u].get(dis[v].fi + w) + w); dfsup(v, u); } } void add(int u, int v, int w) { nxt[++cnt] = head[u]; head[u] = cnt; to[cnt] = v; edge[cnt] = w; } int find(int x) { return x == f[x] ? x : f[x] = find(f[x]); } void merge(int x, int y) { if (find(x) == find(y)) return; if (siz[find(x)] \u0026lt; siz[find(y)]) swap(x, y); siz[find(x)] += siz[find(y)]; f[find(y)] = find(x); } signed main() { #ifdef FAST_IOSTREAM cin.sync_with_stdio(false); cin.tie(0); #endif read(n); For (i, 1, n - 1) { int u, v, w; read(u, v, w); add(u, v, w); add(v, u, w); } dfsdn(1, 0); dfsup(1, 0); For (i, 1, n) id[i] = i; sort(id + 1, id + n + 1, [](int x, int y){return dis[x].fi \u0026gt; dis[y].fi;}); For (i, 1, n) rid[id[i]] = i; int q = read(); while (q--) { int len = read(); int l = 1; int ans = 0; For (i, 1, n) { f[i] = i; siz[i] = 1; } For (u, 1, n) { while (dis[id[l]].fi \u0026gt; dis[id[u]].fi + len) --siz[find(id[l++])]; SON (i, id[u]) { int v = to[i]; if (rid[v] \u0026lt; u) merge(id[u], v); } up(ans, siz[find(id[u])]); } wtb(ans); } return 0; } ","date":"2019-09-10T13:37:12+08:00","permalink":"https://ouuan.github.io/post/cf516d-drazil-and-morning-exerciseup-and-down%E5%B9%B6%E6%9F%A5%E9%9B%86/","tags":["up and down","å¹¶æŸ¥é›†"],"title":"CF516D Drazil and Morning Exerciseï¼ˆup and downï¼Œå¹¶æŸ¥é›†ï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ LOJ\næ´›è°·\né¢˜æ„ç®€è¿° ä½ éœ€è¦ç»™ $n$ é¢—ç å­çš„é¡¹é“¾æŸ“ $m$ é¢—é»‘è‰²ï¼Œ$n-m$ é¢—ç™½è‰²ï¼Œä¸èƒ½æœ‰è¿ç»­çš„ä¸€ä¸²é»‘è‰²ç å­é•¿åº¦è¶…è¿‡ $k$ï¼Œæ±‚æ—‹è½¬åŒæ„ä¸‹æœ¬è´¨ä¸åŒçš„æŸ“è‰²æ–¹æ¡ˆæ•°ã€‚\n$1\\le m,k\\le n\\le10^5$\nç®€è¦åšæ³• é¦–å…ˆå¥—ç”¨ Burnside å¼•ç†ï¼Œä»¥åŠä½ç§»ä¸º $r$ çš„æ—‹è½¬å‘¨æœŸä¸º $\\gcd(r, n)$ çš„ç»“è®ºï¼Œå¾—åˆ°ç­”æ¡ˆçš„å¼å­ï¼š $$ \\begin{aligned} answer\u0026amp;=\\frac 1 n\\sum\\limits_{i=1}^nf\\left(\\frac n{\\gcd(i,n)}\\right)\\\\\n\u0026amp;=\\frac 1 n\\sum\\limits_{d|n}\\varphi(d)f(d) \\end{aligned} $$ å…¶ä¸­ $f(x)$ è¡¨ç¤ºåœ¨ä¸€ä¸ªé•¿ä¸º $\\frac n x$ çš„é¡¹é“¾ä¸Šï¼ŒæŸ“ $\\frac{m}{x}$ ä¸ªé»‘ç å­ï¼Œ$\\frac{n-m}x$ ä¸ªç™½ç å­ï¼Œä¸èƒ½æœ‰è¿ç»­çš„ä¸€ä¸²é»‘è‰²ç å­é•¿åº¦è¶…è¿‡ $k$ çš„æ–¹æ¡ˆæ•°ï¼ˆåœ¨ä¸æ—‹è½¬çš„æ„ä¹‰ä¸‹è®¡æ•°ï¼‰ã€‚\nå¯ä»¥çœ‹å‡ºåªæœ‰ $d|m$ æ—¶ $f(d)$ å¯èƒ½ä¸ä¸ºé›¶ï¼Œå¦‚æœç”¨ $f(x, y)$ è¡¨ç¤ºåœ¨ä¸€ä¸ªé•¿ä¸º $x+y$ çš„é¡¹é“¾ä¸Šï¼ŒæŸ“ $x$ ä¸ªé»‘ç å­ï¼Œ$y$ ä¸ªç™½ç å­ï¼Œä¸èƒ½æœ‰è¿ç»­çš„ä¸€ä¸²é»‘è‰²ç å­é•¿åº¦è¶…è¿‡ $k$ çš„æ–¹æ¡ˆæ•°ï¼ˆåœ¨ä¸æ—‹è½¬çš„æ„ä¹‰ä¸‹è®¡æ•°ï¼‰ï¼Œç­”æ¡ˆçš„å¼å­å¯ä»¥å†™æˆï¼š\n$$ answer=\\frac 1 n\\sum\\limits_{d|\\gcd(n, m)}\\varphi(d)f\\left(\\frac m d, \\frac{n-m}d\\right) $$\nç°åœ¨çš„é—®é¢˜è½¬åŒ–æˆäº†å¿«é€Ÿæ±‚ $f(x, y)$ã€‚\né¦–å…ˆï¼Œç‰¹åˆ¤æ‰ä¸¤ç§æƒ…å†µï¼š\n $k=n$ $y\\ne 0$ ä¸” $x\\le k$  è¿™ä¸¤ç§æƒ…å†µä¸‹ $f(x, y)=\\binom{x+y}x$\nç”±äºæ˜¯åœ¨ç¯ä¸Šä¸å¥½å¤„ç†ï¼Œæšä¸¾ä¸¤ä¾§çš„é»‘ç å­ä¸ªæ•°ï¼Œå°±å¯ä»¥è½¬åŒ–ä¸ºåºåˆ—ä¸Šçš„é—®é¢˜ã€‚\nè€Œåºåˆ—ä¸Šçš„é—®é¢˜ï¼Œå°±ç›¸å½“äºæ±‚æ–¹ç¨‹ $x_1+x_2+\\cdots+x_{y+1}=x\\ (0\\le x_i\\le k)$ çš„è§£çš„ä¸ªæ•°ã€‚\nè€ƒè™‘å®¹æ–¥ï¼Œæšä¸¾è‡³å°‘æœ‰ $i$ ä¸ªå˜é‡çš„å€¼å¤§äº $k$ï¼ˆå®é™…ä¸Šæ˜¯æšä¸¾å¤§å°ä¸º $i$ çš„å­é›†éƒ½å¤§äº $k$ï¼‰ï¼Œè§£çš„ä¸ªæ•°ä¸º $\\binom{x+y-i(k+1)}y$ã€‚\nè¿™æ ·çš„è¯ï¼Œæšä¸¾ä¸¤ä¾§é»‘ç å­ä¸ªæ•°æœ€å¤šæšä¸¾åˆ° $k$ï¼Œå®¹æ–¥å¤æ‚åº¦ä¸º $O(\\frac{x+y}k)$ï¼Œè®¡ç®— $f(x,y)$ çš„å¤æ‚åº¦ä¸º $O(x+y)$ï¼Œæ•´é“é¢˜çš„å¤æ‚åº¦å°±æ˜¯ $O(\\text{é¢„å¤„ç†ç»„åˆæ•°}+\\sigma(n))$ï¼Œå…¶ä¸­ $\\sigma(n)$ è¡¨ç¤º $n$ çš„æ‰€æœ‰çº¦æ•°ä¹‹å’Œï¼Œåœ¨æ•°æ®èŒƒå›´å†…æœ€å¤§ä¸º $403200$ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; using namespace std; typedef long long ll; const int N = 100005; const int mod = 998244353; int n, m, k, p[N], ptot, phi[N], fact[N], invf[N]; bool np[N]; int qpow(int x, int y) { int out = 1; while (y) { if (y \u0026amp; 1) out = (ll) out * x % mod; x = (ll) x * x % mod; y \u0026gt;\u0026gt;= 1; } return out; } int c(int x, int y) { if (y \u0026gt; x || y \u0026lt; 0) return 0; return (ll) fact[x] * invf[y] % mod * invf[x - y] % mod; } int calc(int x, int y) { int out = 0; for (int i = 0; i * (k + 1) \u0026lt;= x + y; ++i) { out = (out + (i \u0026amp; 1 ? -1ll : 1ll) * c(x + y - (k + 1) * i, y) * c(y + 1, i) % mod + mod) % mod; } return out; } int f(int x, int y) { if (k == n || y != 0 \u0026amp;\u0026amp; x \u0026lt;= k) return c(x + y, x); int out = 0; for (int i = 0; i \u0026lt;= x \u0026amp;\u0026amp; i \u0026lt;= k; ++i) { out = (out + (ll) (i + 1) * calc(x - i, y - 2)) % mod; } return out; } int gcd(int x, int y) { return y ? gcd(y, x % y) : x; } int main() { cin \u0026gt;\u0026gt; n \u0026gt;\u0026gt; m \u0026gt;\u0026gt; k; fact[0] = invf[0] = 1; for (int i = 1; i \u0026lt;= n; ++i) fact[i] = (ll) fact[i - 1] * i % mod; invf[n] = qpow(fact[n], mod - 2); for (int i = n - 1; i \u0026gt;= 1; --i) invf[i] = (ll) invf[i + 1] * (i + 1) % mod; phi[1] = 1; for (int i = 2; i \u0026lt;= n; ++i) { if (!np[i]) { p[++ptot] = i; phi[i] = i - 1; } for (int j = 1; j \u0026lt;= ptot \u0026amp;\u0026amp; i * p[j] \u0026lt;= n; ++j) { int x = i * p[j]; np[x] = true; if (i % p[j]) phi[x] = phi[i] * (p[j] - 1); else { phi[x] = phi[i] * p[j]; break; } } } int ans = 0; int g = gcd(m, n); for (int i = 1; i * i \u0026lt;= g; ++i) { if (g % i == 0) { if (i * i == g) ans = (ans + (ll) f(m / i, (n - m) / i) * phi[i]) % mod; else ans = (ans + (ll) f(m / i, (n - m) / i) * phi[i] + (ll) f(m / (g / i), (n - m) / (g / i)) * phi[g / i]) % mod; } } cout \u0026lt;\u0026lt; (ll) ans * qpow(n, mod - 2) % mod; return 0; } ","date":"2019-09-05T10:45:59+08:00","permalink":"https://ouuan.github.io/post/loj6519-%E9%AD%94%E5%8A%9B%E7%8E%AFburnside%E5%BC%95%E7%90%86%E5%AE%B9%E6%96%A5%E5%8E%9F%E7%90%86/","tags":["ç¾¤è®º","Burnsideå¼•ç†","ç»„åˆæ•°å­¦","å®¹æ–¥åŸç†"],"title":"LOJ6519 é­”åŠ›ç¯ï¼ˆBurnsideå¼•ç†ï¼Œå®¹æ–¥åŸç†ï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ LOJ\né¢˜æ„ç®€è¿° æ±‚é•¿åº¦ä¸º $n$ é€†åºå¯¹æ•°ä¸º $k$ çš„æ’åˆ—ä¸ªæ•°ã€‚\n$1\\le n, k\\le 10^5$ï¼Œ$k\\le \\binom n 2$\nç®€è¦ä½œæ³• ä»å°åˆ°å¤§ä¾æ¬¡è€ƒè™‘å°†æ¯ä¸ªæ•°æ’å…¥æ’åˆ—ï¼Œé‚£ä¹ˆæ¯ä¸ªæ•° $i$ éƒ½å¯ä»¥è´¡çŒ® $0\\dots i-1$ ä¸ªé€†åºå¯¹ï¼Œæ‰€ä»¥ç­”æ¡ˆçš„ç”Ÿæˆå‡½æ•°ä¸º $(1 + x)(1 + x + x^2)\\cdots(1+x+\\cdots+x^{n-1})$ã€‚\nä¸Šä¸‹åŒæ—¶ä¹˜ä¸Š $(1-x)^n$ï¼Œå³æ±‚ï¼š $$ \\frac{(1-x)(1-x^2)\\cdots(1-x^n)}{(1-x)^n} $$ ï¼ˆä¸çº¦åˆ†æ˜¯ä¸ºäº†æ–¹ä¾¿æ±‚ã€‚ï¼‰\nåˆ†æ¯ $\\frac{1}{(1-x)^n}=\\sum\\limits_{i\\ge 0}\\binom{n-1+i}{n-1}x^i$ï¼Œæ˜¯ä¸€ä¸ªå¤§å®¶ç†ŸçŸ¥çš„ç»“è®ºï¼Œå¯ä»¥åˆ©ç”¨ $(1+x+x^2+\\cdots)^n$ çš„ç»„åˆæ„ä¹‰è¯´æ˜ã€‚\nåˆ†å­çš„ $x^i$ é¡¹ç³»æ•°çš„ç»„åˆæ„ä¹‰ä¸ºï¼šè€ƒè™‘ä» $1,2,\\ldots,n$ ä¸­é€‰è‹¥å¹²ä¸ªå’Œä¸º $i$ çš„æ•°ï¼ˆæ¯ä¸ªæ•°åªèƒ½é€‰ä¸€éï¼‰çš„æ‰€æœ‰æ–¹æ¡ˆï¼Œè‹¥é€‰äº†å¥‡æ•°ä¸ªæ•°è´¡çŒ®ä¸º $-1$ï¼Œè‹¥é€‰äº†å¶æ•°ä¸ªæ•°è´¡çŒ®ä¸º $1$ã€‚\nè¿™ä¸ªä¸œè¥¿å¯ä»¥ç”¨ç±»ä¼¼ LOJ6089 çš„æ–¹æ³•æ±‚ï¼š\nä»¤ $f_{i,j}$ è¡¨ç¤ºé€‰ $i$ ä¸ªæ•°å’Œä¸º $j$ çš„æ–¹æ¡ˆæ•°ã€‚\nç”±äºé€‰æ‹©çš„æ•°ä¸¤ä¸¤ä¸åŒï¼Œç¬¬ä¸€ç»´çš„å¤§å°æ˜¯ $O(\\sqrt k)$ çš„ã€‚\nè½¬ç§»æœ‰ä¸¤ç§æ–¹å¼ï¼š\n èƒŒåŒ…é‡Œçš„æ‰€æœ‰æ•°åŠ ä¸€ã€‚ èƒŒåŒ…é‡Œçš„æ‰€æœ‰æ•°åŠ ä¸€ï¼Œå¹¶å‘èƒŒåŒ…ä¸­æ”¾å…¥ä¸€ä¸ªä½“ç§¯ä¸º $1$ çš„ç‰©å“ã€‚  $$ f_{i,j}=f_{i-1,j-i}+f_{i,j-i} $$\nä½†è¿™æ ·ç®—å¯èƒ½ä¼šå‡ºç°ä½“ç§¯å¤§äº $n$ çš„ç‰©å“ã€‚\nå…·ä½“æ¥è¯´ï¼Œå½“ $j\\ge n+1$ æ—¶ï¼Œä¼šæœ‰ $f_{i-1,j-n-1}$ ç§ä¸åˆæ³•çš„æ–¹æ¡ˆï¼Œéœ€è¦å‡å»ã€‚\nè®¡ç®—å®Œ dp ä¹‹åï¼Œåˆ†å­çš„ $x^i$ é¡¹ç³»æ•°å³ä¸º $\\sum\\limits_{j\\ge0}(-1)^jf_{j,i}$\næœ€åæŠŠåˆ†å­å’Œåˆ†æ¯å·ç§¯èµ·æ¥å³å¯ï¼Œæ€»æ—¶é—´å¤æ‚åº¦ä¸º $O(n+k\\sqrt k)$ æˆ– $O(n\\log p+k\\sqrt k)$ï¼ˆå–å†³äºè®¡ç®—ç»„åˆæ•°ä¸é€†å…ƒçš„æ–¹å¼ï¼‰ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cstring\u0026gt; using namespace std; typedef long long ll; const int N = 100005; const int mod = 1e9 + 7; int n, k, f[2][N], cur, ans, fact[N \u0026lt;\u0026lt; 1], invf[N \u0026lt;\u0026lt; 1]; int qpow(int x, int y) { int out = 1; while (y) { if (y \u0026amp; 1) out = (ll) out * x % mod; x = (ll) x * x % mod; y \u0026gt;\u0026gt;= 1; } return out; } int c(int x, int y) { return (ll) fact[x] * invf[y] % mod * invf[x - y] % mod; } int main() { scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;n, \u0026amp;k); fact[0] = invf[0] = 1; for (int i = 1; i \u0026lt;= n + k; ++i) { fact[i] = (ll) fact[i - 1] * i % mod; invf[i] = qpow(fact[i], mod - 2); } ans = c(n - 1 + k, n - 1); f[cur][0] = 1; for (int i = 1, sum = 1; sum \u0026lt;= k; sum += (++i)) { memset(f[cur ^= 1], 0, sizeof(int) * i); for (int j = i; j \u0026lt;= k; ++j) { f[cur][j] = (f[cur ^ 1][j - i] + f[cur][j - i]) % mod; if (j \u0026gt;= n + 1) f[cur][j] = (f[cur][j] - f[cur ^ 1][j - n - 1] + mod) % mod; ans = (ans + (i \u0026amp; 1 ? -1ll : 1ll) * f[cur][j] * c(n - 1 + k - j, n - 1) % mod + mod) % mod; } } printf(\u0026quot;%d\u0026quot;, ans); return 0; } ","date":"2019-09-04T09:22:32+08:00","permalink":"https://ouuan.github.io/post/loj6077-%E9%80%86%E5%BA%8F%E5%AF%B9%E7%94%9F%E6%88%90%E5%87%BD%E6%95%B0%E8%AE%A1%E6%95%B0dp/","tags":["ç»„åˆæ•°å­¦","ç”Ÿæˆå‡½æ•°","è®¡æ•°dp"],"title":"LOJ6077 é€†åºå¯¹ï¼ˆç”Ÿæˆå‡½æ•°ï¼Œè®¡æ•°dpï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ LOJ\né¢˜æ„ç®€è¿° ä½ æœ‰ä½“ç§¯ä¸º $i$ ($1\\le i\\le n$) çš„ç‰©å“ $i$ ä¸ªï¼ŒåŒä½“ç§¯ç‰©å“åœ¨è®¡æ•°æ—¶æ²¡æœ‰åŒºåˆ«ï¼Œæ±‚è£…æ»¡å¤§å°ä¸º $n$ çš„èƒŒåŒ…çš„æ–¹æ¡ˆæ•°ã€‚\n$1\\le n\\le 10^5$ã€‚\nç®€è¦ä½œæ³• ä½“ç§¯å¤§äºç­‰äº $\\sqrt n$ çš„ç‰©å“å¯ä»¥æ— é™é€‰ï¼Œæ‰€ä»¥è€ƒè™‘åˆ†å¼€å¤„ç†å°äºæ ¹å·çš„å’Œå¤§äºç­‰äºæ ¹å·çš„ã€‚\nå°äºæ ¹å·çš„ ä»¤ $f_{i, j}$ è¡¨ç¤ºä»å‰ $i$ ç§ç‰©å“ä¸­é€‰ä½“ç§¯ä¸º $j$ çš„æ–¹æ¡ˆæ•°ã€‚ $$ f_{i, j} = \\sum\\limits_{k = 0}^{\\min(i, \\left\\lfloor\\frac j i\\right\\rfloor)}f_{i-1, j - ik} $$ å¯ä»¥ä½¿ç”¨æ¨¡ $i$ åŒä½™çš„å‰ç¼€å’Œä¼˜åŒ–ã€‚\nè¿™éƒ¨åˆ†çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n\\sqrt n)$ï¼Œç©ºé—´å¤æ‚åº¦å¯ä»¥ä¼˜åŒ–è‡³ $O(n)$ã€‚\nå¤§äºç­‰äºæ ¹å·çš„ ä»¤ $g_{i, j}$ è¡¨ç¤ºé€‰æ‹© $i$ ä¸ªç‰©å“ä½“ç§¯ä¸º $j$ çš„æ–¹æ¡ˆæ•°ã€‚\nè½¬ç§»æœ‰ä¸¤ç§æ–¹å¼ï¼š\n å‘èƒŒåŒ…ä¸­æ”¾å…¥ä¸€ä¸ªä½“ç§¯ä¸º $\\left\\lceil\\sqrt n\\right\\rceil$ çš„ç‰©å“ã€‚ å°†èƒŒåŒ…ä¸­æ‰€æœ‰ç‰©å“ä½“ç§¯åŠ ä¸€ã€‚  $$ g_{i, j} = g_{i - 1, j - \\left\\lceil\\sqrt n\\right\\rceil} + g_{i, j - i} $$\nç”±äºæœ€å¤šé€‰ $\\left\\lfloor\\sqrt n\\right\\rfloor$ ä¸ªç‰©å“ï¼Œç¬¬ä¸€ç»´å¤§å°ä¸º $O(\\sqrt n)$ï¼Œè¿™éƒ¨åˆ†å¤æ‚åº¦ä¹Ÿæ˜¯ $O(n\\sqrt n)$ã€‚\nåˆå¹¶ ç›¸å½“äºæ±‚å·ç§¯çš„ä¸€ä½ã€‚\nä¸¤éƒ¨åˆ†åŠ èµ·æ¥ä½“ç§¯ä¸º $n$ å°±è®¡å…¥ç­”æ¡ˆã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç¬¬äºŒéƒ¨åˆ†ä¸­ä½“ç§¯ä¸º $k$ çš„æ–¹æ¡ˆæ•°æ˜¯ $\\sum\\limits_{i=0}^{\\left\\lfloor\\sqrt n\\right\\rfloor}g_{i, k}$ï¼Œè€Œä¸æ˜¯æŸä¸ªå•ç‹¬çš„ dp å€¼ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;cmath\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cstring\u0026gt; const int mod = 23333333; const int N = 100010; int n, b, f[N], pre[N], g[2][N], cur, ans; int main() { scanf(\u0026quot;%d\u0026quot;, \u0026amp;n); b = int(sqrt(n) + 1); f[0] = 1; for (int i = 1; i \u0026lt; b; ++i) { for (int j = 0; j \u0026lt;= n; ++j) pre[j] = (f[j] + (j \u0026gt;= i ? pre[j - i] : 0)) % mod; for (int j = 0; j \u0026lt;= n; ++j) { if (j \u0026lt; i * (i + 1)) f[j] = pre[j]; else f[j] = (pre[j] - pre[j - i * (i + 1)] + mod) % mod; } } ans = f[n]; g[cur][0] = 1; for (int i = 1; i \u0026lt; b; ++i) { memset(g[cur ^= 1], 0, sizeof(int) * (i * b)); for (int j = i * b; j \u0026lt;= n; ++j) { g[cur][j] = (g[cur ^ 1][j - b] + g[cur][j - i]) % mod; ans = (ans + 1ll * f[n - j] * g[cur][j]) % mod; } } printf(\u0026quot;%d\u0026quot;, ans); return 0; } ","date":"2019-09-04T09:21:35+08:00","permalink":"https://ouuan.github.io/post/loj6089-%E5%B0%8Fy%E7%9A%84%E8%83%8C%E5%8C%85%E8%AE%A1%E6%95%B0%E9%97%AE%E9%A2%98%E6%A0%B9%E5%8F%B7%E5%88%86%E6%B2%BB%E8%AE%A1%E6%95%B0dp/","tags":["è®¡æ•°dp","æ ¹å·åˆ†æ²»"],"title":"LOJ6089 å°Yçš„èƒŒåŒ…è®¡æ•°é—®é¢˜ï¼ˆæ ¹å·åˆ†æ²»ï¼Œè®¡æ•°dpï¼‰"},{"categories":["çŸ¥è¯†ç‚¹"],"contents":"LindstrÃ¶mâ€“Gesselâ€“Viennot lemmaï¼Œå³ LGV å¼•ç†ï¼Œå¯ä»¥ç”¨æ¥å¤„ç†æœ‰å‘æ— ç¯å›¾ä¸Šä¸ç›¸äº¤è·¯å¾„è®¡æ•°ç­‰é—®é¢˜ã€‚\nå‰ç½®çŸ¥è¯†ï¼š å›¾è®ºç®€ä»‹ ã€ å›¾è®ºåŸºç¡€ ã€ çŸ©é˜µ ã€ é«˜æ–¯æ¶ˆå…ƒæ±‚è¡Œåˆ—å¼ ã€‚\nLGV å¼•ç†ä»…é€‚ç”¨äº æœ‰å‘æ— ç¯å›¾ ã€‚\nå®šä¹‰ $\\omega(P)$ è¡¨ç¤º $P$ è¿™æ¡è·¯å¾„ä¸Šæ‰€æœ‰è¾¹çš„è¾¹æƒä¹‹ç§¯ã€‚ï¼ˆè·¯å¾„è®¡æ•°æ—¶ï¼Œå¯ä»¥å°†è¾¹æƒéƒ½è®¾ä¸º $1$ ï¼‰ï¼ˆäº‹å®ä¸Šï¼Œè¾¹æƒå¯ä»¥ä¸ºç”Ÿæˆå‡½æ•°ï¼‰\n$e(u, v)$ è¡¨ç¤º $u$ åˆ° $v$ çš„ æ¯ä¸€æ¡ è·¯å¾„ $P$ çš„ $\\omega(P)$ ä¹‹å’Œï¼Œå³ $e(u, v)=\\sum\\limits_{P:u\\rightarrow v}\\omega(P)$ ã€‚\nèµ·ç‚¹é›†åˆ $A$ ï¼Œæ˜¯æœ‰å‘æ— ç¯å›¾ç‚¹é›†çš„ä¸€ä¸ªå­é›†ï¼Œå¤§å°ä¸º $n$ ã€‚\nç»ˆç‚¹é›†åˆ $B$ ï¼Œä¹Ÿæ˜¯æœ‰å‘æ— ç¯å›¾ç‚¹é›†çš„ä¸€ä¸ªå­é›†ï¼Œå¤§å°ä¹Ÿä¸º $n$ ã€‚\nä¸€ç»„ $A\\rightarrow B$ çš„ä¸ç›¸äº¤è·¯å¾„ $S$ ï¼š $S_i$ æ˜¯ä¸€æ¡ä» $A_i$ åˆ° $B_{\\sigma(S)_i}$ çš„è·¯å¾„ï¼ˆ $\\sigma(S)$ æ˜¯ä¸€ä¸ªæ’åˆ—ï¼‰ï¼Œå¯¹äºä»»ä½• $i\\ne j$ ï¼Œ $S_i$ å’Œ $S_j$ æ²¡æœ‰å…¬å…±é¡¶ç‚¹ã€‚\n$N(\\sigma)$ è¡¨ç¤ºæ’åˆ— $\\sigma$ çš„é€†åºå¯¹ä¸ªæ•°ã€‚\nå¼•ç† $$ M = \\begin{bmatrix}e(A_1,B_1)\u0026amp;e(A_1,B_2)\u0026amp;\\cdots\u0026amp;e(A_1,B_n)\\\\\ne(A_2,B_1)\u0026amp;e(A_2,B_2)\u0026amp;\\cdots\u0026amp;e(A_2,B_n)\\\\\n\\vdots\u0026amp;\\vdots\u0026amp;\\ddots\u0026amp;\\vdots\\\\\ne(A_n,B_1)\u0026amp;e(A_n,B_2)\u0026amp;\\cdots\u0026amp;e(A_n,B_n)\\end{bmatrix} $$\n$$ \\det(M)=\\sum\\limits_{S:A\\rightarrow B}(-1)^{N(\\sigma(S))}\\prod\\limits_{i=1}^n \\omega(S_i) $$\nå…¶ä¸­ $\\sum\\limits_{S:A\\rightarrow B}$ è¡¨ç¤ºæ»¡è¶³ä¸Šæ–‡è¦æ±‚çš„ $A\\rightarrow B$ çš„æ¯ä¸€ç»„ä¸ç›¸äº¤è·¯å¾„ $S$ ï¼Œ$\\det$ è¡¨ç¤ºè¡Œåˆ—å¼ã€‚\nè¯æ˜è¯·å‚è€ƒ ç»´åŸºç™¾ç§‘ ã€‚\nä¾‹é¢˜ hdu5852 Intersection is not allowed!\né¢˜æ„ï¼šæœ‰ä¸€ä¸ª $n\\times n$ çš„æ£‹ç›˜ï¼Œä¸€ä¸ªæ£‹å­ä» $(x, y)$ åªèƒ½èµ°åˆ° $(x, y+1)$ æˆ– $(x + 1, y)$ ï¼Œæœ‰ $k$ ä¸ªæ£‹å­ï¼Œä¸€å¼€å§‹ç¬¬ $i$ ä¸ªæ£‹å­æ”¾åœ¨ $(1, a_i)$ ï¼Œæœ€ç»ˆè¦åˆ° $(n, b_i)$ ï¼Œè·¯å¾„è¦ä¸¤ä¸¤ä¸ç›¸äº¤ï¼Œæ±‚æ–¹æ¡ˆæ•°å¯¹ $10^9+7$ å–æ¨¡ã€‚ $1\\le n\\le 10^5$ , $1\\le k\\le 100$ ï¼Œä¿è¯ $1\\le a_1\u0026lt;a_2\u0026lt;\\dots\u0026lt;a_n\\le n$ , $1\\le b_1\u0026lt;b_2\u0026lt;\\dots\u0026lt;b_n\\le n$ ã€‚\nè§‚å¯Ÿåˆ°å¦‚æœè·¯å¾„ä¸ç›¸äº¤å°±ä¸€å®šæ˜¯ $a_i$ åˆ° $b_i$ ï¼Œå› æ­¤ LGV å¼•ç†ä¸­ä¸€å®šæœ‰ $\\sigma(S)_i=i$ ï¼Œä¸éœ€è¦è€ƒè™‘ç¬¦å·é—®é¢˜ã€‚è¾¹æƒè®¾ä¸º $1$ ï¼Œç›´æ¥å¥—ç”¨å¼•ç†å³å¯ã€‚\nä» $(1, a_i)$ åˆ° $(n, b_j)$ çš„è·¯å¾„æ¡æ•°ç›¸å½“äºä» $n-1+b_j-a_i$ æ­¥ä¸­é€‰ $n-1$ æ­¥å‘ä¸‹èµ°ï¼Œæ‰€ä»¥ $e(A_i, B_j)=\\binom{n-1+b_j-a_i}{n-1}$ ã€‚\nè¡Œåˆ—å¼å¯ä»¥ä½¿ç”¨é«˜æ–¯æ¶ˆå…ƒæ±‚ã€‚\nå¤æ‚åº¦ä¸º $O(n+k^2(k + \\log p))$ ï¼Œå…¶ä¸­ $\\log p$ æ˜¯æ±‚é€†å…ƒå¤æ‚åº¦ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;algorithm\u0026gt; #include \u0026lt;cstdio\u0026gt; typedef long long ll; const int K = 105; const int N = 100005; const int mod = 1e9 + 7; int T, n, k, a[K], b[K], fact[N \u0026lt;\u0026lt; 1], m[K][K]; int qpow(int x, int y) { int out = 1; while (y) { if (y \u0026amp; 1) out = (ll)out * x % mod; x = (ll)x * x % mod; y \u0026gt;\u0026gt;= 1; } return out; } int c(int x, int y) { return (ll)fact[x] * qpow(fact[y], mod - 2) % mod * qpow(fact[x - y], mod - 2) % mod; } int main() { fact[0] = 1; for (int i = 1; i \u0026lt; N * 2; ++i) fact[i] = (ll)fact[i - 1] * i % mod; scanf(\u0026quot;%d\u0026quot;, \u0026amp;T); while (T--) { scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;n, \u0026amp;k); for (int i = 1; i \u0026lt;= k; ++i) scanf(\u0026quot;%d\u0026quot;, a + i); for (int i = 1; i \u0026lt;= k; ++i) scanf(\u0026quot;%d\u0026quot;, b + i); for (int i = 1; i \u0026lt;= k; ++i) { for (int j = 1; j \u0026lt;= k; ++j) { if (a[i] \u0026lt;= b[j]) m[i][j] = c(b[j] - a[i] + n - 1, n - 1); else m[i][j] = 0; } } for (int i = 1; i \u0026lt; k; ++i) { if (!m[i][i]) { for (int j = i + 1; j \u0026lt;= k; ++j) { if (m[j][i]) { std::swap(m[i], m[j]); break; } } } if (!m[i][i]) continue; for (int j = i + 1; j \u0026lt;= k; ++j) { if (!m[j][i]) continue; int mul = (ll)m[j][i] * qpow(m[i][i], mod - 2) % mod; for (int p = i; p \u0026lt;= k; ++p) { m[j][p] = (m[j][p] - (ll)m[i][p] * mul % mod + mod) % mod; } } } int ans = 1; for (int i = 1; i \u0026lt;= k; ++i) ans = (ll)ans * m[i][i] % mod; printf(\u0026quot;%d\\n\u0026quot;, ans); } return 0; }  ","date":"2019-09-03T21:54:43+08:00","permalink":"https://ouuan.github.io/post/lgv-%E5%BC%95%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","tags":["å›¾è®º","çº¿æ€§ä»£æ•°"],"title":"LGV å¼•ç†å­¦ä¹ ç¬”è®°"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ CF\næ´›è°·\né¢˜æ„ç®€è¿° ç»™å®š $n$ å’Œ $k$ï¼Œä½ éœ€è¦åœ¨åœ†ä¸Šç”» $k$ ä¸ªä¸è¶…è¿‡ $n$ æ¡è¾¹çš„æ­£å¤šè¾¹å½¢ï¼Œæ±‚é¡¶ç‚¹å»é‡åè‡³å°‘æœ‰å¤šå°‘ä¸ªã€‚\n$3\\le n\\le10^6$ï¼Œ$1\\le k\\le n-2$ã€‚\nç®€è¦åšæ³•   æ‰€æœ‰æ­£å¤šè¾¹å½¢è‡³å°‘æœ‰ä¸€ä¸ªå…¬å…±é¡¶ç‚¹ã€‚å¯ä»¥æ„Ÿæ€§ç†è§£ï¼Œä¹Ÿå¯ä»¥çœ‹ imp çš„è¯„è®ºã€‚\n  é€‰äº† $x$ è¾¹å½¢å°±é€‰äº† $x$ çš„æ‰€æœ‰çº¦æ•°ï¼ˆé™¤äº† $1$ å’Œ $2$ï¼‰è¾¹å½¢ä¸€å®šæœ€ä¼˜ï¼Œå› ä¸ºé€‰çº¦æ•°ç›¸å½“äºæ˜¯å…è´¹çš„ã€‚\n  é‚£ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ $x$ è¾¹å½¢çš„ç¬¬ $y$ ä¸ªé¡¶ç‚¹çœ‹æˆåˆ†æ•° $\\dfrac y x$ï¼Œè¿™æ ·çš„è¯ï¼Œåœ¨å·²ç»é€‰äº† $x$ çš„æ‰€æœ‰çº¦æ•°çš„å‰æä¸‹ï¼Œé€‰ $x$ è¾¹å½¢çš„ä»£ä»·å°±æ˜¯ $\\varphi(x)$ï¼Œé—®é¢˜å°±å˜æˆäº†æ±‚æœ€å°çš„ $k$ ä¸ª $\\varphi$ ä¹‹å’Œã€‚\nä½†æ˜¯ï¼Œä¸€è¾¹å½¢å’ŒäºŒè¾¹å½¢æ˜¯ä¸å­˜åœ¨çš„ï¼Œéœ€è¦ç‰¹æ®Šè€ƒè™‘ã€‚\nâ€œä¸€è¾¹å½¢â€å…¶å®å°±æ˜¯é‚£ä¸ªæ‰€æœ‰æ­£å¤šè¾¹å½¢çš„å…¬å…±é¡¶ç‚¹ï¼Œåªéœ€è¦åœ¨è®¡ç®—ç­”æ¡ˆæ—¶åŠ ä¸€å³å¯ã€‚\nâ€œäºŒè¾¹å½¢â€ä¼šä¸”ä»…ä¼šå½±å“å¶æ•°è¾¹å½¢ï¼Œç›¸å½“äºâ€œä¸€æ—¦é€‰äº†æŸä¸ªå¶æ•°è¾¹å½¢ï¼Œç­”æ¡ˆåŠ ä¸€â€ã€‚å› ä¸º $\\varphi(x)=1$ çš„ $x$ åªæœ‰ $1$ å’Œ $2$ï¼Œ è€Œ $\\varphi(x)=2$ çš„ $x$ åªæœ‰ $3$, $4$, $6$ï¼Œæ‰€ä»¥åªæœ‰ä»…é€‰æ‹©æ­£ä¸‰è§’å½¢è¿™ç§æƒ…å†µä¼šå—åˆ°å½±å“ã€‚ç‰¹åˆ¤ $k=1$ è¾“å‡º $3$ å³å¯ã€‚\nç”¨çº¿æ€§ç­› + nth_elementï¼ˆå€¼åŸŸä¸å¤§ï¼Œå…¶å®ä¹Ÿå¯ä»¥çº¿æ€§æ’åºï¼‰å³å¯åšåˆ° $O(n)$ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N = 1000010; int n, k, p[N], tot, phi[N]; bool np[N]; int main() { cin \u0026gt;\u0026gt; n \u0026gt;\u0026gt; k; if (k == 1) { puts(\u0026quot;3\u0026quot;); return 0; } phi[1] = 1; for (int i = 2; i \u0026lt;= n; ++i) { if (!np[i]) { p[++tot] = i; phi[i] = i - 1; } for (int j = 1; j \u0026lt;= tot \u0026amp;\u0026amp; i * p[j] \u0026lt;= n; ++j) { int x = i * p[j]; np[x] = true; if (i % p[j]) phi[x] = phi[i] * (p[j] - 1); else { phi[x] = phi[i] * p[j]; break; } } } nth_element(phi + 1, phi + k + 3, phi + n + 1); // é€‰äº†æœ€å°çš„ k+2 ä¸ªï¼Œå…¶ä¸­å‰ä¸¤ä¸ªæ˜¯â€œä¸€è¾¹å½¢â€å’Œâ€œäºŒè¾¹å½¢â€çš„ä»£ä»· long long ans = 0; for (int i = 1; i \u0026lt;= k + 2; ++i) ans += phi[i]; cout \u0026lt;\u0026lt; ans; return 0; } ","date":"2019-08-27T20:08:56+08:00","permalink":"https://ouuan.github.io/post/cf1208g-polygons%E6%95%B0%E8%AE%BA/","tags":["æ•°è®º"],"title":"CF1208G Polygonsï¼ˆæ•°è®ºï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\nAtCoder\né¢˜æ„ç®€è¿° ç»™ä½ åˆå§‹ä¸² $S_0$ å’Œç›®æ ‡ä¸² $T$ï¼Œæ¯ä¸€æ­¥æ“ä½œå¯ä»¥å°†å½“å‰ä¸² $S_i$ å˜æˆ $S_{i+1}$ï¼Œå…¶ä¸­ï¼š\n$$S_{i+1}[j]=\\begin{cases}S_i[1]\u0026amp;j=1\\\\S_i[j]\\text{ æˆ– }S_{i+1}[j-1]\u0026amp;j\u0026gt;1\\end{cases}$$\næ±‚æœ€å°‘éœ€è¦å‡ æ¬¡æ“ä½œå¯ä»¥å°†å½“å‰ä¸²å˜ä¸º $T$ã€‚\nä¸²é•¿ $10^6â€‹$ã€‚\nè¿™é¢˜é¢˜è§£çœŸçš„éš¾å†™..ä¹‹å‰è§‰å¾—åˆ«äººçš„é¢˜è§£å†™çš„ä¸æ¸…æ¥šï¼Œç„¶è€Œè‡ªå·±ä¹Ÿå†™çš„ä¸æ˜¯å¾ˆæ¸…æ¥š\u0026hellip;\nç®€è¦åšæ³• é¦–å…ˆï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç”¨æŠ˜çº¿è¡¨ç¤ºï¼š\nï¼ˆå¦‚æœæ‚¨åœ¨è‰²è§‰æ–¹é¢å­˜åœ¨éšœç¢ï¼Œè¿˜è¯·è§è°…ã€‚ï¼‰\nå¯ä»¥å‘ç°ï¼Œæ¯æ¡æŠ˜çº¿éƒ½å°½é‡é å³æ˜¯æœ€ä¼˜çš„ï¼Œä¸€æ—¦ç”»ä¸ä¸‹äº†ï¼Œå°±åŠ ä¸€è¡Œã€‚\nç°åœ¨é—®é¢˜å˜æˆäº†å¦‚ä½•é«˜æ•ˆåœ°ç»´æŠ¤è¿™ä¸€è´ªå¿ƒã€‚\nå½“ $S_0=T$ æ—¶ï¼Œå…ˆç‰¹åˆ¤æ‰ï¼Œè¾“å‡º $0â€‹$ã€‚\nç”±äºæ¯æ¬¡æ‹ç‚¹éƒ½ä¼šå¾€å·¦ä¸‹ç§»åŠ¨ä¸€æ ¼ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨é˜Ÿåˆ—æ¥ç»´æŠ¤å½“å‰æŠ˜çº¿çš„æ¯ä¸ªæ‹ç‚¹ï¼ˆæŠ˜çº¿å¾€å³æ‹çš„ç‚¹ï¼Œä¹Ÿå°±æ˜¯ $S_i[j]=S_i[j-1]$ çš„ $j-1$ è¿™ä¸ªç‚¹ï¼‰ï¼ˆä¸åŒ…æ‹¬æœ€åä¸€è¡Œçš„æ‹ç‚¹ï¼‰ï¼Œå…¶ä¸­é è¿‘é˜Ÿé¦–è¡¨ç¤ºé ä¸‹ï¼ˆç¦» $T$ è¾ƒè¿‘ï¼‰çš„æ‹ç‚¹ï¼Œé è¿‘é˜Ÿå°¾è¡¨ç¤ºé ä¸Šï¼ˆé è¿‘ $S_0$ï¼‰çš„æ‹ç‚¹ã€‚\nè¯¦è§ä»£ç ï¼ˆå› ä¸ºè¿™é¢˜æ–‡å­—å†™å‡ºæ¥ä¸å¦‚ä»£ç å¥½ç†è§£ï¼‰ï¼š\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;string\u0026gt; #include \u0026lt;queue\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; int n, ans; string s, t; queue\u0026lt;int\u0026gt; q; int main() { cin \u0026gt;\u0026gt; n \u0026gt;\u0026gt; s \u0026gt;\u0026gt; t; if (s == t) // ç‰¹åˆ¤ä¸¤ä¸²ç›¸ç­‰ { puts(\u0026quot;0\u0026quot;); return 0; } int up = n - 1, down = n - 1; while (down \u0026gt;= 0) { while (down \u0026amp;\u0026amp; t[down - 1] == t[down]) --down; // æ‰¾åˆ°å½“å‰æŠ˜çº¿åœ¨æœ€åä¸€è¡Œæœ€å·¦çš„ä½ç½® while (up \u0026gt;= 0 \u0026amp;\u0026amp; (up \u0026gt; down || s[up] != t[down])) --up; // æ‰¾åˆ°å½“å‰æŠ˜çº¿åœ¨ç¬¬ä¸€è¡Œæœ€å·¦çš„ä½ç½® if (up \u0026lt; 0) // å¦‚æœç¬¬ä¸€è¡Œæ²¡æœ‰å¯¹åº”çš„å­—ç¬¦ï¼Œè¾“å‡ºæ— è§£ { puts(\u0026quot;-1\u0026quot;); return 0; } while (!q.empty() \u0026amp;\u0026amp; q.front() - q.size() \u0026gt;= down) q.pop(); // æŠŠå½“å‰æŠ˜çº¿ä¸ä¼šç¢°åˆ°çš„éƒ¨åˆ†å¼¹å‡º if (up != down) q.push(up); // å¦‚æœå½“å‰æŠ˜çº¿çœŸçš„æ˜¯â€œæŠ˜çº¿â€è€Œä¸æ˜¯ç«–ç›´ä¸‹æ¥ä¸æ‹å¼¯ï¼Œå°±æŠŠ S1 çš„æ‹ç‚¹å‹å…¥é˜Ÿåˆ— ans = max(ans, (int)q.size() + 1); // åæ–‡ä¼šè§£é‡Šä¸ºä»€ä¹ˆè¿™æ ·æ›´æ–°ç­”æ¡ˆ --down; } cout \u0026lt;\u0026lt; ans; return 0; }  è¡¥å……è¯´æ˜ è¿™ä¸ªç»´æŠ¤æ‹ç‚¹çš„æ–¹å¼åº”è¯¥ç”»ç”»å›¾å°±èƒ½æ˜ç™½ã€‚\næœ€åå‰©ä¸‹ä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆæ˜¯è¿™æ ·æ›´æ–°ç­”æ¡ˆï¼Ÿ\næ¢å¥è¯è¯´ï¼šä¸ºä»€ä¹ˆç­”æ¡ˆæ˜¯æ‹ç‚¹ä¸ªæ•°çš„å†å²æœ€å¤§å€¼ï¼Ÿï¼ˆåŠ ä¸€æ˜¯å› ä¸ºæ²¡æœ‰ç»´æŠ¤æœ€åä¸€è¡Œçš„æ‹ç‚¹ï¼‰\nå¦‚æœæ²¡æœ‰è¿™ä¸ª pop æ“ä½œï¼Œåº”è¯¥æ˜¯å¾ˆæ˜¾ç„¶çš„ã€‚ä½† pop æ“ä½œç ´åäº†â€œé˜Ÿåˆ—ä¸­æ¯ä¸ªå…ƒç´ å¯¹åº”é™¤æœ€åä¸€è¡Œå¤–æ¯ä¸€è¡Œæœ€å·¦ä½ç½®â€è¿™ä¸ªæ€§è´¨ã€‚\nè¿™é‡Œéœ€è¦ä¸€ä¸ªå¼•ç†ï¼š\n é™¤äº†æœ€åä¸€è¡Œçš„æ‹ç‚¹ï¼Œå…¶å®ƒæ‹ç‚¹ä¸€å®šä½äºè¿ç»­çš„å‰å‡ è¡Œã€‚\n æˆ‘ä»¬å¯ä»¥å½’çº³åœ°è¯æ˜ï¼š\n å¯¹äºæœ€å³çš„é‚£æ¡æŠ˜çº¿ï¼Œæ˜¾ç„¶æˆç«‹ã€‚ å¯¹äºä¹‹åçš„æ¯æ¡æŠ˜çº¿ï¼Œä¸€å®šæ˜¯å…ˆè´´ç€ä¸Šä¸€æ¡æŠ˜çº¿ï¼Œå†ç›´æ¥å¾€ä¸‹åˆ°æœ€åä¸€è¡Œã€‚ç”±äºä¸Šä¸€æ¡æŠ˜çº¿æ»¡è¶³å¼•ç†ï¼Œå¦‚æœä¸­é€”æœ‰ä¸€æ®µæ²¡æœ‰æ‹ç‚¹è€Œååˆå‡ºç°æ‹ç‚¹ï¼Œä¸­é€”çš„é‚£ä¸€æ®µå°±æ²¡æœ‰ç´§è´´ä¸Šä¸€æ¡æŠ˜çº¿ã€‚  æœ‰äº†è¿™ä¸ªå¼•ç†ï¼Œå°±å¯ä»¥æ„Ÿæ€§ç†è§£è¯´æ˜ä¸ºä»€ä¹ˆæœ‰ pop æ“ä½œçš„æƒ…å†µä¸‹ç­”æ¡ˆä¾ç„¶æ˜¯æ‹ç‚¹ä¸ªæ•°çš„å†å²æœ€å¤§å€¼äº†ã€‚\n","date":"2019-08-16T23:34:10+08:00","permalink":"https://ouuan.github.io/post/agc007f-shik-and-copying-string%E8%B4%AA%E5%BF%83%E5%AE%9E%E7%8E%B0/","tags":["è´ªå¿ƒ","å®ç°"],"title":"AGC007F Shik and Copying Stringï¼ˆè´ªå¿ƒï¼Œå®ç°ï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€æ£µå¸¦è¾¹æƒçš„æ ‘ï¼Œæ±‚æ‰€æœ‰é•¿åº¦åœ¨ $[L,U]$ è¿™ä¸ªèŒƒå›´å†…çš„è·¯å¾„é‡Œå¹³å‡æƒå€¼ï¼ˆæ€»æƒå€¼é™¤ä»¥è¾¹æ•°ï¼‰çš„æœ€å¤§å€¼ã€‚\n$2\\le n\\le 10^5$ï¼Œä¿è¯è‡³å°‘æœ‰ä¸€æ¡æ»¡è¶³è¦æ±‚çš„è·¯å¾„ã€‚\nç®€è¦åšæ³• #define çˆ¶äº² å•äº²ï¼ˆå¦‚æœæœ‰è°´è´£â€œçˆ¶äº²èŠ‚ç‚¹â€äººå£«çš„è¯ï¼‰\né¦–å…ˆå¯ä»¥äºŒåˆ†ç­”æ¡ˆï¼Œå°±å¯ä»¥æŠŠæ¯æ¡è¾¹çš„è¾¹æƒéƒ½å‡å»äºŒåˆ†çš„ç­”æ¡ˆï¼Œç„¶åè½¬åŒ–ä¸ºåˆ¤æ–­æœ‰æ²¡æœ‰æƒå€¼å’Œä¸ºæ­£çš„ç¬¦åˆé•¿åº¦è¦æ±‚çš„è·¯å¾„ã€‚\nç„¶åæœ‰ç‚¹åˆ†æ²»å’Œé•¿é“¾å‰–åˆ†ä¸¤ç§åšæ³•ï¼Œæœ¬é¢˜è§£ä»‹ç»é•¿é“¾å‰–åˆ†çš„åšæ³•ã€‚\nç”±äºåˆå¹¶æ—¶è¦åŒºé—´æŸ¥è¯¢æœ€å¤§å€¼ï¼Œå¯ä»¥ç”¨çº¿æ®µæ ‘æ¥ç»´æŠ¤ã€‚\nå…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥åƒé‡é“¾å‰–åˆ†ä¸€æ ·è®¡ç®— dfs åºæ—¶ä¼˜å…ˆ dfs é‡ï¼ˆé•¿ï¼‰å„¿å­ï¼Œè¿™æ ·çš„è¯é•¿é“¾çš„ dfs åºå°±æ˜¯è¿ç»­çš„ä¸€æ®µã€‚å½“æˆ‘ä»¬å¤„ç†åˆ°å­æ ‘ $u$ æ—¶ï¼Œ$dfn_u+k$ è¿™ä¸ªä½ç½®ä¸Šçš„å€¼è¡¨ç¤ºè‡ª $u$ èµ·å‘ä¸‹é•¿åº¦ä¸º $k$ çš„è·¯å¾„çš„æœ€å¤§æƒå€¼ã€‚å¯ä»¥å‘ç°ä¸åŒé•¿é“¾ä¹‹é—´ä¸ä¼šäº’ç›¸å½±å“ï¼Œè€Œé‡å„¿å­çš„ä¿¡æ¯åªè¦ä¸€ä¸ªåŒºé—´åŠ å°±å¯ä»¥ç»§æ‰¿ç»™çˆ¶äº²ã€‚æ‰€ä»¥ï¼Œæ¯æ¬¡å…ˆ dfs é‡å„¿å­æŠŠä¿¡æ¯ç»§æ‰¿ä¸Šæ¥ï¼Œå¹¶æ£€æŸ¥æœ‰æ²¡æœ‰æƒå€¼å’Œä¸ºæ­£çš„ç¬¦åˆé•¿åº¦è¦æ±‚çš„è·¯å¾„ï¼Œç„¶å dfs è½»å„¿å­å¹¶æšä¸¾æ·±åº¦ï¼Œåœ¨çº¿æ®µæ ‘ä¸­æŸ¥è¯¢å¯¹åº”çš„ä¸€æ®µé•¿åº¦åˆæ³•çš„åŒºé—´çš„æœ€å¤§å€¼æ¥æ£€æŸ¥æœ‰æ²¡æœ‰æƒå€¼å’Œä¸ºæ­£çš„ç¬¦åˆé•¿åº¦è¦æ±‚çš„è·¯å¾„ï¼Œå¹¶å°†è½»å„¿å­ä¿¡æ¯ä¹Ÿåˆå¹¶ä¸Šæ¥ã€‚\nå‚è€ƒä»£ç  ä»£ç ç”¨äº† CF æ¨¡æ¿ï¼Œè¿˜è¯·è°…è§£..ï¼ˆåªä¸è¿‡è¿™ç§é¢˜å°±ç®—æŒ‰æ­£å¸¸ç é£å†™ä¼°è®¡ä¹Ÿå¾ˆéš¾çœ‹æ‡‚å§..ä¸å¦‚è‡ªå·±æ€è€ƒç»†èŠ‚å¦‚ä½•å®ç°ï¼‰\n#ifndef OUUAN #pragma GCC optimize(\u0026quot;Ofast,no-stack-protector,unroll-loops,fast-math\u0026quot;) #endif #include\u0026lt;bits/stdc++.h\u0026gt; #define int LoveLive //#define FAST_IOSTREAM 1 #define For(i,l,r)for(int i=(l),i##end=(r);i\u0026lt;=i##end;++i) #define FOR(i,r,l)for(int i=(r),i##end=(l);i\u0026gt;=i##end;--i) #define SON(i,u)for(int i=head[u];i;i=nxt[i]) #define ms(a,x)memset(a,x,sizeof(a)) #define fi first #define se second #define pq priority_queue #define pb emplace_back #define isinf(x)(x\u0026gt;=INF?-1:x) #define DEBUG(x)cerr\u0026lt;\u0026lt;(#x)\u0026lt;\u0026lt;\u0026quot;:\u0026quot;\u0026lt;\u0026lt;x\u0026lt;\u0026lt;endl using namespace std;typedef long long LoveLive;typedef pair\u0026lt;int,int\u0026gt;pii;typedef vector\u0026lt;int\u0026gt;vi; #ifdef int const int INF=0x3f3f3f3f3f3f3f3fll; #else const int INF=0x3f3f3f3f; #endif const double eps=1e-9;mt19937 rng(chrono::steady_clock::now().time_since_epoch().count());int randint (int l,int r){return(int)rng()%(r-l+1)+l;} #ifdef FAST_IOSTREAM #define br cout\u0026lt;\u0026lt;'\\n' #define sp cout\u0026lt;\u0026lt;' ' long long read(){long long x;cin\u0026gt;\u0026gt;x;return x;}template\u0026lt;typename T\u0026gt;void read(T\u0026amp;x){cin\u0026gt;\u0026gt;x;}template\u0026lt;typename T\u0026gt;void write(const T\u0026amp;x){cout\u0026lt;\u0026lt;x;} #else #define br putchar('\\n') #define sp putchar(' ') template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;!is_integral\u0026lt;T\u0026gt;::value,void\u0026gt;::type read(T\u0026amp;x){cin\u0026gt;\u0026gt;x;}long long read(){char c;long long out=0,f=1;for(c=getchar();!isdigit(c)\u0026amp;\u0026amp;c!='-';c=getchar());if(c=='-'){f=-1;c =getchar();}for(;isdigit(c);c=getchar())out=(out\u0026lt;\u0026lt;3)+(out\u0026lt;\u0026lt;1)+c-'0';return out*f;}template\u0026lt;typename T \u0026gt;typename enable_if\u0026lt;is_integral\u0026lt;T\u0026gt;::value,T\u0026gt;::type read(T\u0026amp;x){char c;T f=1;x=0;for(c=getchar();!isdigit (c)\u0026amp;\u0026amp;c!='-';c=getchar());if(c=='-'){f=-1;c=getchar();}for(;isdigit(c);c=getchar())x=(x\u0026lt;\u0026lt;3)+(x\u0026lt;\u0026lt;1)+c-'0'; return x*=f;}char read(char\u0026amp;x){for(x=getchar();isspace(x);x=getchar());return x;}double read(double \u0026amp;x){scanf(\u0026quot;%lf\u0026quot;,\u0026amp;x);return x;}void read(char*x){scanf(\u0026quot;%s\u0026quot;,x);}template\u0026lt;typename T\u0026gt;typename enable_if \u0026lt;!is_integral\u0026lt;T\u0026gt;::value,void\u0026gt;::type write(const T\u0026amp;x){cout\u0026lt;\u0026lt;x;}template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt; is_integral\u0026lt;T\u0026gt;::value,void\u0026gt;::type write(const T\u0026amp;x){if(x\u0026lt;0){putchar('-');write(-x);return;}if(x\u0026gt;9)write (x/10);putchar(x%10+'0');}void write(const char\u0026amp;x){putchar(x);}void write(const double\u0026amp;x){printf(\u0026quot;%.10lf\u0026quot; ,x);}void write(const char*x){printf(\u0026quot;%s\u0026quot;,x);} #endif template\u0026lt;typename T,typename...Args\u0026gt;void read(T\u0026amp;x,Args\u0026amp;...args){read(x);read(args...);}template\u0026lt;typename ...Args\u0026gt;void read(char*x,Args\u0026amp;...args){read(x);read(args...);}template\u0026lt;typename OutputIt,typename=typename enable_if\u0026lt;is_same\u0026lt;output_iterator_tag,typename iterator_traits\u0026lt;OutputIt\u0026gt;::iterator_category\u0026gt;::value ||( is_base_of\u0026lt;forward_iterator_tag,typename iterator_traits\u0026lt;OutputIt\u0026gt;::iterator_category\u0026gt;::value\u0026amp;\u0026amp;!is_const \u0026lt;OutputIt\u0026gt;::value)\u0026gt;::type\u0026gt;void read(OutputIt __first,OutputIt __last){for(;__first!=__last;++__first) read(*__first);}template\u0026lt;typename InputIt,typename=typename enable_if\u0026lt;is_base_of\u0026lt;input_iterator_tag,typename iterator_traits\u0026lt;InputIt\u0026gt;::iterator_category\u0026gt;::value\u0026gt;::type\u0026gt;void wts(InputIt __first,InputIt __last){ for(;__first!=__last;++__first){write(*__first);sp;}}template\u0026lt;typename InputIt,typename=typename enable_if \u0026lt;is_base_of\u0026lt;input_iterator_tag,typename iterator_traits\u0026lt;InputIt\u0026gt;::iterator_category\u0026gt;::value\u0026gt;::type\u0026gt;void wtb(InputIt __first,InputIt __last){for(;__first!=__last;++__first){write(*__first);br;}}void wts(const char*x){write(x);sp;}void wtb(const char*x){write(x);br;}void wte(const char*x){write(x);exit(0);}template \u0026lt;typename T\u0026gt;void wts(const T\u0026amp;x){write(x);sp;}template\u0026lt;typename T\u0026gt;void wtb(const T\u0026amp;x){write(x);br;}template \u0026lt;typename T\u0026gt;void wte(const T\u0026amp;x){write(x);exit(0);}template\u0026lt;typename...Args\u0026gt;void wts(const char*x,Args ...args){wts(x);wts(args...);}template\u0026lt;typename...Args\u0026gt;void wtb(const char*x,Args...args){wts(x);wtb( args...);}template\u0026lt;typename...Args\u0026gt;void wte(const char*x,Args...args){wts(x);wte(args...);}template\u0026lt;typename T,typename...Args\u0026gt;void wts(const T\u0026amp;x,Args...args){wts(x);wts(args...);}template\u0026lt;typename T,typename... Args\u0026gt;void wtb(const T\u0026amp;x,Args...args){wts(x);wtb(args...);}template\u0026lt;typename T,typename...Args\u0026gt;void wte (const T\u0026amp;x,Args...args){wts(x);wte(args...);}template\u0026lt;typename T\u0026gt;inline bool up(T\u0026amp;x,const T\u0026amp;y){return x\u0026lt;y?x=y,1:0;}template\u0026lt;typename T\u0026gt;inline bool dn(T\u0026amp;x,const T\u0026amp;y){return y\u0026lt;x?x=y,1:0;} const int N = 100010; struct SegmentTree { #define ls (cur \u0026lt;\u0026lt; 1) #define rs (cur \u0026lt;\u0026lt; 1 | 1) #define mid ((l + r) \u0026gt;\u0026gt; 1) double mx[N \u0026lt;\u0026lt; 2], tag[N \u0026lt;\u0026lt; 2]; void reset() { ms(mx, 0); ms(tag, 0); } void add(int x, double y) { mx[x] += y; tag[x] += y; } void pushdown(int cur) { if (fabs(tag[cur]) \u0026lt; eps) return; add(ls, tag[cur]); add(rs, tag[cur]); tag[cur] = 0; } void modify(int cur, int l, int r, int p, double x) { up(mx[cur], x); if (l == r - 1) return; pushdown(cur); if (p \u0026lt; mid) modify(ls, l, mid, p, x); else modify(rs, mid, r, p, x); } void madd(int cur, int l, int r, int L, int R, double x) { if (l \u0026gt;= R || r \u0026lt;= L) return; if (L \u0026lt;= l \u0026amp;\u0026amp; r \u0026lt;= R) add(cur, x); else { pushdown(cur); madd(ls, l, mid, L, R, x); madd(rs, mid, r, L, R, x); mx[cur] = max(mx[ls], mx[rs]); } } double query(int cur, int l, int r, int L, int R) { if (l \u0026gt;= R || r \u0026lt;= L) return -INF; if (L \u0026lt;= l \u0026amp;\u0026amp; r \u0026lt;= R) return mx[cur]; pushdown(cur); return max(query(ls, l, mid, L, R), query(rs, mid, r, L, R)); } double query(int cur, int l, int r, int p) { if (l == r - 1) return mx[cur]; pushdown(cur); if (p \u0026lt; mid) return query(ls, l, mid, p); return query(rs, mid, r, p); } #undef ls #undef rs #undef mid } t; int head[N], nxt[N \u0026lt;\u0026lt; 1], to[N \u0026lt;\u0026lt; 1], edge[N \u0026lt;\u0026lt; 1], cnt; void add(int u, int v, int w) { nxt[++cnt] = head[u]; head[u] = cnt; to[cnt] = v; edge[cnt] = w; } int n, mnlen, mxlen, dep[N], son[N], f[N], dfn[N], dfntot; void dfs1(int u, int fa) { dep[u] = 1; SON(i, u) { int v = to[i]; if (v == fa) continue; f[v] = edge[i]; dfs1(v, u); if(up(dep[u], dep[v] + 1)) son[u] = v; } } void dfs2(int u, int fa) { dfn[u] = ++dfntot; if (son[u]) dfs2(son[u], u); SON(i, u) { int v = to[i]; if (v != fa \u0026amp;\u0026amp; v != son[u]) dfs2(v, u); } } bool flag; void dfs(int u, int fa, double x) { if (flag || !son[u]) return; dfs(son[u], u, x); t.madd(1, 1, n + 1, dfn[son[u]], dfn[son[u]] + dep[son[u]], f[son[u]] - x); if (dep[u] - 1 \u0026gt;= mnlen \u0026amp;\u0026amp; t.query(1, 1, n + 1, dfn[u] + mnlen, min(dfn[u] + mxlen + 1, dfn[u] + dep[u])) \u0026gt; 0) { flag = true; return; } SON(i, u) { int v = to[i]; if (v != fa \u0026amp;\u0026amp; v != son[u]) { dfs(v, u, x); t.madd(1, 1, n + 1, dfn[v], dfn[v] + dep[v], f[v] - x); For (j, max(0ll, mnlen - dep[u]), min(mxlen - 1, dep[v] - 1)) { if (t.query(1, 1, n + 1, dfn[v] + j) + t.query(1, 1, n + 1, max(0ll, mnlen - j - 1) + dfn[u], min(dep[u], mxlen - j) + dfn[u]) \u0026gt; 0) { flag = true; return; } } For (j, 0, dep[v] - 1) t.modify(1, 1, n + 1, dfn[u] + j + 1, t.query(1, 1, n + 1, dfn[v] + j)); } } } bool check(double x) { flag = false; t.reset(); dfs(1, 0, x); return flag; } signed main() { #ifdef FAST_IOSTREAM cin.sync_with_stdio(false); cin.tie(0); #endif read(n, mnlen, mxlen); For (i, 2, n) { int u, v, w; read(u, v, w); add(u, v, w); add(v, u, w); } dfs1(1, 0); dfs2(1, 0); double l = 0, r = 1e6; For (i, 1, 40) { double mid = (l + r) / 2; if (check(mid)) l = mid; else r = mid; } printf(\u0026quot;%.3lf\u0026quot;, r); return 0; } ","date":"2019-07-23T20:24:05+08:00","permalink":"https://ouuan.github.io/post/bzoj1758-wc2010-%E9%87%8D%E5%BB%BA%E8%AE%A1%E5%88%92%E4%BA%8C%E5%88%86%E7%AD%94%E6%A1%88%E9%95%BF%E9%93%BE%E5%89%96%E5%88%86/","tags":["äºŒåˆ†ç­”æ¡ˆ","é•¿é“¾å‰–åˆ†"],"title":"BZOJ1758 [WC2010]é‡å»ºè®¡åˆ’ï¼ˆäºŒåˆ†ç­”æ¡ˆï¼Œé•¿é“¾å‰–åˆ†ï¼‰"},{"categories":["æ¸¸è®°"],"contents":" æˆ‘ä¹Ÿæ¥åˆ° NOI äº†ï¼Œå‘¢ã€‚\n éƒ‘é‡å£°æ˜\næœ¬åšå®¢å†…æ‰€æœ‰ä¸ NOI2019ï¼ˆç¬¬ 36 å±Šå…¨å›½é’å°‘å¹´ä¿¡æ¯å­¦å¥¥æ—åŒ¹å…‹ç«èµ›ï¼‰è¯•é¢˜ç›¸å…³ä¹‹å†…å®¹ï¼Œå‡åœ¨å¯¹åº”ä¹‹æœºè¯•ä¸å¤è¯„ç»“æŸä¹‹åå‘å¸ƒï¼Œè¯¦ç»†å‘å¸ƒæ—¶é—´ä¸å†…å®¹å¯ä»¥åœ¨ commits ä¸­æŸ¥çœ‹ã€‚\nDay 499122177 å¹¿äºŒå®¿èˆè¿˜æ˜¯æ²¡æœ‰ç½‘.\nåºŠè¾¹çš„æ’åº§ä¸æ˜¯ä¸€èˆ¬äººèƒ½æ’çš„..ï¼ˆOrz lbw æ’ä¸Šå»äº†ï¼‰ç„¶è€Œå› ä¸ºæœ‰æ—¶å€™è¦å»æœºæˆ¿ï¼ˆå…¶å®åŸºæœ¬ä¸Šä¹Ÿå°±åˆšåˆ°é‚£å¤©æ™šä¸Šæ²¡äº‹å»äº†..ï¼‰ï¼Œæ‰€ä»¥åæ¥è¿˜æ˜¯æ‹”ä¸‹æ¥äº†ã€‚ç„¶åå‘ç°ä¸å¸¦ 220V è½¬ USB æ¯å¤´çš„æ’å¤´çœŸæ˜¯ä¸ªé”™è¯¯çš„å†³å®š..è™½ç„¶å¯ä»¥ç”¨ç¬”è®°æœ¬å……ç”µï¼Œå¯å¦‚æœåœ¨å¯å®¤é—¨å£å……ç”µå°±æ²¡æ³•ç”¨ç”µè„‘ï¼Œæ‰€ä»¥æ²¡æ³•ä¸€ä¼šå„¿å……ç”µè„‘ç”¨æ‰‹æœºã€ä¸€ä¼šå„¿å……æ‰‹æœºç”¨ç”µè„‘ã€‚\næ™šé¤æœ‰ç‚¹æŠ½å¡çš„æ„Ÿè§‰..çœ‹åå­—å¾ˆéš¾çœ‹å‡ºæ‹¿åˆ°æ‰‹ä¸Šçš„åˆ°åº•æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼ˆ\nåƒå®Œæ™šé¥­å»è‡ªä¹ å®¤æ°´äº†åŠå°æ—¶ç¾¤ï¼Œç„¶åæ‰“çŸ­è£™ OJã€‚\nåˆ‡å®Œå‰ä¸¤é¢˜ï¼Œå¥½åƒ rk 5..\nç„¶åçœ‹ Cï¼Œé—®æ»¡è¶³ä¸€å †æ¡ä»¶çš„ä¸ªæ•°..ä¸€çœ¼å®¹æ–¥..ç„¶åçœŸçš„å†™äº† 1h çš„å®¹æ–¥ qaq\nå¥½ä¸å®¹æ˜“è¿‡æ‹äº†ï¼Œæäº¤ï¼Œåˆ WA äº†..\nåœ¨ç¾¤é‡Œä¸€é—®ï¼Œwocï¼Œp ä¸æ˜¯æ’åˆ—\u0026hellip;\n5 min åè¿‡äº†ï¼Œæ„‰å¿«åœ°å«åº•äº†..\nè¿‡äºè‡ªé—­ï¼Œçœ‹äº†çœ¼ Dï¼Œæ²¡ç§’æ‰ï¼Œå°±æ‡’å¾—å»æƒ³äº†ã€‚\nèµ›åå¬è¯´ C å¯ä»¥çŠ¶å‹ï¼Œä¸€æƒ³ï¼ŒçœŸçš„å¯ä»¥çŠ¶å‹\u0026hellip;..å­¦å‚»äº†.webp\nDay 557219762 å’•æ‰æ—©é¥­æŠŠç«è½¦ä¸Šå‰©çš„åƒäº†ã€‚\nï¼ˆå¼€å¹•å¼ç«Ÿç„¶æ²¡æœ‰ wh è®²è¯ï¼‰\nï¼ˆç¯å…‰æ‰“å¾—å¥½ï¼è¦†ç›–æ–¹ä½å¹¿ï¼ç»™ç¯å…‰å¸ˆç‚¹ä¸ªèµï¼ï¼‰\næœç„¶æœ‰å…¬å¼€å¤„åˆ‘å¤§å¤´ç…§å±•ç¤ºï¼Œåªä¸è¿‡é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œé—®é¢˜ä¸å¤§ã€‚\næ„Ÿè§‰å¤§å®¶å–Šçš„å£å·éƒ½å¬ä¸å¤ªæ¸…å•Š..\næ˜ ç¤º çˆ† é›¶ ï¼š\ndzd çš„è®²è¯ä¸­ï¼Œæœ‰è¿™ä¹ˆä¸€æ®µè¯ï¼š\n æ— è®ºä½•ç§æƒ…å†µï¼Œè¿™ä¸ªç«èµ›éƒ½ä¼šç»§ç»­ä¸‹å»ã€‚å› ä¸ºè¿™ä¸ªç«èµ›æ˜¯æ­£å½“çš„ï¼Œæ˜¯æ­£ä¹‰çš„ï¼Œåˆæ³•çš„ã€‚\n å¬åˆ°è¿™æ®µè¯ï¼Œåˆæƒ³èµ· ã²ãªãŸ åœ¨æ¡¥è¾¹å«æ³ªå–Šå‡ºçš„é‚£æ®µè¯äº†ï¼š\n ä½†æ˜¯ï¼Œæˆ‘æ²¡æœ‰åæ‚”ï¼Œä¸èƒ½åæ‚”ï¼Œå› ä¸ºï¼Œæˆ‘æ‰€åšçš„äº‹æƒ…ä¸€å®šæ²¡æœ‰é”™ï¼\n NOI å¯èƒ½çœŸçš„å¦‚ dzd æ‰€è¯´ï¼Œå¸¦æœ‰ä¸€äº›â€œå‡€åŒ–çµé­‚â€çš„æˆåˆ†åœ¨å§ã€‚\næœ€åé¸½å­è›‹ç ´ä¸å¼€ï¼Œæ˜ç¤ºæ‘†è„±ä¸äº†çˆ†é›¶çš„å‘½è¿ã€‚\nï¼ˆç¦»åœºåç›®å‡» dzd è¢«é‡‡è®¿ï¼‰\nä¸­é¤æ„Ÿè§‰æµ·æ˜Ÿ..è¿˜æ˜¯å¾—çœ‹çœ‹åˆ«äººä¹°åˆ°çš„æ˜¯ä»€ä¹ˆå†é€‰ã€‚ï¼ˆåƒä¸‡ä¸è¦ç”¨æ’é™¤æ³•æ¥é€‰\nä¸­åˆå†™äº†å†™åšå®¢ï¼Œåšäº†éç¬”è¯•ï¼Œç¡äº†ä¼šå„¿è§‰ã€‚\nè¿˜æ˜¯æ„Ÿè§‰å¥½æ–¹..æ¯•ç«Ÿè¢«é„™è§†ç”¨çš„é”™è¯¯é€‰é¡¹ä»æ¥æ²¡å˜è¿‡ï¼ˆ\nç»“æœç¬”è¯•æŒºæ°´çš„..é¢˜ç›®å’Œé¢˜åº“é‡Œå®Œå…¨ä¸€æ ·ï¼ˆæ²¡æœ‰ä¹‹å‰åœ¨ vfk åšå®¢é‡Œçœ‹è§çš„â€œé‚£é“é¢˜ä¸é€‰ foobar.shâ€ä¹‹ç±»çš„æƒ…å†µï¼‰ï¼Œå¾ˆå¤šé¢˜éƒ½ä¸æ˜¯å››ä¸ªé€‰é¡¹è€Œæ˜¯æ›´å°‘ï¼Œæ‰€ä»¥æ²¡æœ‰ä»»ä½•å¥‡æ€ªçš„é”™è¯¯é€‰é¡¹..\nDay 1 çœ‹åˆ° T1 å°±å¾ˆå¿«æƒ³å‡ºäº† 70 åˆ†çš„æ‹†ç‚¹åšæ³•ï¼Œå†™å®Œä¹‹åå‡ ä¹ä¸€éè¿‡äº†å¤§æ ·ä¾‹ã€‚\nç„¶åå»æŠŠ T2 å’Œ T3 çš„ 20 + 28 å†™äº†ï¼Œæ­¤æ—¶ $1.5hâ€‹$ å·¦å³ã€‚\nç„¶åå»å†™ T1 $A=0$ çš„éƒ¨åˆ†åˆ†ï¼Œå„ç§å†™æŒ‚å†™äº†æ¥è¿‘ $2h$..\nç„¶åæ„Ÿè§‰ T2 è¿˜æ˜¯æ²¡ä»€ä¹ˆæƒ³æ³•ï¼ŒT3 æƒ³äº†å‡ ä¸ªå‡è´ªå¿ƒï¼Œåˆæƒ³äº†å‡ ä¸ªå‡ç½‘ç»œæµï¼Œæœ€åè¿˜å‰©åŠå°æ—¶çš„æ—¶å€™æƒ³åˆ°äº†ä¸€ä¸ªè€ƒåæ‰å‰æ‰çš„ $n^3\\log$ çš„å‡è´ªå¿ƒï¼ˆè®²é¢˜æ—¶å‘ç°ç¨å¾®æ”¹åŠ¨ä¸€ä¸‹å°±æ˜¯æ­£ç¡®çš„ 40 åˆ†åšæ³•..ï¼‰ï¼Œå¹¸å¥½æ²¡å†™å®Œï¼Œä¸ç„¶ä¸‡ä¸€è¿‡äº†æ ·ä¾‹å°± GG äº†ã€‚\nå‡ºæ¥ä¹‹åå‘ç°å¤§å®¶éƒ½ $148â€‹$ èµ·æ­¥..T1 æœ‰æ­£è§£çš„ï¼Œä½†è¿˜æœ‰ä¸€å †åˆ©ç”¨æ•°æ®èŒƒå›´æ”¹å°çš„ï¼Œä»¥åŠä¸€å † $70â€‹$ åˆ†ç®—é”™å¤æ‚åº¦çš„ã€‚\nT1 æˆ‘å†™çš„æ•°æ®åˆ†æ²»æ˜¯ä¸å¯èƒ½ $85â€‹$ ä»¥ä¸Šçš„ï¼Œæ‰€ä»¥ç‰¹åˆ«æ€• $70â€‹$ åˆ†åšæ³•æœ€å $90â€‹$ æˆ–è€… $95â€‹$ã€‚\nç„¶åä¸‹åˆä¸€çœ‹ï¼Œæˆ‘è‡ªå·±å€’æ˜¯æ²¡æŒ‚åˆ†ï¼Œ$85+20+28=133â€‹$ï¼Œå¯å…¶å®ƒå’Œæˆ‘å†™ä¸€æ ·ä¸œè¥¿çš„éƒ½æ˜¯ $100+20+40â€‹$..\nT1 æ•°æ®èŒƒå›´ä¸çŸ¥é“æ˜¯ä¸æ˜¯ä¸ºäº†é˜²æ­¢çˆ† int è€Œæ”¹å°å°±ç®—äº†ï¼Œå¤æ‚åº¦å®Œå…¨é”™è¯¯çš„ $70â€‹$ åˆ†åšæ³•ç«Ÿç„¶ç›´æ¥ A äº†..å°±å¾ˆè‡ªé—­ã€‚T3 å…¶ä»–äººçš„ $n^4â€‹$ å¸¸æ•°æ¯”æˆ‘å°ä¸€æˆªï¼Œæˆ‘ä¹Ÿä¸å¥½è¯´ä»€ä¹ˆ..åªä¸è¿‡é‚£äº›â€œæ•°æ®æœ‰æ¢¯åº¦â€çš„å‡ºé¢˜äººå‡­ä»€ä¹ˆä¸å¤šç»™å‡ æ¡£éƒ¨åˆ†åˆ†å•Šï¼Ÿ\næ„Ÿè§‰è¿˜æ˜¯èµ›åˆ¶é—®é¢˜å•Š..æ²¡æœ‰ Subtask å¹¶ä¸”ç°åœºè¯„æµ‹çš„ OI èµ›åˆ¶å‡ºé¢˜äººä¹Ÿå¾ˆæ— å¥ˆå§..\næŠŠ NOI å˜‰å¹´åå’•äº†ï¼ˆç©ä¸€äº›ä½“è‚²è¿åŠ¨ä¹‹ç±»çš„æ¸¸æˆå¾—å¥–å“ä»€ä¹ˆçš„ï¼‰ï¼Œå›å¯å®¤èººäº†ä¸€ä¼šå„¿ï¼Œåˆçœ‹äº†ä¸€é å››è‰²çš„NOIï¼Œæ„Ÿè§‰è‡ªå·±çš„å¿ƒå¢ƒå’Œ vfk Cu é‚£å¹´æŒºåƒçš„..åªä¸è¿‡å°±ç®—æŠŠ vfk Fe é‚£å¹´å»æ‰ï¼Œæˆ‘ä¹Ÿæ¯” vfk å°‘ä¸€å¹´å•Š..\nè®²é¢˜çš„è¯..æ”¾ä¸€å¼  T2 è®²é¢˜çš„å›¾å§ï¼š\nDay 116195171 ä»Šå¤©æ˜¯ç¤¾ä¼šæ´»åŠ¨æ—¥ã€‚\nå¬è¯´çœŸçš„æœ‰äººæ²¡å»..ä¸çŸ¥é“ä¼šä¸ä¼šæ‰£åˆ†ã€‚\nå D7 çš„è¢«å¥¶äº†ï¼š\nåœ¨åšç‰©é¦†å…ˆæ‰“äº†æŠŠå››äººå—ï¼Œç„¶åå»éšä¾¿é€›äº†åŠä¸ªå°æ—¶ã€‚\næš—ç¤º route æ•°æ®æ°´ï¼š\næš—ç¤º Day 2 Au çº¿ 30 Ag çº¿ 20ï¼š\nå‡æ¯›ï¼Œè¯·å¤§å®¶è‡ªè¡Œè„‘è¡¥å‡æ¯›åœ¨é£ä¸­æ‰“è½¬çš„æ ·å­ã€‚\næ™šä¸Šæ˜¯ zzq å’Œè±¡çš„è§é¢ä¼šï¼Œæ„Ÿè§‰è¿˜æ˜¯è±¡æ¯”è¾ƒåŠ±å¿—ï¼Œå…¶å®ƒä¸‰åå›½å®¶é˜Ÿéƒ½æ˜¯å°å­¦å¼€å§‹å­¦çš„..åˆ·é¢˜é‡å¥½åƒéå¸¸ææ€–ï¼Œè€Œâ€œå¥½å¥½æ‰“æ¨¡æ‹Ÿèµ›â€å¯¹æˆ‘æ¥è¯´å‡ ä¹ä¸éœ€è¦è§£é‡Š..æˆ‘çŸ¥é“å¹³æ—¶æˆ‘æ˜¯æ€æ ·åœ¨æ‰“æ¨¡æ‹Ÿèµ›çš„ï¼Œâ€œè¿™ä¸ªçŸ¥è¯†ç‚¹è¿˜æ²¡å­¦â€ï¼Œâ€œè¿™é¢˜æ²¡æ„æ€â€ï¼Œâ€œé¢˜è§£çœ‹ä¸æ‡‚â€ï¼Œâ€œè¿™é¢˜å¤ªç®€å•äº†ï¼Œåªæ˜¯è€ƒåœº sb äº†è€Œå·²ï¼Œæ‡’å¾—å†™â€ï¼Œâ€œæˆ‘å…ˆæŒ‰æˆ‘çš„è®¡åˆ’è¡¥çŸ¥è¯†ç‚¹ï¼Œæ¨¡æ‹Ÿèµ›ä¸é‡è¦â€ï¼Œæœ€åä¸€é¢˜éƒ½æ²¡æœ‰æ”¹ã€‚è¿™æ ·çš„è¯æˆ‘åˆåœ¨æ¸´æ±‚ä»€ä¹ˆå‘¢ã€‚\n ä»¥ä¸ºè‡ªå·±å¾ˆåŠªåŠ›äº†ï¼Œä½†æ˜¯ä¸çŸ¥ä¸ºä½•è¿˜æ˜¯ç³»ç»Ÿå‘Šè¯‰æˆ‘ï¼šMission Failed. Play Again.\nä¸çŸ¥é“åŸå› ã€‚\nå¼ ç€å˜´å·´æˆ‘å¯ä»¥è¯´å‡ºä¸€å †ï¼šç»éªŒå°‘å•¦ï¼Œåœ¨å¼±çœå•¦ï¼Œé¢˜åšå¾—å°‘å•¦ï¼Œæ•°å­¦å¤ªå¼±å•¦â€¦â€¦\nä½†æ˜¯è¿™æ˜¯ä¸æ˜¯çœŸæ­£çš„åŸå› ï¼Ÿæ€æ ·è§£å†³ï¼Ÿ\nå¤©åœ°æ— è¨€ã€‚\nâ€”â€” vfkã€Šå››è‰²çš„NOIã€‹\n å¯æˆ‘ç”šè‡³ä¸èƒ½â€œä»¥ä¸ºè‡ªå·±å¾ˆåŠªåŠ›äº†â€ã€‚\nDay 2 ä»Šå¤©çš„çº¸è´¨é¢˜é¢è€ƒå‰æ˜¯æ­£é¢æœä¸Šçš„ã€‚\næœç„¶æœ‰äº¤äº’ï¼Œè¿˜ä¾ç„¶æ˜¯ I å›ã€‚\nç­‰ç­‰ï¼ŒT2 æ–—ä¸»åœ°ï¼Ÿ\nç­‰ç­‰ï¼ŒT1 128MBï¼Ÿç®€æ´æ•°æ®ç»“æ„.pdf\nå¼€å§‹è€ƒè¯•ï¼ŒT1ï¼Œçº¿æ®µæ ‘ä¼˜åŒ–è¿è¾¹ï¼Ÿçˆ†ç©ºé—´ã€‚88 å¯èƒ½èƒ½å¡è¿‡ï¼Ÿæ„Ÿè§‰å¾ˆéš¾å¡ï¼Œè¿˜å¾—æ•°æ®åˆ†æ²»ï¼Œå†™äº†ä¸åˆ° 5min å°±æ”¾å¼ƒäº†ï¼Œå»å†™äº† 72 åˆ†ã€‚\nT2ï¼Œdp ç®—æ´—ç‰Œå‰æ˜¯ $iâ€‹$ æ´—ç‰Œåæ˜¯ $jâ€‹$ çš„æ¦‚ç‡ï¼Œç¬¬å››ä¸ªç‚¹çŸ©é˜µå¿«é€Ÿå¹‚ï¼Œå¾ˆå¿«å°±å†™å®Œäº†ï¼Œä¸€éè¿‡æ ·ä¾‹ã€‚è¿™ä¸ªæ—¶å€™ä¸¤å°æ—¶å¤šä¸€ç‚¹ã€‚\nè€ƒå‰å°±æƒ³ç€é äº¤äº’ç¿»ç›˜äº†ï¼Œè¿˜å‰©æ¥è¿‘ 3h è‚äº¤äº’ï¼Œæ„Ÿè§‰æµ·æ˜Ÿã€‚\nè¿™ä¸ªæ•°æ®èŒƒå›´å¥½åƒä¸å¤ªç»Ÿä¸€å•Š..æ—¢ç„¶å¼ºåˆ¶æ•°æ®åˆ†æ²»çš„è¯ä¸å¦‚ä¼šä¸€æ¡£å†™ä¸€æ¡£å¥½äº†ã€‚\nå…ˆæŠŠ $\\mathcal O(n^2)$ æ¬¡è¯¢é—®çš„å†™äº†ï¼Œä¸€å¼€å§‹è¿˜å†™é”™äº†ï¼Œå†™æˆäº† $n$ æ¬¡ä¿®æ”¹ï¼Œå·®ç‚¹æŒ‚æ‰ $8$ åˆ†ã€‚\nç„¶åæƒ³äº†ä¸€ä¼šå„¿æƒ³åˆ°äº†æ€§è´¨ $A$ ä¸€ä¸ªæœŸæœ› $\\log$ çš„åšæ³•ã€‚å†™å®Œ + è°ƒå®Œä¹‹å 3h å¤šä¸€ç‚¹ã€‚\nç„¶åå¼€å§‹æƒ³ T3 å„ç§å„æ ·çš„éƒ¨åˆ†åˆ†ï¼Œä¹±æäº† 2h ä¸€æ— æ‰€è·ã€‚\nå‡ºæ¥ä¹‹åå‘ç°å¤§å®¶ T1 éƒ½ä¼š K-D Treeï¼Œåˆå¬è¯´ T2 ç»“è®ºé¢˜å¯ä»¥æ‰“è¡¨..æ„Ÿè§‰ Ag åŸºæœ¬ä¸Šæ²¡äº†å•Šã€‚\næˆ‘åšå®¢ç”¨æ¨¡ 998244353 çš„ç­‰æ¯”æ•°åˆ—ï¼Œæ˜¯ä¸æ˜¯æš—ç¤º T2 æ¨¡ 998244353 ç­‰å·®æ•°åˆ—ï¼Œä¼šè¢«ç¦èµ›å•Šã€‚\nä¸‹åˆçœ‹æˆç»©ï¼Œ$72+30+36=138$ï¼Œå‘ç° T2 30ï¼ŒåŸå› æ˜¯ a æ•°ç»„å¼€å°äº†\u0026hellip;åªä¸è¿‡ä¸æŒ‚åˆ†åº”è¯¥ä¹Ÿæ˜¯ Cuï¼Œé—®é¢˜ä¸å¤§ã€‚\nè®²é¢˜çš„æ—¶å€™æ¾æ¾æ¾æŠŠ NOI å¼„æˆäº†é¸­å­è¥ã€‚\nT2 å‡ºé¢˜äººè¡¨ç¤ºï¼šä¸æ­¢è¦è®©è®­ç»ƒæœ‰ç´ çš„é€‰æ‰‹è¿›é˜Ÿï¼Œä¹Ÿè¦è®©é‚£äº›èƒ½å¤Ÿå‘ç°é¢˜ç›®æ€§è´¨çš„é€‰æ‰‹è¿›é˜Ÿã€‚æ„Ÿè§‰è¦æ˜¯ä¸èƒ½æ‰“è¡¨çš„è¯è¿™æ ·çš„æƒ³æ³•ä¹ŸæŒºæœ‰é“ç†çš„..\nå‡ºæ’åï¼Œæœç„¶ Cu äº†ã€‚\nHB åªæœ‰ jxl å’Œ lwc Agã€‚åªä¸è¿‡ä¸¤ä¸ª E éƒ½ä¸Šäº† Ag åˆ†æ•°çº¿ã€‚\nzyy æ§æ¯äº†ï¼Œzzy rk2ï¼Œzzq rk3ï¼Œ_rqy rk4ï¼Œjumpmelon rk6ï¼Œmyh rk7ï¼Œzhf rk19ã€‚\nçœ‹åˆ°ç†Ÿæ‚‰çš„åå­—è¿›é›†è®­é˜Ÿçš„æ„Ÿè§‰çœŸçš„å¾ˆå¥‡å¦™ã€‚\næ™šä¸Šå»é«˜æ ¡å®£è®²çœ‹çƒ­é—¹ã€‚\næ¸…åé‚£ä½è€å¸ˆçš„æ°”è´¨çœŸçš„å°±å®Œå…¨ä¸ä¸€æ ·ï¼ˆä¹‹å‰ THUWC å’Œ THUSC çš„æ—¶å€™å°±ä½“ä¼šåœ°éå¸¸æ˜æ˜¾äº†ï¼‰ï¼Œæœ‰æ¡ä¸ç´Šåœ°è®²å‡ºç¡¬æ ¸çš„ä¼˜ç‚¹ï¼ˆè€Œä¸æ˜¯é‚£äº›èŠ±é‡Œèƒ¡å“¨çš„ä¸œè¥¿ï¼‰ï¼ˆä¹Ÿæ²¡æœ‰ä¸€ç§â€æˆ‘æ˜¯æ¥å®Œæˆä»»åŠ¡â€œçš„æ„Ÿè§‰ï¼‰ï¼ˆä¹Ÿä¸ä¼šè¯´â€œé‚£æˆ‘ä»Šå¤©å°±ç”¨è¿™ä¸ª PPT æ¥è®²ä¸€ä¸‹â€â€œé‚£æˆ‘å°±ä¸ç”¨ PPT äº†â€è¿™æ ·çš„è¯ï¼‰ï¼Œæ„Ÿè§‰è®²äº†éå¸¸å¤šï¼Œæœ€åæ­£å¥½å¡æ—¶è®²å®Œäº†ï¼ˆå…¶å®ƒå­¦æ ¡éƒ½æ„Ÿè§‰æ²¡è®²å•¥å°±åŒ†åŒ†å¿™å¿™ç»“æŸäº†ï¼‰ï¼ˆåªä¸è¿‡è¿™ä¹Ÿå¯èƒ½æ˜¯å­¦æ ¡å®åŠ›åŸå› ï¼‰ã€‚ï¼ˆé¡ºå¸¦ä¸€æï¼ŒTHU æ²¡ç”¨ PPTï¼‰\nåŒ—å¤§ï¼šæˆ‘å‡†å¤‡äº†ä¸€ä¸ª PPTï¼Œå‘é‚®ä»¶çš„æ—¶å€™æŒ‚äº†ï¼Œä»Šå¤©æˆ‘æŠŠ PPT å¸¦è¿‡æ¥äº†ï¼Œæˆ‘æ˜¯å¹²è®²è¿˜æ˜¯ç”¨ PPTï¼Œä½ ä»¬è§‰å¾—æ€ä¹ˆæ ·æ¯”è¾ƒå¥½ï¼Ÿ\nä¸»æŒäººï¼šæŠ±æ­‰ï¼Œè¯·éµå®ˆè§„åˆ™å£å¤´è®²ã€‚\nåŒ—å¤§ï¼šæˆ‘è§‰å¾—å‡†å¤‡è¿™ä¹ˆä¸€ä¸ª PPT ä¸ç»™å¤§å®¶çœ‹å®åœ¨æ˜¯å¯¹ä¸èµ·å¤§å®¶ã€‚\nï¼ˆè¯´ç€å°±æ‰“å¼€äº† PPTï¼‰\nï¼Ÿï¼Ÿï¼Ÿ\nå¤©æ´¥å¤§å­¦å¾ˆå¿«å°±è®²å®Œäº†ï¼Œç„¶åè¯´â€œä¸ç”¨æ‰“é“ƒäº†â€ï¼Œå¾ˆå¤šäººé¼“æŒ..æ„Ÿè§‰ THU é‚£æ ·æ‰“é“ƒçš„åŒæ—¶æœ‰æ¡ä¸ç´Šåœ°ç»“æŸæ‰æ¯”è¾ƒå¸…å•Šï¼ˆ\næ„Ÿè§‰æ­¦å¤§ä¹Ÿè®²çš„æµ·æ˜Ÿï¼Œä¹Ÿæ˜¯çœŸçš„åœ¨è®²è€Œä¸æ˜¯å®Œæˆä»»åŠ¡ï¼Œæ„Ÿè§‰æ¯”è¾ƒè‡ªç„¶ã€‚\nåä¸œå¸ˆèŒƒå¤§å­¦ï¼šç”·ç”Ÿä»¬å¯ä»¥å’Œå¾ˆå¤šæ–‡ç§‘çš„å¥³ç”Ÿäº¤æµã€‚å¥³ç”Ÿä»¬ä¹Ÿä¸è¦æ‹…å¿ƒï¼Œå› ä¸ºä½ ä»¬ä¹Ÿå¯ä»¥å’Œå¾ˆå¤šæ–‡ç§‘çš„å¥³ç”Ÿäº¤æµã€‚emm\u0026hellip;\næ’åœ¨æœ€åçš„ä¸‰ä¸ªå­¦æ ¡ç›´æ¥å’•äº†\u0026hellip;\nåªä¸è¿‡æˆ‘ä¸€ä¸ª Cu å‡­ä»€ä¹ˆè¯„ä»·é«˜æ ¡å®£è®²å•Šã€‚\nâ€œæˆ‘ä¹Ÿæ˜¯æœ‰çº¦çš„äººäº†ï¼â€ã€Œä¸¤å¹´ OI æ¢ä¸€çº¸ç­¾çº¦ã€â€”â€” ä¸€åæ‹¿åˆ°äººå¤§ä¸€ç­‰çº¦çš„æˆ‘çœé«˜äºŒé€‰æ‰‹ã€‚\nå¥½åƒè¿˜æœ‰é¢è¯•åˆ°æ™šä¸ŠåäºŒç‚¹ï¼Œæœ€åæ‹¿åˆ°â€œæ›¿è¡¥äºŒç­‰çº¦â€çš„é€‰æ‰‹..\nçœ‹åˆ°èº«è¾¹çš„äººé€€å½¹æ›´æ˜¯ä¸€ç§è¯´ä¸å‡ºçš„æ„Ÿè§‰ã€‚\nDay 232390342 æ—©ä¸Šå’•æ‰å˜‰å¹´åï¼Œå»æœºæˆ¿æŠŠ D1T1 å†™äº†ï¼Œç„¶åè¯•å›¾å­¦ä¹  k-d treeã€‚\næ„Ÿè§‰èµ„æ–™è¿˜æ˜¯å¤ªå°‘äº†ï¼Œä¹Ÿä¸çŸ¥é“ç½‘ä¸Šé‚£äº›å¤æ‚åº¦æ˜¯ä¸æ˜¯å¯¹çš„..\nä¸‹åˆé—­å¹•å¼ã€‚å¤§å®¶è¯¥ Au çš„ Auï¼Œè¯¥æ§æ¯çš„æ§æ¯ï¼Œè¯¥æ‰«å°„çš„ç¯å…‰å¸ˆç»§ç»­æ‰«å°„ã€‚\nç»“æŸä¹‹åçœŸçš„è½é›¨å¤§äº†..ä¸‹äº†ä¸€ä¸ªå¤šå°æ—¶çš„å¤§é›¨ï¼Œé€‰æ‰‹è¢œå­æ²¡äº†ã€‚\næˆ‘åŒè‰² NOI çš„ç¬¬ä¸€è‰²ï¼Œæ˜¯å¤é“œè‰²çš„ã€‚\nDay 4 æœ¬æ¥ä¸æƒ³å†™ Day 4 çš„ï¼Œä½†å¹¿å·å—çš„ä¾¿åˆ©åº—ç«Ÿç„¶æ²¡æœ‰æ³¡é¢ï¼Œå¿…é¡»å¾—åæ§½ä¸€ä¸‹ã€‚\nG1114 ç«Ÿç„¶æ²¡æœ‰æ’åº§ï¼Œæ›´å¾—åæ§½äº†ã€‚\né‚£ä¹ˆï¼Œé•¿æ²™ä¸€ä¸­å†ä¼šã€‚\né¢˜è§£ ä¼°è®¡ä¼šæ¯”è¾ƒå’•\nD1T1 â€œå»å¹´ D1T1 æœ€çŸ­è·¯ï¼Œä»Šå¹´ä¹Ÿæ˜¯å‘¢â€é€‰æ‰‹è‡ªé—­äº†ã€‚\nå‡ºè€ƒåœºå¬è¯´æ–œç‡ä¼˜åŒ–ï¼Œä»¥ä¸ºæ˜¯æ–œç‡ä¼˜åŒ–é¢„å¤„ç†ç­‰å¾…æ—¶é—´çš„è¿è¾¹ç„¶åè·‘æœ€çŸ­è·¯ã€‚\nçœ‹äº†é¢˜è§£æ‰çŸ¥é“åŸæ¥è¿™é¢˜æ ¹æœ¬ä¸ç”¨æœ€çŸ­è·¯ï¼Œè¿ DAG æœ€çŸ­è·¯éƒ½ä¸ç”¨..\næŠŠè¾¹æŒ‰ç»“æŸæ—¶é—´ï¼ˆ$q_i$ï¼‰æ’åºï¼Œä»¤ $f_i$ è¡¨ç¤ºèµ°å®Œç¬¬ $i$ æ¡è¾¹åè¿˜éœ€è¦çš„çƒ¦èºå€¼çš„æœ€å°å€¼ã€‚\n$\\begin{aligned}f_i\u0026amp;=\\min\\limits_{p_j\\ge q_i,x_j=y_i}\\{A(p_j-q_i)^2+B(p_j-q_i)+C+q_j-q_i+f_j\\}\\\\\u0026amp;=\\min\\limits_{p_j\\ge q_i,x_j=y_i}\\{Ap_j^2+Bp_j+q_j+f_j-2Ap_jq_i\\}+Aq_i^2-Bq_i+C-q_i\\end{aligned}â€‹$\nç„¶åå°±å¯ä»¥æ–œç‡ä¼˜åŒ–äº†ã€‚ï¼ˆå› ä¸ºè½¬ç§»æœ‰ $x_j=y_i$ çš„é™åˆ¶ï¼Œè¦å¼€ $n$ ä¸ªåŒç«¯é˜Ÿåˆ—ï¼Œä½†ä¸è¦å¼€ dequeï¼Œå¼€å¤§é‡ deque æ˜¯ä¼š MLE çš„ã€‚å†™æ³•çš„è¯ï¼Œç”¨ vector å­˜ï¼Œæ™®é€šæ–¹æ³•å†™å°±å¥½äº†ã€‚ï¼‰\nå‚è€ƒä»£ç  æŒ‰ç†æ¥è¯´é¢˜è§£é‡Œä¸åº”è¯¥åŒ…å«æ¨¡æ¿ï¼Œåªä¸è¿‡è¿™ä¹Ÿä¸æ˜¯ä»€ä¹ˆå®˜æ–¹é¢˜è§£ï¼Œæˆ‘å°±æ‡’å¾—æ¢æˆæ­£å¸¸å†™æ³•äº†ã€‚\n#ifndef OUUAN #pragma GCC optimize(\u0026quot;Ofast,no-stack-protector,unroll-loops,fast-math\u0026quot;) #endif #include\u0026lt;bits/stdc++.h\u0026gt; #define int LoveLive //#define FAST_IOSTREAM 1 #define For(i,l,r)for(int i=(l),i##end=(r);i\u0026lt;=i##end;++i) #define FOR(i,r,l)for(int i=(r),i##end=(l);i\u0026gt;=i##end;--i) #define SON(i,u)for(int i=head[u];i;i=nxt[i]) #define ms(a,x)memset(a,x,sizeof(a)) #define fi first #define se second #define pq priority_queue #define pb emplace_back #define isinf(x)(x\u0026gt;=INF?-1:x) #define DEBUG(x)cerr\u0026lt;\u0026lt;(#x)\u0026lt;\u0026lt;\u0026quot;:\u0026quot;\u0026lt;\u0026lt;x\u0026lt;\u0026lt;endl using namespace std;typedef long long LoveLive;typedef pair\u0026lt;int,int\u0026gt;pii;typedef vector\u0026lt;int\u0026gt;vi; #ifdef int const int INF=0x3f3f3f3f3f3f3f3fll; #else const int INF=0x3f3f3f3f; #endif const double eps=1e-9;mt19937 rng(chrono::steady_clock::now().time_since_epoch().count());int randint (int l,int r){return(int)rng()%(r-l+1)+l;} #ifdef FAST_IOSTREAM #define br cout\u0026lt;\u0026lt;'\\n' #define sp cout\u0026lt;\u0026lt;' ' long long read(){long long x;cin\u0026gt;\u0026gt;x;return x;}template\u0026lt;typename T\u0026gt;void read(T\u0026amp;x){cin\u0026gt;\u0026gt;x;}template\u0026lt;typename T\u0026gt;void write(const T\u0026amp;x){cout\u0026lt;\u0026lt;x;} #else #define br putchar('\\n') #define sp putchar(' ') template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt;!is_integral\u0026lt;T\u0026gt;::value,void\u0026gt;::type read(T\u0026amp;x){cin\u0026gt;\u0026gt;x;}long long read(){char c;long long out=0,f=1;for(c=getchar();!isdigit(c)\u0026amp;\u0026amp;c!='-';c=getchar());if(c=='-'){f=-1;c =getchar();}for(;isdigit(c);c=getchar())out=(out\u0026lt;\u0026lt;3)+(out\u0026lt;\u0026lt;1)+c-'0';return out*f;}template\u0026lt;typename T \u0026gt;typename enable_if\u0026lt;is_integral\u0026lt;T\u0026gt;::value,T\u0026gt;::type read(T\u0026amp;x){char c;T f=1;x=0;for(c=getchar();!isdigit (c)\u0026amp;\u0026amp;c!='-';c=getchar());if(c=='-'){f=-1;c=getchar();}for(;isdigit(c);c=getchar())x=(x\u0026lt;\u0026lt;3)+(x\u0026lt;\u0026lt;1)+c-'0'; return x*=f;}char read(char\u0026amp;x){for(x=getchar();isspace(x);x=getchar());return x;}double read(double \u0026amp;x){scanf(\u0026quot;%lf\u0026quot;,\u0026amp;x);return x;}void read(char*x){scanf(\u0026quot;%s\u0026quot;,x);}template\u0026lt;typename T\u0026gt;typename enable_if \u0026lt;!is_integral\u0026lt;T\u0026gt;::value,void\u0026gt;::type write(const T\u0026amp;x){cout\u0026lt;\u0026lt;x;}template\u0026lt;typename T\u0026gt;typename enable_if\u0026lt; is_integral\u0026lt;T\u0026gt;::value,void\u0026gt;::type write(const T\u0026amp;x){if(x\u0026lt;0){putchar('-');write(-x);return;}if(x\u0026gt;9)write (x/10);putchar(x%10+'0');}void write(const char\u0026amp;x){putchar(x);}void write(const double\u0026amp;x){printf(\u0026quot;%.10lf\u0026quot; ,x);}void write(const char*x){printf(\u0026quot;%s\u0026quot;,x);} #endif template\u0026lt;typename T,typename...Args\u0026gt;void read(T\u0026amp;x,Args\u0026amp;...args){read(x);read(args...);}template\u0026lt;typename ...Args\u0026gt;void read(char*x,Args\u0026amp;...args){read(x);read(args...);}template\u0026lt;typename OutputIt,typename=typename enable_if\u0026lt;is_same\u0026lt;output_iterator_tag,typename iterator_traits\u0026lt;OutputIt\u0026gt;::iterator_category\u0026gt;::value ||( is_base_of\u0026lt;forward_iterator_tag,typename iterator_traits\u0026lt;OutputIt\u0026gt;::iterator_category\u0026gt;::value\u0026amp;\u0026amp;!is_const \u0026lt;OutputIt\u0026gt;::value)\u0026gt;::type\u0026gt;void read(OutputIt __first,OutputIt __last){for(;__first!=__last;++__first) read(*__first);}template\u0026lt;typename InputIt,typename=typename enable_if\u0026lt;is_base_of\u0026lt;input_iterator_tag,typename iterator_traits\u0026lt;InputIt\u0026gt;::iterator_category\u0026gt;::value\u0026gt;::type\u0026gt;void wts(InputIt __first,InputIt __last){ for(;__first!=__last;++__first){write(*__first);sp;}}template\u0026lt;typename InputIt,typename=typename enable_if \u0026lt;is_base_of\u0026lt;input_iterator_tag,typename iterator_traits\u0026lt;InputIt\u0026gt;::iterator_category\u0026gt;::value\u0026gt;::type\u0026gt;void wtb(InputIt __first,InputIt __last){for(;__first!=__last;++__first){write(*__first);br;}}void wts(const char*x){write(x);sp;}void wtb(const char*x){write(x);br;}void wte(const char*x){write(x);exit(0);}template \u0026lt;typename T\u0026gt;void wts(const T\u0026amp;x){write(x);sp;}template\u0026lt;typename T\u0026gt;void wtb(const T\u0026amp;x){write(x);br;}template \u0026lt;typename T\u0026gt;void wte(const T\u0026amp;x){write(x);exit(0);}template\u0026lt;typename...Args\u0026gt;void wts(const char*x,Args ...args){wts(x);wts(args...);}template\u0026lt;typename...Args\u0026gt;void wtb(const char*x,Args...args){wts(x);wtb( args...);}template\u0026lt;typename...Args\u0026gt;void wte(const char*x,Args...args){wts(x);wte(args...);}template\u0026lt;typename T,typename...Args\u0026gt;void wts(const T\u0026amp;x,Args...args){wts(x);wts(args...);}template\u0026lt;typename T,typename... Args\u0026gt;void wtb(const T\u0026amp;x,Args...args){wts(x);wtb(args...);}template\u0026lt;typename T,typename...Args\u0026gt;void wte (const T\u0026amp;x,Args...args){wts(x);wte(args...);}template\u0026lt;typename T\u0026gt;inline bool up(T\u0026amp;x,const T\u0026amp;y){return x\u0026lt;y?x=y,1:0;}template\u0026lt;typename T\u0026gt;inline bool dn(T\u0026amp;x,const T\u0026amp;y){return y\u0026lt;x?x=y,1:0;} const int N = 100010; const int M = 200010; int n, m, a, b, c, id[M]; struct Edge { int u, v, p, q, f; bool operator\u0026lt;(const Edge \u0026amp; b) const { return q \u0026gt; b.q; } } e[M]; struct Point { int x, y; Point(int j = 0): x(2 * a * e[j].p), y(a * e[j].p * e[j].p + b * e[j].p + e[j].q + e[j].f) {} friend bool cmp(const Point \u0026amp; a1, const Point \u0026amp; a2, const Point \u0026amp; a3) { if (a1.x == a2.x) return a1.y \u0026lt; a2.y; return (a1.y - a3.y) * (a2.x - a3.x) \u0026gt;= (a2.y - a3.y) * (a1.x - a3.x); } int cal(int k) const { return y - k * x; } }; struct Deque { vector\u0026lt;Point\u0026gt; q; int ql, qr; Deque() { q.resize(1); ql = 1; qr = 0; } bool empty() const { return ql \u0026gt; qr; } void push_back(const Point \u0026amp; x) { ++qr; if (q.size() == qr) q.push_back(x); else q[qr] = x; } void cal(int i) { while (ql \u0026lt; qr \u0026amp;\u0026amp; q[ql + 1].cal(e[i].q) \u0026lt;= q[ql].cal(e[i].q)) ++ql; e[i].f = q[ql].cal(e[i].q) + a * e[i].q * e[i].q - b * e[i].q + c - e[i].q; } void insert(const Point \u0026amp; x) { while (ql \u0026lt; qr \u0026amp;\u0026amp; cmp(x, q[qr], q[qr - 1])) --qr; push_back(x); } } q[N]; signed main() { #ifdef FAST_IOSTREAM cin.sync_with_stdio(false); cin.tie(0); #endif read(n, m, a, b, c); For (i, 1, m) read(e[i].u, e[i].v, e[i].p, e[i].q); ++m; e[m].u = 0; e[m].v = 1; e[m].p = 0; e[m].q = 0; sort(e + 1, e + m + 1); For (i, 1, m) id[i] = i; sort(id + 1, id + m + 1, [](int x, int y) { return e[x].p \u0026gt; e[y].p; }); int idp = 1; For (i, 1, m) { if (e[i].v == n) { e[i].f = 0; continue; } while (idp \u0026lt;= m \u0026amp;\u0026amp; e[id[idp]].p \u0026gt;= e[i].q) { if (e[id[idp]].f \u0026lt; INF) q[e[id[idp]].u].insert(Point(id[idp])); ++idp; } if (q[e[i].v].empty()) { e[i].f = INF; continue; } q[e[i].v].cal(i); } For (i, 1, m) if (e[i].u == 0) wte(e[i].f); return 0; }   D1T3 å…¶å®å¯ä»¥æ¨¡æ‹Ÿè´¹ç”¨æµï¼Œä½†å¦‚æœä½ å†™ä¸€ç¯‡æ¨¡æ‹Ÿè´¹ç”¨æµçš„é¢˜è§£ï¼Œä¼šå‘ç°é‚£æ˜¯ä¸€ç¯‡è´¹ç”¨æµå»ºå›¾çš„é¢˜è§£å’Œä¸€ç¯‡è´ªå¿ƒé¢˜è§£æ‹¼èµ·æ¥ã€‚æ‰€ä»¥ä¸‹é¢æ˜¯ä¸€ç¯‡çº¯è´ªå¿ƒé¢˜è§£ã€‚\næˆ‘ä»¬è¦ä»ä¸¤ä¸ªåºåˆ—ä¸­å„é€‰ $k$ ä¸ªä¸‹æ ‡ï¼Œè€ƒè™‘æ¯ä¸€æ­¥ï¼ˆé€‰æ‹©ä¸€ç»„ä¸‹æ ‡ï¼‰ï¼š\n å¦‚æœè¿˜å…è®¸é€‰ä¸¤ä¸ªä¸ä¸€æ ·çš„ä¸‹æ ‡ï¼Œé‚£å°±ä»å‰©ä¸‹è¿˜æ²¡é€‰çš„æ•°é‡Œé€‰æœ€å¤§çš„ $a$ å’Œæœ€å¤§çš„ $b$ã€‚ å¦‚æœæ— æ³•é€‰æ‹©ä¸ä¸€æ ·çš„ä¸‹æ ‡äº†ï¼Œé‚£ä¹ˆæœ‰ä¸‰ç§é€‰æ‹©ï¼š  é€‰æ‹©ä¸€ç»„ $a_i+b_i$ï¼ˆå³ $a$, $b$ ä¸‹æ ‡ç›¸åŒï¼‰ $a_i$ è¢«é€‰äº†ï¼Œ$b_i$ æ²¡æœ‰è¢«é€‰ï¼Œé‚£ä¹ˆæŠŠ $a_i$ ä¸ $b_i$ åŒ¹é…ï¼Œå†ç»™ $a_i$ åŸæ¥åŒ¹é…çš„é‚£ä¸ª $b_j$ æ‰¾åˆ°ä¸€ä¸ªå‰©ä¸‹çš„é‡Œé¢æœ€å¤§çš„ $a_k$ï¼Œç„¶åæŠŠ $b_j$ å’Œ $a_k$ åŒ¹é…ã€‚ æŠŠç¬¬äºŒæ¡çš„ $a$ å’Œ $b$ äº’æ¢ã€‚    é‚£ä¹ˆï¼Œç»´æŠ¤å‰©ä¸‹çš„æœ€å¤§çš„ $a$ï¼Œå‰©ä¸‹çš„æœ€å¤§çš„ $b$ï¼Œå‰©ä¸‹çš„æœ€å¤§çš„ $a+b$ï¼Œ$a_i$ å·²åŒ¹é…çš„æœ€å¤§çš„ $b_i$ï¼Œ$b_i$ å·²åŒ¹é…çš„æœ€å¤§çš„ $a_i$ï¼Œå‰©ä½™å¯é€‰æ‹©çš„ä¸ä¸€æ ·ä¸‹æ ‡ä¸ªæ•°ï¼Œæ¯ä¸ªæ•°åŒ¹é…çš„æ•°ï¼Œå°±å¯ä»¥å®Œæˆè¿™ä¸ªè´ªå¿ƒäº†ã€‚\nå‰ä¸‰ä¸ªæœ€å¤§å€¼æ’åºå³å¯ï¼Œåä¸¤ä¸ªæœ€å¤§å€¼ä½¿ç”¨å †ç»´æŠ¤ã€‚ç»†èŠ‚æœ‰äº›å¤šï¼Œå†™çš„æ—¶å€™æ³¨æ„æ¯ä¸€æ­¥éƒ½ç¡®ä¿æ¯ä¸ªé‡æ­£ç¡®æ›´æ–°äº†ã€‚å°¤å…¶éœ€è¦æ³¨æ„çš„æ˜¯â€œå‰©ä½™å¯é€‰æ‹©çš„ä¸ä¸€æ ·ä¸‹æ ‡ä¸ªæ•°â€çš„æ›´æ–°ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;queue\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; int read() { int out = 0; char c; while (!isdigit(c = getchar())); for (; isdigit(c); c = getchar()) out = out * 10 + c - '0'; return out; } typedef pair\u0026lt;int, int\u0026gt; pii; const int N = 200010; const int INF = 1e9; int T, n, k, dif, a[N], b[N], ida[N], idb[N], idab[N], pa, pb, pab, fa[N], fb[N]; // dif æ˜¯å‰©ä½™å¯é€‰æ‹©çš„ä¸ä¸€æ ·ä¸‹æ ‡ä¸ªæ•°ï¼Œid æ˜¯ç”¨æ¥æ’åºçš„ï¼Œpaï¼Œpbï¼Œpab è®°å½•ç”¨åˆ°äº†ç¬¬å‡ ä¸ªå€¼ï¼ˆå³å½“å‰æœ€å¤§å€¼æ˜¯ a[pa] ä¹‹ç±»çš„ï¼‰ï¼Œfaï¼Œfb åˆ†åˆ«è®°å½• a_i å’Œ b_i åŒ¹é…çš„æ•°çš„ä¸‹æ ‡ priority_queue\u0026lt;pii\u0026gt; sa, sb, emptypq; // sa æ˜¯ b å·²åŒ¹é…çš„ aï¼Œsb æ˜¯ a å·²åŒ¹é…çš„ bï¼Œemptypq æ˜¯ç”¨æ¥å¤šæµ‹æ¸…ç©ºçš„ void link(int u, int v) // åŒ¹é…ä¸¤ä¸ªæ•° { --dif; fa[u] = v; fb[v] = u; if (u == v) --dif; // å»é‡ï¼Œå¦åˆ™ä¼šåœ¨ä¸‹é¢ä¸‰è¡Œä»£ç é‡ŒåŠ ä¸¤æ¬¡ if (fb[u]) ++dif; else sb.push(pii(b[u], u)); if (fa[v]) ++dif; else sa.push(pii(a[v], v)); } void cut(int u, int v) // æ–­å¼€åŒ¹é… { ++dif; if (fb[u]) --dif; if (fa[v]) --dif; if (u == v) ++dif; // å»é‡ fa[u] = fb[v] = 0; } pii geta() // è·å–å½“å‰å‰©ä½™çš„æœ€å¤§ a { while (fa[ida[pa]]) ++pa; return pii(a[ida[pa]], ida[pa]); } pii getb() // è·å–å½“å‰å‰©ä½™çš„æœ€å¤§ b { while (fb[idb[pb]]) ++pb; return pii(b[idb[pb]], idb[pb]); } pii getab() // è·å–å½“å‰å‰©ä½™çš„æœ€å¤§ a + b { while (pab \u0026lt;= n \u0026amp;\u0026amp; (fa[idab[pab]] || fb[idab[pab]])) ++pab; return pii(pab \u0026lt;= n ? a[idab[pab]] + b[idab[pab]] : -INF, idab[pab]); } pii getsa() // è·å– b å·²é€‰çš„æœ€å¤§ a { while (!sa.empty() \u0026amp;\u0026amp; fa[sa.top().second]) sa.pop(); return sa.empty() ? pii(-INF, 0) : sa.top(); } pii getsb() // è·å– a å·²é€‰çš„æœ€å¤§ b { while (!sb.empty() \u0026amp;\u0026amp; fb[sb.top().second]) sb.pop(); return sb.empty() ? pii(-INF, 0) : sb.top(); } int main() { T = read(); while (T--) { pa = pb = pab = 1; sa = sb = emptypq; memset(fa, 0, sizeof(fa)); memset(fb, 0, sizeof(fb)); n = read(); k = read(); dif = k - read(); for (int i = 1; i \u0026lt;= n; ++i) a[i] = read(); for (int i = 1; i \u0026lt;= n; ++i) b[i] = read(); for (int i = 1; i \u0026lt;= n; ++i) ida[i] = idb[i] = idab[i] = i; sort(ida + 1, ida + n + 1, [](int x, int y){return a[x] \u0026gt; a[y];}); sort(idb + 1, idb + n + 1, [](int x, int y){return b[x] \u0026gt; b[y];}); sort(idab + 1, idab + n + 1, [](int x, int y){return a[x] + b[x] \u0026gt; a[y] + b[y];}); while (k--) { if (dif) link(geta().second, getb().second); else { pii nab = getab(); pii na_a = getsa(); pii na_b = getb(); pii nb_a = geta(); pii nb_b = getsb(); if (nab.first \u0026gt;= na_a.first + na_b.first \u0026amp;\u0026amp; nab.first \u0026gt;= nb_a.first + nb_b.first) link(nab.second, nab.second); else if (na_a.first + na_b.first \u0026gt;= nb_a.first + nb_b.first) { int t = fb[na_a.second]; cut(t, na_a.second); link(t, na_b.second); link(na_a.second, na_a.second); } else { int t = fa[nb_b.second]; cut(nb_b.second, t); link(nb_a.second, t); link(nb_b.second, nb_b.second); } } } long long ans = 0; for (int i = 1; i \u0026lt;= n; ++i) ans += (fa[i] ? a[i] : 0) + (fb[i] ? b[i] : 0); printf(\u0026quot;%lld\\n\u0026quot;, ans); } return 0; }  ","date":"2019-07-15T09:48:38+08:00","permalink":"https://ouuan.github.io/post/nio9102-%E8%90%BD%E9%9B%A8%E5%A4%A7/","tags":["CCFç³»åˆ—èµ›äº‹"],"title":"NIO9102 è½é›¨å¤§"},{"categories":["æŠ€æœ¯"],"contents":"ä»Šå¤©æƒ³æ›´æ–°ä¸€ä¸‹è‡ªå·±çš„ CF æ¨¡æ¿ï¼Œç„¶åå‘ç°ç”±äºå†™æ³•é—®é¢˜å¯èƒ½è¦ç»™æ¯ç§æ•´å‹ï¼ˆintï¼Œlongï¼Œlong longï¼Œunsigned intï¼Œunsigned long longâ€¦â€¦ï¼‰åˆ†åˆ«å®šä¹‰å‡½æ•°ï¼Œäºæ˜¯å°è¯•æœäº†ä¸€ä¸‹æœ‰æ²¡æœ‰ä»€ä¹ˆå¥½çš„ä»£ç é‡ç”¨æ–¹å¼ï¼Œå‘ç°äº† enable_ifï¼Œè¿˜æŒºå¥½ç”¨çš„ï¼Œä½†å»ç½‘ä¸Šæœæ•™ç¨‹å¯èƒ½æ¯”è¾ƒéš¾å­¦..æˆ‘ä¹±æäº†ä¸¤ä¸‰ä¸ªå°æ—¶æ‰å­¦ä¼šã€‚äºæ˜¯å°±æ¥åˆ†äº«ä¸€ä¸‹..\né‡è½½çš„åŒ¹é… SFINAE SFINAE æ˜¯ substitution failure is not an error çš„ç¼©å†™ï¼Œå³åŒ¹é…å¤±è´¥ä¸æ˜¯é”™è¯¯ã€‚å°±æ˜¯è¯´ï¼ŒåŒ¹é…é‡è½½çš„å‡½æ•° / ç±»æ—¶å¦‚æœåŒ¹é…åä¼šå¼•å‘ç¼–è¯‘é”™è¯¯ï¼Œè¿™ä¸ªå‡½æ•° / ç±»å°±ä¸ä¼šä½œä¸ºå€™é€‰ã€‚è¿™æ˜¯ä¸€ä¸ª C++11 çš„æ–°ç‰¹æ€§ï¼Œä¹Ÿæ˜¯ enable_if æœ€æ ¸å¿ƒçš„åŸç†ã€‚\nå®Œæ•´çš„é‡è½½åŒ¹é…é¡ºåºï¼ˆSFINAE ä¸‹ï¼‰  æ‰¾åˆ°å€™é€‰å‡½æ•°ï¼Œå»æ‰å…¶ä¸­ä¼šå¼•å‘ç¼–è¯‘é”™è¯¯çš„ã€‚ å®Œå…¨åŒ¹é… \u0026gt; æå‡è½¬æ¢ \u0026gt; æ ‡å‡†è½¬æ¢ \u0026gt; ç”¨æˆ·å®šä¹‰çš„è½¬æ¢ã€‚  å®Œå…¨åŒ¹é…ï¼š  å€¼ â†” å¼•ç”¨ [] â†’ * type(argument-list) â†’ (type *)(argument-list)ï¼ˆå‡½æ•°æŒ‡é’ˆï¼‰ type â†’ const / volatile type type * â†’ const type type * â†’ volatile type *   æå‡è½¬æ¢ï¼šchar / shorts â†’ intï¼Œfloat â†’ doubleã€‚ æ ‡å‡†è½¬æ¢ï¼šint â†’ charï¼Œlong â†’ doubleã€‚ ç”¨æˆ·å®šä¹‰çš„è½¬æ¢ï¼šç±»ä¸­çš„æ„é€ å‡½æ•°ï¼Œç±»å‹è½¬æ¢å‡½æ•°ç­‰ã€‚   éæ¨¡æ¿å‡½æ•°ä¼˜å…ˆäºæ¨¡æ¿å‡½æ•°ã€‚ å¯»æ‰¾â€œæœ€ä½³åŒ¹é…â€ï¼Œæˆ‘è‡ªå·±ä¹Ÿä¸æ˜¯å¾ˆäº†è§£ï¼Œå¯ä»¥å‚è§ ã€ŠC++ Primer Plusï¼ˆç¬¬äº”ç‰ˆï¼‰ã€‹8.5.4 æˆ–ä¸Šç½‘æœç´¢ã€‚  è‹¥ç»è¿‡ä»¥ä¸Šè¿‡ç¨‹ä»æœ‰å¤šä¸ªå€™é€‰å‡½æ•°ï¼Œåˆ™ä¼šå¼•å‘äºŒä¹‰æ€§é”™è¯¯ã€‚\nenable_if çš„åŸç† enable_if çš„å®šä¹‰ç±»ä¼¼äºä¸‹é¢çš„ä»£ç ï¼šï¼ˆåªæœ‰ Cond = true æ—¶å®šä¹‰äº† typeï¼‰\ntemplate\u0026lt;bool Cond, class T = void\u0026gt; struct enable_if {}; template\u0026lt;class T\u0026gt; struct enable_if\u0026lt;true, T\u0026gt; { typedef T type; };  è¿™æ ·çš„è¯ï¼Œenable_if\u0026lt;true, T\u0026gt;::type å³ä¸º Tï¼Œè€Œ enable_if\u0026lt;false, T\u0026gt;::type ä¼šå¼•å‘ç¼–è¯‘é”™è¯¯ï¼ˆåœ¨ SFINAE ä¸‹ï¼Œå³ä¸å°†åŒ…å«è¿™ä¸€ enable_if çš„å‡½æ•° / ç±»ä½œä¸ºå€™é€‰ï¼‰ã€‚\nenable_if çš„ä½¿ç”¨ enable_if å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å……å½“ä¸€ä¸ªç±»å‹ä½¿ç”¨ï¼Œå¯ä»¥æœ‰å®é™…æ„ä¹‰ï¼Œä¹Ÿå¯ä»¥æ–°å¢ä¸€ä¸ªå¤šä½™çš„ä»…ç”¨æ¥ enable / unable çš„å‚æ•°ã€‚\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;type_traits\u0026gt; using namespace std; template\u0026lt;int a, int b\u0026gt; typename enable_if\u0026lt;a + b == 233, bool\u0026gt;::type is233() { return true; } template\u0026lt;int a, int b\u0026gt; typename enable_if\u0026lt;a + b != 233, bool\u0026gt;::type is233() { return false; } int main() { cout \u0026lt;\u0026lt; is233\u0026lt;1, 232\u0026gt;() \u0026lt;\u0026lt; endl \u0026lt;\u0026lt; is233\u0026lt;114514, 1919\u0026gt;(); return 0; }  åªä¸è¿‡ï¼Œå¤§å¤šæ•°æ—¶å€™ enable_if éƒ½ç”¨æ¥åˆ¤æ–­æ¨¡æ¿å‚æ•°çš„ç±»å‹ï¼Œæ­¤æ—¶ä¸€èˆ¬è¦å’Œ is_integral ç­‰æ¨¡æ¿ç±»ç»“åˆä½¿ç”¨ã€‚\næœ‰å…³ is_integral ç­‰ç›¸å…³æ¨¡æ¿ç±»çš„ä¿¡æ¯å¯ä»¥å‚è§ C++ Referenceã€‚\nis_integral\u0026lt;T\u0026gt;::value æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œåœ¨ T ä¸ºæ•´å‹æ—¶ä¸ºçœŸï¼Œå¦åˆ™ä¸ºå‡ã€‚\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;type_traits\u0026gt; using namespace std; template\u0026lt;typename T, typename = typename enable_if\u0026lt;is_integral\u0026lt;T\u0026gt;::value, void\u0026gt;::type\u0026gt; bool isodd(T x) { return x % 2; } int main() { cout \u0026lt;\u0026lt; isodd(4) \u0026lt;\u0026lt; endl \u0026lt;\u0026lt; isodd('a'); //cout \u0026lt;\u0026lt; isodd(\u0026quot;qwq\u0026quot;); -- compile error return 0; }  ä¸€ä¸ª OutputIterator çš„ä¾‹å­ï¼š\ntemplate \u0026lt;typename OutputIt, typename = typename enable_if\u0026lt;is_same\u0026lt;output_iterator_tag, typename iterator_traits\u0026lt;OutputIt\u0026gt;::iterator_category\u0026gt;::value || (is_base_of\u0026lt;forward_iterator_tag, typename iterator_traits\u0026lt;OutputIt\u0026gt;::iterator_category\u0026gt;::value \u0026amp;\u0026amp; !is_const\u0026lt;OutputIt\u0026gt;::value)\u0026gt;::type\u0026gt; void read(OutputIt __first, OutputIt __last) { for (; __first != __last; ++__first) read(*__first); } ","date":"2019-07-03T01:24:13+08:00","permalink":"https://ouuan.github.io/post/c-11-enable-if-%E7%9A%84%E4%BD%BF%E7%94%A8/","tags":["æ³›å‹ç¼–ç¨‹","C++"],"title":"C++11 enable_if çš„ä½¿ç”¨"},{"categories":["å…¶å®ƒçŸ¥è¯†"],"contents":"ä»Šå¤©æ¨¡æ‹Ÿèµ›é‡åˆ°äº†ä¸€é“éœ€è¦è¶…ç°å®æ•°çš„é¢˜ç›®ï¼Œèµ›ååœ¨é˜…è¯» Matrix67 çš„åšå®¢ æ—¶å¬è¯´äº†å”çº³å¾·æ‰€è‘—çš„ã€ŠSurreal Numbersã€‹ï¼ˆä¸­è¯‘ï¼šç ”ç©¶ä¹‹ç¾ï¼‰è¿™æœ¬ä¹¦ï¼Œäºæ˜¯å°±é˜…è¯»äº†ä¸€ä¸‹ã€‚\nå¤§çº¦ä¼šæŠŠä¹¦é‡Œçš„å®šç†è¯ä¸€éå§..\nå­¦ä¹ è¶…ç°å®æ•°çš„æ—¶å€™è¯·å‡è£…è‡ªå·±ä¸çŸ¥é“å…³äºæ•°å­—çš„ä¸€åˆ‡çŸ¥è¯†ï¼Œå¹¶ä¸”ä¸è¦æŠŠå®šä¹‰çš„åå­—çœŸçš„å½“å›äº‹ï¼ˆæŸäº›å®šä¹‰æœ‰ç€ç†Ÿæ‚‰çš„åå­—ï¼Œä½†å¯èƒ½ä¸æˆ‘ä»¬ç†ŸçŸ¥çš„æ„ä¹‰ç›¸åŒï¼Œä¹Ÿå¯èƒ½ä¸åŒï¼‰ã€‚\nå°è¯´ä¸‹è½½\næœ¬æ–‡å¯èƒ½æ¯”è¾ƒå’•ï¼Œä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™èƒ½å¡«å®Œå‘\u0026hellip;\nConway\u0026rsquo;s rules ï¼ˆç¿»è¯‘æŒºç¥ä»™çš„ï¼‰\n åˆ›ç”ŸäºŒé“ï¼Œå¤§å°è¯¸æ•°ç›–ç”±æ­¤å‡ºã€‚\n   å‡¡æ•°ï¼Œçš†åˆäºå‰åˆ›äºŒæ•°ä¹‹é›†ï¼Œå…¶ä½å·¦è€…ï¼Œæ— ä¸€å¤§äºæˆ–ä¼¼äºå…¶ä½å³è€…ã€‚\n  ç”²æ•°å°äºæˆ–ä¼¼äºä¹™æ•°ï¼Œå½“ä¸”ä»…å½“ç”²æ•°ä¹‹å·¦é›†ä¸­æ— ä¸€å¤§äºæˆ–ä¼¼äºä¹™æ•°ï¼Œä¸”ä¹™æ•°ä¹‹å³é›†ä¸­æ— ä¸€å°äºæˆ–ä¼¼äºç”²æ•°ã€‚\n   Conway æ£€è§†äºŒé“ï¼Œè¿å‘¼å¦™å“‰ï¼æ­¤äºŒé“çœŸå¦™ç»ã€‚\n Definitions Symbols æ¯”è¾ƒè¿ç®—ç¬¦ä¸Šç”»ä¸€é“æ–œçº¿è¡¨ç¤ºä¸æ»¡è¶³è¯¥è¿ç®—ç¬¦ã€‚\n$x\\le y$ è¡¨ç¤º $x$ å°äºæˆ–ä¼¼äº $y$ã€‚\n$x\\ge y$ è¡¨ç¤º $y\\le x$ã€‚\n$x\\equiv y$ è¡¨ç¤º $x$ ä¼¼äº $y$ï¼Œå³ $x\\le y$ ä¸” $y\\le x$ã€‚\næ ¹æ®ä¸‹æ–‡ä¼šä»‹ç»çš„å®šç† (T4)ï¼Œâ€œä¸å°äºæˆ–ä¼¼äºâ€ å³ \u0026ldquo;å¤§äºä¸”ä¸ä¼¼äº\u0026rdquo;ï¼Œæ‰€ä»¥å¯ä»¥å®šä¹‰ $x\u0026lt;y$ è¡¨ç¤º $x\\not\\ge y$ï¼Œ$x\u0026gt;y$ è¡¨ç¤º $x\\not\\le y$ã€‚\n$A\\le x$ï¼ˆ$A$ æ˜¯ä¸€ä¸ªé›†åˆï¼Œ$x$ æ˜¯ä¸€ä¸ªæ•°ï¼‰è¡¨ç¤º $A$ ä¸­ä»»æ„ä¸€ä¸ªå…ƒç´ éƒ½ $\\le x$ã€‚ï¼ˆå…¶å®ƒè¿ç®—ç¬¦ç±»ä¼¼ï¼‰\n$x\\le A$ï¼ˆ$A$ æ˜¯ä¸€ä¸ªé›†åˆï¼Œ$x$ æ˜¯ä¸€ä¸ªæ•°ï¼‰è¡¨ç¤º $A\\ge x$ã€‚ï¼ˆå…¶å®ƒè¿ç®—ç¬¦ç±»ä¼¼ï¼‰\n$A\\le B$ï¼ˆ$A$ å’Œ $B$ éƒ½æ˜¯é›†åˆï¼‰è¡¨ç¤º $A$ $\\le$ $B$ ä¸­ä»»æ„ä¸€ä¸ªå…ƒç´ ã€‚ï¼ˆå…¶å®ƒè¿ç®—ç¬¦ç±»ä¼¼ï¼‰\nNumber ä¸€ä¸ªæ•° $x$ å¯ä»¥è¡¨ç¤ºä¸º $(X_L,X_R)$ çš„å½¢å¼ï¼Œå…¶ä¸­ $X_L$ è¡¨ç¤º $x$ çš„å·¦é›†ï¼Œ$X_R$ è¡¨ç¤º $x$ çš„å³é›†ã€‚å³ $x=(X_L,X_R)$ã€‚\n$x_L$ è¡¨ç¤º $X_L$ ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼Œ$x_R$ è¡¨ç¤º $X_R$ ä¸­çš„ä¸€ä¸ªå…ƒç´ ã€‚\nRule #1 $$x_L\\not\\ge x_R$$\nRule #2 $$x\\le y\\Leftrightarrow X_L\\not\\ge y\\land Y_R\\not\\le x$$\nTheorems T1 $$x\\le y\\land y\\le z\\Rightarrow x\\le z$$\nè¯æ˜ å‡è®¾è¯¥å‘½é¢˜ä¸æˆç«‹ï¼Œå³å­˜åœ¨ $x\\le y,y\\le z,x\\not\\le z$ã€‚\n$\\because x\\not\\le z$\n$\\therefore \\exists\\ x_L\\ge z\\lor\\exists\\ z_R\\le x$\nå½“ $x_L\\ge z$ æ—¶\nâ€‹\t$\\because x\\le y$\nâ€‹\t$\\therefore x_L\\not\\ge y$\nâ€‹\t$\\therefore y\\le z,z\\le x_L,y\\not\\le x_L$\nå½“ $z_R\\le x$ æ—¶\nâ€‹\t$\\because y\\le z$\nâ€‹\t$\\therefore z_R\\not\\le y$\nâ€‹\t$\\therefore z_R\\le x,x\\le y,z_R\\not\\le y$\nç»¼ä¸Šï¼Œæ— è®ºæ˜¯å“ªç§æƒ…å½¢ï¼Œéƒ½ä¼šå¾—åˆ°æ–°çš„ä¸€ç»„ä¸æ»¡è¶³åŸå‘½é¢˜çš„æ•°ï¼Œè€Œè¿™ç»„æ•°çš„å…¶ä¸­ä¸€ä¸ªæ•°ä¼šæ¯”åŸæ¥çš„ä¸‰ä¸ªæ•°ä¸­çš„ä¸€ä¸ªåˆ›é€ çš„æ—©ï¼Œæ–°çš„è¿™ç»„æ•°çš„å¦å¤–ä¸¤ä¸ªæ•°å°±æ˜¯åŸæ¥çš„ä¸‰ä¸ªæ•°ä¸­å¦å¤–ä¸¤ä¸ªæ•°ã€‚è¿™æ ·çš„è¯ï¼Œè‹¥å‡ºç°äº†ä¸€ç»„ä¸æ»¡è¶³åŸå‘½é¢˜çš„æ•°ï¼Œåˆ›é€ æ—¶é—´å°±ä¼šä¸æ–­å‘å‰è¿½æº¯ï¼Œè€Œè¿½æº¯æ˜¯æœ‰å°½å¤´çš„ï¼Œå› æ­¤è¿™ç§æƒ…å½¢ä¸å¯èƒ½å‡ºç°ã€‚\nè¯æ¯•ã€‚\n T2 $$X_L\\le x\\le X_R$$\nè¯æ˜  T3 $x\\le x$\nè¯æ˜  T4 $$x\\not\\le y\\Rightarrow y\\le x$$\nè¯æ˜  T5 $$x\u0026lt;y\\land y\\le z\\Rightarrow x\u0026lt;z$$\nè¯æ˜  T6 $$x\\le y\\land y\u0026lt;z\\Rightarrow x\u0026lt;z$$\nè¯æ˜  T7 $$Y_L\u0026lt;x\u0026lt;Y_R\\Rightarrow x\\equiv(x_L\\bigcup Y_L,x_R\\bigcup Y_R)$$\nè¯æ˜  ï¼ˆæœ¬æ–‡å’•å’•ä¸­â€¦â€¦ï¼‰\n","date":"2019-06-26T15:05:09+08:00","permalink":"https://ouuan.github.io/post/surreal-numbers-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/","tags":["åšå¼ˆè®º","è¶…ç°å®æ•°"],"title":"Surreal Numbers é˜…è¯»ç¬”è®°"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ CF\næ´›è°·\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€æ£µ $n$ ä¸ªç‚¹çš„æ ‘ï¼Œå¯¹æ¯ä¸ªç‚¹ï¼Œåˆ¤æ–­èƒ½å¦åˆ å»ä¸€æ¡è¾¹å†åŠ ä¸Šä¸€æ¡è¾¹ï¼Œä½¿å¾—è¿™ä¸ªç‚¹æˆä¸ºæ ‘çš„é‡å¿ƒã€‚ï¼ˆæ ‘çš„é‡å¿ƒï¼šå°†å…¶åˆ å»åæ¯ä¸ªè”é€šå—å¤§å°ä¸è¶…è¿‡ $\\frac n 2$ï¼‰\n$2\\le n\\le 4\\cdot10^5â€‹$\nç®€è¦åšæ³• up and downï¼Œå³ç”¨ä¸¤é dfsï¼Œç¬¬ä¸€éç”¨å­©å­æ›´æ–°çˆ¶äº²ï¼Œç¬¬äºŒéç”¨çˆ¶äº²æ›´æ–°å­©å­ï¼Œå¥½åƒä¹Ÿå«åšâ€œæ¢æ ¹ dpâ€ã€‚\nå¦‚ä½•ä¿®æ”¹ä¸€æ¡è¾¹ä½¿ä¸€ä¸ªç‚¹æˆä¸ºé‡å¿ƒï¼Ÿè¦æŠŠé‚£ä¸ªç‚¹åŸæ¥æœ€å¤§çš„å­æ ‘åˆ æ‰ä¸€æ¡è¾¹åˆ†æˆä¸è¶…è¿‡ $\\frac n 2$ çš„ä¸¤åŠï¼Œå†æŠŠåˆ‡ä¸‹æ¥é‚£ä¸ªå­æ ‘æ¥åˆ°è¿™ä¸ªç‚¹ä¸Šã€‚åˆ‡ä¸‹æ¥çš„é‚£ä¸ªå­æ ‘åªè¦ä¸è¶…è¿‡ $\\frac n 2$ å³å¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å¸Œæœ›åˆ‡ä¸‹æ¥ä¸€ä¸ªå°½å¯èƒ½å¤§çš„ä¸è¶…è¿‡ $\\frac n 2$ çš„å­æ ‘ï¼Œè¿™æ ·å‰©ä¸‹æ¥é‚£ä¸€åŠå°±å¯ä»¥å°½é‡å°ã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä»¥æ¯ä¸ªç‚¹ä¸ºæ ¹çš„æœ€å¤§å­æ ‘ï¼Œä»¥åŠæ¯ä¸ªå­æ ‘ï¼ˆæ³¨æ„æ˜¯æ— æ ¹æ ‘çš„æ¯ä¸ªå­æ ‘ï¼‰å¯ä»¥åˆ‡å‡ºæ¥çš„æœ€å¤§çš„ä¸è¶…è¿‡ $\\frac n 2$ çš„å­æ ‘ã€‚æ±‚è¿™ä¸ªå¯ä»¥ä½¿ç”¨ up and down è¿™ä¸ªæŠ€å·§ï¼Œè¯¦è§ä»£ç ã€‚\næ±‚å‡ºè¿™ä¸ªä¹‹åï¼Œå°±å¯ä»¥ $\\mathcal O(1)$ åˆ¤æ–­æ¯ä¸ªç‚¹æ˜¯å¦åˆæ³•äº†ã€‚\nup and down çš„è¿‡ç¨‹ä¸­æœ‰ä¸€ä¸ªå°æŠ€å·§ï¼šç¬¬äºŒé dfs ä¸­ç”¨çˆ¶äº²æ›´æ–°å­©å­æ—¶ï¼Œçˆ¶äº²çš„ downï¼ˆçˆ¶äº²çš„å­©å­ä»¬å¯¹çˆ¶äº²çš„è´¡çŒ®ï¼‰ä¸­è¦å‡å»å½“å‰èŠ‚ç‚¹çš„è´¡çŒ®å†æ›´æ–°å½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œæ‰€ä»¥éœ€è¦å­˜æœ€å¤§å€¼å’Œæ¬¡å¤§å€¼ï¼Œè¿™ä¸ªå¯ä»¥åˆ©ç”¨ä¸€ä¸ªå°æ•°æ®ç»“æ„æ¥ç®€åŒ–ä»£ç ï¼Œè¯¦è§ä»£ç ä¸­çš„ struct Nodeã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N = 400010; struct Node { int fi, se; void insert(int x) // å‘æœ€å¤§å€¼å’Œæ¬¡å¤§å€¼ä¸­æ’å…¥ä¸€ä¸ªå€¼ { if (x \u0026gt; fi) { se = fi; fi = x; } else if (x \u0026gt; se) se = x; } int get(int x) // å¾—åˆ°é™¤äº† x å¤–çš„æœ€å¤§å€¼ { if (x == fi) return se; else return fi; } } dn[N]; int calc(int u); void dfs1(int u); void dfs2(int u); void add(int u, int v); int head[N], nxt[N \u0026lt;\u0026lt; 1], to[N \u0026lt;\u0026lt; 1], cnt; int n, siz[N], fa[N], son[N], up[N]; int main() { int i, u, v, mx, sz; scanf(\u0026quot;%d\u0026quot;, \u0026amp;n); for (i = 1; i \u0026lt; n; ++i) { scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;u, \u0026amp;v); add(u, v); add(v, u); } dfs1(1); dfs2(1); for (u = 1; u \u0026lt;= n; ++u) { v = son[u]; if (v == fa[u]) { sz = n - siz[u]; mx = up[u]; // ä¹Ÿå¯ä»¥ max(dn[v].get(calc(u)), up[v]) } else { sz = siz[v]; mx = dn[v].fi; // ä¹Ÿå¯ä»¥ calc(v) } printf(\u0026quot;%d \u0026quot;, sz - mx \u0026lt;= n / 2); } return 0; } void dfs1(int u) { int i, v; siz[u] = 1; for (i = head[u]; i; i = nxt[i]) { v = to[i]; if (v == fa[u]) continue; fa[v] = u; dfs1(v); siz[u] += siz[v]; dn[u].insert(calc(v)); } } void dfs2(int u) { int i, v; if (n - siz[u] \u0026lt;= n / 2) up[u] = n - siz[u]; else up[u] = max(up[fa[u]], dn[fa[u]].get(calc(u))); for (i = head[u]; i; i = nxt[i]) { v = to[i]; if (v == fa[u]) continue; dfs2(v); if (siz[v] \u0026gt; siz[son[u]]) son[u] = v; // son æ˜¯ä¸€ä¸ªèŠ‚ç‚¹çš„æœ€å¤§å­æ ‘ } if (n - siz[u] \u0026gt; siz[son[u]]) son[u] = fa[u]; } int calc(int u) // è®¡ç®—å­©å­å¯¹çˆ¶äº²çš„è´¡çŒ® { return siz[u] \u0026lt;= n / 2 ? siz[u] : dn[u].fi; } void add(int u, int v) { nxt[++cnt] = head[u]; head[u] = cnt; to[cnt] = v; } ","date":"2019-06-23T21:34:21+08:00","permalink":"https://ouuan.github.io/post/cf708c-centroids%E6%A0%91%E5%BD%A2dpup-and-down/","tags":["æ ‘å½¢dp","up and down"],"title":"CF708C Centroidsï¼ˆæ ‘å½¢dpï¼Œup and downï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\ndarkbzoj\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€å¼ å¸¦è¾¹æƒçš„æ— å‘å›¾ï¼Œæ±‚ $1$ åˆ° $n$ çš„è¾¹æƒå¼‚æˆ–å’Œæœ€å¤§çš„è·¯å¾„ã€‚\nç‚¹æ•° $5\\times 10^4$ï¼Œè¾¹æ•° $10^5$ã€‚\nç®€è¦åšæ³• æˆ‘ä»¬å…ˆéšä¾¿æ‰¾ä¸€æ¡ä» $1$ åˆ° $n$ çš„é“¾ï¼Œç„¶åçœ‹èƒ½å¦‚ä½•ä¿®æ”¹å®ƒã€‚\nå¦‚æœæˆ‘ä»¬ä¸èµ°è¿™æ¡é“¾ï¼Œä»æŸä¸ªä½ç½®åˆ†å‰å‡ºå»ï¼Œä¸ºäº†å›åˆ°è¿™æ¡é“¾ä¸Šï¼Œæˆ‘ä»¬ä¸€å®šæ˜¯ä»æŸæ¡å²”è·¯èµ°å‡ºå»ï¼Œèµ°ä¸€ä¸ªç¯ï¼Œå†æ²¿ç€è¿™æ¡å²”è·¯èµ°å›æ¥ã€‚ç”±äºè¾¹æƒå¼‚æˆ–ï¼Œè¿™æ¡å²”è·¯å°±ä¸ä¼šäº§ç”Ÿè´¡çŒ®ã€‚å› æ­¤ï¼Œæœ€ç»ˆç­”æ¡ˆå¯ä»¥è¡¨ç¤ºä¸ºä¸€æ¡é“¾ + è‹¥å¹²ä¸ªç¯çš„å¼‚æˆ–å’Œã€‚è¿™æ¡é“¾æ˜¯å¯ä»¥éšä¾¿é€‰çš„ï¼Œå› ä¸ºä¸€æ¡é“¾å¯ä»¥å¼‚æˆ–è‹¥å¹²ä¸ªç¯å¾—åˆ°å¦ä¸€æ¡é“¾ã€‚\nç„¶è€Œï¼Œç¯å¯èƒ½æœ‰å¾ˆå¤šï¼Œäº‹å®ä¸Šæˆ‘ä»¬å¯ä»¥å¾—åˆ° dfs æ ‘ï¼Œåªéœ€è€ƒè™‘é‚£äº›ä»…åŒ…å«ä¸€æ¡è¿”ç¥–è¾¹çš„ç¯ï¼Œå…¶å®ƒç¯éƒ½å¯ä»¥ç”±è‹¥å¹²ä¸ªè¿™æ ·çš„ç¯å¼‚æˆ–å¾—åˆ°ã€‚ä»£ç å®ç°éå¸¸ç®€å•ï¼Œå…·ä½“å¯ä»¥çœ‹å‚è€ƒä»£ç ã€‚\næ‰¾åˆ°è¿™äº›ç¯ä¹‹åç”¨çº¿æ€§åŸºå°±å¯ä»¥æ±‚å‡ºç­”æ¡ˆäº†ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; using namespace std; typedef long long ll; ll read() { ll out = 0; char c; while (!isdigit(c = getchar())); for (; isdigit(c); c = getchar()) out = out * 10 + c - '0'; return out; } const int N = 50010; const int M = 100010; void add(int u, int v, ll w); void dfs(int u, int fa); void insert(ll x); int n, m, head[N], nxt[M \u0026lt;\u0026lt; 1], to[M \u0026lt;\u0026lt; 1], cnt; ll edge[M \u0026lt;\u0026lt; 1], dis[N], p[70], ans; bool vis[N]; int main() { int i, u, v; ll w; n = read(); m = read(); for (i = 0; i \u0026lt; m; ++i) { u = read(); v = read(); w = read(); add(u, v, w); add(v, u, w); } dfs(1, 0); ans = dis[n]; for (i = 59; ~i; --i) { if (!((ans \u0026gt;\u0026gt; i) \u0026amp; 1)) { ans ^= p[i]; } } cout \u0026lt;\u0026lt; ans; return 0; } void insert(ll x) { for (int i = 59; ~i; --i) { if ((x \u0026gt;\u0026gt; i) \u0026amp; 1) { if (p[i]) x ^= p[i]; else { p[i] = x; break; } } } } void dfs(int u, int fa) { ll w; int i, v; vis[u] = true; for (i = head[u]; i; i = nxt[i]) { v = to[i]; w = edge[i]; if (v == fa) continue; if (vis[v]) insert(dis[u] ^ dis[v] ^ w); else { dis[v] = dis[u] ^ w; dfs(v, u); } } } void add(int u, int v, ll w) { nxt[++cnt] = head[u]; head[u] = cnt; to[cnt] = v; edge[cnt] = w; } ","date":"2019-06-16T20:46:02+08:00","permalink":"https://ouuan.github.io/post/bzoj2115-wc2011-%E6%9C%80%E5%A4%A7xor%E5%92%8C%E8%B7%AF%E5%BE%84%E7%BA%BF%E6%80%A7%E5%9F%BA%E5%9B%BE%E8%AE%BA/","tags":["çº¿æ€§åŸº","å›¾è®º"],"title":"BZOJ2115 [WC2011]æœ€å¤§XORå’Œè·¯å¾„ï¼ˆçº¿æ€§åŸºï¼Œå›¾è®ºï¼‰"},{"categories":["å‡ºé¢˜"],"contents":"é¦–å…ˆï¼Œä½ éœ€è¦æ„è¯†åˆ°ï¼Œè‡ªå·±å‡ºçš„é¢˜æ˜¯è¦ ç»™åˆ«äººåš çš„ã€‚\nè¯·ä¸è¦è¯´è¿™æ˜¯ä¸€å¥åºŸè¯ã€‚è¿™æ˜¯åšä¸€åå¥½çš„å‡ºé¢˜äººå¿…é¡»è¦æ˜ç™½çš„ã€‚\nå‡ºé¢˜æ¯”èµ·å±•ç¤ºè‡ªå·±ï¼Œæ›´æ˜¯æœåŠ¡ä»–äººã€‚\nUPD: æœ¬æ–‡å·²äº pr #1672 ç»ä¼˜åŒ–ã€æ‰©å……ååˆå¹¶è‡³ OI-wikiï¼Œæ¨èåœ¨ OI-wiki ä¸Šé˜…è¯»ã€‚\né¢˜ç›®å†…å®¹ å…³äºåŸé¢˜ åŸé¢˜å¤§è‡´å¯åˆ†ä¸ºå®Œå…¨ä¸€è‡´ã€å‡ ä¹ä¸€è‡´å’Œåšæ³•ä¸€è‡´ä¸‰ç§ã€‚\n å®Œå…¨ä¸€è‡´ï¼šä½¿ç”¨ä¸€é¢˜çš„ AC ä»£ç å¯ä»¥ AC å¦ä¸€é¢˜ã€‚ å‡ ä¹ä¸€è‡´ï¼šç”±ä¸€é¢˜çš„ AC ä»£ç æ”¹åŠ¨è‡³å¦ä¸€é¢˜çš„ AC ä»£ç å¯ä»¥ç”±ä¸€ä¸ªä¸ä¼šè¯¥é¢˜çš„äººå®Œæˆã€‚ åšæ³•ä¸€è‡´ï¼šæ ¸å¿ƒæ€è·¯ã€åšæ³•ä¸€è‡´ï¼Œä½†ä»£ç å®ç°ä¸Šã€ä¸é‚£ä¹ˆå…³é”®çš„ç»†èŠ‚ä¸Šæœ‰å·®å¼‚ã€‚  è¿™ä¸‰ç§åŸé¢˜è‡ªä¸‹è€Œä¸Šä¸ºåŒ…å«å…³ç³»ã€‚\nä»¥ä¸‹æƒ…å†µä¸åº”å‡ºç°ï¼š\n åœ¨æ˜çŸ¥æœ‰â€œå‡ ä¹ä¸€è‡´â€çš„åŸé¢˜çš„æƒ…å†µä¸‹å‡ºåŸé¢˜ã€‚ ç”±äºæœªä½¿ç”¨æœç´¢å¼•æ“æŸ¥æ‰¾å¯¼è‡´è‡ªå·±ä¸æ¸…æ¥šæœ‰åŸé¢˜ï¼Œä»è€Œå‡ºäº†â€œå‡ ä¹ä¸€è‡´â€çš„åŸé¢˜ã€‚ åœ¨â€œåšæ³•ä¸€è‡´â€çš„åŸé¢˜å¹¿ä¸ºäººçŸ¥ï¼ˆå¦‚ï¼šNOIpã€NOI åŸé¢˜ï¼‰æ—¶å‡ºåŸé¢˜ã€‚ åœ¨å¸¦æœ‰é€‰æ‹”æ€§çš„è€ƒè¯•çš„éé€åˆ†é¢˜ä¸­å‡ºç°â€œåšæ³•ä¸€è‡´â€çš„åŸé¢˜ã€‚  ä»¥ä¸‹æƒ…å†µæœ€å¥½ä¸è¦å‡ºç°ï¼š\n åœ¨æ˜çŸ¥æœ‰è‡³å°‘ä¸ºâ€œåšæ³•ä¸€è‡´â€çš„åŸé¢˜çš„æƒ…å†µä¸‹å‡ºåŸé¢˜ã€‚ ç”±äºæœªä½¿ç”¨æœç´¢å¼•æ“æŸ¥æ‰¾å¯¼è‡´è‡ªå·±ä¸æ¸…æ¥šæœ‰åŸé¢˜ï¼Œä»è€Œå‡ºäº†â€œåšæ³•ä¸€è‡´â€çš„åŸé¢˜ã€‚ åœ¨ä»»ä½•æƒ…å†µä¸‹å‡ºâ€œå‡ ä¹ä¸€è‡´â€çš„åŸé¢˜ã€‚  å¯ä»¥æ”¾å®½è¦æ±‚çš„ä¾‹å¤–æƒ…å†µï¼š\n æ ¡å†…æ¨¡æ‹Ÿèµ›ã€‚ ä»¥ä¸“é¢˜è®­ç»ƒä¸ºç›®çš„çš„æ¨¡æ‹Ÿèµ›ã€‚ éš¾åº¦è¾ƒä½çš„æ¯”èµ›ï¼Œæˆ–æ˜¯å®šä½ä¸ºé€åˆ†é¢˜çš„é¢˜ç›®ã€‚  å…³äºæ¯’ç˜¤é¢˜ â€œæ¯’ç˜¤é¢˜â€æ˜¯ä¸€ä¸ªéå¸¸æ¨¡ç³Šè€Œä¸»è§‚çš„è§‚å¿µï¼Œæˆ‘åœ¨è¿™åªæ˜¯å¼•ç”¨ä¸€äº›å‰äººå…³äºæ­¤çš„æ¢è®¨ï¼ŒåŠ ä»¥è‡ªå·±çš„ä¸€äº›ç†è§£ã€‚è¿™ä¸ªè¯é¢˜æ˜¯éå¸¸å¼€æ”¾çš„ï¼Œæ¬¢è¿å¤§å®¶æ¥å‘è¡¨è‡ªå·±çš„è§‚ç‚¹ã€‚\n ä¸€é“å¥½é¢˜ä¸åº”è¯¥æ˜¯ä¸¤é“é¢˜æ‹¼åœ¨ä¸€èµ·ï¼Œä¸€é“å¥½é¢˜ä¼šæœ‰è‡ªå·±çš„idea â€”â€” è€Œå®ƒåº”è¯¥ä¸åŠ è¿‡å¤šåŒ…è£…åœ°çªå‡ºè¿™ä¸ªideaã€‚\nä¸€é“å¥½é¢˜åº”è¯¥æ–°é¢–ã€‚çœŸæ­£çš„å¥½é¢˜ï¼Œåº”è¯¥æ˜¯èƒ½è®©äººè„‘æ´å‡ºæ–°çš„å¥½é¢˜çš„å¥½é¢˜ã€‚\nâ€”â€” vfkã€ŠUOJç²¾ç¥ä¹‹æºæµã€‹\n ä¾‹å­ï¼šã€XR-1ã€‘æŸ¯å—å®¶æ—ï¼Œåšæ³•çš„å‰åä¸¤éƒ¨åˆ†å®Œå…¨å‰²è£‚ï¼Œå‰åŠéƒ¨åˆ†ä¸ºã€æ¨¡æ¿ã€‘æ ‘ä¸Šåç¼€æ’åºï¼ŒååŠéƒ¨åˆ†æ˜¯ç»å…¸æ ‘ä¸Šé—®é¢˜ã€‚\n ä¸€ç±»OIé¢˜ä»¥æ•°å­¦ä¸ºä¸»ï¼Œæ— è®ºæ˜¯é¢˜ç›®æè¿°è¿˜æ˜¯åšæ³•éƒ½æ˜¯æ•°å­¦é¢˜çš„ç‰¹å¾ï¼Œå¹¶ä¸”è§£æ³•ä¸­ä¸å«ç®—æ³•ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼Œè¿™ç±»OIé¢˜ç›®ç»Ÿç§°ä¸ºçº¯æ•°å­¦é¢˜ã€‚\nâ€”â€” ç‹å¤©æ‡¿ã€Šè®ºåé¢˜çš„å±å®³ã€‹\n ç»å…¸ä¾‹å­ï¼šNOIP2017 å°å‡¯çš„ç–‘æƒ‘\næˆ‘è‡ªå·±çš„æ ‡å‡†æ˜¯ï¼šå°½é‡ä¸è¦å‡ºæ•°å­¦å¡«ç©ºé¢˜ã€‚ä½†è¿™æ ·çš„çº¯æ•°å­¦é¢˜ä¹Ÿä¸æ˜¯å®Œå…¨ä¸å¯å–ï¼Œæœ‰æ—¶çº¯ç²¹åœ°è€ƒå¯Ÿä¸€äº› OI å¸¸ç”¨æ•°å­¦çŸ¥è¯†ä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„ã€‚\n ä¸€éƒ¨åˆ†åé¢˜ä¸­ç‰µæ¶‰åˆ°äº†å¤§å­¦ç‰©ç†çš„å†…å®¹ï¼Œå¯¼è‡´é€‰æ‰‹åœ¨é¢å¯¹è¿™äº›ä»æœªæ¥è§¦è¿‡çš„ç‰©ç†çŸ¥è¯†ç‚¹æ—¶å˜å¾—ä¸çŸ¥æ‰€æªï¼Œé€ æˆäº†çŸ¥è¯†ä¸Šçš„éš”è†œã€‚\nâ€”â€” ç‹å¤©æ‡¿ã€Šè®ºåé¢˜çš„å±å®³ã€‹\n ç»å…¸ä¾‹å­ï¼šã€æ¸…åé›†è®­2015ã€‘å¤šè¾¹å½¢ä¸‹æµ·\nä¸æ­¢æ˜¯ç‰©ç†ï¼ŒOI é¢˜ç›®ä¸­ä¸åº”è¿‡å¤šæ¶‰åŠåˆ°å…¶å®ƒå­¦ç§‘çš„çŸ¥è¯†ï¼Œå¦‚æœæ¶‰åŠåº”å½“ç»™äºˆè¯¦ç»†çš„è§£é‡Šï¼Œä¸åº”ä½¿å…¶å®ƒå­¦ç§‘çš„çŸ¥è¯†ä½œä¸ºè§£é¢˜çš„é‡å¤§éšœç¢ã€‚\n ä¸€é“å¥½é¢˜æ— è®ºéš¾åº¦å¦‚ä½•ï¼Œéƒ½åº”è¯¥å…·æœ‰è‡ªå·±çš„æ€ç»´éš¾åº¦ï¼Œéœ€è¦é€‰æ‰‹å»æ€è€ƒå¹¶å‘ç°ä¸€äº›æ€§è´¨ã€‚\nä¸€é“å¥½é¢˜çš„ä»£ç å¯ä»¥é•¿ï¼Œä½†ä¸€å®šä¸æ˜¯é€šè¿‡å¼ºè¡ŒåµŒå¥—æˆ–è€…å¢åŠ æ¡ä»¶è€Œè®©ä»£ç å˜é•¿ï¼Œè€Œæ˜¯é•¿å¾—è‡ªç„¶ï¼Œè®©äººæ„Ÿè§‰è¿™ä¸ªé¢˜çš„ä»£ç å°±åº”è¯¥æ˜¯è¿™ä¹ˆé•¿ã€‚\nâ€”â€” ç‹å¤©æ‡¿ã€Šè®ºåé¢˜çš„å±å®³ã€‹\n ç»å…¸ä¾‹å­ï¼š[SDOI2010]çŒªå›½æ€ï¼Œã€é›†è®­é˜Ÿäº’æµ‹2015ã€‘æœªæ¥ç¨‹åºÂ·æ”¹\nåœ¨ä¸€èˆ¬çš„ OI æ¯”èµ›ä¸­ï¼Œæ€ç»´éš¾åº¦åº”å ä¸»è¦éƒ¨åˆ†ã€‚å½“ç„¶ï¼Œå¦‚ THUWC / THUSC çš„ Day 2+ é‚£æ ·çš„å·¥ç¨‹é¢˜ä¹Ÿæœ‰å…¶å­˜åœ¨çš„é“ç† â€”â€” æ¯•ç«Ÿä½“éªŒè¥çš„ç›®çš„é™¤äº†è€ƒå¯Ÿé€‰æ‰‹çš„ç®—æ³•è®¾è®¡èƒ½åŠ›ï¼Œè¿˜æœ‰å’Œå¤§å­¦å­¦ä¹ å¯¹æ¥çš„å·¥ç¨‹ä»£ç ä»¥åŠæ–‡æ¡£å­¦ä¹ èƒ½åŠ›ã€‚ä½†åœ¨ä¸€èˆ¬çš„ OI æ¯”èµ›ä¸­ï¼Œè€ƒå¯Ÿæ›´å¤šçš„åº”å½“è¿˜æ˜¯ç®—æ³•è®¾è®¡ä¸æ€ç»´èƒ½åŠ›ã€‚\né¢˜é¢ é¢˜ç›®èƒŒæ™¯ é¢˜ç›®èƒŒæ™¯æœ€å¥½å°½é‡ç®€çŸ­ã€‚\nåœ¨é¢˜ç›®èƒŒæ™¯è¾ƒé•¿æ—¶ï¼Œåº”å½“ä¸é¢˜ç›®æè¿°åˆ†å¼€ã€‚\néœ€è¦ç»å¯¹é¿å…çš„æƒ…å†µï¼šé¢˜ç›®èƒŒæ™¯ä¸¥é‡å½±å“é¢˜æ„çš„ç†è§£ã€‚\nå¿…è¦æ—¶ï¼Œå¯ä»¥æä¾›ä¸èƒŒæ™¯ç»“åˆçš„é¢˜ç›®æè¿°ä¸ç®€æ´çš„é¢˜ç›®æè¿°ä¸¤ä¸ªç‰ˆæœ¬ã€‚\né¢˜ç›®æè¿° ç®€è€Œè¨€ä¹‹ï¼Œé¢˜ç›®æè¿°éœ€è¦æ¸…æ™°æ˜“æ‡‚ã€‚\né¢˜é¢ä¸­çš„æ¯ä¸ªå¯èƒ½ä¸è¢«ç†è§£çš„å®šä¹‰éƒ½åº”å¾—åˆ°è§£é‡Šï¼Œä¸åº”å‡­ç©ºå†’å‡ºæœªåŠ å®šä¹‰çš„æ¦‚å¿µã€‚ä¾‹å¦‚ï¼šåœ¨ CF1172D Nauuo and Portals ä¸­ï¼Œä½ å¿…é¡»åœ¨é¢˜é¢ä¸­è§£é‡Šä»€ä¹ˆæ˜¯â€œä¼ é€é—¨â€ã€‚\né¢˜é¢ä¸­æ¶‰åŠåˆ°çš„æ¯ä¸ªæ¦‚å¿µåº”å½“ä½¿ç”¨å•ä¸€çš„è¯æ±‡æ¥æè¿°ã€‚ä¾‹å¦‚ï¼šä¸åº”ä¸€ä¼šå„¿è¯´â€œè´¹ç”¨â€ï¼Œä¸€ä¼šå„¿è¯´â€œä»£ä»·â€œã€‚\nä¸åº”ä¸åŠ è¯´æ˜åœ°ä½¿ç”¨ä¸åŸä¹‰ã€å¸¸è§ä¹‰ä¸åŒçš„è¯æ±‡ã€‚ä¾‹å¦‚ï¼šä¸åº”ä¸åŠ è¯´æ˜åœ°ç”¨â€œè·¯å¾„â€ä»£æŒ‡ä¸€æ¡è¾¹ã€‚\nä½ éœ€è¦ä¿è¯ä½ çš„é¢˜é¢ä¸ä¼šè‡ªç›¸çŸ›ç›¾ã€‚ä¾‹å¦‚ï¼šåœ¨ CF 1173A Nauuo and Votes ä¸­ï¼Œæ²¡æœ‰æŠŠ \u0026ldquo;?\u0026rdquo; ä½œä¸ºä¸€ç§ \u0026ldquo;result\u0026rdquo;ï¼Œæ˜¯å› ä¸º \u0026ldquo;?\u0026rdquo; çš„å«ä¹‰æ˜¯ \u0026ldquo;there are more than one possible results\u0026rdquo;ã€‚\nä½ éœ€è¦ä¿è¯ä½ çš„é¢˜é¢ä¸èƒ½è¢«é”™è¯¯ç†è§£è€Œè‡ªåœ†å…¶è¯´ï¼Œå³ä½¿è¿™ç§ç†è§£æ˜¯åå¸¸è¯†ã€æ²¡æœ‰äººä¼šè¿™ä¹ˆå»æƒ³çš„ã€‚ä¾‹å¦‚ï¼šåœ¨ CF1172D Nauuo and Portals ä¸­ï¼Œä¹‹æ‰€ä»¥è¦ç¹çåœ°å®šä¹‰ \u0026ldquo;walk into\u0026rdquo; å¹¶ä¸ \u0026ldquo;teleport\u0026rdquo; åŒºåˆ†ï¼Œæ˜¯ä¸ºäº†é˜²æ­¢è¿™ç§ç†è§£ï¼šé€šè¿‡ä¼ é€é—¨å¯ä»¥åˆ°å¦ä¸€ä¸ªä¼ é€é—¨ï¼Œè€Œåˆ°äº†ä¼ é€é—¨ä¼šä¼ é€ï¼Œå› æ­¤ä¼šåå¤æ¨ªè·³ã€‚\né¡ºç€è¯»é¢˜ç›®æè¿°åº”å½“èƒ½çœ‹æ‡‚æ¯ä¸€å¥è¯ï¼Œå¹¶ç†è§£é¢˜ç›®çš„ä»»åŠ¡ä¸è¦æ±‚ã€‚è‡³å°‘åœ¨ç´§æ¥ç€çš„ä¸‹ä¸€æ®µè¯ä¸­ç–‘æƒ‘èƒ½å¤Ÿå¾—åˆ°è§£é‡Šï¼Œè€Œä¸æ˜¯éœ€è¦åœ¨è‹¥å¹²æ®µåæ‰èƒ½å¾—åˆ°è§£é‡Šï¼Œæˆ–è€…è¦çœ‹äº†è¾“å…¥è¾“å‡ºæ ¼å¼æ‰èƒ½æ˜ç™½é¢˜æ„ï¼Œç”šè‡³éœ€è¦æ ¹æ®æ ·ä¾‹æ¥çŒœé¢˜æ„ã€‚ä¾‹å¦‚ï¼šåœ¨ ã€ŒGuOJ Round #1ã€çªéœ²è¯ºçš„å†°é›ªå®´ä¼š ä¸­ï¼Œåœ¨è¾“å‡ºæ ¼å¼æ‰ç¬¬ä¸€æ¬¡å‡ºç°äº†é¢˜ç›®çš„ç›®æ ‡â€œé›¾ä¹‹æ¹–æœ€ç»ˆèƒ½æ¥æ”¶åˆ°çš„æœ€å¤§æ°´é‡â€ï¼Œå†åŠ ä¸Šâ€œçµæ¢¦å½“ç„¶èƒ½å¾ˆå¿«ç®—å‡ºæ¥æ¸…ç†å®Œå…¨éƒ¨å°æºªçš„æ€»è´¹ç”¨æ˜¯å¤šå°‘â€è¿™å¥å¸¦æœ‰è¯¯è§£æ€§è´¨çš„è¯ï¼Œæ›´å®¹æ˜“ä½¿äººè¯»é”™é¢˜æ„ï¼Œè¿™æ˜¯ä¸å¯å–çš„ï¼Œåº”å½“åœ¨é¢˜ç›®æè¿°ä¸­å°±å¯¹é¢˜ç›®çš„ç›®æ ‡è¿›è¡Œè¯´æ˜ã€‚ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­è¿˜å­˜åœ¨é¢˜ç›®èƒŒæ™¯ä¸¥é‡å½±å“é¢˜æ„ç†è§£çš„é—®é¢˜ã€‚ï¼‰\nè¾“å…¥è¾“å‡ºæ ¼å¼ è¾“å…¥è¾“å‡ºæ ¼å¼æ¸…æ™°å®Œæ•´å³å¯ï¼Œæ²¡æœ‰æ­»æ¿çš„è¦æ±‚ï¼Œä¸ªäººå»ºè®®å‚ç…§ CF çš„é¢˜ç›®æ¥å†™è¾“å…¥è¾“å‡ºæ ¼å¼ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ cf å‡ºé¢˜äººé¡»çŸ¥ã€‚\néœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè¾“å‡ºä¸­å«æœ‰å°æ•°ï¼Œè¯·å°½é‡ä½¿ç”¨ SPJã€‚å¦‚æœæ— æ³•ä½¿ç”¨ SPJï¼Œè¯·ä¿è¯å¯¹ç²¾åº¦çš„è¦æ±‚æ˜¯æœ‰é™çš„ã€‚\nå¦‚æœæ²¡æœ‰ä¿è¯ï¼Œå¯¹ç²¾åº¦çš„è¦æ±‚å¯èƒ½æ˜¯æ— é™çš„ã€‚ä¾‹å¦‚ï¼šè¦æ±‚ä¿ç•™ä¸‰ä½å°æ•°ï¼Œå®é™…ç­”æ¡ˆä¸º $0.0015$ï¼Œæ­¤æ—¶åªè¦æœ‰ä»»æ„å¤§å°çš„è¯¯å·®å¯¼è‡´è®¡ç®—å‡ºçš„ç­”æ¡ˆå°äº $0.0015$ï¼Œå³ä½¿è®¡ç®—å‡ºçš„ç­”æ¡ˆæ˜¯ $0.0014999999999\\cdots$ ä¹Ÿä¼šè¾“å‡ºé”™è¯¯çš„ç­”æ¡ˆã€‚\nä¿è¯å¯¹ç²¾åº¦è¦æ±‚æœ‰é™çš„ä¾‹å­ï¼šè¯·è¾“å‡ºç­”æ¡ˆå››èˆäº”å…¥åä¿ç•™å°æ•°ç‚¹åä¸‰ä½çš„ç»“æœã€‚ä»¤æ ‡å‡†ç­”æ¡ˆä¸º $ans$ï¼Œæ•°æ®ä¿è¯å¯¹äºä»»æ„æ»¡è¶³ $\\frac{|x-ans|}{\\max(1,ans)}\u0026lt;10^{-9}$ çš„ $x$ï¼Œå››èˆäº”å…¥åç»“æœä¸ $ans$ å››èˆäº”å…¥åç›¸åŒã€‚\nå¯ä»¥å‚è€ƒçš„ä¸€äº›å¥å­ï¼š\nè¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸‰ä¸ªæ­£æ•´æ•° $n$, $m$, $k$ ($1\\le n,m\\le 2\\cdot 10^5$, $1\\le k\\le 100$) â€” $n$ è¡¨ç¤ºæ•°åˆ—çš„é•¿åº¦ï¼Œ$m$ è¡¨ç¤ºæ“ä½œä¸ªæ•°ï¼Œ$k$ çš„æ„ä¹‰è§é¢˜ç›®æè¿°ã€‚  è¾“å…¥çš„ç¬¬äºŒè¡ŒåŒ…å« $n$ ä¸ªéè´Ÿæ•´æ•° $a_1,a_2,\\ldots,a_n$ ($1\\le a_i\\le 10^9$) â€” é¢˜ç›®ç»™å‡ºçš„æ•°åˆ—ã€‚  æ¥ä¸‹æ¥çš„ $m$ è¡Œä¸­çš„ç¬¬ $i$ è¡ŒåŒ…å«ä¸¤ä¸ªæ­£æ•´æ•° $l_i$ å’Œ $r_i$ ($1\\le l_i\\le r_i\\le n$)ï¼Œè¡¨ç¤ºç¬¬ $i$ æ¬¡æ“ä½œåœ¨åŒºé—´ $[l_i,r_i]$ ä¸Šè¿›è¡Œã€‚  æ¥ä¸‹æ¥çš„ $n-1$ è¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸¤ä¸ªæ­£æ•´æ•° $u$ å’Œ $v$ ($1\\le u,v\\le n$)ï¼Œè¡¨ç¤º $u$ å’Œ $v$ ä¹‹é—´ç”±ä¸€æ¡è¾¹ç›¸è¿ã€‚ æ•°æ®ä¿è¯ç»™å‡ºçš„è¾¹èƒ½æ„æˆä¸€æ£µæ ‘ã€‚  è¾“å…¥çš„å”¯ä¸€ä¸€è¡ŒåŒ…å«ä¸€ä¸ªç”±å°å†™è‹±æ–‡å­—æ¯æ„æˆçš„éç©ºå­—ç¬¦ä¸²ï¼Œå…¶é•¿åº¦ä¸è¶…è¿‡ $10^6$ã€‚  è¾“å…¥çš„ç¬¬äºŒè¡ŒåŒ…å«ä¸€ä¸ªå°æ•°ç‚¹åä¸è¶…è¿‡ä¸‰ä½çš„å®æ•° $x$ ($-10^6\\le x\\le 10^6$)ï¼Œæ„ä¹‰è§é¢˜ç›®æè¿°ã€‚  è¾“å‡ºåŒ…å«ä¸€ä¸ªå®æ•°ï¼Œå½“ä½ çš„è¾“å‡ºä¸æ ‡å‡†ç­”æ¡ˆä¹‹é—´çš„ç»å¯¹è¯¯å·®æˆ–ç›¸å¯¹è¯¯å·®å°äº $10^{-6}$ æ—¶è§†ä½œæ­£ç¡®ã€‚  è¾“å‡ºçš„ç¬¬äºŒè¡ŒåŒ…å« $n$ ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºä½ æ„é€ çš„ä¸€ç»„æ–¹æ¡ˆ â€” å…¶ä¸­ç¬¬ $i$ ä¸ªæ•°è¡¨ç¤ºä½ æ‰“å‡ºçš„ç¬¬ $i$ å¼ ç‰Œçš„ç¼–å·ã€‚ å¦‚æœæœ‰å¤šç»„åˆæ³•çš„ç­”æ¡ˆï¼Œå¯ä»¥ä»»æ„è¾“å‡ºå…¶ä¸­ä¸€ç»„ã€‚  æ•°æ®èŒƒå›´ æŒ‰ç…§ CF çš„è¦æ±‚ï¼Œæ•°æ®èŒƒå›´è¦å†™åœ¨è¾“å…¥æ ¼å¼é‡Œï¼Œä½†åœ¨å›½å†…ï¼Œæ•°æ®èŒƒå›´å¾€å¾€æ˜¯å†™åœ¨é¢˜ç›®çš„æœ€åçš„ã€‚\næ•°æ®èŒƒå›´ä¸­æœ€å®¹æ˜“çŠ¯çš„é”™è¯¯å°±æ˜¯ä¸å®Œæ•´ã€‚è¾“å…¥ä¸­çš„æ¯ä¸€ä¸ªæ•°ã€æ¯ä¸€ä¸ªå­—ç¬¦ä¸²éƒ½åº”è¯¥æœ‰æ¸…æ™°çš„ç•Œå®šã€‚åœ¨ä¸Šæ–‡æ‰€ç»™å‡ºçš„è¾“å…¥è¾“å‡ºæ ¼å¼ç¤ºä¾‹ä¸­å°±æœ‰ä¸€äº›æ•°æ®èŒƒå›´çš„æ­£ç¡®å†™æ³•ã€‚\næ•°æ®èŒƒå›´çš„å¸¸è§é—æ¼ï¼š\n â€œæ•´æ•°â€ä¸­çš„â€œæ•´â€ã€‚ é¢˜é¢ä¸­åªè¯´äº†æ˜¯â€œæ•´æ•°â€æ²¡è¯´æ˜¯â€œæ­£æ•´æ•°â€ï¼Œå¹¶ä¸”æ•°æ®èŒƒå›´ä¸­åªæœ‰ä¸Šé™æ²¡æœ‰ä¸‹é™ã€‚ å­—ç¬¦ä¸²æ²¡è¯´å­—ç¬¦é›†ã€‚ å®æ•°æ²¡è¯´å°æ•°ç‚¹åä½æ•°ã€‚ æŸäº›å˜é‡æ²¡æœ‰ç»™èŒƒå›´ã€‚  ä½ éœ€è¦ä¿è¯æ ‡ç¨‹å¯ä»¥é€šè¿‡æ»¡è¶³é¢˜é¢æ‰€è¿°æ•°æ®èŒƒå›´çš„ä»»ä½•ä¸€ç»„æ•°æ®ã€‚\næ ·ä¾‹ æ ·ä¾‹åº”å½“æœ‰ä¸€å®šçš„å¼ºåº¦ï¼Œèƒ½å¤ŸæŸ¥å‡ºä¸€äº›ç®€å•çš„é”™è¯¯ã€‚è¯»é”™é¢˜æ„çš„äººåº”å½“èƒ½å¤Ÿé€šè¿‡æ ·ä¾‹å‘ç°è‡ªå·±è¯»é”™äº†é¢˜æ„ã€‚\næœ‰å¤šç§æ“ä½œçš„é¢˜ï¼Œæ¯ç§æ“ä½œéƒ½åº”åœ¨æ ·ä¾‹ä¸­å‡ºç°ã€‚\næœ‰å¤šç§è¾“å‡ºçš„é¢˜ï¼ˆå¦‚ CF 1173A Nauuo and Votesï¼‰ï¼Œæ¯ç§è¾“å‡ºéƒ½åº”åœ¨æ ·ä¾‹ä¸­å‡ºç°ã€‚ä¾‹å¤–ï¼šå®é™…ä¸Šä¸å¯èƒ½æ— è§£ï¼Œä½†è¦æ±‚åˆ¤æ–­æ˜¯å¦æœ‰è§£çš„é¢˜ç›®ã€‚\næ ·ä¾‹è§£é‡Š é¢˜ç›®æè¿°è¶Šå¤æ‚ã€è¶Šä¸æ˜“ç†è§£å°±è¶Šåº”å½“æœ‰è¯¦ç»†çš„æ ·ä¾‹è§£é‡Šã€‚\né¢˜ç›®éš¾åº¦è¶Šç®€å•å°±è¶Šåº”å½“æœ‰è¯¦ç»†çš„æ ·ä¾‹è§£é‡Šã€‚\nè¯¦ç»†çš„æ ·ä¾‹è§£é‡Šå¯ä»¥é€‰æ‹©é…ä¸Šå›¾ç‰‡ã€‚\nè¾ƒå¤§çš„æ ·ä¾‹å¯ä»¥æ²¡æœ‰æ ·ä¾‹è§£é‡Šã€‚\nä¸ºäº†ç…§é¡¾è‰²è§‰éšœç¢è€…ï¼Œæœ€å¥½ä¸è¦ä½¿é¢œè‰²æˆä¸ºç†è§£æ ·ä¾‹è§£é‡Šæ‰€å¿…å¤‡çš„ã€‚å¯ä»¥ç”¨å½©è‰²å›¾ç‰‡æ¥ç¾åŒ–æ ·ä¾‹è§£é‡Šï¼Œä½†å¦‚æœä¸€å®šè¦ç”¨é¢œè‰²ä¼ é€’ä¸€äº›å¿…è¦çš„ä¿¡æ¯ï¼Œæœ€å¥½ä¸è¦åŒæ—¶å‡ºç°çº¢é»„æˆ–è€…çº¢ç»¿ã€‚\næ—¶é™ã€ç©ºé—´é™åˆ¶ä¸éƒ¨åˆ†åˆ† æ—¶é™ä¸ç©ºé—´é™åˆ¶çš„ç›®çš„æ˜¯å¡æ‰å¤æ‚åº¦é”™è¯¯çš„åšæ³•ã€‚ï¼ˆå½“ç„¶ï¼Œä¹Ÿæ˜¯ä¸ºäº†é˜²æ­¢è¯„æµ‹ç”¨æ—¶è¿‡é•¿ï¼Œå¦‚ï¼šåªå¯¹äº¤äº’æ¬¡æ•°æœ‰é™åˆ¶è€Œå¯¹æ—¶é—´å¤æ‚åº¦æ²¡æœ‰é™åˆ¶çš„äº¤äº’é¢˜ä¹Ÿæœ‰æ—¶é—´é™åˆ¶ã€‚ï¼‰\nå› æ­¤ï¼ŒåŸåˆ™ä¸Šæ—¶é—´é™åˆ¶åº”å½“é€‰å–ä¸ä½¿é”™è¯¯åšæ³•é€šè¿‡çš„å°½é‡å¤§çš„å€¼ã€‚\nä¸€èˆ¬åœ°ï¼Œæ—¶é™åº”æ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š\n è‡³å°‘ä¸º std åœ¨æœ€åæƒ…å†µä¸‹ç”¨æ—¶çš„ä¸¤å€ã€‚ å¦‚æœæ¯”èµ›å…è®¸ä½¿ç”¨ Javaï¼Œåº”ä½¿ Java èƒ½å¤Ÿé€šè¿‡ã€‚ ä¸åº”ä½¿é”™è¯¯åšæ³•é€šè¿‡ï¼ˆå®åœ¨å¡ä¸æ‰ã€æƒ³æ”¾æŸç§é”™è§£è¿‡é™¤å¤–ï¼‰ã€‚  ä¸ºäº†æ›´å¥½åœ°åœ¨æ”¾å¤§å¸¸æ•°åšæ³•è¿‡çš„åŒæ—¶å¡æ‰é”™è§£ï¼Œä¸€èˆ¬å¯ä»¥é‡‡ç”¨åŒæ—¶å¢å¤§æ•°æ®èŒƒå›´å’Œæ—¶é™çš„æ–¹æ³•ã€‚ä½†è¦æ³¨æ„ï¼Œæœ‰æ—¶æ­£è§£ï¼ˆç”±äºç¼“å­˜ç­‰ç„å­¦é—®é¢˜ï¼‰ä¼šåœ¨æ•°æ®èŒƒå›´å¢å¤§æ—¶æœ‰æå¤§çš„å¸¸æ•°å¢åŠ ï¼Œæ­¤æ—¶å¢å¤§æ•°æ®èŒƒå›´ä¸ä¸€å®šèƒ½å¤Ÿå¢å¤§æ­£è§£ä¸é”™è§£ä¹‹é—´ç”¨æ—¶çš„å·®è·ã€‚\nåœ¨æœ‰éƒ¨åˆ†åˆ†çš„èµ›åˆ¶ä¸­ï¼Œè¿˜å¯ä»¥é€šè¿‡è®¾ç½®æœ‰æ¢¯åº¦çš„æ•°æ®ã€æ•°æ®èŒƒå›´ç¨å°çš„æ•°æ®æ¥ä½¿è¾ƒä¸ºä¼˜ç§€çš„é”™è§£å’Œå¤§å¸¸æ•°æ­£è§£ä¸èƒ½é€šè¿‡ï¼ŒåŒæ—¶ä½¿å…¶è·å¾—è¾ƒé«˜çš„éƒ¨åˆ†åˆ†ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æ•°æ®èŒƒå›´å°äº $5\\cdot 10^5$ æ—¶ï¼Œåº”å½“è€ƒè™‘æ˜¯å¦èƒ½ä½¿ç”¨æŒ‡ä»¤é›†é€šè¿‡ã€‚\nä¸€èˆ¬æƒ…å†µä¸‹ç©ºé—´é™åˆ¶åº”å½“è®¾ç½®çš„è¶³å¤Ÿå¤§ï¼Œé™¤éç©ºé—´å¤æ‚åº¦æ›´ä¼˜çš„åšæ³•çš„ç¡®ååˆ†å·§å¦™ï¼Œå€¼å¾—å¡æ‰ç©ºé—´å¤æ‚åº¦å¤§çš„åšæ³•ã€‚è¿™ç§æƒ…å†µä¸‹å¯ä»¥è€ƒè™‘è®¾ç½®ç©ºé—´é™åˆ¶è¾ƒæ¾çš„éƒ¨åˆ†åˆ†ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä¸æƒ³å¡æ‰ç©ºé—´æ¶ˆè€—è¾ƒå¤§çš„åšæ³•ï¼Œæ•°æ®ç»“æ„é¢˜ä¸€èˆ¬éœ€è¦è®¾ç½®è¾ƒå¤§çš„ç©ºé—´é™åˆ¶ã€‚\n ä¸€é“å¥½é¢˜åº”è¯¥å…·æœ‰å®ƒçš„é€‰æ‹”æ€§è´¨ï¼Œå…·æœ‰è¶³å¤Ÿçš„åŒºåˆ†åº¦ã€‚åº”è¯¥è‡³å°‘4æ¡£éƒ¨åˆ†åˆ†ï¼Œè®©æ–°æ‰‹å¯ä»¥æ‹¿åˆ°åˆ†ï¼Œè®©é«˜æ‰‹èƒ½å¤Ÿå±•ç¤ºè‡ªå·±çš„å®åŠ›ã€‚\nâ€”â€” vfkã€ŠUOJç²¾ç¥ä¹‹æºæµã€‹\n éƒ¨åˆ†åˆ†ä¸€èˆ¬åˆ†ä¸ºè¾ƒå°æ•°æ®èŒƒå›´ä¸ç‰¹æ®Šæ€§è´¨ä¸¤ç§ã€‚\nè¾ƒå°æ•°æ®èŒƒå›´ä¸€èˆ¬è¦è®¾ç½®å¤šæ¡£ï¼Œå³ä½¿ä½ æƒ³ä¸åˆ°æŸç§å¤æ‚åº¦çš„åšæ³•ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘ç»™è¿™ç§å¤æ‚åº¦ä¸€æ¡£åˆ†ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸ºäº†é¿å…å¡å¸¸ï¼Œå¯ä»¥è®¾ç½®ä¸€æ¡£æé™æ•°æ®é™¤ä»¥äºŒçš„éƒ¨åˆ†åˆ†ã€‚\nâ€œæ•°æ®æœ‰æ¢¯åº¦â€æœ€å¥½ç”¨å¤šæ¡£éƒ¨åˆ†åˆ†æ›¿ä»£ã€‚\nç‰¹æ®Šæ€§è´¨éƒ¨åˆ†åˆ†çš„è®¾ç½®è¦ä¾å…·ä½“é¢˜ç›®è€Œå®šã€‚ç†æƒ³çš„ç‰¹æ®Šæ€§è´¨éƒ¨åˆ†åˆ†åº”å½“æ˜¯èƒ½å¤Ÿå¼•å¯¼é€‰æ‰‹æ€è€ƒæ­£è§£çš„ã€‚ä¸è¾ƒå°æ•°æ®èŒƒå›´éƒ¨åˆ†åˆ†ä¸åŒï¼Œåœ¨ä½ ä¸ä¼šé’ˆå¯¹æŸç§ç‰¹æ®Šæ€§è´¨çš„åšæ³•æ—¶ï¼Œæœ€å¥½ä¸è¦ç»™è¿™ç§ç‰¹æ®Šæ€§è´¨ä¸€æ¡£åˆ†ã€‚ä¾‹å¦‚ï¼š[CTS2019]éšæœºç«‹æ–¹ä½“ çš„ $k=1$ è¿™æ¡£éƒ¨åˆ†åˆ†åœ¨è®²é¢˜æ—¶å°±è¢«å¾ˆå¤šäººåæ§½ï¼Œç§°è¿™æ¡£éƒ¨åˆ†åˆ†å¦¨ç¢äº†æ€è€ƒæ­£è§£ã€‚\nå¦‚æœä¸æ˜¯æµ‹è¯•ç‚¹ç­‰åˆ†ä¸”æ€»åˆ†ä¸ºæµ‹è¯•ç‚¹å¾—åˆ†ç›¸åŠ ï¼ˆå¦‚ï¼šç»‘ Subtask æµ‹è¯•ï¼‰ï¼Œä¸€å®šè¦åœ¨é¢˜é¢ä¸­è¯´æ˜ã€‚\næ•°æ® æ•°æ®çš„å¤šæ ·æ€§ä¸å¼ºåº¦ åœ¨ä¸ç»‘ Subtaskï¼ŒæŒ‰æµ‹è¯•ç‚¹ç»™åˆ†æ—¶ï¼Œæœ¬éƒ¨åˆ†å†…å®¹å¯ä»¥é…Œæƒ…ä¸éµå®ˆã€‚\næ•°æ®ä¸­åº”å½“åŒ…å«æ¯ä¸ªå˜é‡çš„æœ€å°å€¼ä¸æœ€å¤§å€¼ã€‚\næ•°æ®ä¸­åº”å½“åŒ…å«å„ç§å„æ ·çš„æ„é€ ï¼Œå³ä½¿ä½ ä¸çŸ¥é“ä»€ä¹ˆé”™è§£ä¼šæŒ‚åœ¨è¿™ç»„æ„é€ ä¸Šã€‚\nå½“ç„¶ï¼Œå¦‚æœä½ å·²çŸ¥ä¸€ä¸ªï¼ˆæ­£å¸¸äººèƒ½æƒ³çš„åˆ°ã€å†™çš„å‡ºçš„ï¼‰æ­£ç¡®æ€§æœ‰é—®é¢˜çš„é”™è§£ï¼Œè¦å°½é‡å¡æ‰å®ƒã€‚ï¼ˆæ—¶é—´å¤æ‚åº¦æœ‰é—®é¢˜çš„é”™è§£å·²åœ¨ä¸Šæ–‡è®¨è®ºè¿‡äº†ã€‚ï¼‰\néœ€è¦ç‰¹åˆ«æé†’çš„æ˜¯ï¼Œå¦‚æœæœ‰æ•´å‹æº¢å‡ºçš„å¯èƒ½ï¼Œä¸€å®šè¦å¡æ‰ä¼šæº¢å‡ºçš„åšæ³•ã€‚åœ¨æœ‰éƒ¨åˆ†åˆ†çš„èµ›åˆ¶ä¸­ï¼Œä¸åº”ä½¿ä¸å¼€ long long çš„äººå¾—åˆ°å’Œæš´åŠ›ä¸€æ ·ç”šè‡³æ›´ä½çš„åˆ†æ•°ã€‚\nå¦‚æœæœ‰ pretests pretests åº”å°½é‡å¼ºï¼ˆï¼ŒåŒæ—¶å°½é‡å°‘ï¼‰ã€‚æ¢è¨€ä¹‹ï¼Œä½ éœ€è¦åœ¨ pt ä¸­ï¼ˆç”¨å°½é‡å°‘çš„æ•°æ®ç»„æ•°ï¼‰åŒ…å«è¯¥é¢˜çš„æ‰€æœ‰å·²çŸ¥å‰ç‚¹ã€‚ï¼ˆæ‹¬å·ä¸­ä¸ºä¸ªäººè§‚ç‚¹ã€‚ï¼‰\nå¦‚æœä½ å¸Œæœ›å‡ºç°å°‘é‡è€Œéæ²¡æœ‰ fstï¼Œä½ å¯ä»¥é—®é—® Sooke å¯¹è¿™ä»¶äº‹çš„çœ‹æ³•ï¼ˆSooke æ›¾ç»åšç§°â€œfst æ˜¯ CF çš„çµé­‚â€ï¼Œåœ¨æˆ‘çš„å¼ºçƒˆè¦æ±‚ä¸‹ï¼Œåœ¨ CF1172A Nauuo and Cards ä¸­ï¼Œä»–æ„é€ äº†è®¸å¤šæ•°æ®ï¼Œåœ¨ pt ä¸­å¡æ‰äº†æ‰€æœ‰å·²çŸ¥é”™è§£ï¼Œæœ€åï¼Œè¿™é¢˜åœ¨æ¯”èµ›ä¸­ Div.2 çš„ fst ç‡ä¸º $18.5%$ï¼‰ã€‚\nä½¿ç”¨ testlib.h é€ æ•°æ® åœ¨å¹³å¸¸çš„å‡ºé¢˜ä¸­ä½¿ç”¨ Polygon å¯èƒ½ä¸æ˜¯æœ€ä¸ºæ–¹ä¾¿çš„é€‰æ‹©ï¼ˆäº‹å®ä¸Šå¦‚æœæ˜¯å¤šäººåä½œå‡ºé¢˜ï¼Œå³ä½¿ä¸æ˜¯å‡º cfï¼Œä½¿ç”¨ Polygon ä¾ç„¶æ˜¯éå¸¸æ£’çš„é€‰æ‹©ï¼‰ï¼Œä½† Polygon ä¸ºæˆ‘ä»¬æä¾›çš„å‡ºé¢˜æ–¹å¼ååˆ†å€¼å¾—å€Ÿé‰´ã€‚\nç®€è€Œè¨€ä¹‹ï¼Œåœ¨ Polygon ä¸­ï¼Œæ•°æ®è¦ä¹ˆæ˜¯æ‰‹é€ ï¼Œè¦ä¹ˆç”± generator ç”Ÿæˆã€‚è€Œè¿™ä¸ª generator ä½¿ç”¨ testlib.hï¼Œå¹¶ä¸”ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°æ¥è®¾ç½®æ•°æ®èŒƒå›´ã€æ„é€ ç±»å‹ç­‰å‚æ•°ã€‚\nä½¿ç”¨ testlib.h çš„å¥½å¤„æ˜¯ï¼Œå®ƒå†…ç½®äº†éšæœºæ•°ç”Ÿæˆå™¨ rnd.next()ï¼Œå®ƒåœ¨ä¸åŒå¹³å°ä¸Šè¿”å›åŒæ ·çš„ç»“æœï¼Œå¹¶ä¸”å…¶ç§å­æ˜¯åŸºäºæ•´ä¸ªå‘½ä»¤è¡Œå‚æ•°ç”Ÿæˆçš„ï¼Œä¸ç”¨æ‰‹åŠ¨è®¾ç½®ç§å­ï¼Œå¹¶ä¸”åœ¨å‚æ•°ä¸€æ ·æ—¶ç”Ÿæˆçš„æ•°æ®æ€»æ˜¯ä¸€æ ·çš„ã€‚\nä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°çš„å¥½å¤„æ˜¯ï¼Œä½ å¯ä»¥å†™ä¸€ä¸ª .bat æ–‡ä»¶ï¼ˆæˆ–è€… Linux ä¸‹çš„ .sh æ–‡ä»¶ï¼‰ï¼ŒæŠŠç”Ÿæˆæ•°æ®çš„å‘½ä»¤å†™è¿›å»ï¼Œå¯ä»¥ååˆ†æ–¹ä¾¿åœ°ç”Ÿæˆæ•°æ®ã€‚\nä¸€ä¸ªç®€å•çš„ generator ä¾‹å­ï¼š\n// gen.cpp #include \u0026quot;testlib.h\u0026quot; using namespace std; int n, m, k; vector\u0026lt;int\u0026gt; p; int main(int argc, char* argv[]) { registerGen(argc, argv, 1); int i; n = atoi(argv[1]); m = atoi(argv[2]); k = rnd.next(1, n); for (i = 1; i \u0026lt;= n; ++i) p.push_back(i); shuffle(p.begin(), p.end()); // testlib.h è‡ªå¸¦çš„ random_shuffleï¼Œä½¿ç”¨ rnd.next() è¿›è¡Œ shuffle printf(\u0026quot;%d %d %d\\n\u0026quot;, n, m, k); for (i = 0; i \u0026lt; n; ++i) printf(\u0026quot;%d%c\u0026quot;, p[i], \u0026quot; \\n\u0026quot;[i == n - 1]); // æŠŠå­—ç¬¦ä¸²å½“ä½œæ•°ç»„ç”¨ï¼Œä¸­é—´ç©ºæ ¼ï¼Œæœ«å°¾æ¢è¡Œï¼Œæ˜¯ä¸€ä¸ªé€ æ•°æ®æ—¶å¸¸ç”¨çš„æŠ€å·§ return 0; }  gen 10 10 \u0026gt; 1.in gen 1 1 \u0026gt; 2.in gen 100 200 \u0026gt; 3.in gen 2000 1000 \u0026gt; 4.in gen 100000 100000 \u0026gt; 5.in  å®˜æ–¹ generator æ•™ç¨‹ã€‚\nå¦‚æœä½ æ„¿æ„ï¼Œè¿˜å¯ä»¥å†™ä¸€ä¸ª validatorã€‚validator æ˜¯ç”¨æ¥æ£€æŸ¥æ•°æ®åˆæ³•æ€§çš„ï¼Œåœ¨ cf èµ›åˆ¶ä¸­ç”±äº hack çš„å­˜åœ¨æ˜¯å¿…å¤‡çš„ï¼Œè€Œåœ¨å…¶å®ƒèµ›åˆ¶ä¸­ï¼Œvalidator ç›¸å½“äºç»™æ•°æ®ä¸Šäº†ä¸€é“ä¿é™©é”ï¼Œä¸ªäººååˆ†æ¨èå†™ä¸€ä¸ª validatorã€‚\nå®˜æ–¹ validator æ•™ç¨‹ã€‚\næœ€åæ¨èä¸€ä¸ªæˆ‘è‡ªå·±ç»å¸¸ä½¿ç”¨çš„ç”Ÿæˆè¾“å‡ºæ–‡ä»¶çš„ batï¼š\n@echo off for /R \u0026quot;%cd%\u0026quot; %%i in (*.in) do ( echo %%i validator \u0026lt; %%i if errorlevel 1 pause std \u0026lt; %%i \u0026gt; %%~ni.out ) pause  Special Judge è¾“å‡ºæ–¹æ¡ˆé¢˜å’Œè¾“å‡ºæµ®ç‚¹æ•°é¢˜æ˜¯ä¸¤ç§è¾ƒä¸ºå¸¸è§çš„éœ€è¦ä½¿ç”¨ SPJ çš„é¢˜å‹ï¼Œå…¶å®ƒé¢˜ç›®è§†æƒ…å†µä¹Ÿéœ€è¦ä½¿ç”¨ SPJã€‚åœ¨ CF ä¸Šï¼Œæ‰€æœ‰é¢˜ç›®éƒ½å¿…é¡»ä½¿ç”¨åŸºäº testlib.h çš„ checkerï¼Œä¾‹å¦‚ï¼šé¢˜ç›®è¦æ±‚è¾“å‡ºè‹¥å¹²ä¸ªæ•´æ•°æ—¶ï¼Œä½ å¯ä»¥ä»»æ„è¾“å‡ºç©ºç™½å­—ç¬¦ï¼ˆæ—¢å¯ä»¥ç©ºæ ¼ä¹Ÿå¯ä»¥æ¢è¡Œï¼‰ã€‚\nchecker ä¸€èˆ¬ä½¿ç”¨ testlib.h ç¼–å†™ï¼Œåœ¨ lemon ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨ testlib.hã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸ä½¿ç”¨ testlib.h æ˜¯å¾ˆéš¾å†™å¥½ checker çš„ï¼Œå› ä¸ºä½ è¦åº”å¯¹å„ç§å„æ ·çš„ä¸åˆæ³•è¾“å‡ºï¼Œéœ€è¦æå¼ºçš„é²æ£’æ€§ã€‚\nç¼–å†™ checker éœ€è¦æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹ï¼š\n ä½ éœ€è¦åº”å¯¹å„ç§ä¸åˆæ³•çš„è¾“å‡ºï¼Œå› æ­¤ï¼Œè¯·æ£€æŸ¥è¯»å…¥çš„æ¯ä¸ªå˜é‡æ˜¯å¦åœ¨åˆæ³•èŒƒå›´ä¸­ï¼ˆreadInt(minvalue, maxvalue)ï¼‰ã€‚ä¾‹å¦‚ï¼šè¯»å…¥ä¸€ä¸ªåœ¨ check è¿‡ç¨‹ä¸­ä¼šä½œä¸ºæ•°ç»„ä¸‹æ ‡çš„å˜é‡æ—¶å¿…é¡»æ£€æŸ¥å…¶èŒƒå›´ï¼Œå¦åˆ™å¯èƒ½å¼•å‘æ•°ç»„è¶Šç•Œï¼Œæœ‰æ—¶è¿™ä¼šå¯¼è‡´ REï¼Œæœ‰æ—¶åˆ™å¯èƒ½åˆ¤ä¸º ACã€‚ åŸåˆ™ä¸Š checker ä¸­ä¸åº”æ£€æŸ¥ç©ºç™½å­—ç¬¦ï¼ˆå³ï¼Œä¸åº”ä½¿ç”¨ readSpace()ã€readEoln()ã€readEof()ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œtestlib.h ä¼šè‡ªåŠ¨æ£€æŸ¥æ˜¯å¦æœ‰å¤šä½™çš„è¾“å‡ºï¼‰ã€‚  å®˜æ–¹ checker æ•™ç¨‹ã€‚\né¢˜è§£ é¢˜è§£çš„ç›®æ ‡æ˜¯è®©é¢„è®¡ä¼šæ¥å‚åŠ æ¯”èµ›çš„äººéƒ½èƒ½çœ‹æ‡‚ã€‚æ‰€ä»¥å®˜æ–¹é¢˜è§£è¯¦ç»†ç¨‹åº¦çš„è¦æ±‚ä¼šæ¯”ä¸€èˆ¬çš„é¢˜è§£é«˜ã€‚\nå…³äºéƒ¨åˆ†åˆ† åœ¨æœ‰éƒ¨åˆ†åˆ†çš„é¢˜ç›®ä¸­ï¼Œé¢˜è§£é‡Œå¯ä»¥è€ƒè™‘å†™ä¸€å†™éƒ¨åˆ†åˆ†çš„åšæ³•ã€‚\nå…³äºçŸ¥è¯†ç‚¹ è§£é¢˜ä¸­ç”¨åˆ°çš„çŸ¥è¯†ç‚¹åº”å½“å†™å‡ºæ¥ã€‚å¯¹äºä¸€äº›éš¾åº¦å’Œé¢˜ç›®éš¾åº¦ç›¸å½“çš„çŸ¥è¯†ç‚¹ï¼Œæœ€å¥½ç»™å‡ºå­¦ä¹ è¯¥çŸ¥è¯†ç‚¹çš„èµ„æ–™ï¼ˆæ¯”å¦‚ä¸€ç¯‡åšå®¢çš„åœ°å€ï¼‰ã€‚â€œè¿™æ ·ï¼Œå†è¿™æ ·ï¼Œç„¶åç”¨ä¸€äº›æŠ€å·§å°±å¯ä»¥äº†â€ï¼Œè€Œå…¶ä¸­çš„â€œä¸€äº›æŠ€å·§â€å¹¶ä¸æ˜¯è°éƒ½ä¼šçš„ï¼Œè¿™ç§æƒ…å†µè¦ç»å¯¹é¿å…ã€‚\nå…³äºå®šä¹‰ é¢˜è§£ä¸­ä¸è¦å‡­ç©ºå†’å‡ºæ¥ä¸€äº›æ¦‚å¿µã€‚\nä¾‹å¦‚ï¼šdp çš„é¢˜è§£è¦è§£é‡Šæ¸…æ¥šçŠ¶æ€çš„å®šä¹‰ã€‚\nå†ä¾‹å¦‚ï¼šcy æ›¾ç»å†™è¿‡ä¸€ç‰ˆ CF1172F Nauuo and Bug çš„é¢˜è§£ï¼Œå…¶ä¸­å¯¹â€œåˆ†æ®µå‡½æ•°â€æ²¡æœ‰å®šä¹‰ï¼Œè¿™æ˜¯ç»å¯¹ä¸å¯å–çš„ã€‚\nå…³äºç»†èŠ‚ å…·ä½“çš„å®ç°ç»†èŠ‚å¦‚æœæ¯”è¾ƒå·§å¦™æœ€å¥½å†™å‡ºæ¥ï¼Œå¦åˆ™çš„è¯â€œè¯¦è§ä»£ç â€ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚å¦‚æœâ€œè¯¦è§ä»£ç â€çš„è¯ï¼Œæœ€å¥½åœ¨ä»£ç ä¸­åŠ ä¸Šä¸€å®šçš„æ³¨é‡Šã€‚\næ ‡ç¨‹ æ ‡ç¨‹ä¸­æœ€å¥½å»æ‰å†—ä½™éƒ¨åˆ†ã€‚æ¯”å¦‚ï¼Œæœ‰äººåœ¨é¢˜è§£ä¸­ä¿ç•™äº†å®Œæ•´çš„ define æ¨¡æ¿ï¼ˆä¸ºäº†æé«˜åšé¢˜é€Ÿåº¦ï¼ŒåŒ…å«å¤§é‡ define ä¸å¸¸ç”¨å‡½æ•°ï¼Œå¸¸ç”¨äº CF ç­‰åœ¨çº¿æ¯”èµ›ï¼‰ï¼Œå¹¶ä¸”å…¶ä¸­å¾ˆå¤§ä¸€éƒ¨åˆ†éƒ½æ²¡æœ‰ç”¨åˆ°ï¼Œè¿™æ˜¯ä¸å¥½çš„ã€‚\nä¸Šæ–‡å·²ç»è¯´è¿‡äº†ï¼Œå¦‚æœæ¶‰åŠåˆ°ä¸€äº›é¢˜è§£ä¸­æ²¡æœ‰è¯¦ç»†è¯´æ˜çš„å®ç°ç»†èŠ‚ï¼Œæœ€å¥½åŠ ä¸Šé€‚é‡çš„æ³¨é‡Šã€‚\næ¯”èµ› æ¯”èµ›é€šçŸ¥ä¸­çš„é¢˜ç›®éš¾åº¦éœ€çœŸå® æ„Ÿè§‰è¿™ä¸ªæ˜¯æ¯”èµ›é€šçŸ¥ä¸­æ¯”è¾ƒéœ€è¦æ³¨æ„çš„ä¸€ç‚¹ã€‚\nå¦‚æœä¸ä¼šè¯„éš¾åº¦å¯ä»¥ä¸è¯„..\n Remember that authors tend to underestimate the difficulty of their problems.\nâ€”â€” Codeforces PROPOSE A PROBLEM é¡µé¢çš„æé†’\n éœ€è¦ç‰¹åˆ«å¼ºè°ƒçš„æ˜¯ï¼Œå¦‚æœä½ ä»¥ CF çš„éš¾åº¦æ¥è¿›è¡Œç±»æ¯”ï¼ˆå¦‚ï¼šè¯¥æ¯”èµ›ä¸º Div.2 A ~ Div.2 E éš¾åº¦ï¼‰ï¼Œä¸ä»…æ˜¯éš¾åº¦éœ€è¦ä¸ CF Div.2 ç±»ä¼¼ï¼Œé¢˜å‹ä¹Ÿåº”å½“æ˜¯ CF é£æ ¼ã€‚\né¢˜ç›®éš¾åº¦çš„åˆ†é… åœ¨ç±»å›½å†… OI çš„æ¨¡æ‹Ÿèµ›ä¸­ï¼Œå¾€å¾€æ˜¯ä¸‰é“é¢˜çš„æ•´ä½“éš¾åº¦ä¸æ¯”èµ›éš¾åº¦ç›¸å½“å³å¯ã€‚\nåœ¨ç±» CF / ATC è¿™ç§çº¿ä¸Šèµ›çš„æ¯”èµ›ä¸­ï¼Œéœ€è¦å°½é‡ä¿è¯éš¾åº¦çš„é€’å¢ï¼ˆè™½ç„¶ç”±äºå¯¹éš¾åº¦çš„è¯¯ä¼°å¾ˆå¤šæ—¶å€™éƒ½å¹¶ä¸èƒ½çœŸæ­£åšåˆ°ï¼‰ï¼Œå¹¶ä¸”å°½é‡é¿å…å‡ºç°å¤§çš„ difficulty gapã€‚å¯ä»¥é€šè¿‡æŠŠä¸€é¢˜åˆ†ä¸ºéš¾æ˜“ä¸¤é¢˜ï¼ˆä¸¤ä¸ª Subtaskï¼‰æ¥å‡å°‘ difficulty gapã€‚\né¢˜ç›®çŸ¥è¯†ç‚¹çš„åˆ†é… ä¸€åœºæ¯”èµ›åº”å°½é‡æ¶µç›–è¾ƒå¹¿çš„çŸ¥è¯†ç‚¹ï¼ˆä¸“é¢˜è®­ç»ƒèµ›å½“ç„¶é™¤å¤–ï¼‰ã€‚\nç»å…¸åä¾‹ï¼šæ¶µç›–äº†åŠ¨æ€è§„åˆ’ã€æœŸæœ›ã€ç»„åˆè®¡æ•°ã€å®¹æ–¥åŸç†ã€å¤šé¡¹å¼ç­‰å¤šç§çŸ¥è¯†ç‚¹çš„ CTS2019ã€‚ï¼ˆç»„é¢˜äººï¼šæˆ‘è¦ä»äº”é“é¢˜é‡Œé€‰å…­é“ï¼Œæˆ‘ä¹Ÿå¾ˆæ— å¥ˆå•Šã€‚ï¼‰\nå‚è€ƒèµ„æ–™  vfkã€ŠUOJç²¾ç¥ä¹‹æºæµã€‹ ç‹å¤©æ‡¿ã€Šè®ºåé¢˜çš„å±å®³ã€‹ cf å‡ºé¢˜äººé¡»çŸ¥ vfk åšå®¢ä¸­çš„CFå‡ºé¢˜äººçš„è‡ªæˆ‘ä¿®å…» ","date":"2019-06-16T11:24:12+08:00","permalink":"https://ouuan.github.io/post/ouuan-%E7%9A%84%E5%87%BA%E9%A2%98%E8%A7%84%E8%8C%83/","tags":["å‡ºé¢˜è§„èŒƒ"],"title":"ouuan çš„å‡ºé¢˜è§„èŒƒ"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\ndarkbzoj\né¢˜æ„ç®€è¿° ç»™ä½  $n$ ä¸ªå¸¦æƒå€¼çš„æ•°ï¼ˆæ•°å’Œæƒå€¼æ˜¯ä¸¤ä¸ªä¸œè¥¿ï¼‰ï¼Œæ±‚ä¸€ä¸ªæƒå€¼æœ€å¤§çš„å¼‚æˆ–çº¿æ€§æ— å…³å­é›†ï¼Œå³å–è¿™ä¸ªå­é›†çš„ä»»æ„ä¸€ä¸ªéç©ºå­é›†ï¼Œå¼‚æˆ–å’Œéƒ½ä¸ä¸ºé›¶ã€‚\nåŸé¢˜ $n\\le1000$ï¼Œå®é™…ä¸Šå¯ä»¥è½»æ¾ $n\\le10^5$ã€‚æ•° $10^{18}$ï¼Œæƒå€¼ $10^4$ã€‚\nç®€è¦åšæ³• çœ‹åˆ°è¿™é¢˜ï¼Œå°±éšä¾¿è´ªå¿ƒä¸€ä¸‹ï¼šæŒ‰æƒå€¼æ’åºï¼Œæ’å…¥åˆ°çº¿æ€§åŸºæ‰€åœ¨çš„çº¿æ€§ç©ºé—´çš„å…ƒç´ é›†åˆé‡Œï¼ˆè¯´çš„è¿™ä¹ˆç»•å£æ˜¯å› ä¸ºâ€œæ’å…¥åˆ°çº¿æ€§åŸºé‡Œâ€æ˜¯ä¸€ç§æä¸ä¸¥è°¨çš„è¡¨è¿°ï¼Œè€Œä¸”æ— æ³•å’ŒçœŸæ­£çš„â€œæ’å…¥åˆ°çº¿æ€§åŸºé‡Œâ€åŒºåˆ†å¼€ï¼‰ï¼Œå¦‚æœæ’å…¥åˆ°äº†çº¿æ€§åŸºé‡Œï¼Œå°±æŠŠç­”æ¡ˆåŠ ä¸Šè¿™ä¸ªæ•°çš„æƒå€¼ã€‚\nç„¶å\u0026hellip;è¿‡äº†ï¼Ÿ\nä»”ç»†ä¸€æƒ³å‘ç°ä¹Ÿä¸éš¾è¯ã€‚\né¦–å…ˆï¼Œä¸€å †çº¿æ€§æ— å…³çš„å‘é‡ä¸­ï¼Œå¦‚æœåŠ è¿›æ¥ä¸€ä¸ªçº¿æ€§ç›¸å…³çš„ï¼Œä¸€å®šå¯ä»¥åˆ æ‰è¿™äº›å‘é‡ï¼ˆåŒ…æ‹¬åˆšåŠ è¿›æ¥è¿™ä¸ªï¼‰ä¸­çš„æŸä¸€ä¸ªï¼ˆå¹¶ä¸æ˜¯ä»»æ„ä¸€ä¸ªï¼Œä½†åªè¦ä¸€ä¸ªå°±å¯ä»¥äº†ï¼‰ï¼Œè®©å®ƒä»¬å˜å¾—çº¿æ€§æ— å…³ã€‚è¿™ä¸ªæ€§è´¨åœ¨å¼‚æˆ–ä¸­å¯èƒ½ä¸é‚£ä¹ˆæ˜¾ç„¶ï¼Œä½†çº¿æ€§ç›¸å…³å°±ç›¸å½“äºæ–¹ç¨‹ç»„ä¸­æœ‰ä¸€ä¸ªå¤šä½™çš„æ–¹ç¨‹ï¼ˆå¯ä»¥ç”±å…¶å®ƒæ–¹ç¨‹æ¨å‡ºæ¥ï¼‰ï¼Œè¿™æ—¶åªè¦åˆ æ‰ä¸€ä¸ªæ–¹ç¨‹å°±ä¸ä¼šæœ‰å¤šä½™çš„æ–¹ç¨‹äº†ï¼Œè¿™æ ·å°±æ˜¯å¤§å®¶æ‰€ç†ŸçŸ¥çš„äº†ã€‚\nå› æ­¤ï¼Œè€ƒè™‘åŠ å…¥ä¸€ä¸ªå…ƒç´ æ—¶åˆ æ‰è°å‘¢ï¼Ÿå½“ç„¶æ˜¯æƒå€¼å°çš„é‚£ä¸€ä¸ªã€‚å¦‚æœäº‹å…ˆæ’å¥½åºï¼ŒåŠ ä¸è¿›å»çš„æ—¶å€™ä¸åŠ å°±å¥½äº†ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef long long ll; typedef pair\u0026lt;int, ll\u0026gt; pil; const int N = 1010; pil a[N]; ll p[70]; int n, ans; int main() { int i, j; scanf(\u0026quot;%d\u0026quot;, \u0026amp;n); for (i = 1; i \u0026lt;= n; ++i) scanf(\u0026quot;%lld%d\u0026quot;, \u0026amp;a[i].second, \u0026amp;a[i].first); sort(a + 1, a + n + 1); for (i = n; i \u0026gt;= 1; --i) { ll x = a[i].second; for (j = 59; ~j; --j) { if ((x \u0026gt;\u0026gt; j) \u0026amp; 1) { if (p[j]) x ^= p[j]; else { p[j] = x; ans += a[i].first; break; } } } } cout \u0026lt;\u0026lt; ans; return 0; }  ä¸‰å€ç»éªŒ [JLOI2015]è£…å¤‡è´­ä¹° å’Œ [CQOI2013]æ–°Nimæ¸¸æˆ æ˜¯ä¸¤é“å’Œæ­¤é¢˜å‡ ä¹å®Œå…¨ä¸€æ ·çš„é¢˜ï¼Œå‰è€…æ˜¯ç”¨ä¸€ä¸ªç±»ä¼¼é«˜æ–¯æ¶ˆå…ƒçš„è¿‡ç¨‹ä»£æ›¿å¼‚æˆ–ï¼Œåè€…è¦åˆ©ç”¨åˆ° Nim æ¸¸æˆçš„ç»å…¸ç»“è®ºã€‚\n","date":"2019-06-14T22:00:27+08:00","permalink":"https://ouuan.github.io/post/bzoj2460-bjwc2011-%E5%85%83%E7%B4%A0%E7%BA%BF%E6%80%A7%E5%9F%BA%E8%B4%AA%E5%BF%83/","tags":["çº¿æ€§åŸº","è´ªå¿ƒ"],"title":"BZOJ2460 [BJWC2011]å…ƒç´ ï¼ˆçº¿æ€§åŸºï¼Œè´ªå¿ƒï¼‰"},{"categories":["çŸ¥è¯†ç‚¹"],"contents":"åˆæ˜¯åœ¨ç½‘ä¸Šæœä¸åˆ°è®²çš„æ¯”è¾ƒæ¸…æ¥šçš„åšå®¢çš„ç®—æ³•\u0026hellip;è™½ç„¶æ²¡æ‰¾åˆ°å†™çš„å¥½çš„åšå®¢ï¼Œä½†ç»“åˆè‹¥å¹²ç¯‡å†™çš„ä¸ç®—å¤ªå·®çš„åšå®¢ï¼Œå‹‰å¼ºæ˜¯å­¦ä¼šäº†..\nçº¿æ€§åŸºåœ¨ OI ä¸­ç‰¹æŒ‡é›†åˆä¸ºè‹¥å¹²ä¸ªéè´Ÿæ•´æ•°ï¼Œè¿ç®—ä¸ºå¼‚æˆ–çš„çº¿æ€§åŸºï¼Œé€šå¸¸ç”¨æ¥å¤„ç†ä¸€äº›å¼‚æˆ–ç›¸å…³çš„é—®é¢˜ã€‚\nçº¿æ€§ç©ºé—´ ç™¾åº¦ç™¾ç§‘è¯´çš„å°±éå¸¸è¯¦ç»†äº†ï¼Œè¯·å®Œæ•´é˜…è¯»ä¸€éã€‚\n3b1b çš„è§†é¢‘ä¹Ÿå¾ˆä¸é”™ï¼Œå¦‚æœä¸äº†è§£çº¿æ€§ä»£æ•°ç›¸å…³çŸ¥è¯†å¯ä»¥çœ‹ä¸€çœ‹ã€‚ï¼ˆå¦‚æœæ‰“ä¸å¼€å¯ä»¥å°è¯•å¤åˆ¶ç½‘å€æ‰“å¼€ï¼‰\nçº¿æ€§åŸºçš„å®šä¹‰ ä¸‹æ–‡ä¸­çš„â€œçº¿æ€§åŸºâ€å‡æŒ‡ OI ä¸­â€œçº¿æ€§åŸºâ€çš„å¸¸è§æ„æ€ã€‚\nçº¿æ€§åŸºæ‰€åœ¨çš„çº¿æ€§ç©ºé—´   å…ƒç´ é›†åˆï¼šè‹¥å¹²ä¸ªéè´Ÿæ•´æ•°ï¼ˆçº¿æ€§åŸºå¯ä»¥è¯´æ˜¯å…³äºè‹¥å¹²ä¸ªéè´Ÿæ•´æ•°çš„ï¼Œåœ¨æœ‰çš„æ•™ç¨‹ä¸­ç§°å…¶ä¸ºâ€œå¼‚æˆ–é›†åˆâ€ï¼‰ã€‚\n  æ•°åŸŸï¼š $\\{0,1\\}$ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œçº¿æ€§ç»„åˆæ˜¯é€‰æ‹©ä¸€ä¸ªå­é›†å¼‚æˆ–èµ·æ¥ï¼Œ$0$, $1$ å°±åˆ†åˆ«ä»£è¡¨ä¸é€‰æˆ–é€‰æŸä¸ªå…ƒç´ ï¼‰ã€‚\n  å…ƒç´ é—´è¿ç®—ï¼šå¼‚æˆ–ã€‚\n  æ•°ä¹˜ï¼šæ™®é€šçš„æ•°ä¹˜ã€‚\n  çº¿æ€§åŸº çº¿æ€§åŸºå°±æ˜¯ä¸Šæ–‡æ‰€è¿°çš„çº¿æ€§ç©ºé—´çš„ä¸€ç»„åŸºåº•ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹æ€§è´¨ï¼š\n  åœ¨çº¿æ€§åŸºä¸­ä»»å–è‹¥å¹²ä¸ªå…ƒç´ ï¼Œå®ƒä»¬çš„å¼‚æˆ–ä¸ä¸ºé›¶ã€‚å³å®ƒä»¬çº¿æ€§æ— å…³ã€‚\n  å…¶æ‰€åœ¨çº¿æ€§ç©ºé—´ä¸­æ¯ä¸ªå…ƒç´ éƒ½æœ‰å”¯ä¸€çš„æ–¹æ¡ˆç”±çº¿æ€§åŸºä¸­å…ƒç´ å¼‚æˆ–å¾—åˆ°ã€‚\n  é€‰å–çº¿æ€§åŸºä¸­è‹¥å¹²ä¸ªå…ƒç´ å¼‚æˆ–èµ·æ¥å¾—åˆ°ä¸€ä¸ªå…ƒç´ ï¼Œç”¨è¿™ä¸ªå…ƒç´ å»æ›¿æ¢åŸçº¿æ€§åŸºä¸­ä»»æ„ä¸€ä¸ªå…ƒç´ ï¼Œå¾—åˆ°çš„æ–°çº¿æ€§åŸºå¼ æˆçš„ç©ºé—´ä¸å˜ã€‚\n  å¯ä»¥å‘ç°è¿™å°±æ˜¯çº¿æ€§ç©ºé—´åŸºåº•çš„æ€§è´¨å’Œçº¿æ€§åŸºæ‰€åœ¨çº¿æ€§ç©ºé—´çš„å®šä¹‰åˆåœ¨ä¸€èµ·ã€‚\nçº¿æ€§åŸºçš„æ„é€  æ„é€ å‡ºçš„çº¿æ€§åŸºé¢å¤–æ»¡è¶³çš„æ€§è´¨ çº¿æ€§åŸºä¸­çš„æ¯ä¸ªå…ƒç´ çš„äºŒè¿›åˆ¶æœ€é«˜ä½å‡ä¸åŒï¼Œå¹¶ä¸”ï¼Œæˆ‘ä»¬ç§°äºŒè¿›åˆ¶æœ€é«˜ä½ä¸ºç¬¬ $i$ ä½çš„å…ƒç´ ç§°ä¸ºâ€œçº¿æ€§åŸºçš„ç¬¬ $i$ ä½â€ã€‚\nè¿™ä¸ªæ€§è´¨åœ¨æ„é€ å’Œå®é™…åº”ç”¨ä¸­éå¸¸æ–¹ä¾¿ï¼Œä½†è¦æ³¨æ„ï¼Œå®ƒå¹¶ä¸æ˜¯çº¿æ€§åŸºæ‰€åœ¨çº¿æ€§ç©ºé—´çš„åŸºåº•æ‰€æ»¡è¶³çš„å¿…è¦æ¡ä»¶ã€‚ç„¶è€Œä¸‹æ–‡æ‰€è¿°çº¿æ€§åŸºå‡æ»¡è¶³æ­¤æ€§è´¨ï¼Œå› ä¸ºå®ƒçœŸçš„å¾ˆå®ç”¨ã€‚\næ„é€ æ–¹å¼ æˆ‘ä»¬è€ƒè™‘å¦‚ä½•åœ¨å·²æœ‰ä¸€ç»„çº¿æ€§åŸºçš„æƒ…å†µä¸‹ï¼Œå‘çº¿æ€§ç©ºé—´çš„å…ƒç´ é›†åˆä¸­æ’å…¥ä¸€ä¸ªå…ƒç´ ã€‚\næ’å…¥æ–°çš„å…ƒç´ åï¼Œæˆ‘ä»¬éœ€è¦æ»¡è¶³ï¼š\n çº¿æ€§åŸºå¼ æˆçš„ç©ºé—´ä¸­åŒ…å«æ–°æ’å…¥çš„å…ƒç´ ã€‚ çº¿æ€§åŸºä»ç„¶çº¿æ€§æ— å…³ã€‚  å…·ä½“åœ°ï¼Œæˆ‘ä»¬ä¾æ¬¡è€ƒè™‘æ–°æ’å…¥å…ƒç´ çš„æ¯ä¸ªä¸ºä¸€çš„äºŒè¿›åˆ¶ä½ï¼Œè‹¥çº¿æ€§åŸºä¸å­˜åœ¨è¿™ä¸€ä½ï¼Œé‚£ä¹ˆå°†è¿™ä¸ªæ–°å…ƒç´ åŠ å…¥çº¿æ€§åŸºä¸­ã€‚\nå¦åˆ™ï¼Œå°†æ–°å…ƒç´ å¼‚æˆ–ä¸Šçº¿æ€§åŸºçš„è¿™ä¸€ä½ï¼Œç„¶åç»§ç»­å¤„ç†ä¸‹ä¸€ä½ã€‚\nå› ä¸ºæ’å…¥ä¸€ä¸ªå…ƒç´ ç­‰åŒäºæ’å…¥å…¶å¼‚æˆ–ä¸Šçº¿æ€§åŸºä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥æ€§è´¨ä¸€æ»¡è¶³ã€‚\nä»æ„é€ è¿‡ç¨‹ä¸­å°±å¯ä»¥çœ‹å‡ºï¼Œå·²æœ‰çº¿æ€§åŸºæ— æ³•å¼‚æˆ–å¾—åˆ°è¿™ä¸ªæ–°å…ƒç´ ï¼Œæ‰€ä»¥æ€§è´¨äºŒæ»¡è¶³ã€‚\nå‚è€ƒä»£ç ï¼š\n// p[i] è¡¨ç¤ºçº¿æ€§åŸºçš„ç¬¬ j ä½ for (i = 1; i \u0026lt;= n; ++i) { cin \u0026gt;\u0026gt; x; for (j = 60; ~j; --j) { if (((x \u0026gt;\u0026gt; j) \u0026amp; 1)) { if (p[j]) x ^= p[j]; else { p[j] = x; break; } } } }  çº¿æ€§åŸºçš„ç»å…¸åº”ç”¨ åˆ¤æ–­ä¸€ä¸ªæ•°èƒ½å¦ç”±è‹¥å¹²æ•°çš„å­é›†å¼‚æˆ–å¾—åˆ° å‡è£…ä½ è¦æŠŠå®ƒæ’å…¥åˆ°çº¿æ€§ç©ºé—´çš„å…ƒç´ é›†åˆä¸­ï¼Œçœ‹çº¿æ€§åŸºæ˜¯å¦éœ€è¦æ–°å¢å…ƒç´ å³å¯ã€‚\næœ€å¤§å­é›†å¼‚æˆ–å’Œ æ±‚å‡ºçº¿æ€§åŸºï¼Œä¾æ¬¡è€ƒè™‘çº¿æ€§åŸºçš„æ¯ä¸€ä½ï¼Œè‹¥å¼‚æˆ–ä¸Šèƒ½è®©ç­”æ¡ˆæ›´å¤§ï¼ˆå³ç­”æ¡ˆçš„è¿™ä¸€ä½ä¸ºé›¶ï¼‰å°±å¼‚æˆ–ä¸Šã€‚å› ä¸ºå¦‚æœä¸å¼‚æˆ–ä¸Šï¼Œè¿™ä¸€ä½å°±æ˜¯é›¶ï¼Œæ— è®ºåé¢çš„ä½å¦‚ä½•ï¼Œéƒ½æ¯”è¿™ä¸€ä½ä¸º $1$ åŠ£ã€‚\nLuogu P3812 ã€æ¨¡æ¿ã€‘çº¿æ€§åŸº\nç¬¬ $k$ å°å­é›†å¼‚æˆ–å’Œ éœ€è¦æ„é€ ç‰¹æ®Šçš„çº¿æ€§åŸºï¼Œæ»¡è¶³çº¿æ€§åŸºä¸­æœ‰çš„ä½éƒ½åªåœ¨çº¿æ€§åŸºä¸­çš„ä¸€ä¸ªæ•°ä¸­å‡ºç°ã€‚ä¾‹å¦‚ï¼šåŸçº¿æ€§åŸºä¸º 1100 å’Œ 0111ï¼Œè¿™æ—¶çº¿æ€§åŸºä¸­æœ‰ $2,3$ ä¸¤ä½ï¼Œè€Œç¬¬äºŒä½ï¼ˆ$2^2$ è¿™ä¸€ä½ï¼‰åœ¨ 1100 å’Œ 0111 ä¸­éƒ½å‡ºç°äº†ï¼Œæ‰€ä»¥åº”è¯¥ä¿®æ”¹ä¸º 1011 å’Œ 0111ã€‚\nè¿™å¯ä»¥ç”¨ä¸€ä¸ªç±»ä¼¼äºé«˜æ–¯æ¶ˆå…ƒçš„è¿‡ç¨‹å®Œæˆï¼šå¤„ç†ç¬¬ $i$ ä½æ—¶ï¼Œä¾æ¬¡è€ƒè™‘æ¯ä¸ªæ¯” $i$ å°çš„çº¿æ€§åŸºä¸­çš„ä½ï¼Œè‹¥ç¬¬ $i$ ä½çš„è¯¥äºŒè¿›åˆ¶ä½ä¸º $1$ å°±å¼‚æˆ–è¿™ä¸€ä½ã€‚é™¤äº†å…ˆç”¨æ™®é€šæ–¹æ³•æ„å»ºçº¿æ€§åŸºå†è½¬åŒ–ï¼Œä¹Ÿå¯ä»¥åœ¨æ„å»ºæ—¶å°±è¿›è¡Œå¤„ç†ï¼ˆè¯¦è§ä»£ç ï¼‰ã€‚æ— è®ºå“ªç§æ–¹å¼ï¼Œå¤æ‚åº¦éƒ½ä¼šå†ä¹˜ä¸Šä¸€ä¸ªé¢å¤–çš„äºŒè¿›åˆ¶ä½æ•°ã€‚\nå¾—åˆ°è¿™æ ·ä¸€ä¸ªå…·æœ‰ç‰¹æ®Šæ€§è´¨çš„çº¿æ€§åŸºåï¼Œå°±å¯ä»¥æ„é€ ç¬¬ $k$ å°å­é›†å¼‚æˆ–å’Œäº†ï¼šæŠŠ $k$ äºŒè¿›åˆ¶æ‹†åˆ†ï¼Œæ¯ä¸€ä½çš„ $0$ / $1$ å¯¹åº”å¼‚æˆ–æ—¶é€‰ / ä¸é€‰çº¿æ€§åŸºå­˜åœ¨çš„è¿™ä¸€ä½ï¼ˆæ¯”å¦‚è¯´ï¼ŒäºŒè¿›åˆ¶ä½çš„ $2^3$ ä½å¯¹åº”çº¿æ€§åŸºä¸­ç¬¬å››å°çš„å­˜åœ¨çš„ä½ï¼‰ã€‚è¯æ˜ä¹Ÿå¾ˆç®€å•ï¼Œçº¿æ€§åŸºä¸­å­˜åœ¨çš„ä½çš„ 0/1 å”¯ä¸€ç¡®å®šäº†ä¸€ä¸ªå¼‚æˆ–å‡ºçš„æ•°ï¼Œç”±äºæ¯ä¸ªä½åªåœ¨ä¸€ä¸ªåŸºä¸­ä¸º $1â€‹$ï¼Œè¿™äº›ä½ç»„æˆçš„äºŒè¿›åˆ¶æ•°çš„å¤§å°å°±å¯ä»¥ä»£è¡¨å¼‚æˆ–å‡ºçš„æ•°çš„å¤§å°ã€‚\nLOJ #114. k å¤§å¼‚æˆ–å’Œï¼Œæ¯’ç˜¤é¢˜ï¼Œå…ˆä¸è¯´é¢˜ç›®åæ˜¯å‡çš„ï¼Œè¿™ä¸ªâ€œéç©ºé›†åˆâ€çš„é™åˆ¶éå¸¸çš„æ— èŠ..$0$ æœ¬æ¥å°±æ˜¯çº¿æ€§åŸºçš„çº¿æ€§ç»„åˆä¹‹ä¸€ï¼Œéè¦é€‰â€œéç©ºé›†åˆâ€ï¼Œå°±å¾—åˆ¤ä¸€ä¸‹ç»™ä½ çš„æ•°ä¸­æœ‰æ²¡æœ‰èƒ½è¢«å…¶å®ƒçº¿æ€§åŸºè¡¨ç¤ºçš„æ•°ï¼Œå®é™…ä¸Šåˆ¤ä¸€ä¸‹çº¿æ€§åŸºä¸­å…ƒç´ ä¸ªæ•°æ˜¯å¦ä¸º $nâ€‹$ å³å¯ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef unsigned long long ull; const int N = 100010; int n, m, cnt; ull p[60], a[60]; int main() { int i, j; ull x, k; scanf(\u0026quot;%d\u0026quot;, \u0026amp;n); for (i = 1; i \u0026lt;= n; ++i) { scanf(\u0026quot;%llu\u0026quot;, \u0026amp;x); for (j = 51; ~j; --j) { if ((x \u0026gt;\u0026gt; j) \u0026amp; 1) { if (p[j]) x ^= p[j]; else { for (k = j - 1; ~k; --k) if ((x \u0026gt;\u0026gt; k) \u0026amp; 1) x ^= p[k]; for (k = j + 1; k \u0026lt;= 60; ++k) if ((p[k] \u0026gt;\u0026gt; j) \u0026amp; 1) p[k] ^= x; p[j] = x; break; } } } } for (i = 0; i \u0026lt;= 51; ++i) if (p[i]) a[cnt++] = p[i]; scanf(\u0026quot;%d\u0026quot;, \u0026amp;m); while (m--) { scanf(\u0026quot;%lld\u0026quot;, \u0026amp;k); if (k \u0026gt;= (1ull \u0026lt;\u0026lt; cnt) + (cnt != n)) { puts(\u0026quot;-1\u0026quot;); continue; } if (cnt != n) --k; for (x = i = 0; i \u0026lt; cnt; ++i) { if ((k \u0026gt;\u0026gt; i) \u0026amp; 1ull) { x ^= a[i]; } } printf(\u0026quot;%llu\\n\u0026quot;, x); } return 0; }   ä¸€äº›ä¾‹é¢˜ [SCOI2016]å¹¸è¿æ•°å­—ï¼Œç”±äºä¸å¸¦ä¿®ï¼Œå€å¢ç»´æŠ¤çº¿æ€§åŸºå³å¯ã€‚ç”¨ç‚¹åˆ†æ²»å¯ä»¥ä¸€ä¸ª log è§£å†³ã€‚\n[BJWC2011]å…ƒç´ ï¼Œè´ªå¿ƒï¼Œä»å¤§åˆ°å°åˆ¤æ–­æ˜¯å¦èƒ½åŠ å…¥çº¿æ€§åŸºã€‚\n[JLOI2015]è£…å¤‡è´­ä¹°ï¼Œå’Œä¸Šä¸€é¢˜åŸºæœ¬ä¸€æ ·ï¼Œå°±æ˜¯æŠŠå¼‚æˆ–æ¢æˆé«˜æ–¯æ¶ˆå…ƒã€‚\n[CQOI2013]æ–°Nimæ¸¸æˆï¼Œç»“åˆ Nim æ¸¸æˆç»å…¸ç»“è®ºï¼Œè¿˜æ˜¯å’Œä¸Šé¢ä¸¤é¢˜ä¸€æ ·çš„ã€‚\n[WC2011]æœ€å¤§XORå’Œè·¯å¾„ï¼Œå¼‚æˆ–çš„ç»“æœå¿…ç„¶æ˜¯ä¸€æ¡é“¾å¼‚æˆ–ä¸Šè‹¥å¹²ä¸ªç¯ï¼Œæ‰¾å‡ºä»»æ„ä¸€æ¡é“¾ä»¥åŠåªå«ä¸€æ¡è¿”ç¥–è¾¹çš„ç¯å³å¯çº¿æ€§åŸºè§£å†³ã€‚\nshallotï¼Œçº¿æ®µæ ‘åˆ†æ²»ç»´æŠ¤çº¿æ€§åŸºã€‚\n","date":"2019-06-12T15:20:12+08:00","permalink":"https://ouuan.github.io/post/%E7%BA%BF%E6%80%A7%E5%9F%BA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","tags":["çº¿æ€§åŸº","çº¿æ€§ä»£æ•°"],"title":"çº¿æ€§åŸºå­¦ä¹ ç¬”è®°"},{"categories":["å‡ºé¢˜"],"contents":" ç­‰ä½ ç­‰äº†äº”åƒå¹´ï¼Œåªä¸ºè¿™ä¸€åˆ¹é‚£çš„å›çœ¸ä¸€ç¬‘ã€‚\n è¿™å¥è¯ä½œä¸ºå°å‰å¹•åçš„æ ‡å‡†å¼€å¤´åº”è¯¥æ˜¯æ²¡é—®é¢˜çš„ã€‚\nåªä¸è¿‡æœç„¶è¿˜æ˜¯å†™ä¸å‡º vfk çš„æ°´å¹³å•Š\u0026hellip;å†™çš„æ¯”è¾ƒæ•£ä¹±ã€‚è€Œä¸”æ˜¯å‰åæ–­æ–­ç»­ç»­åœ°å†™çš„ï¼Œæœ‰çš„å†™äºèµ›å‰ï¼Œæœ‰çš„å†™äºèµ›åï¼Œæ‰€ä»¥ä¼šæœ‰è¡Œæ–‡ä¸è¿è´¯çš„åœ°æ–¹ï¼Œå¯èƒ½ä¹Ÿä¼šæœ‰åæ¥å¿˜è®°ä¿®æ­£çš„åœ°æ–¹ã€‚\nå‰å¥ ï¼ˆå€Ÿç”¨ä¸€ä¸‹ vfk çš„æ ‡é¢˜ qaqï¼‰\nä¸€åˆ‡æºäºä¸€ç¯‡åšå®¢ã€‚\nå¤§çº¦æ˜¯è¿™ç¯‡å’Œè¿™ç¯‡ã€‚\nçœ‹åˆ°è¿™ç¯‡åšå®¢çš„æ—¶å€™ï¼Œæ˜¯å»å¹´ï¼ˆ2018ï¼‰åäºŒæœˆï¼Œæ‰‹é‡Œæ­£æœ‰åˆšåˆšæƒ³åˆ°çš„ä¸€ä¸ª ideaï¼Œä¹Ÿå°±æ˜¯ 1C â€”â€” Picturesã€‚\nå½“æ—¶æˆ‘è‡ªå·±æäº†ä¸ªç®€å•çš„éšæœºå›¾ç‰‡ï¼Œç„¶åè„‘æµ·é‡Œå°±å†’å‡ºäº†è¿™ä¸ª ideaï¼Œè™½ç„¶åˆšæƒ³å‡ºæ¥çš„æ—¶å€™å¹¶ä¸ä¼šåš..\nç„¶åå°±æ‹¿ç€å»æ‰¾ Sooke äº†..\næˆ‘ï¼šæ‚¨æœ‰å…´è¶£çœ‹ä¸€çœ¼æˆ‘å‡ºçš„ä¸€é“é¢˜å—ï¼Ÿ\nSookeï¼šæˆ‘ä¼š $2^nâ€‹$ã€‚\nSookeï¼šæƒ³å‡ºæ´›è°·å…¬å¼€èµ›ï¼Ÿ\næˆ‘ï¼šä¸ã€‚\nSookeï¼šæƒ³å‡º cfï¼Ÿ\næˆ‘ï¼šå—¯ã€‚\nç¿»ç¿»æ¶ˆæ¯è®°å½•å‘ç°å½“æ—¶è‡ªå·±å¤ªå¤©çœŸäº†\u0026hellip;ï¼ˆ2 months éƒ½ç®—å°‘çš„ï¼‰\nç„¶åæˆ‘åœ¨ä¸ä¼šåšçš„æƒ…å†µä¸‹ç¬¬äºŒå¤©å†™äº†ä¸ªè‹±æ–‡é¢˜é¢..\nç„¶å Sooke ç»™æˆ‘æ‰”äº†å¥—ä»–å‡ºç»™ PJ ç»„çš„é¢˜ï¼Œè®©æˆ‘ä»é‡Œé¢æŒ‘ç»™ Div.2ï¼Œç„¶åæˆ‘æŒ‘äº† 2B â€”â€” Chessã€‚ä¸€å¼€å§‹ Sooke è¿˜æƒ³æŠŠå®ƒæ”¾åœ¨ 2A..\nylh æƒ³äº†é“ä¸é”™çš„ 1Aï¼Œç„¶è€Œåæ¥å› ä¸ºæ ‘å¤ªå¤šå°±æ¢æ‰äº†..\nç„¶å PinkRabbit åŠ å…¥äº†å›¢é˜Ÿï¼ŒæŠŠ Pictures åˆ‡æ‰äº†ï¼ˆå…¶å®èŠ±äº† 2h\u0026hellip;åªä¸è¿‡æ¯”èµ›å’Œå‡ºé¢˜è¿˜æ˜¯ä¸ä¸€æ ·çš„ï¼Œåº”è¯¥æœ‰ä¸å°‘äºº Aï¼Ÿï¼‰ã€‚\nä¹‹åè«åæƒ³åˆ°äº† 2A çš„ ideaï¼Œåªä¸è¿‡é¢˜é¢ä¸€å¼€å§‹ä¸æ˜¯ upvote / downvoteï¼Œæ˜¯å¹¼å„¿å›­é‡Œè€å¸ˆç»™å°æœ‹å‹å‘ä¸¤ç§ç±»å‹çš„ç³–æœ..åæ¥æ„Ÿè§‰å‡º cf ç”¨ upvote / downvote æŒºåˆé€‚çš„ã€‚\nâ€œæˆ‘ä»¬è¿™åœºè¦æœ‰äº¤äº’é¢˜ï¼â€ æˆ‘åœ¨ç¾¤é‡Œå–Šå‡ºè¿™å¥è¯ï¼Œç„¶åæ²¡è¿‡å‡ å¤©æˆ‘å°±åœ¨æ´—æ¾¡çš„æ—¶å€™æƒ³åˆ°äº† 1D â€”â€” Binary Treeã€‚ä¸€å¼€å§‹æˆ‘è¿˜åŠ äº†ä¸ªå®ƒæ˜¯å †çš„é™åˆ¶ï¼Œè¿‡äº†å‡ ä¸ªæœˆæ‰æƒ³åˆ°å¯ä»¥ BFS\u0026hellip;æ ‘å‰–çš„åšæ³•æ˜¯ Sooke æƒ³åˆ°çš„ï¼Œä¹‹å‰æˆ‘å·®ç‚¹æƒ³ç”¨æˆ‘çš„ nsqrtn åš stdã€‚è¿™é“é¢˜æ˜¯è¿™æ ·çš„ï¼Œæœ‰ä¸€æ£µä»¥ $1$ ä¸ºæ ¹çš„äºŒå‰æ ‘ï¼Œä½ å¯ä»¥è¯¢é—®ä¸¤ç‚¹é—´è·ç¦»ï¼Œåœ¨ $n\\log n$ æ¬¡è¯¢é—®å†…æ±‚æ¯ä¸ªç‚¹çš„çˆ¶äº²ã€‚\nç„¶å ylh æƒ³äº†ä¸ª 1Bï¼Œç»“æœæœ€åä¹Ÿæ²¡æœ‰è¢«é‡‡ç”¨ qaq\nè¿™æ ·å…­é“é¢˜å°±é½äº†ï¼Œç„¶è€Œæœç„¶è¿˜æ˜¯ä¸æƒ³å‡º div.2 only é¸­\u0026hellip;åˆ°å¤„æ‰¾äººè¦é¢˜æ²¡è¦åˆ°ï¼ˆåŒ…æ‹¬åæ¥å‡ºäº†ä¸¤ä¸€é¢˜çš„ lk..ï¼‰ï¼Œç»“æœ lk è·Ÿæˆ‘è¯´ lxl å¯ä»¥å‡ºé¢˜ã€‚ç„¶åå°±æœ‰äº† 1F1Eã€‚lxl è¯´è¦è‡ªå·±å†™é¢˜é¢ï¼Œç„¶è€Œä¸€ç›´å’•äº†å‡ ä¸ªæœˆéƒ½æ²¡å†™..\nç„¶å..å½“æ—¶æˆ‘ä»¬çš„æƒ³æ³•æ˜¯å‡ºäº”é¢˜åœºï¼ŒæŠŠ pictures / binary tree æ”¾ div.1ï¼Œå·®ç‚¹éƒ½æäº¤ proposal äº†ï¼Œç„¶è€Œæˆ‘è¿˜æ˜¯è§‰å¾— 1B å¾—æ¢..\nç„¶åï¼Œæˆ‘å»äº†é›…ç¤¼é›†è®­ï¼Œå’Œ lk é¢åŸºäº†ï¼Œå°±æœ‰äº† 1E â€”â€” GCDã€‚ä¸€å¼€å§‹ GCD æ˜¯æ²¡æœ‰æ ¹å·ä¸å¸¦ log åšæ³•çš„ï¼Œå¯ lxl é—®äº† cczï¼Œå°±æœ‰äº†ã€‚\nç„¶å Sooke å‡ºäº†ä¸€é“ dl çš„åšå¼ˆè®ºï¼Œæˆ‘ä¸å¤ªå–œæ¬¢ï¼Œç„¶è€Œä¸€å¼€å§‹è¿˜æ˜¯è®©å®ƒè¿‡äº†..æœ€åè¿˜æ˜¯ç»™æ¢äº† qaq\nåæ¥ lk å‡ºäº† 2Cï¼ˆä¸€å¼€å§‹æ‰‹ç‰Œå’Œç‰Œå †çš„ç‰Œä¸ä¸€å®šç›¸ç­‰ï¼Œæˆ‘ä¸ä¼šåšï¼Œå°±æ”¹æˆäº†ç›¸ç­‰..ï¼‰ï¼ŒSooke æ‹¿å‡ºäº† 2Dï¼Œè¿™åœºå°±æœ‰äº†ã€‚\nå‡†å¤‡ ä¸€å¼€å§‹æˆ‘ä»¬è¿˜æƒ³æŠ¢ round 555 çš„ï¼ˆå— vfk 250 çš„å½±å“ qaqï¼‰..\nç»™ 300iq å‘äº†ä¸ªç§ä¿¡ï¼Œé—®ä»€ä¹ˆæ—¶å€™èƒ½å®¡ï¼Œèƒ½ä¸èƒ½æŠ¢ 555ã€‚ç„¶å..\nä¸€å¼€å§‹è¿˜ä»¥ä¸ºå¯ä»¥çš„ï¼Œç»“æœå‘ç°ç¬¬ä¸€æ¡æ‰æ˜¯çœŸçš„ï¼Œç¬¬äºŒæ¡æ˜¯å‡çš„..ï¼ˆæ³¨æ„ cf ç§ä¿¡é¡ºåºä»ä¸‹å¾€ä¸Šï¼‰\næˆ‘ä»¬ä¹‹å‰å‡ºé¢˜çš„æ—¶å€™å°±å‡ ä¹æŠŠ Polygon ä¸Šè¦å¹²çš„äº‹å¹²å®Œäº†ï¼Œç„¶è€Œï¼ŒAleph0ï¼ˆround 551 å‡ºé¢˜äººï¼‰å‘æ¥äº†ä¸€ä»½ cf å‡ºé¢˜é¡»çŸ¥ï¼ˆä¸çŸ¥é“æ˜¯ä¸æ˜¯ vfk åšå®¢é‡Œæåˆ°é‚£ä¸ªé•¿ç¯‡è‹±è¯­é˜…è¯»..ï¼‰ï¼Œç„¶åå‘ç°ä¸€å †ä¸œè¥¿è¦æ”¹..åªä¸è¿‡ä¸€ä¸¤å¤©ä¹Ÿå°±æ”¹å®Œäº†ã€‚æœ€å¤§çš„é—®é¢˜æ˜¯æ•°æ®è¦ä¹ˆçº¯æ‰‹é€ è¦ä¹ˆç”¨ generatorï¼Œå³ä¸èƒ½ç”¨æ•°æ®ç”Ÿæˆå™¨ç”Ÿæˆå‡ºæ¥æ”¾ Polygon ä¸Š..æˆ‘è‡ªå·±é€ çš„æ•°æ®è¿˜å¥½ï¼Œlxl çš„æ•°æ® generator çš„å‚æ•°å·²ç»å¼„ä¸¢äº†ï¼Œè€Œä¸”lxl åˆç‰¹åˆ«å’•ã€‚\nå¬è¯´ 300iq æœ‰ qqï¼Œæ‰€ä»¥å°±è¯•ç€åŠ äº†ä¸€ä¸‹ 300iqï¼Œæ‹‰è¿›äº†ç¾¤é‡Œã€‚\nç„¶åæ˜¯ 300iq å¼€å§‹å®¡ï¼ˆguï¼‰é¢˜ï¼ˆguï¼‰ï¼Œé¢˜ç›®æ¯”è¾ƒé¡ºåˆ©åœ°å…¨è¿‡å®¡äº†ï¼Œï¼ˆç„¶è€Œæ–­æ–­ç»­ç»­çš„ç­‰äº†å¥½å‡ å¤©ï¼‰ï¼Œbinary tree è·å¾—äº† \u0026ldquo;Great problem!\u0026rdquo; çš„è¯„ä»·ã€‚å¾—çŸ¥å¿…é¡»æ”¾ Java è¿‡ï¼Œç„¶è€Œä¸éœ€è¦è®© Java åœ¨ä¸€åŠæ—¶é™å†…é€šè¿‡ï¼ˆå°¤æŒ‡ GCD è¿™é¢˜ï¼Œä¸ç„¶å¡ä¸æ‰å¸¦ log åšæ³•äº†\u0026hellip;ï¼‰ï¼Œè¿˜æ˜¯æ¯”è¾ƒå¯ä»¥æ¥å—çš„..\n300iq å¥½åƒæœ‰éªŒä¸å®Œçš„é¢˜å’Œæ— å°½çš„ coordinatingï¼Œæ‰€ä»¥ç»å¸¸å¤±è¸ª..contribution åªæ’ç¬¬ä¸ƒä¸¾æŠ¥äº†ã€‚\nå†³å®šæ¯”èµ›æ—¶é—´çœŸæ˜¯ä»¶éš¾äº‹..ä»ä¸€å¼€å§‹çš„ round 555 æŠ¢ä¸åˆ°ï¼Œåˆ° 5.18 æ˜¯ APIO \u0026amp; ä¿„ç½—æ–¯æœ€åä¸€è½®å›½å®¶é˜Ÿé€‰æ‹”ï¼ˆè¿™ä¿©æ˜¯ä¸€ä¸ªä¸œè¥¿..ï¼‰ï¼Œå†åˆ° 5.21 ~ 5.26 å¾—æ”¾å¼ƒ whk / sc é€‰æ‰‹ï¼Œç„¶å 6.8 å’Œ Google Code Jam å†²çªï¼Œ6 æœˆä¸€å † whk è€ƒè¯•ï¼Œ7 æœˆä¸ä»…å¤ªæ™šè¿˜æœ‰ ISIJï¼ŒNOIâ€¦â€¦æ— è®ºé€‰ä»€ä¹ˆæ—¶é—´éƒ½ä¼šæ”¾å¼ƒä¸€éƒ¨åˆ†äººï¼Œå°±åƒæŸéƒ¨é—¨å†³å®šè°ƒæ•´æŸäº›æ”¿ç­–ä¸€æ ·ã€‚\næœ€åè¿˜æ˜¯ç«¯åˆèŠ‚æ‹¯æ•‘ä¸–ç•Œ..å¤§å®¶å¥½åƒéƒ½æ¯”è¾ƒåŒæ„ 6.7ã€‚\nä»åŒ—äº¬å›æ¥çš„é«˜é“ä¸Šï¼Œçªç„¶çœ‹åˆ° Sooke åœ¨ç¾¤é‡Œâ€œA big hug to 300iq!â€\nè¯¶è¯¶è¯¶ï¼Œä¸Š contests äº†ï¼\nè¯¶è¯¶è¯¶ï¼Œä¹‹å‰å¼€ç©ç¬‘è¯´çš„ 0x233 çœŸæ¥äº†ï¼\näºæ˜¯æƒ³æä¸ªä»€ä¹ˆå®£ä¼ ä¸€ä¸‹ã€‚\næƒ³äº†æƒ³æ„Ÿè§‰é›€ä¸é”™ï¼Œå°± p äº†å¼ å›¾ï¼š\nç»“æœæœ€åè¿˜æ˜¯æ’è¿›æ¥ä¸€åœº Div.2 \u0026hellip; 0x233 æ²¡äº†\u0026hellip;\nlxl è‡ªå·±è¯´è¦å†™é¢˜é¢ï¼Œå’•äº†ä¸¤ä¸ªå¤šæœˆï¼Œç»ˆäºï¼š\nç„¶å xht37 å’Œç¥ä»™ rushcheyo éƒ½æ¥éªŒé¢˜äº†ã€‚å¬è¯´æ‰€æœ‰é¢˜éƒ½è¢« rushcheyo ç§’äº†..\né£æ€’ Round #0x233 å¼€å§‹äº†ã€‚\nSookeï¼šè¿™ä¸ª F ä¹Ÿæ˜¯æ ‘ä¸Šé—®è·ç¦»è¯¶ã€‚\næˆ‘ï¼šå¥½åƒå’Œ WC2018 å³æ—¶æˆ˜ç•¥æœ‰ç‚¹åƒï¼Ÿ\nå†ä¸€çœ‹..éå¸¸å†·é™åœ°åœ¨ç¾¤é‡Œå®£å¸ƒï¼Œæˆ‘ä»¬çš„ 1D binary tree æ²¡äº†ã€‚\nUPDï¼šBinary Tree å·²ä¸Šä¼ è‡³ GuOJ å’Œ LOJã€‚\näºŒå‰æ ‘è¢«æ›¿æ¢ä¸ºäº†æ“ä½œäºŒï¼Œå‰©ä¸‹çš„éƒ¨åˆ†å’Œæˆ‘ä»¬é¢˜çš„åšæ³•å®Œå…¨ä¸€æ ·â€”â€”æ ‘å‰–ã€‚\næ„Ÿè§‰æŒºéš¾å—çš„..èµ›å‰å››å¤©æ’é¢˜è°é¡¶å¾—ä½å•Šã€‚è€Œä¸”æˆ‘è‡ªå·±æŒºå–œæ¬¢è¿™é¢˜çš„ï¼Œæ„Ÿè§‰åšæ³•éå¸¸å·§å¦™ã€‚è€Œä¸”æˆ‘ä»¬çš„é¢˜ä¸ç»™å‡ºæ ‘çš„å½¢æ€ï¼Œæœ‰çš„åšæ³•åªèƒ½è¿‡é‚£é“é¢˜ï¼Œä¸èƒ½è¿‡æˆ‘ä»¬è¿™é¢˜ã€‚\nåªä¸è¿‡ Sooke ä¹‹å‰å°±æè¿‡ Portals è¿™é“é¢˜ï¼Œäºæ˜¯å°±æƒ³æ¢æˆ Portalsã€‚\nä¸€æ³¢æœªå¹³ï¼Œä¸€æ³¢åˆèµ·ã€‚\ncyï¼šè¿™ä¸ª GCD å¥½åƒå’Œä¸€åœºä¸­å›½æ¯”èµ›æœ‰ç‚¹åƒã€‚\nç„¶åæ‰”ä¸Šæ¥ä¸€ç¯‡é¢˜è§£ï¼Œæ±‚çš„ä¸œè¥¿ä¸ä¸€æ ·ï¼Œä½†åšæ³•å¤§åŒå°å¼‚ã€‚\nokï¼Œé£æ€’æ’é¢˜ã€‚\nç„¶åç¾¤é‡Œå°±å„ç§æ–¹æ¡ˆäº†..\ncy æ‰”ä¸Šæ¥äº†å››é“é¢˜..\nlkï¼šæˆ‘å»æ‰¾ _rqy è¦ä¸€é“è®¡æ•°ï¼\nlxlï¼šç¬¬åä¸€åˆ†å—ï¼\näºæ­¤åŒæ—¶ï¼Œæˆ‘ä»¬å‘ç° Portals åŸæ¥æƒ³çš„åšæ³•æ˜¯å‡çš„ï¼Œç»™ 300iq ä¹Ÿæ²¡èƒ½åˆ‡æ‰..\nå½“æ—¶æœ‰ç‚¹æƒ³å‡ºäº”é¢˜åœºï¼Œæˆ–è€…å¼ºè¡ŒæŠŠ GCD å‡ºå‡ºæ¥ï¼Œæ¯•ç«Ÿä¸å®Œå…¨ä¸€æ ·ã€‚\nåªä¸è¿‡å¥½æ¶ˆæ¯è¿˜æ˜¯ä¼ æ¥äº†ï¼ŒSooke æƒ³åˆ°äº† Portals çš„æ­£è§£ï¼ŒBugï¼ˆå…¶å®æˆ‘ç°åœ¨æƒ³æ¢è¿™é¢˜åå­—äº†ï¼Œè¿˜æ˜¯ modadd å¥½å¬ï¼‰çš„åˆ†å—åšæ³•å’Œçº¿æ®µæ ‘åšæ³•ä¹Ÿç›¸ç»§æœ‰äº†ã€‚\nç„¶åï¼Œç»è¿‡è®¨è®ºï¼Œæˆ‘ä»¬ä¸çŸ¥é“ä¸ºä»€ä¹ˆè§‰å¾—æ¢é¢˜ä¹‹åç é‡æ¯”åŸæ¥å‡å°‘äº†ï¼Œç»“æœå°±å†³å®šæŠŠæ—¶é—´æ”¹æˆ 2hã€‚\nlk åšæŒè®¤ä¸º portals æ˜¯ä¸€é“éå¸¸éš¾çš„é¢˜ã€‚cy ç»™ portals çš„è¯„åˆ†æ¯” 1EF éƒ½é«˜ã€‚æœ€åè¿˜æ˜¯æ”¾åœ¨äº† 1Dã€‚ç„¶åèµ›åè¢«å–· PJ é¢˜æ”¾ 1Dã€‚æœ€åæ¯é¢˜ AC äººæ•°è¿˜æ˜¯å•è°ƒä¸‹é™çš„ï¼Œè¯´æ˜é¢˜ç›®é¡ºåºå®‰æ’çš„æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚å…³äº cards å’Œ circleï¼Œæˆ‘ä»¬æ˜¯è®¤ä¸ºå¯¹äº div.2 é€‰æ‰‹ circle æ›´éš¾ï¼Œè€Œ div.1 é€‰æ‰‹é¡ºåˆ‡æ— æ‰€è°“ï¼Œæ‰€ä»¥å°±è¿™æ ·æ”¾äº†ã€‚è€Œä¸” circle æ›´ç®€å•ä¹Ÿå¯èƒ½æ˜¯å¯¹äºä¸­å›½é€‰æ‰‹ã€‚è€Œä¸”æˆ‘ä»¬è¿™åœºæ¯ä¸ªå¶æ•°é¢˜éƒ½æ¯”å‰ä¸€é¢˜å¥½å†™ã€‚\nå› ä¸º cy æŠŠ lxl é¢˜åˆ‡äº†ï¼Œmodadd åšäº†æ¯”è¾ƒä¹…ï¼Œè€Œä¸” lxl å’Œ 300iq éƒ½è®¤ä¸º modadd æ›´éš¾ï¼Œè€Œä¸”æˆ‘çœ‹äº†é¢˜è§£ä¹‹åä¼šåš lxl é¢˜ä¸ä¼š modaddï¼Œæ‰€ä»¥å°±æŠŠ modadd æ”¾åœ¨äº† Fã€‚\näºæ˜¯æ¯”èµ›çš„é¢˜ç›®å¾—åˆ°äº†æœ€ç»ˆçš„ç¡®å®šï¼Œä¹Ÿå°±æ˜¯å¤§å®¶çœ‹åˆ°çš„è¿™å‡ é¢˜ã€‚\nç„¶åå°±æ˜¯ç´§å¼ çš„é€ é¢˜äº†ã€‚\nå†™ modadd é¢˜é¢é‡Œçš„ä¼ªä»£ç æ—¶ï¼Œå»ç½‘ä¸Šæœäº†åŠå¤©ï¼Œç»ˆäºæå‡ºæ¥äº†ä¸€ä»½ç‰¹åˆ«ä¸‘çš„..ç„¶åæƒ³èµ·æ¥ 3 LGM é‚£åœº Chinese Round çš„ G æœ‰ä¼ªä»£ç ï¼Œå°±å»æ‰¾è±¡è¦ï¼Œç»“æœæ²¡è¦åˆ°..è‡ªå·±ç ”ç©¶äº†åŠå¤©æ–‡æ¡£è¿˜æ˜¯ä¸ä¼šï¼Œå°±å»æ‰¾ zzq è¦ï¼Œç„¶åé¡ºåˆ©è¦åˆ°äº†ã€‚\nç”±äºè‡ªå·±æœ¬æ¥å°±èœï¼Œåˆè¢«é•¿æœŸçš„ç¡çœ ä¸è¶³ + æåº¦ç´§å¼ çš„é€ é¢˜ç»™é™æ™ºï¼Œæˆ‘çœ‹äº†åŠå¤© cy å†™çš„ modadd é¢˜è§£éƒ½ä¸ä¼šåš..ç„¶åæˆ‘è¦åœ¨ä¸ä¼šåšçš„æƒ…å†µä¸‹é€ æ•°æ®..å°±èƒ¡ä¹±é€ äº†ä¸€ç‚¹ã€‚åªä¸è¿‡è¿™é¢˜å°±ç®—çº¯éšæœºåº”è¯¥ä¹Ÿå¤Ÿå¼ºã€‚\næœ¬æ¥ lxl é¢˜çš„æ•°æ®ä¹Ÿæ˜¯ä¸ªå¤§é—®é¢˜ï¼Œæˆ‘è‡ªå·±æ˜¯ä¸ªé“¾èŠèŠ±éšæœºå®Œå…¨äºŒå‰æ ‘å‡ºé¢˜äººï¼Œlxl åˆæ˜¯åªé¸½å­..å¹¸å¥½ 300iq å¸®å¿™é€ äº†ä¸€ç‚¹æ•°æ®ï¼ŒæŠŠ Spalyï¼ˆå•æ—‹ï¼‰ä¹Ÿå¡æ‰äº†ã€‚\nå¤§çº¦åœ¨æ¯”èµ›å‰ 2hï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰ä¸œè¥¿éƒ½é€ å®Œäº†ã€‚ç„¶åï¼ŒKAN çªç„¶åœ¨èµ›å‰ 1h å‡ºç°ï¼Œåˆ æ‰äº†ä¸€å †é¢˜é¢é‡Œçš„é€—å·ï¼Œæäº†ä¸€å †é¢˜é¢çš„ Issues..ç„¶åå°±ä¸åœä¿®é”…ï¼Œå·®ç‚¹éƒ½å¿˜è®°å‘ scoring distribution äº†ã€‚\nèµ›å‰ 5min çš„æ—¶å€™ç»ˆäºæŠŠ KAN æçš„æ‰€æœ‰ Issues fix äº†..\nä¸ºäº†è¿è´¯æ€§å…ˆè®²äº†ä¸‹é€ é¢˜çš„äº‹ã€‚\nç„¶åæ˜¯ä¸Šå¸è§†è§’..å…¶å®å…¶å®ƒæƒé™éƒ½æ²¡æ€ä¹ˆç”¨ï¼Œåªä¸è¿‡ ban æ‰äº† xht37 å‚åŠ æ¯”èµ›ï¼ˆ\nåªä¸è¿‡æœ‰çš„é€‰é¡¹çœ‹ç€å¾ˆçˆ½ï¼Œæ¯”å¦‚ï¼Œä¸€å¼€å§‹ problems æ˜¯ç©ºçš„ä½ å¯ä»¥ add problemsï¼ˆæœ€åæ˜¯ 300iq è¿˜æ˜¯è°åŠ çš„ï¼Œé‚£æ—¶æˆ‘è¿˜åœ¨ä¿®é”…ï¼‰ï¼Œè¿˜æœ‰å–œé—»ä¹è§çš„ Is it rated? é€‰é¡¹ï¼Œrated èŒƒå›´ï¼Œèƒ½å¦æŸ¥çœ‹æ’è¡Œæ¦œï¼Œä»€ä¹ˆæ—¶å€™å¼€å§‹å°æ¦œï¼Œèƒ½ä¸èƒ½ vpã€‚\nèµ›å‰åœ¨é€ é”…å’Œä¿®é”…ä¹‹ä½™ï¼Œä¹Ÿä¼šç›¯ç€ registrants çœ‹ã€‚ç„¶åå°±çœ‹åˆ° JOHNKRAM æŠ¥äº†ï¼Œå¸æŠ¥äº†ï¼Œxyx æŠ¥äº†ï¼Œmyy æŠ¥äº†ï¼ŒACRush æŠ¥äº†ï¼Œ_rqy æŠ¥äº†ï¼Œtxc æŠ¥äº†ï¼ŒRadewoosh æŠ¥äº†ï¼Œ800iq æŠ¥äº†ï¼Œdmy æŠ¥äº†ï¼Œkcz æŠ¥äº†ï¼Œyyb æŠ¥äº†ï¼Œljh æŠ¥äº†ï¼Œwqy æŠ¥äº†ï¼Œyww æŠ¥äº†â€¦â€¦ç¾¤é‡Œå¤§çº¦å°±æ˜¯ä¸Šæ–‡å»æ‰é€—å·ï¼ŒåŠ ä¸Šæ¢è¡Œç¬¦å’Œæ„Ÿå¹å·ã€‚\næœ€åå€’è®¡æ—¶çš„æ—¶å€™çœŸçš„å°±åƒ vfk é‚£ç¯‡åšå®¢ä¸€æ ·ã€‚\nè¿˜æœ‰ 5 ç§’ã€‚\né¢˜é¢æœ‰é”…å—ï¼Ÿ\nè¿˜æœ‰ 4 ç§’ã€‚\næ•°æ®æœ‰é”…å—ï¼Ÿ\nè¿˜æœ‰ 3 ç§’ã€‚\né¢˜é¢æˆ–è€…æ•°æ®æœ‰é”…å—ï¼Ÿ\nè¿˜æœ‰ 2 ç§’ã€‚\né¢˜é¢å’Œæ•°æ®æœ‰é”…å—ï¼Ÿ\nè¿˜æœ‰ 1 ç§’ã€‚\næœ‰é”…ä¹Ÿä¿®ä¸äº†äº†ï¼Œcontribution è§é¬¼å»å§ï¼\n\u0026hellip;..\næ²¡åŠæ³•ï¼Œèµ›å‰ 5min è¿˜åœ¨ä¿®é”…çš„æˆ‘å°±æ˜¯è¿™ä¹ˆæƒ³çš„..åªä¸è¿‡æœ€åé™¤äº† circle çš„æ ·ä¾‹è§£é‡Šæ²¡ä»€ä¹ˆé”…ã€‚\næ¯”èµ› æ¯”èµ›å°±è¿™ä¹ˆå¼€å§‹äº†ã€‚cf å¹¶æ²¡æœ‰å¡è¯¶ã€‚\nDiv.1 æ€ä¹ˆå¡ä½äº†..\nå®Œäº†ï¼Œå²ä¸Šæœ€éš¾ 1A å®é”¤äº†..\n6min çš„æ—¶å€™ç»ˆäºæœ‰äººè¿‡äº† 1Aï¼Œdiv.2 é‚£è¾¹å·²ç»æˆç‰‡è¿‡ A äº†ã€‚\nç„¶åç¬¬äºŒä¸ª div.1 AC æ˜¯ B..å®Œäº†ï¼Œè¦è¢«å–· swap(A, B) äº†ã€‚\n25min çš„æ—¶å€™æœ‰äººè¿‡ 1D äº†ã€‚èµ›å‰æˆ‘å°±å¥¶è¿‡ portals ä¸€è¡€ä¼šæ¯” pictures æ—©ï¼Œlk è¿˜ä¸ä¿¡ã€‚\nç„¶åæˆ‘ä»¬å°±çœ‹ç€å¸ç™»é¡¶ä¹‹åä¸€ç‚¹ç‚¹åœ°å¾€ä¸‹æ‰..\nèµ›æ—¶çœŸçš„å¯ä»¥çœ‹ system test çš„ç»“æœï¼Œåªä¸è¿‡è¯„æµ‹ä¼˜å…ˆåº¦æ¯”è¾ƒä½ã€‚åœ¨ problems ç•Œé¢è¿˜å¯ä»¥çœ‹åˆ°æ¯é¢˜å·²ç»æµ‹äº†å‡ ä¸ªäººçš„ stï¼Œå…¶ä¸­æœ‰å¤šå°‘ä¸ªè¿‡äº†ã€‚æˆåŠŸè®© Sooke å­¦åˆ°äº†å†å¼ºçš„ pt ä¹Ÿä¼šæœ‰äºº fst è¿™ä¸ªé“ç†ã€‚\nå½“ç„¶æˆ‘ä»¬è¿˜å¾—å›ç­”å‚èµ›è€…çš„æé—®ã€‚\n what mean is the draw the top card from the pile?\næ„æ€æ˜¯ å¯ä»¥åœ¨æœ€é¡¶ä¸Šçš„ä¸€å¼ ç”»ç”»ï¼Ÿ\n æµ·æ˜Ÿï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ç”»æ•°å­—ä¸Šå»ã€‚\n In Test 1\nwhy is the output:\n2\n1 1\n2 1\nis wrong?\nI think it is legitimate.\n ä¸€çœ‹è¯„æµ‹è®°å½•ï¼Œä»–ç¬¬ä¸€è¡Œè¾“å‡ºçš„ 1ï¼Œæ‚²æƒ¨çš„æ•…äº‹ã€‚\né—®çš„æœ€å¤šçš„æ˜¯ pictures æƒå€¼å‡åˆ°è´Ÿæ€ä¹ˆåŠ..äºæ˜¯è®© 300iq å‘äº†ä¸ª announcementã€‚\nè¿˜æœ‰ä¸€ä½åšç§° cards æ ·ä¾‹ 3 ç­”æ¡ˆæ˜¯ 16 çš„è€å“¥ï¼Œå¥½åƒæ˜¯åœ¨æ‰‹ä¸ŠæŠŠç‰Œæ’å¥½åºäº†ã€‚\n Hi! I am a Chinese! Could you explain why there is a \u0026ldquo;19****17\u0026rdquo; in the sample 3?\n å›ç­”åˆ†ä¸º textï¼Œyesï¼Œno å’Œ no commentsï¼Œæ­£å¥½å¯ä»¥å›ç­”ä»–ã€‚\n problem D in the example the edges for bad permutation are drawn incorrectly\n å—¯ï¼Œé¢ï¼Œè¯¶ï¼Ÿï¼Ÿwoc çœŸçš„ç”»é”™äº†..æ‰“å¼€æœ¬åœ°é€  notes çš„ pptxï¼Œå‘ç°æ˜¯å¯¹çš„..è¿™ä¸ªé”… Sooke èƒŒäº†ã€‚\nèµ¶ç´§è®© 300iq å‘äº†ä¸ª announcementï¼Œç„¶åå»ä¿®é”…ã€‚\nä¿®å¥½äº†ä¹‹åè®© 300iq å‘ä¸ª fixedï¼Œç»“æœä¸€ç›´æ²¡å‘..\nç„¶åçœ‹åˆ°å¸åœ¨çŒ›è‚ 1F..ç„¶åå¬ç¾¤å‹ä»¬è¯´ï¼Œä»–å†™çš„æ˜¯ 1 log æ­£è§£ï¼Œè¢«å¡å¸¸äº†..wocï¼Œé‚£ä¸æ˜¯å¾—å»è°¢ç½ªï¼Œå¡åˆ†å—æŠŠ treap å¡æ‰äº†..ä½†æˆ‘ä»¬ä¸èƒ½åšä»€ä¹ˆï¼Œåªèƒ½ä¸ºä»–é»˜å“€ã€‚åæ¥æ‰å¬è¯´å¸å†™çš„ $\\log^2$..\n300iqï¼šcheck it outï¼Œhttps://codeforces.com/contest/1172/submission/55260499 ã€‚\nç„¶åä¹‹ååŠä¸ªå°æ—¶å‡ ä¹éƒ½åœ¨å°è¯•å¡ä»–..ç„¶è€Œæ ¹æœ¬å¡ä¸æ‰..èµ›åç§ä¿¡é—®ä»–ï¼Œä¹Ÿæ²¡å¤ªçœ‹æ‡‚ä»–çš„åšæ³•ï¼Œåªä¸è¿‡ä»–è¯´ä»–ç›¸ä¿¡è¿™ä¸ªåšæ³•æ˜¯å¯¹çš„..\nç„¶ååœ¨è¿·è¿·ç³Šç³Šçš„çœ‹æ¦œï¼Œå›ç­”é—®é¢˜ï¼Œå°è¯•å¡äººä¸­ï¼Œ2h å°±è¿™ä¹ˆè¿‡å»äº†ã€‚\ndmy è¢«æˆ‘ä»¬é€ä¸Šé»‘çº¢äº†ï¼Œç„¶è€Œå¥½å¤šç¥ä»™è¢«ç‹™äº†..\n1F çš„è‹±æ–‡é¢˜è§£è¿˜æ²¡å¥½..contribution è¦æ²¡äº†ã€‚\næœç„¶æ¯”èµ›ç»“æŸ announcement çš„ up å°±å¼€å§‹å¾€ä¸‹æ‰ï¼Œåªä¸è¿‡æ²¡æ‰å¾ˆå¤šã€‚\næœ‰ä½ç¥ä»™ hack äº† cardsï¼Œè€Œä¸”æ˜¯ hack äº†è¿‡äº† st çš„..ä¹‹åæˆ‘æ‰å‘ç°ï¼Œæˆ‘ä¹‹å‰æ²¡æ„è¯†åˆ°ä¸æ‰“ç©ºç™½ç‰Œå¯èƒ½æ­¥æ•°æ¯”æ±‚é‚£ä¸ª max è¿˜å¤§ï¼Œä»–çš„ test å°±æ˜¯é’ˆå¯¹è¿™ä¸ªå¡çš„ï¼Œå¦‚æœä½ å‘ç°èƒ½ç›´æ¥ 1~n å°±è¾“å‡ºç­”æ¡ˆå°±è¿‡äº†ï¼Œå¦‚æœæŠŠä¸¤è€…å– min å°±æŒ‚äº†ã€‚\nç„¶åå¼€å§‹å¼„ä¸­æ–‡é¢˜è§£ã€‚hexo åšå®¢æŠ˜å å—æ€»æ˜¯æ¼æ‰ç™¾åˆ†å·ï¼Œæ¼æ‰å¼•å·ï¼Œæäº†åŠä¸ªå¤šå°æ—¶æ‰æå¥½..\næäº†ä¸€æ•´å¤©ï¼Œæ•´ä¸ªäººéƒ½éå¸¸æ™•ï¼Œç„¶è€Œè¿™æ—¶æˆ‘è¦å°è¯•å»å†™è‡ªå·±è¿˜ä¸å®Œå…¨ä¼šçš„ 1F çš„è‹±æ–‡é¢˜è§£..å†™åˆ°ä¸€åŠè¿˜æ˜¯æ”¾å¼ƒäº†ï¼Œå°±å»å‘ editorialï¼Œå…ˆæŠŠ 1F ç©ºç€äº†ã€‚\nä¹‹å 300iq åŒæ„å¸®å¿™å†™é¢˜è§£ï¼Œå°±å»ç¡è§‰äº†ã€‚\nè‡ªæˆ‘æ„Ÿè§‰ good problems, bad roundã€‚å¦‚æœèƒ½ä¸å¼ºæ±‚åœ¨åŸå®šçš„ç«¯åˆèŠ‚æŠŠæ¯”èµ›å‡ºå‡ºæ¥ï¼Œæˆ–è®¸èƒ½åŠçš„æ›´å¥½ã€‚\nåè®° å‡ºè¿™åœº cfï¼Œç©¶ç«Ÿæ˜¯ä¸ºäº†ä»€ä¹ˆã€‚\nè‚¯å®šä¸æ˜¯ä¸ºäº†é’±ã€‚è™½ç„¶ cf ä¼šå‘å·¥èµ„ï¼Œä½†è¦æ˜¯ä¸ºäº†é’±ï¼Œæˆ‘è‚¯å®šä¸ä¼šå»å‡º cfï¼Œè¦è€—è´¹çš„æ—¶é—´ç²¾åŠ›å¤ªå¤šäº†ã€‚\nçœŸçš„ä¸æ¨èå…¶ä»–äººåœ¨é€€å½¹ä¹‹å‰å»å‡º cfï¼Œä¸ç„¶çš„è¯ï¼Œå¯èƒ½å‡ºç€å‡ºç€å°±é€€å½¹äº†ã€‚\næŠŠè¿™ä¹ˆå¤šæœ¬å¯ä»¥ç”¨æ¥åˆ·é¢˜çš„æ—¶é—´ç”¨æ¥å‡º cfï¼Œåæ‚”å—ï¼Ÿ\nå…¶å®ï¼Œä¹Ÿæ˜¯ä¸€ä»½å®è´µçš„ç»å†å§ã€‚ä¸å…¶è¯´åæ‚”ï¼Œä¸å¦‚è¯´å®³æ€•è‡ªå·±çš„åŠªåŠ›ä¸è¢«äººè®¤å¯ï¼Œå¦‚æœæ•°ç™¾å°æ—¶çš„åŠªåŠ›æ¢æ¥çš„æ˜¯ä»–äººçš„æ‰¹è¯„ç”šè‡³ unratedï¼Œå¯èƒ½å°±çœŸçš„ä¸åªæ˜¯åæ‚”äº†ã€‚\nå‡ºè¿™åœº cfï¼Œæˆ‘å¾—åˆ°äº†ä»€ä¹ˆå‘¢ï¼Ÿ\nä»¥å¾€çš„å›¢é˜Ÿåˆä½œä¸­ï¼Œæˆ‘è¦ä¹ˆæ˜¯ä½œä¸ºå‚ä¸è€…è€Œéç»„ç»‡è€…ï¼Œè¦ä¹ˆå…¶ä»–æˆå‘˜éƒ½åªæ˜¯é»˜é»˜å®Œæˆè‡ªå·±çš„ä»»åŠ¡ã€‚è€Œä¸”æ‰€è°“çš„â€œå›¢é˜Ÿåˆä½œâ€å¤šåŠæ˜¯å­¦æ ¡é‡Œæ‰€è°“çš„â€œç ”ç©¶æ€§å­¦ä¹ â€ã€‚è¦ç»Ÿä¸€å„æ–¹é¢çš„æ„è§ï¼Œçš„ç¡®æ˜¯ä¸€ä»¶éš¾äº‹ã€‚ä¸€å¼€å§‹é¢å¯¹â€œfst æ˜¯ cf çµé­‚â€çš„ Sookeï¼ˆçœ‹æ¥ä»–è´Ÿè´£çš„ cards æŒºæœ‰çµé­‚çš„\u0026hellip;ï¼‰ï¼Œç„¶åæ˜¯â€œæˆ‘ä¸€çœ¼å°±åˆ‡äº†â€å’Œâ€œæˆ‘æƒ³ä¸åˆ°å•Šâ€çš„ lkï¼Œâ€œæ¥é“å¤§åˆ†å—å•Šâ€ çš„ lxlï¼Œè¿˜æœ‰è‡ªè¯´è‡ªè¯ï¼Œä¸å¯¹è‡ªå·±è¯´çš„è¯é‡Œæåˆ°çš„æ¦‚å¿µåŠ ä»¥å®šä¹‰æˆ–è§£é‡Šï¼Œè®©äººæ ¹æœ¬çœ‹ä¸æ‡‚çš„ cyã€‚åè°ƒå„æ–¹çš„æ„è§å¯èƒ½æ˜¯ä¸€ä»¶éœ€è¦å­¦ä¹ çš„äº‹æƒ…å§ã€‚\nç„¶åçš„è¯ï¼Œä¹Ÿæ˜¯å½±å“æ¯”è¾ƒå¤§çš„ï¼Œæˆ‘å¯¹é¢˜ç›®å’Œå‡ºé¢˜äººçš„è¦æ±‚æå‡äº†å¾ˆå¤šã€‚å›é¦–è‡ªå·±ä¹‹å‰åœ¨æ´›è°·çš„ä¸¤åœºå…¬å¼€èµ›ï¼Œç¬¬ä¸€åœºæ¼æ´æ»¡ç¯‡ï¼Œæ»¡å±æ¯’ç˜¤ï¼Œç¬¬äºŒåœºä¹Ÿæœ‰ä¸å°‘çš„é—®é¢˜ã€‚å‡ºäº† cf ä¹‹åï¼Œä¸ä»…æ˜¯è‡ªå·±å‡ºé¢˜å˜å¾—æ›´åŠ è§„èŒƒäº†ï¼Œå¯¹è‡ªå·±åšçš„é¢˜è¦æ±‚ä¹Ÿæ›´ä¸¥äº†ã€‚å›½å†…å¾ˆå¤šé¢˜ç›®è´¨é‡å ªå¿§ï¼Œå› ä¸ºé¢˜ç›®çš„å¤–åœ¨ï¼ˆé¢˜é¢ã€é¢˜è§£ã€æ•°æ®èŒƒå›´ã€è¾“å…¥è¾“å‡ºæ ¼å¼ï¼‰è€Œé idea æœ¬èº«è¿‡äºæ¯’ç˜¤è€Œä¸æƒ³åšé¢˜çš„äº‹ä¹Ÿä¼šå‘ç”Ÿï¼ŒæŠ±æ€¨å…¶ä»–é¢˜ç›®ã€æ¯”èµ›æˆäº†å®¶å¸¸ä¾¿é¥­ã€‚ä½†å›é¦–æƒ³æ¥ï¼Œæˆ‘ä¹Ÿæ˜¯ä»ä¸€ä¸ªæ¯’ç˜¤å¤§æ¨¡æ‹Ÿã€æ— æ„ä¹‰ dp å‡ºé¢˜äººæˆé•¿èµ·æ¥çš„ã€‚\næˆ‘è®¨åŒä¸ç”¨å¿ƒçš„å‡ºé¢˜äººï¼Œè®¨åŒä¸ä¸¥è°¨ç”šè‡³è¯¯å¯¼äººçš„åšå®¢ï¼Œå› ä¸ºï¼Œæˆ‘è®¤ä¸ºå‡ºé¢˜ç»™åˆ«äººåšã€å†™åšå®¢ç»™åˆ«äººçœ‹æ˜¯åº”å½“å¯¹åˆ«äººè´Ÿè´£çš„ã€‚å¦‚æœæ²¡æœ‰ç²¾åŠ›ã€ä¸æƒ³è´Ÿè´£çš„è¯ï¼Œå‡ºé¢˜ç»™è‡ªå·±åšï¼Œåšå®¢ä¿å­˜åœ¨æœ¬åœ°å°±å¥½äº†ï¼Œå‘å‡ºæ¥å¹²ä»€ä¹ˆï¼Ÿå³ä½¿æ˜¯èƒ½åŠ›ä¸å¤Ÿï¼Œä¹Ÿå¾—æœ‰è®¤çœŸè´Ÿè´£çš„æ€åº¦æ‰è¡Œã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ«äººéª‚ä½ ï¼Œåªå½“éª‚é†’å¥½äº†ã€‚å¦‚æœéª‚ä¸é†’ï¼Œé‚£ç€å®è¯¥éª‚ã€‚\n ä¸€é“å¥½é¢˜åº”è¯¥è¢«ä»”ç»†æ¨æ•²è¿‡ã€‚å¥½é¢˜åº”è¯¥æœ‰å¾ˆå¼ºçš„æ•°æ®ï¼Œå¥½é¢˜åº”è¯¥æœ‰æ¸…æ™°çš„é¢˜é¢ï¼Œå¥½é¢˜çš„æ ‡ç¨‹åº”è¯¥ä¼˜ç¾é¢˜è§£åº”è¯¥è¯¦å°½ã€‚\nä¸€é“å¥½é¢˜ä¸åº”è¯¥æ˜¯ä¸¤é“é¢˜æ‹¼åœ¨ä¸€èµ·ï¼Œä¸€é“å¥½é¢˜ä¼šæœ‰è‡ªå·±çš„idea â€”â€” è€Œå®ƒåº”è¯¥ä¸åŠ è¿‡å¤šåŒ…è£…åœ°çªå‡ºè¿™ä¸ªideaã€‚\nä¸€é“å¥½é¢˜åº”è¯¥æ–°é¢–ã€‚çœŸæ­£çš„å¥½é¢˜ï¼Œåº”è¯¥æ˜¯èƒ½è®©äººè„‘æ´å‡ºæ–°çš„å¥½é¢˜çš„å¥½é¢˜ã€‚\nä¸€é“å¥½é¢˜åº”è¯¥å…·æœ‰å®ƒçš„é€‰æ‹”æ€§è´¨ï¼Œå…·æœ‰è¶³å¤Ÿçš„åŒºåˆ†åº¦ã€‚åº”è¯¥è‡³å°‘4æ¡£éƒ¨åˆ†åˆ†ï¼Œè®©æ–°æ‰‹å¯ä»¥æ‹¿åˆ°åˆ†ï¼Œè®©é«˜æ‰‹èƒ½å¤Ÿå±•ç¤ºè‡ªå·±çš„å®åŠ›ã€‚\nâ€”â€” vfkã€ŠUOJç²¾ç¥ä¹‹æºæµã€‹\n å½“æˆ‘æŒ‡å‡ºå…¶ä»–äººé¢˜ç›®é‡Œçš„ç§ç§ä¸è¶³ï¼Œå½“æˆ‘æŠ›å¼€ä»–äººåšå®¢ä¸­ä¸ä¸¥è°¨çš„è¯è¯­è€Œè±ç„¶å¼€æœ—å¤§å«åŸæ–‡ä¹‹æ¼æ´æ»¡ç¯‡æ—¶ï¼Œæœ‰æ²¡æœ‰æƒ³è¿‡ä»–äººä»˜å‡ºçš„å¿ƒè¡€å‘¢ï¼Ÿå½“ç„¶æœ‰ï¼Œåªæ˜¯æˆ‘è®¤ä¸ºå°Šé‡ä¸æ˜¯åŸºäºä»˜å‡ºï¼Œè€Œæ˜¯åŸºäºè´Ÿè´£çš„æ€åº¦ï¼ŒåŸºäºçœŸæ­£åšäº†ä»€ä¹ˆçš„ã€‚å°±å¥½æ¯”ä½ è¿½ä¸€ä¸ªå¥³å­©å­ï¼Œè¾›è¾›è‹¦è‹¦ä»˜å‡ºäº†é‚£ä¹ˆå¤šï¼Œå¦‚æœä¸æå‡è‡ªå·±ï¼Œå¦‚æœä¸ä»˜å‡ºçœŸå¿ƒï¼Œåˆ«äººå‡­ä»€ä¹ˆå–œæ¬¢ä½ ï¼Ÿ\nè¯´åˆ°åº•ï¼Œå¯¹å†™ç»™åˆ«äººçš„ä¸œè¥¿è´Ÿè´£ï¼Œæ˜¯æˆ‘è‡ªå·±çš„ä¸€ç§åšå®ˆï¼Œæˆ‘è‡ªå·±å¹¶ä¸æ˜¯æ€»èƒ½åšåˆ°ï¼Œä¹Ÿä¸æ˜¯ç”Ÿæ¥å°±èƒ½åšåˆ°ã€‚ä½†æˆ‘ä¼šåŠªåŠ›å»åšï¼Œæ— è®ºåœ¨æ€æ ·çš„å¤§ç¯å¢ƒä¸‹ï¼Œæˆ‘æƒ³å°½æˆ‘æ‰€èƒ½åˆ›é€ ä¸€ç‰‡å°å°çš„å‡€åœŸã€‚\n æˆ‘ä»¬æ‰€å¯ä»¥è‡ªæ…°çš„ï¼Œæƒ³æ¥æƒ³å»ï¼Œä¹Ÿè¿˜æ˜¯æ‰€è°“å¯¹äºå°†æ¥çš„å¸Œæœ›ã€‚å¸Œæœ›æ˜¯é™„ä¸½äºå­˜åœ¨çš„ï¼Œæœ‰å­˜åœ¨ï¼Œä¾¿æœ‰å¸Œæœ›ï¼Œæœ‰å¸Œæœ›ï¼Œä¾¿æ˜¯å…‰æ˜ã€‚å¦‚æœå†å²å®¶çš„è¯ä¸æ˜¯è¯³è¯ï¼Œåˆ™ä¸–ç•Œä¸Šçš„äº‹ç‰©å¯è¿˜æ²¡æœ‰å› ä¸ºé»‘æš—è€Œé•¿å­˜çš„å…ˆä¾‹ã€‚é»‘æš—åªèƒ½é™„ä¸½äºæ¸å°±ç­äº¡çš„äº‹ç‰©ï¼Œä¸€ç­äº¡ï¼Œé»‘æš—ä¹Ÿå°±ä¸€åŒç­äº¡äº†ï¼Œå®ƒä¸æ°¸ä¹…ã€‚ç„¶è€Œå°†æ¥æ˜¯æ°¸è¿œè¦æœ‰çš„ï¼Œå¹¶ä¸”æ€»è¦å…‰æ˜èµ·æ¥;åªè¦ä¸åšé»‘æš—çš„é™„ç€ç‰©ï¼Œä¸ºå…‰æ˜è€Œç­äº¡ï¼Œåˆ™æˆ‘ä»¬ä¸€å®šæœ‰æ‚ ä¹…çš„å°†æ¥ï¼Œè€Œä¸”ä¸€å®šæ˜¯å…‰æ˜çš„å°†æ¥ã€‚\nâ€”â€” é²è¿…ã€Šè®°è°ˆè¯ã€‹ï¼ˆåäºŒçœè”è€ƒ 2019 hope é¢˜è§£ï¼‰\n è¯´å›è¿™åœº cfï¼Œæˆ‘æŒ‰ç…§ cf å‡ºé¢˜è§„èŒƒå»å‡ºé¢˜ï¼Œä¸€ééåœ°æ£€æŸ¥ï¼Œç›´æ¥åŸå› å½“ç„¶æ˜¯ cf æ˜¯å¦‚æ­¤è¦æ±‚çš„ã€‚ä½†æˆ‘è¿™ä¹ˆå»åšï¼Œç»ä¸åªæ˜¯ä¸ºäº†è¿‡å®¡ï¼Œè€Œæ˜¯ä¸ºäº†ä¸Šåƒåå‚èµ›è€…ï¼Œæˆ‘è®¤ä¸ºæˆ‘æœ‰ç†ç”±ä»¥è®¤çœŸè´Ÿè´£çš„æ€åº¦ï¼Œå‡†å¤‡ä¸€åœºå¥½çš„ cfï¼Œå‘ˆç°ç»™å¤§å®¶ â€”â€” å½“ç„¶ä¹ŸåŒ…æ‹¬æ­£åœ¨è¯»ç€è¿™ç¯‡åšå®¢çš„ä½ ã€‚\nç°åœ¨æˆ‘ä¹Ÿèƒ½å¤Ÿä½“ä¼šåˆ° vfk å½“æ—¶å†™ã€ŠUOJç²¾ç¥ä¹‹æºæµã€‹æ—¶çš„å¿ƒæƒ…äº†ã€‚æ‰§è‘—çš„åšå®ˆä¸æ®‹é…·ç°å®çš„çŸ›ç›¾ï¼Œå‡ºé¢˜äººä¸å‚èµ›è€…çš„éš”é˜‚ï¼Œå¿ƒä¸­äº¤æ‚çš„æ­‰æ„ä¸ä¸ç”˜â€¦â€¦æ— è®ºè¿™åœº cf æ˜¯å¦è®©ä½ æ»¡æ„ï¼Œæˆ‘æƒ³ï¼Œæˆ‘åšåˆ°äº†æˆ‘åº”è¯¥åšçš„ï¼Œä»ç„¶èµ°åœ¨è‡ªå·±ä¸€ç›´åšæŒçš„é‚£æ¡è·¯ä¸Šã€‚\nå°½ç®¡å‘ç”Ÿäº†ä¸€äº›æ„å¤–ï¼Œæˆ–è®¸è¿™åœº cf å¹¶ä¸è®©ä½ æ»¡æ„ï¼Œä½†æˆ‘è®¤ä¸ºï¼ŒI did my best.\né™„ï¼šcf å‡ºé¢˜é¡»çŸ¥\nafter åè®° CF çš„å·¥èµ„å¤§çº¦å’•äº†ä¸€ä¸ªæœˆã€‚\nä»˜æ¬¾æ–¹å¼åƒä¸‡ä¸è¦é€‰ PayPalã€‚\n","date":"2019-06-09T12:56:10+08:00","permalink":"https://ouuan.github.io/post/bad-round-%E4%B8%8E%E5%87%BA%E9%A2%98%E4%BA%BA%E7%9A%84%E5%9D%9A%E5%AE%88/","tags":["Codeforces"],"title":"bad round ä¸å‡ºé¢˜äººçš„åšå®ˆ"},{"categories":["é¢˜è§£"],"contents":"å°å‰å¹•å\ncontest on CF\n2A Nauuo and Votes é¢˜æ„ $x$ ä¸ªäºº upvoteï¼Œ$y$ ä¸ªäºº downvoteï¼Œ$z$ ä¸ªäººéšæœº upvote / downvoteï¼Œé—®æœ€åæ€»è®¡ up çš„å¤š / down çš„å¤š / up = down / ç»“æœä¸ç¡®å®šã€‚\n é¢˜è§£ è€ƒè™‘ä¸¤ç§æç«¯æƒ…å†µï¼š\n æ‰€æœ‰éšæœºæŠ•çš„äººéƒ½ upvoteã€‚ æ‰€æœ‰éšæœºæŠ•çš„äººéƒ½ downvoteã€‚  å¦‚æœè¿™ä¸¤ç§æƒ…å†µç»“æœä¸€æ ·ï¼Œç»“æœå°±æ˜¯ç­”æ¡ˆï¼›å¦åˆ™ç»“æœä¸ç¡®å®šã€‚\n å‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; using namespace std; const char result[4] = {'+', '-', '0', '?'}; int solve(int x, int y) { return x == y ? 2 : x \u0026lt; y; } int main() { int x, y, z; cin \u0026gt;\u0026gt; x \u0026gt;\u0026gt; y \u0026gt;\u0026gt; z; cout \u0026lt;\u0026lt; result[solve(x + z, y) == solve(x, y + z) ? solve(x, y) : 3]; return 0; }   2B Nauuo and Chess é¢˜æ„  åœ¨ä¸€ä¸ª $m\\times m$ çš„æ£‹ç›˜ä¸Šæ”¾ $n$ é¢—æ£‹å­ï¼Œç¬¬ $i$ é¢—æ£‹å­çš„åæ ‡ä¸º $(r_i,c_i)$ï¼Œéœ€è¦æ»¡è¶³ $|r_i-r_j|+|c_i-c_j|\\ge|i-j|$ï¼Œæ±‚ $m$ çš„æœ€å°å€¼ä»¥åŠä»»æ„ä¸€ç§æ‘†æ”¾æ–¹æ¡ˆã€‚\n é¢˜è§£   $m\\ge\\left\\lfloor\\frac n 2\\right\\rfloor+1$\n$\\because\\begin{cases}|r_1-r_n|+|c_1-c_n|\\ge n-1\\\\|r_1-r_n|\\le m-1\\\\|c_1-c_n|\\le m-1\\end{cases}$\n$\\therefore m-1+m-1\\ge n-1$\n$\\therefore m\\ge\\frac{n+1}2$\n$\\because m\\text{æ˜¯æ•´æ•°}$\n$\\therefore m\\ge\\left\\lfloor\\frac n 2\\right\\rfloor+1$\n  $m$ å¯ä»¥å–åˆ° $\\left\\lfloor\\frac n 2\\right\\rfloor+1$\nåœ¨æ¯ä¸€æ–œè¡Œæ”¾ä¸€é¢—æ£‹å­å³å¯ï¼Œå³ï¼š$r_i+c_i=i+1$ã€‚å› ä¸º $|r_i-r_j|+|c_i-c_j|\\ge|r_i+c_i-r_j-c_j|$ã€‚\n   å‚è€ƒä»£ç  #include \u0026lt;cstdio\u0026gt; using namespace std; int main() { int n, i, ans; scanf(\u0026quot;%d\u0026quot;, \u0026amp;n); ans = n / 2 + 1; printf(\u0026quot;%d\u0026quot;, ans); for (i = 1; i \u0026lt;= ans; ++i) printf(\u0026quot;\\n%d 1\u0026quot;, i); for (i = 2; i \u0026lt;= n - ans + 1; ++i) printf(\u0026quot;\\n%d %d\u0026quot;, ans, i); return 0; }   1A Nauuo and Cards é¢˜æ„ $n$ å¼ å¸¦æ ‡å·çš„ç‰Œå’Œ $n$ å¼ ç©ºç™½ç‰Œï¼Œ$n$ å¼ åœ¨æ‰‹ä¸Šå‰©ä¸‹åœ¨ç‰Œå †é‡Œï¼ˆç‰Œå †æœ‰åºï¼‰ï¼Œæ¯æ¬¡å¯ä»¥ä»æ‰‹ä¸Šé€‰ä¸€å¼ ç‰Œæ”¾ç‰Œå †åº•éƒ¨å¹¶ä»ç‰Œå †é¡¶éƒ¨æŠ½ä¸€å¼ ç‰Œï¼Œéœ€è¦ä½¿ç‰Œå †ä»ä¸Šåˆ°ä¸‹é€’å¢åœ°æ”¾ $1$ ~ $n$ï¼Œæ±‚æœ€å°æ“ä½œæ•°ã€‚\n$1\\le n\\le2\\times10^5$ã€‚\n é¢˜è§£ é¦–å…ˆå°è¯•ä¸æ‰“ç©ºç™½ç‰Œèƒ½å¦ç›´æ¥å®Œæˆã€‚å¦‚æœèƒ½å°±æ˜¯æœ€ä¼˜è§£ï¼Œå¦åˆ™æœ€ä¼˜è§£ä¸€å®šæ˜¯å…ˆæ‰“è‹¥å¹²ç©ºç™½ç‰Œç„¶åå†ä¹Ÿä¸æ‰“ç©ºç™½ç‰Œã€‚è®¡ $p_i$ ä¸º $i$ åœ¨ç‰Œå †çš„åˆå§‹ä½ç½®ï¼ˆåˆå§‹åœ¨æ‰‹ä¸Šä¸º $0$ï¼‰ï¼Œé‚£ä¹ˆç­”æ¡ˆä¸º $\\max\\limits_{i = 1}^n(p_i - i + 1 + n)$ï¼ˆæ¯å¼ ç‰Œæœ€æ—©åœ¨ç¬¬ $p_i + 1$ å¼ è¢«æ‰“å‡ºï¼Œè¿˜è¦æ‰“ $n-i$ å¼ ï¼‰ã€‚\n å‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N = 200010; int n, a[N], b[N], p[N], ans; int main() { int i, j; scanf(\u0026quot;%d\u0026quot;, \u0026amp;n); for (i = 1; i \u0026lt;= n; ++i) { scanf(\u0026quot;%d\u0026quot;, a + i); p[a[i]] = 0; } for (i = 1; i \u0026lt;= n; ++i) { scanf(\u0026quot;%d\u0026quot;, b + i); p[b[i]] = i; } if (p[1]) { for (i = 2; p[i] == p[1] + i - 1; ++i); if (p[i - 1] == n) { for (j = i; j \u0026lt;= n \u0026amp;\u0026amp; p[j] \u0026lt;= j - i; ++j); if (j \u0026gt; n) { printf(\u0026quot;%d\u0026quot;, n - i + 1); return 0; } } } for (i = 1; i \u0026lt;= n; ++i) ans = max(ans, p[i] - i + 1 + n); printf(\u0026quot;%d\u0026quot;, ans); return 0; }   1B Nauuo and Circle é¢˜æ„ åœ†ä¸Šç”»ä¸€ $n$ ç‚¹æ ‘ï¼Œæ ‘ç»™å®šï¼Œè¾¹è¦æ±‚ç›´è€Œä¸äº¤ï¼Œç”»æ³•ä¸æ’åˆ—ä¸€ä¸€å¯¹åº”ï¼Œæ±‚æ–¹æ¡ˆæ•°ã€‚\n$2\\le n\\le 2\\times10^5$ã€‚\n é¢˜è§£ é¦–å…ˆï¼Œå¦‚æœé€‰ä¸€ä¸ªæ ¹ä½¿å…¶å˜ä¸ºæœ‰æ ¹æ ‘ï¼Œå¯ä»¥å‘ç°æ¯æ£µå­æ ‘ä¸€å®šåœ¨ä¸€æ®µè¿ç»­çš„å¼§ä¸Šã€‚\nè€ƒè™‘ DPï¼Œä»¤ $f_u$ ä¸ºå­æ ‘ $u$ æ–¹æ¡ˆæ•°ï¼Œé‚£ä¹ˆ $f_u=(|son(u)| + [u\\ne root])!\\prod\\limits_{v\\in son(u)}f_v$ï¼Œ$ans = nf_{root}â€‹$ã€‚ï¼ˆå…ˆå›ºå®šæ ¹çš„ä½ç½®ï¼Œæ¯æ£µå­æ ‘è¦ä¸ºå„¿å­æ’ä½ç½®ï¼Œå¦‚æœéæ ¹è‡ªå·±ä¹Ÿè¦å‚ä¸æ’ä½ç½®ï¼Œç„¶åå†ç”»å­æ ‘ã€‚ï¼‰\näº‹å®ä¸Šä¸éœ€è¦ DPï¼Œç­”æ¡ˆä¸ºæ¯ä¸ªç‚¹çš„åº¦æ•°é˜¶ä¹˜ä¹‹ç§¯ä¹˜ä¸Š $nâ€‹$ã€‚\n å‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; using namespace std; typedef long long ll; const int N = 200010; const int mod = 998244353; int n, ans, d[N]; int main() { int i, u, v; scanf(\u0026quot;%d\u0026quot;, \u0026amp;n); ans = n; for (i = 1; i \u0026lt; n; ++i) { scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;u, \u0026amp;v); ans = (ll) ans * (++d[u]) % mod * (++d[v]) % mod; } cout \u0026lt;\u0026lt; ans; return 0; }   1C Nauuo and Pictures é¢˜æ„ ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„æ•°åˆ— $w_{1..n}$ï¼Œå…¶ä¸­æœ‰ä¸€äº›ä½ç½®æ˜¯\u0026quot;è¢«å–œæ¬¢çš„\u0026rdquo;ï¼Œå…¶å®ƒä½ç½®æ˜¯â€œä¸è¢«å–œæ¬¢çš„â€ï¼Œè¿›è¡Œ $m$ æ¬¡æ“ä½œï¼Œæ¯æ¬¡éšæœºé€‰ä¸€ä¸ªæ•°ï¼Œé€‰åˆ°ç¬¬ $i$ ä¸ªæ•°çš„æ¦‚ç‡æ˜¯ $\\frac{w_i}{\\sum_{j=1}^nw_j}$ï¼Œå¦‚æœé€‰åˆ°ä¸€ä¸ªâ€œè¢«å–œæ¬¢çš„â€ä½ç½®ï¼Œå°±ä¼šæŠŠè¿™ä¸ªä½ç½®ä¸Šçš„æ•°åŠ ä¸€ï¼Œå¦åˆ™å‡ä¸€ã€‚é—® $m$ æ¬¡æ“ä½œè¿‡åæ¯ä¸ªæ•°çš„æœŸæœ›å€¼ï¼Œå¯¹ $998244353$ å–æ¨¡ã€‚\n$1\\le n\\le2\\times 10^5$ï¼Œ$1\\le m\\le3000$ã€‚\n é¢˜è§£ è£¸dp\nå…ˆåªçœ‹ä¸€ä¸ªâ€œè¢«å–œæ¬¢çš„â€ä½ç½®ï¼Œè¿™ä¸ªä½ç½®çš„åˆå§‹å€¼æ˜¯ $w$ã€‚\nè®¡ $SA$ ä¸ºâ€œè¢«å–œæ¬¢çš„â€æ•°ä¹‹å’Œï¼Œ$SB$ ä¸ºâ€œä¸è¢«å–œæ¬¢çš„â€æ•°ä¹‹å’Œã€‚\nä»¤ $f_w[i][j][k]$ è¡¨ç¤ºï¼šç°åœ¨ $SA=j$ï¼Œ$SB=k$ï¼Œä¸€ä¸ªå€¼ä¸º $w$ ã€â€œè¢«å–œæ¬¢çš„â€ä½ç½®ç»è¿‡ $i$ æ¬¡æ“ä½œåçš„æœŸæœ›å€¼ã€‚\nè¾¹ç•Œæƒ…å†µï¼š$f_w[0][j][k]=w$ã€‚\nè½¬ç§»ï¼š\n ä¸‹ä¸€æ¬¡æ“ä½œé€‰åˆ°äº†å½“å‰è¿™ä¸ªä½ç½®ã€‚æ¦‚ç‡ï¼š$\\frac w{j+k}$ã€‚è½¬ç§»åˆ°ï¼š$f_{w+1}[i-1][j+1][k]$ã€‚ ä¸‹ä¸€æ¬¡æ“ä½œé€‰åˆ°äº†å¦ä¸€ä¸ªâ€œè¢«å–œæ¬¢çš„â€ä½ç½®ã€‚æ¦‚ç‡ï¼š$\\frac{j-w}{j+k}$ã€‚è½¬ç§»åˆ°ï¼š$f_w[i-1][j+1][k]$ã€‚ ä¸‹ä¸€æ¬¡æ“ä½œé€‰åˆ°äº†ä¸€ä¸ªâ€œä¸è¢«å–œæ¬¢çš„â€ä½ç½®ã€‚æ¦‚ç‡ï¼š$\\frac k{j+k}$ã€‚è½¬ç§»åˆ°ï¼š$f_w[i-1][j][k-1]$ã€‚  æ‰€ä»¥ï¼Œ$f_w[i][j][k]=\\frac w{j+k}f_{w+1}[i-1][j+1][k]+\\frac{j-w}{j+k}f_w[i-1][j+1][k]+\\frac k{j+k}f_w[i-1][j][k-1]â€‹$ã€‚\nä»¤ $g_w[i][j][k]$ è¡¨ç¤ºâ€œä¸è¢«å–œæ¬¢çš„â€çš„å¯¹åº”çŠ¶æ€ï¼Œè®¡ç®—æ–¹å¼ç±»ä¼¼ã€‚\nè¿™æ ·å¤§çº¦èƒ½è¿‡ç®€å•ç‰ˆã€‚\nä¼˜åŒ–\næœ‰ä¸¤ä¸ªä¼˜åŒ–ï¼š\n  $f_w[i][j][k]=wf_1[i][j][k]$\nè¯æ˜ï¼š\n$i=0$ æ—¶æ˜¾ç„¶æˆç«‹ã€‚\nå‡è®¾å·²ç»è¯æ˜äº† $f_w[i-1][j][k]=wf_1[i-1][j][k]$ï¼Œå°±å¯ä»¥å½’çº³åœ°è¯æ˜ $f_w[i][j][k]=wf_1[i][j][k]$ï¼š\n$\\begin{aligned}f_1[i][j][k]\u0026amp;=\\frac 1{j+k}f_2[i-1][j+1][k]+\\frac{j-1}{j+k}f_1[i-1][j+1][k]+\\frac k{j+k}f_1[i-1][j][k-1]\\\\\u0026amp;=\\frac2{j+k}f_1[i-1][j+1][k]+\\frac{j-1}{j+k}f_1[i-1][j+1][k]+\\frac k{j+k}f_1[i-1][j][k-1]\\\\\u0026amp;=\\frac{j+1}{j+k}f_1[i-1][j+1][k]+\\frac k{j+k}f_1[i-1][j][k-1]\\end{aligned}$\n$\\begin{aligned}f_w[i][j][k]\u0026amp;=\\frac w{j+k}f_{w+1}[i-1][j+1][k]+\\frac{j-w}{j+k}f_w[i-1][j+1][k]+\\frac k{j+k}f_w[i-1][j][k-1]\\\\\u0026amp;=\\frac{w(w+1)}{j+k}f_1[i-1][j+1][k]+\\frac{w(j-w)}{j+k}f_1[i-1][j+1][k]+\\frac {wk}{j+k}f_1[i-1][j][k-1]\\\\\u0026amp;=\\frac{w(j+1)}{j+k}f_1[i-1][j+1][k]+\\frac {wk}{j+k}f_1[i-1][j][k-1]\\\\\u0026amp;=wf_1[i][j][k]\\end{aligned}$\nè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒç®€å•ä½†ä¸é‚£ä¹ˆä¸¥è°¨çš„ç†è§£æ–¹å¼ï¼šæ¯ä¸€æ­¥æœŸæœ›çš„å¢é‡éƒ½ä¸æœŸæœ›æˆæ­£æ¯”ã€‚ï¼ˆè¿™é‡Œè¢« _rqy å–·äº†ï¼Œå‡ºé¢˜äººå°±æ˜¯èœï¼Œè¿™ä¸ªè¯æ˜å†™ä¸ä¸¥è°¨ã€‚ï¼‰\nè¿™æ ·çš„è¯å°±åªç”¨è®¡ç®— $f_1[i][j][k]$ äº†ã€‚\n  æ³¨æ„åˆ° $i$, $j$, $k$, $m$ æœ‰ä¸€äº›è”ç³»ã€‚å®é™…ä¸Šå¯ä»¥ä»¤ $f\u0026rsquo;_w[i][j]$ è¡¨ç¤º $f_w[m-i-j][SA+i][SB-j]$ï¼ˆè¿™é‡Œçš„ $SA$ å’Œ $SB$ éƒ½æ˜¯æœªæ“ä½œæ—¶çš„åˆå§‹å€¼ï¼‰ã€‚\n  ä»¤ $g\u0026rsquo;_1[i][j]$ è¡¨ç¤º $g_w[m-i-j][SA+i][SB-j]$ï¼Œè®¡ç®—æ–¹å¼ç±»ä¼¼ã€‚\næ€»ç»“\n$$ \\begin{aligned} f\u0026rsquo;_1[i][j]\u0026amp;=1\u0026amp;(i+j=m)\\\\\nf\u0026rsquo;_1[i][j]\u0026amp;=\\frac{SA+i+1}{SA+SB+i-j}f\u0026rsquo;_1[i+1][j]+\\frac{SB-j}{SA+SB+i-j}f\u0026rsquo;_1[i][j+1]\u0026amp;(i+j\u0026lt;m)\\\\\ng\u0026rsquo;_1[i][j]\u0026amp;=1\u0026amp;(i+j=m)\\\\\ng\u0026rsquo;_1[i][j]\u0026amp;=\\frac{SA+i}{SA+SB+i-j}g\u0026rsquo;_1[i+1][j]+\\frac{SB-j-1}{SA+SB+i-j}g\u0026rsquo;_1[i][j+1]\u0026amp;(i+j\u0026lt;m) \\end{aligned} $$\nâ€œè¢«å–œæ¬¢çš„â€ä½ç½®ç­”æ¡ˆæ˜¯ $w_if\u0026rsquo;_1[0][0]$ï¼Œâ€œä¸è¢«å–œæ¬¢çš„â€ä½ç½®ç­”æ¡ˆæ˜¯ $w_ig\u0026rsquo;_1[0][0]$ã€‚\nå¦‚æœæ¯æ¬¡å»ç®—é€†å…ƒå°±æ˜¯ $\\mathcal O(n+m^2\\log p)$ï¼Œé¢„å¤„ç†å‡ºæ¥å°±æ˜¯ $\\mathcal O(n+m^2+m\\log p)$ã€‚\n å‚è€ƒä»£ç  #include \u0026lt;cstdio\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef long long ll; const int N = 200010; const int M = 3010; const int mod = 998244353; int qpow(int x, int y) //calculate the modular multiplicative inverse { int out = 1; while (y) { if (y \u0026amp; 1) out = (ll) out * x % mod; x = (ll) x * x % mod; y \u0026gt;\u0026gt;= 1; } return out; } int n, m, a[N], w[N], f[M][M], g[M][M], inv[M \u0026lt;\u0026lt; 1], sum[3]; int main() { int i,j; scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;n, \u0026amp;m); for (i = 1; i \u0026lt;= n; ++i) scanf(\u0026quot;%d\u0026quot;, a + i); for (i = 1; i \u0026lt;= n; ++i) { scanf(\u0026quot;%d\u0026quot;, w + i); sum[a[i]] += w[i]; sum[2] += w[i]; } for (i = max(0, m - sum[0]); i \u0026lt;= 2 * m; ++i) inv[i] = qpow(sum[2] + i - m, mod - 2); for (i = m; i \u0026gt;= 0; --i) { f[i][m - i] = g[i][m - i] = 1; for (j = min(m - i - 1, sum[0]); j \u0026gt;= 0; --j) { f[i][j] = ((ll) (sum[1] + i + 1) * f[i + 1][j] + (ll) (sum[0] - j) * f[i][j + 1]) % mod * inv[i - j + m] % mod; g[i][j] = ((ll) (sum[1] + i) * g[i + 1][j] + (ll) (sum[0] - j - 1) * g[i][j + 1]) % mod * inv[i - j + m] % mod; } } for (i = 1; i \u0026lt;= n; ++i) printf(\u0026quot;%d\\n\u0026quot;, int((ll) w[i] * (a[i] ? f[0][0] : g[0][0]) % mod)); return 0; }   1D Nauuo and Portals é¢˜æ„ åœ¨ä¸€ä¸ª $n\\times n$ çš„ç½‘æ ¼é‡Œæ”¾ä¼ é€é—¨ï¼ŒæŒ‡å®šä»ç¬¬ $i$ è¡Œè¿›ä»ç¬¬ $r_i$ è¡Œå‡ºï¼Œä»ç¬¬ $i$ åˆ—è¿›ä»ç¬¬ $c_i$ åˆ—å‡ºï¼Œ$r_{1..n}$ å’Œ $c_{1..n}$ éƒ½æ˜¯æ’åˆ—ï¼Œæ±‚æ–¹æ¡ˆã€‚\n é¢˜è§£ è€ƒè™‘ä¸€ä¸ª $n*n$ çš„é—®é¢˜å¦‚ä½•è½¬åŒ–æˆ $(n-1)\\times(n-1)$ï¼šæ»¡è¶³ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—ã€‚\nå¦‚æœå·²ç»æ»¡è¶³ç›´æ¥å˜æˆ $(n-1)\\times(n-1)$ã€‚\nå¦åˆ™æ‰¾åˆ°ç¬¬ä¸€è¡Œä¸­åº”è¯¥æ”¾åœ¨ç¬¬ä¸€åˆ—é‚£ä¸ªå’Œç¬¬ä¸€åˆ—ä¸­åº”è¯¥æ”¾åœ¨ç¬¬ä¸€è¡Œé‚£ä¸ªï¼Œè¿™ä¸¤ä¸ªä½ç½®å„æ”¾ä¸€ä¸ªä¼ é€é—¨å³å¯ã€‚\nè¿™é¢˜å¯ä»¥ $\\mathcal O(n)$ åšï¼Œä½† checker è¦ $\\mathcal O(n^2)$ã€‚\n å‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N = 1010; struct Portal { int x, y, p, q; Portal(int _x, int _y, int _p, int _q): x(_x), y(_y), p(_p), q(_q) {} }; vector\u0026lt;Portal\u0026gt; ans; int n, a[N], b[N], c[N], d[N], ra[N], rb[N], rc[N], rd[N]; int main() { int i; scanf(\u0026quot;%d\u0026quot;, \u0026amp;n); for (i = 1; i \u0026lt;= n; ++i) { scanf(\u0026quot;%d\u0026quot;, b + i); rb[b[i]] = i; } for (i = 1; i \u0026lt;= n; ++i) { scanf(\u0026quot;%d\u0026quot;, a + i); ra[a[i]] = i; } for (i = 1; i \u0026lt;= n; ++i) c[i] = d[i] = rc[i] = rd[i] = i; for (i = 1; i \u0026lt; n; ++i) { if (c[i] == ra[i] \u0026amp;\u0026amp; d[i] == rb[i]) continue; ans.push_back(Portal(i, rc[ra[i]], rd[rb[i]], i)); int t1 = c[i]; int t2 = d[i]; swap(c[i], c[rc[ra[i]]]); swap(d[i], d[rd[rb[i]]]); swap(rc[ra[i]], rc[t1]); swap(rd[rb[i]], rd[t2]); } printf(\u0026quot;%d\\n\u0026quot;, ans.size()); for (auto k : ans) printf(\u0026quot;%d %d %d %d\\n\u0026quot;, k.x, k.y, k.p, k.q); return 0; }   1E Nauuo and ODT é¢˜æ„ ç»™ä½ ä¸€æ£µ $n$ ä¸ªç‚¹ï¼Œç‚¹æœ‰é¢œè‰²çš„æ ‘ã€‚ä¸€æ¡ç®€å•è·¯å¾„çš„æƒå€¼æ˜¯å…¶ä¸Šé¢œè‰²æ•°ï¼Œæ±‚æ‰€æœ‰ç®€å•è·¯å¾„çš„æƒå€¼ä¹‹å’Œï¼ˆè·¯å¾„æœ‰åºï¼Œå³ $u\\rightarrow v$ å’Œ $v\\rightarrow u$ ç®—ä¸¤æ¡ï¼‰ã€‚å¸¦ä¿®ï¼Œ$m$ æ¬¡å•ç‚¹é¢œè‰²ä¿®æ”¹ï¼Œæ¯ä¿®æ”¹ä¸€æ¬¡è¾“å‡ºä¸€æ¬¡ã€‚\n$n,m\\le 4\\times10^5$ï¼Œ$7.5s$ã€‚\n é¢˜è§£ å¯¹æ¯ç§é¢œè‰²åˆ†åˆ«è€ƒè™‘ä¸å«è¯¥é¢œè‰²çš„ç®€å•è·¯å¾„æ¡æ•°ã€‚\nä»¤å½“å‰å¤„ç†çš„é¢œè‰²ä¸º $c$ï¼ŒæŠŠé¢œè‰²ä¸º $c$ çš„è§†ä¸ºç™½è‰²ï¼Œä¸æ˜¯ $c$ çš„è§†ä¸ºé»‘è‰²ï¼Œé‚£ä¹ˆä¸å« $c$ çš„è·¯å¾„æ¡æ•°å°±æ˜¯æ¯ä¸ªé»‘è”é€šå—çš„å¤§å°çš„å¹³æ–¹å’Œï¼Œä¿®æ”¹å°±æ˜¯å½“é¢œè‰²æ˜¯ $c$ $\\leftrightarrow$ é¢œè‰²ä¸æ˜¯ $c$ æ—¶ç¿»è½¬ä¸€ä¸ªç‚¹çš„é¢œè‰²ã€‚æ‰€ä»¥ï¼Œé—®é¢˜è½¬åŒ–æˆäº†é»‘ç™½ä¸¤è‰²çš„æ ‘ï¼Œå•ç‚¹ç¿»è½¬é¢œè‰²ï¼Œç»´æŠ¤é»‘è”é€šå—å¤§å°çš„å¹³æ–¹å’Œã€‚è¿™ä¸ªè½¬åŒ–åçš„é—®é¢˜å¯ä»¥ç”¨å¾ˆå¤šæ•°æ®ç»“æ„åšï¼Œæ¯”å¦‚ï¼šlxlï¼štop tree éšä¾¿ç»´æŠ¤ã€‚è¿™ç¯‡é¢˜è§£é‡Œä½¿ç”¨ Link/cut Tree.\nå¯¹æ¯ä¸ªç‚¹ç»´æŠ¤å­æ ‘å¤§å°ï¼Œå„¿å­å¤§å°å¹³æ–¹å’Œï¼Œåœ¨ link/cut çš„æ—¶å€™æ›´æ–°ç­”æ¡ˆå³å¯ã€‚æœ‰ä¸€ä¸ªå¤§å®¶ç†ŸçŸ¥çš„ trickï¼Œå°±æ˜¯æ¯ä¸ªé»‘ç‚¹å‘çˆ¶äº²è¿è¾¹ï¼Œè¿™æ ·çœŸæ­£çš„è”é€šå—å°±æ˜¯ Link/cut Tree é‡Œçš„è”é€šå—åˆ æ‰æ ¹ã€‚\nå…·ä½“çœ‹å›¾å§ï¼Œå›¾è®²çš„æŒºæ¸…æ¥šçš„ï¼š\nLCT çš„éƒ¨åˆ†å°±æ˜¯è¿™æ ·ï¼Œè®¡ç®—ç­”æ¡ˆçš„æ—¶å€™å…ˆåˆå§‹åŒ–ä¸€ä¸ªå…¨æ˜¯é»‘ç‚¹çš„æ ‘ï¼Œç¦»çº¿å¤„ç†æ¯ä¸ªé¢œè‰²ï¼Œå¤„ç†å®Œä¸€ä¸ªé¢œè‰²åç€æ”¹å›å»ã€‚\n å‚è€ƒä»£ç  #include \u0026lt;algorithm\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;iostream\u0026gt; #include \u0026lt;vector\u0026gt; using namespace std; typedef long long ll; const int N = 400010; struct Node { int fa, ch[2], siz, sizi; ll siz2i; ll siz2() { return (ll) siz * siz; } } t[N]; bool nroot(int x); void rotate(int x); void Splay(int x); void access(int x); int findroot(int x); void link(int x); void cut(int x); void pushup(int x); void add(int u, int v); void dfs(int u); int head[N], nxt[N \u0026lt;\u0026lt; 1], to[N \u0026lt;\u0026lt; 1], cnt; int n, m, c[N], f[N]; ll ans, delta[N]; bool bw[N]; vector\u0026lt;int\u0026gt; mod[N][2]; int main() { int i, j, u, v; ll last; scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;n, \u0026amp;m); for (i = 1; i \u0026lt;= n; ++i) { scanf(\u0026quot;%d\u0026quot;, c + i); mod[c[i]][0].push_back(i); mod[c[i]][1].push_back(0); } for (i = 1; i \u0026lt;= n + 1; ++i) t[i].siz = 1; for (i = 1; i \u0026lt; n; ++i) { scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;u, \u0026amp;v); add(u, v); add(v, u); } for (i = 1; i \u0026lt;= m; ++i) { scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;u, \u0026amp;v); mod[c[u]][0].push_back(u); mod[c[u]][1].push_back(i); c[u] = v; mod[v][0].push_back(u); mod[v][1].push_back(i); } f[1] = n + 1; dfs(1); for (i = 1; i \u0026lt;= n; ++i) link(i); for (i = 1; i \u0026lt;= n; ++i) { if (!mod[i][0].size()) { delta[0] += (ll)n * n; continue; } if (mod[i][1][0]) { delta[0] += (ll)n * n; last = (ll)n * n; } else last = 0; for (j = 0; j \u0026lt; mod[i][0].size(); ++j) { u = mod[i][0][j]; if (bw[u] ^= 1) cut(u); else link(u); if (j == mod[i][0].size() - 1 || mod[i][1][j + 1] != mod[i][1][j]) { delta[mod[i][1][j]] += ans - last; last = ans; } } for (j = mod[i][0].size() - 1; ~j; --j) { u = mod[i][0][j]; if (bw[u] ^= 1) cut(u); else link(u); } } ans = (ll) n * n * n; for (i = 0; i \u0026lt;= m; ++i) { ans -= delta[i]; printf(\u0026quot;%I64d \u0026quot;, ans); } return 0; } bool nroot(int x) { return x == t[t[x].fa].ch[0] || x == t[t[x].fa].ch[1]; } void rotate(int x) { int y = t[x].fa; int z = t[y].fa; int k = x == t[y].ch[1]; if (nroot(y)) t[z].ch[y == t[z].ch[1]] = x; t[x].fa = z; t[y].ch[k] = t[x].ch[k ^ 1]; t[t[x].ch[k ^ 1]].fa = y; t[x].ch[k ^ 1] = y; t[y].fa = x; pushup(y); pushup(x); } void Splay(int x) { while (nroot(x)) { int y = t[x].fa; int z = t[y].fa; if (nroot(y)) (x == t[y].ch[1]) ^ (y == t[z].ch[1]) ? rotate(x) : rotate(y); rotate(x); } } void access(int x) { for (int y = 0; x; x = t[y = x].fa) { Splay(x); t[x].sizi += t[t[x].ch[1]].siz; t[x].sizi -= t[y].siz; t[x].siz2i += t[t[x].ch[1]].siz2(); t[x].siz2i -= t[y].siz2(); t[x].ch[1] = y; pushup(x); } } int findroot(int x) { access(x); Splay(x); while (t[x].ch[0]) x = t[x].ch[0]; Splay(x); return x; } void link(int x) { int y = f[x]; Splay(x); ans -= t[x].siz2i + t[t[x].ch[1]].siz2(); int z = findroot(y); access(x); Splay(z); ans -= t[t[z].ch[1]].siz2(); t[x].fa = y; Splay(y); t[y].sizi += t[x].siz; t[y].siz2i += t[x].siz2(); pushup(y); access(x); Splay(z); ans += t[t[z].ch[1]].siz2(); } void cut(int x) { int y = f[x]; access(x); ans += t[x].siz2i; int z = findroot(y); access(x); Splay(z); ans -= t[t[z].ch[1]].siz2(); Splay(x); t[x].ch[0] = t[t[x].ch[0]].fa = 0; pushup(x); Splay(z); ans += t[t[z].ch[1]].siz2(); } void pushup(int x) { t[x].siz = t[t[x].ch[0]].siz + t[t[x].ch[1]].siz + t[x].sizi + 1; } void add(int u, int v) { nxt[++cnt] = head[u]; head[u] = cnt; to[cnt] = v; } void dfs(int u) { int i, v; for (i = head[u]; i; i = nxt[i]) { v = to[i]; if (v != f[u]) { f[v] = u; dfs(v); } } }   1F Nauuo and Bug é¢˜æ„ ç»™ $a$ å’Œ $p$ï¼Œå¤šç»„è¯¢é—® $sum(a,l,r,p)$ã€‚\næ•°åˆ—é•¿åº¦ $10^6$ï¼Œè¯¢é—®æ¬¡æ•° $2\\times10^5$ï¼Œå€¼åŸŸ $-10^9$ ~ $10^9$ã€‚\n é¢˜è§£ åŒºé—´è¯¢é—®ä¸€èˆ¬é‡‡ç”¨åˆ†å—ã€çº¿æ®µæ ‘ç­‰æ–¹æ³•ç»´æŠ¤ï¼Œè¿™äº›æ–¹æ³•éƒ½è¦æ±‚æˆ‘ä»¬å•ç‹¬æ±‚å‡ºè¾ƒå°‘ä¸ªåŒºé—´çš„ç­”æ¡ˆåè¿›è¡Œåˆå¹¶ã€‚æˆ‘ä»¬è€ƒè™‘å°† Sum å‡½æ•°æ”¹æˆå¦‚ä¸‹ï¼š\nint sum(int l, int r, int p, int x) { for (int i = l; i \u0026lt;= r; ++i) x = modadd(x, a[i], p); return x; }  å›ºå®š $p$ å’Œä¸€ä¸ªåŒºé—´ï¼Œsum æ˜¯ä¸€ä¸ªå…³äº x çš„åˆ†æ®µå‡½æ•°ï¼Œå¯ä»¥çœ‹å‡ºæ®µæ•°ä¸º $O(r-l)$ï¼Œå› ä¸º sum çš„ç»“æœä¸€å®šå¯ä»¥å†™æˆ $x+s_{l..r}-np$ï¼Œå…¶ä¸­ $s_{l..r}$ æ˜¯ $a_{l..r}$ çš„åŒºé—´å’Œï¼Œéšç€ $x$ çš„å¢å¤§ï¼Œ$n$ ä¸ä¼šå‡å°ï¼Œè€Œ $0 \\le n \\le r-l+1$ï¼Œæ‰€ä»¥æ®µæ•°æ˜¯çº¿æ€§çš„ã€‚\næ­¤æ—¶æœ‰ä¸€ä¸ªç®€å•çš„åˆ†å—åšæ³•ã€‚å°†åºåˆ—åˆ†ä¸ºå¤§å°ä¸º $B$ çš„ $\\frac n B$ å—ï¼Œæ¯å—å†…é¢„å¤„ç†å‡ºè¿™ä¸ªå—çš„ sum å‡½æ•°åç”¨ä¸€ä¸ªå­˜æœ‰æ¯æ®µç«¯ç‚¹çš„æ•°ç»„è®°å½•ä¸‹æ¥ï¼›è®¡ç®—è¿™ä¸ªå‡½æ•°çš„æ–¹æ³•ç›¸å½“æš´åŠ›ï¼Œé‡‡ç”¨å¢é‡æ³•ï¼Œæ¯æ¬¡å°†å·²æœ‰çš„å‡½æ•°å’Œå•ç‚¹åˆå¹¶åé‡æ„æ¯æ®µçš„èµ·æ­¢ç«¯ç‚¹ï¼Œè¿™å°†æ¶ˆè€— $O(\\frac n B \\times B^2=nB)$ çš„æ—¶é—´ã€‚æŸ¥è¯¢æ—¶ç”¨äºŒåˆ†è®¡ç®—å•ç‚¹ä¸Šå‡½æ•°çš„å€¼å³å¯ï¼Œæ¯æ¬¡è¯¢é—®çš„æ—¶é—´æ˜¯ $O(B+\\frac n B \\log B)$ã€‚è®¤ä¸º $n,q$ åŒé˜¶ï¼Œå– $B=\\Theta(\\sqrt{n \\log n})$ æ—¶å¤æ‚åº¦æœ€ä¼˜ä¸º $O(n \\sqrt{n \\log n})$ã€‚\nå¾—åˆ°æ›´å¥½çš„æ—¶é—´å¤æ‚åº¦éœ€è¦ä¸€ä¸ªè§‚å¯Ÿï¼šåˆ†æ®µå‡½æ•°ä¸­æ¯æ®µçš„é•¿åº¦éƒ½è‡³å°‘æ˜¯ $P$ã€‚è¯æ˜è€ƒè™‘å¯¹åŒºé—´é•¿åº¦ $n$ å½’çº³ã€‚å½“ $n=1$ æ—¶ç”±äºåªæœ‰ä¸¤æ®µï¼Œé•¿åº¦å‡ä¸ºæ— ç©·å¤§ï¼Œæ˜¾ç„¶ï¼›$n\u0026gt;1$ æ—¶è€ƒè™‘å°†å‰ $n-1$ ä¸ªå½¢æˆçš„å‡½æ•°å’Œæœ€åä¸€ä¸ªåˆå¹¶ã€‚è¯¦ç»†è€ƒè™‘åˆå¹¶çš„è¿‡ç¨‹ï¼Œå¯¹äº $f(x)=x+s_{1..n-1}-mP(a \\le x \\le b)$ çš„æ®µï¼Œ$x + s_{1..n}-mP\\ge P \\to x \\ge (m+1)P-s_{1..n}$ çš„éƒ¨åˆ†éœ€è¦å¤šå‡ä¸€æ¬¡ $P$ï¼Œä»è€Œä¼šå’Œä¸‹ä¸€æ®µè¿›è¡Œåˆå¹¶ã€‚è€ƒè™‘è¿™æ®µå‡½æ•°ï¼Œå‡å°‘äº†ä¸€ä¸ªåç¼€ $[(m+1)P-s_{1..n},b]$ï¼Œä»ä¸Šä¸€æ®µåˆå¹¶è¿‡æ¥çš„å¢åŠ äº†ä¸€æ®µå‰ç¼€ $[mP-s_{1..n},a]$ï¼Œæ–°çš„åŒºé—´ä¸º $[\\min(a,mP-s_{1..n}),\\min(b,(m+1)P-s_{1..n}-1]$ï¼Œç®€å•è®¨è®ºå¯çŸ¥é•¿åº¦ä»ç„¶ä¸å°äº $P$ã€‚\næˆ‘ä»¬æ”¹ä¸ºé‡‡ç”¨çº¿æ®µæ ‘ç»´æŠ¤ï¼ŒæŸ¥è¯¢åŒºé—´è¢«åˆ†è§£æˆ $O(\\log n)$ ä¸ªçº¿æ®µæ ‘ä¸ŠåŒºé—´ï¼Œå‡å¦‚æˆ‘ä»¬èƒ½æ±‚å‡ºæ‰€æœ‰çº¿æ®µæ ‘ä¸ŠåŒºé—´çš„åˆ†æ®µå‡½æ•°ï¼Œå³å¯æ¯æ¬¡æŸ¥è¯¢ $O(\\log^2 n)$ æ—¶é—´è§£å†³ã€‚æˆ‘ä»¬æ±‚è§£ $[l..r]$ çš„å‡½æ•°æ—¶ï¼Œè€ƒè™‘ä» $[l..mid]$ çš„å‡½æ•° $f(x)$ å’Œ $[mid+1..r]$ çš„å‡½æ•° $g(x)$ åˆå¹¶è€Œæ¥ï¼Œåˆå¹¶åçš„å‡½æ•°å³ä¸º $g(f(x))$ã€‚æˆ‘ä»¬åœ¨çš„åˆ†æ®µå‡½æ•° $f$ ä¸ŠæŒ‰ $x$ å‡åºæ‰«æï¼Œç»´æŠ¤ $f(x)$ å¯¹åº” $g$ ä¸­çš„å“ªä¸€æ®µã€‚å½“ $x$ ç§»å‘ $f$ ä¸­çš„ä¸‹ä¸€æ®µæ—¶ï¼Œæˆ‘ä»¬ä»ä¹‹å‰ $f(x)$ çš„ä½ç½®æš´åŠ›ç§»åŠ¨å‘æ–°çš„å‡½æ•°ã€‚æ³¨æ„æ¯æ¬¡ç§»åŠ¨åˆ°ä¸‹ä¸€æ®µ $f(x)$ åªæ˜¯å‡ $P$ï¼Œ$f(x)$ åœ¨ $g$ ä¸­çš„ä½ç½®ä¼šå·¦ç§»ï¼Œä½†å‰é¢è¯æ˜è¿‡æ‰€æœ‰æ®µçš„é•¿åº¦éƒ½è‡³å°‘ä¸º $P$ï¼Œæ‰€ä»¥ $f(x)$ çš„ä½ç½®åªä¼šå·¦ç§»è‡³å¤šä¸€æ®µã€‚å½“ $x$ åœ¨ $f$ çš„åŒä¸€æ®µä¸­ç§»åŠ¨æ—¶ï¼Œ$f(x)$ çš„ä½ç½®åªä¼šå³ç§»ï¼Œä»è€Œç”±å‡æ‘Šåˆ†æçŸ¥é“åˆå¹¶çš„æ—¶é—´æ˜¯çº¿æ€§çš„ã€‚ç»¼ä¸Šæˆ‘ä»¬åœ¨ $O(n \\log n+q \\log ^2 n)$ çš„æ—¶é—´å†…è§£å†³äº†æœ¬é¢˜ï¼Œè¿™æ˜¯éå¸¸ä¼˜ç§€çš„ã€‚\n å‚è€ƒä»£ç  #include \u0026lt;bits/stdc++.h\u0026gt; using namespace std; typedef long long ll; const int N = 1000005; const ll inf = (ll)1e16; int n, m, P, a[N]; ll sum[N]; vector\u0026lt;ll\u0026gt; func[N \u0026lt;\u0026lt; 2]; vector\u0026lt;ll\u0026gt; merge(int l, int r, int mid, const vector\u0026lt;ll\u0026gt; \u0026amp;f, const vector\u0026lt;ll\u0026gt; \u0026amp;g) { ll suml = sum[mid] - sum[l - 1], sumr = sum[r] - sum[mid]; vector\u0026lt;ll\u0026gt; ret(f.size() + g.size() - 1, inf); for (int i = 0, j = 0; i \u0026lt; (int)f.size(); ++i) { ll xl = f[i], xr = (i + 1 == (int)f.size() ? inf : f[i + 1] - 1), yl = xl + suml - (ll)i * P, yr = xr + suml - (ll)i * P; while (j \u0026gt; 0 \u0026amp;\u0026amp; g[j] \u0026gt; yl) --j; while (j \u0026lt; (int)g.size() \u0026amp;\u0026amp; (j == 0 || g[j] \u0026lt;= yl)) ++j; --j; for (; j \u0026lt; (int)g.size() \u0026amp;\u0026amp; g[j] \u0026lt;= yr; ++j) ret[i + j] = min(ret[i + j], max(xl, g[j] - suml + (ll)i * P)); } ret[0] = -inf; return ret; } void build(int u, int l, int r) { if (l == r) { func[u].push_back(-inf); func[u].push_back(P - a[l]); return; } int mid = l + r \u0026gt;\u0026gt; 1; build(u \u0026lt;\u0026lt; 1, l, mid); build(u \u0026lt;\u0026lt; 1 | 1, mid + 1, r); func[u] = merge(l, r, mid, func[u \u0026lt;\u0026lt; 1], func[u \u0026lt;\u0026lt; 1 | 1]); } ll query(int u, int l, int r, int ql, int qr, ll now) { if (l \u0026gt;= ql \u0026amp;\u0026amp; r \u0026lt;= qr) return now + sum[r] - sum[l - 1] - (ll)P * (upper_bound(func[u].begin(), func[u].end(), now) - func[u].begin() - 1); int mid = l + r \u0026gt;\u0026gt; 1; if (qr \u0026lt;= mid) return query(u \u0026lt;\u0026lt; 1, l, mid, ql, qr, now); if (ql \u0026gt; mid) return query(u \u0026lt;\u0026lt; 1 | 1, mid + 1, r, ql, qr, now); return query(u \u0026lt;\u0026lt; 1 | 1, mid + 1, r, ql, qr, query(u \u0026lt;\u0026lt; 1, l, mid, ql, qr, now)); } int main() { scanf(\u0026quot;%d%d%d\u0026quot;, \u0026amp;n, \u0026amp;m, \u0026amp;P); for (int i = 1; i \u0026lt;= n; ++i) scanf(\u0026quot;%d\u0026quot;, a + i), sum[i] = sum[i - 1] + a[i]; build(1, 1, n); for (int l, r; m--;) { scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;l, \u0026amp;r); printf(\u0026quot;%I64d\\n\u0026quot;, query(1, 1, n, l, r, 0)); } return 0; }  ","date":"2019-06-07T22:38:47+08:00","permalink":"https://ouuan.github.io/post/codeforces-round-564-%E4%B8%AD%E6%96%87%E9%A2%98%E8%A7%A3/","tags":["Codeforces"],"title":"Codeforces Round #564 ä¸­æ–‡é¢˜è§£"},{"categories":["æŠ€æœ¯"],"contents":"ä¸ç”¨ testlib.h æ˜¯ä¸å¯èƒ½å†™å¥½ checker çš„ï¼ˆé€ƒ\nå¤§çº¦è¿™æ ·å°±å¯ä»¥äº†ï¼š\n#include \u0026lt;fstream\u0026gt; #include \u0026lt;cstdlib\u0026gt; #include \u0026lt;cstdio\u0026gt; using namespace std; ofstream fscore; char cmd[1000]; int main(int argc, char * argv[]) { fscore.open(argv[5]); int score = atoi(argv[4]); sprintf(cmd, \u0026quot;testlibchecker %s %s %s %s\u0026quot;, argv[1], argv[2], argv[3], argv[6]); if (system(cmd)) fscore \u0026lt;\u0026lt; 0 \u0026lt;\u0026lt; endl; else fscore \u0026lt;\u0026lt; score \u0026lt;\u0026lt; endl; fscore.close(); return 0; }  æ³¨æ„ testlibchecker å®é™…ä½¿ç”¨æ—¶è¦ä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚\n","date":"2019-05-22T13:59:32+08:00","permalink":"https://ouuan.github.io/post/%E4%BD%BF%E7%94%A8-testlib-h-%E5%86%99-lemon-spj/","tags":["è¯„æµ‹"],"title":"ä½¿ç”¨ testlib.h å†™ lemon SPJ"},{"categories":["æ¸¸è®°"],"contents":"ç”±äºå®åœ¨æƒ³ä¸åˆ°è¿™æ¬¡æ˜¯ä»€ä¹ˆè®°äº†ï¼Œæ‰€ä»¥å°±å« 300iq å¥”åŒ—å¡å¥½äº†ã€‚\nå®é™…ä¸Šæ˜¯ä¸€ç¯‡ CTS \u0026amp; APIO \u0026amp; THUSC 2019 æ¸¸è®°ã€‚\nArrival å› ä¸ºæ˜¯å»åŒ—äº¬æ‰€ä»¥è¦äºŒæ¬¡å®‰æ£€ï¼Œç„¶åå‰ªåˆ€è¢«æ”¶äº†..ä¸€å¼€å§‹è¿˜è¯´æˆ‘æœ‰ä¸¤æŠŠå‰ªåˆ€ï¼Œç„¶ååˆè¿‡äº†ä¸€æ¬¡å®‰æ£€å°±æ²¡æœ‰äº†..æœ€åçš„ç»“æœæ˜¯åƒæ–¹ä¾¿é¢çš„æ—¶å€™æ’•ä¸å¼€é…±æ–™åŒ…ï¼Œç”¨åœ†è§„æˆ³å¼€çš„ã€‚\nè½¦ä¸Šå…ˆæ˜¯åœ¨ç†Ÿæ‚‰çš„æ–‡ç« ã€å­—ç¬¦ä¸²å’Œ Reverses ä¸‰é“é¢˜ä¸Šåˆ†åˆ«è‡ªé—­ï¼Œç„¶åå¼€å§‹çœ‹é¢˜è§£ï¼Œçœ‹ border ç›¸å…³è®ºæ–‡ï¼Œç„¶åå°±å¼€å§‹çœ‹ THUPC çš„æ¦œï¼Œç„¶åä¸å°å¿ƒè¢« 300iq çœ‹åˆ°äº† 300iq_ben_bei_poã€‚\nåˆ°äº†ä¹‹åï¼Œå‘ç° Sooke å°±æ¯”æˆ‘ä»¬æ—©åˆ°ä¸€ç‚¹ç‚¹â€”â€”å®é™…ä¸Šæ¯”æˆ‘ä»¬æ—©ä¸€è¶Ÿåœ°é“å·¦å³ã€‚åˆ°é…’åº—çš„æ—¶å€™åŠå…¥ä½æ’é˜Ÿï¼ŒSooke åˆšå¥½å°±åœ¨æˆ‘ä»¬å‡ ä¸ªäººå‰é¢ï¼Œç„¶åå°±æ„‰å¿«åœ°é¢åŸºäº†ã€‚\nä¸‹åˆå»è¯•æœºï¼Œç°åœºå†™äº†ä¸€é“æˆ‘ä»¬é‚£åœº cf çš„é¢˜ï¼Œï¼ˆè¯æ˜äº†å¦‚æœä¼šåšè¿˜æ˜¯å¯ä»¥åœ¨åœºä¸Šå†™å‡ºæ¥çš„ï¼‰ã€‚\nç„¶åï¼Œä» Sooke æ¥è¯•æœºèµ·ï¼Œç®€å•æ•™äº†ä¸€ä¸‹ Sooke ç”¨ noilinuxï¼Œä¸€èµ·åƒäº†æ™šé¥­ï¼Œä¸€èµ·èµ°å›é…’åº—ï¼Œç„¶åå‘ç° Sooke æˆ¿é—´å°±åœ¨æˆ‘éš”å£ï¼Œç„¶å Sooke å°±å¾…åœ¨æˆ‘æˆ¿é—´é‡Œäº†ï¼Œå‡†å¤‡çœ‹æˆ‘æ‰“ä»–éªŒçš„é‚£åœº cfã€‚\nä¹‹å‰ THUWC çš„æ—¶å€™è¯•æœºå pr å³è¾¹çš„å³è¾¹ï¼Œè¿™æ¬¡åˆæ˜¯æ¥çš„æ—¶é—´å·®ä¸å¤š + ä½éš”å£..æ¯”è¾ƒç¥å¥‡ã€‚\næ™šä¸Šæ™ºå•†æ¯”è¾ƒæ‰çº¿ï¼ˆå¯èƒ½å’Œå‰ä¸€å¤©æ²¡ç¡å¥½ç•¥æœ‰å…³ç³»ï¼‰ï¼Œæ‰äº†æ³¢åˆ†ã€‚\nCTS Day 1 å’•äº† 5minï¼ˆä¸ºä»€ä¹ˆ cf æ¯æ¬¡éƒ½æ˜¯ 35 å¼€å§‹ï¼‰\nå¼€è€ƒå‰å°±æ³¨æ„åˆ° T1 12sï¼ŒåŸæ¥æ˜¯ 10 ç»„æ•°æ®\u0026hellip;ï¼ˆctrï¼šæˆ‘æœ¬æœº 1.Xsï¼Œè¯„æµ‹å§¬ 6.Xsï¼Œæ€ä¹ˆåŠå•Šï¼‰\nç¬¬ä¸€çœ¼å°±è§‰å¾— T1 çš„æš´åŠ›å¥½åƒä¸å¤ªä¼šåšï¼Œé˜¶ä¹˜ä¼šæŒ‚ã€‚\nç„¶åå»çœ‹ T2ï¼Œ3min æƒ³åˆ°ä¸‰æ–¹åšæ³•ï¼Œç„¶ååˆèŠ±äº† 3min å»æ‰ä¸€ç»´ï¼Œç„¶å 10min å·¦å³å†™ + è°ƒå®Œäº† 48 åˆ†ã€‚\nT3 æ˜¯ä¸ªæç­”ï¼Œï¼ˆå¯èƒ½æ˜¯é›…ç¤¼é›†è®­é‚£é“äº”å­æ£‹çš„åŸå› ï¼‰ï¼Œæˆ‘å°±ç›´æ¥æäº†ä¸ªä¼°ä»·å‡½æ•°ï¼Œæ¯æ¬¡æšä¸¾æ‰€æœ‰å¯èƒ½çš„ä½ç½®ï¼Œé€‰ä¼°ä»·å‡½æ•°æœ€å¤§çš„é‚£ä¸ªã€‚å‰ä¸‰ä¸ªç‚¹éƒ½æ˜¯ç«‹åˆ»å‡ºç»“æœï¼Œç¬¬äºŒä¸ªç‚¹åªæœ‰ 9 åˆ†ï¼Œç„¶åå°±æŠŠåé¢çš„ç‚¹æŒ‚ç€è·‘ã€‚å‘ç°ç¬¬å››ä¸ªç‚¹éå¸¸ç‰¹æ®Šï¼Œæ‰€ä»¥å°±æ•°äº†ä¸€ä¸‹æ¯ç§å—å„æœ‰å‡ ä¸ªï¼Œç„¶åç›´æ¥åœ¨è‰ç¨¿çº¸ä¸Šç®—å‡ºæ–¹æ¡ˆï¼Œç„¶åè‹¥å¹²ä¸ª for å¾ªç¯è¾“å‡ºã€‚\nç„¶åï¼Œæœ¬æ¥ä»¥ä¸º T2 $m=0, 1, 2$ çš„å‡ ä¸ªç‚¹è¦å¤§åŠ›æ•°æ®åˆ†æ²»ï¼Œç„¶åå‘ç°å¦‚æœ $n\\ge d+2m-1$ ç›´æ¥è¾“å‡º $d^n$ å°±å¥½äº†..\nç„¶åï¼Œå‘ç° T3 åé¢çš„ä¸€ä¸ªç‚¹è·‘äº† 1h è¿˜æ²¡è·‘å‡ºæ¥ï¼Œäºæ˜¯å°±å¼€å§‹ä¹±æã€‚å…ˆæ˜¯è°ƒå¾ªç¯æ­¥é•¿ï¼Œå‘ç°è¿˜æ˜¯è·‘çš„ç‰¹åˆ«æ…¢ã€‚ç„¶åå°±åŠ äº†ä¸ªå‰ªæï¼Œæ¯ä¸€è¡Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå¯ä»¥æ”¾çš„ä½ç½®å°±æ”¾ï¼Œå¿«äº†å¾ˆå¤šã€‚æœ€åæŠŠä¸¤ä¸ªç‚¹åˆ†åˆ«è·‘å‡ºæ¥äº† 3 åˆ†å’Œ 4 åˆ†ã€‚\nå›å»çœ‹ T1ï¼Œå‘ç°ä¸€ä¸ªå‰ªææœç´¢çš„æ–¹æ³•ï¼ˆå®é™…ä¸Šå’Œé‚£ä¸ªä¸ƒæ–¹ dp æ€è·¯å·®ä¸å¤š\u0026hellip;ï¼‰ï¼Œç„¶åå†™åˆ°ä¸€åŠæƒ³èµ·æ¥å¯ä»¥æ‰“è¡¨..æœ€åå†™äº†ä¸ªå¯ä»¥åœ¨ 1s å†…è·‘å®Œä¸€ç»„çš„æœç´¢ï¼Œè¿˜æ˜¯æ‰“äº†ä¸ªè¡¨äº¤ä¸Šå»ã€‚\næœ€åæ˜¯ $10+60+46$ï¼Œè¢«æ‰€æœ‰äººè¸©äº†ã€‚\nä¸ºä»€ä¹ˆæˆ‘æ²¡æƒ³åˆ° T1 çš„ä¸ƒæ–¹ dp å‘¢..å½“æ—¶è„‘å­é‡Œå¤§æ¦‚æ˜¯ $12\\rightarrow2^n$ï¼Œç„¶è€Œæœ‰ä¸‰ç»´ï¼Œè¦ $2^{nml}$ï¼Œåšä¸äº†ï¼Œä¸åšäº†\u0026hellip;ï¼ˆé¢˜è§£ï¼šä¸€çœ‹å°±æ˜¯æŒ‡æ•°çº§å¤šé¡¹å¼ç®—æ³•ï¼‰\nCTS Day 2 åˆå’•äº† 5minã€‚\nç¬¬ä¸€çœ¼ï¼ŒT1 è®¡å‡ ï¼Œè€ƒåœºä¸èƒ½å¼€è®¡å‡ ã€‚\nç¬¬äºŒçœ¼ï¼ŒT2 å­—ç¬¦ä¸²ï¼wocï¼Œè¿˜æ˜¯ä¸ªè®¡æ•°ã€‚\nç¬¬ä¸‰çœ¼ï¼ŒT3 è¿™æ˜¯æ£µæ ‘ï¼è¿™è¾¹æ€ä¹ˆè¿˜æœ‰åçš„..\nçœ‹äº†ä¸€åœˆè¿˜æ˜¯æ„Ÿè§‰ T1 æœ€å¯åš\u0026hellip;ç„¶è€Œæˆ‘å…ˆå»æ¨äº†ä¸€ä¼šå„¿ T2ï¼Œæ²¡æœ‰ä»»ä½•æˆæœã€‚T3 çš„æš´åŠ›ä¹Ÿä¸ä¼šå†™..\nå†·é™äº†ä¸€ä¸‹æƒ³åˆ°äº† T1 $30â€‹$ åˆ†åšæ³•ï¼Œå°±å†™äº†ä¸€ä¸ªã€‚è€ƒåœºä¸Šè¿˜ç®—é”™å¤æ‚åº¦äº†..åªä¸è¿‡é—®é¢˜ä¸å¤§ã€‚\nç„¶ååœ¨ä¸‰é¢˜ä¹‹é—´è½®æµè‡ªé—­ï¼ŒT1 çŒœåˆ°äº†å‡¸åŒ…åˆå¹¶åæ›´ä¼˜è‚¯å®šè¦åˆå¹¶ï¼Œä¹Ÿå†™äº†ä¸ªä¸¤ä¸¤å°è¯•åˆå¹¶ï¼Œç„¶è€Œè¿‡ä¸å»æ ·ä¾‹ä¸‰ï¼Œå°±æ²¡ç®¡äº†ã€‚ï¼ˆ95 åˆ†åšæ³•ï¼šéšæœºåˆå¹¶ï¼Œè®°å½•è¿‡ç¨‹ä¸­æœ€ä¼˜è§£ï¼Œç›´åˆ°å¿«è¶…æ—¶ã€‚ï¼‰\nå¿«ç»“æŸçš„æ—¶å€™å†™äº†ä¸ª T2 10 åˆ†çˆ†æœï¼Œå‘ç°è¦è·‘ 4sï¼Œç„¶åå°±å†™äº†ä¸ªå­—ç¬¦ç¦»æ•£åŒ–..å®é™…ä¸Šå¯ä»¥è¢«ç±»ä¼¼ bdfhjlnprt ä¹‹ç±»çš„ä¸²å¡æ‰ï¼Œåªä¸è¿‡è¿˜æ˜¯è¿‡äº†ã€‚\næœ€åæ˜¯ $10+30+0$ï¼Œå¥½åƒè¿˜æŒºå¤§ä¼—ï¼ˆ\nCTS å…¶å®ƒ è®²é¢˜æ¯”è¾ƒè‡ªé—­..å°±è®°å¾— _rqy è‡ªå·±ä¸Šå°åæ§½ä¸¤å¤©å››é“è®¡æ•°ï¼Œç»„é¢˜äººï¼ˆåŒæ—¶æ˜¯ D1T3 å‡ºé¢˜äººï¼‰è¯´â€œæˆ‘è¦ä»äº”é“é¢˜é‡Œé¢é€‰å…­é“é¢˜ï¼Œæˆ‘ä¹Ÿå¾ˆæ— å¥ˆå•Šâ€ã€‚\nå¦å¤–é¦–å¸ˆå¤§é™„ä¸­é‡Œçš„æœ‰å¼ æ‘„å½±çš„æ ‡é¢˜æˆ³åˆ°æˆ‘äº†\u0026hellip;ï¼ˆä¸è¦è¯´æˆ‘ä¸­äºŒï¼‰ï¼ˆä¹Ÿä¸è¦åœ¨æ„å³è¾¹ï¼Œé‚£æ˜¯æ‰‹æŒ‡æŒ¡ä½äº†ï¼‰\nå½•äº†ä¸ªè®ºæ–‡ç­”è¾©ã€‚\næœ€åé—­å¹•å¼çš„æ—¶å€™ wh å’Œ dzd çš„è®²è¯è¿˜æ˜¯éå¸¸ç²¾å½©ã€‚è­¬å¦‚ï¼šçŸ¥è¯†ç‚¹æ¶µç›–äº†å®¹æ–¥åŸç†ï¼ŒåŠ¨æ€è§„åˆ’ï¼Œæ¦‚ç‡è®ºâ€¦â€¦ä¸ºä»€ä¹ˆè¦å»æ‰è¿™ä¸ª C å‘¢ï¼Ÿæ²¡æœ‰é’±æ˜¯å¹²ä¸äº†è¿™ä¸ªæ´»çš„ï¼Œæ”¶çš„é’±ä¹Ÿä¸ä¸€å®šå¤Ÿ\ndzd è¿˜æŠ±ç€å¥½åƒæ˜¯æŸä½åšå£«çš„å¥³å„¿ä¸Šäº†å°..\nåœ¨ cf ä¸ŠæŠ¢äº†ä¸ªè¯„è®ºã€‚ä¸Šåˆç­”è¾©å®Œå°±å·®ä¸å¤šçŒœåˆ°äº†åå•ï¼Œç„¶è€Œä¸æ•¢æå‰å‘ï¼Œå°±æå‰å†™å¥½äº†è¯„è®ºï¼Œä¸€å…¬å¸ƒç«‹é©¬å‘å‡ºå»äº†ã€‚æ„Ÿè§‰çš„ç¡®å¯ä»¥ä»ç­”è¾©åˆ¤æ–­åå•ï¼ŒæŸä¸ª twr ç¡¬æ˜¯è§‰å¾—æœ‰é»‘å¹•è¿˜è¢« up äº†æˆ‘å°±å¾ˆæ²¡æœ‰åŠæ³•ã€‚\ncf å‡ºé¢˜ç»„å…¨å‘˜ Agã€‚\nAPIO è®²è¯¾ Day 1 ä¸Šåˆç¼“å­˜ç®¡ç†ï¼Œä¸‹åˆ PJ dp ï¼Ÿï¼Ÿ\nAPIO è€ƒè¯• å¼€åœº 5min å°±äº¤äº†ä¸€å‘ WA..æŠŠ A çš„æš´åŠ›äº¤é”™é¢˜äº†ï¼Œä¸€çœ‹å‘ç°çº¸è´¨é¢˜é¢å’Œå®é™…é¡ºåºä¸ä¸€æ ·ï¼ˆå¥½åƒæ˜¯ç¿»è¯‘çš„æ—¶å€™è¿˜æ²¡ç»™é¢˜ç›®é¡ºåº\u0026hellip;ï¼‰\nè¯„æµ‹ç³»ç»Ÿæœç„¶æ˜¯ä¸éœ€è¦æ•°æ®åˆ†æ²»çš„ï¼Œæ¯ä¸ªå­ä»»åŠ¡åˆ†åˆ«æäº¤å°±å¯ä»¥äº†ï¼Œä¼šåˆ†åˆ«åœ¨æ‰€æœ‰æäº¤ä¸­å– maxã€‚åªä¸è¿‡å¦‚æœå‡ºç°ç‰¹æ®Šæƒ…å†µï¼Œè¦ç”± CCF æ¥æ”¶é¢˜ï¼Œè¿™æ ·å†™å¯èƒ½ä¼šæ¯”è¾ƒæƒ¨..\nå…ˆæŠŠ T1 çš„æš´åŠ›å’Œæ— ä¿®æ”¹å†™äº†ï¼Œç„¶åæŠŠ T2 çš„ 10 åˆ†å†™äº†ï¼Œç„¶åæŠŠ T3 æš´åŠ›ã€è¯¢é—®é•¿åº¦ä¸€ã€é›¶å˜ä¸€å†™äº†ï¼Œç„¶åæŠŠ T1 é“¾å†™äº†ã€‚è¿™äº›åˆ†å¥½åƒéƒ½æ¯”è¾ƒæ°´..è¿‡ç¨‹ä¸­æƒ³äº†ä¼šå„¿å„ç§æ­£è§£ï¼Œå†™å®Œçš„æ—¶å€™å¤§çº¦æ˜¯ 3hã€‚\nç„¶åï¼Œæ„Ÿè§‰ T1 çš„æ ‘åº”è¯¥å¯åšï¼Œç„¶è€Œä¸ä¼šåšã€‚T3 çš„ä¿®æ”¹åœ¨è¯¢é—®å‰å¥½åƒä¹Ÿä¸å¤ªä¼šã€‚ç„¶åå»çœ‹åªæœ‰ 10 åˆ†çš„ T2ï¼Œæ€ä¹ˆè¿™ä¹ˆå¤š subtaskï¼Œæˆ‘ä¸€ä¸ªéƒ½ä¸ä¼šå•Š..ç„¶åï¼Œæˆ‘å‘ç°å¥½åƒæœ‰å¾ªç¯èŠ‚ï¼Œç„¶åå°±æ˜¯æœ¬åœºæ¯”èµ›æœ€è ¢çš„ä¸€ä¸ªåœ°æ–¹ï¼Œæˆ‘æŠŠå¾ªç¯èŠ‚æš´åŠ›è·‘å‡ºæ¥ï¼Œç„¶åç”¨ map åˆ¤ä¸‹æ ‡..ç„¶åæƒ³äº†ä¸ªç‰¹åˆ«éº»çƒ¦çš„ 5 åˆ†åšæ³•ï¼Œä¸€ç›´è°ƒåˆ°è€ƒè¯•ç»“æŸ\u0026hellip;\næœ€ååˆ†æ•°å°±æ˜¯å‰ 3h å†™çš„ $43+10+60$ï¼Œä¸€å‡ºè€ƒåœºå‘ç°æ‰€æœ‰äººéƒ½æ˜¯ 243 / 203 \u0026hellip; è¯´å¥½çš„ 100+ Au å‘¢ï¼Ÿä»¥åå†ä¹Ÿä¸èƒ½æŒ‰å¾€å¹´åˆ†æ•°çº¿æ‰“æ¯”èµ›äº†\u0026hellip;\nAPIO è®²é¢˜  è€ƒè™‘è®©å¤§è±¡å†™é¢˜è§£ å¤§è±¡å†™äº†ä¸€ç¯‡é¢˜è§£ è®²å®Œäº†  APIO è®²è¯¾ Day 2 ä¸Šåˆæ˜¯ THUWC æ—¶æ¥è¿‡çš„ lzjï¼Œåˆæ˜¯å›¾åƒæ¸²æŸ“ã€‚\nä¸‹åˆæ˜¯å››åœºè®²é¢˜é‡Œæœ€æ­£å¸¸çš„ä¸€åœºï¼ˆæ ‘ä¸Šçº¿æ€§é—®é¢˜ï¼‰ï¼Œå‰åŠéƒ¨åˆ†æ˜¯ å¸Œæœ›çš„è¶…è¯¦ç»†é¢˜è§£ è‡ªé¡¶å‘ä¸‹ dp + é•¿é“¾å‰–åˆ†ï¼ŒååŠéƒ¨åˆ†ï¼ŒååŠéƒ¨åˆ†æ˜¯ä»€ä¹ˆå•Š..å¥½åƒæ˜¯å„ç§ç¥ä»™é¢˜ï¼Œæ¯”å¦‚æ ‘ä¸Šçº¿æ€§ï¼ˆä¸å¸¦åé˜¿å…‹æ›¼ï¼‰å¹¶æŸ¥é›†â€¦â€¦\nAPIO é¢å¥– äº”é¡µ 113 è‰¹ï¼ŒæˆåŠŸå‹çº¿ Cuã€‚\nå››é¡µ 203 Au æ¯” Ag å¤šè‰¹ã€‚\nAg å‰å‡ éƒ½æ˜¯ç¥ä»™è‰¹ã€‚\nTHUSC Day -1 THUSC ç”µè„‘çš„ç”¨æˆ·åæ˜¯ THUSC Day 0-Testã€THUSC Day0ã€THUSC Day1-1 å’Œ THUSC Day1-2ã€‚ï¼ˆä¸ºä»€ä¹ˆ Day -1 è¦æ THUSC ç”µè„‘ç”¨æˆ·åï¼Ÿå› ä¸ºä»Šå¤©æ˜¯ Day -1ã€‚ï¼‰\næ”¶åˆ°é€‰æ‰‹é¡»çŸ¥ï¼Œåˆ’é‡ç‚¹ï¼šWireSharkï¼ŒO3ï¼Œpythonï¼ŒUbuntu 16.04ï¼Œæ²¡å†™è€ƒè¯•å®‰æ’ã€‚\nå­¦ä¸€æ³¢ WireShark å¥½äº†ã€‚\nç»“æœé¢“äº†ä¸€æ•´å¤©\næ™šä¸Š 11 ç‚¹ç¡äº†ï¼Œå¥½åƒå¾ˆä¹…æ²¡ç¡è¿™ä¹ˆæ—©äº†..\nTHUSC Day 0 ä¸ºä»€ä¹ˆ tdoj waiting æ˜¾ç¤ºæ»¡åˆ†å•Š..ä¸€å¼€å§‹æˆ‘è¿˜ä»¥ä¸º pt æ˜¯å‡çš„ï¼ˆ\nè¯•æœºè‡ªé—­äº†ï¼Œsb å­—ç¬¦ä¸²äºŒåˆ†æƒ³äº†æ— é™å‡åšæ³•ï¼Œå¼€å§‹æ€€ç–‘è‡ªå·±çš„æ™ºå•†ã€‚\nå¼€è¥å¼å…¨æ˜¯ç¡¬å¹¿ï¼Œæ„Ÿè§‰è¿˜æ˜¯ THUWC çš„æœ‰æ„æ€äº›ï¼Œå“¦ä¸å¯¹ï¼Œé‚£å¥½åƒæ˜¯é—­å¹•å¼\u0026hellip;\nä¸€è¿›è€ƒåœºå°±å‘ç”Ÿäº†ä¸€ä»¶å¾ˆç¥å¥‡çš„äº‹ï¼Œ94 å’Œ 96 ä¸­é—´æ²¡æœ‰ 95..äºæ˜¯æˆ‘æ¢äº†ä¸€å°æœºå­ã€‚\næ¯”èµ›å’•äº† $40min$ï¼ˆä¼ ç»Ÿè‰ºèƒ½ï¼‰ã€‚\nå¼€åœºçœ‹ T1ï¼Œå¾ˆå¿«å‘ç°äº†ï¼ˆåœ¨æ²¡æœ‰æ“ä½œ 3 æ—¶ï¼‰å–ç©ºçš„æƒ…å†µåªä¼šå‘ç”Ÿä¸è¶…è¿‡ $n$ æ¬¡ï¼Œ20min çš„æ—¶å€™å·²ç»å®Œå…¨æ„æ€å¥½äº†æ­£è§£ï¼Œç„¶è€Œä¸çŸ¥é“ä¸ºä»€ä¹ˆä»¥ä¸ºæ“ä½œ 3 ä¼šç ´åå¤æ‚åº¦ï¼Œå°±å†™äº†ä¸ª 60 åˆ†..ç¬¬ä¸€æ¬¡å°è¯•åœ¨è‰ç¨¿çº¸ä¸Šå®Œæ•´åœ°å†™ä¸‹è¦ç»´æŠ¤å“ªäº›é‡ï¼Œæ¯ä¸ªæ“ä½œå„è¦å…·ä½“æ€ä¹ˆä¿®æ”¹æ€ä¹ˆè¯¢é—®ï¼Œå†™äº†åŠå¼ è‰ç¨¿çº¸ï¼Œç„¶åå†™ä»£ç æå…¶é¡ºç•…ï¼Œ1h çš„æ—¶å€™å°±æŠŠ 60 åˆ†éƒ¨åˆ†åˆ† 1A äº†ã€‚ç„¶åå‘ç° $l=r$ ä¹Ÿå¾ˆæ°´ï¼Œå°±å†™äº†ä¸ª $80$ åˆ†çš„æ•°æ®åˆ†æ²»ï¼Œç„¶åå„ç§æŒ‚ï¼Œåˆè¿‡äº† $40min$ æ‰å†™å®Œï¼Œå…± $6.2KB$ã€‚\nç„¶åçœ‹äº†çœ¼ T2ï¼Œ$k=20\\rightarrow2^k$ï¼Œ$\\min\\rightarrow minmax$ å®¹æ–¥ $\\rightarrow$ ä¸ä¼šåšï¼ˆé¬¼çŸ¥é“æˆ‘æ€ä¹ˆæƒ³çš„ï¼‰ï¼Œç„¶åå»çœ‹ T3ï¼Œä¾§ä¿¡é“æ”»å‡»æ˜¯ä»€ä¹ˆå•Š..OI é¢˜åå…¨æ˜¯éª—äººçš„.jpgã€‚å¾€åä¸€çœ‹ï¼Œå¥½åƒè¿˜çœŸæ˜¯é¢˜ç›®èƒŒæ™¯é‡Œè¯´çš„é‚£å›äº‹..å¥½åƒä¸å¤ªå¯åšï¼Œå›å»çœ‹ T2ã€‚woc è¿™ä¸æ˜¯ä¸ª sb é¢˜å—\u0026hellip;åœ¨æœ€çŸ­è·¯ä¸Šå°±æ˜¯ $dis[u][k]+dis[k][v]=dis[u][v]$ï¼Œç„¶åéšæ‰‹å†™äº†ä¸ª $3^k$â€”â€”å¯¹æ¯ä¸ªæ•‘æ´é˜Ÿè®°å½•å“ªäº›ç‚¹å¯ä»¥ã€‚ç„¶åå‘ç°æ”¹æˆå¯¹æ¯ä¸ªç‚¹è®°å½•å“ªäº›æ•‘æ´é˜Ÿå¯ä»¥ï¼Œå°±å¯ä»¥è½»æ¾ $n2^k$ äº†..pt 1Aï¼Œç„¶åå°±æ²¡ç®¡äº†ã€‚\nçŠ¹è±«äº†ä¸€ä¸‹ï¼Œå†³å®šè¿˜æ˜¯å…ˆåˆ«ä¾§ä¿¡é“æ”»å‡»äº†ï¼Œå›æ¥çœ‹ T1ã€‚woc æˆ‘åˆ sb äº†ï¼Œæ“ä½œä¸‰ä¸ç ´åå¤æ‚åº¦å•Šï¼Œæ¯æ¬¡å•ç‚¹åŠ æœ€å¤šæŠŠä¸€ä¸ªç©ºçš„å˜æˆä¸ç©ºï¼Œæ‰€ä»¥è¿˜æ˜¯åªä¼šæœ‰ä¸è¶…è¿‡ $n+m$ æ¬¡å–ç©º..äºæ˜¯åœ¨ $60â€‹$ åˆ†ä»£ç çš„åŸºç¡€ä¸ŠåªåŠ ä¸€ä¸ªå‡½æ•°ï¼Œå…¶å®ƒå…¨éƒ½ä¸ç”¨æ”¹ï¼Œå°± pp äº†ã€‚\nç„¶åå»çœ‹ T3ï¼Œè¿™ä¸ª $10$ åˆ†ï¼Œå¯ä»¥æšä¸¾ $w$ï¼Œæšä¸¾ $y$ï¼Œæšä¸¾ $q$â€¦â€¦è¯¶ï¼Œè¯¢é—®æ•°è¶…äº†ï¼Œé‚£å°± get_w().. wocï¼Œç›´æ¥ for (i = 0; i \u0026lt; 500; ++i) Qs[i] = i; ä¸å°±å¯ä»¥äº†å—ï¼Œæˆ‘åˆ sb äº†..æŠŠæšä¸¾åˆ æ‰ï¼Œå†™ä¸Š for å¾ªç¯ï¼Œä¸€äº¤ï¼Œæ€ä¹ˆçˆ†é›¶äº†ï¼Ÿwocï¼Œæ²¡è®¾ç½® $u$ å’Œ â€‹$v$\u0026hellip;é‚£åé¢çš„åˆ†æ€ä¹ˆåšå•Š..å…ˆ get_w() get_y() å§..äºŒåˆ†ä¸€ä¸‹ $q$..æ€ä¹ˆè¿‡ä¸äº†å•Š..å“¦ï¼Œæ˜¯å¿«é€Ÿå¹‚ï¼Œæ‰€ä»¥ $time$ å¹¶ä¸å…³äº $q$ å•è°ƒ..é‚£å°±ä»¥äºŒåˆ†ç»“æœä¸ºä¸­å¿ƒå¾€ä¸¤è¾¹çˆ†æœå§..$subtask2$ æ‹¿äº† $16$ï¼Œç»§ç»­å„ç§ä¹±æï¼Œæ‹¿ä¸åˆ°åˆ†äº†ï¼Œè€ƒè¯•ç»“æŸäº†ã€‚\næ„Ÿè§‰å¥½åƒæ¯”è¾ƒå¤§ä¼—åˆ†å•Š..å¯èƒ½ä¼šè¢« T3ï¼ˆ\u0026amp; å¯èƒ½æ¯”è¾ƒå¼±çš„ pt \u0026amp; æŠŠ THUSC å½“æˆ IOI èµ›åˆ¶æ‰“çš„é€‰æ‰‹ï¼‰åŒºåˆ†å‡ºæ¥äº†ã€‚\nå¤§çº¦åœ¨å®¾é¦†è§è¯†åˆ°äº†çœŸæ­£çš„â€œæŠ½æ°´é©¬æ¡¶â€\u0026hellip;ä¸æ˜¯æŒ‰ï¼Œä¸æ˜¯è½¬ï¼Œæ˜¯æŠ½..\næ™šä¸Šç¡å¾—æ¯”å‰ä¸€å¤©è¿˜æ—©ï¼ˆ\nTHUSC Day 1-1 94 å’Œ 96 ä¸­é—´è¿˜æ˜¯æ²¡æœ‰ 95\u0026hellip;\næ¯”èµ›åˆå’•äº† $30min$ã€‚\nå¼€åœºï¼ŒT1 ä¸æ˜¯ sb é¢˜å— $\\rightarrow$ æ²¡è¿‡ pt $\\rightarrow $ è¯»é”™é¢˜äº†ï¼Ÿ$\\rightarrowâ€‹$ è‰ï¼Œåªæœ‰ç¯å¡”å¯ä»¥ç‚¹äº®..ï¼ˆé¬¼çŸ¥é“æˆ‘ä¸ºä»€ä¹ˆåœ¨ç‚¹äº®æ•°è½´ï¼ˆå¤§çº¦æ˜¯ä»¥ä¸ºæ¯ä¸ªç‚¹éƒ½æœ‰ç¯å¡”ï¼Œåªæ˜¯ä¸€éƒ¨åˆ†æœ‰æ¸¸å®¢å§..\näºæ˜¯ 20min æ‰æŠŠ T1 è¿‡æ‰ï¼ˆ\nç„¶åå»çœ‹ T2ï¼Œå‰ä¸¤ä¸ª subtask å¥½åƒæŒºå¥½å†™çš„..ç»§ç»­çœ‹ T3ï¼Œè€ƒåœºä¸Šå¥½åƒä¸èƒ½å¼€è®¡ç®—å‡ ä½•æ¥ç€ï¼ˆ\nç„¶è€Œæˆ‘è¿˜æ˜¯å¼€äº†..emm..è¿™ç©æ„ä¸ç”¨å–æ¨¡è¯¶..å“¦ï¼Œå¥½åƒæ¯ç§æœ¬è´¨ä¸åŒçš„åˆ’åˆ†éƒ½å¯ä»¥ç”¨ä¸€æ¡ä¸¤åœ†å…¬åˆ‡çº¿è¡¨ç¤ºã€‚ä½†æ˜¯ï¼Œæ€ä¹ˆæ±‚å…¬åˆ‡çº¿å•Š..ç”¨å„ç§æ–¹æ³•ç®—äº†ä¸€ä¸ªå°æ—¶ï¼Œç®—å‡ºæ¥çš„ç»“æœéƒ½å¾ˆéº»çƒ¦ï¼Œæ„Ÿè§‰ä¼šç®—é”™ï¼Œäºæ˜¯å°±æ²¡ç®¡äº†ï¼ˆç„¶è€Œé™æ™ºçš„æ•ˆæœå·²ç»è¾¾åˆ°äº†\nå…ˆå†™äº†å‰ä¸¤ä¸ª subtaskï¼Œç„¶åå‘ç°å¥½åƒå¯ä»¥å¤„ç†å‡ºæ¯ä¸ªå³ç«¯ç‚¹å‘å·¦ç§ç±»æ•°å¢åŠ çš„åœ°æ–¹ï¼Œç„¶åå†™äº†ä¸ªå‡åšæ³•å†™è‡ªé—­äº†ï¼Œæœ€åå¤§è‡´ä¸Šæƒ³åˆ°äº†å•è°ƒæ ˆåšæ³•ï¼Œç„¶åå¥½åƒæ˜¯ä»¥ä¸ºå‡æ‰äº†ï¼Œä¹Ÿå¯èƒ½æ²¡å¤ªæƒ³æ¸…æ¥šï¼Œæœ€åå†™äº†ä¸ª $\\mathcal O(nm^2)â€‹$ äº¤ä¸Šå»\u0026hellip;\næˆåŠŸè¢«è®¡å‡  \u0026amp; è‡ªå·±çš„å‡åšæ³•é™æ™ºï¼Œè¢«åŒºåˆ†äº†ï¼Œç™½ç»™ $48$ åˆ†ã€‚\nTHUSC Day 1-2 æœç„¶æ˜¯ç½‘ç»œé¢˜..\næœ‰äº† WC çš„ç»éªŒï¼Œæ²¡ä»”ç»†é˜…è¯»å­¦ä¹ æ‰‹å†Œç›´æ¥å¼€å§‹åšï¼Œè¿˜æ˜¯å†™äº† $1h$ T1..\nT2 çš„ $8$ åˆ†æ˜¯ CRC32ï¼ŒWC å†™è¿‡ï¼Œç„¶å..å†™äº† $1h$ï¼ŒWA äº† $1h$ã€‚å­¦ä¹ æ‰‹å†Œé‡Œçš„ CRC32 æ ·ä¾‹è¿‡äº†ï¼Œè¾“å‡ºä¸­é—´ç»“æœ data è½¬ 01 çœ‹èµ·æ¥ä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜..ä¸çŸ¥é“æ€ä¹ˆå›äº‹ã€‚\nå¤§ä¼—åˆ†å¥½åƒæ˜¯ $48$ï¼Œã•›è¢«åŒºåˆ†äº†ã€‚\nTHUSC Day 2 å¬è¯´çº¿ 428 ï¼Ÿemm..æˆåŠŸè¢«ç™½ç»™åŒºåˆ†äº†ã€‚\nåªä¸è¿‡ä¹Ÿæ²¡ä»€ä¹ˆç™½ç»™ä¸ç™½ç»™çš„ï¼Œå°±æ˜¯ä¸ç†Ÿç»ƒæ‰ä¼šç™½ç»™ï¼Œä¼šåšä¹Ÿæ²¡ç”¨å•Š.\nç½‘ä¼ çº¿å‡æ‰äº†\u0026hellip;\næˆ‘å¦ˆåœ¨å…«ç‚¹åŠæ¥åˆ°æˆ‘çˆ¸çš„ç”µè¯ï¼Œè¯´æˆ‘çˆ¸æ¥åˆ°äº† THU ç”µè¯\u0026hellip;\nç„¶åï¼Œèµ¶å»è¥¿éƒŠå®¾é¦†ï¼Œç­‰äº† 2.5hï¼Œå¥½åƒæ˜¯åˆ†å—åæŒ‰å­—å…¸åºæ’ï¼Ÿä¸­é€”è¿˜è§åˆ°äº†åœ¨å…¶å®ƒ SC æ¸¸è®°é‡Œå¬è¯´è¿‡çš„æ­çŸ¿æ³‰æ°´ç“¶ã€‚\né¢è¯•å¤§çº¦æ˜¯è‡ªæˆ‘ä»‹ç» + æé—® + å˜¤è¯­é˜…è¯»ã€‚æ¯•ç«Ÿæˆ‘ä¹Ÿæ˜¯å—äº†å…¶ä»–äººæ¸¸è®°ä¸€å®šçš„å¸®åŠ©ï¼Œç®€å•è¯´ä¸€ä¸‹éœ€è¦æ³¨æ„çš„é—®é¢˜..\n è‡ªæˆ‘ä»‹ç»ä¸éœ€è¦æ OI æˆç»©ã€‚æˆ‘ä¸€å¼€å§‹è¯´æˆ‘çš„ OI æˆç»©è¢«æ‰“æ–­äº†ï¼Œå¥½åƒæ˜¯è€ƒå®˜æœ‰æˆç»©..ï¼ˆå…¶å®æ˜¯çœ‹åˆ«äººæ¸¸è®°è¯´æ•™å®˜æé—®â€œä½ çš„ OI æœ€å¥½æˆç»©â€æˆ‘æ‰è¯´çš„ qaq æé—®ä¼šå’Œè‡ªæˆ‘ä»‹ç»ç›¸å…³ã€‚åæ­£æˆ‘æ˜¯è¿™æ ·çš„..æ¯”å¦‚ï¼Œæˆ‘è‡ªæˆ‘ä»‹ç»çš„æ—¶å€™æäº†ä¸€ä¸‹å¯¹äººå·¥æ™ºèƒ½ç•¥æœ‰äº†è§£ï¼Œå°±è¢«é—®äº†æœ‰å“ªäº›äº†è§£ã€æœ‰ä»€ä¹ˆçœ‹æ³•ä¹‹ç±»çš„ã€‚æ‰€ä»¥å»ºè®®è‡ªæˆ‘ä»‹ç»å¯ä»¥æä¸€æè‡ªå·±ç†Ÿæ‚‰çš„è®¡ç®—æœºç§‘å­¦é¢†åŸŸï¼Œç„¶ååœ¨ç›¸å…³æ–¹é¢å‡†å¤‡ä¸€ä¸‹å¯èƒ½çš„é—®é¢˜å›ç­”ã€‚ å˜¤è¯­é˜…è¯»è¦å°è¯•çœ‹æ‡‚ã€‚å¤§çº¦æ˜¯è®¡ç®—æœºç§‘å­¦ä¸“ä¸šæ–‡ç« ï¼Œä¸€å¼€å§‹ä¼šç»™ä½  $30s$ å·¦å³çœ‹ä¸€éï¼Œç„¶åæˆ‘å½“æ—¶åªæ˜¯æƒ³äº†æƒ³åº”è¯¥æ€ä¹ˆè¯»ï¼Œæ²¡æœ‰ä»”ç»†çœ‹ã€‚è¯»äº†ä¸€éä¹‹åä»–é—®æˆ‘çœ‹æ‡‚äº†ä»€ä¹ˆï¼Œç„¶åå°± GG äº†..ä¸ªäººæ„Ÿè§‰è¿™ä¸ªéƒ¨åˆ†æ˜¯æˆ‘é¢è¯•æŒ‚çš„æœ€æƒ¨çš„åœ°æ–¹ï¼ˆ  ä¸‹åˆè®²é¢˜ + ç§‘ç ” / ç§‘å / è’œç®—å ä»‹ç»ï¼Œæ„Ÿè§‰ä¸å¦‚ WC æœ‰æ„æ€..å¯èƒ½æ˜¯æ—¶é—´æ¯”è¾ƒçŸ­ï¼Œè€Œä¸”ä¹Ÿå¬è¿‡ä¸€éç±»ä¼¼çš„å†…å®¹äº†..ï¼ˆæœ‰ä¸ªäººå·¥æ™ºèƒ½ç®€ç¬”ç”»å¦¹å­æŒºæœ‰æ„æ€çš„ï¼‰\nç„¶åï¼Œè£è· 3=ï¼Œå°±å»èµ¶ç«è½¦äº†..\n","date":"2019-05-12T21:45:13+08:00","permalink":"https://ouuan.github.io/post/300iq%E5%A5%94%E5%8C%97%E5%9D%A1/","tags":["CCFç³»åˆ—èµ›äº‹","æ¸…åè¥"],"title":"300iqå¥”åŒ—å¡"},{"categories":["çŸ¥è¯†ç‚¹"],"contents":"PAM æ˜¯ä¸€ç§å¤„ç†å›æ–‡ä¸²ç›¸å…³é—®é¢˜çš„æœ‰åŠ›å·¥å…·ã€‚\nåˆæ˜¯ä¸€å¥åºŸè¯ã€‚\nPAM æ˜¯ä»€ä¹ˆï¼Ÿ é¦–å…ˆå®ƒæ˜¯ä¸ªè‡ªåŠ¨æœº\u0026hellip; PAM æ˜¯ä¸€ä¸ªæ¥å—ä¸”ä»…æ¥å—æŸä¸ªå­—ç¬¦ä¸²çš„æ‰€æœ‰å›æ–‡å­ä¸²çš„ä¸­å¿ƒåŠå³åŠéƒ¨åˆ†çš„ DFAã€‚\nâ€œä¸­å¿ƒåŠå³è¾¹éƒ¨åˆ†â€åœ¨å¥‡å›æ–‡ä¸²ä¸­å°±æ˜¯å­—é¢æ„æ€ï¼Œåœ¨å¶å›æ–‡ä¸²ä¸­å®šä¹‰ä¸ºä¸€ä¸ªç‰¹æ®Šå­—ç¬¦åŠ ä¸Šå³è¾¹éƒ¨åˆ†ã€‚è¿™ä¸ªå®šä¹‰çœ‹èµ·æ¥å¾ˆå¥‡æ€ªï¼Œä½†å®ƒèƒ½è®© PAM çœŸæ­£æˆä¸ºä¸€ä¸ªè‡ªåŠ¨æœºï¼Œè€Œä¸ä»…æ˜¯ä¸¤æ£µæ ‘ã€‚\nPAM çš„çŠ¶æ€åŠè½¬ç§» PAM çš„æ¯ä¸ªçŠ¶æ€éƒ½è¡¨ç¤ºä¸€ä¸ªå›æ–‡å­ä¸²ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªç‰¹æ®ŠçŠ¶æ€ï¼Œ$lenâ€‹$ åˆ†åˆ«ä¸º $0â€‹$ å’Œ $-1â€‹$ï¼Œå®ƒä»¬åˆ†åˆ«ä½œä¸ºå¶å›æ–‡å­ä¸²å’Œå¥‡å›æ–‡å­ä¸²ä¸¤æ£µæ ‘çš„æ ¹ã€‚\nPAM çš„è½¬ç§»è¡¨ç¤ºåœ¨ä¸²çš„ä¸¤ä¾§å„åŠ ä¸ŠåŒä¸€ä¸ªå­—ç¬¦ï¼Œå› æ­¤ $lenâ€‹$ ä¹Ÿä¼šåŠ äºŒã€‚PAM æ˜¾ç„¶æ˜¯åˆ†åˆ«ä»¥ $0â€‹$ å’Œ $-1â€‹$ ä¸ºæ ¹çš„ä¸¤æ£µæ ‘ï¼Œå› ä¸ºæ¯ä¸ªçŠ¶æ€ç”±å”¯ä¸€çš„çŠ¶æ€è½¬ç§»è€Œæ¥ï¼ˆåˆ æ‰ä¸¤ç«¯çš„å­—ç¬¦ï¼‰ã€‚\nå’Œ SAM / AC è‡ªåŠ¨æœºä¸€æ ·ï¼ŒPAM ä¹Ÿæœ‰ $failâ€‹$ è¾¹ï¼ŒåŒæ ·è¡¨ç¤ºçœŸåç¼€ä¸­åœ¨è‡ªåŠ¨æœºé‡Œçš„æœ€é•¿çŠ¶æ€ï¼ˆä¹Ÿå°±æ˜¯æœ€é•¿å›æ–‡çœŸåç¼€ï¼‰ã€‚\nä¸ºäº†è®© PAM ç¬¦åˆè‡ªåŠ¨æœºçš„å®šä¹‰ï¼Œå¯ä»¥åœ¨æ¦‚å¿µä¸Šä» $-1â€‹$ åˆ° $0â€‹$ è¿ä¸€æ¡ç‰¹æ®Šå­—ç¬¦è¾¹ï¼Œç„¶åä»¥ $-1â€‹$ ä½œä¸ºèµ·å§‹çŠ¶æ€ã€‚ç„¶è€Œåœ¨ä»£ç å®ç°é‡Œæ²¡æœ‰äººä¼šè¿™ä¹ˆåšã€‚\nPAM çš„æ„å»º ä¸€ä¸ªæ€§è´¨ åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²åæ·»åŠ ä¸€ä¸ªå­—ç¬¦ï¼Œè‡³å¤šå¢åŠ ä¸€ä¸ªä¹‹å‰æ²¡æœ‰å‡ºç°è¿‡çš„å›æ–‡å­ä¸²ï¼Œä¸”è¯¥å›æ–‡å­ä¸²å¿…å®šæ˜¯åŸä¸²çš„ä¸€ä¸ªå›æ–‡çœŸåç¼€ä¸¤ä¾§åŠ ä¸Šæ–°æ·»åŠ çš„è¿™ä¸ªå­—ç¬¦ã€‚\nç®€å•è¯æ˜ï¼šå¦‚æœæ–°æ·»åŠ çš„å­—ç¬¦å¤„åœ¨å¤šä¸ªå›æ–‡å­ä¸²å†…ï¼Œæ‰¾åˆ°æœ€é•¿çš„ä¸€ä¸ªï¼Œå‰©ä¸‹çš„éƒ½å¯ä»¥æ²¿å…¶ä¸­å¿ƒç¿»æŠ˜è¿‡å»ï¼Œæ‰€ä»¥ä¸€å®šå‡ºç°è¿‡ã€‚\nè¿™ä¸ªæ€§è´¨æ—¢è¯´æ˜äº† PAM çš„çŠ¶æ€æ•°æ˜¯ $\\mathcal O(n)â€‹$ çš„ï¼Œä¹Ÿä¸ºåæ–‡çš„æ„å»ºæ–¹æ³•æä¾›äº†ä¾æ®ã€‚\nåŸºç¡€æ„å»ºæ³• è¿™æ˜¯ä¸€ä¸ªå¢é‡ç®—æ³•ï¼Œå³æ¯æ¬¡ä»¥å‡æ‘Š $\\mathcal O(1)â€‹$ çš„å¤æ‚åº¦å‘ PAM åŸºäºçš„å­—ç¬¦ä¸²çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªå­—ç¬¦ã€‚\nè®°ä¸Šæ¬¡è¾¾åˆ°çš„çŠ¶æ€ä¸º $pâ€‹$ï¼Œå­—ç¬¦ä¸²ä¸º $sâ€‹$ï¼Œå½“å‰æ·»åŠ çš„å­—ç¬¦æ˜¯å­—ç¬¦ä¸²ä¸­ç¬¬ $posâ€‹$ ä½ï¼Œæˆ‘ä»¬åœ¨ $pâ€‹$ çš„ $failâ€‹$ é“¾ä¸Šæ‰¾åˆ°æœ€é•¿çš„ä¸€ä¸ªçŠ¶æ€æ»¡è¶³ $s[pos-len(u)-1]=s[pos]â€‹$ï¼Œé‚£ä¹ˆå½“å‰åˆ°è¾¾çš„çŠ¶æ€å°±æ˜¯ $\\delta(u,s[pos])â€‹$ï¼Œå¦‚æœè¿™ä¸ªè½¬ç§»ä¸å­˜åœ¨åˆ™æ–°å»ºèŠ‚ç‚¹å¹¶è¿ $failâ€‹$ï¼šåœ¨ $fail(p)â€‹$ çš„ $failâ€‹$ é“¾ä¸Šæ‰¾åˆ°æœ€é•¿çš„æ»¡è¶³ä¸Šè¿°æ¡ä»¶çš„çŠ¶æ€ï¼Œå…¶ $s[pos]â€‹$ è½¬ç§»å³ä¸ºæ–°å»ºèŠ‚ç‚¹çš„ $failâ€‹$ã€‚ç‰¹åˆ«åœ°ï¼Œå¦‚æœ $pâ€‹$ æ˜¯ç‰¹æ®ŠçŠ¶æ€ $-1â€‹$ï¼Œæ–°å»ºèŠ‚ç‚¹çš„ $failâ€‹$ è¦è®¾ä¸º $0â€‹$ã€‚\nå› ä¸º $pâ€‹$ å’Œ $fail(p)â€‹$ éƒ½æ˜¯åœ¨ $failâ€‹$ æ ‘ä¸Šçˆ¬ä¸Šçˆ¬ä¸‹ï¼Œå…¶ä¸­æ¯æ·»åŠ ä¸€ä¸ªå­—ç¬¦æœ€å¤šå‘ä¸‹çˆ¬ä¸€æ¬¡ï¼Œæ‰€ä»¥å¤æ‚åº¦æ˜¯å‡æ‘Š $\\mathcal O(1)â€‹$ çš„ã€‚\nå½“ç„¶å¦‚æœç”¨ map å­˜è¾¹å¤æ‚åº¦å°±ä¼šå¸¦ logã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N = 300010; struct PAM { int len, fail, ch[26]; } pam[N]; void extend(); char s[N]; int n, p = 2, tot = 2, pos; int main() { scanf(\u0026quot;%s\u0026quot;, s + 1); n = strlen(s + 1); pam[1].len = -1; pam[2].fail = 1; for (pos = 1; pos \u0026lt;= n; ++pos) extend(); return 0; } void extend() { int x = s[pos] - 'a'; while (s[pos - pam[p].len - 1] != s[pos]) p = pam[p].fail; if (pam[p].ch[x]) p = pam[p].ch[x]; else { int np = ++tot; pam[p].ch[x] = np; pam[np].len = pam[p].len + 2; if (p == 1) pam[np].fail = 2; else { for (p = pam[p].fail; s[pos - pam[p].len - 1] != s[pos]; p = pam[p].fail); pam[np].fail = pam[p].ch[x]; } p = np; } }   å…¶å®ƒæ„å»ºæ³• PAM è¿˜æœ‰æ”¯æŒå‰åç«¯æ’å…¥åˆ é™¤ã€å¤æ‚åº¦ä¸æ˜¯å‡æ‘Šçš„æ„å»ºæ–¹æ³•ï¼Œä½†æˆ‘å…ˆå’•ç€..æ„Ÿå…´è¶£çš„è¯å¯ä»¥çœ‹ 2017 å›½å®¶å€™é€‰é˜Ÿè®ºæ–‡ã€Šå›æ–‡æ ‘åŠå…¶åº”ç”¨ ç¿æ–‡æ¶›ã€‹ã€‚\nä¸€äº›ä¾‹é¢˜ [APIO2014]å›æ–‡ä¸²ï¼Œè£¸é¢˜ã€‚å’Œå…¶å®ƒè‡ªåŠ¨æœºä¸€æ ·é€šè¿‡ fail æ ‘å­æ ‘å’Œæ¥ç»Ÿè®¡å‡ºç°æ¬¡æ•°ã€‚\nCF835D Palindromic characteristicsï¼ˆæ³¨æ„åŸé¢˜æ•°æ®èŒƒå›´è¾ƒå°ï¼Œè¿™é¢˜å¯ä»¥çº¿æ€§åšï¼‰ï¼Œä» fail é“¾ä¸Š len / 2 å¤„è½¬ç§»å³å¯ï¼Œæˆ‘æ¯”è¾ƒèœåªä¼šå€å¢æ‰€ä»¥å¤šä¸ª logã€‚\n","date":"2019-05-10T22:31:05+08:00","permalink":"https://ouuan.github.io/post/%E5%9B%9E%E6%96%87%E8%87%AA%E5%8A%A8%E6%9C%BApam%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","tags":["å­—ç¬¦ä¸²","PAM"],"title":"å›æ–‡è‡ªåŠ¨æœºï¼ˆPAMï¼‰å­¦ä¹ ç¬”è®°"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\nCF\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ±‚æœ‰å¤šå°‘å¯¹ç›¸äº¤çš„å›æ–‡å­ä¸²ã€‚ï¼ˆåŒ…å«ç®—ä½œç›¸äº¤ï¼Œè‡ªäº¤ä¸ç®—ï¼‰\nå­—ç¬¦ä¸²é•¿åº¦å°äºç­‰äº $2\\times 10^6$ã€‚\nç®€è¦åšæ³• é¦–å…ˆ manacher æ±‚å‡ºæ¯ä¸ªä¸­å¿ƒçš„æœ€é•¿å›æ–‡ä¸²åŠå¾„ã€‚\nç„¶åï¼Œé€šè¿‡å·®åˆ†å¯ä»¥æ±‚å‡ºæ¯ä¸ªä½ç½®ä½œä¸ºå·¦ç«¯ç‚¹ / å³ç«¯ç‚¹å„æœ‰å¤šå°‘ä¸ªå›æ–‡ä¸²ï¼ˆçŸ¥é“æ¯ä¸ªä¸­å¿ƒçš„åŠå¾„ä¹‹åå°±ç›¸å½“äºåŒºé—´åŠ ï¼‰ï¼Œè®°ä¸º $l_i$, $r_i$ã€‚\næœ€åï¼Œæˆ‘ä»¬æŠŠé—®é¢˜è½¬åŒ–ä¸ºæ±‚ä¸ç›¸äº¤çš„å›æ–‡å­ä¸²å¯¹æ•°ï¼Œè¿™æ ·çš„è¯å°±æ˜¯ $\\sum\\limits_{i = 2}^n\\sum\\limits_{j=1}^{i-1}l_ir_j$ï¼Œé¢„å¤„ç†ä¸€ä¸‹ $râ€‹$ çš„å‰ç¼€å’Œå°±å¯ä»¥ç®—äº†ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef long long ll; const int N = 2000010; const int mod = 51123987; char s[N \u0026lt;\u0026lt; 1]; int n, p[N \u0026lt;\u0026lt; 1], mid, rt, l[N], r[N], pre[N], ans; int main() { int i; scanf(\u0026quot;%d%s\u0026quot;, \u0026amp;n, s + 1); s[0] = '$'; for (i = n * 2 + 1; i \u0026gt;= 1; --i) { if (i \u0026amp; 1) s[i] = '#'; else s[i] = s[i / 2]; } mid = rt = 1; for (i = 2; i \u0026lt;= n * 2 + 1; ++i) { p[i] = min(rt - i, p[mid * 2 - i]); while (s[i + p[i] + 1] == s[i - p[i] - 1]) ++p[i]; if (i + p[i] \u0026gt; rt) { mid = i; rt = i + p[i]; } ++l[(i - p[i] + 1) \u0026gt;\u0026gt; 1]; --l[(i \u0026gt;\u0026gt; 1) + 1]; ++r[(i + 1) \u0026gt;\u0026gt; 1]; --r[(i + p[i] + 1) \u0026gt;\u0026gt; 1]; ans = (ans + (p[i] + 1) / 2) % mod; } ans = (ll) ans * (ans - 1) % mod * (mod + 1) / 2 % mod; for (i = 1; i \u0026lt;= n; ++i) { l[i] += l[i - 1]; r[i] += r[i - 1]; pre[i] = (pre[i - 1] + r[i]) % mod; ans = (ans - (ll) l[i] * pre[i - 1] % mod + mod) % mod; } cout \u0026lt;\u0026lt; ans; return 0; } ","date":"2019-05-10T22:06:18+08:00","permalink":"https://ouuan.github.io/post/cf17e-palisectionmanacher/","tags":["å­—ç¬¦ä¸²","manacher"],"title":"CF17E Palisectionï¼ˆmanacherï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\nCF\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ†åˆ«æ±‚å‡ºæ¯ä¸ªé•¿åº¦çš„æ—¢æ˜¯å…¶å‰ç¼€åˆæ˜¯å…¶åç¼€çš„ä¸²å‡ºç°çš„æ¬¡æ•°ã€‚\nå­—ç¬¦ä¸²é•¿åº¦å°äºç­‰äº $10^5$ã€‚\nç®€è¦åšæ³• ç¬¬ä¸€çœ¼ï¼ŒSAM è£¸é¢˜ã€‚\nç„¶åæ„è¯†åˆ°åªç”¨ç®¡å‰ç¼€ï¼ŒKMP å¯ä»¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚\nåšæ³•å’Œ SAM å®Œå…¨ä¸€æ ·ï¼šä»æœ«å°¾è·³ next æ¥æ‰¾åˆ°æ‰€æœ‰å‰åç¼€ç›¸åŒçš„ä½ç½®ï¼ˆä¹Ÿå°±æ˜¯ SAM çš„æ¥å—çŠ¶æ€ï¼‰ï¼Œç„¶åå€’åºæšä¸¾ $f_{next[i]}+=f_i$ï¼ˆä¹Ÿå°±æ˜¯ SAM çš„ç»Ÿè®¡å­æ ‘å’Œï¼‰ã€‚\nå¤šè¯´ä¸¤å¥ï¼šfailã€parent å’Œ next å…¶å®æ˜¯ä¸€æ ·çš„ä¸œè¥¿ï¼Œä½† KMP / AC è‡ªåŠ¨æœºçš„çŠ¶æ€æ˜¯æ‰€æœ‰å‰ç¼€ï¼ŒSAM çš„çŠ¶æ€æ˜¯æ‰€æœ‰å­ä¸²ï¼ˆå¹¶è¢«å‹ç¼©ä¸ºäº† right é›†åˆç­‰ä»·ç±»ï¼‰ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;cstdio\u0026gt; using namespace std; const int N = 100010; char s[N]; int n, nxt[N], stk[N], top, f[N]; int main() { int i, k; scanf(\u0026quot;%s\u0026quot;, s + 1); n = strlen(s + 1); for (i = 2, k = 0; i \u0026lt;= n; ++i) { while (k \u0026amp;\u0026amp; s[i] != s[k + 1]) k = nxt[k]; if (s[i] == s[k + 1]) ++k; nxt[i] = k; } for (i = n; i \u0026gt;= 1; --i) { ++f[i]; f[nxt[i]] += f[i]; } for (i = n; i; i = nxt[i]) stk[++top] = i; printf(\u0026quot;%d\\n\u0026quot;, top); while (top) { printf(\u0026quot;%d %d\\n\u0026quot;, stk[top], f[stk[top]]); --top; } return 0; } ","date":"2019-05-10T21:56:54+08:00","permalink":"https://ouuan.github.io/post/cf432d-prefixes-and-suffixeskmp/","tags":["å­—ç¬¦ä¸²","KMP"],"title":"CF432D Prefixes and Suffixesï¼ˆKMPï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\nCF contest\nCF problemset\né¢˜æ„ç®€è¿° ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸² $S$ å’Œ $T$ï¼Œä½ éœ€è¦åœ¨ $S$ ä¸­å–è‹¥å¹²ä¸ªï¼ˆè‡³å°‘ä¸€ä¸ªï¼‰ä¸ç›¸äº¤çš„å­ä¸²ï¼Œä½¿å¾—æ¯ä¸ªå­ä¸²éƒ½åŒ…å« $T$ï¼Œæ±‚æ–¹æ¡ˆæ•°æ¨¡ $10^9+7$ã€‚\nå­—ç¬¦ä¸²é•¿åº¦å°äºç­‰äº $10^5$ã€‚\nç®€è¦åšæ³• é¦–å…ˆç”¨æŸç§å­—ç¬¦ä¸²ç®—æ³•æ±‚å‡º $T$ åœ¨ $S$ ä¸­åŒ¹é…çš„æ‰€æœ‰ä½ç½®ï¼ˆä¸€èˆ¬äººéƒ½ä¼šé€‰æ‹© KMPï¼‰ã€‚\nè®° $|S|=n$, $|T|=m$ã€‚\nç„¶åï¼Œæˆ‘ä»¬è®° $p_i$ è¡¨ç¤º $[i+m,n]$ ä¸­æœ€å°çš„åŒ¹é…ä½ç½®ï¼ˆä¹Ÿå°±æ˜¯ $S[i+1..n]$ è¿™ä¸ªå­ä¸²ç¬¬ä¸€ä¸ªåŒ¹é…çš„ä½ç½®ï¼‰ï¼Œè®° $q_i$ è¡¨ç¤º $[1,i]$ ä¸­æœ€å¤§çš„åŒ¹é…ä½ç½®ï¼ˆä¹Ÿå°±æ˜¯ $S[1..i]$ è¿™ä¸ªå­ä¸²æœ€åä¸€ä¸ªåŒ¹é…çš„ä½ç½®ï¼‰ã€‚\nç„¶åå¼€å§‹ dpï¼Œä»¤ $f_iâ€‹$ è¡¨ç¤ºå­ä¸² $S[i+1..n]â€‹$ çš„ç­”æ¡ˆã€‚è½¬ç§»æ—¶ï¼Œæˆ‘ä»¬è€ƒè™‘é€‰æ‹©ä¸‹ä¸€ä¸ªå­ä¸²çš„å³ç«¯ç‚¹å’Œå·¦ç«¯ç‚¹ã€‚å³ç«¯ç‚¹å¯ä»¥åœ¨ $[q_i,n]â€‹$ ä¸­é€‰å–ï¼Œè€Œå¯¹äºä¸€ä¸ªå³ç«¯ç‚¹ $jâ€‹$ï¼Œå¯ä»¥é€‰æ‹©çš„å·¦ç«¯ç‚¹æœ‰ $p_j-m-i+1â€‹$ ä¸ªã€‚å¦å¤–ï¼Œä¹Ÿå¯ä»¥ä¸ç»§ç»­é€‰æ‹©ä¸‹ä¸€ä¸ªå­ä¸²ã€‚æ‰€ä»¥å¯ä»¥å¾—åˆ°è½¬ç§»æ–¹ç¨‹ï¼š\n$$f_i=1+\\sum\\limits_{j=q_i}^nf_j(p_j-m-i+1)$$\nå¦‚æœæˆ‘ä»¬æŠŠ $g_i=\\sum\\limits_{j=i}^nf_jp_j$ å’Œ $h_i=\\sum\\limits_{j=i}^nf_j$ åˆ†åˆ«å­˜ä¸‹æ¥ï¼Œå°±å¯ä»¥å¾—åˆ° $f_i=1+g_{q_i}-(m+i-1)f_{q_i}$ï¼Œç„¶åå°±å¯ä»¥ $\\mathcal O(n)$ è®¡ç®—äº†ã€‚\næœ€åï¼Œè¿™æ ·è®¡ç®—çš„è¯ä¼šæŠŠä¸€ä¸ªå­ä¸²éƒ½ä¸é€‰è®¡å…¥æ€»æ•°ï¼Œæ‰€ä»¥ç­”æ¡ˆè¦å‡ä¸€ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cstring\u0026gt; using namespace std; typedef long long ll; const int N = 100010; const int mod = 1e9 + 7; char s[N], t[N]; int n, m, nxt[N], q[N], p[N], f[N], g[N]; int main() { int i, k; scanf(\u0026quot;%s%s\u0026quot;, s + 1, t + 1); n = strlen(s + 1); m = strlen(t + 1); for (i = 2, k = 0; i \u0026lt;= m; ++i) { while (k \u0026amp;\u0026amp; t[i] != t[k + 1]) k = nxt[k]; if (t[i] == t[k + 1]) ++k; nxt[i] = k; } for (i = 1, k = 0; i \u0026lt;= n; ++i) { while (k \u0026amp;\u0026amp; s[i] != t[k + 1]) k = nxt[k]; if (s[i] == t[k + 1]) ++k; if (k == m) q[i - m] = p[i] = i; } for (i = 1; i \u0026lt;= n; ++i) if (!p[i]) p[i] = p[i - 1]; for (i = n; i \u0026gt;= 0; --i) { if (!q[i]) q[i] = q[i + 1]; if (q[i]) f[i] = (1 + g[q[i]] - (ll) f[q[i]] * (m + i - 1) % mod + mod) % mod; else f[i] = 1; g[i] = ((ll) f[i] * p[i] + g[i + 1]) % mod; f[i] = (f[i] + f[i + 1]) % mod; } cout \u0026lt;\u0026lt; (f[0] - f[1] + mod - 1) % mod; return 0; } ","date":"2019-05-05T13:16:44+08:00","permalink":"https://ouuan.github.io/post/cf494b-obsessive-string-kmp-%E8%AE%A1%E6%95%B0dp/","tags":["å­—ç¬¦ä¸²","KMP","è®¡æ•°dp"],"title":"CF494B Obsessive String (KMP,è®¡æ•°dp)"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\ndarkbzoj\né¢˜æ„ç®€è¿° ç»™ä¸€ä¸ªé•¿ä¸º $m$ çš„å­—ç¬¦ä¸²ï¼Œå­—ç¬¦é›† $0$ ~ $9$ï¼Œæ±‚é•¿ä¸º $n$ çš„å­—ç¬¦ä¸²ä¸­ä¸å«ç»™å®šå­—ç¬¦ä¸²ä½œä¸ºå­ä¸²çš„å­—ç¬¦ä¸²æœ‰å¤šå°‘ä¸ªï¼Œå¯¹ $k$ å–æ¨¡ã€‚\n$n\\le10^9$ï¼Œ$m\\le20$ï¼Œ$k\\le1000$ã€‚\nç®€è¦åšæ³• é¦–å…ˆç”¨ KMP / AC è‡ªåŠ¨æœºæå‡ºè½¬ç§»ï¼š$f_{i,j}$ è¡¨ç¤ºä»çŠ¶æ€ $i$ ï¼ˆæˆ–è€…è¯´ä½ç½® $i$ï¼ŒKMP é‡Œå°±æ˜¯ä½ç½®ï¼ŒAC è‡ªåŠ¨æœºé‡Œè™½ç„¶æ˜¯èŠ‚ç‚¹ä½†ä¹Ÿå’Œä½ç½®å·®ä¸å¤šï¼‰èµ·ï¼Œåœ¨åé¢åŠ  $j$ ä¸ªå­—ç¬¦ï¼Œæ»¡è¶³è¦æ±‚çš„å­—ç¬¦ä¸²ä¸ªæ•°ï¼Œåˆ™ $f_{i,j} = \\sum\\limits_{x=0}^9f_{tr[i][x],j-1}$ï¼Œå…¶ä¸­ $tr[i][x]$ è¡¨ç¤ºçŠ¶æ€ $i$ çš„å­—ç¬¦ $x$ è½¬ç§»ã€‚AC è‡ªåŠ¨æœºä¸­ä¸ç”¨è§£é‡Šäº†ï¼ŒKMP é‡Œé¢å°±æ˜¯ $tr[i][x]=\\begin{cases}i+1\u0026amp;(s[i+1]=x)\\\\tr[next[i]][x]\u0026amp;(s[i+1]\\ne x)\\end{cases}$ã€‚\nå‘ç°æ¯å±‚ï¼ˆç›¸åŒçš„ $j$ï¼‰çš„è½¬ç§»éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œå®é™…ä¸Šå¯ä»¥ç”¨çŸ©é˜µè¡¨ç¤ºä¸¤å±‚é—´çš„è½¬ç§»ï¼š\n$$A\\times\\begin{bmatrix}f_{0,j}\\\\f_{1,j}\\\\\\vdots\\\\f_{m-1,j}\\end{bmatrix}=\\begin{bmatrix}f_{0,j+1}\\\\f_{1,j+1}\\\\\\vdots\\\\f_{m-1,j+1}\\end{bmatrix}$$\nï¼ˆåªåˆ° $m-1$ æ˜¯å› ä¸º $f_{m,j}=0$ï¼‰\nå…¶ä¸­ $Aâ€‹$ æ˜¯æˆ‘ä»¬è¦æ±‚çš„ä¸€ä¸ªçŸ©é˜µï¼Œ$A_{i,j}â€‹$ å°±æ˜¯ $\\sum\\limits_{x=0}^9[tr[i][x]=j]â€‹$ï¼Œæ±‚å‡ºæ¥ä¹‹åçŸ©é˜µå¿«é€Ÿå¹‚å°±å¥½äº†ã€‚\nå‚è€ƒä»£ç  KMP #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N = 21; int n, m, mod, nxt[N]; char s[N]; struct Matrix { int a[N][N]; Matrix() { memset(a, 0, sizeof(a)); } int* operator[](int x) { return a[x]; } Matrix operator*(Matrix \u0026amp; b) { Matrix out; int i, j, k; for (i = 0; i \u0026lt; m; ++i) { for (j = 0; j \u0026lt; m; ++j) { for (k = 0; k \u0026lt; m; ++k) { out[i][j] = (out[i][j] + a[i][k] * b[k][j]) % mod; } } } return out; } }; Matrix qpow(Matrix x, int y); int main() { int i, j, k, ans = 0; Matrix mul; scanf(\u0026quot;%d%d%d%s\u0026quot;, \u0026amp;n, \u0026amp;m, \u0026amp;mod, s + 1); for (i = 2, k = 0; i \u0026lt; m; ++i) { while (k \u0026amp;\u0026amp; s[i] != s[k + 1]) k = nxt[k]; if (s[i] == s[k + 1]) ++k; nxt[i] = k; } for (i = 0; i \u0026lt; m; ++i) { for (j = 0; j \u0026lt;= 9; ++j) { for (k = i; k \u0026amp;\u0026amp; s[k + 1] - '0' != j; k = nxt[k]); if (s[k + 1] - '0' == j) ++k; ++mul[i][k]; } } mul = qpow(mul, n); for (i = 0; i \u0026lt; m; ++i) ans = (ans + mul[0][i]) % mod; cout \u0026lt;\u0026lt; ans; return 0; } Matrix qpow(Matrix x, int y) { Matrix out; for (int i = 0; i \u0026lt; m; ++i) out[i][i] = 1; while (y) { if (y \u0026amp; 1) out = out * x; x = x * x; y \u0026gt;\u0026gt;= 1; } return out; }  AC è‡ªåŠ¨æœº å¦‚æœè§‰å¾—æˆ‘çš„ AC è‡ªåŠ¨æœºå†™æ³•æ¯”è¾ƒæ¸…å¥‡å¯ä»¥çœ‹çœ‹æˆ‘çš„ AC è‡ªåŠ¨æœºå­¦ä¹ ç¬”è®°..\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N = 21; int n, m, mod, tr[N][10], fail[N]; char s[N]; struct Matrix { int a[N][N]; Matrix() { memset(a, 0, sizeof(a)); } int* operator[](int x) { return a[x]; } Matrix operator*(Matrix \u0026amp; b) { Matrix out; int i, j, k; for (i = 0; i \u0026lt; m; ++i) { for (j = 0; j \u0026lt; m; ++j) { for (k = 0; k \u0026lt; m; ++k) { out[i][j] = (out[i][j] + a[i][k] * b[k][j]) % mod; } } } return out; } }; Matrix qpow(Matrix x, int y); int main() { int i, j, ans = 0; Matrix mul; scanf(\u0026quot;%d%d%d%s\u0026quot;, \u0026amp;n, \u0026amp;m, \u0026amp;mod, s + 2); for (i = 0; i \u0026lt;= 9; ++i) tr[0][i] = 1; for (i = 1; i \u0026lt;= m; ++i) { tr[i][s[i + 1] - '0'] = i + 1; for (j = 0; j \u0026lt;= 9; ++j) { if (s[i + 1] - '0' == j) fail[i + 1] = tr[fail[i]][j]; else tr[i][j] = tr[fail[i]][j]; ++mul[i - 1][tr[i][j] - 1]; } } mul = qpow(mul, n); for (i = 0; i \u0026lt; m; ++i) ans = (ans + mul[0][i]) % mod; cout \u0026lt;\u0026lt; ans; return 0; } Matrix qpow(Matrix x, int y) { Matrix out; for (int i = 0; i \u0026lt; m; ++i) out[i][i] = 1; while (y) { if (y \u0026amp; 1) out = out * x; x = x * x; y \u0026gt;\u0026gt;= 1; } return out; } ","date":"2019-05-03T19:07:11+08:00","permalink":"https://ouuan.github.io/post/bzoj1009-hnoi2008-gt%E8%80%83%E8%AF%95kmp-ac%E8%87%AA%E5%8A%A8%E6%9C%BA%E7%9F%A9%E9%98%B5%E4%B9%98%E6%B3%95/","tags":["å­—ç¬¦ä¸²","KMP","ACè‡ªåŠ¨æœº","çŸ©é˜µä¹˜æ³•"],"title":"BZOJ1009 [HNOI2008]GTè€ƒè¯•ï¼ˆKMP/ACè‡ªåŠ¨æœºï¼ŒçŸ©é˜µä¹˜æ³•ï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\ndarkbzoj\né¢˜æ„ç®€è¿° åˆå§‹ä¸€ä¸ªç©ºä¸²ï¼Œä¸‰ç§æ“ä½œï¼š\n æ·»åŠ ä¸€ä¸ªå­—ç¬¦ã€‚ åˆ é™¤ä¸€ä¸ªå­—ç¬¦ã€‚ æ‰“å°å½“å‰å­—ç¬¦ä¸²ã€  å¤šç»„è¯¢é—®ï¼Œæ¯æ¬¡é—®ç¬¬ $x$ ä¸ªæ‰“å°çš„å­—ç¬¦ä¸²åœ¨ç¬¬ $y$ ä¸ªæ‰“å°çš„å­—ç¬¦ä¸²ä¸­å‡ºç°äº†å‡ æ¬¡ã€‚\næ“ä½œæ•°å’Œè¯¢é—®æ•°éƒ½ä¸è¶…è¿‡ $10^5$ã€‚\nç®€è¦åšæ³• å…ˆå»ºä¸ª AC è‡ªåŠ¨æœºã€‚\nfail æ ‘ä¸Šçš„ç¥–å…ˆæ˜¯åç¼€ï¼ŒTrie ä¸Šæ ¹åˆ°ä¸€ä¸ªç‚¹çš„è·¯å¾„æ˜¯ä¸€ä¸ªå‰ç¼€ï¼Œåç¼€çš„å‰ç¼€æ˜¯å­ä¸²ï¼Œå› æ­¤åªè¦æŠŠ Trie ä¸Šè·¯å¾„æ ‡å‡ºæ¥ï¼Œåœ¨ fail æ ‘é‡Œç»Ÿè®¡å­æ ‘å°±å¥½äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ±‚å‡º $y$ çš„æ‰€æœ‰å‰ç¼€ä¸­ä»¥ $x$ ä¸ºåç¼€çš„æ•°é‡ã€‚\nå…·ä½“æ¥è¯´ï¼Œç”¨ fail æ ‘æ±‚ dfs åºï¼Œç„¶åå¯¹ Trie æ ‘è¿›è¡Œ dfsï¼Œè¿›å…¥ä¸€ä¸ªèŠ‚ç‚¹å°†å…¶ï¼ˆåœ¨æ ‘çŠ¶æ•°ç»„ä¸­ï¼‰åŠ ä¸€ï¼Œé€€å‡ºæ—¶å‡ä¸€ï¼ŒæŠŠè¯¢é—®æŒ‰ $y$ å­˜ä¸‹æ¥ï¼Œè®¿é—®åˆ°ä¸€ä¸ªç‚¹æ—¶å¯¹ä»¥å…¶ä½œä¸º $y$ çš„æ‰€æœ‰è¯¢é—®è®¡ç®— $xâ€‹$ åœ¨ fail æ ‘ä¸­çš„å­æ ‘å’Œå³ä¸ºç­”æ¡ˆã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;queue\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; int read() { int out = 0; char c; while (!isdigit(c = getchar())); for (; isdigit(c); c = getchar()) out = out * 10 + c - '0'; return out; } typedef pair\u0026lt;int, int\u0026gt; pii; const int N = 100010; void modify(int p, int x); void add(int u, int v); void dfs1(int u); void dfs2(int u); int qsum(int p); int head[N], nxt[N], to[N], cnt; int n, m, tr[N][26], trie[N][26], tot = 1, fail[N], fa[N], id[N], BIT[N], dfn[N], dfntot, exi[N], ans[N]; vector\u0026lt;pii\u0026gt; query[N]; queue\u0026lt;int\u0026gt; q; char s[N]; int main() { int i, u, x, y; scanf(\u0026quot;%s\u0026quot;, s); for (i = 0; i \u0026lt; 26; ++i) tr[0][i] = 1; for (i = 0, u = 1; s[i]; ++i) { if (s[i] == 'B') u = fa[u]; else if (s[i] == 'P') id[++n] = u; else { int c = s[i] - 'a'; if (!tr[u][c]) fa[tr[u][c] = ++tot] = u; u = tr[u][c]; } } memcpy(trie, tr, sizeof(tr)); q.push(1); while (!q.empty()) { u = q.front(); q.pop(); for (i = 0; i \u0026lt; 26; ++i) { if (tr[u][i]) { fail[tr[u][i]] = tr[fail[u]][i]; q.push(tr[u][i]); } else tr[u][i] = tr[fail[u]][i]; } } for (i = 2; i \u0026lt;= tot; ++i) add(fail[i], i); m = read(); for (i = 1; i \u0026lt;= m; ++i) { x = read(); y = read(); query[id[y]].push_back(pii(id[x], i)); } dfs1(1); dfs2(1); for (i = 1; i \u0026lt;= m; ++i) printf(\u0026quot;%d\\n\u0026quot;, ans[i]); return 0; } void dfs1(int u) { dfn[u] = ++dfntot; for (int i = head[u]; i; i = nxt[i]) dfs1(to[i]); exi[u] = dfntot; } void dfs2(int u) { int i, v; modify(dfn[u], 1); for (i = 0; i \u0026lt; query[u].size(); ++i) ans[query[u][i].second] = qsum(exi[query[u][i].first]) - qsum(dfn[query[u][i].first] - 1); for (i = 0; i \u0026lt; 26; ++i) { v = trie[u][i]; if (v) dfs2(v); } modify(dfn[u], -1); } void modify(int p, int x) { for (; p \u0026lt;= tot; p += (p \u0026amp; -p)) { BIT[p] += x; } } int qsum(int p) { int out = 0; for (; p; p -= (p \u0026amp; -p)) { out += BIT[p]; } return out; } void add(int u, int v) { nxt[++cnt] = head[u]; head[u] = cnt; to[cnt] = v; } ","date":"2019-04-29T21:36:58+08:00","permalink":"https://ouuan.github.io/post/bzoj2434-noi2011-%E9%98%BF%E7%8B%B8%E7%9A%84%E6%89%93%E5%AD%97%E6%9C%BAac%E8%87%AA%E5%8A%A8%E6%9C%BA%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84/","tags":["å­—ç¬¦ä¸²","ACè‡ªåŠ¨æœº","æ ‘çŠ¶æ•°ç»„"],"title":"BZOJ2434 [NOI2011]é˜¿ç‹¸çš„æ‰“å­—æœºï¼ˆACè‡ªåŠ¨æœºï¼Œæ ‘çŠ¶æ•°ç»„ï¼‰"},{"categories":["çŸ¥è¯†ç‚¹"],"contents":"AC è‡ªåŠ¨æœºå…¶å®æˆ‘å»å¹´å°±å­¦è¿‡äº†ï¼Œä½†å½“æ—¶å¤§çº¦åªæ˜¯ä¼šæ•²æ¨¡æ¿è€Œå·²..ç°åœ¨å‡ ä¹å…¨å¿˜å…‰äº†ã€‚äºæ˜¯å¤ä¹ ä¸€ä¸‹ï¼Œé¡ºä¾¿ï¼ˆè¾ƒä¸ºæœ¬è´¨åœ°ï¼‰è®²è§£ä¸€ä¸‹ã€‚\nAC è‡ªåŠ¨æœºæ˜¯ä»€ä¹ˆï¼Ÿ è¯´åˆ°è¿™æˆ‘çœŸçš„æƒ³å–·ä¸€ä¸‹ç½‘ä¸Šçš„å„ç§æ•™ç¨‹..è¿â€œæ˜¯ä»€ä¹ˆâ€éƒ½ä¸è¯´æ¸…æ¥šå°±å¼€å§‹è®²â€œæœ‰ä»€ä¹ˆç”¨â€å’Œâ€æ€ä¹ˆç”¨â€œï¼Œæ€èƒ½çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Ÿ\nå½¢å¼ä¸Šï¼ŒAC è‡ªåŠ¨æœºåŸºäºç”±è‹¥å¹²æ¨¡å¼ä¸²æ„æˆçš„ Trie æ ‘ï¼Œå¹¶åœ¨æ­¤ä¹‹ä¸Šå¢åŠ äº†ä¸€äº› fail è¾¹ï¼›æœ¬è´¨ä¸Šï¼ŒAC è‡ªåŠ¨æœºæ˜¯ä¸€ä¸ªå…³äºè‹¥å¹²æ¨¡å¼ä¸²çš„ DFAï¼ˆç¡®å®šæœ‰é™çŠ¶æ€è‡ªåŠ¨æœºï¼‰ï¼Œæ¥å—ä¸”ä»…æ¥å—ä»¥æŸä¸€ä¸ªæ¨¡å¼ä¸²ä½œä¸ºåç¼€çš„å­—ç¬¦ä¸²ã€‚\nå¹¶ä¸”ï¼Œä¸ä¸€èˆ¬è‡ªåŠ¨æœºä¸åŒçš„ï¼ŒAC è‡ªåŠ¨æœºè¿˜æœ‰ å…³äºæŸä¸ªæ¨¡å¼ä¸²çš„æ¥å—çŠ¶æ€ï¼ˆæˆ‘è‡ªå·±èµ·çš„åå­—..ï¼‰ï¼Œä¹Ÿå°±æ˜¯ä¸æŸä¸ªæ¨¡å¼ä¸²åŒ¹é…ï¼ˆä»¥æŸä¸ªæ¨¡å¼ä¸²ä¸ºåç¼€ï¼‰çš„é‚£äº›çŠ¶æ€ã€‚\nå…³äº DFAï¼Œæˆ‘åœ¨ SAM å­¦ä¹ ç¬”è®°é‡Œ å·²ç»è®²è¿‡äº†ã€‚\nå¼•ç”¨ä¸€ä¸‹ 2006 å¹´é›†è®­é˜Ÿè®ºæ–‡ã€Šç‹èµŸ\u0026ndash;Trieå›¾çš„æ„é€ æ´»ç”¨åŠæ”¹è¿›ã€‹ä¸­çš„ä¸€å¼ å›¾ï¼š\næœ‰äº† AC è‡ªåŠ¨æœºï¼Œæˆ‘ä»¬æŠŠä¸€ä¸ªæ–‡æœ¬ä¸²é€ä½åœ°è¾“å…¥åˆ°è‡ªåŠ¨æœºä¸­ï¼Œå½“åŒ¹é…æ—¶å°±ä¼šå¤„äºæ¥å—çŠ¶æ€ã€‚\nAC è‡ªåŠ¨æœºæ€æ ·æ„å»ºï¼Ÿ å¤§è‡´åˆ†ä¸ºä¸¤ä¸ªè¿‡ç¨‹ï¼š\n æ„å»ºæ¨¡å¼ä¸²ç»„æˆçš„ Trie æ ‘ã€‚ è¿ fail è¾¹ã€‚  ç¬¬ä¸€ä¸ªè¿‡ç¨‹ä¸ç”¨è®²å§ã€‚\nfail è¾¹æ˜¯ä»€ä¹ˆï¼Ÿ fail è¾¹æ˜¯ AC è‡ªåŠ¨æœºä¸Šä¸€ç§ç‰¹æ®Šçš„è¾¹ï¼Œå…¶æ„ä¹‰ä¸ºï¼šå½“ $uâ€‹$ åœ¨ Trie æ ‘ä¸Šæ²¡æœ‰å­—ç¬¦ $câ€‹$ çš„å‡ºè¾¹æ—¶ï¼Œå°† $\\delta(u,c)â€‹$ å®šä¹‰ä¸º $\\delta(fail(u),c)â€‹$ï¼ˆç‰¹ä¾‹ï¼šåˆå§‹çŠ¶æ€è‹¥ä¸å­˜åœ¨æŸå­—ç¬¦å‡ºè¾¹åˆ™è¿å‘è‡ªå·±ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸º $\\forall c\\in\\Sigma,\\delta(fail(start),c)=startâ€‹$ï¼‰ã€‚\nå¦å¤–ï¼Œfail è¾¹çš„ä½œç”¨ç±»ä¼¼äº KMP ç®—æ³•ä¸­çš„ next æ•°ç»„ã€‚\nfail è¾¹æ€ä¹ˆè¿ï¼Ÿ æˆ‘ä»¬å‘ç°ä¸€ä¸ªçŠ¶æ€çš„ fail è¾¹è¿å‘çš„å…¶å®å°±æ˜¯è¿™ä¸ªçŠ¶æ€çš„ä¸€ä¸ªè‡ªåŠ¨æœºä¸Šæœ€é•¿çœŸåç¼€ã€‚\nä¸ºä»€ä¹ˆå‘¢..æ„Ÿæ€§ç†è§£ä¸€ä¸‹ï¼Œå¤±é…äº†å°±ä¸çœ‹å‰å‡ ä½äº†..\nç„¶åå°±å¾ˆå¥½è¿äº†ï¼šå¯¹ Trie æ ‘è¿›è¡Œ BFSï¼Œå°† $fail(\\delta(u,c))$ è®¾ä¸º $\\delta(fail(u),c)$ã€‚å› ä¸ºä¸€ä¸ªä¸²åŠ ä¸Šä¸€ä¸ªå­—ç¬¦çš„æœ€é•¿çœŸåç¼€å°±æ˜¯è¿™ä¸ªä¸²çš„æœ€é•¿çœŸåç¼€åŠ ä¸Šè¿™ä¸ªå­—ç¬¦..\nå¦å¤–ï¼Œå°† $\\delta(u,c)$ è®¾ä¸º $\\delta(fail(u),c)$ å¯ä»¥æ˜¾å¼åœ°åœ¨ä»£ç ä¸­å®Œæˆã€‚\nå†å¦å¤–ï¼Œè¦ä¹ˆ BFS å¼€å§‹çš„æ—¶å€™å°†æ ¹èŠ‚ç‚¹çš„å­©å­å…¥é˜Ÿï¼Œè¦ä¹ˆå°† $fail(root)$ çš„æ¯ä¸ªå„¿å­éƒ½è®¾ä¸º $rootâ€‹$ã€‚å¦åˆ™æ ¹çš„å„¿å­çš„ fail è¾¹ä¼šè¿å‘è‡ªå·±ã€‚ï¼ˆä¹Ÿå°±æ˜¯ä¸Šæ–‡æ‰€è¿°çš„â€œç‰¹ä¾‹â€ã€‚ï¼‰\nfor (i = 0; i \u0026lt; 26; ++i) tr[0][i] = 1; q.push(1); while (!q.empty()) { u = q.front(); q.pop(); for (i = 0; i \u0026lt; 26; ++i) { if (tr[u][i]) { fail[tr[u][i]] = tr[fail[u]][i]; q.push(tr[u][i]); } else tr[u][i] = tr[fail[u]][i]; } }  fail æ ‘ ç”±äºæ¯ä¸ªç‚¹éƒ½åªè¿å‡ºä¸€æ¡ fail è¾¹ï¼Œä¸”è¿åˆ°çš„ç‚¹å¯¹åº”çš„å­—ç¬¦ä¸²é•¿åº¦æ›´å°ï¼Œæ‰€ä»¥ fail è¾¹æ„æˆäº†ä¸€æ£µ fail æ ‘ã€‚\nå¦‚æœå­¦è¿‡ SAM çš„è¯ï¼Œå¯èƒ½ä¼šå‘ç° fail æ ‘å’Œ parent æ ‘å¾ˆåƒ..å®é™…ä¸Šå®ƒä»¬å…·æœ‰çš„æ€§è´¨æ˜¯ç›¸åŒçš„ï¼Œç„¶è€Œæ„æˆå®ƒä»¬çš„çŠ¶æ€ä¸åŒâ€”â€”parent æ ‘æ˜¯æ‰€æœ‰ right é›†åˆç­‰ä»·ç±»ï¼ˆä¹Ÿå°±æ˜¯ SAM ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹ï¼‰ï¼Œè€Œ fail æ ‘æ˜¯ Trie ä¸Šçš„æ¯ä¸ªå‰ç¼€ï¼ˆä¹Ÿå°±æ˜¯ AC è‡ªåŠ¨æœºä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹ï¼‰ã€‚\nä½œä¸ºä¸€ä¸ªè‡ªåŠ¨æœºï¼Œæˆ‘è¿˜æ²¡è®² AC è‡ªåŠ¨æœºçš„æ¥å—çŠ¶æ€æ˜¯å“ªäº›..å…¶å®å°±æ˜¯ Trie æ ‘ä¸Šçš„é‚£äº›ç»ˆæ­¢èŠ‚ç‚¹åœ¨ fail æ ‘ä¸Šçš„æ•´ä¸ªå­æ ‘çš„å¹¶ã€‚\nè€Œ å…³äºæŸä¸ªæ¨¡å¼ä¸²çš„æ¥å—çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯ä¸æŸä¸ªæ¨¡å¼ä¸²åŒ¹é…ï¼ˆä»¥æŸä¸ªæ¨¡å¼ä¸²ä¸ºåç¼€ï¼‰çš„é‚£äº›çŠ¶æ€ï¼Œå°±æ˜¯é‚£ä¸ªä¸²åœ¨ Trie æ ‘ä¸Šçš„ç»ˆæ­¢èŠ‚ç‚¹åœ¨ fail æ ‘ä¸Šçš„å­æ ‘ã€‚çŸ¥é“è¿™ä¸ªä¹Ÿå°±çŸ¥é“æ€ä¹ˆç”¨ AC è‡ªåŠ¨æœºè¿›è¡Œå¤šæ¨¡å¼ä¸²åŒ¹é…äº†ï¼ˆå»ºå‡º fail æ ‘ï¼Œè®°å½•è‡ªåŠ¨æœºä¸Šçš„æ¯ä¸ªçŠ¶æ€è¢«åŒ¹é…äº†å‡ æ¬¡ï¼Œæœ€åæ±‚å‡ºæ¯ä¸ªæ¨¡å¼ä¸²åœ¨ Trie ä¸Šçš„ç»ˆæ­¢èŠ‚ç‚¹åœ¨ fail æ ‘ä¸Šçš„å­æ ‘æ€»åŒ¹é…æ¬¡æ•°å°±å¯ä»¥äº†ï¼‰ã€‚\næ´›è°· P3796 å‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;queue\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef pair\u0026lt;int, int\u0026gt; pii; const int N = 160; const int L = 80; const int M = 1000010; void add(int u, int v); void dfs(int u); int head[N * L], nxt[N * L], to[N * L], cnt; int n, tr[N * L][26], fail[N * L], tot, suc[N * L], siz[N * L]; char s[N][L], t[M]; queue\u0026lt;int\u0026gt; q; pii ans[N]; int main() { int i, j, u; scanf(\u0026quot;%d\u0026quot;, \u0026amp;n); while (n) { memset(tr, 0, sizeof(tr)); memset(suc, 0, sizeof(suc)); memset(siz, 0, sizeof(siz)); memset(head, 0, sizeof(head)); tot = 1; cnt = 0; for (i = 0; i \u0026lt; 26; ++i) tr[0][i] = 1; scanf(\u0026quot;%d\u0026quot;, \u0026amp;n); for (i = 1; i \u0026lt;= n; ++i) { scanf(\u0026quot;%s\u0026quot;, s[i]); ans[i].first = 0; ans[i].second = i; for (j = 0, u = 1; s[i][j]; ++j) { int c = s[i][j] - 'a'; if (!tr[u][c]) tr[u][c] = ++tot; u = tr[u][c]; } suc[u] = i; } q.push(1); while (!q.empty()) { u = q.front(); q.pop(); for (i = 0; i \u0026lt; 26; ++i) { if (tr[u][i]) { fail[tr[u][i]] = tr[fail[u]][i]; q.push(tr[u][i]); } else tr[u][i] = tr[fail[u]][i]; } } scanf(\u0026quot;%s\u0026quot;, t); for (i = 0, u = 1; t[i]; ++i) { u = tr[u][t[i] - 'a']; ++siz[u]; } for (i = 2; i \u0026lt;= tot; ++i) add(fail[i], i); dfs(1); sort(ans + 1, ans + n + 1); printf(\u0026quot;%d\\n\u0026quot;, -ans[1].first); for (i = 1; i \u0026lt;= n \u0026amp;\u0026amp; ans[i].first == ans[1].first; ++i) printf(\u0026quot;%s\\n\u0026quot;, s[ans[i].second]); scanf(\u0026quot;%d\u0026quot;, \u0026amp;n); } return 0; } void dfs(int u) { int i, v; for (i = head[u]; i; i = nxt[i]) { v = to[i]; dfs(v); siz[u] += siz[v]; } ans[suc[u]].first -= siz[u]; } void add(int u, int v) { nxt[++cnt] = head[u]; head[u] = cnt; to[cnt] = v; }   ä¸€äº›ä¾‹é¢˜ [TJOI2013]å•è¯ï¼ŒåŸºæœ¬ä¸Šæ˜¯é“è£¸é¢˜ã€‚\n[POI2000]ç—…æ¯’ï¼Œä¸è®¿é—®æ¥å—çŠ¶æ€æ‰¾ç¯å³å¯ã€‚\n[NOI2011]é˜¿ç‹¸çš„æ‰“å­—æœºï¼Œå¯¹ Trie è¿›è¡Œ dfs å¹¶æ‰“æ ¹åˆ°å½“å‰ç‚¹çš„æ ‡è®°ï¼Œåœ¨ fail æ ‘ä¸Šç»Ÿè®¡å­æ ‘æ ‡è®°å’Œã€‚æˆ‘çš„é¢˜è§£\nä¸ KMP ä¹‹é—´çš„å…³ç³» æ”¾åœ¨æœ€åé¢æ˜¯å› ä¸ºæˆ‘è®¤ä¸º KMP å¹¶ä¸æ˜¯ AC è‡ªåŠ¨æœºçš„å‰ç½®çŸ¥è¯†..ç„¶è€Œä»–ä»¬ä¹‹é—´çš„ç¡®æœ‰ç€åƒä¸ä¸‡ç¼•çš„è”ç³»ã€‚\nã€ŒKMP æ˜¯ä¸ªè‡ªåŠ¨æœºã€\nè¦æ˜¯æ—©æœ‰äººå‘Šè¯‰æˆ‘è¿™å¥è¯ä¼°è®¡æˆ‘æ—©å°±ï¼ˆçœŸæ­£åœ°ï¼‰å­¦ä¼š KMP äº†..\nKMP è‡ªåŠ¨æœºçš„ä¸»ä½“æ˜¯ä¸€æ¡é“¾ï¼ŒåŠ ä¸Šäº†ä¸€äº›â€œnext è¾¹â€ï¼ˆå…¶å®å°±æ˜¯ AC è‡ªåŠ¨æœºçš„ fail è¾¹ï¼‰ã€‚\nè€Œ KMP è‡ªåŠ¨æœºä¹‹äº AC è‡ªåŠ¨æœºï¼Œå°±åƒ SAM ä¹‹äºå¹¿ä¹‰ SAMã€‚\nä¹Ÿå°±æ˜¯å¾ˆå¤šäººå¸¸è¯´çš„ä¸€å¥è¯ï¼šAC è‡ªåŠ¨æœºå°±æ˜¯ Trie ä¸Š KMPã€‚\né€’å½’åœ°è®¡ç®—è½¬ç§»å‡½æ•° ç®€ä»‹ â€œå°† $\\delta(u,c)â€‹$ è®¾ä¸º $\\delta(fail(u),c)â€‹$â€è¿™ä¸€æ­¥æ˜¯å¯ä»¥ä¸å»æ˜¾å¼å®Œæˆçš„ï¼Œå¹¶ä¸”ï¼Œåœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ˆäº‹å®ä¸Šæˆ‘å¹¶ä¸çŸ¥é“ä»»ä½•åä¾‹ï¼‰è¿™æ ·åšå¤æ‚åº¦æ˜¯çº¿æ€§çš„ï¼Œå¯ä»¥å°†å¤æ‚åº¦ä¸­çš„å­—ç¬¦é›†å¤§å°å»æ‰ï¼Œå¹¶èŠ‚çœç©ºé—´ã€‚\nåšæ³•éå¸¸ç®€å•ï¼šå½“ä½ éœ€è¦ $\\delta(u,c)$ è€Œå…¶æ²¡æœ‰å®šä¹‰æ—¶ï¼Œé€’å½’åœ°å»è®¡ç®— $\\delta(fail(u),c)$ã€‚\næ„å»º fail çš„è¿‡ç¨‹å¤æ‚åº¦ä¸ºçº¿æ€§ ä¸€ä¸ªèŠ‚ç‚¹åˆ°æ ¹çš„è·¯å¾„ä¸Šè¿™äº›ç‚¹æ€»å…±è·³ fail çš„æ¬¡æ•°ä¸ä¼šè¶…è¿‡å…¶æ·±åº¦ã€‚\næ‰€ä»¥æ€»å…±è·³ fail æ¬¡æ•°ä¸ä¼šè¶…è¿‡ Trie æ ‘æ‰€æœ‰å¶å­çš„æ·±åº¦å’Œã€‚\nè¯å®Œäº†ã€‚\nå°†å­—ç¬¦ä¸²è¾“å…¥è¿›è‡ªåŠ¨æœºå¤æ‚åº¦ä¸ºçº¿æ€§ æ¯è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²æœ€å¤šæ·±åº¦åŠ ä¸€ã€‚\næ¯æ¬¡è·³ fail æ·±åº¦å‡ä¸€ã€‚\nè¯å®Œäº†ã€‚\n","date":"2019-04-29T15:39:10+08:00","permalink":"https://ouuan.github.io/post/ac%E8%87%AA%E5%8A%A8%E6%9C%BA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","tags":["å­—ç¬¦ä¸²","ACè‡ªåŠ¨æœº"],"title":"ACè‡ªåŠ¨æœºå­¦ä¹ ç¬”è®°"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€ä¸ª DAGï¼Œæ¯ä¸ªç‚¹æœ‰ä¸ªå€¼ $k_i$ã€‚\nç¬¬ä¸€é—®ï¼šæ±‚ä¸€ä¸ªæ‹“æ‰‘æ’åºï¼Œä½¿æ¯ä¸ªç‚¹å‡ºç°çš„ä½ç½®ä¸è¶…è¿‡ $k_i$ã€‚\nç¬¬äºŒé—®ï¼šåœ¨æ»¡è¶³ç¬¬ä¸€é—®çš„æ‹“æ‰‘æ’åºä¸­ï¼Œæ±‚æ¯ä¸ªç‚¹åˆ†åˆ«çš„æœ€æ—©å‡ºç°ä½ç½®ã€‚\nç®€è¦åšæ³• ç¬¬ä¸€çœ¼çœ‹åˆ°è¿™é¢˜ï¼Œåœ¨å¤šå°‘ä¹‹å‰ $\\rightarrow$ åè¿‡æ¥è€ƒè™‘ï¼Œå› ä¸ºä¹‹å‰å¥½åƒåšè¿‡ PJ éš¾åº¦çš„ç±»ä¼¼é¢˜ç›®..\nç„¶è€Œç¬¬äºŒçœ¼å°±å˜æˆäº†ï¼šæ‹“æ‰‘æ’åºè£¸é¢˜ï¼ç„¶åæ„‰å¿«åœ°å†™äº†ä¸ªå‡è´ªå¿ƒ..\nä¸èƒ½éšä¾¿æ”¾è¿‡è‡ªå·±çš„ç›´è§‰å•Š..\næ­£è§£å°±æ˜¯å»ºåå›¾ï¼Œè¿™æ ·ä¸€å®šå¯ä»¥æ¯æ¬¡é€‰ $k$ æœ€å¤§çš„ï¼Œç”¨ä¼˜å…ˆé˜Ÿåˆ—æ‹“æ‰‘æ’åºå°±å¯ä»¥äº†ã€‚\nç¬¬äºŒé—®çš„è¯ï¼Œè¿˜æ˜¯å»ºåå›¾ï¼Œä¾æ¬¡è€ƒè™‘æ¯ä¸ªç‚¹ï¼Œä¸æŠŠå½“å‰è€ƒè™‘çš„ç‚¹åŠ å…¥ä¼˜å…ˆé˜Ÿåˆ—ä¸­ï¼Œç›´åˆ°æ— æ³•ç¬¦åˆè¦æ±‚ä¾¿æ˜¯ç­”æ¡ˆã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;queue\u0026gt; #include \u0026lt;cstring\u0026gt; using namespace std; typedef pair\u0026lt;int, int\u0026gt; pii; const int N = 2010; const int M = 10010; void add(int u, int v); int head[N], nxt[M], to[M], cnt; int n, m, k[N], ind[N], in[N], stk[N], top; priority_queue\u0026lt;pii\u0026gt; q; int main() { int i, u, v, x, ans; scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;n, \u0026amp;m); for (i = 1; i \u0026lt;= n; ++i) scanf(\u0026quot;%d\u0026quot;, k + i); for (i = 1; i \u0026lt;= m; ++i) { scanf(\u0026quot;%d%d\u0026quot;, \u0026amp;u, \u0026amp;v); add(v, u); ++ind[u]; } memcpy(in, ind, sizeof(in)); for (i = 1; i \u0026lt;= n; ++i) if (!in[i]) q.push(pii(k[i], i)); while (!q.empty()) { u = stk[++top] = q.top().second; q.pop(); for (i = head[u]; i; i = nxt[i]) { v = to[i]; if (--in[v] == 0) q.push(pii(k[v], v)); } } while (top) printf(\u0026quot;%d \u0026quot;,stk[top--]); puts(\u0026quot;\u0026quot;); for (x = 1; x \u0026lt;= n; ++x) { ans = n; memcpy(in, ind, sizeof(in)); for (i = 1; i \u0026lt;= n; ++i) if (!in[i]) q.push(pii(k[i], i)); while (!q.empty()) { u = q.top().second; q.pop(); if (u == x) continue; if (k[u] \u0026lt; ans) { while (!q.empty()) q.pop(); break; } --ans; for (i = head[u]; i; i = nxt[i]) { v = to[i]; if (--in[v] == 0) q.push(pii(k[v], v)); } } printf(\u0026quot;%d \u0026quot;, ans); } return 0; } void add(int u, int v) { nxt[++cnt] = head[u]; head[u] = cnt; to[cnt] = v; } ","date":"2019-04-19T13:00:29+08:00","permalink":"https://ouuan.github.io/post/noi2010-%E8%88%AA%E7%A9%BA%E7%AE%A1%E5%88%B6%E5%BB%BA%E5%8F%8D%E5%9B%BE%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/","tags":["å›¾è®º","ä¼˜å…ˆé˜Ÿåˆ—","æ‹“æ‰‘æ’åº"],"title":"[NOI2010]èˆªç©ºç®¡åˆ¶ï¼ˆå»ºåå›¾ï¼Œæ‹“æ‰‘æ’åºï¼Œä¼˜å…ˆé˜Ÿåˆ—ï¼‰"},{"categories":["æ¸¸è®°"],"contents":"å£ä¸­å–Šç€ã€Œåƒ•å‹ã¤ã‹ã‚‰ã€‚ãœã£ãŸã„ã€å‹ã¦æ¥ã‚‹ã‹ã‚‰ã€‚ã€çš„ä½ ï¼ŒçœŸçš„ä»˜å‡ºäº†æ¡å±±èˆ¬çš„åŠªåŠ›å—ï¼Ÿ\nDay -1 æ™šä¸Šçœ‹ WF ç›´æ’­ï¼Œä¸ºäº†çœ‹æ»šæ¦œç¡å¾—å¾ˆæ™šï¼Œç»“æœæœ€åæ»šçš„æ—¶å€™ b ç«™é‚£å‡ ä¸ªç›´æ’­çš„å»æµ·åº•æåƒç«é”…ï¼Œç„¶åæ–­æ–­ç»­ç»­çš„\u0026hellip;.æœ€åä¹Ÿæ²¡æœ‰çœ‹å®Œæ»šæ¦œï¼Œè¿˜æ˜¯ç¬¬äºŒå¤©æ‰çœ‹çš„æ’å\u0026hellip;\nDay 0 ç”±äºå‰ä¸€å¤©ç¡å¾—æ¯”è¾ƒæ™šï¼Œæ‰€ä»¥ä¸‹åˆç¡äº†ä¸¤ä¸ªå°æ—¶ã€‚æ™šä¸Š vp äº†ä¸€åœº cfã€‚\nç„¶å..æœ¬æ¥æƒ³æ—©ç‚¹ç¡ï¼Œç»“æœç”±äºä¸‹åˆç¡äº†ä¸¤ä¸ªå°æ—¶ï¼Œç¡ä¸ç€äº†..æœ€åå¾ˆæ™šæ‰ç¡ã€‚åœ¨åºŠä¸Šçœ‹äº†å››é›†åŠã€Šä¸‰æœˆçš„ç‹®å­ã€‹..ï¼ˆåŠæ˜¯å› ä¸ºçœ‹å›°äº†ï¼Œäºæ˜¯èµ¶ç´§æŠ“ä½æœºä¼šç¡äº†ã€‚ï¼‰\nDay 1 æ—©ä¸Šèµ·æ¥çš„æ—¶å€™æ„Ÿè§‰ç‰¹åˆ«æ¸…é†’ï¼Œåæ¥æ‰æƒ³èµ·æ¥ï¼Œåˆä¸‰æœ‰æ®µæ—¶é—´ä¹Ÿä¸æ€ä¹ˆç¡ï¼Œä¹Ÿæ˜¯åˆšèµ·æ¥çš„æ—¶å€™å¹¶ä¸ä¼šå¾ˆå›°..èµ°èµ·è·¯æ¥æœ‰ç§ ãµã‚ãµã‚ çš„æ„Ÿè§‰..ä¸€ç›´æŒç»­åˆ°å¿«åˆ°åç§‘çš„æ—¶å€™ï¼Œæ‰ç¨å¾®è§‰å¾—æœ‰ç‚¹å›°..\næ‹¿åˆ°é¢˜ä¹‹åçœ‹äº†çœ¼ T1ï¼Œå¼‚æˆ– $\\rightarrow$ å¯æŒä¹…åŒ– 01 Trieï¼Œæ±‚å‰ $k$ å¤§ä¹‹å’Œ $\\rightarrow$ åˆ†æˆ $n$ ç±»æ¯ç±»çš„æœ€å¤§å€¼å¡å †é‡Œã€‚å¤§è‡´çš„æ€è·¯çœŸçš„æ˜¯ä¸€çœ¼å°±æƒ³å‡ºæ¥äº†..ç„¶è€Œå¹¶æ²¡æœ‰æƒ³åˆ°ä¸‰å…ƒç»„çš„åšæ³•ï¼Œè™½ç„¶ 18 å¹´æš‘å‡å»å®‰å¸ˆå¤§é™„ä¸­é›†è®­çš„æ—¶å€™åšè¿‡ä¸€é“é‚£æ ·çš„é¢˜..\næˆ‘æƒ³çš„åšæ³•æ˜¯è®°å½•åœ¨ Trie ä¸Š dfs åˆ°çš„ä½ç½®ï¼Œç„¶åæ ¹æ®ä½ç½®æ±‚ä¸‹ä¸€ä¸ªã€‚ä¸€å¼€å§‹æˆ‘å†™çš„æ˜¯æ¯ä¸ªç‚¹è®°å½•çˆ¶äº²ï¼Œç„¶åå†™+è°ƒ $2h$ æ‰æƒ³èµ·æ¥ï¼šè¿™æ˜¯å¯æŒä¹…åŒ–å•Šï¼Œæ€ä¹ˆè®°å½•çˆ¶äº²\u0026hellip;ç„¶åå°è¯•åŠ äº†ä¸ª map æ¥è®°å½•ä¸åŒç‰ˆæœ¬çš„çˆ¶äº²ï¼Œå˜æˆ $\\log^2$ï¼Œç„¶åå¤§æ ·ä¾‹è·‘äº† $13s$ï¼Œè¿˜ WA\u0026hellip;\näºæ˜¯å°±å…ˆæŠŠ T1 æ”¾äº†ä¸€ä¸‹ï¼Œå»çœ‹ T2ã€‚è¿™ T2 ä»€ä¹ˆé¬¼é¢˜é¢ï¼Ÿï¼ˆèµ›åç»“åˆè®²é¢˜ PPT é‡Œçš„ç®€è¿°ä¸€ä¸‹å°±æ˜ç™½é¢˜æ„äº†ï¼Œå¯èƒ½æ˜¯ç®€è¿°çš„åŸå› ï¼Œä¹Ÿå¯èƒ½æ˜¯æ²¡ç¡å¥½è€ƒåœºä¸Š sb äº†..åªä¸è¿‡ä¸€ä¸ªæ²¡æœ‰é¢˜ç›®èƒŒæ™¯çš„é¢˜ä¸ºä»€ä¹ˆä¸å†™ç®€è¿°é¢˜æ„å‘¢..ï¼‰çœ‹äº†åŠå¤©ç¨å¾®çœ‹æ‡‚é¢˜æ„äº†ï¼Œç„¶åä¸€çœ‹ç¬¬ä¸€æ¡£æš´åŠ›ï¼Œå¥½åƒç¬¬ä¸€æ¡£å°±å¾—å†™ä¸ª $20min$ ~ $0.5h$ çš„..æˆ‘çš„ä¹ æƒ¯æ˜¯å…ˆå†™ PJ éš¾åº¦æš´åŠ›ï¼Œç„¶åå†™æ­£è§£ï¼Œæœ€åå†™ä¸å¥½å†™çš„éƒ¨åˆ†åˆ†ï¼Œæ‰€ä»¥å°±å…ˆæ”¾ç€äº†ã€‚\nç„¶åå»çœ‹ T3..æ²¡æƒ³åˆ°ç«Ÿç„¶èƒ½åœ¨è€ƒåœºä¸Šç¢°åˆ° ydc çš„é¢˜é¢..å…ˆæŠŠ 998244353 åˆ‡äº†ï¼Œç„¶åå†™äº†ä¸ªä»æœ€å¤§å€¼èµ·æšä¸¾æ¨¡æ•°ï¼Œç„¶å..1145141ï¼Ÿå” çª æ¶ è‡­ï¼Œ//echouctr è­¦å‘Šã€‚èµ›åå¾—çŸ¥æœ‰äººç›´æ¥ï¼ˆæŠ±ç€æ¶è‡­çš„æƒ³æ³•ï¼‰è¯•å‡ºæ¥äº†..è¿˜æœ‰åªæšä¸¾è´¨æ•°çš„..æƒ³ä¸æ˜ç™½ä¸ºä»€ä¹ˆè¦ç»™ä¸ªè´¨æ•°..æçš„æˆ‘è¿˜å†™äº†æ‰©å±•æ¬§æ‹‰å®šç†å’Œæ±‚ $\\varphi$ï¼ˆè™½ç„¶ä¹Ÿæ²¡æœ‰å¤ªéº»çƒ¦..ï¼‰ã€‚1_?+ ç›´æ¥å¼ƒäº†ã€‚wa å°è¯•æŠŠå¿«é€Ÿå¹‚é‡Œçš„ long long å»æ‰ï¼Œç„¶åæ²¡è¿‡ï¼Œå°±ä¹Ÿå¼ƒäº†ã€‚åé¢çš„..çŒœåˆ°äº† p æ˜¯è´¨æ•°ï¼Œæ ¹æ® 0/+/- çŒœåˆ°äº† u æ˜¯ $\\mu$ï¼ŒçŒœåˆ°äº† g æ˜¯åŸæ ¹..nmdwsmæ˜¯åŒºé—´ç­›å•Š..\nå›æ¥çœ‹ T1ï¼Œé‡æ„çš„å†³å®šè¿˜ç®—æ¯”è¾ƒæœæ–­ï¼Œæ¢äº†ç§æ‰¾åç»§çš„æ–¹å¼ï¼šè®°å½• dfs è·¯å¾„ä»¥åŠæ¯ä¸ªç‚¹è¢«æœåˆ°çš„æ¬¡æ•°ï¼Œæ»¡äº†å°±æ¢ä¸ªå„¿å­ï¼Œå¦åˆ™æŒ‰åŸè·¯å¾„å¾€ä¸‹ã€‚å†™çš„è¿˜ç®—æ¯”è¾ƒé¡ºåˆ©ï¼Œä¸åˆ° $1h$ å°±è¿‡äº†å¤§æ ·ä¾‹ï¼Œç„¶åå¼€å§‹å¯¹æ‹ï¼Œä¹Ÿè¿‡æ‹äº†ã€‚ç„¶åï¼ŒæŠŠ rand() çš„èŒƒå›´å¼€åˆ° unsigned..ä¸è¿‡æ‹äº†ï¼Ÿï¼Ÿæ£€æŸ¥äº†ä¸€ä¸‹ï¼Œæ‰€æœ‰è¯¥å¼€ unsigned çš„åœ°æ–¹éƒ½å¼€äº†ï¼Œäºæ˜¯æŠŠæ‰€æœ‰å‚ä¸ä½è¿ç®—çš„ 1 éƒ½æ”¹æˆäº† 1uï¼Œè¿˜æ˜¯è¿‡ä¸äº†..ç„¶åæˆ‘å°±å¼€å§‹ sb äº†ï¼šå…ˆæŠŠ unsigned int æ”¹æˆ unsigned long longï¼Œå‘ç°è¿‡ä¸äº†ï¼Œç„¶åæ”¹å› unsigned intï¼Œå†æŠŠå¾ªç¯çš„èŒƒå›´ä» 31 æ”¹æˆ 32.. ç„¶åæˆ‘å°±å„ç§æ£€æŸ¥ï¼Œç›´åˆ°è€ƒè¯•ç»“æŸä¹Ÿæ²¡è¿‡æ‹..è€ƒåå‘ç°ï¼Œæ˜¯ä¸€ç§è¾¹ç•Œæƒ…å†µçš„ä¸€è¡Œä»£ç æ”¾é”™ä½ç½®äº†ï¼Œé™¤äº†åŒæ—¶å¼€ unsigned long long å’Œå¾ªç¯èŒƒå›´ 32ï¼Œä¹Ÿå¯ä»¥æŠŠé‚£è¡Œä»£ç æ¢ä¸ªä½ç½®æ¥è§£å†³ã€‚\nä¸‹åˆå¾—çŸ¥æ­£å¼é€‰æ‰‹å¥½åƒå¿…é¡»å‚åŠ è®²é¢˜ï¼Ÿçœ‹åˆ†ï¼Œå‘ç°ç¬¬ä¸€é¢˜ç«Ÿç„¶è¿‡äº†..è„¸æŒºå¥½çš„ã€‚T2 puts(\u0026quot;-1\u0026quot;) æœç„¶æ²¡åˆ†ã€‚T3 å†™å¤šå°‘æ˜¯å¤šå°‘ï¼ˆåºŸè¯ï¼Œè¿™ç§é¢˜..ï¼‰ã€‚$100+0+19$ï¼Œ$rk6$ï¼Œè¢«åŠé”¤äº†..åœ¨å…¶ä»–çœå°±å«åº•äº†..\næ™šä¸Šæ‰“äº†åœº Globalï¼Œç¥ä»™ Div.2 A~C \u0026amp; Div.1 E/F åœº..å†™å®Œ A ~ E ä¹‹åå‘ç°æ‰€æœ‰äººåŒ…æ‹¬ tourist éƒ½æ˜¯äº”é¢˜ï¼Œè€Œä¸” tourist åœ¨æˆ‘ä¹‹å‰åŠä¸ªå°æ—¶å°±å†™å®Œäº”é¢˜äº†..äºæ˜¯å°±ä¸æƒ³æ‰“äº†ã€‚åˆè¿‡äº†å¿«ä¸€ä¸ªå°æ—¶ï¼Œå‘ç°æœ‰å¥½å¤šäººåœ¨ hack Aï¼Œäºæ˜¯å°±å»çœ‹äº†ä¸‹ï¼Œhack äº†ä¸€ä¸ªå†™æ³•å¥‡æ€ªçš„ Aã€‚æœ€åæ¶¨äº†ä¸å°‘åˆ†..\nè¿˜å¥½æ™šä¸Šé¡ºåˆ©ç¡ç€äº†..\nDay 2 ç”±äºæ˜¨å¤©è°ƒ T1 è°ƒçš„å¿ƒæ€çˆ†ç‚¸æ‰å»çœ‹åé¢çš„é¢˜å¯¼è‡´æ•´åœºçˆ†ç‚¸ï¼Œäºæ˜¯è¿™æ¬¡å…ˆçœ‹äº†æ¯é“é¢˜..\nçœ‹äº†çœ‹ T1ï¼Œé™¤äº† dp æ²¡å•¥æƒ³æ³•ï¼Œå…ˆå†™äº†ä¸ª $20$ åˆ†æš´åŠ›ï¼Œå‡†å¤‡æŠŠ dp ç•™åˆ°åé¢å†™ã€‚çœŸçš„æ˜¯ sb äº†ï¼Œæ²¡æƒ³åˆ°å¯ä»¥å‹ä¸¤ç»´ï¼Œåªå‹äº†ä¸€ç»´..\nç„¶åå»çœ‹ T2ï¼Œç¬¬ä¸€çœ¼å¹¶æ²¡æœ‰ä»€ä¹ˆæƒ³æ³•..æš´åŠ›è¿ç¬¬äºŒæ¡£éƒ½ä¸å¤ªä¼šå†™ï¼Œäºæ˜¯å…ˆå†™äº†ä¸ª $\\mathcal O(n^n)$ã€‚\nç„¶åå»çœ‹ T3ï¼Œemm..æš´åŠ›æ€ä¹ˆå†™å•Š.webpã€‚\nç„¶åå»ä¸Šäº†ä¸ªå•æ‰€ã€‚åœ¨å•æ‰€é‡Œæƒ³åˆ°äº† T2 çš„åšæ³•..å†™çš„æ¯”è¾ƒé¡ºåˆ©ï¼Œå¤§æ¦‚ä¸åˆ° $1h$ å§..å°±ç¬¬ä¸€æ¬¡æµ‹æŒ‚äº†ï¼Œæ”¹äº†ä¸ªå°åœ°æ–¹å°±è¿‡äº†æ‰€æœ‰æ ·ä¾‹ã€‚ç„¶åå¯¹æ‹ï¼Œä¹Ÿè¿‡æ‹äº†ã€‚ç„¶åæµ‹äº†ä¸‹é“¾..REäº†ï¼Ÿï¼Ÿå†·é™äº†ä¸€ä¸‹ï¼ŒçŒœæµ‹æ˜¯çˆ†æ ˆäº†ï¼Œç›´æ¥å»é—®äº†ç›‘è€ƒï¼Œç­”å¤æ˜¯æ ˆç©ºé—´å’Œå†…å­˜é™åˆ¶ä¸€æ ·ï¼Œç„¶åå°±æ„‰å¿«åœ°æœ¬åœ°å¼€æ ˆè¿‡äº†ã€‚\nç„¶åå»å†™ T1 çš„ dp..ä¸€å¼€å§‹å°è¯•å•æ•°ç»„æ»šåŠ¨ï¼Œç„¶åæŒ‚äº†ã€‚äºæ˜¯æ”¹æˆ 01 æ»šåŠ¨ï¼Œåˆè°ƒäº†å¥½ä¹…æ‰è¿‡..\næœ€åå»å†™ T3ï¼Œå†³å®šåªå†™ $k=1$ã€‚å…ˆå†™äº†ä¸‹ $k=1$ \u0026amp; $l=n$ çš„ dpï¼Œå¾ˆå¿«å°±å†™å®Œäº†ã€‚ç„¶åå»å†™å‰©ä¸‹çš„ $k=1$ï¼Œç®—äº†ä¸‹å¤æ‚åº¦ï¼Œ$\\mathcal O(nl^2)$ï¼Œæ„Ÿè§‰å¥½æ‚¬..ç„¶åå‘ç°å¯ä»¥ç”¨ NTT ä¼˜åŒ–åˆ° $\\mathcal O(nl\\log l)$ï¼Œç„¶åå¼€å§‹å†™ NTTï¼Œç„¶å..NTT æ²¡è°ƒå‡ºæ¥..è€ƒå‰åº”è¯¥å†™ä¸€å†™çš„..å› ä¸ºæ¯”è¾ƒå¤´é“ï¼ŒNTT ä¸€ç›´è°ƒåˆ°äº†ç¦»è€ƒè¯•ç»“æŸ $15min$ï¼Œç„¶åå¼€å§‹ rush $\\mathcal O(nl^2)$ï¼Œå¤±è´¥äº†..\nå‡ºè€ƒåœºä¸ä¹…ï¼Œæƒ³èµ·æ¥è‡ªå·± T1 å¥½åƒå¿˜æ¸…ç©ºäº†..è¾£é¸¡æ¸©é¦¨æç¤ºã€‚ç„¶åæˆ‘åœ¨å½±å“æ­£ç¡®æ€§/ä¸å½±å“æ­£ç¡®æ€§ä¹‹é—´åå¤åˆ‡æ¢äº†å‡ æ¬¡ç»“è®º..æœ€ååœ¨çœ‹æˆç»©ä¹‹å‰å¾—å‡ºçš„ç»“è®ºæ˜¯ï¼Œæˆ‘æ²¡æœ‰é™åˆ¶ï¼ˆ$k=0$ï¼‰çš„ç‚¹ç¨³æŒ‚ï¼Œå‰©ä¸‹çš„ç‚¹å¤§æ¦‚ç‡æŒ‚ã€‚\nå»çœ‹æˆç»©ï¼Œ$20+100+8$ã€‚T1 ç«Ÿç„¶æœ‰ $20$ï¼Ÿéš¾é“æ˜¯ $k\\ne0$ çš„ç‚¹éƒ½è¿‡äº†ï¼Ÿå¬å®Œè®²é¢˜ä¹‹åå»çœ‹è¯„æµ‹ç»“æœï¼Œå‘ç°æ˜¯ $k=0$ çš„ä¸¤ä¸ªç‚¹è¿‡äº†\u0026hellip;è‡³ä»Šæ²¡æƒ³æ˜ç™½ï¼Œåªä¸è¿‡å¦‚æœæ¸…ç©ºäº†æ•°ç»„å°±æ˜¯ $40$ äº†ã€‚\næœ€åæ˜¯ä¸¤å¤©æ€»åˆ†ç¬¬å››ï¼ˆå’Œå»å¹´ä¸€æ ·ï¼Œç™½å­¦äº†ï¼‰ï¼ŒåŠ ä¸Š NOIP è¿˜æ˜¯è¢«èƒ¡é˜Ÿçˆ†è¸©äº†..\næ™šä¸Šä¸¤å¤©æŒ‚åˆ† $100+$ çš„è£¸ç½—é˜Ÿåœ¨è£™é‡Œé—®ä¸ºä»€ä¹ˆ D2T2 $75â€‹$ åˆ†ï¼Œæˆ‘æŠŠä»–çš„ä»£ç å¤åˆ¶åˆ° LOJ å‘ç°è¿‡äº†..\nå†·é™äº†ä¸€ä¸‹ï¼Œæ„Ÿè§‰ä¸å¯èƒ½æ˜¯ OJ çš„é—®é¢˜ï¼Œæ‰€ä»¥ä¸å¼€ C++11 æµ‹äº†ä¸€ä¸‹ï¼Œæœç„¶æ²¡è¿‡..å› ä¸ºå‰å‡ å¤©å†™ OI Wiki çš„æ—¶å€™æŸ¥è¿‡ï¼Œæ‰€ä»¥å¾ˆå¿«å°±çŒœåˆ°äº†ï¼Œæ˜¯ swap çš„é—®é¢˜.. priority_queue çš„ swap åœ¨ä¸å¼€ C++11 æ—¶æ˜¯ $\\mathcal O(n)$ çš„ã€‚\né¢˜è§£ D1T1 è€ƒåœºåšæ³• å»ºå¯æŒä¹…åŒ– 01 Trieï¼ŒæŠŠåŒºé—´å¼‚æˆ–å’Œè½¬åŒ–æˆä¸¤ä¸ªå‰ç¼€å¼‚æˆ–å’Œçš„å¼‚æˆ–ï¼Œç„¶åå¯¹æ¯ä¸ªå³ç«¯ç‚¹å°±å¯ä»¥æ‰¾åˆ°æœ€å¤§çš„å¼‚æˆ–å’Œï¼Œæ‰”è¿›å †é‡Œã€‚æ‰¾æœ€å¤§å€¼çš„æ—¶å€™è®°å½•ä¸€ä¸‹åœ¨ Trie ä¸Šçš„è·¯å¾„ï¼Œä»¥åŠæ¯ä¸€å±‚ç»è¿‡çš„æ¬¡æ•°ã€‚å †é‡Œå¼¹å‡ºä¸€ä¸ªå€¼åæ’å…¥ä¸‹ä¸€ä¸ªå€¼æ—¶æ ¹æ®è®°å½•çš„è·¯å¾„æ¥æ‰¾ï¼šå¦‚æœç»è¿‡æ¬¡æ•°å¤§äºå­æ ‘å½“å‰èŠ‚ç‚¹çš„ siz å°±æ¢ä¸ªå„¿å­å¹¶æ¸…ç©ºæ¯”ä»–æ›´æ·±çš„èŠ‚ç‚¹çš„è®°å½•çš„ç»è¿‡æ¬¡æ•°ï¼Œå¦åˆ™æŒ‰è®°å½•çš„è·¯å¾„èµ°ã€‚å¦‚æœ Trie çš„æ ¹éƒ½æ»¡äº†å°±ä¸ push äº†ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;queue\u0026gt; #include \u0026lt;map\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; int n,k; typedef unsigned int ui; typedef pair\u0026lt;ui,int\u0026gt; pui; ui read() { ui out=0; char c; while (!isdigit(c=getchar())); for (;isdigit(c);c=getchar()) out=out*10+c-'0'; return out; } const int N=500010; struct Node { int val,ch[2]; } t[N*35]; int rt[N],tot,d[N][35],cnt[N][35]; ui pre[N]; unsigned long long ans; priority_queue\u0026lt;pui\u0026gt; q; int ins(int x,ui y) { int i,u,v,root; u=root=++tot; t[u].val=t[x].val+1; for (i=31;i\u0026gt;=0;--i) { v=((y\u0026gt;\u0026gt;i)\u0026amp;1u); t[u].ch[v^1]=t[x].ch[v^1]; u=t[u].ch[v]=++tot; x=t[x].ch[v]; t[u].val=t[x].val+1; } return root; } signed main() { scanf(\u0026quot;%d %d\u0026quot;,\u0026amp;n,\u0026amp;k); int i,j,u,v,r; ui x; for (i=1;i\u0026lt;=n;++i) { pre[i]=pre[i-1]^read(); u=rt[i]=ins(rt[i-1],pre[i-1]); for (x=0,j=31;j\u0026gt;=0;--j) { v=(((pre[i]\u0026gt;\u0026gt;j)\u0026amp;1u)^1u); if (t[u].ch[v]) { x|=(1u\u0026lt;\u0026lt;j); d[i][j]=u=t[u].ch[v]; } else d[i][j]=u=t[u].ch[v^1]; ++cnt[i][j]; } q.push(pui(x,i)); } while (k--) { ans+=q.top().first; r=q.top().second; q.pop(); x=0; for (u=rt[r],i=31;i\u0026gt;=0;--i) { v=(((pre[r]\u0026gt;\u0026gt;i)\u0026amp;1u)^1u); if (cnt[r][i]==0) { ++cnt[r][i]; if (t[u].ch[v]) { x|=(1u\u0026lt;\u0026lt;i); u=d[r][i]=t[u].ch[v]; } else u=d[r][i]=t[u].ch[v^1]; } else if (cnt[r][i]\u0026lt;t[d[r][i]].val) { if (d[r][i]==t[u].ch[v]) x|=(1u\u0026lt;\u0026lt;i); ++cnt[r][i]; u=d[r][i]; } else { for (j=i;j\u0026gt;=0;--j) cnt[r][j]=0; ++cnt[r][i]; u=d[r][i]=t[u].ch[v^1]; } } if (cnt[r][31]==t[rt[r]].val) continue; q.push(pui(x,r)); } printf(\u0026quot;%lld\\n\u0026quot;,ans); return 0; }   é¢˜è§£åšæ³• é™¤äº†æ‰¾åç»§éƒ½æ˜¯å·®ä¸å¤šçš„ï¼Œæ‰¾åç»§çš„æ–¹æ³•æ˜¯æ‰¾å®Œ $[0,r)$ ä¹‹åæŠŠ $[0,ans)$ å’Œ $(ans,r)$ å¡è¿›å †é‡Œã€‚\næ­£å¸¸äººåšæ³• ç¿»äº†ä¸‹ LOJ æœ€çŸ­è§£ï¼Œç„¶åè¢«è‡ªå·±è ¢å“­äº†..\nç›´æ¥è®°å½•æ¯ä¸ªå³ç«¯ç‚¹å·²ç»æ‰¾åˆ°ç¬¬ $k$ å¤§äº†ï¼Œç„¶åæ‰¾ç¬¬ $k$ å¤§çš„æ–¹å¼ç±»ä¼¼å€¼åŸŸçº¿æ®µæ ‘/å¹³è¡¡æ ‘æ‰¾ç¬¬ $kâ€‹$ å¤§\u0026hellip;\nD1T2 è®²ä¸€ä¸‹ SAM åšæ³•.. sb é€‰æ‰‹ä¸é€‚åˆæ‰“ SAã€‚\næŠŠæ‰€æœ‰ä¸²ç¿»è½¬ï¼ŒB æ˜¯ A çš„å‰ç¼€å°±å˜æˆäº† B æ˜¯ A çš„åç¼€ã€‚\næ˜¯åç¼€å°±æ˜¯ parent æ ‘ä¸Šçš„ç¥–å…ˆï¼Œæˆ–è€…åŒä¸€ä¸ªèŠ‚ç‚¹ä¸” len æ›´å°ã€‚\næŠŠæ‰€æœ‰ A/B ä¸²å¯¹åº”çš„èŠ‚ç‚¹æŒ‰åœ¨ A/B ä¸­çš„ len æ‹†ç‚¹ï¼Œæ¯ä¸ª parent æ ‘ä¸Šçš„èŠ‚ç‚¹ä»è¾ƒå°çš„ len å‘è¾ƒå¤§çš„ len è¿è¾¹ï¼ŒA ä¸²å¯¹åº”çš„ç‚¹ \u0026amp; len å‘ A ä¸²è¿è¾¹ï¼ŒB ä¸²å‘å¯¹åº”çš„ç‚¹ \u0026amp; len è¿è¾¹ã€‚\nç„¶åæ‹“æ‰‘æ’åº/è®°å¿†åŒ–æœç´¢å³å¯ã€‚\nå½“ç„¶å¦‚æœä½ åƒæˆ‘ä¸€æ · sbï¼Œå¯ä»¥æŒ‰ dfs åºç”¨çº¿æ®µæ ‘ä¼˜åŒ–è¿è¾¹ï¼Œå°±å¯ä»¥ï¼ˆå‡è£…ï¼‰ä¸ç”¨æ‹†ç‚¹äº†..\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;set\u0026gt; #include \u0026lt;map\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; int read() { int out=0; char c; while (!isdigit(c=getchar())); for (;isdigit(c);c=getchar()) out=out*10+c-'0'; return out; } const int N=200010; struct Node { int len,par,ch[26]; } sam[N\u0026lt;\u0026lt;1]; void insert(int x); int p,tot,fa[N\u0026lt;\u0026lt;1][20],sta[N]; void add(int u,int v); long long dp(int u); int head[N*5],nxt[N*6],to[N*6],cnt; int n,na,nb,m,a[N],alen[N],b[N],blen[N],w[N*5],tot2; set\u0026lt;int\u0026gt; aln[N\u0026lt;\u0026lt;1],bln[N\u0026lt;\u0026lt;1]; map\u0026lt;int,int\u0026gt; aid[N\u0026lt;\u0026lt;1],bid[N\u0026lt;\u0026lt;1]; long long ans,f[N*5]; bool vis1[N*5],vis2[N*5],loop; char s[N]; int main() { int i,j,l,r,u,pre,T; T=read(); while (T--) { scanf(\u0026quot;%s\u0026quot;,s+1); n=strlen(s+1); reverse(s+1,s+n+1); for (i=1;i\u0026lt;=2*n;++i) { memset(sam[i].ch,0,sizeof(sam[i].ch)); aln[i].clear(); aid[i].clear(); bln[i].clear(); bid[i].clear(); } memset(w,0,sizeof(w)); memset(head,0,sizeof(head)); memset(vis1,false,sizeof(vis1)); memset(vis2,false,sizeof(vis2)); cnt=ans=0; p=tot=1; loop=false; for (i=1;i\u0026lt;=n;++i) { sta[i]=tot+1; insert(s[i]-'a'); } for (i=2;i\u0026lt;=tot;++i) fa[i][0]=sam[i].par; for (j=1;j\u0026lt;=18;++j) { for (i=2;i\u0026lt;=tot;++i) { fa[i][j]=fa[fa[i][j-1]][j-1]; } } na=read(); for (i=1;i\u0026lt;=na;++i) { r=n+1-read(); l=n+1-read(); u=sta[r]; for (j=18;j\u0026gt;=0;--j) { if (sam[fa[u][j]].len\u0026gt;r-l) { u=fa[u][j]; } } a[i]=u; alen[i]=r-l+1; aln[u].insert(alen[i]); bln[u].insert(alen[i]); } nb=read(); for (i=1;i\u0026lt;=nb;++i) { r=n+1-read(); l=n+1-read(); u=sta[r]; for (j=18;j\u0026gt;=0;--j) { if (sam[fa[u][j]].len\u0026gt;r-l) { u=fa[u][j]; } } b[i]=u; blen[i]=r-l+1; bln[u].insert(blen[i]); } tot2=tot; for (i=2;i\u0026lt;=tot;++i) { if (bln[i].empty()) add(sam[i].par,i); else { for (auto k : aln[i]) w[aid[i][k]=++tot2]=k; pre=sam[i].par; for (auto k : bln[i]) { add(pre,bid[i][k]=++tot2); if (aln[i].find(k)!=aln[i].end()) add(tot2,aid[i][k]); pre=tot2; } add(tot2,i); } } m=read(); for (i=1;i\u0026lt;=m;++i) { l=read(); r=read(); add(aid[a[l]][alen[l]],bid[b[r]][blen[r]]); } for (i=1;i\u0026lt;=na;++i) ans=max(ans,dp(aid[a[i]][alen[i]])); if (loop) puts(\u0026quot;-1\u0026quot;); else printf(\u0026quot;%lld\\n\u0026quot;,ans); } return 0; } long long dp(int u) { if (vis2[u]) return f[u]; if (vis1[u]) loop=true; if (loop) return 0; vis1[u]=true; int i,v; f[u]=w[u]; for (i=head[u];i;i=nxt[i]) { v=to[i]; f[u]=max(f[u],dp(v)+w[u]); } vis2[u]=true; return f[u]; } void insert(int x) { int np=++tot; sam[np].len=sam[p].len+1; while (p\u0026amp;\u0026amp;!sam[p].ch[x]) { sam[p].ch[x]=np; p=sam[p].par; } if (!p) sam[np].par=1; else { int q=sam[p].ch[x]; if (sam[q].len==sam[p].len+1) sam[np].par=q; else { int nq=++tot; sam[nq].len=sam[p].len+1; memcpy(sam[nq].ch,sam[q].ch,sizeof(sam[q].ch)); sam[nq].par=sam[q].par; sam[q].par=sam[np].par=nq; while (p\u0026amp;\u0026amp;sam[p].ch[x]==q) { sam[p].ch[x]=nq; p=sam[p].par; } } } p=np; } void add(int u,int v) { nxt[++cnt]=head[u]; head[u]=cnt; to[cnt]=v; }   D1T3 å¿«é€Ÿå¹‚ # 3 æ¬§æ‹‰å®šç†ï¼Œè¾¹è¯»å…¥è¾¹å–æ¨¡ã€‚\n# 4 æ‰¾åˆ°æœ€å¤§å€¼å¾€ä¸Šæšä¸¾ / æŠ±ç€æ¶è‡­çš„æƒ³æ³•ç›´æ¥çŒœå‡ºæ¥ã€‚\n# 5 æŒ‰ $x$ æ’åºåå‘ç°æœ‰ä¸¤ç»„ç›¸é‚»çš„ $x$ å·®å°äºç­‰äº $10$ï¼Œç”±äº $p|(y_119^{x_2-x_1}-y_2)$ï¼Œæ±‚å‡ºè¿™ä¸¤ç»„çš„ $gcd$ å³å¯ã€‚\n# 6 / 7 å…ˆè‡ªç„¶æº¢å‡ºå†å–æ¨¡ã€‚\n# 7 æš´åŠ›æ‰¾å¾ªç¯èŠ‚å³å¯ã€‚éœ€è¦æ³¨æ„å¾ªç¯èŠ‚ä¸­ä¸å« $1$ .. æ‰€ä»¥ä¸èƒ½ç›´æ¥é€šè¿‡ $1$ æ¥åˆ¤æ–­å¾ªç¯èŠ‚ï¼Œå¯ä»¥ç”¨ setã€‚\nåŒºé—´ç­›è´¨æ•°/è«æ¯”ä¹Œæ–¯å‡½æ•° # 9 / 12 ç”¨ $\\sqrt n$ ä»¥å†…çš„è´¨æ•°ç­›åé¢çš„ã€‚\n# 10 / 13 ç”¨ $5\\times10^7$ ä»¥å†…çš„æ•°ç­›åé¢çš„ï¼Œç„¶åæŠŠé”™è¯¯çš„é¡¹æ‰“è¡¨ã€‚\nå¥½åƒå¯ä»¥ç”¨ Miller-Rabin ä¸æ‰“è¡¨åšï¼Œä¸å¤ªä¼š..\nå‡ ä¸ªä¼˜åŒ–ç é•¿çš„å°æŠ€å·§ï¼š\n æ•°ç»„é‡Œé¢å­˜å·®åˆ†ã€‚ æŠŠ $5\\times10^7$ ç•¥å¾®è°ƒå¤§ï¼Œä½†è¦æ³¨æ„ä¸è¦ TLEã€‚ æŠŠæ•°ç»„å‹æˆå­—ç¬¦ä¸²ã€‚  åŒºé—´ç­›åŸæ ¹ # 14 ç›´æ¥åˆ¤æ–­ $p-1$ é™¤æ‰æ¯ä¸ªè´¨å› æ•°åæ˜¯å¦æ˜¯ $a^x\\equiv1\\pmod p$ çš„è§£ã€‚\n# 15 å…ˆæ‰¾åˆ°ä»»æ„ä¸€ä¸ªåŸæ ¹ $g$ã€‚\né¢„å¤„ç†å‡º $xâ€‹$ æ˜¯ $gâ€‹$ çš„ $kâ€‹$ æ¬¡å¹‚ï¼Œé‚£ä¹ˆ $xâ€‹$ æ˜¯åŸæ ¹å½“ä¸”ä»…å½“ $kâ€‹$ å’Œ $p-1â€‹$ äº’è´¨ã€‚\n# 16 æšä¸¾è´¨æ•°åˆ¤æ–­å³å¯å¿«é€Ÿæ‰¾åˆ° $p$ã€‚ï¼ˆè¯´æ˜¯å¿«é€Ÿè¿˜æ˜¯è¦è·‘å‡ åç§’..ï¼‰\nå‚è€ƒä»£ç  LOJ æœ€æ…¢è§£\nD2T1 æä¸‰ä¸ªèƒŒåŒ…ï¼š\n æ•´ä¸ªåŸå¸‚éƒ½æ²¡æœ‰é™åˆ¶çš„åŸå¸‚é€‰æ‹©é˜µè¥ã€‚ æ²¡æœ‰é™åˆ¶çš„å­¦æ ¡é€‰æ‹©æ´¾ç³»ã€‚ æœ‰é™åˆ¶çš„å­¦æ ¡é€‰æ‹©é˜µè¥\u0026amp;æ´¾ç³»ï¼Œæ³¨æ„æ¯ä¸ªæœ‰é™åˆ¶çš„åŸå¸‚è¦é€‰ä¸€ä¸ªæœ‰é™åˆ¶çš„å­¦æ ¡ä½œä¸ºâ€œä»£è¡¨â€ï¼Œåœ¨èƒŒåŒ…æ—¶å¯¹é˜µè¥çš„è´¡çŒ®ä¸ºæ•´ä¸ªåŸå¸‚çš„æ€»å’Œã€‚  æœ€åå†æšä¸¾ç¬¬ä¸‰ä¸ªèƒŒåŒ…çš„æ¯ä¸€é¡¹ï¼Œå¯¹ç­”æ¡ˆçš„è´¡çŒ®å°±æ˜¯è¿™ä¸€é¡¹ä¹˜ä¸Šå‰ä¸¤ä¸ªèƒŒåŒ…ä¸­å¯ä»¥å’Œè¿™ä¸€é¡¹ä¸€èµ·é€‰çš„æ–¹æ¡ˆæ•°ï¼Œå®é™…ä¸Šæ˜¯ä¸€æ®µè¿ç»­çš„åŒºé—´ï¼Œæ‰€ä»¥å‰ä¸¤ä¸ªèƒŒåŒ…é¢„å¤„ç†ä¸€ä¸‹å‰ç¼€å’Œå°±å¯ä»¥ç®—äº†ã€‚\nç”¨å€¼åŸŸä¼˜åŒ–ä¸€ä¸‹èƒŒåŒ…çš„æšä¸¾èŒƒå›´ï¼Œæ€»å¤æ‚åº¦æ˜¯ $\\mathcal O(nm+k^2wm)$ã€‚\næ•´ä½“æ€è·¯ä¸éš¾ï¼ŒçŸ¥è¯†ç‚¹åªæœ‰èƒŒåŒ…..ç„¶è€Œè¿˜æ˜¯å†™äº†æ•´æ•´ä¸€æ™šä¸Šã€‚\nåœ¨å¯å®¤è°ƒåˆ°å¿«åäºŒç‚¹ï¼Œè™½ç„¶è§‰å¾—è‡ªå·±æŒº sb çš„ï¼Œä½†æœ¬åœ°åœ¨ lemon ä¸Š ac çš„æ—¶å€™..çœŸçš„å¥½çˆ½å•Šã€‚\nä¸å¾—ä¸è¯´å¯å®¤å†™é¢˜æ•ˆç‡å°±æ˜¯é«˜ï¼Œåˆçˆ½ã€‚å†™å®Œè¿˜èƒ½çœ‹ä¸€é›†ä¸‰ç‹®\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef long long ll; const int N=1005; const int M=2505; const int K=35; const int V=10; const int mod=998244353; struct Node { int b,s,p; bool operator\u0026lt;(const Node\u0026amp; y) const { if ((~p\u0026amp;\u0026amp;~y.p)||(p==-1\u0026amp;\u0026amp;y.p==-1)) return b\u0026lt;y.b; if (p==-1) return false; return true; } } a[N]; int n,c,m,f[M],g[M],h[M][K*V][2],zy[2],px[2],sum[N],tot[4],ans; bool ban[N]; int main() { int T,i,j,k,x,y,tmp[2]; scanf(\u0026quot;%d\u0026quot;,\u0026amp;T); while (T--) { memset(f,0,sizeof(f)); memset(g,0,sizeof(g)); memset(h,0,sizeof(h)); memset(tot,0,sizeof(tot)); memset(sum,0,sizeof(sum)); memset(ban,false,sizeof(ban)); scanf(\u0026quot;%d%d%d%d%d%d\u0026quot;,\u0026amp;n,\u0026amp;c,zy+0,zy+1,px+0,px+1); for (i=1;i\u0026lt;=n;++i) { scanf(\u0026quot;%d%d\u0026quot;,\u0026amp;a[i].b,\u0026amp;a[i].s); sum[a[i].b]+=a[i].s; a[i].p=-1; tot[0]+=a[i].s; tot[1]+=a[i].s; } scanf(\u0026quot;%d\u0026quot;,\u0026amp;m); for (i=1;i\u0026lt;=m;++i) { scanf(\u0026quot;%d%d\u0026quot;,\u0026amp;x,\u0026amp;y); a[x].p=y; ban[a[x].b]=true; tot[0]-=a[x].s; tot[2]+=a[x].s; } sort(a+1,a+n+1); f[0]=1; for (i=1;i\u0026lt;=c;++i) { if (ban[i]||!sum[i]) { tot[1]-=sum[i]; tot[3]+=sum[i]; continue; } for (j=min(zy[0],tot[1]);j\u0026gt;=sum[i];--j) { if (j\u0026gt;=sum[i]) f[j]=(f[j]+f[j-sum[i]])%mod; } } for (j=1;j\u0026lt;=zy[0];++j) f[j]=(f[j-1]+f[j])%mod; g[0]=1; for (i=m+1;i\u0026lt;=n;++i) { for (j=min(px[0],tot[0]);j\u0026gt;=a[i].s;--j) { if (j\u0026gt;=a[i].s) g[j]=(g[j]+g[j-a[i].s])%mod; } } for (j=1;j\u0026lt;=px[0];++j) g[j]=(g[j-1]+g[j])%mod; h[0][0][0]=1; for (i=m;i\u0026gt;=1;--i) { for (j=min(tot[3],zy[0]);j\u0026gt;=0;--j) { for (k=tot[2];k\u0026gt;=0;--k) { for (x=0;x\u0026lt;=1;++x) { tmp[x]=0; for (y=0;y\u0026lt;=1;++y) { if ((x^1)*2+(y^1)==a[i].p||j\u0026lt;x*sum[a[i].b]||k\u0026lt;y*a[i].s) continue; if (a[i].b!=a[i+1].b||i==m) tmp[x]=(0ll+tmp[x]+h[j-x*sum[a[i].b]][k-y*a[i].s][x^1]+h[j-x*sum[a[i].b]][k-y*a[i].s][x])%mod; else tmp[x]=(tmp[x]+h[j][k-y*a[i].s][x])%mod; } } h[j][k][0]=tmp[0]; h[j][k][1]=tmp[1]; } } } ans=0; for (j=0;j\u0026lt;=tot[3]\u0026amp;\u0026amp;j\u0026lt;=zy[0];++j) { if (zy[0]-j\u0026lt;tot[3]-j+tot[1]-zy[1]) continue; for (k=0;k\u0026lt;=tot[2];++k) { if (px[0]-k\u0026lt;tot[2]-k+tot[0]-px[1]) continue; ans=(ans+(ll)(h[j][k][0]+h[j][k][1])*(f[zy[0]-j]-(tot[3]-j+tot[1]-zy[1]\u0026gt;0?f[tot[3]-j+tot[1]-zy[1]-1]:0))%mod*(g[px[0]-k]-(tot[2]-k+tot[0]-px[1]\u0026gt;0?g[tot[2]-k+tot[0]-px[1]-1]:0)))%mod; } } cout\u0026lt;\u0026lt;(ans+mod)%mod\u0026lt;\u0026lt;endl; } return 0; }   D2T2 ç”¨å †ç»´æŠ¤æ¯ä¸ªå­æ ‘çš„ç­”æ¡ˆï¼ˆå †é‡Œæ¯ä¸ªå…ƒç´ ä¸ºæ¯ä¸€ç»„çš„æœ€å¤§å€¼ï¼‰ï¼Œåˆå¹¶çš„æ—¶å€™å¼¹å‡ºä¸¤ä¸ªå †é¡¶å– max è®°å½•ä¸‹æ¥ï¼Œç›´åˆ°å…¶ä¸­ä¸€ä¸ªå †ä¸ºç©ºï¼Œå†æŠŠè®°å½•çš„å€¼åŠ åˆ°éç©ºçš„é‚£ä¸ªå †é‡Œï¼Œå°±æ˜¯æ–°çš„ç­”æ¡ˆã€‚å¯ä»¥ä¸¤ä¸¤åˆå¹¶ï¼Œä¹Ÿå¯ä»¥æŠŠå„¿å­åˆå¹¶äº†å†åŠ ä¸Šè‡ªå·±ã€‚åˆå¹¶æ—¶æ¯å¼¹å‡ºä¸¤ä¸ªå…ƒç´ ã€åŠ å…¥ä¸€ä¸ªå…ƒç´ ï¼Œå…ƒç´ çš„æ€»æ•°å°±ä¼šå‡å°‘ä¸€ï¼Œæ‰€ä»¥æ€»å¤æ‚åº¦æ˜¯ $\\mathcal O(n\\log n)$ã€‚æ³¨æ„ï¼Œä¸èƒ½ç”¨ = æ¥å¤åˆ¶å †ï¼Œè€Œè¦ç”¨ swapï¼Œè€Œä¸”è¦å¼€ C++11ã€‚å¦‚æœä¸å¼€ C++11 å¯ä»¥è®°å½• id ç„¶å swap idã€‚\nè´ªå¿ƒåˆå¹¶å°±ä¸ä¸¥æ ¼è¯äº†ï¼Œæ„Ÿè§‰ç¨æœ‰ç‚¹ç±»ä¼¼æœ€è¿‘é‚£åœº CF çš„ Bï¼Ÿ\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;queue\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; int read() { int out=0; char c; while (!isdigit(c=getchar())); for (;isdigit(c);c=getchar()) out=out*10+c-'0'; return out; } const int N=200010; void dfs1(int u); void dfs2(int u); vector\u0026lt;int\u0026gt; son[N]; int n,a[N],mxdep[N]; priority_queue\u0026lt;int\u0026gt; q[N]; int main() { int i; long long ans=0; n=read(); for (i=1;i\u0026lt;=n;++i) a[i]=read(); for (i=2;i\u0026lt;=n;++i) son[read()].push_back(i); dfs1(1); for (i=1;i\u0026lt;=n;++i) sort(son[i].begin(),son[i].end(),[](int x,int y){return mxdep[x]\u0026gt;mxdep[y];}); dfs2(1); while (!q[1].empty()) { ans+=q[1].top(); q[1].pop(); } cout\u0026lt;\u0026lt;ans; return 0; } void dfs2(int u) { int i,v,mx; vector\u0026lt;int\u0026gt; tmp; for (i=0;i\u0026lt;son[u].size();++i) { v=son[u][i]; dfs2(v); } if (son[u].size()) { if (son[u].size()\u0026gt;1) { while (!q[son[u][1]].empty()) { mx=0; for (i=0;i\u0026lt;son[u].size();++i) { v=son[u][i]; if (q[v].empty()) break; mx=max(mx,q[v].top()); q[v].pop(); } tmp.push_back(mx); } } q[u].swap(q[son[u][0]]); for (i=0;i\u0026lt;tmp.size();++i) q[u].push(tmp[i]); } q[u].push(a[u]); } void dfs1(int u) { int i,v; for (i=0;i\u0026lt;son[u].size();++i) { v=son[u][i]; dfs1(v); mxdep[u]=max(mxdep[u],mxdep[v]+1); } }   D2T3 å¾…å¡«ã€‚\n","date":"2019-04-08T15:39:51+08:00","permalink":"https://ouuan.github.io/post/%E5%8D%81%E4%BA%8C%E7%9C%81%E8%81%94%E8%80%832019-%E6%B8%B8%E8%AE%B0-%E9%A2%98%E8%A7%A3/","tags":["CCFç³»åˆ—èµ›äº‹","çœé€‰"],"title":"åäºŒçœè”è€ƒ2019 æ¸¸è®° \u0026 é¢˜è§£"},{"categories":["çŸ¥è¯†ç‚¹"],"contents":"æœ€è¿‘å‘ç° OI Wiki çš„â€œæ ‘åˆ†å—â€æ˜¯ç©ºçš„ï¼Œæœ¬æ¥æƒ³å‡­ç€ä¹‹å‰å†™çš„è«é˜Ÿæ•™ç¨‹æ°´ä¸€æ°´ï¼Œç»“æœè¢«å‘ŠçŸ¥å·²ç»æœ‰äººå†™è¿‡æ ‘ä¸Šè«é˜Ÿäº†..äºæ˜¯å°±å¾—è¯¦ç»†ä»‹ç»ä¸€ä¸‹æ ‘åˆ†å—é™¤äº†æ ‘ä¸Šè«é˜Ÿä»¥å¤–çš„åº”ç”¨..ç„¶è€Œæˆ‘é™¤äº†ç³–æœå…¬å›­åªåšè¿‡ä¸€é“æ ‘åˆ†å—..ï¼ˆç»“æœæœ€åå¹¶æ²¡æœ‰æ‰¾åˆ°è¿™é“é¢˜ä»¥å¤–çš„å…¶å®ƒé¢˜..ï¼‰\næ ‘åˆ†å—çš„æ–¹å¼ å¯ä»¥å‚è€ƒ OI Wiki/è«é˜Ÿç®—æ³•/çœŸ-æ ‘ä¸Šè«é˜Ÿã€‚\nä¹Ÿå¯ä»¥å‚è€ƒ ouuançš„åšå®¢/è«é˜Ÿã€å¸¦ä¿®è«é˜Ÿã€æ ‘ä¸Šè«é˜Ÿè¯¦è§£/æ ‘ä¸Šè«é˜Ÿã€‚\næ ‘ä¸Šè«é˜ŸåŒæ ·å¯ä»¥å‚è€ƒä»¥ä¸Šä¸¤ç¯‡æ–‡ç« ã€‚\næ ‘åˆ†å—çš„åº”ç”¨ æ ‘åˆ†å—é™¤äº†åº”ç”¨äºè«é˜Ÿï¼Œè¿˜å¯ä»¥çµæ´»åœ°è¿ç”¨åˆ°æŸäº›æ ‘ä¸Šé—®é¢˜ä¸­ã€‚ä½†å¯ä»¥ç”¨æ ‘åˆ†å—è§£å†³çš„é¢˜ç›®å¾€å¾€éƒ½æœ‰æ›´ä¼˜ç§€çš„åšæ³•ï¼Œæ‰€ä»¥ç›¸å…³çš„é¢˜ç›®è¾ƒå°‘ã€‚\né¡ºå¸¦æä¸€å¥ï¼Œâ€œgtyçš„å¦¹å­æ ‘â€çš„æ ‘åˆ†å—åšæ³•å¯ä»¥è¢«èŠèŠ±å›¾å¡æ‰ã€‚\nBZOJ4763 é›ªè¾‰ å…ˆè¿›è¡Œæ ‘åˆ†å—ï¼Œç„¶åå¯¹æ¯ä¸ªå—çš„å…³é”®ç‚¹ï¼Œé¢„å¤„ç†å‡ºå®ƒåˆ°ç¥–å…ˆä¸­æ¯ä¸ªå…³é”®ç‚¹çš„è·¯å¾„ä¸Šé¢œè‰²çš„ bitsetï¼Œä»¥åŠæ¯ä¸ªå…³é”®ç‚¹çš„æœ€è¿‘å…³é”®ç‚¹ç¥–å…ˆï¼Œå¤æ‚åº¦æ˜¯ $\\mathcal O(n\\sqrt n+\\frac{nc}{32})â€‹$ï¼Œå…¶ä¸­ $n\\sqrt nâ€‹$ æ˜¯æš´åŠ›ä»æ¯ä¸ªå…³é”®ç‚¹å‘ä¸Šè·³çš„å¤æ‚åº¦ï¼Œ$\\frac{nc}{32}â€‹$ æ˜¯æŠŠ $\\mathcal O(n)â€‹$ ä¸ª bitset å­˜ä¸‹æ¥çš„å¤æ‚åº¦ã€‚\nå›ç­”è¯¢é—®çš„æ—¶å€™ï¼Œå…ˆä»è·¯å¾„çš„ç«¯ç‚¹æš´åŠ›è·³åˆ°æ‰€åœ¨å—çš„å…³é”®ç‚¹ï¼Œå†ä»æ‰€åœ¨å—çš„å…³é”®ç‚¹ä¸€å—ä¸€å—åœ°å‘ä¸Šè·³ï¼Œç›´åˆ° $lca$ æ‰€åœ¨å—ï¼Œç„¶åå†æš´åŠ›è·³åˆ° $lca$ã€‚å…³é”®ç‚¹ä¹‹é—´çš„ bitset å·²ç»é¢„å¤„ç†äº†ï¼Œå‰©ä¸‹çš„åœ¨æš´åŠ›è·³çš„è¿‡ç¨‹ä¸­è®¡ç®—ã€‚å•æ¬¡è¯¢é—®å¤æ‚åº¦æ˜¯ $\\mathcal O(\\sqrt n+\\frac c{32})$ï¼Œå…¶ä¸­ $\\sqrt n$ æ˜¯å—å†…æš´åŠ›è·³ä»¥åŠå—ç›´æ¥å‘ä¸Šè·³çš„å¤æ‚åº¦ï¼Œ$\\mathcal O(\\frac c{32})$ æ˜¯å°†é¢„å¤„ç†çš„ç»“æœä¸æš´åŠ›è·³çš„ç»“æœåˆå¹¶çš„å¤æ‚åº¦ã€‚æ•°é¢œè‰²ä¸ªæ•°å¯ä»¥ç”¨ bitset çš„ count()ï¼Œæ±‚ $\\operatorname{mex}$ å¯ä»¥ç”¨ bitset çš„ _Find_first()ã€‚\næ‰€ä»¥ï¼Œæ€»å¤æ‚åº¦ä¸º $\\mathcal O((n+m)(\\sqrt n+\\frac c{32}))â€‹$ã€‚\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;bitset\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; int read() { int out=0; char c; while (!isdigit(c=getchar())); for (;isdigit(c);c=getchar()) out=out*10+c-'0'; return out; } const int N=100010; const int B=666; const int C=30000; void add(int u,int v); void dfs(int u); int head[N],nxt[N\u0026lt;\u0026lt;1],to[N\u0026lt;\u0026lt;1],cnt; int n,m,type,c[N],fa[N],dep[N],sta[N],top,tot,bl[N],key[N/B+5],p[N],keyid[N]; bool vis[N]; bitset\u0026lt;C\u0026gt; bs[N/B+5][N/B+5],temp; int main() { int i,u,v,x,y,k,lastans=0; n=read(); m=read(); type=read(); for (i=1;i\u0026lt;=n;++i) c[i]=read(); for (i=1;i\u0026lt;n;++i) { u=read(); v=read(); add(u,v); add(v,u); } dfs(1); if (!tot) ++tot; if (keyid[key[tot]]==tot) keyid[key[tot]]=0; key[tot]=1; keyid[1]=tot; while (top) bl[sta[top--]]=tot; for (i=1;i\u0026lt;=tot;++i) //é¢„å¤„ç† { if (vis[key[i]]) continue; vis[key[i]]=true; temp.reset(); for (u=key[i];u;u=fa[u]) { temp[c[u]]=1; if (keyid[u]) { if (!p[key[i]]\u0026amp;\u0026amp;u!=key[i]) p[key[i]]=u; bs[keyid[key[i]]][keyid[u]]=temp; } } } while (m--) { k=read(); temp.reset(); while (k--) { u=x=read()^lastans; v=y=read()^lastans; while (key[bl[x]]!=key[bl[y]]) { if (dep[key[bl[x]]]\u0026gt;dep[key[bl[y]]]) { if (x==u) //è‹¥æ˜¯ç¬¬ä¸€æ¬¡è·³å…ˆæš´åŠ›è·³åˆ°å…³é”®ç‚¹ { while (x!=key[bl[u]]) { temp[c[x]]=1; x=fa[x]; } } else x=p[x]; //å¦åˆ™è·³ä¸€æ•´å— } else { if (y==v) { while (y!=key[bl[v]]) { temp[c[y]]=1; y=fa[y]; } } else y=p[y]; } } if (keyid[x]) temp|=bs[keyid[key[bl[u]]]][keyid[x]]; if (keyid[y]) temp|=bs[keyid[key[bl[v]]]][keyid[y]]; while (x!=y) { if (dep[x]\u0026gt;dep[y]) { temp[c[x]]=1; x=fa[x]; } else { temp[c[y]]=1; y=fa[y]; } } temp[c[x]]=true; } int ans1=temp.count(),ans2=(~temp)._Find_first(); printf(\u0026quot;%d %d\\n\u0026quot;,ans1,ans2); lastans=(ans1+ans2)*type; } return 0; } void dfs(int u) { int i,v,t=top; for (i=head[u];i;i=nxt[i]) { v=to[i]; if (v==fa[u]) continue; fa[v]=u; dep[v]=dep[u]+1; dfs(v); if (top-t\u0026gt;=B) { key[++tot]=u; if (!keyid[u]) keyid[u]=tot; while (top\u0026gt;t) bl[sta[top--]]=tot; } } sta[++top]=u; } void add(int u,int v) { nxt[++cnt]=head[u]; head[u]=cnt; to[cnt]=v; }  BZOJ4812 ç”±ä¹ƒæ‰“æ‰‘å…‹ è¿™é¢˜å’Œä¸Šä¸€é¢˜åŸºæœ¬ä¸€æ ·ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯å¾—åˆ° bitset åå¦‚ä½•è®¡ç®—ç­”æ¡ˆã€‚\nç”±äºBZOJæ˜¯è®¡ç®—æ‰€æœ‰æµ‹è¯•ç‚¹æ€»æ—¶é™ï¼Œä¸å¥½å¡ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ _Find_next() æ°´è¿‡å»ã€‚\næ­£è§£æ˜¯æ¯ $16$ ä½ä¸€èµ·ç®—ï¼Œå…ˆé¢„å¤„ç†å‡º $2^{16}$ ç§å¯èƒ½çš„æƒ…å†µé«˜ä½è¿ç»­ $1$ çš„ä¸ªæ•°ã€ä½ä½è¿ç»­ $1$ çš„ä¸ªæ•°ä»¥åŠä¸­é—´çš„è´¡çŒ®ã€‚åªä¸è¿‡è¿™æ ·è¦æ‰‹å†™ bitsetï¼Œå› ä¸ºæ ‡å‡†åº“çš„ bitset ä¸èƒ½å–æŸ $16$ ä½..\nä»£ç å¯ä»¥å‚è€ƒè¿™ç¯‡åšå®¢ã€‚\n","date":"2019-03-30T21:18:50+08:00","permalink":"https://ouuan.github.io/post/%E6%A0%91%E5%88%86%E5%9D%97%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","tags":["æ•°æ®ç»“æ„","åˆ†å—","æ ‘åˆ†å—"],"title":"æ ‘åˆ†å—å­¦ä¹ ç¬”è®°"},{"categories":["è®¡åˆ’"],"contents":"éšä¾¿æ‰¾äº†ç‚¹çœé€‰å‰éœ€è¦å¤ä¹ çš„çŸ¥è¯†ç‚¹ç›¸å…³çš„é¢˜ç›®..\né¢˜ç›® LCT/æ ‘å‰– å…±ä»·å¤§çˆ·æ¸¸é•¿æ²™\nå°æ¸…æ–°æ•°æ®ç»“æ„é¢˜\næœ€å°å·®å€¼ç”Ÿæˆæ ‘\nQTREE4\næ·€ç²‰è´¨ æ ‘ä¸Šæ¸¸æˆ\nå­—ç¬¦ä¸² [APIO2014]å›æ–‡ä¸²\n[HEOI2016/TJOI2016]å­—ç¬¦ä¸²\nTrie æœ€å¤§å¼‚æˆ–å’Œ\næœ€é•¿å¼‚æˆ–è·¯å¾„\næ•´ä½“äºŒåˆ†/æ ‘å¥—æ ‘ [ZJOI2013]Kå¤§æ•°æŸ¥è¯¢\ncdqåˆ†æ²» [Violet]å¤©ä½¿ç©å¶/SJYæ‘†æ£‹å­\n[NOI2007]è´§å¸å…‘æ¢\nè«æ¯”ä¹Œæ–¯åæ¼” [SDOI2014]æ•°è¡¨\næœ€å°å…¬å€æ•°ä¹‹å’Œ\nLucasçš„æ•°è®º\nç»„åˆæ•°å­¦ã€å®¹æ–¥åŸç†ã€æ–¯ç‰¹æ—æ•° é‡è¿”ç°ä¸–\n[HEOI2016/TJOI2016]æ±‚å’Œ\n[å›½å®¶é›†è®­é˜Ÿ] Crash çš„æ–‡æ˜ä¸–ç•Œ\nå¤šé¡¹å¼ã€ç”Ÿæˆå‡½æ•° é£Ÿç‰©\n[CodeChef] COUNTARI\nä¸‡å¾„äººè¸ªç­\nThe Child and Binary Tree\nåŸå¸‚è§„åˆ’\nä»˜å…¬ä¸»çš„èƒŒåŒ…\nç©æ¸¸æˆ\nè®°å½• å…±ä»·å¤§çˆ·æ¸¸é•¿æ²™ï¼šå¦‚æœè¦è·å–ä¸€ä¸ªç‚¹çš„å­æ ‘ä¿¡æ¯ï¼Œè¦ä¹ˆ access çˆ¶äº² Splay è‡ªå·±ç„¶åçœ‹å®+è™š+è‡ªå·±ï¼Œè¦ä¹ˆ access è‡ªå·±ç„¶åçœ‹è™š+è‡ªå·±ã€‚\næœ€å¤§å¼‚æˆ–å’Œï¼šä¸€å¼€å§‹å°è¯•ç”¨çº¿æ®µæ ‘åˆå¹¶åšï¼Œå¤æ‚åº¦æ˜¯ $\\mathcal O(n(\\log(n+m)+\\log w)+m\\log(n+m)\\log w)$ï¼Œå¡å¸¸å¡ä¸è¿‡å»ï¼Œå°è¯•ç”¨ bitset ä¼˜åŒ–ï¼Œåæ¥å‘ç°é™¤ä»¥ $32$ è¢« $\\log$ æ‰äº†ï¼ŒåŠ ä¸Šå¸¦æ¥çš„ä¸€äº›å¸¸æ•°åæ ¹æœ¬æ²¡æœ‰ä¼˜åŒ–.. åªä¸è¿‡åæ¥å‘ç°å¯æŒä¹…åŒ– Trie çœŸçš„æŒºå¥½å†™çš„ï¼Œï¼ˆåªè¦ä¼šä¸»å¸­æ ‘ä¸éœ€è¦å­¦ä¹Ÿèƒ½ yy å‡ºæ¥çš„æ„Ÿè§‰ï¼‰ã€‚\næœ€åæœç„¶æ²¡åšå‡ é“é¢˜..åªä¸è¿‡æ¯”æˆ‘æƒ³è±¡ä¸­è¿˜è¦å°‘ä¸€ç‚¹..\nå†™äº†ç‚¹ OI Wikiï¼Œè¿‡ç¨‹ä¸­ä¹Ÿå†™äº†å‡ é“è®¡åˆ’å¤–çš„é¢˜ã€‚\n","date":"2019-03-30T09:25:04+08:00","permalink":"https://ouuan.github.io/post/2019%E7%9C%81%E9%80%89%E5%A4%8D%E4%B9%A0%E5%91%A8%E5%81%9A%E9%A2%98%E8%AE%A1%E5%88%92/","tags":["çœé€‰","CCFç³»åˆ—èµ›äº‹","è®¡åˆ’"],"title":"2019çœé€‰å¤ä¹ å‘¨åšé¢˜è®¡åˆ’"},{"categories":["çŸ¥è¯†ç‚¹"],"contents":"è¿™æ˜¯ä¸€ç¯‡æŠ«ç€PJç»„æ•°æ®ç»“æ„å¤–è¡£çš„æ ‘å¥—æ ‘æ•™ç¨‹ã€‚\nå¤§çº¦ä¼šï¼ˆå°è¯•ç€ï¼‰è¾ƒä¸ºæœ¬è´¨åœ°ç®€ä»‹ä¸€ä¸‹æ ‘çŠ¶æ•°ç»„ï¼Ÿ\nåŸºç¡€æ ‘çŠ¶æ•°ç»„ æ ‘çŠ¶æ•°ç»„ï¼Œè‹±æ–‡å BIT(Binary Indexed Tree)ï¼ˆä¸æ˜¯TreeArrayï¼‰ã€‚\nåŸç†çš„è¯..çœ‹å›¾å¤§çº¦æ˜¯ä¸€ç›®äº†ç„¶çš„ï¼š\nå…¶ä¸­ï¼Œé»‘è‰²çš„çŸ©å½¢ï¼ˆåŒ…æ‹¬çº¢è‰²çš„æ­£æ–¹å½¢ï¼‰ä»£è¡¨è¿™ä¸€éƒ¨åˆ†çš„å’Œï¼Œè€Œçº¢è‰²çš„æ­£æ–¹å½¢ä»£è¡¨è¿™éƒ¨åˆ†å’Œåœ¨æ ‘çŠ¶æ•°ç»„ä¸­çš„ä¸‹æ ‡ã€‚å¦‚æœæŠŠè¿™äº›åŒºé—´è¿è¾¹ï¼Œå°±åƒæ˜¯ä¸€æ£µäºŒå‰æ ‘ï¼Œæ‰€ä»¥å«æ ‘çŠ¶æ•°ç»„ã€‚\nä¸¾å‡ ä¸ªæ —å­ï¼Œ$BIT[3]$ è¡¨ç¤º $A[3]$ï¼Œ$BIT[6]$ è¡¨ç¤º $A[5]+A[6]$ï¼Œ$BIT[12]$ è¡¨ç¤º $A[9]+A[10]+A[11]+A[12]$ã€‚\næˆ‘ä»¬æŠŠæ¯ä¸ªä¸‹æ ‡ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œå¯ä»¥å‘ç°ï¼ŒäºŒè¿›åˆ¶è¡¨ç¤ºçš„æœ«å°¾æœ‰ $kâ€‹$ ä¸ª $0â€‹$ï¼Œåœ¨æ ‘çŠ¶æ•°ç»„é‡Œå®ƒå°±ä»£è¡¨ä¸€æ®µé•¿ä¸º $2^kâ€‹$ çš„åŒºé—´çš„å’Œã€‚ç”±äºæ ‘çŠ¶æ•°ç»„å’Œä¸‹æ ‡çš„äºŒè¿›åˆ¶è”ç³»ç´§å¯†ï¼Œæ‰€ä»¥è‹±æ–‡å« Binary Indexed Treeã€‚\nå¯ä»¥å®šä¹‰ $lowbit(x)$ ä¸º $x$ çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­æœ€ä½ä½çš„ $1$ è¡¨ç¤ºçš„æ•°ã€‚å¦‚ $lowbit(101_{(2)})=1$ï¼Œ$lowbit(110100_{(2)}=4)$ï¼Œè¿™æ ·çš„è¯ï¼Œæ ‘çŠ¶æ•°ç»„ä¸­ä¸‹æ ‡ä¸º $x$ çš„å…ƒç´ å°±è¡¨ç¤ºäº†ä¸€æ®µé•¿ä¸º $lowbit(x)$ çš„åŒºé—´çš„å’Œã€‚\nç”±äºè®¡ç®—æœºä¸­å­˜å‚¨å¸¦ç¬¦å·æ•´æ•°çš„æ–¹å¼ï¼Œ$lowbit(x)=$x\u0026amp;-xï¼Œå…·ä½“åŸå› å¯ä»¥è‡ªè¡Œæœç´¢â€œè¡¥ç â€ã€‚\nè€ƒè™‘å¦‚ä½•æ›´æ–°æ ‘çŠ¶æ•°ç»„ï¼šå¦‚æœæˆ‘ä»¬è¦æ›´æ–°ç¬¬ $p$ ä½ï¼Œå…ˆæ›´æ–° $BIT[p]$ï¼Œå†æ›´æ–° $BIT[p+lowbit(p)]$ï¼Œå†æ›´æ–° $BIT[p+lowbit(p)+lowbit(p+lowbit(p))]$â€¦â€¦ä¸€ç›´æ›´æ–°åˆ°åŸæ•°åˆ—çš„é•¿åº¦ã€‚\nè€ƒè™‘å¦‚ä½•æŸ¥è¯¢æŸä¸ªå‰ç¼€å’Œï¼šå¦‚æœæˆ‘ä»¬è¦æŸ¥è¯¢å‰ $p$ ä½çš„å‰ç¼€å’Œï¼Œç»“æœå°±æ˜¯ $BIT[p]+BIT[p-lowbit(p)]+BIT[p-lowbit(p)-lowbit(p-lowbit(p))]$â€¦â€¦ä¸€ç›´æŸ¥è¯¢åˆ° $lowbit$ ä¸º $1$ çš„èŠ‚ç‚¹ã€‚\næŠŠæ ‘çŠ¶æ•°ç»„çœ‹æˆäºŒå‰æ ‘ï¼Œæ·±åº¦ä¸è¶…è¿‡ $\\log(n)$ï¼Œæ‰€ä»¥å•æ¬¡æ“ä½œå¤æ‚åº¦æ˜¯ $\\mathcal O(\\log n)$ã€‚\nå¤§æ¦‚å°±æ˜¯è¿™æ ·ï¼Œä»£ç æ¯”è¾ƒç®€çŸ­ï¼š\nvoid add(int p,int x) { for (;p\u0026lt;=n;p+=(p\u0026amp;-p)) BIT[p]+=x; } int query(int p) { int out=0; for (;p;p-=(p\u0026amp;-p)) out+=BIT[p]; return out; }  ç¨è¿›é˜¶ä¸€ç‚¹ç‚¹çš„æ ‘çŠ¶æ•°ç»„ ç”±äºæœ¬ç¯‡æ•™ç¨‹æ˜¯â€œä»èƒŒæ¨¡æ¿åˆ°æ ‘å¥—æ ‘â€è€Œä¸æ˜¯â€œæ‘†è„±çº¿æ®µæ ‘ä¸å¹³è¡¡æ ‘â€ï¼Œæ‰€ä»¥ä¸ä¼šæåŠé‚£æ–¹é¢çš„é«˜çº§ç”¨æ³•ã€‚\nç»´æŠ¤å‰ç¼€ç§¯ æŠŠ+æ”¹æˆ*ã€‚\nç»´æŠ¤å‰ç¼€å¼‚æˆ–å’Œ æŠŠ+æ”¹æˆ^ã€‚\nç»´æŠ¤å‰ç¼€çŸ©é˜µç§¯ æŠŠ+æ”¹æˆçŸ©é˜µä¹˜æ³•ã€‚\nè¯¶ï¼Œç­‰ç­‰ï¼Œæ€ä¹ˆå…¨WAäº†ï¼Ÿ\nå› ä¸ºçŸ©é˜µä¹˜æ³•ä¸å…·æœ‰äº¤æ¢å¾‹..\næ¯”å¦‚è¯´ï¼Œä¸¤ä¸ªçŸ©é˜µ $A$ å’Œ $B$ï¼Œæ ‘çŠ¶æ•°ç»„é‡Œå­˜çš„æ˜¯ $A$ å’Œ $A\\times B$ï¼ŒæŠŠ $A$ ä¹˜ä¸Š $C$ åæ ‘çŠ¶æ•°ç»„é‡Œç¬¬äºŒé¡¹æˆ‘ä»¬æœŸæœ›å®ƒæ˜¯ $A\\times C\\times B$ï¼Œè€Œå®é™…ä¸Šå®ƒæ˜¯ $A\\times B\\times C$..\næ‰€ä»¥æ ‘çŠ¶æ•°ç»„åˆ°åº•åœ¨ç»´æŠ¤ä»€ä¹ˆï¼Ÿ  è­¦å‘Šï¼šæœ¬äººå…¶å®æ²¡æ€ä¹ˆå­¦è¿‡ç¾¤è®º..ä¸‹æ–‡ç¾¤è®ºç›¸å…³å¯èƒ½æœ‰å£èƒ¡æˆåˆ†ã€‚\n åœ¨ç»´æŠ¤ä¸€ä¸ªé˜¿è´å°”ç¾¤..\nç­‰ç­‰ï¼Œç¾¤æ˜¯ä»€ä¹ˆï¼Ÿç¾¤å·å¤šå°‘ï¼Ÿ\n..å°±æ˜¯ä¸€å †å…ƒç´ ï¼Œå®šä¹‰äº†ä¸€ç§è¿ç®—ï¼Œå®ƒæ»¡è¶³ç»“åˆå¾‹ã€äº¤æ¢å¾‹ï¼Œæœ‰å•ä½å…ƒï¼ˆè°å’Œå®ƒè¿ç®—éƒ½å¾—åˆ°æœ¬èº«ï¼‰ã€é€†å…ƒï¼ˆæ¯ä¸ªå…ƒç´ éƒ½å­˜åœ¨ä¸€ä¸ªå…ƒç´ è¿ç®—åå¾—åˆ°å•ä½å…ƒï¼‰ã€‚å¦‚æœåªæ˜¯å‰ç¼€ä¿¡æ¯æŒ‰ç†æ¥è¯´æ˜¯ä¸éœ€è¦é€†å…ƒçš„..ç„¶è€Œä¸€èˆ¬éƒ½æ˜¯è¦ç»´æŠ¤åŒºé—´ä¿¡æ¯ï¼Œè€Œä¸åªæ˜¯å‰ç¼€ä¿¡æ¯ï¼Œæ‰€ä»¥éœ€è¦é€†å…ƒ..\næ ‘çŠ¶æ•°ç»„å¥—åŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘ ç®€ä»‹ ç»ˆäºåˆ°æ­£é¢˜äº†ã€‚\næˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªé˜¿è´å°”ç¾¤ï¼š\nå®ƒçš„å…ƒç´ æ˜¯ä¸€äº›åŒæ„çš„åŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘ï¼Œè¿ç®—æ˜¯æŠŠå¯¹åº”èŠ‚ç‚¹çš„ä¿¡æ¯ç›¸åŠ ï¼Œè¦æ±‚èŠ‚ç‚¹ç»´æŠ¤çš„ä¿¡æ¯æ˜¯é˜¿è´å°”ç¾¤ã€‚\nä¸€èˆ¬æ¥è¯´ï¼Œä¸»å¸­æ ‘å¯ä»¥è§£å†³çš„é™æ€é—®é¢˜å¸¦ä¿®å°±è¦ç”¨æ ‘å¥—æ ‘äº†..\nä¿®æ”¹å°±æ˜¯æŠŠæ ‘çŠ¶æ•°ç»„é‡Œçš„+æ¢æˆåŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘çš„ä¿®æ”¹æ“ä½œï¼Œè¯¢é—®å°±æ˜¯æŠŠ+æ¢æˆmergeã€‚ç›´æ¥ merge å¤æ‚åº¦å¥½åƒä¸å¤ªå¯¹..ï¼ˆå…¶å®æˆ‘ä¸å¤ªä¼šè¯çº¿æ®µæ ‘åˆå¹¶å¤æ‚åº¦..ï¼‰æ‰€ä»¥å¯ä»¥å¼€ä¸ªæ•°ç»„ï¼ŒæŠŠéœ€è¦è¯¢é—®çš„èŠ‚ç‚¹å­˜ä¸‹æ¥ï¼Œç„¶ååœ¨è¯¢é—®å‡½æ•°é‡Œåˆå¹¶ä¿¡æ¯ã€‚å¦‚æœæ˜¯è¯¢é—®åŒºé—´ï¼Œå°±æŠŠä¸¤ä¸ªç«¯ç‚¹åœ¨æ ‘çŠ¶æ•°ç»„é‡Œå¯¹åº”çš„èŠ‚ç‚¹å­˜ä¸‹æ¥ã€‚\nä¾‹é¢˜ Dynamic Rankings ä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; int read() { int out=0; char c; while (!isdigit(c=getchar())); for (;isdigit(c);c=getchar()) out=out*10+c-'0'; return out; } const int N=100001; struct Node { int val,ls,rs; } t[N\u0026lt;\u0026lt;9]; int modify(int x,int l,int r,int p,int type); int merge(int x,int y); int query(int l,int r,int k); void change(int p,int x,int y); int n,m,tot,a[N],BIT[N],lsh[N\u0026lt;\u0026lt;1],cnt,tp[N],l[N],r[N],xx[N],totx,toty,x[N],y[N]; char op[10]; int main() { int i,j; n=read(); m=read(); for (i=1;i\u0026lt;=n;++i) lsh[++cnt]=a[i]=read(); for (i=1;i\u0026lt;=m;++i) { scanf(\u0026quot;%s\u0026quot;,op); if (op[0]=='Q') { tp[i]=0; l[i]=read(); r[i]=read(); xx[i]=read(); } else { tp[i]=1; l[i]=read(); lsh[++cnt]=xx[i]=read(); } } sort(lsh+1,lsh+cnt+1); cnt=unique(lsh+1,lsh+cnt+1)-lsh; for (i=1;i\u0026lt;=n;++i) { a[i]=lower_bound(lsh+1,lsh+cnt,a[i])-lsh; change(i,a[i],1); } for (i=1;i\u0026lt;=m;++i) { if (tp[i]) { change(l[i],a[l[i]],-1); change(l[i],a[l[i]]=xx[i]=lower_bound(lsh+1,lsh+cnt,xx[i])-lsh,1); } else { totx=toty=0; for (j=l[i]-1;j;j-=(j\u0026amp;-j)) x[++totx]=BIT[j]; for (j=r[i];j;j-=(j\u0026amp;-j)) y[++toty]=BIT[j]; printf(\u0026quot;%d\\n\u0026quot;,query(1,cnt,xx[i])); } } return 0; } void change(int p,int x,int y) { for (;p\u0026lt;=n;p+=(p\u0026amp;-p)) BIT[p]=modify(BIT[p],1,cnt,x,y); } int modify(int x,int l,int r,int p,int type) { int u=++tot; t[u]=t[x]; t[u].val+=type; if (l==r-1) return u; int mid=l+r\u0026gt;\u0026gt;1; if (p\u0026lt;mid) t[u].ls=modify(t[u].ls,l,mid,p,type); else t[u].rs=modify(t[u].rs,mid,r,p,type); return u; } int query(int l,int r,int k) { if (l==r-1) return lsh[l]; int i,sum=0; for (i=1;i\u0026lt;=totx;++i) sum-=t[t[x[i]].ls].val; for (i=1;i\u0026lt;=toty;++i) sum+=t[t[y[i]].ls].val; if (sum\u0026gt;=k) { for (i=1;i\u0026lt;=totx;++i) x[i]=t[x[i]].ls; for (i=1;i\u0026lt;=toty;++i) y[i]=t[y[i]].ls; return query(l,l+r\u0026gt;\u0026gt;1,k); } else { for (i=1;i\u0026lt;=totx;++i) x[i]=t[x[i]].rs; for (i=1;i\u0026lt;=toty;++i) y[i]=t[y[i]].rs; return query(l+r\u0026gt;\u0026gt;1,r,k-sum); } }   ã€æ¨¡æ¿ã€‘äºŒé€¼å¹³è¡¡æ ‘ï¼ˆæ ‘å¥—æ ‘ï¼‰ ä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N=50010; const int INF=0x7fffffff; int read() { int out=0; char c; while (!isdigit(c=getchar())); for (;isdigit(c);c=getchar()) out=out*10+c-'0'; return out; } struct Node { int val,ls,rs; } t[N\u0026lt;\u0026lt;8]; int insert(int x,int l,int r,int p,int type); int qsum(int l,int r,int L,int R,int d); int kth(int l,int r,int k); void modify(int p,int x,int y); int n,m,tot,a[N],BIT[N],lsh[N\u0026lt;\u0026lt;1],cnt,op[N],l[N],r[N],k[N],totx,toty,X[20][N],Y[20][N]; int main() { int i,p; n=read(); m=read(); for (i=1;i\u0026lt;=n;++i) a[i]=lsh[++cnt]=read(); for (i=1;i\u0026lt;=m;++i) { op[i]=read(); if (op[i]==3) { l[i]=read(); k[i]=lsh[++cnt]=read(); } else { l[i]=read(); r[i]=read(); k[i]=read(); if (op[i]!=2) lsh[++cnt]=k[i]; } } sort(lsh+1,lsh+cnt+1); cnt=unique(lsh+1,lsh+cnt+1)-lsh; for (i=1;i\u0026lt;=n;++i) { a[i]=lower_bound(lsh+1,lsh+cnt,a[i])-lsh; modify(i,a[i],1); } for (i=1;i\u0026lt;=m;++i) { if (op[i]==3) { k[i]=lower_bound(lsh+1,lsh+cnt,k[i])-lsh; modify(l[i],a[l[i]],-1); modify(l[i],a[l[i]]=k[i],1); } else { totx=toty=0; for (p=l[i]-1;p;p-=(p\u0026amp;-p)) X[0][++totx]=BIT[p]; for (p=r[i];p;p-=(p\u0026amp;-p)) Y[0][++toty]=BIT[p]; if (op[i]==2) printf(\u0026quot;%d\\n\u0026quot;,kth(1,cnt,k[i])); else { k[i]=lower_bound(lsh+1,lsh+cnt,k[i])-lsh; if (op[i]==1) printf(\u0026quot;%d\\n\u0026quot;,qsum(1,cnt,1,k[i],0)+1); else if (op[i]==4) { int rk=qsum(1,cnt,1,k[i],0); if (rk) printf(\u0026quot;%d\\n\u0026quot;,kth(1,cnt,rk)); else printf(\u0026quot;%d\\n\u0026quot;,-INF); } else { int rk=qsum(1,cnt,1,k[i]+1,0); if (rk\u0026lt;=r[i]-l[i]) printf(\u0026quot;%d\\n\u0026quot;,kth(1,cnt,rk+1)); else printf(\u0026quot;%d\\n\u0026quot;,INF); } } } } return 0; } void modify(int p,int x,int y) { for (;p\u0026lt;=n;p+=(p\u0026amp;-p)) BIT[p]=insert(BIT[p],1,cnt,x,y); } int insert(int x,int l,int r,int p,int type) { int u=++tot; t[u]=t[x]; t[u].val+=type; if (l==r-1) return u; int mid=l+r\u0026gt;\u0026gt;1; if (p\u0026lt;mid) t[u].ls=insert(t[u].ls,l,mid,p,type); else t[u].rs=insert(t[u].rs,mid,r,p,type); return u; } int qsum(int l,int r,int L,int R,int d) { if (l\u0026gt;=R||r\u0026lt;=L) return 0; int i,sum=0; if (L\u0026lt;=l\u0026amp;\u0026amp;R\u0026gt;=r) { for (i=1;i\u0026lt;=totx;++i) sum-=t[X[d][i]].val; for (i=1;i\u0026lt;=toty;++i) sum+=t[Y[d][i]].val; return sum; } for (i=1;i\u0026lt;=totx;++i) X[d+1][i]=t[X[d][i]].ls; for (i=1;i\u0026lt;=toty;++i) Y[d+1][i]=t[Y[d][i]].ls; sum=qsum(l,l+r\u0026gt;\u0026gt;1,L,R,d+1); for (i=1;i\u0026lt;=totx;++i) X[d+1][i]=t[X[d][i]].rs; for (i=1;i\u0026lt;=toty;++i) Y[d+1][i]=t[Y[d][i]].rs; return sum+qsum(l+r\u0026gt;\u0026gt;1,r,L,R,d+1); } int kth(int l,int r,int k) { if (l==r-1) return lsh[l]; int i,sum=0; for (i=1;i\u0026lt;=totx;++i) sum-=t[t[X[0][i]].ls].val; for (i=1;i\u0026lt;=toty;++i) sum+=t[t[Y[0][i]].ls].val; if (sum\u0026gt;=k) { for (i=1;i\u0026lt;=totx;++i) X[0][i]=t[X[0][i]].ls; for (i=1;i\u0026lt;=toty;++i) Y[0][i]=t[Y[0][i]].ls; return kth(l,l+r\u0026gt;\u0026gt;1,k); } for (i=1;i\u0026lt;=totx;++i) X[0][i]=t[X[0][i]].rs; for (i=1;i\u0026lt;=toty;++i) Y[0][i]=t[Y[0][i]].rs; return kth(l+r\u0026gt;\u0026gt;1,r,k-sum); }   [CQOI2011]åŠ¨æ€é€†åºå¯¹ è¿™é¢˜ç”¨æ ‘å¥—æ ‘åšæœ‰ç‚¹å¡ç©ºé—´..éœ€è¦æŠŠå¸¦è¿”å›å€¼çš„åŠ¨æ€å¼€ç‚¹æ”¹æˆç›´æ¥ä¿®æ”¹ã€‚\nä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;cstring\u0026gt; using namespace std; int read() { int out=0; char c; while (!isdigit(c=getchar())); for (;isdigit(c);c=getchar()) out=out*10+c-'0'; return out; } const int N=100010; struct Node { int val,ls,rs; } t[N*90]; void change(int\u0026amp; u,int l,int r,int p); int query(int l,int r,int L,int R,int d); int n,m,a[N],p[N],del[N],BIT[N],x[20][20],y[20][20],xtot,ytot,tot; bool deleted[N]; long long ans,out[N]; int main() { int i,j; n=read(); m=read(); for (i=1;i\u0026lt;=n;++i) { a[i]=read(); p[a[i]]=i; } for (i=1;i\u0026lt;=m;++i) { del[i]=p[read()]; deleted[del[i]]=true; } for (i=n;i\u0026gt;=1;--i) { if (!deleted[i]) { for (j=a[i];j;j-=(j\u0026amp;-j)) ans+=BIT[j]; for (j=a[i];j\u0026lt;=n;j+=(j\u0026amp;-j)) ++BIT[j]; } } memset(BIT,0,sizeof(BIT)); for (i=1;i\u0026lt;=n;++i) { if (!deleted[i]) { for (j=i;j\u0026lt;=n;j+=(j\u0026amp;-j)) { change(BIT[j],1,n+1,a[i]); } } } for (i=m;i\u0026gt;=1;--i) { xtot=ytot=0; for (j=del[i];j;j-=(j\u0026amp;-j)) y[0][++ytot]=BIT[j]; ans+=query(1,n+1,a[del[i]]+1,n+1,0); xtot=ytot=0; for (j=del[i];j;j-=(j\u0026amp;-j)) x[0][++xtot]=BIT[j]; for (j=n;j;j-=(j\u0026amp;-j)) y[0][++ytot]=BIT[j]; ans+=query(1,n+1,1,a[del[i]],0); for (j=del[i];j\u0026lt;=n;j+=(j\u0026amp;-j)) change(BIT[j],1,n+1,a[del[i]]); out[i]=ans; } for (i=1;i\u0026lt;=m;++i) printf(\u0026quot;%lld\\n\u0026quot;,out[i]); return 0; } void change(int\u0026amp; u,int l,int r,int p) { if (!u) u=++tot; ++t[u].val; if (l==r-1) return; int mid=l+r\u0026gt;\u0026gt;1; if (p\u0026lt;mid) change(t[u].ls,l,mid,p); else change(t[u].rs,mid,r,p); } int query(int l,int r,int L,int R,int d) { if (l\u0026gt;=R||r\u0026lt;=L) return 0; int i,ret=0,mid=l+r\u0026gt;\u0026gt;1; if (L\u0026lt;=l\u0026amp;\u0026amp;R\u0026gt;=r) { for (i=1;i\u0026lt;=xtot;++i) ret-=t[x[d][i]].val; for (i=1;i\u0026lt;=ytot;++i) ret+=t[y[d][i]].val; return ret; } for (i=1;i\u0026lt;=xtot;++i) x[d+1][i]=t[x[d][i]].ls; for (i=1;i\u0026lt;=ytot;++i) y[d+1][i]=t[y[d][i]].ls; ret+=query(l,mid,L,R,d+1); for (i=1;i\u0026lt;=xtot;++i) x[d+1][i]=t[x[d][i]].rs; for (i=1;i\u0026lt;=ytot;++i) y[d+1][i]=t[y[d][i]].rs; ret+=query(mid,r,L,R,d+1); return ret; }  ","date":"2019-03-26T21:38:45+08:00","permalink":"https://ouuan.github.io/post/%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84%E4%BB%8E%E8%83%8C%E6%A8%A1%E6%9D%BF%E5%88%B0%E6%A0%91%E5%A5%97%E6%A0%91/","tags":["æ•°æ®ç»“æ„","æ ‘çŠ¶æ•°ç»„","æ ‘å¥—æ ‘"],"title":"æ ‘çŠ¶æ•°ç»„â€”â€”ä»èƒŒæ¨¡æ¿åˆ°æ ‘å¥—æ ‘"},{"categories":["çŸ¥è¯†ç‚¹"],"contents":"cdqåˆ†æ²»ä¹Ÿæ˜¯å’•äº†å¥½ä¹…äº†..æœ€è¿‘æ€»ç®—æŠŠå®ƒå­¦äº†ã€‚\ncdqåˆ†æ²»æ˜¯ä¸€ç§ç¦»çº¿ç®—æ³•ï¼Œå¯ä»¥ä»£æ›¿ä¸€äº›å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œé™ä½ä»£ç éš¾åº¦ï¼Œå‡å°å¸¸æ•°ã€‚åºŸè¯å¤§å®¶éƒ½çŸ¥é“ã€‚\næœ¬æ–‡æœªå®Œå¾…ç»­ï¼ˆcdqåˆ†æ²»çš„å…¶å®ƒåº”ç”¨ï¼Œå¦‚ç»´æŠ¤å‡¸å£³ï¼Œå¾…å¡«å‘ï¼‰ã€‚\nç®€ä»‹ æ„Ÿè§‰cdqåˆ†æ²»ä¸å¦‚å«â€œexå½’å¹¶æ’åºâ€ï¼Œå°±æ˜¯ä»¥æ“ä½œçš„æ—¶é—´ä½œä¸ºåˆå§‹é¡ºåºï¼Œåœ¨é€’å½’å¤„ç†çš„è¿‡ç¨‹ä¸­æŒ‰ä½ç½®å½’å¹¶æ’åºã€‚\næ›´ä¸€èˆ¬åœ°è¯´ï¼Œå¯¹äºä¸€ä¸ªäºŒç»´ååº $P(i,j)=P_1(a_i,a_j)\\land P_2(b_i,b_j)â€‹$ï¼Œä½ç½® $iâ€‹$ çš„ä¿®æ”¹å¯¹ä½ç½® $jâ€‹$ çš„è¯¢é—®ï¼ˆè¯¢é—®ä¸ºç±»å‰ç¼€å’Œå½¢å¼ï¼ŒåŒºé—´è¯¢é—®éœ€æ‹†æˆä¸¤ä¸ªå‰ç¼€è¯¢é—®ï¼‰æœ‰å½±å“å½“ä¸”ä»…å½“ $P(i,j)=trueâ€‹$ï¼Œcdqåˆ†æ²»å°±æ˜¯ä»¥å…¶ä¸­ä¸€ç»´ä¸ºåˆå§‹é¡ºåºï¼Œå¯¹å¦ä¸€ç»´è¿›è¡Œå½’å¹¶æ’åºçš„è¿‡ç¨‹ä¸­è®¡ç®—å·¦åŒºé—´é‡Œä¿®æ”¹çš„æ€»å’Œï¼Œå°†å·¦åŒºé—´ä¿®æ”¹çš„å½±å“åº”ç”¨åˆ°å³åŒºé—´ã€‚\nå­¦ä¼šäº†ä¹‹åå°±ä¼šå‘ç°ï¼Œcdqåˆ†æ²»çš„ç¡®å°±æ˜¯è¿™æ ·ï¼Œå·²ç»æè¿°çš„å¾ˆæ¸…æ¥šäº†ï¼Œç„¶è€Œåœ¨æ²¡å­¦ä¼šçš„æ—¶å€™ä¼°è®¡æ˜¯çœ‹ä¸æ‡‚ä¸Šé¢è¿™æ®µè¯çš„..æ‰€ä»¥ç»“åˆå…·ä½“é¢˜ç›®æ¥çœ‹ä¸€çœ‹å§ã€‚\nä¾‹é¢˜ ã€æ¨¡æ¿ã€‘æ ‘çŠ¶æ•°ç»„ 1 æ ‘çŠ¶æ•°ç»„è£¸é¢˜ï¼å†·é™ï¼Œæˆ‘ä»¬æ¥ç”¨exå½’å¹¶æ’åºåš..ï¼ˆå—¯ï¼Œæˆ‘å†³å®šå°±è¿™ä¹ˆå«å®ƒäº†ï¼‰\næŒ‰ç…§æˆ‘ä»¬ä¸Šé¢è¯´çš„ï¼Œæˆ‘ä»¬æŠŠæ“ä½œå­˜ä¸‹æ¥ï¼Œè¯¢é—®æ‹†æˆä¸¤ä¸ªå‰ç¼€å’Œç›¸å‡ï¼Œåˆå§‹å€¼è§†ä½œä¿®æ”¹ï¼Œéœ€è¦å­˜çš„ä¿¡æ¯æœ‰æ“ä½œçš„ç§ç±»ï¼ˆä¿®æ”¹ã€è¯¢é—®çš„å·¦ç«¯ç‚¹å‡ä¸€ã€è¯¢é—®çš„å³ç«¯ç‚¹ï¼‰ï¼Œæ“ä½œçš„ä½ç½®ï¼ˆ$p$ã€$l-1$ã€$r$ï¼‰ä»¥åŠä¿®æ”¹åŠ ä¸Šçš„å€¼/è¯¢é—®çš„ç¼–å·ã€‚å¦‚æœå†™æ³•æ­£å¸¸çš„è¯ä½ å·²ç»ä»¥æ“ä½œçš„æ—¶é—´ä½œä¸ºåˆå§‹é¡ºåºäº†..\nç„¶åï¼Œå†™ä¸ªå½’å¹¶æ’åºï¼ŒæŒ‰æ“ä½œçš„ä½ç½®æ’åºï¼ŒåŒä¸€ä¸ªä½ç½®çš„ä¿®æ”¹è¦æ”¾åœ¨è¯¢é—®çš„å‰é¢ã€‚ç„¶åï¼Œåœ¨å½’å¹¶æ’åºçš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°å·¦åŒºé—´é‡Œçš„ä¿®æ”¹å°±æ›´æ–°å·¦åŒºé—´ä¿®æ”¹çš„æ€»å’Œï¼Œé‡åˆ°å³åŒºé—´é‡Œçš„è¯¢é—®å°±ç”¨è®°å½•çš„â€œå·¦åŒºé—´ä¿®æ”¹çš„æ€»å’Œâ€æ›´æ–°è¿™ä¸ªè¯¢é—®çš„ç­”æ¡ˆã€‚\nå…·ä½“è§ä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; using namespace std; typedef long long ll; const int N=500010; struct Node { int type,p,val; //typeä¸º2è¡¨ç¤ºä¿®æ”¹ï¼Œtypeä¸º-1è¡¨ç¤ºå·¦ç«¯ç‚¹å‡ä¸€ï¼Œtypeä¸º1è¡¨ç¤ºå³ç«¯ç‚¹ bool operator\u0026lt;(const Node\u0026amp; b) const { return p==b.p?type\u0026gt;b.type:p\u0026lt;b.p; } } q[N\u0026lt;\u0026lt;2],tmp[N\u0026lt;\u0026lt;2]; void solve(int l,int r); int n,m,tot,qtot; ll ans[N]; int main() { int i,op,x,y; scanf(\u0026quot;%d%d\u0026quot;,\u0026amp;n,\u0026amp;m); for (i=1;i\u0026lt;=n;++i) //åˆå§‹å€¼è§†ä½œä¿®æ”¹ { scanf(\u0026quot;%d\u0026quot;,\u0026amp;x); q[++tot].type=2; q[tot].p=i; q[tot].val=x; } for (i=1;i\u0026lt;=m;++i) { scanf(\u0026quot;%d%d%d\u0026quot;,\u0026amp;op,\u0026amp;x,\u0026amp;y); if (op==1) { q[++tot].type=2; q[tot].p=x; q[tot].val=y; } else //è¯¢é—®æ‹†æˆä¸¤ä¸ªå‰ç¼€å’Œç›¸å‡ { q[++tot].type=-1; q[tot].p=x-1; q[tot].val=++qtot; q[++tot].type=1; q[tot].p=y; q[tot].val=qtot; } } solve(1,tot+1); for (i=1;i\u0026lt;=qtot;++i) printf(\u0026quot;%lld\\n\u0026quot;,ans[i]); return 0; } void solve(int l,int r) { if (l==r-1) return; int i,j,k,mid; ll sum=0; i=k=l; j=mid=(l+r)\u0026gt;\u0026gt;1; solve(l,mid); solve(mid,r); while (i\u0026lt;mid\u0026amp;\u0026amp;j\u0026lt;r) { if (q[i]\u0026lt;q[j]) { if (q[i].type==2) sum+=q[i].val; //è®°å½•å·¦åŒºé—´é‡Œçš„ä¿®æ”¹ä¹‹å’Œ tmp[k++]=q[i++]; } else { if (q[j].type!=2) ans[q[j].val]+=q[j].type*sum; //å°†å·¦åŒºé—´é‡Œçš„ä¿®æ”¹åº”ç”¨åˆ°å³åŒºé—´é‡Œçš„è¯¢é—® tmp[k++]=q[j++]; } } while (i\u0026lt;mid) tmp[k++]=q[i++]; while (j\u0026lt;r) { if (q[j].type!=2) ans[q[j].val]+=q[j].type*sum; tmp[k++]=q[j++]; } for (i=l;i\u0026lt;r;++i) q[i]=tmp[i]; }   ä¹‹å‰è¯´è¿‡exå½’å¹¶æ’åºæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªäºŒç»´ååºé™åˆ¶äº†ä¿®æ”¹å¯¹è¯¢é—®çš„å½±å“ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥å…ˆæŒ‰ä½ç½®æ’åºå†æŒ‰æ—¶é—´æ’åºã€‚åªä¸è¿‡..è¿™æ ·å†™å¾ˆå¥‡æ€ªï¼Œå¾ˆéº»çƒ¦ï¼Œå¸¸æ•°åˆå¤§ã€‚ç„¶è€Œä¸ºäº†ç†è§£exå½’å¹¶æ’åºçš„æœ¬è´¨ï¼Œæˆ‘è¿˜æ˜¯å†™äº†ä»½è¿™ä¸ªåšæ³•..\nä¸€ç§å¥‡æ€ªçš„å†™æ³• #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef long long ll; const int N=500010; struct Node { int type,tim,p,val; Node(int _type=0,int _tim=0,int _p=0,int _val=0):type(_type),tim(_tim),p(_p),val(_val){} } q[N\u0026lt;\u0026lt;2],tmp[N\u0026lt;\u0026lt;2]; void solve(int l,int r); int n,m,tot,qtot; ll ans[N]; int main() { int i,j,op,x,y; scanf(\u0026quot;%d%d\u0026quot;,\u0026amp;n,\u0026amp;m); for (i=1;i\u0026lt;=n;++i) { scanf(\u0026quot;%d\u0026quot;,\u0026amp;x); q[++tot]=Node(2,0,i,x); } for (i=1;i\u0026lt;=m;++i) { scanf(\u0026quot;%d%d%d\u0026quot;,\u0026amp;op,\u0026amp;x,\u0026amp;y); if (op==1) q[++tot]=Node(2,i,x,y); else { q[++tot]=Node(-1,i,x-1,++qtot); q[++tot]=Node(1,i,y,qtot); } } sort(q+1,q+tot+1,[](const Node\u0026amp; x,const Node\u0026amp; y){return x.p==y.p?x.type\u0026gt;y.type:x.p\u0026lt;y.p;}); solve(1,tot+1); for (i=1;i\u0026lt;=qtot;++i) printf(\u0026quot;%lld\\n\u0026quot;,ans[i]); return 0; } void solve(int l,int r) { if (l==r-1) return; int i,j,k,mid; ll sum=0; i=k=l; j=mid=(l+r)\u0026gt;\u0026gt;1; solve(l,mid); solve(mid,r); while (i\u0026lt;mid\u0026amp;\u0026amp;j\u0026lt;r) { if (q[i].tim\u0026lt;q[j].tim) { if (q[i].type==2) sum+=q[i].val; tmp[k++]=q[i++]; } else { if (q[j].type!=2) ans[q[j].val]+=q[j].type*sum; tmp[k++]=q[j++]; } } while (i\u0026lt;mid) tmp[k++]=q[i++]; while (j\u0026lt;r) { if (q[j].type!=2) ans[q[j].val]+=q[j].type*sum; tmp[k++]=q[j++]; } for (i=l;i\u0026lt;r;++i) q[i]=tmp[i]; }   ã€æ¨¡æ¿ã€‘ä¸‰ç»´ååºï¼ˆé™Œä¸ŠèŠ±å¼€ï¼‰ æœ‰ä¸¤ç§åšæ³•ï¼Œä¸€ç§æ˜¯cdqåˆ†æ²»å¥—æ ‘çŠ¶æ•°ç»„ï¼Œéœ€è¦æ³¨æ„çš„æœ‰ä¸¤ç‚¹ï¼Œä¸€æ˜¯æ¸…ç©ºæ ‘çŠ¶æ•°ç»„å¯ä»¥ç”¨æ—¶é—´æˆ³ï¼ŒäºŒæ˜¯ $a$, $b$, $c$ éƒ½ç›¸ç­‰çš„å…ƒç´ è¦åˆå¹¶ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N=100010; const int K=200010; struct Node { int a,b,c,w,f; } a[N],b[N]; void solve(int l,int r); void add(int p,int x); int query(int p); int n,k,d[N],BIT[K],vis[K],tim,tot; int main() { int i; scanf(\u0026quot;%d%d\u0026quot;,\u0026amp;n,\u0026amp;k); for (i=1;i\u0026lt;=n;++i) { scanf(\u0026quot;%d%d%d\u0026quot;,\u0026amp;b[i].a,\u0026amp;b[i].b,\u0026amp;b[i].c); b[i].w=1; } sort(b+1,b+n+1,[](const Node\u0026amp; x,const Node\u0026amp; y){return x.a==y.a?(x.b==y.b?x.c\u0026lt;y.c:x.b\u0026lt;y.b):x.a\u0026lt;y.a;}); for (i=1;i\u0026lt;=n;++i) { if (b[i].a!=b[i+1].a||b[i].b!=b[i+1].b||b[i].c!=b[i+1].c) a[++tot]=b[i]; else b[i+1].w+=b[i].w; } solve(1,tot+1); for (i=1;i\u0026lt;=tot;++i) d[a[i].f+a[i].w]+=a[i].w; for (i=1;i\u0026lt;=n;++i) printf(\u0026quot;%d\\n\u0026quot;,d[i]); return 0; } void solve(int l,int r) { if (l==r-1) return; int i,j,k,mid; i=k=l; j=mid=(l+r)\u0026gt;\u0026gt;1; solve(l,mid); solve(mid,r); ++tim; while (i\u0026lt;mid\u0026amp;\u0026amp;j\u0026lt;r) { if (a[i].b\u0026lt;=a[j].b) { add(a[i].c,a[i].w); b[k++]=a[i++]; } else { a[j].f+=query(a[j].c); b[k++]=a[j++]; } } while (i\u0026lt;mid) b[k++]=a[i++]; while (j\u0026lt;r) { a[j].f+=query(a[j].c); b[k++]=a[j++]; } for (i=l;i\u0026lt;r;++i) a[i]=b[i]; } void add(int p,int x) { for (;p\u0026lt;=k;p+=(p\u0026amp;-p)) { if (vis[p]!=tim) { BIT[p]=0; vis[p]=tim; } BIT[p]+=x; } } int query(int p) { int out=0; for (;p;p-=(p\u0026amp;-p)) if (vis[p]==tim) out+=BIT[p]; return out; }   è¿˜æœ‰ä¸€ç§åšæ³•æ˜¯cdqåˆ†æ²»å¥—cdqåˆ†æ²»ï¼š\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N=100010; struct Node { int a,b,c,d,w,id; } a[N],b[N],c[N]; void solve(int l,int r); void solve2(int l,int r); int n,k,d[N],tot,ans[N]; int main() { int i; scanf(\u0026quot;%d%d\u0026quot;,\u0026amp;n,\u0026amp;k); for (i=1;i\u0026lt;=n;++i) { scanf(\u0026quot;%d%d%d\u0026quot;,\u0026amp;b[i].a,\u0026amp;b[i].b,\u0026amp;b[i].c); b[i].w=1; b[i].id=i; } sort(b+1,b+n+1,[](const Node\u0026amp; x,const Node\u0026amp; y){return x.a==y.a?(x.b==y.b?x.c\u0026lt;y.c:x.b\u0026lt;y.b):x.a\u0026lt;y.a;}); for (i=1;i\u0026lt;=n;++i) { if (b[i].a!=b[i+1].a||b[i].b!=b[i+1].b||b[i].c!=b[i+1].c) a[++tot]=b[i]; else b[i+1].w+=b[i].w; } solve(1,tot+1); for (i=1;i\u0026lt;=tot;++i) d[ans[a[i].id]+a[i].w]+=a[i].w; for (i=1;i\u0026lt;=n;++i) printf(\u0026quot;%d\\n\u0026quot;,d[i]); return 0; } void solve(int l,int r) { if (l==r-1) return; int i,j,k,mid; i=k=l; j=mid=(l+r)\u0026gt;\u0026gt;1; solve(l,mid); solve(mid,r); while (i\u0026lt;mid\u0026amp;\u0026amp;j\u0026lt;r) { if (a[i].b\u0026lt;=a[j].b) { a[i].d=a[i].w; b[k++]=a[i++]; } else { a[j].d=0; b[k++]=a[j++]; } } while (i\u0026lt;mid) { a[i].d=a[i].w; b[k++]=a[i++]; } while (j\u0026lt;r) { a[j].d=0; b[k++]=a[j++]; } for (i=l;i\u0026lt;r;++i) a[i]=b[i]; solve2(l,r); } void solve2(int l,int r) { if (l==r-1) return; int i,j,k,mid,sum=0; i=k=l; j=mid=(l+r)\u0026gt;\u0026gt;1; solve2(l,mid); solve2(mid,r); while (i\u0026lt;mid\u0026amp;\u0026amp;j\u0026lt;r) { if (b[i].c\u0026lt;=b[j].c) { sum+=b[i].d; c[k++]=b[i++]; } else { if (!b[j].d) ans[b[j].id]+=sum; c[k++]=b[j++]; } } while (i\u0026lt;mid) c[k++]=b[i++]; while (j\u0026lt;r) { if (!b[j].d) ans[b[j].id]+=sum; c[k++]=b[j++]; } for (i=l;i\u0026lt;r;++i) b[i]=c[i]; }   cdqåˆ†æ²»æ±‚ååºå¯¹çš„æœ¬è´¨ ï¼ˆä¸‹æ–‡ä¸­â€œååºé—®é¢˜â€å³æ±‚æ»¡è¶³ååºå…³ç³»çš„æ•°å¯¹ä¸ªæ•°ã€‚è€Œâ€é«˜ç»´ååºâ€œå®é™…ä¸Šæ˜¯å¤šä¸ªä¸¥æ ¼å¼±åºçš„å¹¶ã€‚éä¸¥æ ¼ååºä¸ä¹‹ç±»ä¼¼ï¼Œä¸»è¦æ˜¯åœ¨ä»£ç ä¸Šæœ‰äº›ç»†èŠ‚æ”¹å˜ã€‚ï¼‰\nå¤§å®¶çŸ¥é“ï¼ŒäºŒç»´ååºå¯ä»¥å…ˆæŒ‰ä¸€ç»´æ’åºåç”¨æ™®é€šçš„å½’å¹¶æ’åºè§£å†³ï¼Œé‚£ä¸ºä»€ä¹ˆâ€œä¸‰ç»´ååºâ€ä¸å¯ä»¥å‘¢ï¼Ÿ\né¦–å…ˆï¼ŒæŒ‰å…¶ä¸­ä¸€ç»´æ’åºç›¸å½“äºé™äº†ä¸€ç»´ï¼Œé—®é¢˜å°±å˜æˆäº†â€œä¸ºä»€ä¹ˆä¸€ç»´ååºå¯ä»¥ç”¨æ™®é€šçš„å½’å¹¶æ’åºè§£å†³ï¼Œè€ŒäºŒç»´ååºä¸å¯ä»¥â€ã€‚\nåŸå› å°±åœ¨äºï¼Œä¸¤ä¸ªååºå…³ç³»çš„å¹¶ï¼Œä¸ä¸€å®šå…·æœ‰ä¸å¯æ¯”æ€§çš„ä¼ é€’æ€§ã€‚ï¼ˆStrict Weak Ordering ç›¸å…³å†…å®¹å‚è§æˆ‘çš„å¦ä¸€ç¯‡åšå®¢ï¼‰\nå¯ä»¥è¯æ˜ï¼Œä¸¤ä¸ªä¸¥æ ¼å¼±åºçš„å¹¶ä¸€å®šæ˜¯ä¸€ä¸ªä¸¥æ ¼ååºï¼Œä½†ä¸ä¸€å®šæ˜¯ä¸€ä¸ªä¸¥æ ¼å¼±åºã€‚è€Œ cdq åˆ†æ²»å¯ä»¥å°†å¤šä¸ªä¸¥æ ¼å¼±åºçš„å¹¶è¿›è¡Œé™ç»´ï¼Œæ¯ä¸€æ¬¡ cdq åˆ†æ²»éƒ½æ ‡è®°å‡ºå“ªäº›ä½ç½®ä¼šå¯¹å…¶å®ƒä½ç½®æœ‰è´¡çŒ®ï¼Œå¹¶æŒ‰æŸä¸€ç»´æ’åºã€‚\nä¸Šé¢è¯´çš„æœ‰ç‚¹ä¹±..ç®€å•æ¦‚æ‹¬ä¸€ä¸‹ã€‚æ’åºå¯ä»¥é™ç»´ï¼Œåªæœ‰ä¸¥æ ¼å¼±åºèƒ½æ’åºï¼Œé«˜ç»´ååºä¸ä¸€å®šæ˜¯ä¸¥æ ¼å¼±åºï¼Œcdq åˆ†æ²»åœ¨æ’åºçš„è¿‡ç¨‹ä¸­æ ‡è®°äº†å…ƒç´ ä¹‹é—´å¦‚ä½•è´¡çŒ®ç­”æ¡ˆã€‚æ‰€ä»¥ cdq åˆ†æ²»å°±å¯ä»¥è§£å†³é«˜ç»´ååºé—®é¢˜äº†..\næ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºä¸€ä»½ cdq åˆ†æ²»æ±‚ $k$ ç»´ååºå¯¹çš„ä»£ç ï¼š\né¢˜æ„ç®€è¿°ï¼šç¬¬ä¸€è¡Œ $n$, $k$ï¼Œå $n$ è¡Œæ¯è¡Œ $k$ ä¸ªæ•° $a_{i,1..k}$ï¼Œå¯¹æ¯ä¸ª $i$ æ±‚ $\\forall d\\in[1,k],a_{i,d}\u0026lt;a_{j,d}$ çš„ $j$ ä¸ªæ•°ã€‚\nå½“ç„¶ï¼Œ$n$ è¦è¶³å¤Ÿå¤§ï¼Œå¦åˆ™ä¼šè¢«æš´åŠ›è‰¹ã€‚åªä¸è¿‡ç†è®ºä¸Šæ¥è¯´ï¼Œå¦‚æœç»´æ•°æ˜¯å¸¸æ•°ï¼Œå¤æ‚åº¦å°±æ¯”æš´åŠ›æ›´ä¼˜\u0026hellip;\néšä¾¿é€ çš„ä¸€ä¸ªæ¨¡æ¿é¢˜\nä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N=10005; const int K=15; void solve(int l,int r,int d); int n,k,ans[N]; struct Node { int w[K],type,id; bool operator\u0026lt;(const Node\u0026amp; y) const { if (w[0]!=y.w[0]) return w[0]\u0026lt;y.w[0]; for (int i=1;i\u0026lt;k;++i) if (w[i]!=y.w[i]) return w[i]\u0026gt;y.w[i]; //å¦‚æœæ˜¯éä¸¥æ ¼ååºéƒ½åº”è¯¥é¡ºç€æ’ï¼Œä¸¥æ ¼ååºé™¤äº†ç¬¬ä¸€ç»´éƒ½åº”è¯¥å€’ç€æ’ã€‚è¿™æ˜¯ç”±äºç›¸ç­‰å…ƒç´ å¯ä»¥/ä¸å¯ä»¥è½¬ç§»ã€‚ return false; } } a[K][N],tmp[N]; int main() { int i,j; scanf(\u0026quot;%d%d\u0026quot;,\u0026amp;n,\u0026amp;k); for (i=1;i\u0026lt;=n;++i) { a[0][i].id=i; for (j=0;j\u0026lt;k;++j) scanf(\u0026quot;%d\u0026quot;,a[0][i].w+j); } sort(a[0]+1,a[0]+n+1); solve(1,n+1,1); for (i=1;i\u0026lt;=n;++i) printf(\u0026quot;%d\\n\u0026quot;,ans[i]); return 0; } void solve(int l,int r,int d) { if (l==r-1) return; int i,j,p,mid,sum=0; i=p=l; j=mid=(l+r)\u0026gt;\u0026gt;1; solve(l,mid,d); solve(mid,r,d); while (i\u0026lt;mid\u0026amp;\u0026amp;j\u0026lt;r) { if (a[d-1][i].w[d]\u0026lt;a[d-1][j].w[d]) { a[d][p]=tmp[p]=a[d-1][i++]; if (d\u0026gt;1\u0026amp;\u0026amp;a[d][p].type!=1) a[d][p].type=0; else { a[d][p].type=1; if (d==k-1) ++sum; } ++p; } else { a[d][p]=tmp[p]=a[d-1][j++]; if (d\u0026gt;1\u0026amp;\u0026amp;a[d][p].type!=2) a[d][p].type=0; else { a[d][p].type=2; if (d==k-1) ans[a[d][p].id]+=sum; } ++p; } } while (i\u0026lt;mid) { a[d][p]=tmp[p]=a[d-1][i++]; if (d\u0026gt;1\u0026amp;\u0026amp;a[d][p].type!=1) a[d][p].type=0; else a[d][p].type=1; ++p; } while (j\u0026lt;r) { a[d][p]=tmp[p]=a[d-1][j++]; if (d\u0026gt;1\u0026amp;\u0026amp;a[d][p].type!=2) a[d][p].type=0; else { a[d][p].type=2; if (d==k-1) ans[a[d][p].id]+=sum; } ++p; } for (i=l;i\u0026lt;r;++i) a[d-1][i]=tmp[i]; if (d\u0026lt;k-1) solve(l,r,d+1); }  ","date":"2019-03-26T18:49:44+08:00","permalink":"https://ouuan.github.io/post/cdq%E5%88%86%E6%B2%BB%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","tags":["ç¦»çº¿ç®—æ³•","cdqåˆ†æ²»","åˆ†æ²»"],"title":"cdqåˆ†æ²»å­¦ä¹ ç¬”è®°"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\ndarkbzoj\né¢˜æ„ç®€è¿° å¸¦é€šé…ç¬¦çš„å•æ¨¡å¼ä¸²ã€å•æ–‡æœ¬ä¸²åŒ¹é…ã€‚\nå­—ç¬¦ä¸²é•¿åº¦ $3\\times10^5$ã€‚\nç®€è¦åšæ³• è¿™é¢˜æ˜¯åˆ©ç”¨å­—ç¬¦ä¸²çš„è·ç¦»å‡½æ•°æ¥åŒ¹é…å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ FFT ä¼˜åŒ–è·ç¦»å‡½æ•°çš„è®¡ç®—ã€‚\nå°†é€šé…ç¬¦çš„å€¼è®¾ä¸ºé›¶ï¼Œå®šä¹‰ $dis(s,t)=\\sum(s[i]-t[i])^2s[i]t[i]â€‹$ï¼Œé‚£ä¹ˆä¸¤ä¸ªç­‰é•¿çš„å­—ç¬¦ä¸²åŒ¹é…å½“ä¸”ä»…å½“å®ƒä»¬çš„è·ç¦»ä¸ºé›¶ã€‚\nä¸ºäº†æ–¹ä¾¿å·ç§¯ï¼Œå°†é¢˜ç›®ä¸­çš„ $A$ ä¸²ç¿»è½¬â€‹å¾—åˆ°ä¸² $A'â€‹$ã€‚\næ¨ä¸€æ³¢å¼å­ï¼š\n$$\\begin{aligned}\u0026amp;dis(A,B[i..i+m-1])\\\\=\u0026amp;\\sum\\limits_{j=0}^{m-1}(A\u0026rsquo;[m-j-1]-B[i+j])^2A\u0026rsquo;[m-j-1]B[i+j]\\\\=\u0026amp;\\left(\\sum\\limits_{j=0}^{m-1}A\u0026rsquo;[m-j-1]B^3[i+j]\\right)-2\\left(\\sum\\limits_{j=0}^{m-1}(A\u0026rsquo;)^2[m-j-1]B^2[i+j]\\right)+\\left(\\sum\\limits_{j=0}^{m-1}(A\u0026rsquo;)^3[m-j-1]B[i+j]\\right)\\end{aligned}$$\nè®¾ $f(i)=\\sum\\limits_{j=0}^{i}A\u0026rsquo;[i-j]B^3[j]â€‹$ï¼ˆå³å®ƒä»¬çš„å·ç§¯ï¼‰ï¼Œå°† $A\u0026rsquo;[m..n-1]â€‹$ è®¾ä¸º $0â€‹$ï¼Œé‚£ä¹ˆ $\\sum\\limits_{j=0}^{m-1}A\u0026rsquo;[m-j-1]B^3[i+j]=f(i+m-1)â€‹$ã€‚\nå¯ä»¥ç±»ä¼¼åœ°è®¡ç®—å¦å¤–ä¸¤é¡¹ï¼Œå°±å¯ä»¥æ±‚å‡ºæ‰€æœ‰ $dis(A,B[i..i+m-1])â€‹$ï¼Œçœ‹çœ‹å“ªäº›ç­‰äºé›¶å°±å¥½äº†ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cmath\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N=1\u0026lt;\u0026lt;19; const double PI=acos(-1); struct cp { double re,im; cp(double _re=0.0,double _im=0.0) { re=_re; im=_im; } cp operator+(const cp\u0026amp; b) const { return cp(re+b.re,im+b.im); } cp operator-(const cp\u0026amp; b) const { return cp(re-b.re,im-b.im); } cp operator*(const cp\u0026amp; b) const { return cp(re*b.re-im*b.im,re*b.im+im*b.re); } } a[N],a2[N],a3[N],b[N],b2[N],b3[N],c1[N],c2[N],c3[N]; void fft(cp* A,int type); int n,m,lim,L,r[N]; char s[N],t[N]; vector\u0026lt;int\u0026gt; ans; int main() { int i; scanf(\u0026quot;%d%d%s%s\u0026quot;,\u0026amp;m,\u0026amp;n,s,t); for (i=0;i\u0026lt;n;++i) { if (m-i\u0026gt;0\u0026amp;\u0026amp;s[m-i-1]!='*') { a[i].re=s[m-i-1]-'a'+1; a2[i].re=a[i].re*a[i].re; a3[i].re=a[i].re*a2[i].re; } if (t[i]!='*') { b[i].re=t[i]-'a'+1; b2[i].re=b[i].re*b[i].re; b3[i].re=b[i].re*b2[i].re; } } for (lim=0,L=1;L\u0026lt;=n;++lim,L\u0026lt;\u0026lt;=1); for (i=1;i\u0026lt;L;++i) r[i]=(r[i\u0026gt;\u0026gt;1]\u0026gt;\u0026gt;1)|((i\u0026amp;1)\u0026lt;\u0026lt;(lim-1)); fft(a,1); fft(a2,1); fft(a3,1); fft(b,1); fft(b2,1); fft(b3,1); for (i=0;i\u0026lt;L;++i) { c1[i]=a[i]*b3[i]; c2[i]=a2[i]*b2[i]; c3[i]=a3[i]*b[i]; } fft(c1,-1); fft(c2,-1); fft(c3,-1); for (i=m-1;i\u0026lt;n;++i) { if (c1[i].re-2*c2[i].re+c3[i].re\u0026lt;0.5) { ans.push_back(i-m+2); } } printf(\u0026quot;%d\\n\u0026quot;,int(ans.size())); for (i=0;i\u0026lt;ans.size();++i) printf(\u0026quot;%d \u0026quot;,ans[i]); return 0; } void fft(cp* A,int type) { int i,j,k; for (i=1;i\u0026lt;L;++i) if (i\u0026lt;r[i]) swap(A[i],A[r[i]]); for (i=1;i\u0026lt;L;i\u0026lt;\u0026lt;=1) { cp w1(cos(PI/i),type*sin(PI/i)); for (j=0;j\u0026lt;L;j+=2*i) { cp w(1,0); for (k=j;k\u0026lt;i+j;++k,w=w*w1) { cp t=A[k+i]*w; A[k+i]=A[k]-t; A[k]=A[k]+t; } } } if (type==-1) for (i=0;i\u0026lt;L;++i) A[i].re=A[i].re/L; } ","date":"2019-03-19T16:27:51+08:00","permalink":"https://ouuan.github.io/post/bzoj4259-%E6%AE%8B%E7%BC%BA%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2fft/","tags":["å­—ç¬¦ä¸²","FFT"],"title":"BZOJ4259 æ®‹ç¼ºçš„å­—ç¬¦ä¸²ï¼ˆFFTï¼‰"},{"categories":["æ¸¸è®°"],"contents":"æ—¶éš”åŠå¹´åˆæ¥åˆ°äº†YALIã€‚\nDay 0 ä¸­åˆæ”¾å­¦ï¼Œä¸‹åˆå°±åç«è½¦èµ°äº†ã€‚\næ™šä¸Šè¢«éª—å»åƒç«å®«æ®¿..\nç„¶ååšäº†ä¸€ä¸ª slide.\nDay 1 T1æ˜¯ä¸ªå­—ç¬¦ä¸²ï¼Œä¸€å¼€å§‹ä»¥ä¸ºå¯ä»¥ $50$ï¼Œå…ˆæŠŠ $30$ å†™äº†ç„¶åå»çœ‹åä¸¤é¢˜ï¼Œå›æ¥å‘ç°é‚£ $20$ æ²¡æ³•å†™..æœ€åå› ä¸ºæ•°ç»„å $end$ CEäº†..\nT2è¿˜æ˜¯ä¸ªå­—ç¬¦ä¸²ï¼Œåªä¸è¿‡æ˜¯åœ¨å›¾ä¸Šï¼Œæ˜¯é“å¤§è±¡é¢˜ï¼Œæ±‚æœŸæœ›ï¼Œè¦é«˜æ–¯æ¶ˆå…ƒï¼Œåˆ©ç”¨é $0â€‹$ é¡¹å¾ˆå°‘æ¥é™ä½å¤æ‚åº¦ã€‚ä¸€å¼€å§‹å…ˆæŠŠä¸ç”¨æ±‚æœŸæœ›ï¼ˆæ¯ä¸ªç‚¹å‡ºåº¦ä¸º $1â€‹$ï¼‰çš„ $20â€‹$ åˆ†å†™äº†ï¼Œç„¶åå°±å»çœ‹ $T3â€‹$ã€‚åæ¥å›å¤´å‘ç° $T1â€‹$ çš„ $20â€‹$ å†™ä¸å‡ºæ¥ï¼Œå°±æ¥å†™è¿™é¢˜çš„ $10â€‹$ åˆ†æš´åŠ›é«˜æ–¯æ¶ˆå…ƒï¼Œç„¶åè°ƒäº† $1hâ€‹$ï¼Œä¸€å¼€å§‹å…ˆæ˜¯æ¦‚ç‡å„ç§ç®—é”™ï¼Œåæ¥å…¶å®ƒçš„éƒ½å†™å¯¹äº†ï¼Œç»“æœæˆ‘è„‘æŠ½å†™æˆäº†å­—ç¬¦ä¸²å¤±é…è·³åˆ° $0â€‹$ \u0026hellip;\nT3æ˜¯zzqæœ€çˆ±çš„æç­”ï¼Œåˆæ˜¯ç»™ä¸€ç§è®¡ç®—æœºã€‚éšä¾¿ç©äº† $47â€‹$ åˆ†ã€‚ä¸‹åˆè®²é¢˜çš„æ—¶å€™æœ‰å‡ ä½ç¥ä»™åœ¨é‚£å¿«ä¹åœ°ç¢¾äº†ç¢¾æ ‡ç®—..\nåšé¢˜çš„æ—¶å€™å…ˆæ˜¯çœ‹åˆ° ctr zzqï¼Œç„¶åå¾€å³ä¸€çœ‹ï¼Œå‘ç° zzq å°±åœ¨é»‘æ¿å‰çš„ç”µè„‘å‰åç€..ä¹‹å‰å°±å¬è¯´ _rqy ä¹Ÿè¦æ¥ï¼Œåšé¢˜åšåˆ°ä¸€åŠçš„æ—¶å€™çœ‹åˆ° _rqy å»æ‰¾ zzq æŠ¥å‘Šäº†ä¸¤ä¸ª bug..\nä¹‹å‰å°±æœ‰çŒœæµ‹è¿‡ï¼š\nç„¶å..ä¸‹åˆæœç„¶æ˜¯ç¥ä»™èŠå¤©åœºï¼Œ_rqy ç°åœºæ¨å¤šé¡¹å¼ä¸‰è§’å‡½æ•°..\næ™šä¸Šæ²¡å»æœºæˆ¿..æ¸¸è®°å°±æ˜¯æ™šä¸Šå†™çš„qaq\nDay 2 ä»Šå¤©æœ‰ä¸‰ç§ç±»å‹çš„é¢˜ç›®ï¼Œæ€§ä»·æ¯”é«˜ã€‚\nT1 æ˜¯é“å›¾è®ºäº¤äº’ï¼Œåªä¼šæš´åŠ› $20$..\nT2 æ˜¯é“å›¾è®ºä¼ ç»Ÿé¢˜ï¼Œä¸€å¼€å§‹ä»¥ä¸ºç›´æ¥æ¬§æ‹‰å›è·¯å°±æ˜¯æ­£è§£ï¼Œç„¶åéšä¾¿ä¸€æ‹å°±æŒ‚äº†..åæ¥å¾—çŸ¥æ¬§æ‹‰å›è·¯æ˜¯æ­£è§£çš„ä¸€éƒ¨åˆ†ã€‚\nT3 æ˜¯é“æ‰«é›·æç­”ï¼Œæš´åŠ›è·‘äº† $4â€‹$ ä¸ªç‚¹ï¼Œæ„é€ äº†ä¸¤ä¸ªç‚¹ï¼Œä¸‹åˆçš„æ—¶å€™æ‰‹ç©äº†ä¸€ä¸ªç‚¹..æ˜¯é™¤äº†å‘¨å›´é›·æ•°è¿˜æœ‰è¡Œ/åˆ—ä¹‹å’Œï¼Œè¡Œ/åˆ—è¿ç»­æ®µä¸ªæ•°ä¹‹ç±»çš„é‚£ç§ã€‚\nä¸‹åˆè®²é¢˜çš„æ—¶å€™ç«Ÿç„¶æœ‰äººè®²ç¾æ¨±çš„é¢œæ–™..ä¸ªäººè®¤ä¸ºé‚£é¢˜å‡ºçš„ä¸æ˜¯å¾ˆå¥½..å°¤å…¶æ˜¯Sookeä¸ºå¡loglognè®¾çš„ç©ºé—´é™åˆ¶..\nDay 3 ä»Šå¤©æ˜¯è®²é¢˜..æ„Ÿè§‰å…¨åœºå¯èƒ½å°±æˆ‘ä¸ä¼šç”Ÿæˆå‡½æ•°ï¼Œåªä¸è¿‡æ„Ÿè§‰å¥½åƒå¤§æ¦‚å¼„æ˜ç™½äº†ã€‚\næ™šä¸ŠæŠŠè®²é¢˜å’•å’•äº†ï¼Œç»“æœä¸å°å¿ƒé”™è¿‡äº† _rqy çš„éš¾é¢˜é€‰è®²..\nDay 4 T1 æ˜¯ä¸ªæ•°æ®ç»“æ„ï¼Œçœ‹äº†çœ‹è§‰å¾—æœ‰ $41$ åˆ†éå¸¸å¯åšï¼Œå…ˆå†™äº†ä¸ªæš´åŠ›å»è‚åé¢ä¸¤é¢˜ï¼Œæœ€åå›æ¥å†™è¿™é¢˜ï¼Œå¾ˆå¿«å†™å®Œäº† $30$ åˆ†ï¼Œç„¶åæŠŠ $30$ åˆ†å¤‡ä»½äº†ä¸€ä¸‹å»å†™å‰©ä¸‹çš„ $11$ åˆ†ï¼Œå†™çš„è¿‡ç¨‹ä¸­å‘ç° $30$ åˆ†æœ‰ä¸ªåœ°æ–¹æŒ‚äº†ï¼Œå°±åœ¨ $41$ åˆ†ä»£ç é‡Œé¢æ”¹è¿‡æ¥äº†ï¼Œåæ¥å‰©ä¸‹ $11$ åˆ†æ²¡å†™å®Œï¼Œå°±æŠŠå¤‡ä»½ï¼ˆæ²¡ä¿®æ”¹é‚£ä¸ªåœ°æ–¹ï¼‰çš„ä»£ç äº¤ä¸Šå»äº†..æœ€åè¿è¯¢é—®æ•°ä¸º $0$ çš„ subtask éƒ½æŒ‚äº†ï¼Œåªæœ‰ $22$ åˆ†ã€‚\nT2 æ˜¯é“å°æ¸…æ–°0.5KBæ‰¾è§„å¾‹é¢˜ã€‚æˆåŠŸæ‰¾åˆ°è§„å¾‹ç„¶å A æ‰äº†..\nT3 æ˜¯ä¿„ç½—æ–¯æ–¹å—æç­”..æäº†ä¸‰ä¸ªç‚¹ï¼Œå‰©ä¸‹çš„éšæœº..è·å¾—äº† $16$ åˆ†çš„å¥½æˆç»©ã€‚ä¹‹å _rqy è¯´è‡ªå·±å†™äº†ä¸ªæ¨¡æ‹Ÿå™¨æ‰‹ç©ï¼Œäºæ˜¯æˆ‘ä¸‹åˆå°±è‡ªå·±å†™äº†ä¸ªæ¨¡æ‹Ÿå™¨æ‰‹ç©..è‰ï¼ŒçœŸçš„åˆå¥½å†™åˆå¥½ç©ï¼Œ$1h$ åå‡ åˆ†ç»å¯¹æ²¡é—®é¢˜..\nDay 5 ä»Šå¤©å¤§ä¼—åˆ† $200$..çªæ„‰å¿«å«åº•äº†ã€‚\nT1 æ˜¯ä¸ªæ•°æ®ç»“æ„ï¼Œå®šä¹‰æ•°åˆ—ä¸­æ¯ä¸ªæ•°çš„åç»§ä¸ºå®ƒåé¢æ¯”å®ƒå¤§çš„ç¬¬ä¸€ä¸ªæ•°ï¼ŒåŒºé—´è¯¢é—®è·³åˆ°åç»§æœ€å¤šèƒ½è·³å¤šå°‘æ­¥ã€‚æš´åŠ› $30$ åˆ†æ»šç²—ã€‚\nT2 æ˜¯ä¸ªæ ‘äº¤äº’ï¼Œè¿˜æ¯”è¾ƒç®€å•å§..ç„¶è€Œ std åšæ³•çœ‹èµ·æ¥å°±å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥æ²¡ä»”ç»†å¬å…·ä½“æ˜¯æ€ä¹ˆåšçš„ã€‚\nT3 æ˜¯é“ MO é¢˜ï¼Œå…¨åœºåªæœ‰æš´åŠ› $15$ å’Œçˆ†é›¶..ç„¶åæˆ‘è€ƒåœºä¸Šæ„‰å¿«åœ°è°ƒäº† $2hâ€‹$ æš´åŠ›ï¼ŒRETLEWAâ€¦â€¦æœ€åè¿˜æ˜¯æ²¡è°ƒå‡ºæ¥ã€‚\nDay 6 ä»Šå¤©åˆæ˜¯è®²é¢˜..æ™šä¸Šè½®åˆ°æˆ‘éš¾é¢˜è®¨è®ºï¼Œè®²äº†ä¸‹æ—©å°±è¢«æˆ‘è®²çƒ‚äº†çš„çš‡åæ¸¸æˆ\u0026amp;ç”±ä¹ƒå¤§æ¯ç¥åŸå‹ä¸å¶åƒå´‡æ‹œã€‚\nDay 7 T1 æ˜¯ä¸€ä¸ªæ ‘ä¸Šçš„ç¥ä»™é¢˜..æŠŠæš´åŠ› $68$ åˆ†æ‰“æ»¡äº†ï¼ˆ$n^2$\u0026amp;é“¾\u0026amp;èŠèŠ±ï¼‰ã€‚è€ƒåœºä¸Šå†™å®ŒèŠèŠ±ä¹‹åå»çœ‹ T2ï¼ŒT3ï¼Œç„¶åæ”¾åœ¨é‚£å¯¹æ‹ï¼Œé”™äº†äº”å…­æ¬¡æ‰è°ƒå¯¹..\nT2 æ˜¯ä¸ªç¥ä»™åšå¼ˆè®ºï¼Œåªå†™äº†æš´åŠ› $17$ åˆ†..\nT3 æ˜¯ä¸ªç¥ä»™äº¤äº’ï¼Œç”¨éšæœºåŒ–æåˆ°äº† $66$ åˆ†ï¼ˆæœŸæœ›å¾—åˆ† $67$ï¼Œè„¸é»‘è¢«å¡åˆ°äº† $66.99$ï¼‰ï¼Œç„¶è€Œæ²¡æœ‰å‘ç°æŠŠ subtask3 çš„ä»£ç å¤åˆ¶åˆ° subtask4 åé¢å°±å¯ä»¥è½»æ¾è·å¾— $60%$ subtask5 çš„åˆ†æ•°..\nè¿™åœºè™½ç„¶æ²¡ A é¢˜ï¼Œç„¶è€Œå¥½åƒæ˜¯æˆ‘å¾—åˆ†æœ€é«˜çš„ä¸€åœºï¼Ÿ\nDay 8 T1æŒ‡ä»¤é›†REäº†..åªä¸è¿‡å†™äº†æ•°æ®åˆ†æ²»è¿˜æœ‰æš´åŠ›åˆ†ã€‚æœ¬åœ°æ¯”æ­£è§£è·‘çš„è¿˜å¿«qaq..ylhç”¨ $\\mathcal O(n\\sqrt n\\log n)$ è‰¹è¿‡å»äº† Orz.\nT2æš´åŠ›ã€‚\nT3æš´åŠ›è¢«å¡å¸¸äº†ã€‚\nå«åº•..åˆ†æœ€ä½çš„ä¸€æ¬¡ã€‚\nDay 9 è®²è¯¾ï¼Œé¢“ã€‚\nDay 10 T1æš´åŠ›ï¼Œylhçš„æš´åŠ›ååºè¢«å¡äº†ã€‚\nT2ä¼šæ±‚ç­”æ¡ˆä¸ä¼šæ±‚æ–¹æ¡ˆï¼Œç»“æœä¸‹åˆæ‰çŸ¥é“å¤§å®¶éƒ½ä¼šæ±‚ç­”æ¡ˆ..\nT3æš´åŠ›ï¼Œä¸ä¼šç±»æ¬§è‡ªé—­äº†ã€‚\nDay 11 å’Œç¬¬äºŒå¤©äº’æ¢äº†ï¼Œè®²è¯¾ï¼Œç»§ç»­æ˜¥çœ zzz..\nDay 12 ä»Šå¤© T1 æ˜¯äº”å­æ£‹äº’æ‰“ï¼Œæƒ³ç€ä»Šå¤©æ˜¯æœ€åä¸€å¤©ï¼Œäºæ˜¯å°±çœŸçš„å†™äº†æ•´åœºï¼ˆ$3.5h$ï¼‰çš„ T1ã€‚ä¸€å¼€å§‹å†™äº†ä¸ªçˆ†æœï¼Œåæ¥å‘ç°å¾ˆè ¢ï¼Œäºæ˜¯å°±ç®—äº†ä¸ªä¼°ä»·å‡½æ•°ï¼Œç„¶åæ„Ÿè§‰å¾ˆå¯¹ã€‚ç„¶è€Œ ctr ä¹±æµ‹..ä¹‹åæˆ‘æŠŠ ctr æµ‹å‡ºæ¥çš„å‰ $21$ åæµ‹äº†ä¸€ä¸‹ï¼Œå’Œ ctr æµ‹å‡ºæ¥çš„å·®åˆ«è¿˜æŒºå¤§çš„..åªä¸è¿‡æˆ‘å¥½åƒåœ¨æ‰§é»‘/æ‰§ç™½çš„æƒ…å†µä¸‹éƒ½æ‰“è¿‡äº†å…¶å®ƒäººå†™çš„AI..ç„¶è€Œè¢« ylhï¼ˆäººï¼‰å‡»è´¥äº†..\nT2 é¢˜é¢æ‰äº†ä¸ªå…³é”®æ¡ä»¶ï¼Œäºæ˜¯ä¸ä¼šåš..èŠ± $20min$ å†™äº† $35$ åˆ†ã€‚\nT3 è§‰å¾—éƒ¨åˆ†åˆ†å†™èµ·æ¥å¾ˆéº»çƒ¦ï¼Œäºæ˜¯æœ€ååŠä¸ªå¤šå°æ—¶å°±ä¸€ç›´åœ¨çœ‹è‡ªå·±çš„ AI å’Œè‡ªå·±çš„ AI ä¸‹æ£‹..\næ€»ç»“ è¦æ˜¯çœé€‰æ²¡æœ‰éä¼ ç»Ÿé¢˜å°±è¦å‡‰å‡‰çš„æ„Ÿè§‰\u0026hellip;\n","date":"2019-03-17T19:36:39+08:00","permalink":"https://ouuan.github.io/post/2019yali%E7%9C%81%E9%80%89%E9%9B%86%E8%AE%AD%E5%9E%AB%E5%BA%95%E8%AE%B0/","tags":["é›†è®­"],"title":"2019YALIçœé€‰é›†è®­å«åº•è®°"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\ndarkbzoj\né¢˜æ„ç®€è¿° ç»™ä½ ä¸¤ä¸ªé•¿ä¸º $n$ ã€æ— é‡å¤å…ƒç´ çš„æ•°åˆ— $a,b$ï¼Œæ±‚å°† $b$ é‡æ’å $\\left(\\sum\\limits_{i=1}^n[a_i\u0026gt;b_i]\\right)-\\left(\\sum\\limits_{i=1}^n[a_i\u0026lt;b_i]\\right)=k$ï¼ˆ$k$ ç»™å®šï¼‰çš„æ–¹æ¡ˆæ•°ã€‚\n$n\\le2000$ã€‚\nç®€è¦åšæ³• é¦–å…ˆï¼Œ$a$ å¤§äº $b$ æ¯” $b$ å¤§äº $a$ å¤š $k$ å¯¹å¯ä»¥è½¬åŒ–ä¸º $a$ å¤§äº $b$ æœ‰ $\\frac{n+k}2$ å¯¹ã€‚\nè€ƒè™‘ $dpâ€‹$ï¼Œè®¾ $f(i,j)â€‹$ ä¸º $a_{1..i}â€‹$ ä¸­é€‰ $jâ€‹$ ä¸ªæ•°ï¼Œç»™è¿™ $jâ€‹$ ä¸ªæ•°æ¯ä¸ªæ•°åŒ¹é…ä¸€ä¸ªå°äºå®ƒçš„ $bâ€‹$ çš„æ–¹æ¡ˆæ•°ã€‚ä¸ºæ–¹ä¾¿è½¬ç§»ï¼Œä¸€å¼€å§‹è¦å…ˆå¯¹ $a,bâ€‹$ åˆ†åˆ«ä»å°åˆ°å¤§æ’åºï¼Œè¿™æ ·çš„è¯è‹¥ $a_i\u0026gt;b_jâ€‹$ï¼Œå¿…ç„¶æœ‰ $a_{i+1}\u0026gt;b_jâ€‹$ã€‚\nè®¾æ¯” $a_i$ å¤§çš„ $b$ æœ‰ $cnt_i$ ä¸ªï¼Œè½¬ç§»æ–¹ç¨‹å°±æ˜¯ $f(i,j)=f(i-1,j)+(cnt_i-j+1)\\times f(i-1,j-1)$ã€‚$cnt_i$ å¯ä»¥äºŒåˆ†æŸ¥æ‰¾/åŒæŒ‡é’ˆè®¡ç®—ã€‚\nè€ƒè™‘è¿™æ ·ä¸€ä¸ªå¼å­ï¼š$f(n,i)\\times(n-i)!$ï¼Œå®ƒçš„æ„ä¹‰æ˜¯ï¼Œå…ˆä» $a$ ä¸­é€‰ $i$ ä¸ªæ•°ï¼Œç»™å®ƒä»¬åˆ†åˆ«åŒ¹é…ä¸€ä¸ªå°äºå®ƒä»¬çš„ $b$ï¼Œå†æŠŠå‰©ä¸‹çš„ $n-i$ ä¸ªæ•°éšæ„åŒ¹é…ã€‚è¿™ä¸ªå¼å­å¹¶ä¸æ˜¯æŸç§â€œæ–¹æ¡ˆæ•°â€ï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šå°†ç›¸åŒçš„åŒ¹é…æ–¹æ¡ˆç®—é‡ã€‚äº‹å®ä¸Šï¼Œå¯¹äºæ¯ç§æ°æœ‰ $j$ å¯¹ $a\u0026gt;b$ çš„åŒ¹é…æ–¹æ¡ˆï¼Œå®ƒåœ¨ $f(n,i)\\times(n-i)!$ ä¸­è¢«è®¡ç®—äº† $\\binom{j}{i}$ æ¬¡ã€‚ä»¤ $ans_i$ è¡¨ç¤ºæ°å¥½æœ‰ $i$ å¯¹ $a$ å¤§äº $b$ çš„æ–¹æ¡ˆæ•°ï¼Œå°±æœ‰ $ans_i=f(n,i)\\times(n-i)!-\\sum\\limits_{j=i+1}^n\\binom{j}{i}ans_j$ã€‚è¿™æ ·çš„è¯ï¼Œå°±å¯ä»¥é€’æ¨åœ°è®¡ç®—ç­”æ¡ˆã€‚\nè¿™é¢˜è¿˜æœ‰å¦ä¸€ç§åšæ³•ï¼Œå«äºŒé¡¹å¼åæ¼”ã€‚æˆ‘è‡ªå·±æ²¡æœ‰å¤ªç†è§£æ¸…æ¥šè¿™ç§æ–¹æ³•ï¼Œæ‰€ä»¥ä¸è¯¦ç»†é˜è¿°ã€‚è¿™ç§åšæ³•å¯ä»¥ $O(n)â€‹$ åœ°è®¡ç®—æŸä¸ª $ans_iâ€‹$ï¼Œä½†ä¸å½±å“æ€»å¤æ‚åº¦ï¼ˆ$dpâ€‹$ è¿˜æ˜¯ $O(n^2)â€‹$ çš„ï¼‰ï¼š\n$$ans_i=\\sum\\limits_{j=i}^n(-1)^{j-i}\\binom j i f(n,j)\\times(n-j)â€‹$$\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef long long ll; const int N=2010; const int mod=1e9+9; int qpow(int x,int y); int n,k,a[N],b[N],f[N][N],ans[N],c[N][N],fac[N]; int main() { int i,j,cnt=0; cin\u0026gt;\u0026gt;n\u0026gt;\u0026gt;k; if ((n\u0026amp;1)!=(k\u0026amp;1)) { cout\u0026lt;\u0026lt;0; return 0; } k=(n+k)/2; for (i=1;i\u0026lt;=n;++i) scanf(\u0026quot;%d\u0026quot;,a+i); for (i=1;i\u0026lt;=n;++i) scanf(\u0026quot;%d\u0026quot;,b+i); sort(a+1,a+n+1); sort(b+1,b+n+1); fac[0]=1; for (i=1;i\u0026lt;=n;++i) fac[i]=(ll)fac[i-1]*i%mod; c[0][0]=1; for (i=1;i\u0026lt;=n;++i) { c[i][0]=1; for (j=1;j\u0026lt;=i;++j) c[i][j]=(c[i-1][j-1]+c[i-1][j])%mod; } f[0][0]=1; for (i=1;i\u0026lt;=n;++i) { f[i][0]=1; while (cnt\u0026lt;n\u0026amp;\u0026amp;b[cnt+1]\u0026lt;a[i]) ++cnt; for (j=1;j\u0026lt;=cnt;++j) { f[i][j]=(f[i-1][j]+(ll)f[i-1][j-1]*(cnt-j+1))%mod; } } for (i=n;i\u0026gt;=k;--i) { ans[i]=(ll)f[n][i]*fac[n-i]%mod; for (j=n;j\u0026gt;i;--j) ans[i]=(ans[i]+mod-(ll)ans[j]*c[j][i]%mod)%mod; } cout\u0026lt;\u0026lt;ans[k]; return 0; } int qpow(int x,int y) { int out=1; while (y) { if (y\u0026amp;1) out=(ll)out*x%mod; x=(ll)x*x%mod; y\u0026gt;\u0026gt;=1; } return out; } ","date":"2019-03-15T12:48:17+08:00","permalink":"https://ouuan.github.io/post/bzoj3622-%E5%B7%B2%E7%BB%8F%E6%B2%A1%E6%9C%89%E4%BB%80%E4%B9%88%E5%A5%BD%E5%AE%B3%E6%80%95%E7%9A%84%E4%BA%86%E4%BA%8C%E9%A1%B9%E5%BC%8F%E5%8F%8D%E6%BC%94%E7%BB%84%E5%90%88%E6%95%B0%E5%AD%A6/","tags":["ç»„åˆæ•°å­¦","äºŒé¡¹å¼åæ¼”"],"title":"BZOJ3622 å·²ç»æ²¡æœ‰ä»€ä¹ˆå¥½å®³æ€•çš„äº†ï¼ˆäºŒé¡¹å¼åæ¼”ï¼Œç»„åˆæ•°å­¦ï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ darkbzoj\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€ä¸ªæ•°åˆ—ï¼Œæ±‚é‡æ’åæ¯ä¸ªä½ç½®éƒ½å˜äº†çš„æ–¹æ¡ˆæ•°ã€‚\næ•°åˆ—é•¿åº¦å’Œå€¼åŸŸéƒ½æ˜¯ $2000$ã€‚\nç®€è¦åšæ³• è€ƒè™‘å®¹æ–¥ï¼Œè®¡ $g(S)â€‹$ ä¸º $Sâ€‹$ è¿™ä¸ªé›†åˆå†…çš„æ‰€æœ‰ä½ç½®éƒ½ä¸å˜çš„æ–¹æ¡ˆæ•°ï¼Œ$Uâ€‹$ ä¸ºä½ç½®çš„å…¨é›†ï¼ˆå³ $1â€‹$ ~ $nâ€‹$ï¼‰ï¼Œ$iâ€‹$ è¿™ä¸ªæ•°å‡ºç°äº† $cnt[i]â€‹$ æ¬¡ï¼Œç­”æ¡ˆå³ä¸º $\\frac{n!}{\\prod\\limits_{i=1}^ncnt[i]!}+\\sum\\limits_{S\\subseteq U,S\\ne\\varnothing}(-1)^{|S|}g(S)â€‹$ã€‚\nè®¡ $P_i$ ä¸º $i$ è¿™ä¸ªæ•°å‡ºç°çš„ä½ç½®é›†åˆï¼Œé‚£ä¹ˆ $g(S)=\\frac{(n-|S|)!\\prod\\limits_{i=1}^n\\frac{cnt[i]!}{(cnt[i]-|P_i\\bigcap S|)!}}{\\prod\\limits_{i=1}^ncnt[i]!}â€‹$ã€‚\næš´åŠ›æšä¸¾å­é›†è‚¯å®šæ˜¯è¿‡ä¸äº†çš„ï¼Œè€ƒè™‘å¦‚ä½•ä¼˜åŒ–ã€‚\nå®¹æ–¥åŸç†çš„ä¼˜åŒ–ä¸€èˆ¬æ˜¯å°†ç­”æ¡ˆç›¸åŒ/ç»“æ„ç›¸ä¼¼çš„éƒ¨åˆ†åˆåœ¨ä¸€èµ·ç®—ï¼Œè¿™é¢˜ä¸­ï¼Œå¯ä»¥å°è¯•å°† $|S|$ ç›¸åŒçš„é›†åˆåˆåœ¨ä¸€èµ·ç®—ï¼Œé—®é¢˜å°±åœ¨äºå¦‚ä½•å¿«é€Ÿè®¡ç®— $|S|$ ç›¸åŒçš„æ‰€æœ‰ $\\prod\\limits_{i=1}^n\\frac{cnt[i]!}{(cnt[i]-|P_i\\bigcap S|)!}$ ä¹‹å’Œã€‚\nè¿™ä¸ªä¸œè¥¿å¯ä»¥ç”¨ $dp$ è§£å†³ï¼šè®¾ $f(i,j)$ ä¸ºä»å€¼ä¸º $1$ ~ $i$ çš„æ‰€æœ‰æ•°ä¸­é€‰ $j$ ä¸ªæ•°çš„æ‰€æœ‰ä¸åŒæ–¹æ¡ˆçš„è´¡çŒ®ä¹‹å’Œï¼Œå…¶ä¸­ï¼Œä¸€ç§é€‰æ³•çš„è´¡çŒ®å°±æ˜¯å°†é€‰çš„æ•°ä½œä¸º $S$ çš„ $\\prod\\limits_{i=1}^n\\frac{cnt[i]!}{(cnt[i]-|P_i\\bigcap S|)!}$ã€‚è½¬ç§»æ—¶æšä¸¾å€¼ä¸º $i$ çš„æ•°é€‰äº† $k$ ä¸ªï¼Œé‚£ä¹ˆ $f(i,j)=\\sum\\limits_{k=0}^{\\min(j,cnt[i])}\\frac{cnt[i]!}{(cnt[i]-k)!}\\binom{cnt[i]}kf(i-1,j-k)$. ç”±äº $cnt[i]$ ä¹‹å’Œä¸º $n$ï¼Œ$dp$ å¤æ‚åº¦æ˜¯ $O(n^2)$ã€‚\nè¿™æ ·çš„è¯ï¼Œæœ€ç»ˆçš„ç­”æ¡ˆå°±æ˜¯ $\\frac{n!+\\sum\\limits_{i=1}^n(-1)^i(n-i)!f(n,i)}{\\prod\\limits_{i=1}^ncnt[i]!}$ï¼Œå®é™…ä¸Š $f(n,0)=1$ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥åŒ–ç®€ä¸º $\\frac{\\sum\\limits_{i=0}^n(-1)^i(n-i)!f(n,i)}{\\prod\\limits_{i=1}^ncnt[i]!}$.\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; using namespace std; typedef long long ll; const int N=2010; const int mod=1e9+9; int qpow(int x,int y); int n,cnt[N],fac[N],inv[N],f[N][N],c[N][N],ans; int main() { int i,j,k,x; cin\u0026gt;\u0026gt;n; fac[0]=inv[0]=1; for (i=1;i\u0026lt;=n;++i) { cin\u0026gt;\u0026gt;x; ++cnt[x]; fac[i]=(ll)fac[i-1]*i%mod; inv[i]=qpow(fac[i],mod-2); } c[0][0]=1; for (i=1;i\u0026lt;=n;++i) { c[i][0]=1; for (j=1;j\u0026lt;=i;++j) c[i][j]=(c[i-1][j-1]+c[i-1][j])%mod; } f[0][0]=1; for (i=1;i\u0026lt;=n;++i) { for (j=0;j\u0026lt;=n;++j) { for (k=0;k\u0026lt;=cnt[i]\u0026amp;\u0026amp;k\u0026lt;=j;++k) { f[i][j]=(f[i][j]+(ll)fac[cnt[i]]*inv[cnt[i]-k]%mod*f[i-1][j-k]%mod*c[cnt[i]][k])%mod; } } } for (i=0;i\u0026lt;=n;++i) ans=(ans+(ll)(i\u0026amp;1?-1:1)*fac[n-i]*f[n][i]+mod)%mod; for (i=1;i\u0026lt;=n;++i) ans=(ll)ans*inv[cnt[i]]%mod; cout\u0026lt;\u0026lt;ans; return 0; } int qpow(int x,int y) { int out=1; while (y) { if (y\u0026amp;1) out=(ll)out*x%mod; x=(ll)x*x%mod; y\u0026gt;\u0026gt;=1; } return out; } ","date":"2019-03-13T21:10:56+08:00","permalink":"https://ouuan.github.io/post/bzoj4665-%E5%B0%8Fw%E7%9A%84%E5%96%9C%E7%B3%96%E5%AE%B9%E6%96%A5%E5%8E%9F%E7%90%86%E7%BB%84%E5%90%88%E6%95%B0%E5%AD%A6/","tags":["å®¹æ–¥åŸç†","ç»„åˆæ•°å­¦","è®¡æ•°dp"],"title":"BZOJ4665 å°wçš„å–œç³–ï¼ˆå®¹æ–¥åŸç†ï¼Œç»„åˆæ•°å­¦ï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\ndarkbzoj\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€æ£µæ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ‰ $h$ å€¼ï¼Œä¸€ä¸ªå‹‡å£«æ¥åˆ°ä¸€ä¸ªèŠ‚ç‚¹æ—¶å¦‚æœä»–çš„æˆ˜æ–—åŠ›å¤§äºç­‰äº $h$ å°±èƒ½å é¢†åŸæ± å¹¶å‰å¾€è¿™ä¸ªèŠ‚ç‚¹çš„çˆ¶äº²ï¼ˆé™¤éå·²ç»åˆ°äº†æ ¹èŠ‚ç‚¹ï¼‰ï¼Œå¦åˆ™é˜µäº¡ï¼›æ”»å ä¸€ä¸ªèŠ‚ç‚¹åï¼Œå‹‡å£«çš„æˆ˜æ–—åŠ›ä¼šåŠ /å‡/ä¹˜ä¸€ä¸ªæ­£æ•´æ•°ï¼ˆæ ¹æ®èŠ‚ç‚¹è€Œå®šï¼‰ï¼›æ¯ä¸ªå‹‡å£«æœ‰åˆå§‹æˆ˜æ–—åŠ›å’Œæƒ³å é¢†çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚é—®ï¼Œæ¯ä¸ªèŠ‚ç‚¹å„æœ‰å¤šå°‘ä¸ªå‹‡å£«é˜µäº¡ï¼Œæ¯ä¸ªå‹‡å£«å„å é¢†äº†å‡ ä¸ªèŠ‚ç‚¹ã€‚\nç®€è¦åšæ³• æ¯ä¸ªèŠ‚ç‚¹æä¸ªå°æ ¹å¯å¹¶å †ç»´æŠ¤è¯¥èŠ‚ç‚¹æ‰€æœ‰å‹‡å£«ï¼ˆåŒ…æ‹¬ä¸€å¼€å§‹å°±åœ¨è¿™çš„å’Œçˆ¬ä¸Šæ¥çš„ï¼‰ï¼Œå½“å †é¡¶å°äº $h$ æ—¶å¼¹å‡ºå¹¶æ›´æ–°ç­”æ¡ˆï¼Œç›´åˆ°å †ä¸ºç©ºæˆ–è€…å †é¡¶å¤§äºç­‰äº $h$ï¼Œç„¶åå†åŠ /å‡/ä¹˜ï¼Œåˆå¹¶åˆ°çˆ¶äº²ã€‚\nåŠ /å‡/ä¹˜ï¼šæ›´æ–°å †é¡¶å¹¶æ‰“æ ‡è®°ï¼Œåœ¨æ‰€æœ‰éœ€è¦è®¿é—®å„¿å­çš„åœ°æ–¹ï¼ˆå¼¹å‡ºå †é¡¶æ—¶/åˆå¹¶æ—¶ï¼‰ä¸‹ä¼ æ ‡è®°ã€‚\nåˆå¹¶å¤æ‚åº¦ï¼šæ¯ä¸ªå‹‡å£«åˆå§‹ä½ç½®éœ€è¦åˆå¹¶ä¸€æ¬¡ï¼Œæ¯ä¸ªèŠ‚ç‚¹åˆå¹¶åˆ°çˆ¶äº²è¦ä¸€æ¬¡ï¼Œ$O((n+m)\\log m)$ï¼›å¼¹å‡ºå¤æ‚åº¦ï¼šæ¯ä¸ªå‹‡å£«æœ€å¤šè¢«å¼¹å‡ºä¸€æ¬¡ï¼Œ$O(m\\log m)$ï¼›ä¿®æ”¹å¤æ‚åº¦ï¼šé™¤äº†ä¸‹ä¼ æ ‡è®°å¤–æ¯æ¬¡ä¿®æ”¹éƒ½æ˜¯ $O(1)$ çš„ï¼Œæ‰€ä»¥æ˜¯ $O(n)$ï¼›æ€»å¤æ‚åº¦ï¼š$O((n+m)\\log m)$ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef long long ll; ll read() { ll out=0; int f=1; char c; for (c=getchar();!isdigit(c)\u0026amp;\u0026amp;c!='-';c=getchar()); if (c=='-') f=-1,c=getchar(); for (;isdigit(c);c=getchar()) out=out*10+c-'0'; return out*f; } const int N=300010; struct Node { int ls,rs,d; ll val,add,mul; Node(){ls=rs=add=0;d=mul=1;} } t[N]; int merge(int x,int y); int pop(int x); void madd(int u,ll x); void mmul(int u,ll x); void pushdown(int x); void add(int u,int v); void dfs(int u); int head[N],nxt[N],to[N],cnt; int n,m,p[N],f[N],a[N],dep[N],c[N],ans1[N],ans2[N]; ll h[N],b[N]; int main() { int i; n=read(); m=read(); for (i=1;i\u0026lt;=n;++i) h[i]=read(); for (i=2;i\u0026lt;=n;++i) { f[i]=read(); add(f[i],i); a[i]=read(); b[i]=read(); } for (i=1;i\u0026lt;=m;++i) { t[i].val=read(); c[i]=read(); p[c[i]]=merge(i,p[c[i]]); } dfs(1); for (i=1;i\u0026lt;=n;++i) printf(\u0026quot;%d\\n\u0026quot;,ans1[i]); for (i=1;i\u0026lt;=m;++i) printf(\u0026quot;%d\\n\u0026quot;,ans2[i]); return 0; } void dfs(int u) { int i,v; for (i=head[u];i;i=nxt[i]) { v=to[i]; dep[v]=dep[u]+1; dfs(v); } while (p[u]\u0026amp;\u0026amp;t[p[u]].val\u0026lt;h[u]) { ++ans1[u]; ans2[p[u]]=dep[c[p[u]]]-dep[u]; p[u]=pop(p[u]); } if (a[u]) mmul(p[u],b[u]); else madd(p[u],b[u]); if (u\u0026gt;1) p[f[u]]=merge(p[u],p[f[u]]); else while (p[u]) { ans2[p[u]]=dep[c[p[u]]]+1; p[u]=pop(p[u]); } } void add(int u,int v) { nxt[++cnt]=head[u]; head[u]=cnt; to[cnt]=v; } int merge(int x,int y) { if (!x||!y) return x|y; if (t[x].val\u0026gt;t[y].val) swap(x,y); pushdown(x); t[x].rs=merge(t[x].rs,y); if (t[t[x].rs].d\u0026gt;t[t[x].ls].d) swap(t[x].ls,t[x].rs); t[x].d=t[t[x].rs].d+1; return x; } int pop(int x) { pushdown(x); return merge(t[x].ls,t[x].rs); } void madd(int u,ll x) { t[u].val+=x; t[u].add+=x; } void mmul(int u,ll x) { t[u].val*=x; t[u].add*=x; t[u].mul*=x; } void pushdown(int x) { mmul(t[x].ls,t[x].mul); madd(t[x].ls,t[x].add); mmul(t[x].rs,t[x].mul); madd(t[x].rs,t[x].add); t[x].add=0; t[x].mul=1; } ","date":"2019-03-12T16:14:15+08:00","permalink":"https://ouuan.github.io/post/bzoj4003-jloi2015-%E5%9F%8E%E6%B1%A0%E6%94%BB%E5%8D%A0%E5%B7%A6%E5%81%8F%E6%A0%91/","tags":["æ•°æ®ç»“æ„","å·¦åæ ‘"],"title":"BZOJ4003 [JLOI2015]åŸæ± æ”»å ï¼ˆå·¦åæ ‘ï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\nCF problemset\nCF contest\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² $s$ å’Œ $n$ ä¸ªå­—ç¬¦ä¸² $x_{1..n}$ï¼Œå¯¹æ¯ä¸ª $x_i$ï¼Œæ±‚æœ‰å¤šå°‘ä¸ª $s$ çš„å­ä¸²å¯ä»¥ç”± $x_i$ æ—‹è½¬å¾—åˆ°ã€‚\næ—‹è½¬ä¸€ä¸ªå­—ç¬¦ä¸²å°±æ˜¯æŠŠå®ƒçš„ä¸€ä¸ªå‰ç¼€ç§»åˆ°åé¢ï¼Œå¦‚ abcd å¯ä»¥æ—‹è½¬å¾—åˆ°çš„å­—ç¬¦ä¸²æœ‰ abcdï¼Œbcdaï¼Œcdabï¼Œdabcã€‚\nç®€è¦åšæ³• å¯¹ $s$ å»º SAMï¼ŒæŠŠ $x_i$ æ—‹è½¬å¾—åˆ°çš„æ¯ä¸ªå­—ç¬¦ä¸²ç”¨ SAM è¯»å…¥ï¼Œå°±å¯ä»¥æ±‚ç­”æ¡ˆäº†ã€‚ï¼ˆSAM æ±‚å­ä¸²å‡ºç°æ¬¡æ•°æ˜¯ç»å…¸é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„åšå®¢ï¼‰\nåˆ†å¼€è¯»å…¥æ¯ä¸ª $x_i$ æ—‹è½¬å¾—åˆ°çš„å­—ç¬¦ä¸²æ˜¾ç„¶ä¼šè¶…æ—¶ï¼Œç„¶è€Œï¼ŒSAM è¯»å…¥å­—ç¬¦ä¸²æ˜¯æ”¯æŒåˆ é™¤é¦–å­—ç¬¦çš„ï¼šè®°å½•å½“å‰è¯»å…¥çš„é•¿åº¦ $l$ ä»¥åŠæ‰€å¤„çŠ¶æ€ $u$ï¼Œåˆ é™¤å­—ç¬¦å°±æŠŠ $l$ å‡ä¸€ï¼Œè‹¥å‡ä¸€å $l=len(parent(u))$ï¼Œåˆ™è½¬ç§»åˆ° $parent(u)$ï¼ˆæŠŠ $u$ èµ‹å€¼ä¸º $parent(t)$ï¼‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè¯»å…¥ä¸€ä¸ªå­—ç¬¦çš„æ—¶å€™å½“å‰çŠ¶æ€æ²¡æœ‰è¿™ä¸ªå­—ç¬¦çš„å‡ºè¾¹ï¼Œå°±éœ€è¦åœ¨ $parent$ æ ‘ä¸Šå‘ä¸Šè·³ï¼Œç›´åˆ°æœ‰è¿™ä¸ªå­—ç¬¦çš„å‡ºè¾¹ï¼ŒåŒæ—¶æ›´æ–° $l$ ã€‚è¿™æ ·çš„è¯ï¼Œåˆ é™¤å­—ç¬¦å‰å°±è¦å…ˆåˆ¤æ–­ $l$ ä¸éœ€è¦ä¿ç•™çš„å­—ç¬¦ä¸²çš„é•¿åº¦çš„å…³ç³»ã€‚å…·ä½“ç»†èŠ‚å¯ä»¥å‚è€ƒä»£ç åŠæ³¨é‡Šã€‚\næ‰€ä»¥ï¼Œå…ˆè¯»å…¥ $x_i$ ç»Ÿè®¡ç­”æ¡ˆï¼Œå†åˆ å»é¦–å­—ç¬¦è¯»å…¥ $x_i[0]$ ç»Ÿè®¡ç­”æ¡ˆï¼Œåˆ å»é¦–å­—ç¬¦è¯»å…¥ $x_i[1]$ ç»Ÿè®¡ç­”æ¡ˆâ€¦â€¦å°±åªç”¨è¯»å…¥ $O(len(x_i))â€‹$ ä¸ªå­—ç¬¦ã€‚\nè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å»é‡ã€‚$s$ çš„ä¸€ä¸ªå­ä¸²å¯èƒ½å¯ä»¥å’Œ $x_i$ ä¸åŒçš„æ—‹è½¬åŒ¹é…ã€‚è§£å†³è¿™ä¸ªé—®é¢˜æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ±‚å‡º $x_iâ€‹$ çš„å‘¨æœŸï¼ˆå¯ä»¥ç”¨ kmp æ±‚ï¼‰ï¼Œç¬¬äºŒä¸ªæ–¹æ³•æ˜¯åœ¨ SAM ä¸Šæ‰“æ ‡è®°ã€‚æˆ‘ç”¨çš„æ˜¯æ‰“æ ‡è®°çš„æ–¹æ³•ï¼Œå…·ä½“ç»†èŠ‚è¿˜æ˜¯å¯ä»¥å‚è€ƒä»£ç åŠæ³¨é‡Šã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;cstdio\u0026gt; using namespace std; const int N=1000010; struct Node { int len,par,ch[26],vis,cnt; } sam[N\u0026lt;\u0026lt;1]; void insert(int x); void read(int x); void del(); void calc(); void add(int u,int v); void dfs(int u); char s[N]; int head[N\u0026lt;\u0026lt;1],nxt[N\u0026lt;\u0026lt;1],to[N\u0026lt;\u0026lt;1],cnt; int p,tot,n,m,l,u,tim,ans; int main() { int i; scanf(\u0026quot;%s%d\u0026quot;,s,\u0026amp;n); sam[0].par=-1; for (i=0;s[i];++i) insert(s[i]-'a'); for (i=1;i\u0026lt;=tot;++i) add(sam[i].par,i); dfs(0); for (tim=1;tim\u0026lt;=n;++tim) { scanf(\u0026quot;%s\u0026quot;,s); m=strlen(s); ans=u=l=0; for (i=0;i\u0026lt;m;++i) read(s[i]-'a'); calc(); for (i=0;i\u0026lt;m-1;++i) { read(s[i]-'a'); del(); calc(); } printf(\u0026quot;%d\\n\u0026quot;,ans); } return 0; } void read(int x) //è¯»å…¥ä¸€ä¸ªå­—ç¬¦ { while (u\u0026amp;\u0026amp;!sam[u].ch[x]) l=sam[u=sam[u].par].len; //å‘ä¸Šè·³ç›´è‡³æœ‰è¿™ä¸ªå­—ç¬¦çš„å‡ºè¾¹ if (sam[u].ch[x]) { ++l; u=sam[u].ch[x]; } } void del() //åˆ é™¤é¦–å­—ç¬¦ { if (l\u0026gt;m\u0026amp;\u0026amp;--l==sam[sam[u].par].len) u=sam[u].par; //mè¡¨ç¤ºå½“å‰xiçš„é•¿åº¦ï¼Œåªæœ‰l\u0026gt;mçš„æ—¶å€™æ‰åˆ é™¤ } void calc() //è®¡ç®—å½“å‰çš„ç­”æ¡ˆ { if (l==m\u0026amp;\u0026amp;sam[u].vis\u0026lt;tim) //åªæœ‰å½“å‰è¯»å…¥çš„ä¸²é•¿åº¦æ°å¥½ä¸ºmä¸”å½“å‰çŠ¶æ€æ²¡æœ‰æ‰“ä¸Šæ ‡è®°æ—¶æ‰ç»Ÿè®¡ç­”æ¡ˆ { ans+=sam[u].cnt; sam[u].vis=tim; //æ‰“æ ‡è®° } } void insert(int x) //å‘SAMä¸­æ’å…¥å­—ç¬¦ï¼Œæœ‰äººæŠŠè¿™ä¸ªå‡½æ•°å«åšextend { int np=++tot; sam[np].len=sam[p].len+1; sam[np].cnt=1; while (~p\u0026amp;\u0026amp;!sam[p].ch[x]) { sam[p].ch[x]=np; p=sam[p].par; } if (p==-1) sam[np].par=0; else { int q=sam[p].ch[x]; if (sam[q].len==sam[p].len+1) sam[np].par=q; else { int nq=++tot; sam[nq].len=sam[p].len+1; memcpy(sam[nq].ch,sam[q].ch,sizeof(sam[q].ch)); sam[nq].par=sam[q].par; sam[q].par=sam[np].par=nq; while (~p\u0026amp;\u0026amp;sam[p].ch[x]==q) { sam[p].ch[x]=nq; p=sam[p].par; } } } p=np; } void add(int u,int v) //åŠ è¾¹ï¼Œç”¨äºéå†parentæ ‘ { nxt[++cnt]=head[u]; head[u]=cnt; to[cnt]=v; } void dfs(int u) //éå†parentæ ‘ï¼Œè®¡ç®—æ¯ä¸ªçŠ¶æ€çš„å‡ºç°æ¬¡æ•° { int i,v; for (i=head[u];i;i=nxt[i]) { v=to[i]; dfs(v); sam[u].cnt+=sam[v].cnt; } } ","date":"2019-02-27T13:23:19+08:00","permalink":"https://ouuan.github.io/post/cf235c-cyclical-questsam/","tags":["å­—ç¬¦ä¸²","SAM"],"title":"CF235C Cyclical Questï¼ˆSAMï¼‰"},{"categories":["çŸ¥è¯†ç‚¹"],"contents":"åç¼€è‡ªåŠ¨æœºæ˜¯ä¸€ç§å¤„ç†å­—ç¬¦ä¸²é—®é¢˜çš„æœ‰åŠ›å·¥å…·ï¼ˆåºŸè¯ï¼‰ï¼Œå®ƒçš„ç é‡ä¸æ¯”åç¼€æ•°ç»„å¤§ï¼ˆå®é™…ä»£ç éš¾åº¦ä¸æ¯”åç¼€æ•°ç»„å°ï¼Œä½†ä¹Ÿä¸éš¾ï¼‰ï¼Œå¤„ç†é—®é¢˜æ—¶çš„æ€ç»´éš¾åº¦å¾€å¾€æ¯”åç¼€æ•°ç»„å°ï¼Œå¤æ‚åº¦æ›´ä¼˜ç§€ã€‚è‹¥å­—ç¬¦é›†å¤§å°ä¸º $|\\Sigma|$ï¼Œåˆ™ï¼šæ„å»ºæ—¶é—´å¤æ‚åº¦ $O(n|\\Sigma|)$ï¼Œè½¬ç§»æ—¶é—´å¤æ‚åº¦ $O(1)$ï¼Œç©ºé—´å¤æ‚åº¦ $O(n|\\Sigma|)$ æˆ– æ„å»ºæ—¶é—´å¤æ‚åº¦ $O(n\\log|\\Sigma|)$ï¼Œè½¬ç§»æ—¶é—´å¤æ‚åº¦ $O(\\log|\\Sigma|)$ï¼Œç©ºé—´å¤æ‚åº¦ $O(n)$ã€‚\nç¡®å®šæœ‰é™çŠ¶æ€è‡ªåŠ¨æœºï¼ˆDFAï¼‰ ä¸€ä¸ª ç¡®å®šæœ‰é™çŠ¶æ€è‡ªåŠ¨æœºï¼ˆDFAï¼‰ ç”±ä»¥ä¸‹äº”éƒ¨åˆ†æ„æˆï¼š\n å­—ç¬¦é›†ï¼ˆ$\\Sigma$ï¼‰ï¼Œè¯¥è‡ªåŠ¨æœºåªèƒ½è¾“å…¥è¿™äº›å­—ç¬¦ã€‚ çŠ¶æ€é›†åˆï¼ˆ$Q$ï¼‰ã€‚å¦‚æœæŠŠä¸€ä¸ªDFAçœ‹æˆä¸€å¼ æœ‰å‘å›¾ï¼Œé‚£ä¹ˆ DFA ä¸­çš„çŠ¶æ€å°±ç›¸å½“äºå›¾ä¸Šçš„é¡¶ç‚¹ã€‚ èµ·å§‹çŠ¶æ€ï¼ˆ$start$ï¼‰ï¼Œ$start\\in Q$ï¼Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„çŠ¶æ€ã€‚èµ·å§‹çŠ¶æ€ä¸€èˆ¬ç”¨ $s$ è¡¨ç¤ºï¼Œä¸ºäº†é¿å…æ··æ·†ï¼Œæœ¬æ–‡ä¸­ä½¿ç”¨ $start$ã€‚ æ¥å—çŠ¶æ€é›†åˆï¼ˆ$F$ï¼‰ï¼Œ$F\\subseteq Q$ï¼Œæ˜¯ä¸€å †ç‰¹æ®Šçš„çŠ¶æ€ã€‚ è½¬ç§»å‡½æ•°ï¼ˆ$\\delta$ï¼‰ï¼Œ$\\delta$ æ˜¯ä¸€ä¸ªæ¥å—ä¸¤ä¸ªå‚æ•°è¿”å›ä¸€ä¸ªå€¼çš„å‡½æ•°ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°å’Œè¿”å›å€¼éƒ½æ˜¯ä¸€ä¸ªçŠ¶æ€ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å­—ç¬¦é›†ä¸­çš„ä¸€ä¸ªå­—ç¬¦ã€‚å¦‚æœæŠŠä¸€ä¸ªDFAçœ‹æˆä¸€å¼ æœ‰å‘å›¾ï¼Œé‚£ä¹ˆ DFA ä¸­çš„è½¬ç§»å‡½æ•°å°±ç›¸å½“äºé¡¶ç‚¹é—´çš„è¾¹ï¼Œè€Œæ¯æ¡è¾¹ä¸Šéƒ½æœ‰ä¸€ä¸ªå­—ç¬¦ã€‚  DFA çš„ä½œç”¨å°±æ˜¯è¯†åˆ«å­—ç¬¦ä¸²ï¼Œä¸€ä¸ªè‡ªåŠ¨æœº $A$ï¼Œè‹¥å®ƒèƒ½è¯†åˆ«ï¼ˆæ¥å—ï¼‰å­—ç¬¦ä¸² $S$ï¼Œé‚£ä¹ˆ $A(S)=True$ï¼Œå¦åˆ™ $A(S)=False$ã€‚\nå½“ä¸€ä¸ªDFAè¯»å…¥ä¸€ä¸ªå­—ç¬¦ä¸²æ—¶ï¼Œä»åˆå§‹çŠ¶æ€èµ·æŒ‰ç…§è½¬ç§»å‡½æ•°ä¸€ä¸ªä¸€ä¸ªå­—ç¬¦åœ°è½¬ç§»ã€‚å¦‚æœè¯»å…¥å®Œä¸€ä¸ªå­—ç¬¦ä¸²çš„æ‰€æœ‰å­—ç¬¦åä½äºä¸€ä¸ªæ¥å—çŠ¶æ€ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç§°è¿™ä¸ª DFA æ¥å— è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œåä¹‹æˆ‘ä»¬ç§°è¿™ä¸ª DFA ä¸æ¥å— è¿™ä¸ªå­—ç¬¦ä¸²ã€‚\nå¦‚æœä¸€ä¸ªçŠ¶æ€ $v$ æ²¡æœ‰å­—ç¬¦ $c$ çš„è½¬ç§»ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä»¤ $\\delta(v,c)=null$ï¼Œè€Œ $null$ åªèƒ½è½¬ç§»åˆ° $null$ï¼Œä¸” $null$ ä¸å±äºæ¥å—çŠ¶æ€é›†åˆã€‚æ— æ³•è½¬ç§»åˆ°ä»»ä½•ä¸€ä¸ªæ¥å—çŠ¶æ€çš„çŠ¶æ€éƒ½å¯ä»¥è§†ä½œ $null$ï¼Œæˆ–è€…è¯´ï¼Œ$null$ ä»£æŒ‡æ‰€æœ‰æ— æ³•è½¬ç§»åˆ°ä»»ä½•ä¸€ä¸ªæ¥å—çŠ¶æ€çš„çŠ¶æ€ã€‚\næˆ‘ä»¬æ‰©å±•å®šä¹‰è½¬ç§»å‡½æ•° $\\delta$ï¼Œä»¤å…¶ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š$\\delta(v,s)=\\delta(\\delta(v,s[1]),s[2..|s|])$ï¼Œè¿™ä¸ªæ‰©å±•åçš„è½¬ç§»å‡½æ•°å°±å¯ä»¥è¡¨ç¤ºä»ä¸€ä¸ªçŠ¶æ€èµ·æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²åè½¬ç§»åˆ°çš„çŠ¶æ€ã€‚é‚£ä¹ˆï¼Œ$A(s)=[\\delta(start,s)\\in F]$ã€‚\nå¦‚ï¼Œä¸€ä¸ªæ¥å—ä¸”ä»…æ¥å—å­—ç¬¦ä¸² \u0026ldquo;a\u0026rdquo;, \u0026ldquo;ab\u0026rdquo;, \u0026ldquo;aac\u0026rdquo; çš„ DFAï¼š\nåç¼€è‡ªåŠ¨æœºï¼ˆSAMï¼‰ å®šä¹‰ ä¸€ä¸ªå­—ç¬¦ä¸²çš„ åç¼€è‡ªåŠ¨æœºï¼ˆSAMï¼‰ å°±æ˜¯ä¸€ä¸ª æ¥å—ä¸”ä»…æ¥å— è¿™ä¸ªå­—ç¬¦ä¸²çš„ æ‰€æœ‰åç¼€ çš„ DFAã€‚\nä¸‹æ–‡ä¸­ä»¥ $SAM_s$ ä»£æŒ‡å­—ç¬¦ä¸² $s$ çš„åç¼€è‡ªåŠ¨æœºï¼Œ$\\delta_s$ ä»£æŒ‡ $SAM_s$ çš„è½¬ç§»å‡½æ•°ã€‚è‹¥ä¸å¸¦ä¸‹æ ‡åˆ™è¡¨ç¤ºå­—ç¬¦ä¸²ä¸ºæ¯ä¸² $s$ï¼ˆéœ€è¦æ„å»º SAM çš„é‚£ä¸ªå­—ç¬¦ä¸²ï¼‰ã€‚\næ ¹æ®å®šä¹‰ï¼Œä¸€ä¸ªå­—ç¬¦ä¸² $t$ æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² $s$ çš„åç¼€ï¼Œå½“ä¸”ä»…å½“ $SAM_s(t)=True$ã€‚\næ€§è´¨ ä¸€ä¸ªå­—ç¬¦ä¸² $t$ æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² $s$ çš„å­ä¸²ï¼Œå½“ä¸”ä»…å½“ $\\delta_s(start_s,t)\\neq null$ã€‚\nå› ä¸ºï¼Œè‹¥ $t$ æ˜¯ $s$ çš„å­ä¸²ï¼Œåˆ™åœ¨ $t$ ä¹‹åæ·»åŠ å­—ç¬¦å¯èƒ½æˆä¸º $s$ çš„ä¸€ä¸ªåç¼€ï¼Œåä¹‹ä¸å¯èƒ½ã€‚\nä¸€ä¸ªæœ´ç´ çš„SAM è‹¥æˆ‘ä»¬å°†ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ‰€æœ‰åç¼€æ’å…¥åˆ°ä¸€ä¸ªå­—å…¸æ ‘ï¼ˆTrie æ ‘ï¼‰ä¸­ï¼Œå¹¶å°†æ¯æ¬¡æ’å…¥çš„ç»ˆæ­¢èŠ‚ç‚¹æ ‡è®°ä¸ºæ¥å—çŠ¶æ€ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªçŠ¶æ€æ•°ä¸º $O(n^2)$ çš„SAMã€‚\nå¦‚ï¼Œä¸² \u0026ldquo;abaaabaa\u0026rdquo; çš„ä¸€ä¸ª æœ´ç´ SAMï¼š\næœ€ç®€SAM ä¸Šæ–‡ä¸­çš„â€œæœ´ç´ SAMâ€çŠ¶æ€æ•°æ˜¯ $O(n^2)$ çš„ï¼Œè€Œ æœ€ç®€SAM çš„çŠ¶æ€æ•°å’Œè½¬ç§»æ•°ï¼ˆç‚¹æ•°å’Œè¾¹æ•°ï¼‰éƒ½æ˜¯ $O(n)$ çš„ã€‚\n$right$ é›†åˆ å¯¹äºä¸€ä¸ªå­—ç¬¦ä¸² $t$ï¼Œè‹¥å®ƒåœ¨ $s$ ä¸­å‡ºç°çš„ä½ç½®é›†åˆä¸ºï¼š$\\{[l_1,r_1),[l_2,r_2),\\cdots,[l_n,r_n)\\}$ï¼ˆä¸‹æ ‡ä» $0$ å¼€å§‹ï¼‰ï¼Œé‚£ä¹ˆå®šä¹‰ $right(t)$ ä¸º $\\{r_1,r_2,\\cdots,r_n\\}$ã€‚\nå¦‚ï¼Œåˆæ˜¯ä¸² \u0026ldquo;abaaabaa\u0026rdquo;ï¼Œé‚£ä¹ˆ $right(a)=\\{1,3,4,5,7,8\\}$ï¼Œ$right(aa)=\\{4,5,8\\}$ï¼Œ$right(aab)=\\{6\\}$ã€‚\nåœ¨æœ‰çš„æ•™ç¨‹ä¸­ï¼Œä¹Ÿç§°å…¶ä¸º $endpos$ é›†åˆã€‚\n$right$ é›†åˆç­‰ä»·ç±» $right$ é›†åˆç­‰ä»·ç±»çš„å®šä¹‰ $right$ é›†åˆç›¸ç­‰çš„å­—ç¬¦ä¸²ç»„æˆä¸€ä¸ª $right$ é›†åˆç­‰ä»·ç±»ã€‚\nå¦‚ï¼ŒåŒæ˜¯ä¸² \u0026ldquo;abaaabaa\u0026rdquo;ï¼Œé‚£ä¹ˆ $right$ é›†åˆä¸º $\\{4,8\\}$ çš„å­—ç¬¦ä¸²æœ‰ $\\{abaa,baa\\}$ï¼Œè¿™ä¸¤ä¸ªå­—ç¬¦ä¸²ç»„æˆä¸€ä¸ª $right$ é›†åˆç­‰ä»·ç±»ã€‚\n$right$ é›†åˆç­‰ä»·ç±»ä¸æœ€ç®€SAM æˆ‘ä»¬å®šä¹‰ $reg(v)$ è¡¨ç¤º ä»çŠ¶æ€ $v$ å¼€å§‹èƒ½è¯†åˆ«çš„å­—ç¬¦ä¸²çš„é›†åˆã€‚å³ï¼š$t\\in reg(v)$ å½“ä¸”ä»…å½“ $\\delta(v,t)\\in F$ï¼ˆ$F$ ä¸ºæ¥å—çŠ¶æ€é›†åˆï¼‰ã€‚\nå¦‚æœåœ¨ $t$ çš„åé¢è¡¥ä¸Šä¸€ä¸ªå­—ç¬¦ä¸² $s[r_i..n]$ï¼ˆ$r_i\\in right(t)$ï¼Œ$n$ è¡¨ç¤º $s$ çš„é•¿åº¦ï¼‰ï¼Œå°±å¾—åˆ°äº† $s$ çš„ä¸€ä¸ªåç¼€ã€‚æ‰€ä»¥ï¼Œè‹¥ $right(t_1)=right(t_2)$ï¼Œé‚£ä¹ˆ $reg(SAM(t_1))=reg(SAM(t_2))=\\{s[r_i..n]|r_i\\in right(t_1)\\}$ã€‚\nå¯¹äºæ¯ä¸ªçŠ¶æ€ $v$ï¼Œæˆ‘ä»¬åªå…³å¿ƒ $reg(v)$ï¼Œæ‰€ä»¥å¯ä»¥ç”¨SAMä¸Šçš„æ¯ä¸€ä¸ªçŠ¶æ€å»è¡¨ç¤ºä¸€ä¸ª $right$ é›†åˆç­‰ä»·ç±»ï¼Œè½¬ç§»å‡½æ•°ä¹Ÿç›¸åº”åœ°æ›´æ”¹ä¸ºå¯¹åº”çš„ç­‰ä»·ç±»ï¼ˆä»¤ $f(v)$ è¡¨ç¤ºåŸçŠ¶æ€ $v$ å¯¹åº”çš„å­—ç¬¦ä¸²çš„ $right$ é›†åˆç­‰ä»·ç±»åœ¨æœ€ç®€SAMä¸­å¯¹åº”çš„çŠ¶æ€ï¼Œé‚£ä¹ˆåŸæ¥çš„è½¬ç§»å‡½æ•° $\\delta(u,c)=v$ æ›´æ”¹ä¸º $\\delta\u0026rsquo;(f(u),c)=f(v)$ã€‚å¯ä»¥è¯æ˜ï¼Œè‹¥ $right(u_1)=right(u_2)$ï¼Œé‚£ä¹ˆ $right(\\delta(u_1,c))=right(\\delta(u_2,c))$ï¼Œå› ä¸º $right(\\delta(u,c))=\\{r_i|r_i\\in right(u),s[r_i]=c\\}$ï¼‰ã€‚\nè¿™æ ·çš„SAMæ˜¯çŠ¶æ€æ•°æœ€å°‘çš„ï¼Œå› ä¸ºçŠ¶æ€çš„ $reg$ ä¸¤ä¸¤ä¸åŒã€‚è¿™æ ·çš„SAMè‹¥è¦å’Œæœ´ç´ SAMåŒºåˆ†ï¼Œå¯ä»¥å«åš æœ€ç®€SAMã€‚ä½†ä¸€èˆ¬ä¸åŠ è¯´æ˜çš„SAMéƒ½æŒ‡æœ€ç®€SAMã€‚\nè¿™æ ·çš„SAMï¼Œä»èµ·å§‹çŠ¶æ€åˆ°æŸä¸ªçŠ¶æ€å¯èƒ½æœ‰å¤šæ¡è·¯å¾„ï¼Œæ¯æ¡è·¯å¾„éƒ½å¯¹åº”ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç§°è¿™ä¸ªçŠ¶æ€ å¯¹åº” ç€è¿™äº›å­—ç¬¦ä¸²ã€‚\nå¦‚ï¼Œå’æ˜¯ä¸² \u0026ldquo;abaaabaaâ€‹\u0026rdquo; çš„æœ€ç®€SAMï¼š\n$right$ é›†åˆç­‰ä»·ç±»çš„æ€§è´¨ å¯¹äºæ¯ä¸ªçŠ¶æ€ $v$ï¼Œå®šä¹‰ $max(v)$ å’Œ $min(v)$ åˆ†åˆ«è¡¨ç¤º è¿™ä¸ªçŠ¶æ€å¯¹åº”çš„ æœ€é•¿ å’Œ æœ€çŸ­ çš„å­—ç¬¦ä¸²ã€‚\né‚£ä¹ˆï¼Œ$v$ å¯¹åº”çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ä¸²éƒ½æ˜¯ $max(v)$ çš„åç¼€ï¼Œä¸”ä¸æ˜¯ $min(v)$ çš„çœŸåç¼€ã€‚å¹¶ä¸”ï¼Œ$v$ åŒ…å«äº†æ‰€æœ‰è¿™æ ·çš„å­—ç¬¦ä¸²ã€‚\nç¬¬ä¸€ç‚¹ï¼ˆ$v$ ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ä¸²éƒ½æ˜¯ $max(v)$ çš„åç¼€ï¼‰å¯ä»¥ç”± $right$ é›†åˆçš„å®šä¹‰å¾—åˆ°ã€‚\nç¬¬äºŒç‚¹ï¼ˆä¸”ä¸æ˜¯ $min(v)$ çš„çœŸåç¼€ï¼‰å¯ä»¥ç”± $min(v)$ çš„å®šä¹‰å¾—åˆ°ã€‚\nç¬¬ä¸‰ç‚¹ï¼ˆ$v$ åŒ…å«äº†æ‰€æœ‰è¿™æ ·çš„å­—ç¬¦ä¸²ï¼‰å¯ä»¥ç”±ä¸€ä¸ªå¼•ç†è¯æ˜ï¼š**å¯¹äºä¸€ä¸ªå­—ç¬¦ä¸² $t$ ï¼Œå®ƒçš„ $right$ é›†åˆæ˜¯å®ƒçš„ä»»æ„ä¸€ä¸ªåç¼€çš„ $right$ é›†åˆçš„å­é›†ã€‚**è¿™ä¸ªå¼•ç†å¾ˆå¥½è¯æ˜ï¼Œè¿›è€Œå¯ä»¥è¯æ˜è¿™æ¡æ€§è´¨ã€‚\nå¦‚ï¼Œå•æ˜¯ä¸² \u0026ldquo;abaaabaa\u0026rdquo;ï¼Œ$right$ é›†åˆä¸º $\\{6\\}$ çš„ä¸²æœ‰ $\\{aab,aaab,baaab,abaaab\\}$ï¼Œè‹¥è¿™ä¸ª $right$ é›†åˆç­‰ä»·ç±»å¯¹åº”çŠ¶æ€ $v$ï¼Œé‚£ä¹ˆ $max(v)=abaaab$ï¼Œ$min(v)=aab$ã€‚\nè¿™æ¡æ€§è´¨è¯´æ˜ \u0026ldquo;aaab\u0026rdquo; å’Œ \u0026ldquo;baaab\u0026rdquo; éƒ½å±äºè¿™ä¸ª $right$ é›†åˆç­‰ä»·ç±»ï¼Œä¸” \u0026ldquo;ab\u0026rdquo; å’Œ \u0026ldquo;b\u0026rdquo; ä¸å±äºè¿™ä¸ª $right$ é›†åˆç­‰ä»·ç±»ã€‚\nè¯æ˜ç¬¬ä¸‰ç‚¹æ‰€ç”¨çš„å¼•ç†è¯´æ˜ï¼Œ$right(aaab)\\subseteq right(aab)\\subseteq right(ab)\\subseteq right(b)$ï¼Œä¹Ÿå°±æ˜¯ $\\{6\\}\\subseteq\\{6\\}\\subseteq\\{2,6\\}\\subseteq\\{2,6\\}$ ã€‚\n$parent$ $parent$ çš„å®šä¹‰ $parent$ æœ‰ä¸¤ç§ç­‰ä»·çš„å®šä¹‰ï¼ˆä½ ä¹Ÿå¯ä»¥æŠŠå…¶ä¸€è§†ä½œå®šä¹‰ï¼Œå¦ä¸€ä¸ªè§†ä½œæ€§è´¨ï¼‰ï¼š\nå®šä¹‰ä¸€ å¯¹äºæ¯ä¸ªçŠ¶æ€ $v$ï¼ˆé™¤äº†èµ·å§‹çŠ¶æ€ï¼‰ï¼Œæ‰¾åˆ°æœ€é•¿çš„ä¸€ä¸ªå­—ç¬¦ä¸² $t$ æ‰€å¯¹åº”çš„çŠ¶æ€ï¼Œä½¿å¾— $right(v)\\subsetneq right(t)$ï¼ˆæ³¨æ„æ˜¯çœŸå­é›†ï¼›å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„å­—ç¬¦ä¸²å°±æ‰¾èµ·å§‹çŠ¶æ€ï¼‰ï¼Œè¿™æ ·çš„çŠ¶æ€å°±æ˜¯ $parent(v)$ã€‚\nå®šä¹‰äºŒ å¯¹äºæ¯ä¸ªçŠ¶æ€ $v$ï¼ˆé™¤äº†èµ·å§‹çŠ¶æ€ï¼‰ï¼Œ$min(v)[1..n-1]$ å¯¹åº”çš„çŠ¶æ€ï¼ˆ$n$ è¡¨ç¤º $min(v)$ çš„é•¿åº¦ï¼Œå‡å®šç©ºä¸²å¯¹åº”èµ·å§‹çŠ¶æ€ï¼‰å°±æ˜¯ $parent(v)$ã€‚\næœ‰çš„æ•™ç¨‹ä¸­æŠŠ $parent$ å«åšåç¼€è¿æ¥ $link$ã€‚\n$parent$ çš„æ€§è´¨ $len(min(v))=len(max(parent(v)))+1$ï¼Œè¿™ä¸ªå¯ä»¥ç”±å®šä¹‰äºŒè¯´æ˜ã€‚\n$parent$ æ ‘ $parent$ è¿æ¥å¯ä»¥æ„æˆä¸€æ£µæ ‘ã€‚\nç”±å®šä¹‰ä¸€ï¼Œç”± $right$ é›†åˆè¦ä¹ˆåŒ…å«è¦ä¹ˆä¸ç›¸äº¤å¯ä»¥è¯´æ˜ã€‚$parent$ æ ‘å¯ä»¥çœ‹æˆ $right$ é›†åˆçš„åŒ…å«å…³ç³»æ‰€æ„æˆçš„æ ‘ã€‚\nç”±å®šä¹‰ä¸€æˆ–å®šä¹‰äºŒï¼Œç”±é™¤èµ·å§‹çŠ¶æ€å¤–çš„çŠ¶æ€éƒ½æœ‰ä¸”ä»…æœ‰ä¸€æ¡å‡ºè¾¹å¹¶ä¸” $parent$ è¿æ¥æ— ç¯ï¼ˆ$right$ é›†åˆå¤§å°é€’å¢/å¯¹åº”å­—ç¬¦ä¸²é•¿åº¦é€’å‡ï¼‰å¯ä»¥è¯´æ˜ã€‚\nå¦‚ï¼Œé†Šæ˜¯ä¸² \u0026ldquo;abaaabaa\u0026rdquo;ï¼Œå®ƒçš„ $parent$ æ ‘ï¼šï¼ˆç”¨ $max(v)$ ä»£è¡¨æ¯ä¸ªçŠ¶æ€ï¼‰\nSAMä¸Šçš„æ¥å—çŠ¶æ€å°±æ˜¯åŒ…å« $r_i=n$ï¼ˆå­—ç¬¦ä¸²é•¿åº¦ï¼‰çš„ä¸€äº› $right$ é›†åˆç­‰ä»·ç±»ï¼Œä¹Ÿå°±æ˜¯ $parent$ æ ‘ä¸Š $\\{n\\}$ å¯¹åº”çš„çŠ¶æ€åŠå…¶ç¥–å…ˆã€‚å› æ­¤ï¼Œå¯ä»¥é€šè¿‡ $parent$ æ ‘ç¡®å®šSAMçš„æ¥å—çŠ¶æ€é›†åˆã€‚\næœ€ç®€SAMçŠ¶æ€æ•°ä¸ºçº¿æ€§çš„è¯æ˜ æ¯æ¬¡æŠŠ $right$ é›†åˆåˆ†æˆ $k$ éƒ¨åˆ†éœ€è¦ $k$ æ¡è¾¹ï¼Œæœ€åæƒ…å†µä¸‹æ¯æ¬¡éƒ½åªåˆ†æˆä¸¤éƒ¨åˆ†ï¼Œæ€»å…±è¦åˆ†æˆè‡³å¤š $n$ éƒ¨åˆ†ï¼Œæ‰€ä»¥çŠ¶æ€æ•°ä¸ä¼šè¶…è¿‡ $2n-1$ï¼ˆåˆ† $n-1$ æ¬¡æœ€å¤š $2n-2$ æ¡è¾¹ï¼Œä¹Ÿå°±æ˜¯ $2n-1$ ä¸ªç‚¹ï¼‰ã€‚\næœ€ç®€SAMè½¬ç§»æ•°ä¸ºçº¿æ€§çš„è¯æ˜ è€ƒè™‘SAMçš„ä»»æ„ä¸€ä¸ªç”Ÿæˆæ ‘ï¼Œé‚£ä¹ˆSAMä¸Šçš„è¾¹å°±ä¼šè¢«åˆ†æˆæ ‘è¾¹å’Œéæ ‘è¾¹ã€‚\næ ‘è¾¹æœ€å¤šåªæœ‰ $2n-2$ æ¡ã€‚\nå¯¹äºå­—ç¬¦ä¸²çš„æ¯ä¸ªåç¼€ï¼Œå°†å…¶è¾“å…¥åˆ°SAMä¸­éƒ½ä¼šç»è¿‡ä¸€æ¡ç»ˆç‚¹ä¸ºæ¥å—çŠ¶æ€çš„è·¯å¾„ï¼Œè‹¥ç»è¿‡äº†ä¸€æ¡éæ ‘è¾¹ï¼Œåˆ™ç§°è¯¥åç¼€å¯¹åº”å®ƒç»è¿‡çš„ ç¬¬ä¸€æ¡ éæ ‘è¾¹ã€‚\nå¯¹äºæ¯æ¡éæ ‘è¾¹ $(u,v)$ï¼Œä¸€å®šå­˜åœ¨ä¸€æ¡ä»èµ·å§‹çŠ¶æ€åˆ° $u$ çš„ä¸ç»è¿‡ä»»ä½•éæ ‘è¾¹çš„è·¯å¾„ï¼ˆå› ä¸ºæ ‘ä¸Šä¸¤ç‚¹é—´å¿…å®šæœ‰è·¯å¾„ï¼‰ï¼Œä¹Ÿä¸€å®šå­˜åœ¨ä¸€æ¡ä» $v$ åˆ°ä»»æ„ä¸€ä¸ªæ¥å—çŠ¶æ€çš„è·¯å¾„ï¼ˆå¦åˆ™ $v=null$ï¼‰ï¼Œæ‰€ä»¥ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªåç¼€å¯¹åº”ç€è¿™æ¡éæ ‘è¾¹ã€‚\nå› æ­¤ï¼Œéæ ‘è¾¹æ•°é‡ä¸ä¼šè¶…è¿‡åç¼€æ•°é‡ã€‚æ€»çš„è¾¹æ•°å°±æ˜¯ $O(n)$ çš„ã€‚\næœ€ç®€SAMçš„çº¿æ€§æ„é€  SAMçš„çº¿æ€§æ„é€ å¯ä»¥åœ¨å‡æ‘Š $O(1)$ çš„æ—¶é—´å¤æ‚åº¦å†…å‘SAMå¢åŠ ä¸€ä¸ªå­—ç¬¦ï¼ˆä» $SAM_{s[0..i-1]}$ å˜æˆ $SAM_{s[0..i]}$ï¼‰ã€‚\nå‘SAMå¢åŠ ä¸€ä¸ªå­—ç¬¦ï¼Œå°±æ˜¯åœ¨æ‰€æœ‰æ¥å—çŠ¶æ€åå¢åŠ ä¸€ä¸ªå­—ç¬¦ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä¸Šä¸€æ¬¡æ’å…¥æ—¶çš„æœ€åä¸€ä¸ªçŠ¶æ€ï¼ˆ$last$ï¼‰ä»¥åŠå®ƒåœ¨ $parent$ æ ‘ä¸Šçš„ç¥–å…ˆï¼ˆä¹Ÿå°±æ˜¯æ‰€æœ‰æ¥å—çŠ¶æ€ï¼‰ã€‚\nåŠ å…¥ä¸€ä¸ªå­—ç¬¦ $x$ æ—¶ï¼Œæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªæ–°çŠ¶æ€ $np$ï¼Œè¿™ä¸ªçŠ¶æ€åˆšæ’å…¥æ—¶ä»£è¡¨ $right$ é›†åˆ $\\{i\\}$ï¼ˆ$i$ è¡¨ç¤ºè¿™æ˜¯æ’å…¥çš„ç¬¬ $i$ ä¸ªå­—ç¬¦ï¼‰ã€‚\nä¸€ä¸ªå¼•ç†ï¼šè‹¥ä¸€ä¸ªçŠ¶æ€æœ‰å­—ç¬¦ $c$ çš„è½¬ç§»ï¼Œåˆ™å®ƒåœ¨ $parent$ æ ‘ä¸Šçš„ç¥–å…ˆéƒ½æœ‰ã€‚\nå¼•ç†çš„è¯æ˜ï¼š$right(\\delta(v,c))=\\{r_i|r_i\\in right(v),s[r_i]=c\\}$ï¼Œè€Œ $right(v)\\subsetneq right(parent(v))$ã€‚\nå› æ­¤ï¼Œæ‰¾åˆ° $last$ æœ€æ·±çš„æœ‰å‡ºè¾¹ $x$ çš„ç¥–å…ˆ $p$ åï¼Œåœ¨å…¶ä¹‹ä¸Šçš„ç¥–å…ˆéƒ½æœ‰å‡ºè¾¹ $x$ã€‚\nå¯¹äºåœ¨å…¶ä¹‹ä¸‹çš„çŠ¶æ€ï¼Œç›´æ¥å‘ $np$ è¿è¾¹å³å¯ã€‚\næ¥ä¸‹æ¥è¦åˆ†ä¸‰ç§æƒ…å†µè®¨è®ºï¼š\nè‹¥ä¸å­˜åœ¨ $p$ï¼ˆèµ·å§‹çŠ¶æ€éƒ½æ²¡æœ‰å‡ºè¾¹ $x$ï¼‰ï¼Œåˆ™å°† $parent(np)$ è®¾ä¸ºåˆå§‹çŠ¶æ€ã€‚\nå¦åˆ™ï¼Œä»¤ $len(v)$ è¡¨ç¤º $max(v)$ çš„é•¿åº¦ï¼Œ$q$ è¡¨ç¤º $\\delta(p,x)$ã€‚\nè‹¥ $len(q)=len(p)+1$ï¼Œå°† $parent(np)$ è®¾ä¸º $q$ å³å¯ã€‚\nå¦åˆ™ï¼Œæ–°å»ºçŠ¶æ€ $nq$ï¼Œ$len(nq)$ è®¾ä¸ºï¼ˆå®é™…ä¸Šä¸æ˜¯äººä¸ºè®¾å®šï¼Œå®ƒæœ¬æ¥å°±æ˜¯ï¼‰$len(p)+1$ï¼Œå°† $q$ çš„è½¬ç§»å‡½æ•°å¤åˆ¶åˆ° $nq$ï¼Œç„¶åå°† $parent(nq)$ è®¾ä¸º $parent(q)$ï¼Œå†å°† $parent(q)$ å’Œ $parent(np)$ éƒ½è®¾ä¸º $nq$ï¼Œæœ€åæŠŠ $p$ åŠ $p$ çš„ç¥–å…ˆä¸­æ‰€æœ‰å‡ºè¾¹ $x$ è¿åˆ° $q$ çš„éƒ½æ”¹ä¸ºè¿åˆ° $nq$ã€‚å®é™…ä¸Šï¼Œæšä¸¾ç¥–å…ˆæ—¶åªè¦é‡åˆ°å‡ºè¾¹ $x$ ä¸è¿åˆ° $q$ çš„å°±å¯ä»¥åœæ­¢æšä¸¾äº†ã€‚\nè‡³äºä¸ºä»€ä¹ˆè¿™æ ·åš..æ•æˆ‘è¡¨è¾¾èƒ½åŠ›æœ‰é™ï¼Œè¿˜è¯·å‚è€ƒé™ˆç«‹æ°WCè¯¾ä»¶ç¬¬ $35$ é¡µã€‚\næ„å»ºè¿‡ç¨‹çš„å¤æ‚åº¦è¯æ˜å¯ä»¥å‚è€ƒ OI-Wikiã€‚\nå‚è€ƒä»£ç  #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cstring\u0026gt; const int N=1000010; struct Node { int len,par,ch[26]; } sam[N\u0026lt;\u0026lt;1]; void insert(int x); char s[N]; int p,tot; int main() { int i; scanf(\u0026quot;%s\u0026quot;,s); sam[0].par=-1; for (i=0;s[i];++i) insert(s[i]-'0'); return 0; } void insert(int x) { int np=++tot; sam[np].len=sam[p].len+1; while (~p\u0026amp;\u0026amp;!sam[p].ch[x]) { sam[p].ch[x]=np; p=sam[p].par; } if (p==-1) sam[np].par=0; else { int q=sam[p].ch[x]; if (sam[q].len==sam[p].len+1) sam[np].par=q; else { int nq=++tot; sam[nq].len=sam[p].len+1; memcpy(sam[nq].ch,sam[q].ch,sizeof(sam[q].ch)); sam[nq].par=sam[q].par; sam[q].par=sam[np].par=nq; while (~p\u0026amp;\u0026amp;sam[p].ch[x]==q) { sam[p].ch[x]=nq; p=sam[p].par; } } } p=np; }  SAMçš„ä¸€äº›åº”ç”¨ ä¸€äº›åº”ç”¨æˆ‘è¿˜æ²¡æœ‰å†™è¿‡..å†™è¿‡ä¹‹åå¯èƒ½ä¼šè¡¥ï¼ˆguï¼‰ä¸Šï¼ˆguï¼‰æ¥ï¼ˆguï¼‰ã€‚å¯ä»¥å‚è€ƒOI wikiã€‚\nåˆ¤æ–­å­ä¸²/åç¼€ æ ¹æ®SAMçš„å®šä¹‰å’Œæ€§è´¨ï¼Œå»ºå‡ºæ–‡æœ¬ä¸²çš„SAMï¼Œå°†æ¨¡å¼ä¸²åˆ†åˆ«è¾“å…¥SAMï¼Œè‹¥è½¬ç§»åˆ° $null$ åˆ™ä¸æ˜¯å­ä¸²ï¼Œå¦åˆ™æ˜¯ï¼›è‹¥è½¬ç§»åˆ°æ¥å—çŠ¶æ€åˆ™æ˜¯åç¼€ï¼Œå¦åˆ™ä¸æ˜¯ã€‚\nè¯»å…¥å­—ç¬¦ä¸²æ—¶åˆ é™¤é¦–å­—ç¬¦ è®°å½•ä¸€ä¸‹å·²è¯»å…¥çš„å­—ç¬¦ä¸²é•¿åº¦ï¼Œè‹¥å°äºç­‰äºå½“å‰çŠ¶æ€çš„ $parent.len$ï¼Œå°±è½¬ç§»åˆ° $parent$ã€‚\nä¾‹é¢˜ï¼šCF235C Cyclical Quest\nå­ä¸²å‡ºç°æ¬¡æ•° ä¸€ä¸ªå­ä¸²å‡ºç°æ¬¡æ•°å°±æ˜¯å…¶å¯¹åº” $right$ é›†åˆçš„å…ƒç´ ä¸ªæ•°ã€‚\nåœ¨åˆ›å»º $np$ æ—¶ï¼Œå°†å…¶ $cnt$ èµ‹ä¸º $1$ï¼Œå»ºå¥½SAMåï¼Œæ¯ä¸ªçŠ¶æ€çš„å‡ºç°æ¬¡æ•°å°±æ˜¯ $parent$ å­æ ‘å†…çš„ $cnt$ ä¹‹å’Œã€‚\nä¾‹é¢˜ï¼šã€æ¨¡æ¿ã€‘åç¼€è‡ªåŠ¨æœº\nå­ä¸²ç¬¬ä¸€æ¬¡å‡ºç°ä½ç½® å’Œå­ä¸²å‡ºç°æ¬¡æ•°å·®ä¸å¤šï¼Œåˆ›å»º $np$ æ—¶ï¼Œå°† $firstpos(np)$ è®¾ä¸º $len(np)-1$ï¼Œå¤åˆ¶ $nq$ æ—¶ï¼Œå°† $firstpos(nq)$ è®¾ä¸º $firstpos(q)$ï¼Œæœ€åå¯¹å­æ ‘å†…å– $min$ã€‚\næœ¬è´¨ä¸åŒå­ä¸²æ•° æ¯ä¸ªçŠ¶æ€è¡¨ç¤º $maxlen-minlen+1$ ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œ $minlen=len(parent)+1$ï¼Œæ‰€ä»¥ä¸€ä¸ªçŠ¶æ€è¡¨ç¤ºçš„å­—ç¬¦ä¸²æ•°é‡å°±æ˜¯ $len-parent.len$ã€‚æ±‚å’Œå³å¯ã€‚\nä¾‹é¢˜ï¼š[SDOI2016]ç”Ÿæˆé­”å’’\nç¬¬ $k$ å¤§å­ä¸² é¢„å¤„ç†æ¯ä¸ªçŠ¶æ€å¯ä»¥è½¬ç§»åˆ°å¤šå°‘ä¸ªä¸åŒçš„å­ä¸²ï¼Œç„¶åå°±å¯ä»¥åšäº†ã€‚\nä¾‹é¢˜ï¼š\nSP7258 SUBLEX\n[TJOI2015]å¼¦è®º\nä¸¤ä¸²çš„æœ€é•¿å…¬å…±å­ä¸² å¯¹å…¶ä¸­ä¸€ä¸ªä¸²å»ºSAMï¼Œä»èµ·å§‹çŠ¶æ€å¼€å§‹ï¼Œè¯»å…¥å¦ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè‹¥æœ‰è½¬ç§»åˆ™è½¬ç§»ï¼Œå°†å·²åŒ¹é…é•¿åº¦ $+1$ï¼Œå¦åˆ™è·³åˆ° $parent$ï¼ˆè¿™é‡Œå’Œ $kmp$ æœ‰ç‚¹åƒï¼‰ï¼Œå¹¶å°†å·²åŒ¹é…é•¿åº¦ä¿®æ”¹ä¸º $len(parent)$ã€‚è¿‡ç¨‹ä¸­æœ€å¤§çš„å·²åŒ¹é…é•¿åº¦å°±æ˜¯ç­”æ¡ˆã€‚\nä¾‹é¢˜ï¼šSP1811 LCS\nå¤šä¸²çš„æœ€é•¿å…¬å…±å­ä¸² è¿˜æ˜¯å¯¹å…¶ä¸­ä¸€ä¸ªä¸²å»ºSAMï¼Œä»¥åŒæ ·çš„æ–¹å¼ä¾æ¬¡è¯»å…¥æ¯ä¸ªå­—ç¬¦ä¸²ï¼Œåªä¸è¿‡å¯¹æ¯ä¸ªçŠ¶æ€è¦ä¿å­˜å½“å‰å­—ç¬¦ä¸²çš„æœ€å¤§åŒ¹é…é•¿åº¦ï¼Œæ‰€æœ‰å­—ç¬¦ä¸²åœ¨æŸä¸ªçŠ¶æ€çš„æœ€å¤§åŒ¹é…é•¿åº¦çš„æœ€å°å€¼å°±æ˜¯è¿™ä¸€å †å­—ç¬¦ä¸²åœ¨è¿™ä¸ªçŠ¶æ€èƒ½åŒ¹é…çš„æœ€å¤§é•¿åº¦ã€‚å¦‚æœèƒ½åœ¨ä¸€ä¸ªçŠ¶æ€åŒ¹é…ï¼Œä¸€å®šèƒ½åœ¨ $parent$ å¤„åŒ¹é…ï¼Œæ‰€ä»¥è¦å¯¹å­æ ‘å– $max$ï¼Œä½†ä¹Ÿä¸è¦å¿˜äº†å¯¹ $len$ å– $min$ã€‚\nä¾‹é¢˜ï¼š\nSP1812 LCS2\n[SDOI2008]Sandyçš„å¡ç‰‡\nä»»æ„DFAçš„å‹ç¼© UPD: è¿™éƒ¨åˆ†å†…å®¹éå¸¸ naiveï¼Œå»ºè®®é˜…è¯» Wikipedia æˆ–è‡ªè¡Œæœç´¢æ˜“äºè®¿é—®çš„ä¸­æ–‡èµ„æ–™ï¼Œå…³é”®è¯ï¼šè‡ªåŠ¨æœºæœ€å°åŒ–ï¼ŒMyhill-Nerode å®šç†ã€‚\næˆ‘å°±æ˜¯è¦çœ‹ï¼ è¿™éƒ¨åˆ†ä¼°è®¡æ²¡äººæ„Ÿå…´è¶£..OIé‡Œæ²¡ç”¨ï¼Œä¹Ÿä¸æ˜¯è¯æ˜SAMæœ€å°æ€§å¿…éœ€çš„ï¼ˆæœ€å°æ€§çš„è¯æ˜æˆ‘åœ¨å‰æ–‡ä¸­å·²ç»ç®€ç•¥è¯´æ˜äº†ï¼šçŠ¶æ€çš„ $reg$ ä¸¤ä¸¤ä¸åŒï¼‰ã€‚åªä¸è¿‡æˆ–è®¸ä¼šå¯¹ç†è§£SAMæœ¬è´¨ä»¥åŠå‘æ˜å®ƒçš„äººæ€ä¹ˆæƒ³åˆ°çš„æœ‰äº›å¸®åŠ©\u0026hellip;\næˆ–è®¸è¿™ç§æ–¹å¼åœ¨å¾ˆå¤šå¹´å‰å°±å·²ç»è¢«äººæå‡ºäº†..æ€»ä¹‹è¿™éƒ¨åˆ†å†…å®¹å®Œå…¨æ˜¯æˆ‘è‡ªå·±yyçš„ï¼Œæˆ‘ä¹Ÿæ‡’å¾—å»æŸ¥æœ‰æ²¡æœ‰äººå‘æ˜è¿‡ã€‚\nè¿™éƒ¨åˆ†å†…å®¹ä¸ä¿è¯æ­£ç¡®æ€§ï¼Œå¦‚æœæœ‰è¯¯æ¬¢è¿æŒ‡æ­£ã€‚å¦‚æœæœ‰äººæ„¿æ„æä¾›ä¸¥è°¨è¯æ˜ï¼ˆæ€ä¹ˆå¯èƒ½æœ‰äººå•Š..åªä¸è¿‡æˆ‘è¿™é‡Œéƒ½æ‡’å¾—ä¸¥è°¨è¯æ˜äº†ï¼Œéšä¾¿å£å¤´åœ°è¯´äº†ä¸€ä¸‹ï¼‰ä¸€å®šéå¸¸æ„Ÿè°¢ã€‚\nâ€œDFAçš„å‹ç¼©â€çš„å®šä¹‰\nä¸€ä¸ªå¯ç”¨äºå‹ç¼©DFAçš„æ˜ å°„ $f:Q_A\\rightarrow Q_B$ éœ€è¦æ»¡è¶³ä»¥ä¸‹å‡ ä¸ªæ¡ä»¶ï¼š\n $\\forall v\\ne start_A,f(v)\\ne f(start_A)$ $\\forall u\\in F,v\\notin F,f(u)\\ne f(v)$ $\\forall f(u)=f(v),c\\in\\Sigma,f(\\delta_A(u,c))=f(\\delta_A(v,c))$  å¦‚ï¼šåœ¨SAMä¸­ï¼ŒæŠŠæ‰€æœ‰ $right$ é›†åˆç›¸åŒçš„çŠ¶æ€æ˜ å°„åˆ°åŒä¸€çŠ¶æ€å°±æ˜¯ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ˜ å°„ã€‚\nå®šä¹‰DFA $A$ åœ¨æ˜ å°„ $f$ ä¸‹çš„å‹ç¼©ä¸º $B$ï¼Œå…¶ä¸­ï¼š\n $\\Sigma_B=\\Sigma_A$ $Q_B=f(Q_A)$ $start_B=f(start_A)$ $F_B=f(F_A)$ $\\delta_B(f(v),c)=f(\\delta_A(v,c))$ï¼Œè¿™ä¸€å®šä¹‰ä¾èµ–äº $f$ çš„æ€§è´¨ $3$ã€‚  å¦‚ï¼šç”¨ $right$ é›†åˆç­‰ä»·ç±»è¿™ä¸ªæ˜ å°„å¯ä»¥å°†æœ´ç´ SAMå‹ç¼©æˆæœ€ç®€SAMã€‚\nå‹ç¼©åçš„è‡ªåŠ¨æœºä¸åŸè‡ªåŠ¨æœºç­‰ä»·çš„è¯æ˜\næˆ‘ä»¬è¯æ˜ä¸€ä¸ªæ¯” $A(s)=B(s)$ æ›´å¼ºçš„å‘½é¢˜ï¼š$[\\delta_A(v,s)\\in F_A]=[\\delta_B(f(v),s)\\in F_B]$ã€‚\nå½“ $s$ åªæœ‰ä¸€ä¸ªå­—ç¬¦æ—¶ï¼Œæ ¹æ® $f$ æ»¡è¶³çš„æ€§è´¨ $2$ ä»¥åŠ $B$ çš„å®šä¹‰ $4,5$ï¼Œå‘½é¢˜æ˜¾ç„¶æˆç«‹ã€‚\nå½“ $s$ ä¸æ­¢ä¸€ä¸ªå­—ç¬¦æ—¶ï¼Œå¯ä»¥å½’çº³åœ°è¯´æ˜å‘½é¢˜æˆç«‹ã€‚\nDFAçš„æœ€ç®€å‹ç¼©æ–¹æ³•\nè¿™é‡Œç»™å‡ºä¸€ä¸ªå°†ä»»æ„DFAå‹ç¼©è‡³æœ€ç®€çš„æ–¹æ³•ï¼š\nç”±äºDFAæ˜¯ä¸€ä¸ªDAGï¼Œå®ƒçš„ä»»æ„ç”Ÿæˆå­å›¾éƒ½å¿…å®šæœ‰å‡ºåº¦ä¸º $0$ çš„ç‚¹ã€‚æ¯æ¬¡æ‰¾åˆ°è¿™äº›ç‚¹ï¼Œç„¶åä»ä¸­é€‰å–å°½é‡å¤šçš„ç‚¹ï¼Œä½¿å…¶æ˜ å°„åˆ°åŒä¸€ä¸ªçŠ¶æ€åæ»¡è¶³ $f$ éœ€è¦æ»¡è¶³çš„ä¸‰æ¡æ€§è´¨ï¼ˆä¹Ÿå°±æ˜¯ï¼ŒåŒä¸€å­—ç¬¦è½¬ç§»åˆ°çš„çŠ¶æ€æ˜ å°„åˆ°çš„çŠ¶æ€ç›¸åŒï¼Œä¸”æ²¡æœ‰ä¸€ä¸ªæ˜¯æ¥å—çŠ¶æ€å¦ä¸€ä¸ªä¸æ˜¯çš„æƒ…å†µï¼‰ï¼Œç„¶åå°†è¿™äº›ç‚¹ä»å›¾ä¸­åˆ å»ï¼Œé‡å¤ç›´è‡³æ‰€æœ‰ç‚¹éƒ½æœ‰äº†æ˜ å°„åçš„çŠ¶æ€ï¼ˆæ‰€æœ‰ç‚¹éƒ½è¢«åˆ å»ï¼‰ã€‚è¿™æ ·å¾—åˆ°çš„æ˜ å°„ $f$ èƒ½å¤Ÿå°†åŸDFAå‹ç¼©è‡³æœ€ç®€ã€‚\nå‹ç¼©è‡³æœ€ç®€çš„è¯æ˜\næˆ‘ä»¬å…ˆè¯æ˜æ¯ä¸ªçŠ¶æ€çš„ $reg$ï¼ˆå®šä¹‰å‚è§ä¸Šæ–‡ï¼Œè¡¨ç¤ºä»ä¸€ä¸ªçŠ¶æ€èµ·èƒ½è¯†åˆ«çš„å­—ç¬¦ä¸²é›†åˆï¼‰ä¸¤ä¸¤ä¸ç­‰ã€‚æˆ‘ä»¬æŒ‰ç…§æ‹“æ‰‘åºå½’çº³åœ°è¯æ˜ã€‚\næ²¡æœ‰å‡ºè¾¹çš„éæ¥å—çŠ¶æ€å¯ä»¥è§†ä½œ $null$ï¼Œè€Œæ²¡æœ‰å‡ºè¾¹çš„æ¥å—çŠ¶æ€æŒ‰ä¸Šæ–‡æ‰€è¿°æ–¹æ³•å¿…å®šä¼šè¢«æ˜ å°„è‡³åŒä¸€çŠ¶æ€ã€‚æ‰€ä»¥å‘½é¢˜å¯¹æ²¡æœ‰å‡ºè¾¹çš„çŠ¶æ€æˆç«‹ã€‚\nå‡è®¾ä¸€ä¸ªçŠ¶æ€æ‰€æœ‰å‡ºè¾¹çš„å¯¹åº”çŠ¶æ€éƒ½å·²è¢«è¯æ˜ï¼Œé‚£ä¹ˆè½¬ç§»å‡½æ•°ä¸åŒå°±ç­‰ä»·äº $reg$ ä¸åŒï¼Œæ‰€ä»¥å‘½é¢˜æˆç«‹ã€‚\næ¥ç€ï¼Œæˆ‘ä»¬ç”± $reg$ ä¸¤ä¸¤ä¸åŒè¯æ˜å‹ç¼©è‡³æœ€ç®€ï¼š\nè‹¥çŠ¶æ€æ•°ç»§ç»­å‡å°‘ï¼Œé‚£ä¹ˆå¿…ç„¶å­˜åœ¨åŸæ¥ $reg$ ä¸åŒçš„ä¸¤ä¸ªçŠ¶æ€ $B(s_1)$ å’Œ $B(s_2)$ è¢«å‹ç¼©åˆ°äº†ä¸€èµ·ï¼Œä»»å–ä¸€ä¸ªåªåœ¨ $reg(B(s_1))$ æˆ–åªåœ¨ $reg(B(s_2))$ ä¸­çš„å­—ç¬¦ä¸² $t$ï¼ŒåŸæ¥ $B(s_1+t)\\ne B(s_2+t)$ï¼Œå‹ç¼©åå´ä½¿å¾— $B\u0026rsquo;(s_1+t)=B\u0026rsquo;(s_2+t)$ï¼Œä¸ç¬¦åˆè¦æ±‚ã€‚\n","date":"2019-02-22T12:31:37+08:00","permalink":"https://ouuan.github.io/post/%E5%90%8E%E7%BC%80%E8%87%AA%E5%8A%A8%E6%9C%BAsam%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","tags":["å­—ç¬¦ä¸²","SAM"],"title":"åç¼€è‡ªåŠ¨æœºï¼ˆSAMï¼‰å­¦ä¹ ç¬”è®°"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\né¢˜æ„ç®€è¿° æ±‚ å‡ºç°æ¬¡æ•°ä¸ä¸º $1$ çš„å­ä¸²çš„ å‡ºç°æ¬¡æ•° $\\times$ é•¿åº¦ çš„æœ€å¤§å€¼ã€‚\nSAM åšæ³• ç®€è¦åšæ³• ä¸€ä¸ªçŠ¶æ€çš„å‡ºç°æ¬¡æ•°å¯ä»¥è¿™ä¹ˆè®¡ç®—ï¼š\næ’å…¥ä¸€ä¸ªå­—ç¬¦æ—¶ï¼Œ$np$ çš„ $cnt$ è®¾ä¸º $1$ï¼Œä¸€ä¸ªçŠ¶æ€çš„å‡ºç°æ¬¡æ•°å°±æ˜¯å®ƒåœ¨ $parent$ æ ‘ä¸Šçš„å­æ ‘çš„ $cnt$ ä¹‹å’Œã€‚\nè¯æ˜..ç®€è¦è¯´ä¸€ä¸‹ï¼šå› ä¸º $np$ çš„ $right$ é›†åˆä¸º $\\{L\\}$ ã€‚\næ‰€ä»¥ï¼Œæ’å…¥æ•´ä¸ªå­—ç¬¦ä¸²å dfs ä¸€é $parent$ æ ‘ç®—ä¸€ç®—å°±å¥½äº†ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef long long ll; const int N=1000010; const int DELTA=26; struct Node { int len,ch[DELTA],par,cnt; Node(){ memset(ch,0,sizeof(ch)); } } sam[N\u0026lt;\u0026lt;1]; void insert(int x); void add(int u,int v); void dfs(int u); char s[N]; int p,tot,head[N\u0026lt;\u0026lt;1],nxt[N\u0026lt;\u0026lt;1],to[N\u0026lt;\u0026lt;1],cnt; ll ans; int main() { int i; scanf(\u0026quot;%s\u0026quot;,s); for (i=0;s[i];++i) insert(s[i]-'a'); for (i=1;i\u0026lt;=tot;++i) add(sam[i].par,i); dfs(0); cout\u0026lt;\u0026lt;ans; return 0; } void insert(int x) { int np=++tot; sam[np].len=sam[p].len+1; sam[np].cnt=1; while (p\u0026amp;\u0026amp;!sam[p].ch[x]) { sam[p].ch[x]=np; p=sam[p].par; } if (sam[p].ch[x]) { int q=sam[p].ch[x]; if (sam[q].len==sam[p].len+1) sam[np].par=q; else { int nq=++tot; sam[nq].len=sam[p].len+1; memcpy(sam[nq].ch,sam[q].ch,sizeof(sam[q].ch)); sam[nq].par=sam[q].par; sam[q].par=sam[np].par=nq; while (sam[p].ch[x]==q) { sam[p].ch[x]=nq; p=sam[p].par; } } } else { sam[p].ch[x]=np; sam[np].par=0; } p=np; } void add(int u,int v) { nxt[++cnt]=head[u]; head[u]=cnt; to[cnt]=v; } void dfs(int u) { int i,v; for (i=head[u];i;i=nxt[i]) { v=to[i]; dfs(v); sam[u].cnt+=sam[v].cnt; } if (sam[u].cnt\u0026gt;1) ans=max(ans,(ll)sam[u].cnt*sam[u].len); }  åç¼€æ•°ç»„åšæ³• ç®€è¦åšæ³• ä¸€ä¸ªé•¿åº¦ä¸º $h$ çš„å­ä¸²å‡ºç° $k$ æ¬¡å°±æ˜¯æœ‰ $k-1$ ä¸ªè¿ç»­çš„ $height\\ge h$ã€‚å•è°ƒæ ˆç»´æŠ¤å³å¯ã€‚\nç„¶è€Œ..å¡å¸¸å¡ä¸è¿‡å»QAQ\nå‚è€ƒä»£ç ï¼ˆæœ€é«˜80åˆ†ï¼‰ #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N=1000010; char s[N]; int n,sa[N],rk[N\u0026lt;\u0026lt;1],id[N\u0026lt;\u0026lt;1],px[N],cnt[N],ht[N],l[N],sta[N],top; long long ans; bool cmp(int x,int y,int w){ return id[x]==id[y]\u0026amp;\u0026amp;id[x+w]==id[y+w]; } int main() { int i,w,p,m=300,k; scanf(\u0026quot;%s\u0026quot;,s+1); n=strlen(s+1); for (i=1;i\u0026lt;=n;++i) ++cnt[rk[i]=s[i]]; for (i=1;i\u0026lt;=m;++i) cnt[i]+=cnt[i-1]; for (i=n;i\u0026gt;=1;--i) sa[cnt[rk[i]]--]=i; for (w=1;w\u0026lt;n;w\u0026lt;\u0026lt;=1,m=p) { memset(cnt,0,sizeof(cnt)); for (p=0,i=n;i\u0026gt;n-w;--i) id[++p]=i; for (i=1;i\u0026lt;=n;++i) if (sa[i]\u0026gt;w) id[++p]=sa[i]-w; for (i=1;i\u0026lt;=n;++i) ++cnt[px[i]=rk[id[i]]]; for (i=1;i\u0026lt;=m;++i) cnt[i]+=cnt[i-1]; for (i=n;i\u0026gt;=1;--i) sa[cnt[px[i]]--]=id[i]; swap(id,rk); for (p=0,i=1;i\u0026lt;=n;++i) rk[sa[i]]=cmp(sa[i],sa[i-1],w)?p:++p; } for (i=1,k=0;i\u0026lt;=n;++i) { if (k) --k; while (s[i+k]==s[sa[rk[i]-1]+k]) ++k; ht[rk[i]]=k; } for (i=1;i\u0026lt;=n;++i) { while (top\u0026amp;\u0026amp;ht[sta[top]]\u0026gt;=ht[i]) --top; l[i]=sta[top]; sta[++top]=i; } sta[top=1]=n+1; for (i=n;i\u0026gt;=1;--i) { while (top\u0026amp;\u0026amp;ht[sta[top]]\u0026gt;ht[i]) --top; if (sta[top]-l[i]\u0026gt;1) ans=max(ans,(long long)ht[i]*(sta[top]-l[i])); sta[++top]=i; } cout\u0026lt;\u0026lt;ans; return 0; } ","date":"2019-02-21T15:47:52+08:00","permalink":"https://ouuan.github.io/post/p3804-%E6%A8%A1%E6%9D%BF%E5%90%8E%E7%BC%80%E8%87%AA%E5%8A%A8%E6%9C%BA/","tags":["å­—ç¬¦ä¸²","SAM","åç¼€æ•°ç»„"],"title":"P3804 ã€æ¨¡æ¿ã€‘åç¼€è‡ªåŠ¨æœºï¼ˆSAM/åç¼€æ•°ç»„ï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\ndark bzoj\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆå­—ç¬¦é›†å¤§å° $10^9$ï¼Œé•¿åº¦ $10^5$ï¼‰ï¼Œæ±‚æ¯ä¸ªå‰ç¼€çš„æœ¬è´¨ä¸åŒå­ä¸²æ•°ã€‚\nç®€è¦åšæ³• å¦‚æœåªæ±‚æ•´ä¸ªä¸²çš„æœ¬è´¨ä¸åŒå­ä¸²ï¼Œç”±äºæ¯ä¸ªæœ¬è´¨ä¸åŒå­ä¸²å¯ä»¥ä¸ SAM ä¸Šä¸€ä¸ªçŠ¶æ€+ä¸²çš„é•¿åº¦ä¸€ä¸€å¯¹åº”ï¼Œæ‰€ä»¥æœ¬è´¨ä¸åŒå­ä¸²æ•°å°±æ˜¯æ¯ä¸ªçŠ¶æ€çš„ $maxlen-minlen+1$ï¼Œä¹Ÿå°±æ˜¯ $len-parent.len$ã€‚\n$parent$ ä¸æ”¹å˜æ—¶ï¼Œé€ä¸ªåŠ å…¥å­—ç¬¦å¹¶è®¡ç®—å³å¯ã€‚\nè€ƒè™‘ $parent$ æ”¹å˜çš„æƒ…å†µï¼Œå››æ¬¡ $parent$ æ”¹å˜åˆ†åˆ«ä¸º $nq-q.parent$ï¼Œ$-(q-q.parent)$ï¼Œ$q-nq$ï¼Œ$np-nq$ã€‚æ€»è´¡çŒ®ä¸º $nq-q.parent-q+q.parent+q-nq+np-nq=np-nq$ï¼Œä¹Ÿæ˜¯æ–°åŠ å…¥çš„ç‚¹çš„ $len$ å‡å» $parent.len$ï¼Œæ˜¯ä¸€æ ·çš„ã€‚\nç”±äºå­—ç¬¦é›†è¾ƒå¤§ï¼Œç”¨ map å­˜è¾¹ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;map\u0026gt; #include \u0026lt;cctype\u0026gt; using namespace std; typedef long long ll; int read() { int out=0; char c; while (!isdigit(c=getchar())); for (;isdigit(c);c=getchar()) out=out*10+c-'0'; return out; } const int N=100010; struct Node { int len,par; map\u0026lt;int,int\u0026gt; ch; } sam[N\u0026lt;\u0026lt;1]; void insert(int x); int n,p,tot; ll ans; int main() { int i; n=read(); sam[0].par=-1; for (i=1;i\u0026lt;=n;++i) { insert(read()); printf(\u0026quot;%lld\\n\u0026quot;,ans); } return 0; } void insert(int x) { int np=++tot; sam[np].len=sam[p].len+1; while (~p\u0026amp;\u0026amp;sam[p].ch.find(x)==sam[p].ch.end()) { sam[p].ch[x]=np; p=sam[p].par; } if (p==-1) sam[np].par=0; else { int q=sam[p].ch[x]; if (sam[q].len==sam[p].len+1) sam[np].par=q; else { int nq=++tot; sam[nq].len=sam[p].len+1; sam[nq].ch=sam[q].ch; sam[nq].par=sam[q].par; sam[q].par=sam[np].par=nq; while (~p\u0026amp;\u0026amp;sam[p].ch[x]==q) { sam[p].ch[x]=nq; p=sam[p].par; } } } ans+=sam[np].len-sam[sam[np].par].len; p=np; } ","date":"2019-02-21T14:10:35+08:00","permalink":"https://ouuan.github.io/post/bzoj4516-sdoi2016-%E7%94%9F%E6%88%90%E9%AD%94%E5%92%92sam/","tags":["å­—ç¬¦ä¸²","SAM"],"title":"BZOJ4516 [SDOI2016]ç”Ÿæˆé­”å’’ï¼ˆSAMï¼‰"},{"categories":["çŸ¥è¯†ç‚¹"],"contents":"åç¼€æ•°ç»„æ˜¯ä¸€ç§å¤„ç†å­—ç¬¦ä¸²é—®é¢˜çš„æœ‰åŠ›å·¥å…·ï¼ˆåºŸè¯ï¼‰ï¼Œæœ¬æ–‡çš„ä¸»è¦ç‰¹ç‚¹æ˜¯ä¸€æ­¥æ­¥åœ°ç”±æœ€æœ´ç´ çš„åç¼€æ•°ç»„æ„å»ºæ–¹æ³•é€æ­¥ä¼˜åŒ–ï¼Œè€Œéç›´æ¥ç»™å‡ºæœ€ç»ˆä¼˜åŒ–åçš„ä»£ç ã€‚\nå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½è®©æ›´å¤šçš„äººçœ‹æ‡‚åç¼€æ•°ç»„çš„ä»£ç ï¼Œå­¦ä¼šåç¼€æ•°ç»„ã€‚\næœ¬æ–‡å·²äº pr #1730 ä¼˜åŒ–å¹¶åˆå¹¶è‡³ OI Wikiï¼Œæ¨èåœ¨ OI Wiki ä¸Šé˜…è¯»ã€‚\næ¨¡æ¿é¢˜é“¾æ¥ æ´›è°·ï¼ˆåªç”¨æ±‚ $sa$ï¼‰\nLOJï¼ˆåªç”¨æ±‚ $sa$ï¼‰\nUOJï¼ˆæ±‚ $sa$ å’Œ $height$ï¼‰\nè¯„æµ‹é¸­ï¼ˆæ±‚ $sa$ å’Œ $height$ï¼‰\nä¸¤ï¼ˆcanï¼‰ç¯‡ï¼ˆkaoï¼‰è®ºï¼ˆziï¼‰æ–‡ï¼ˆliaoï¼‰ [1]ï¼š[2004]åç¼€æ•°ç»„ by.å¾æ™ºç£Š\n[2]ï¼š[2009]åç¼€æ•°ç»„â€”â€”å¤„ç†å­—ç¬¦ä¸²çš„æœ‰åŠ›å·¥å…· by.ç½—ç©—éª\nè¿™ä¸¤ç¯‡è®ºæ–‡è¿˜æ˜¯å†™çš„å¾ˆå¥½çš„ï¼Œå¤§å®¶å¯ä»¥çœ‹çœ‹ã€‚\nä¸‹æ–‡ä¸­å¦‚æœæœ‰å¼•ç”¨è¿™ä¸¤ç¯‡è®ºæ–‡ä¸­çš„å†…å®¹ï¼Œå°†ä»¥ä¸Šæ ‡å½¢å¼æ ‡å‡ºï¼ˆ$^{[1]}$ $^{[2]}$ï¼‰ã€‚\nå…³äºå­—ç¬¦ä¸².. è¯´åˆ°å­—ç¬¦ä¸²ç®—æ³•ï¼Œå°±å¾—å…ˆæä¸€äº›å®šï¼ˆfeiï¼‰ä¹‰ï¼ˆhuaï¼‰ï¼ŒçŸ¥é“çš„å°±å¯ä»¥ä¸çœ‹äº†..\nå­—ç¬¦é›†$^{[1]}$ ä¸€ä¸ªå­—ç¬¦é›† $Î£$ æ˜¯ä¸€ä¸ªå»ºç«‹äº†å…¨åºå…³ç³»çš„é›†åˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ$Î£$ ä¸­çš„ä»»æ„ä¸¤ä¸ªä¸åŒçš„å…ƒç´  $Î±$ å’Œ $Î²$ éƒ½å¯ä»¥æ¯”è¾ƒå¤§å°ï¼Œè¦ä¹ˆ $Î±\u0026lt;Î²$ï¼Œè¦ä¹ˆ $Î²\u0026lt;Î±$ï¼ˆä¹Ÿå°±æ˜¯$Î±\u0026gt;Î²$ï¼‰ã€‚å­—ç¬¦é›† $Î£$ ä¸­çš„å…ƒç´ ç§°ä¸ºå­—ç¬¦ã€‚\nå­—ç¬¦ä¸²$^{[1]}$ ä¸€ä¸ªå­—ç¬¦ä¸² $S$ æ˜¯å°† $n$ ä¸ªå­—ç¬¦é¡ºæ¬¡æ’åˆ—å½¢æˆçš„æ•°ç»„ï¼Œ$n$ ç§°ä¸º $S$ çš„é•¿åº¦ï¼Œè¡¨ç¤ºä¸º $len(S)$ã€‚$S$ çš„ç¬¬ $i$ ä¸ªå­—ç¬¦è¡¨ç¤ºä¸º $S[i]$ã€‚\nå­ä¸²$^{[1]}$ å­—ç¬¦ä¸² $S$ çš„å­ä¸² $S[i..j]ï¼Œiâ‰¤j$ï¼Œè¡¨ç¤º $S$ ä¸²ä¸­ä» $i$ åˆ° $j$ è¿™ä¸€æ®µï¼Œä¹Ÿå°±æ˜¯é¡ºæ¬¡æ’åˆ— $S[i],S[i+1],\\ldots,S[j]$ å½¢æˆçš„å­—ç¬¦ä¸²ã€‚\nåç¼€ åç¼€æ˜¯æŒ‡ä»æŸä¸ªä½ç½® $i$ å¼€å§‹åˆ°æ•´ä¸ªä¸²æœ«å°¾ç»“æŸçš„ä¸€ä¸ªç‰¹æ®Šå­ä¸²ã€‚å­—ç¬¦ä¸² $S$ çš„ä» $i$ å¼€å¤´çš„åç¼€è¡¨ç¤ºä¸º $Suffix(S,i)$ï¼Œä¹Ÿå°±æ˜¯ $Suffix(S,i)=S[i..len(S)]$ã€‚$^{[1]}$\nä¸‹æ–‡ä¸­ä»¥ \u0026ldquo;åç¼€ $i$\u0026rdquo; ä»£æŒ‡å­—ç¬¦ä¸²ä» $i$ å¼€å¤´çš„åç¼€ã€‚$i$ ç§°ä½œè¿™ä¸ªåç¼€çš„ç¼–å·ã€‚\nå­—å…¸åº ä»¥ç¬¬ $i$ ä¸ªå­—ç¬¦ä½œä¸ºç¬¬ $i$ å…³é”®å­—è¿›è¡Œå¤§å°æ¯”è¾ƒï¼Œç©ºå­—ç¬¦å°äºå­—ç¬¦é›†å†…ä»»ä½•å­—ç¬¦ï¼ˆå³ï¼š$a\u0026lt;aa$ï¼‰ã€‚\nåç¼€æ•°ç»„æ˜¯ä»€ä¹ˆï¼Ÿ åç¼€æ•°ç»„ä¸»è¦æ˜¯ä¸¤ä¸ªæ•°ç»„ï¼š$sa$ å’Œ $rk$ã€‚\nå…¶ä¸­ï¼Œ$sa[i]$ è¡¨ç¤ºå°†æ‰€æœ‰åç¼€æ’åºåç¬¬ $i$ å°çš„åç¼€çš„ç¼–å·ã€‚$rk[i]$ è¡¨ç¤ºåç¼€ $i$ çš„æ’åã€‚\nè¿™ä¸¤ä¸ªæ•°ç»„æ»¡è¶³æ€§è´¨ï¼š$sa[rk[i]]=rk[sa[i]]=i$ã€‚\nåç¼€æ•°ç»„ç¤ºä¾‹ï¼š$^{[2]}$\nåç¼€æ•°ç»„æ€ä¹ˆæ±‚ï¼Ÿ $O(n^2\\log n)$ åšæ³• æˆ‘ç›¸ä¿¡è¿™ä¸ªåšæ³•å¤§å®¶è¿˜æ˜¯èƒ½è‡ªå·±æƒ³åˆ°çš„..ç”¨string+sortå°±å¯ä»¥äº†ã€‚ç”±äºæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯ $O(n)$ çš„ï¼Œæ‰€ä»¥æ’åºæ˜¯ $O(n^2\\log n)$ çš„ã€‚\n$O(n\\log^2n)$ åšæ³• è¿™ä¸ªåšæ³•è¦ç”¨åˆ°å€å¢çš„æ€æƒ³ã€‚\nå…ˆå¯¹æ¯ä¸ªé•¿åº¦ä¸º $1$ çš„å­ä¸²ï¼ˆå³æ¯ä¸ªå­—ç¬¦ï¼‰è¿›è¡Œæ’åºã€‚\nå‡è®¾æˆ‘ä»¬å·²ç»çŸ¥é“äº†é•¿åº¦ä¸º $w$ çš„å­ä¸²çš„æ’å $rk_w[1..n]$ï¼ˆå³ï¼Œ$rk_w[i]$ è¡¨ç¤º $s[i..\\min(i+w-1,n)]$ åœ¨ $\\{s[x..\\min(x+w-1,n)]|x\\in\\mathbb{N}\\bigcap[1,n]\\}$ ä¸­çš„æ’åï¼‰ï¼Œé‚£ä¹ˆï¼Œä»¥ $rk_w[i]$ ä¸ºç¬¬ä¸€å…³é”®å­—ï¼Œ $rk_w[i+w]$ ä¸ºç¬¬äºŒå…³é”®å­—ï¼ˆè‹¥ $i+w\u0026gt;n$ åˆ™ä»¤ $rk_w[i+w]$ ä¸º $-INF$ï¼‰è¿›è¡Œæ’åºï¼Œå°±å¯ä»¥æ±‚å‡º $rk_{2w}[1..n]$ã€‚\nå€å¢æ’åºç¤ºæ„å›¾ï¼š$^{[2]}$\nå¦‚æœç”¨ sort è¿›è¡Œæ’åºï¼Œå¤æ‚åº¦å°±æ˜¯ $O(n\\log^2n)$ çš„ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N=1000010; char s[N]; int n,w,sa[N],rk[N\u0026lt;\u0026lt;1],oldrk[N]; //ä¸ºäº†é˜²æ­¢è®¿é—®rk[i+w]å¯¼è‡´æ•°ç»„è¶Šç•Œï¼Œå¼€ä¸¤å€æ•°ç»„ã€‚å½“ç„¶ä¹Ÿå¯ä»¥åœ¨è®¿é—®å‰åˆ¤æ–­æ˜¯å¦è¶Šç•Œï¼Œä½†ç›´æ¥å¼€ä¸¤å€æ•°ç»„æ–¹ä¾¿ä¸€äº›ã€‚ int main() { int i,p; scanf(\u0026quot;%s\u0026quot;,s+1); n=strlen(s+1); for (i=1;i\u0026lt;=n;++i) rk[i]=s[i]; for (w=1;w\u0026lt;n;w\u0026lt;\u0026lt;=1) { for (i=1;i\u0026lt;=n;++i) sa[i]=i; sort(sa+1,sa+n+1,[](int x,int y){return rk[x]==rk[y]?rk[x+w]\u0026lt;rk[y+w]:rk[x]\u0026lt;rk[y];}); //è¿™é‡Œç”¨åˆ°äº†lambdaè¡¨è¾¾å¼ memcpy(oldrk,rk,sizeof(oldrk)); //ç”±äºè®¡ç®—rkçš„æ—¶å€™åŸæ¥çš„rkä¼šè¢«è¦†ç›–ï¼Œè¦å…ˆå¤åˆ¶ä¸€ä»½ for (p=0,i=1;i\u0026lt;=n;++i) rk[sa[i]]=oldrk[sa[i]]==oldrk[sa[i-1]]\u0026amp;\u0026amp;oldrk[sa[i]+w]==oldrk[sa[i-1]+w]?p:++p; //è‹¥ä¸¤ä¸ªå­ä¸²ç›¸åŒï¼Œå®ƒä»¬å¯¹åº”çš„rkä¹Ÿéœ€è¦ç›¸åŒï¼Œæ‰€ä»¥è¦å»é‡ } for (i=1;i\u0026lt;=n;++i) printf(\u0026quot;%d \u0026quot;,sa[i]); return 0; }   $O(n\\log n)$ åšæ³• åœ¨åˆšåˆšçš„ $O(n\\log^2n)$ åšæ³•ä¸­ï¼Œä¸€æ¬¡æ’åºæ˜¯ $O(n\\log n)$ çš„ï¼Œå¦‚æœèƒ½ $O(n)$ æ’åºï¼Œå°±èƒ½ $O(n\\log n)$ è®¡ç®—åç¼€æ•°ç»„äº†ã€‚\nè®¡æ•°æ’åº è®¡æ•°æ’åºçš„æ ¸å¿ƒæ€æƒ³è¿˜æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ï¼Œå¯ä»¥å…ˆçœ‹ä»£ç ï¼š\n//å¯¹aè¿™ä¸ªæ•°ç»„è¿›è¡Œæ’åºï¼Œç»“æœå­˜åˆ°æ•°ç»„bä¸­ï¼ˆb[i]è¡¨ç¤ºç¬¬iåçš„ç¼–å·ï¼‰ï¼Œcntæ˜¯ä¸€ä¸ªè¾…åŠ©æ•°ç»„ï¼Œmæ˜¯açš„å€¼åŸŸ for (i=1;i\u0026lt;=n;++i) ++cnt[a[i]]; for (i=1;i\u0026lt;=m;++i) cnt[i]+=cnt[i-1]; for (i=n;i\u0026gt;=1;--i) b[cnt[a[i]]--]=i;  å…¶å®å°±æ˜¯å…ˆæ•°ä¸€æ•°å°äºç­‰äº $a[i]$ çš„æ•°æœ‰å¤šå°‘ä¸ªï¼Œç„¶åä»åå¾€å‰çœ‹æ¯ä¸ªæ•°çš„åæ¬¡ã€‚æ„Ÿæ€§ç†è§£/æ‰‹ç©ä¸€ä¸‹å°±èƒ½æ˜ç™½è¿™ä¸ªæ’åºç®—æ³•äº†ã€‚\nè¿™ä¸ªç®—æ³•æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š\n å®ƒæ˜¯ $O(n+m)$ çš„ï¼ˆ$m$ ä¸ºå¾…æ’åºæ•°æ®çš„å€¼åŸŸèŒƒå›´ï¼‰ã€‚ å®ƒæ˜¯ä¸€ä¸ªç¨³å®šæ’åºï¼Œå³ï¼Œç›¸ç­‰çš„æ•°ä¼šæŒ‰åŸä½ç½®ï¼ˆä¸‹æ ‡ï¼‰è¿›è¡Œæ’åºã€‚  åŸºæ•°æ’åº å€¼å¾—ä¸€æçš„æ˜¯å¾ˆå¤šäººç»å¸¸æŠŠè®¡æ•°æ’åºå’ŒåŸºæ•°æ’åºææ··..\nåŸºæ•°æ’åºæ˜¯ä¸€ä¸ªåŸºäºç¨³å®šæ’åºçš„å¤šå…³é”®å­—æ’åºç®—æ³•ï¼Œå¤æ‚åº¦ä¸ºå…³é”®å­—ä¸ªæ•°ä¹˜ä¸Šç¨³å®šæ’åºçš„å¤æ‚åº¦ã€‚è€Œè¿™ä¸ªç¨³å®šæ’åºé€šå¸¸ç”¨è®¡æ•°æ’åºå®ç°ã€‚\nå®ƒçš„æ€æƒ³æ˜¯ï¼Œå¦‚æœæœ‰ $k$ ä¸ªå…³é”®å­—ï¼Œå…ˆä»¥ç¬¬ $k$ å…³é”®å­—è¿›è¡Œä¸€æ¬¡ç¨³å®šæ’åºï¼Œç„¶åå†ä»¥ç¬¬ $k-1$ å…³é”®å­—è¿›è¡Œä¸€æ¬¡ç¨³å®šæ’åºï¼Œâ€¦â€¦ï¼Œæœ€åä»¥ç¬¬ä¸€å…³é”®å­—è¿›è¡Œä¸€æ¬¡ç¨³å®šæ’åºã€‚å¯ä»¥çœ‹å‡ºï¼Œè¿™æ ·åšå°±å®Œæˆäº†ä»¥è¿™ $k$ ä¸ªå…³é”®å­—çš„æ’åºã€‚\nå…·ä½“å®ç°å¤§çº¦æ˜¯è¿™æ ·çš„ï¼š\n//key[i][j]è¡¨ç¤ºç¬¬jä¸ªæ•°çš„ç¬¬iå…³é”®å­—ï¼Œb[i]ä¾ç„¶è¡¨ç¤ºç¬¬iåçš„ç¼–å·ï¼Œmæ˜¯keyçš„å€¼åŸŸï¼Œcntå’Œidéƒ½æ˜¯è¾…åŠ©æ•°ç»„ for (i=1;i\u0026lt;=n;++i) id[i]=i; for (i=k;i\u0026gt;=1;--i) { memset(cnt,0,sizeof(cnt)); for (j=1;j\u0026lt;=n;++j) id[j]=b[j]; for (j=1;j\u0026lt;=n;++j) ++cnt[key[i][id[j]]]; for (j=1;j\u0026lt;=m;++j) cnt[j]+=cnt[j-1]; for (j=n;j\u0026gt;=1;--j) b[cnt[key[i][id[j]]]--]=id[j]; }  å°†åŸºæ•°æ’åºè¿ç”¨äºæ±‚åç¼€æ•°ç»„ å¦‚æœä½ å­¦ä¼šäº†åŸºæ•°æ’åºï¼Œä¹Ÿä¼š $O(n\\log^2n)$ æ±‚åç¼€æ•°ç»„ï¼Œé‚£ä½ åº”è¯¥å¯ä»¥è‡ªå·±å†™å‡ºä¸€ä¸ª $O(n\\log n)$ æ±‚åç¼€æ•°ç»„çš„ç¨‹åºäº†ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N=1000010; char s[N]; int n,sa[N],rk[N\u0026lt;\u0026lt;1],oldrk[N\u0026lt;\u0026lt;1],id[N],cnt[N]; int main() { int i,m,p,w; scanf(\u0026quot;%s\u0026quot;,s+1); n=strlen(s+1); m=max(n,300); for (i=1;i\u0026lt;=n;++i) ++cnt[rk[i]=s[i]]; for (i=1;i\u0026lt;=m;++i) cnt[i]+=cnt[i-1]; for (i=n;i\u0026gt;=1;--i) sa[cnt[rk[i]]--]=i; for (w=1;w\u0026lt;n;w\u0026lt;\u0026lt;=1) { memset(cnt,0,sizeof(cnt)); for (i=1;i\u0026lt;=n;++i) id[i]=sa[i]; for (i=1;i\u0026lt;=n;++i) ++cnt[rk[id[i]+w]]; for (i=1;i\u0026lt;=m;++i) cnt[i]+=cnt[i-1]; for (i=n;i\u0026gt;=1;--i) sa[cnt[rk[id[i]+w]]--]=id[i]; memset(cnt,0,sizeof(cnt)); for (i=1;i\u0026lt;=n;++i) id[i]=sa[i]; for (i=1;i\u0026lt;=n;++i) ++cnt[rk[id[i]]]; for (i=1;i\u0026lt;=m;++i) cnt[i]+=cnt[i-1]; for (i=n;i\u0026gt;=1;--i) sa[cnt[rk[id[i]]]--]=id[i]; memcpy(oldrk,rk,sizeof(oldrk)); for (p=0,i=1;i\u0026lt;=n;++i) rk[sa[i]]=oldrk[sa[i]]==oldrk[sa[i-1]]\u0026amp;\u0026amp;oldrk[sa[i]+w]==oldrk[sa[i-1]+w]?p:++p; } for (i=1;i\u0026lt;=n;++i) printf(\u0026quot;%d \u0026quot;,sa[i]); return 0; }   ä¸€äº›å¸¸æ•°ä¼˜åŒ– å¦‚æœä½ æŠŠä¸Šé¢é‚£ä»½ä»£ç äº¤åˆ°æ´›è°·ä¸Š..\næ€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿæ˜¯è¿™é¢˜å¡å¸¸å—ï¼Ÿ\nä¸€ç¿»å…¶ä»–äººçš„ä»£ç ï¼Œæœ€æ…¢ç‚¹ä¹Ÿä¸è¿‡ $1s$..\nè¿™æ˜¯å› ä¸ºï¼Œä¸Šé¢é‚£ä»½ä»£ç çš„å¸¸æ•°çš„ç¡®å¾ˆå¤§..\nç¬¬äºŒå…³é”®å­—æ— éœ€è®¡æ•°æ’åº å®é™…ä¸Šï¼Œåƒè¿™æ ·å°±å¯ä»¥äº†ï¼š\nfor (p=0,i=n;i\u0026gt;n-w;--i) id[++p]=i; for (i=1;i\u0026lt;=n;++i) if (sa[i]\u0026gt;w) id[++p]=sa[i]-w;  æ„ä¼šä¸€ä¸‹ï¼Œå…ˆæŠŠ $s[i+w..i+2w-1]$ ä¸ºç©ºä¸²çš„ä½ç½®æ”¾å‰é¢ï¼Œå†æŠŠå‰©ä¸‹çš„æŒ‰æ’å¥½çš„é¡ºåºæ”¾è¿›å»ã€‚\nä¼˜åŒ–è®¡æ•°æ’åºçš„å€¼åŸŸ æ¯æ¬¡å¯¹ $rk$ è¿›è¡Œå»é‡ä¹‹åï¼Œæˆ‘ä»¬éƒ½è®¡ç®—äº†ä¸€ä¸ª $p$ï¼Œè¿™ä¸ª $p$ å³æ˜¯ $k$ çš„å€¼åŸŸï¼Œå°†å€¼åŸŸæ”¹æˆå®ƒå³å¯ã€‚\nå°† $rk[id[i]]$ å­˜ä¸‹æ¥ï¼Œå‡å°‘ä¸è¿ç»­å†…å­˜è®¿é—® è¿™ä¸ªä¼˜åŒ–åœ¨æ•°æ®èŒƒå›´è¾ƒå¤§æ—¶æ•ˆæœéå¸¸æ˜æ˜¾ã€‚\nç”¨å‡½æ•°cmpæ¥è®¡ç®—æ˜¯å¦é‡å¤ åŒæ ·æ˜¯å‡å°‘ä¸è¿ç»­å†…å­˜è®¿é—®ï¼Œåœ¨æ•°æ®èŒƒå›´è¾ƒå¤§æ—¶æ•ˆæœæ¯”è¾ƒæ˜æ˜¾ã€‚\næŠŠ oldrk[sa[i]]==oldrk[sa[i-1]]\u0026amp;\u0026amp;oldrk[sa[i]+w]==oldrk[sa[i-1]+w] æ›¿æ¢æˆ cmp(sa[i],sa[i-1],w)ï¼Œbool cmp(int x,int y,int w){ return id[x]==id[y]\u0026amp;\u0026amp;id[x+w]==id[y+w]; }ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N=1000010; char s[N]; int n,sa[N],rk[N],oldrk[N\u0026lt;\u0026lt;1],id[N],px[N],cnt[N]; //px[i]=rk[id[i]]ï¼ˆç”¨äºæ’åºçš„æ•°ç»„æ‰€ä»¥å«pxï¼‰ bool cmp(int x,int y,int w){ return oldrk[x]==oldrk[y]\u0026amp;\u0026amp;oldrk[x+w]==oldrk[y+w]; } int main() { int i,m=300,p,w; scanf(\u0026quot;%s\u0026quot;,s+1); n=strlen(s+1); for (i=1;i\u0026lt;=n;++i) ++cnt[rk[i]=s[i]]; for (i=1;i\u0026lt;=m;++i) cnt[i]+=cnt[i-1]; for (i=n;i\u0026gt;=1;--i) sa[cnt[rk[i]]--]=i; for (w=1;w\u0026lt;n;w\u0026lt;\u0026lt;=1,m=p) //m=på°±æ˜¯ä¼˜åŒ–è®¡æ•°æ’åºå€¼åŸŸ { for (p=0,i=n;i\u0026gt;n-w;--i) id[++p]=i; for (i=1;i\u0026lt;=n;++i) if (sa[i]\u0026gt;w) id[++p]=sa[i]-w; memset(cnt,0,sizeof(cnt)); for (i=1;i\u0026lt;=n;++i) ++cnt[px[i]=rk[id[i]]]; for (i=1;i\u0026lt;=m;++i) cnt[i]+=cnt[i-1]; for (i=n;i\u0026gt;=1;--i) sa[cnt[px[i]]--]=id[i]; memcpy(oldrk,rk,sizeof(rk)); for (p=0,i=1;i\u0026lt;=n;++i) rk[sa[i]]=cmp(sa[i],sa[i-1],w)?p:++p; } for (i=1;i\u0026lt;=n;++i) printf(\u0026quot;%d \u0026quot;,sa[i]); return 0; }  è¿™æ ·ä¼˜åŒ–ä¹‹ååº”è¯¥ä¸å¼€O2éƒ½èƒ½è¿‡ã€‚\n $O(n)$ åšæ³• åå­—å«DC3ï¼Œæˆ‘ä¸ä¼š\nå¯ä»¥å‚è€ƒ[2009]åç¼€æ•°ç»„â€”â€”å¤„ç†å­—ç¬¦ä¸²çš„æœ‰åŠ›å·¥å…· by.ç½—ç©—éªï¼Œé‡Œé¢æœ‰ä»‹ç»è¿™ä¸ªç®—æ³•ã€‚\nä¸€èˆ¬æƒ…å†µä¸‹ç”¨å€å¢æ³•åšè¶³å¸¸æ•°ä¼˜åŒ–æ˜¯ä¸ä¼šè¢«å¡çš„..\nè¿˜æœ‰ä¸ªå«â€œè¯±å¯¼æ’åºâ€çš„ä¸œè¥¿ï¼Œä¹Ÿæ˜¯ $O(n)$ çš„ï¼Œå¬è¯´åˆå¥½å†™ï¼ˆç›¸å¯¹äº DC3ï¼‰åˆå¿«ã€‚\nåç¼€æ•°ç»„æ— éœ€ $height$ æ•°ç»„çš„åº”ç”¨ å¦‚æœç”¨ä¸åˆ° $height$ æ•°ç»„ï¼Œä¸€èˆ¬å°±æ˜¯åˆ©ç”¨ $rk$ æ•°ç»„å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ’åºï¼Œæœ‰æ—¶éœ€è¦å¯¹åŸä¸²è¿›è¡Œä¸€å®šçš„åŠ å·¥ä½¿éœ€è¦æ’åºçš„å­—ç¬¦ä¸²å˜æˆåç¼€ï¼Œæˆ–è€…æ˜¯åªéœ€å¯¹åç¼€è¿›è¡Œæ’åºä¾¿èƒ½å¯¹éœ€è¦æ’åºçš„å­—ç¬¦ä¸²è¿›è¡Œæ’åºã€‚\n[JSOI2007]å­—ç¬¦åŠ å¯† æ´›è°·\ndark bzoj\n[USACO07DEC]Best Cow Line, Gold æ´›è°·\næˆ‘çš„é¢˜è§£\n$height$ æ•°ç»„ åç¼€æ•°ç»„çš„é¢˜ç›®å¾€å¾€æ˜¯è¦ç”¨åˆ° $height$ æ•°ç»„çš„ã€‚\nlcpï¼ˆæœ€é•¿å…¬å…±å‰ç¼€ï¼‰ ä¸¤ä¸ªå­—ç¬¦ä¸² $S$ å’Œ $T$ çš„ $lcp$ å°±æ˜¯æœ€å¤§çš„ $x$ ä½¿å¾— $S_i=T_i$ ($\\forall 1\\le i\\le x$) ã€‚\nä¸‹æ–‡ä¸­ä»¥ $lcp(i,j)$ è¡¨ç¤ºåç¼€ $i$ å’Œåç¼€ $j$ çš„æœ€é•¿å…¬å…±å‰ç¼€ï¼ˆçš„é•¿åº¦ï¼‰ã€‚\n$height$ æ•°ç»„çš„å®šä¹‰ $height[i]=lcp(sa[i],sa[i-1])$ï¼Œå³ç¬¬ $i$ åçš„åç¼€ä¸å®ƒå‰ä¸€åçš„åç¼€çš„æœ€é•¿å…¬å…±å‰ç¼€ã€‚\n$O(n)$ æ±‚ $height$ æ•°ç»„éœ€è¦çš„ä¸€ä¸ªå¼•ç† $height[rk[i]]\\ge height[rk[i-1]]-1$\nè¯æ˜çš„è¯..æ„Ÿæ€§ç†è§£\nå½“ $height[rk[i-1]]\\le1$ æ—¶ï¼Œä¸Šå¼æ˜¾ç„¶æˆç«‹ï¼ˆå³è¾¹å°äºç­‰äº $0$ ï¼‰ã€‚\nå½“ $height[rk[i-1]]\u0026gt;1$ æ—¶ï¼š\nè®¾åç¼€ $i-1$ ä¸º $aAD$ï¼ˆ$A$ æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º $height[rk[i-1]]-1$ çš„å­—ç¬¦ä¸²ï¼‰ï¼Œé‚£ä¹ˆåç¼€ $i$ å°±æ˜¯ $AD$ã€‚è®¾åç¼€ $sa[rk[i-1]-1]$ ä¸º $aAB$ ï¼Œé‚£ä¹ˆ $lcp(i-1,sa[rk[i-1]-1])=aA$ã€‚ç”±äºåç¼€ $sa[rk[i-1]-1]+1$ æ˜¯ $AB$ï¼Œä¸€å®šæ’åœ¨åç¼€ $i$ çš„å‰é¢ï¼Œæ‰€ä»¥åç¼€ $sa[rk[i]-1]$ ä¸€å®šå«æœ‰å‰ç¼€ $A$ï¼Œæ‰€ä»¥ $lcp(i,sa[rk[i]-1])$ è‡³å°‘æ˜¯ $height[rk[i-1]]-1$ã€‚\nç®€å•æ¥è¯´ï¼š\n$i-1$ï¼š$aAD$\n$i$ï¼š$AD$\n$sa[rk[i-1]-1]$ï¼š$aAB$\n$sa[rk[i-1]-1]+1$ï¼š$AB$\n$sa[rk[i]-1]$ï¼š$A[B/C]$\n$lcp(i,sa[rk[i]-1])$ï¼š$AX$ï¼ˆ$X$ å¯èƒ½ä¸ºç©ºï¼‰\n$O(n)$ æ±‚ $height$ æ•°ç»„çš„ä»£ç å®ç° åˆ©ç”¨ä¸Šé¢è¿™ä¸ªå¼•ç†æš´åŠ›æ±‚å³å¯ï¼š\nfor (i=1,k=0;i\u0026lt;=n;++i) { if (k) --k; while (s[i+k]==s[sa[rk[i]-1]+k]) ++k; ht[rk[i]]=k; //heightå¤ªé•¿äº†ç¼©å†™ä¸ºht }  åˆ©ç”¨æ‘Šè¿˜åˆ†æ/åŠ¿èƒ½åˆ†æå¯ä»¥å‘ç°æ˜¯O(n)çš„ï¼Œ$k$ ä¸ä¼šè¶…è¿‡ $n$ï¼Œæœ€å¤šå‡ $n$ æ¬¡ï¼Œæ‰€ä»¥æœ€å¤šåŠ  $2n$ æ¬¡ã€‚\nåº”ç”¨ $height$ æ•°ç»„éœ€è¦çš„ä¸€ä¸ªæ€§è´¨ $lcp(sa[i],sa[j])=\\min\\{height[i+1..j]\\}$\næ„Ÿæ€§ç†è§£ï¼šå¦‚æœ $height$ ä¸€ç›´å¤§äºæŸä¸ªæ•°ï¼Œå‰è¿™ä¹ˆå¤šä½å°±ä¸€ç›´æ²¡å˜è¿‡ï¼›åä¹‹ï¼Œç”±äºåç¼€å·²ç»æ’å¥½åºäº†ï¼Œä¸å¯èƒ½å˜äº†ä¹‹åå˜å›æ¥ã€‚\nä¸¥æ ¼è¯æ˜å¯ä»¥å‚è€ƒ[2004]åç¼€æ•°ç»„ by.å¾æ™ºç£Šã€‚\n$height$ æ•°ç»„çš„åº”ç”¨ $height$ æ•°ç»„å¾€å¾€ç”¨æ¥è§£å†³å…³äºå­—ç¬¦ä¸²å…¬å…±éƒ¨åˆ†çš„é¢˜ç›®ï¼Œé€šå¸¸éœ€è¦å’ŒRMQ/å•è°ƒæ ˆç­‰ç®—æ³•ç›¸ç»“åˆã€‚\n[USACO06DEC]Milk Patterns æ´›è°·\næˆ‘çš„é¢˜è§£\n[AHOI2013]å·®å¼‚ æ´›è°·\ndark bzoj\n[HAOI2016]æ‰¾ç›¸åŒå­—ç¬¦ æ´›è°·\ndark bzoj\næˆ‘çš„é¢˜è§£\n[NOI2015]å“é…’å¤§ä¼š æ´›è°·\ndark bzoj\nSP8222 NSUBSTR - Substrings æ´›è°·\nSPOJ\n","date":"2019-02-17T13:53:54+08:00","permalink":"https://ouuan.github.io/post/%E5%90%8E%E7%BC%80%E6%95%B0%E7%BB%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","tags":["å­—ç¬¦ä¸²","åç¼€æ•°ç»„"],"title":"åç¼€æ•°ç»„å­¦ä¹ ç¬”è®°"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\ndark bzoj\né¢˜æ„ç®€è¿° ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œä»ä¸­å„å–ä¸€ä¸ªå­ä¸²ä½¿è¿™ä¸¤ä¸ªå­ä¸²ç›¸åŒï¼Œæ±‚æ–¹æ¡ˆæ•°ã€‚\nç®€è¦åšæ³• ä»¥æŸä¸¤ä¸ªä½ç½®å¼€å¤´çš„ç›¸åŒå­ä¸²æ•°=è¿™ä¸¤ä¸ªä½ç½®å¼€å¤´çš„åç¼€çš„ $lcp$\nå¦‚æœåœ¨åŒä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ±‚å‡º height æ•°ç»„åä½¿ç”¨å•è°ƒæ ˆæ±‚å‡ºæ¯ä¸ªä½ç½®ä½œä¸ºæœ€å°å€¼çš„è´¡çŒ®å³å¯ï¼ˆå•è°ƒæ ˆéƒ¨åˆ†ä¸ P2659 ç¾ä¸½çš„åºåˆ—ï¼Œ[ZJOI2007]æ£‹ç›˜åˆ¶ä½œ ç­‰é¢˜ç±»ä¼¼ï¼Œåœ¨æ­¤å°±ä¸èµ˜è¿°äº†ï¼›æ±‚ä¸¤ä¸¤ $lcpâ€‹$ ä¹‹å’Œè¿™éƒ¨åˆ†ä¸ [AHOI2013]å·®å¼‚ ç±»ä¼¼ï¼Œæ•…æ²¡æœ‰å†™é‚£é¢˜çš„é¢˜è§£ï¼‰ã€‚\nç”±äºæœ‰ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸å¤ªæ–¹ä¾¿ï¼Œè€ƒè™‘å°†å®ƒä»¬æ‹¼æ¥èµ·æ¥å¹¶åœ¨ä¸­é—´åŠ ä¸Šä¸€ä¸ªä¸å­˜åœ¨çš„å­—ç¬¦ï¼ˆå¦‚#ï¼‰ã€‚è¿™æ ·æ±‚å‡ºæ‹¼æ¥åçš„å­—ç¬¦ä¸²çš„ç­”æ¡ˆï¼Œå‡å»ä¸¤ä¸ªåŸä¸²çš„ç­”æ¡ˆï¼Œå°±æ˜¯æœ€ç»ˆçš„ç­”æ¡ˆã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N=400010; typedef long long ll; int sa[N],sa2[N\u0026lt;\u0026lt;1],rk[N\u0026lt;\u0026lt;1],px[N],cnt[N],sta[N],top,f[N],height[N]; struct Suffix_Array { char s[N]; ll calc() { ll out=0; int n,i,k,w,p,m=200; n=strlen(s+1); memset(sa2,0,sizeof(sa2)); memset(cnt,0,sizeof(cnt)); for (i=1;i\u0026lt;=n;++i) ++cnt[rk[i]=s[i]]; for (i=1;i\u0026lt;=m;++i) cnt[i]+=cnt[i-1]; for (i=n;i\u0026gt;=1;--i) sa[cnt[rk[i]]--]=i; for (w=1;w\u0026lt;n;w\u0026lt;\u0026lt;=1,m=p) { memset(cnt,0,sizeof(cnt)); for (p=0,i=n;i\u0026gt;n-w;--i) sa2[++p]=i; for (i=1;i\u0026lt;=n;++i) if (sa[i]\u0026gt;w) sa2[++p]=sa[i]-w; for (i=1;i\u0026lt;=n;++i) ++cnt[px[i]=rk[sa2[i]]]; for (i=1;i\u0026lt;=m;++i) cnt[i]+=cnt[i-1]; for (i=n;i\u0026gt;=1;--i) sa[cnt[px[i]]--]=sa2[i]; swap(rk,sa2); for (p=0,i=1;i\u0026lt;=n;++i) rk[sa[i]]=sa2[sa[i]]==sa2[sa[i-1]]\u0026amp;\u0026amp;sa2[sa[i]+w]==sa2[sa[i-1]+w]?p:++p; } for (i=1,k=0;i\u0026lt;=n;++i) { if (k) --k; while (s[i+k]==s[sa[rk[i]-1]+k]) ++k; height[rk[i]]=k; } for (i=1;i\u0026lt;=n;++i) { while (top\u0026amp;\u0026amp;height[sta[top]]\u0026gt;=height[i]) --top; f[i]=i-sta[top]; sta[++top]=i; } top=0; sta[++top]=n+1; height[n+1]=0; for (i=n;i\u0026gt;=1;--i) { while (top\u0026amp;\u0026amp;height[sta[top]]\u0026gt;height[i]) --top; out+=(ll)f[i]*(sta[top]-i)*height[i]; sta[++top]=i; } return out; } } a,b,ab; int main() { int n,m,i; scanf(\u0026quot;%s%s\u0026quot;,a.s+1,b.s+1); n=strlen(a.s+1); m=strlen(b.s+1); for (i=1;i\u0026lt;=n;++i) ab.s[i]=a.s[i]; ab.s[n+1]='#'; for (i=1;i\u0026lt;=m;++i) ab.s[n+1+i]=b.s[i]; cout\u0026lt;\u0026lt;ab.calc()-a.calc()-b.calc(); return 0; } ","date":"2019-02-14T11:22:18+08:00","permalink":"https://ouuan.github.io/post/bzoj4566-haoi2016-%E6%89%BE%E7%9B%B8%E5%90%8C%E5%AD%97%E7%AC%A6%E5%90%8E%E7%BC%80%E6%95%B0%E7%BB%84/","tags":["å­—ç¬¦ä¸²","åç¼€æ•°ç»„"],"title":"BZOJ4566 [HAOI2016]æ‰¾ç›¸åŒå­—ç¬¦ï¼ˆåç¼€æ•°ç»„ï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ±‚æœ€é•¿çš„å‡ºç°äº†è‡³å°‘ $k$ æ¬¡çš„å­ä¸²çš„é•¿åº¦ã€‚\nç®€è¦åšæ³• æ±‚å‡º height æ•°ç»„ï¼Œè‹¥ä¸€ä¸ªé•¿ä¸º $x$ çš„å­ä¸²åœ¨åŸä¸²ä¸­å‡ºç°äº†è‡³å°‘ $k$ æ¬¡ï¼Œåˆ™ height æ•°ç»„ä¸­ä¸€å®šå­˜åœ¨è‡³å°‘ $k-1$ ä¸ª è¿ç»­çš„å¤§äºç­‰äº $x$ çš„å€¼ã€‚æ‰€ä»¥ï¼Œé—®é¢˜å°±è½¬åŒ–æˆäº†ï¼šæ±‚ height æ•°ç»„ä¸­ æ¯è¿ç»­ $k-1$ ä¸ªæ•°çš„æœ€å°å€¼ çš„æœ€å¤§å€¼ã€‚å³ï¼š$a_i=\\min\\{height_{i..i+k-2}\\}$ï¼Œæ±‚ $a_i$ çš„æœ€å¤§å€¼ã€‚å¯ä»¥ç”¨RMQ/å¹³è¡¡æ ‘/çº¿æ®µæ ‘/multisetè§£å†³ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;set\u0026gt; using namespace std; const int N=40010; int n,k,a[N],sa[N],rk[N],sa2[N],px[N],cnt[1000010],height[N],ans; multiset\u0026lt;int\u0026gt; t; int main() { int i,j,w,p,m=1000000; scanf(\u0026quot;%d%d\u0026quot;,\u0026amp;n,\u0026amp;k); --k; for (i=1;i\u0026lt;=n;++i) scanf(\u0026quot;%d\u0026quot;,a+i); for (i=1;i\u0026lt;=n;++i) ++cnt[rk[i]=a[i]]; for (i=1;i\u0026lt;=m;++i) cnt[i]+=cnt[i-1]; for (i=n;i\u0026gt;=1;--i) sa[cnt[rk[i]]--]=i; for (w=1;w\u0026lt;n;w\u0026lt;\u0026lt;=1,m=p) { memset(cnt,0,sizeof(cnt)); for (p=0,i=n;i\u0026gt;n-w;--i) sa2[++p]=i; for (i=1;i\u0026lt;=n;++i) if (sa[i]\u0026gt;w) sa2[++p]=sa[i]-w; for (i=1;i\u0026lt;=n;++i) ++cnt[px[i]=rk[sa2[i]]]; for (i=1;i\u0026lt;=m;++i) cnt[i]+=cnt[i-1]; for (i=n;i\u0026gt;=1;--i) sa[cnt[px[i]]--]=sa2[i]; swap(rk,sa2); for (p=0,i=1;i\u0026lt;=n;++i) rk[sa[i]]=sa2[sa[i]]==sa2[sa[i-1]]\u0026amp;\u0026amp;sa2[sa[i]+w]==sa2[sa[i-1]+w]?p:++p; } for (i=1,j=0;i\u0026lt;=n;++i) { if (j) --j; while (a[i+j]==a[sa[rk[i]-1]+j]) ++j; height[rk[i]]=j; } for (i=1;i\u0026lt;=n;++i) { t.insert(height[i]); if (i\u0026gt;k) t.erase(t.find(height[i-k])); ans=max(ans,*t.begin()); } cout\u0026lt;\u0026lt;ans; return 0; } ","date":"2019-02-14T11:21:26+08:00","permalink":"https://ouuan.github.io/post/p2852-usaco06dec-milk-patterns%E5%90%8E%E7%BC%80%E6%95%B0%E7%BB%84/","tags":["å­—ç¬¦ä¸²","åç¼€æ•°ç»„"],"title":"P2852 [USACO06DEC]Milk Patternsï¼ˆåç¼€æ•°ç»„ï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯æ¬¡ä»é¦–æˆ–å°¾å–ä¸€ä¸ªå­—ç¬¦ç»„æˆå­—ç¬¦ä¸²ï¼Œé—®æ‰€æœ‰èƒ½å¤Ÿç»„æˆçš„å­—ç¬¦ä¸²ä¸­å­—å…¸åºæœ€å°çš„ä¸€ä¸ªã€‚\nç®€è¦åšæ³• æš´åŠ›åšæ³•å°±æ˜¯æ¯æ¬¡æœ€å $O(n)$ åœ°åˆ¤æ–­å½“å‰åº”è¯¥å–é¦–è¿˜æ˜¯å°¾ï¼Œåªéœ€ä¼˜åŒ–è¿™ä¸€åˆ¤æ–­è¿‡ç¨‹å³å¯ã€‚\nå°†åŸä¸²reverseåæ‹¼æ¥åœ¨åŸä¸²åï¼Œå¹¶åœ¨ä¸­é—´åŠ ä¸Šä¸€ä¸ªæ²¡å‡ºç°è¿‡çš„å­—ç¬¦ï¼ˆå¦‚ # ï¼‰ï¼Œæ±‚SAï¼Œå³å¯ $O(1)$ å®Œæˆè¿™ä¸€åˆ¤æ–­ã€‚\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cstring\u0026gt; using namespace std; const int N=1000010; char s[N]; int n,sa[N],sa2[N\u0026lt;\u0026lt;1],rk[N\u0026lt;\u0026lt;1],px[N],cnt[N]; int main() { int i,w,m=200,p,l=1,r,tot=0; cin\u0026gt;\u0026gt;n; r=n; for (i=1;i\u0026lt;=n;++i) while (!isalpha(s[i]=getchar())); for (i=1;i\u0026lt;=n;++i) rk[i]=rk[2*n+2-i]=s[i]; n=2*n+1; for (i=1;i\u0026lt;=n;++i) ++cnt[rk[i]]; for (i=1;i\u0026lt;=m;++i) cnt[i]+=cnt[i-1]; for (i=n;i\u0026gt;=1;--i) sa[cnt[rk[i]]--]=i; for (w=1;w\u0026lt;n;w\u0026lt;\u0026lt;=1,m=p) { memset(cnt,0,sizeof(cnt)); for (p=0,i=n;i\u0026gt;n-w;--i) sa2[++p]=i; for (i=1;i\u0026lt;=n;++i) if (sa[i]\u0026gt;w) sa2[++p]=sa[i]-w; for (i=1;i\u0026lt;=n;++i) ++cnt[px[i]=rk[sa2[i]]]; for (i=1;i\u0026lt;=m;++i) cnt[i]+=cnt[i-1]; for (i=n;i\u0026gt;=1;--i) sa[cnt[px[i]]--]=sa2[i]; swap(sa2,rk); for (p=0,i=1;i\u0026lt;=n;++i) rk[sa[i]]=sa2[sa[i]]==sa2[sa[i-1]]\u0026amp;\u0026amp;sa2[sa[i]+w]==sa2[sa[i-1]+w]?p:++p; } while (l\u0026lt;=r) { printf(\u0026quot;%c\u0026quot;,rk[l]\u0026lt;rk[n+1-r]?s[l++]:s[r--]); if ((++tot)%80==0) puts(\u0026quot;\u0026quot;); } return 0; } ","date":"2019-02-14T11:20:59+08:00","permalink":"https://ouuan.github.io/post/p2870-usaco07dec-best-cow-line-gold%E5%90%8E%E7%BC%80%E6%95%B0%E7%BB%84/","tags":["å­—ç¬¦ä¸²","åç¼€æ•°ç»„"],"title":"P2870 [USACO07DEC]Best Cow Line, Goldï¼ˆåç¼€æ•°ç»„ï¼‰"},{"categories":["é¢˜è§£"],"contents":"é¢˜ç›®é“¾æ¥ æ´›è°·\ndarkbzoj\né¢˜æ„ç®€è¿° $n$ ä¸ªå…¥æ ˆæ“ä½œï¼Œ$m$ ä¸ªå‡ºæ ˆæ“ä½œï¼Œé—®åˆæ³•æ“ä½œåºåˆ—æ•°ã€‚\nç®€è¦åšæ³• å€Ÿç”¨ä¸€ä¸‹è¿™ç¯‡é¢˜è§£ï¼ˆçš„å›¾ï¼‰ã€‚\né€‰äº† $x$ ä¸ªæ•°ï¼Œ$1$ ä¸ $0$ ä¸ªæ•°ä¹‹å·®ä¸º $y$ï¼Œå¦‚ä¸‹å›¾ï¼š\nä¸è€ƒè™‘é™åˆ¶æ¡ä»¶ï¼Œæ–¹æ¡ˆæ•°ä¸ºä» $(0,0)$ åˆ° $(n+m,n-m)$ çš„æŠ˜çº¿æ•°ï¼Œå³ä» $n+m$ æ¬¡æ“ä½œä¸­é€‰æ‹© $m$ æ¬¡å‘ä¸‹ï¼š $\\binom{n+m}m$ã€‚è€ƒè™‘æŸä¸€ç§ä¸åˆæ³•çš„æƒ…å†µï¼ŒæŠŠè¿™æ¡æŠ˜çº¿ç¬¬ä¸€æ¬¡ç¢°åˆ° $y=-1$ å‰çš„éƒ¨åˆ†ä»¥ $y=-1$ ä¸ºè½´ç¿»æŠ˜ï¼Œè¿™æ ·å°±å»ºç«‹äº† ä» $(0,0)$ åˆ° $(n+m,n-m)$ ä¸”ç¢°åˆ°äº† $y=-1$ çš„æŠ˜çº¿ ä¸ ä» $(0,-2)$ åˆ° $(n+m,n-m)$ çš„æŠ˜çº¿ çš„ä¸€ä¸€å¯¹åº”ï¼Œæ‰€ä»¥ä¸åˆæ³•çš„æƒ…å†µä¸ªæ•°ä¸º $\\binom{n+m}{m-1}$ï¼Œç­”æ¡ˆä¸º $\\binom{n+m}m-\\binom{n+m}{m-1}$ã€‚\nï¼ˆä¸Šé¢çœ‹æ‡‚äº†è¿™æ®µå¯ä»¥ä¸çœ‹ï¼Œè¿™æ®µæ˜¯åºŸè¯è¯æ˜ï¼‰ä¸ºä»€ä¹ˆè¿™ç©æ„æ˜¯åŒå°„ï¼ˆä¸€ä¸€å¯¹åº”ï¼‰..å…¶å®å¾ˆç®€å•ï¼Œæ¯æ¡ ä» $(0,0)$ åˆ° $(n+m,n-m)$ ä¸”ç¢°åˆ°äº† $y=-1$ çš„æŠ˜çº¿ åœ¨ç¬¬ä¸€æ¬¡ç¢°åˆ° $y=-1$ å‰çš„éƒ¨åˆ†ä»¥ $y=-1$ ä¸ºè½´ç¿»æŠ˜å¯ä»¥å¾—åˆ°å”¯ä¸€ä¸€æ¡ ä» $(0,-2)$ åˆ° $(n+m,n-m)$ çš„æŠ˜çº¿ï¼Œè€Œä¸€æ¡ ä» $(0,-2)$ åˆ° $(n+m,n-m)$ çš„æŠ˜çº¿ å¿…ç„¶ä¼šç¢°åˆ° $y=-1$ï¼ŒåŒæ ·å¯ä»¥æŠŠå®ƒåœ¨ç¬¬ä¸€æ¬¡ç¢°åˆ° $y=-1$ å‰çš„éƒ¨åˆ†ä»¥ $y=-1$ ä¸ºè½´ç¿»æŠ˜ï¼Œå°±ä¼šå¾—åˆ°å”¯ä¸€ä¸€æ¡ ä» $(0,0)$ åˆ° $(n+m,n-m)$ ä¸”ç¢°åˆ°äº† $y=-1$ çš„æŠ˜çº¿ã€‚\næœ€ååæ§½ä¸€å¥ã€‚ä½ è°·å®Œå…¨ä¸æ¥å—åšæ³•ç›¸åŒçš„é¢˜è§£ï¼Œæ— æ³•å¯¹å·²æœ‰åšæ³•è¿›è¡Œé˜è¿°ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰å°è¯•åœ¨ä½ è°·å‘é¢˜è§£ã€‚\nä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; using namespace std; typedef long long ll; const int N=1000010; const int mod=20100403; int qpow(int x,int y); int c(int x,int y); int jc[N\u0026lt;\u0026lt;1]; int main() { int n,m; cin\u0026gt;\u0026gt;n\u0026gt;\u0026gt;m; jc[0]=1; for (int i=1;i\u0026lt;=n+m;++i) jc[i]=(ll)jc[i-1]*i%mod; cout\u0026lt;\u0026lt;(c(n+m,m)-c(n+m,m-1)+mod)%mod; return 0; } int qpow(int x,int y) { int out=1; while (y) { if (y\u0026amp;1) out=(ll)out*x%mod; x=(ll)x*x%mod; y\u0026gt;\u0026gt;=1; } return out; } int c(int x,int y) { return (ll)jc[x]*qpow(jc[y],mod-2)%mod*qpow(jc[x-y],mod-2)%mod; } ","date":"2019-02-12T14:56:42+08:00","permalink":"https://ouuan.github.io/post/bzoj1856-scoi2010-%E7%94%9F%E6%88%90%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%BB%84%E5%90%88%E6%95%B0%E5%AD%A6/","tags":["ç»„åˆæ•°å­¦"],"title":"BZOJ1856 [SCOI2010]ç”Ÿæˆå­—ç¬¦ä¸²ï¼ˆç»„åˆæ•°å­¦ï¼‰"},{"categories":["é»‘ç§‘æŠ€"],"contents":"æ„Ÿè°¢ yfz å’Œ mcfx åœ¨ WC è¥å‘˜äº¤æµä¸Šçš„åˆ†äº«ï¼\nç„¶è€Œåªçœ‹é‚£ä¸ªè¯¾ä»¶æ¥å­¦ä¹ æŒ‡ä»¤é›†å¥½åƒç•¥æœ‰å›°éš¾..æ‰€ä»¥æˆ‘æ¥åˆ†äº«ä¸€ä¸‹æˆ‘è‡ªå­¦ä¸€æ™šä¸Šçš„æˆæœã€‚\nå¸Œæœ›èƒ½å¸®åŠ©å¤§å®¶æš´åŠ›è¿‡é¢˜ï¼Œè€ƒåœºä¸Šå†ä¹Ÿå†™ä¸å‡ºæ ‡ç®—ã€‚\n æ³¨ï¼šæœ¬æ–‡çœç•¥äº†æ— æ•°ä¸ª unsignedï¼Œè¯·è‡ªè¡ŒæŠŠæ‰€æœ‰ int è§†ä½œ unsigned intï¼ŒæŠŠæ‰€æœ‰ long long è§†ä½œ unsigned long longã€‚\n é€‚ç”¨èŒƒå›´ ç¯å¢ƒ ä¸è¦å°è¯•åœ¨æ­£å¼OIç«èµ›ä¸­ä½¿ç”¨æŒ‡ä»¤é›†ä¼˜åŒ–ã€‚\nåªé€‚ç”¨äºæä¾›èµ„ç“·çš„ OJï¼Œå…·ä½“åˆ—è¡¨å‚ç…§è¥å‘˜äº¤æµpptï¼š\nsse2ï¼Œavx ä»€ä¹ˆçš„éƒ½æ˜¯æŒ‡ä»¤é›†çš„åå­—ã€‚\nä½œç”¨ é€‚ç”¨äºæ–¹ä¾¿å¯¹è¿ç»­å†…å­˜ç©ºé—´è¿›è¡Œæ‰¹é‡å¤„ç†çš„é¢˜ç›®ã€‚å¤§çº¦å¯ä»¥è§†ä½œæ¯ $8$ ä¸ª int ä¸ºä¸€ä¸ªåˆ†å—ï¼Œå—å†…è¿›è¡Œèµ‹å€¼ã€ä¿®æ”¹ç­‰æ“ä½œå¸¸æ•°ä¸º $1$ï¼Œä¹Ÿå°±å®ç°äº†å¸¸æ•°/=$8$ã€‚å½“ç„¶å¦‚æœæ˜¯ long long å°±åªèƒ½é™¤ä»¥å››ã€‚\nå…·ä½“ä½¿ç”¨ define \u0026amp; pragma \u0026amp; include #define __AVX__ 1 #define __AVX2__ 1 #define __SSE__ 1 #define __SSE2__ 1 #define __SSE2_MATH__ 1 #define __SSE3__ 1 #define __SSE4_1__ 1 #define __SSE4_2__ 1 #define __SSE_MATH__ 1 #define __SSSE3__ 1 #pragma GCC optimize(\u0026quot;Ofast,no-stack-protector,unroll-loops,fast-math\u0026quot;) #pragma GCC target(\u0026quot;sse,sse2,sse3,ssse3,sse4.1,sse4.2,avx,avx2,popcnt,tune=native\u0026quot;) #include \u0026lt;immintrin.h\u0026gt; #include \u0026lt;emmintrin.h\u0026gt;  ç¬¬ä¸€è¡Œæ˜¯ä¼˜åŒ–ï¼Œå¦‚æœä½ éƒ½ç”¨æŒ‡ä»¤é›†äº†å½“ç„¶æ˜¯èƒ½ä¼˜åŒ–å°½é‡ä¼˜åŒ–ã€‚\nç¬¬äºŒè¡Œæ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ä½ è¦ä½¿ç”¨æŒ‡ä»¤é›†ã€‚\nåé¢ä¸¤ä¸ªå¤´æ–‡ä»¶æ˜¯ C++ å°†æŒ‡ä»¤é›†å°è£…æˆäº†å‡½æ•°ï¼Œè¿™æ ·å°±ä¸ç”¨åœ¨ä»£ç ä¸­å†…è”æ±‡ç¼–äº†ã€‚\nå˜é‡ç±»å‹ å¤§çº¦æœ‰ __m256i __m256 __m256d ä¸‰ç§ï¼Œåˆ†åˆ«å­˜å‚¨ long longï¼Œfloat å’Œ doubleï¼Œå®é™…ä¸Š __m256i ä¹Ÿå¯ä»¥ç”¨æ¥å­˜å‚¨ intã€‚\næŒ‡ä»¤ä½¿ç”¨ å¯ä»¥åœ¨ä¸€ä¸ªç¥å¥‡çš„ç½‘ç«™æŸ¥éœ€è¦çš„æŒ‡ä»¤ï¼Œå·¦è¾¹é€‰æŒ‡ä»¤é›†ä»¥åŠæŒ‡ä»¤ç±»å‹ï¼Œå³è¾¹æ˜¯æŒ‡ä»¤ï¼Œç‚¹å¼€æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹å‡½æ•°åŸå‹ä»¥åŠä¼ªä»£ç ã€‚\nè¿™é‡Œåˆ—å‡ æ¡å¸¸ç”¨æŒ‡ä»¤ï¼š\n__m256i _mm256_set_epi32 (int e7, int e6, int e5, int e4, int e3, int e2, int e1, int e0)ï¼šå‚æ•°æ˜¯å…«ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªâ€œåˆ†å—â€é‡Œçš„æ•°ï¼Œæ³¨æ„æ˜¯é€†åºçš„ã€‚è¿”å›å€¼æ˜¯ä¸€ä¸ªå«è¿™å…«ä¸ªæ•°çš„â€œåˆ†å—â€ã€‚\n__m256i _mm256_set_epi64x (__int64 e3, __int64 e2, __int64 e1, __int64 e0)ï¼šå’Œä¸Šé¢ä¸€æ ·ï¼Œåªä¸è¿‡æ˜¯ $64$ ä½æ•´æ•°ï¼Œä¹Ÿå°±æ˜¯ long longã€‚\n__m256i _mm256_set1_epi32 (int a)ï¼šç›¸å½“äº _mm256_set_epi32(a,a,a,a,a,a,a,a)ã€‚\n__m256i _mm256_add_epi32 (__m256i a, __m256i b)ï¼šæŠŠä¸¤ä¸ªâ€œåˆ†å—â€çš„å¯¹åº”ä½ç½®åˆ†åˆ«ç›¸åŠ ï¼Œè¿”å›ç»“æœã€‚\n__m256i _mm256_cmpeq_epi32 (__m256i a, __m256i b)ï¼šåˆ¤æ–­ä¸¤ä¸ªâ€œåˆ†å—â€çš„å¯¹åº”ä½ç½®æ˜¯å¦ç›¸ç­‰ï¼Œè‹¥ç›¸ç­‰åˆ™è¿”å›çš„â€œåˆ†å—â€å¯¹åº”ä½ç½®æ˜¯ 0xffffffffï¼Œå¦åˆ™æ˜¯ 0ã€‚\n__m256i _mm256_cmpgt_epi32 (__m256i a, __m256i b)ï¼šå’Œä¸Šé¢ä¸€æ ·ï¼Œåªä¸è¿‡æ¯”è¾ƒç¬¦æ˜¯å¤§äºè€Œä¸æ˜¯ç›¸ç­‰ã€‚\n__m256i _mm256_and_si256 (__m256i a, __m256i b)ï¼šè¿”å›ä¸¤ä¸ªâ€œåˆ†å—â€çš„æŒ‰ä½ä¸ï¼Œå¯ä»¥é…åˆä¸Šé¢ä¸¤æ¡æ¯”è¾ƒæŒ‡ä»¤æ¥ä½¿ç”¨ã€‚\nè®¿é—®æ•°æ® å¯ä»¥ç›´æ¥é€šè¿‡ä¸‹æ ‡è®¿é—®ï¼š\n#include \u0026lt;cstdio\u0026gt; #pragma GCC optimize(\u0026quot;Ofast,no-stack-protector,unroll-loops,fast-math\u0026quot;) #pragma GCC target(\u0026quot;sse,sse2,sse3,ssse3,sse4.1,sse4.2,avx,avx2,popcnt,tune=native\u0026quot;) #include \u0026lt;immintrin.h\u0026gt; #include \u0026lt;emmintrin.h\u0026gt; __m256i a; int main() { a=_mm256_set_epi32(1,2,3,4,5,6,7,8); printf(\u0026quot;%d\u0026quot;,a[2]); return 0; }  ä½ ä»¬å¯ä»¥çŒœçŒœè¿™ä¸ªçš„ç»“æœæ˜¯ä»€ä¹ˆã€‚\nç­”æ¡ˆæ˜¯..4ã€‚\nä¸ºä»€ä¹ˆå‘¢ï¼Œé¦–å…ˆ _mm256_set_epi32 çš„å‚æ•°æ˜¯é€†åºçš„ï¼Œæ‰€ä»¥å®é™…ä¸Šå­˜å‚¨çš„æ•°é¡ºåºæ˜¯ 8,7,6,5,4,3,2,1ã€‚å…¶æ¬¡ï¼Œ__m256i ç±»å‹æ˜¯å­˜å‚¨ long long çš„ï¼Œæ‰€ä»¥ç›´æ¥é€šè¿‡ä¸‹æ ‡è®¿é—®å®é™…ä¸Šæ˜¯åœ¨è®¿é—® long longï¼Œå¦‚æœ cout\u0026lt;\u0026lt;a[2]å°±ä¼šè¿”å› 12884901892ï¼ˆ$3\\times2^{32}+4$ï¼‰ã€‚æ‰€ä»¥ï¼Œè¿™å¥è¯å®é™…ä¸Šæ˜¯åœ¨ printf(\u0026quot;%d\u0026quot;,12884901892ll);ã€‚\né‚£ä¹ˆå¦‚ä½•è®¿é—® intï¼ˆç”šè‡³ shortï¼Œå¦‚æœé¢˜ç›®å…è®¸è¿™æ ·å°±å¯ä»¥å¸¸æ•°é™¤ä»¥ $16$ï¼‰å‘¢ï¼Ÿ\nå…¶å®æä¸ªæŒ‡é’ˆå°±å¯ä»¥äº†ï¼š\na=_mm256_set_epi32(1,2,3,4,5,6,7,8); int *b=(int *)\u0026amp;a; printf(\u0026quot;%d\u0026quot;,b[2]);  è¿™æ ·å­çš„è¾“å‡ºå°±æ˜¯ $6$ äº†ã€‚\nç”¨è¿™ç§æ–¹æ³•å°±å¯ä»¥æ–¹ä¾¿åœ°å¤„ç†åºåˆ—é—®é¢˜äº†ï¼š\n#include \u0026lt;cstdio\u0026gt; #pragma GCC optimize(\u0026quot;Ofast,no-stack-protector,unroll-loops,fast-math\u0026quot;) #pragma GCC target(\u0026quot;sse,sse2,sse3,ssse3,sse4.1,sse4.2,avx,avx2,popcnt,tune=native\u0026quot;) #include \u0026lt;immintrin.h\u0026gt; #include \u0026lt;emmintrin.h\u0026gt; int* b; __m256i a[10],x; int main() { int i; b=(int *)\u0026amp;a; for (i=0;i\u0026lt;80;++i) scanf(\u0026quot;%d\u0026quot;,b+i); x=_mm256_set1_epi32(233); for (i=0;i\u0026lt;10;++i) a[i]=_mm256_add_epi32(a[i],x); for (i=0;i\u0026lt;80;++i) printf(\u0026quot;%d \u0026quot;,b[i]); return 0; }  ä¸Šé¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œè¯»å…¥ $80$ ä¸ªæ•°ï¼Œç„¶åè¾“å‡ºå®ƒä»¬åŠ ä¸Š $233$ çš„ç»“æœã€‚\nä¾‹é¢˜ è¿™ç§ä¸œè¥¿ä¸ºä»€ä¹ˆè¿˜ä¼šæœ‰ä¾‹é¢˜å•Šã€‚\næ•™ä¸»çš„é­”æ³•ï¼Œè¿™é¢˜æ¯”è¾ƒç®€å•ï¼ˆåºŸè¯æš´åŠ›å½“ç„¶ç®€å•ï¼‰ã€‚\nã€æ¨¡æ¿ã€‘çº¿æ®µæ ‘1ï¼Œè¿™é¢˜å…¶å®æ˜¯æœ€ç®€å•çš„ï¼Œç„¶è€Œç”±äº dl å‡ºé¢˜äººæŠŠå€¼åŸŸæåˆ°äº† long longï¼Œå¸¸æ•°åªèƒ½é™¤ä»¥å››ï¼Œéœ€è¦å¡å¡å¸¸ï¼Œå¤šæäº¤å‡ æ¬¡æ‰èƒ½è¿‡ã€‚\n[Ynoi2018]äº”å½©æ–‘æ–“çš„ä¸–ç•Œï¼Œç¥å¸æ€’è‰¹lxlæ ‡ç®—çš„è¯¾ä»¶ä¾‹é¢˜ã€‚\nSimple Treeï¼Œè¿™ä¸ªè¿˜è¦æ ‘å‰–ï¼Œåªä¸è¿‡ä¹Ÿè¿˜å¥½ï¼Œç¥å¸æ˜¯ç›´æ¥å†…åµŒæ±‡ç¼–å†™çš„ï¼Œæ²¡æœ‰æµ‹è¿‡ç”¨å‡½æ•°èƒ½ä¸èƒ½è¿‡..\nç„¶åä»¥æ•™ä¸»çš„é­”æ³•ä¸ºä¾‹è®²ä¸€ä¸‹ä»£ç ï¼š\n#include \u0026lt;cstdio\u0026gt; #pragma GCC optimize(\u0026quot;Ofast,no-stack-protector,unroll-loops,fast-math\u0026quot;) #pragma GCC target(\u0026quot;sse,sse2,sse3,ssse3,sse4.1,sse4.2,avx,avx2,popcnt,tune=native\u0026quot;) #include \u0026lt;immintrin.h\u0026gt; #include \u0026lt;emmintrin.h\u0026gt; const int N=1000010; int n,m,tot,*a; __m256i A[N\u0026gt;\u0026gt;3]; char op[10]; void modify(int l,int r,int x) { while ((l\u0026amp;7)\u0026amp;\u0026amp;l\u0026lt;r) a[l++]+=x; //å¤„ç†å·¦è¾¹ä¸æ˜¯æ•´å—çš„éƒ¨åˆ†ï¼Œå’Œåˆ†å—çš„å¤„ç†æ–¹æ³•æ˜¯ä¸€æ ·çš„ if (l==r) return; while (r\u0026amp;7) a[--r]+=x; //å¤„ç†å³è¾¹ä¸æ˜¯æ•´å—çš„éƒ¨åˆ† if (l==r) return; __m256i t=_mm256_set1_epi32(x); //å‰©ä¸‹çš„éƒ¨åˆ†æ•´å—åŠ ä¸Šx for (l\u0026gt;\u0026gt;=3,r\u0026gt;\u0026gt;=3;l\u0026lt;r;++l) A[l]=_mm256_add_epi32(A[l],t); } int query(int l,int r,int x) { int out=0; while ((l\u0026amp;7)\u0026amp;\u0026amp;l\u0026lt;r) out+=int(a[l++]\u0026gt;=x); //å¤„ç†å·¦è¾¹ä¸æ˜¯æ•´å—çš„éƒ¨åˆ† if (l==r) return out; while (r\u0026amp;7) out+=int(a[--r]\u0026gt;=x); //å¤„ç†å³è¾¹ä¸æ˜¯æ•´å—çš„éƒ¨åˆ† if (l==r) return out; __m256i t=_mm256_set1_epi32(1); //è¿™ä¸ª1æ˜¯æ¯ä¸ªå¤§äºç­‰äºxçš„æ•°çš„è´¡çŒ® __m256i ans=_mm256_set1_epi32(0); //è¿™ä¸ªansæ˜¯ç”¨æ¥å­˜ç­”æ¡ˆçš„ __m256i cp=_mm256_set1_epi32(x-1); //è¿™ä¸ªæ˜¯ç”¨æ¥æ¯”è¾ƒçš„ï¼Œé¢˜ç›®ä¸­æ˜¯å¤§äºç­‰äºï¼Œæ‰€ä»¥å’Œx-1æ¯”è¾ƒ for (l\u0026gt;\u0026gt;=3,r\u0026gt;\u0026gt;=3;l\u0026lt;r;++l) ans=_mm256_add_epi32(ans,_mm256_and_si256(t,_mm256_cmpgt_epi32(A[l],cp))); //è¿™ä¸ªæ„ä¼šä¸€ä¸‹ï¼Œä½œç”¨æ˜¯æ•°å½“å‰å—æœ‰å‡ ä¸ªå¤§äºx-1çš„æ•° for (int i=0;i\u0026lt;4;++i) out+=(ans[i]\u0026amp;0xffffffff)+(ans[i]\u0026gt;\u0026gt;32); //æœ€åç»Ÿè®¡ç­”æ¡ˆï¼Œå› ä¸ºans[i]æ˜¯ä¸€ä¸ªlong longï¼Œæ‰€ä»¥è¦å‰32ä½å’Œå32ä½åˆ†åˆ«ç»Ÿè®¡ return out; } int main() { int i,l,r,x,aa[8]; scanf(\u0026quot;%d%d\u0026quot;,\u0026amp;n,\u0026amp;m); a=(int*)\u0026amp;A; for (i=0;i\u0026lt;n;++i) scanf(\u0026quot;%d\u0026quot;,a+i); while (m--) { scanf(\u0026quot;%s%d%d%d\u0026quot;,op,\u0026amp;l,\u0026amp;r,\u0026amp;x); if (op[0]=='M') modify(l-1,r,x); else printf(\u0026quot;%d\\n\u0026quot;,query(l-1,r,x)); } return 0; }  ","date":"2019-02-01T14:26:52+08:00","permalink":"https://ouuan.github.io/post/n%E6%96%B9%E8%BF%87%E7%99%BE%E4%B8%87-%E6%9A%B4%E5%8A%9B%E7%A2%BE%E6%A0%87%E7%AE%97%E6%8C%87%E4%BB%A4%E9%9B%86%E4%BC%98%E5%8C%96%E7%9A%84%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/","tags":["å¸¸æ•°ä¼˜åŒ–"],"title":"næ–¹è¿‡ç™¾ä¸‡ æš´åŠ›ç¢¾æ ‡ç®—â€”â€”æŒ‡ä»¤é›†ä¼˜åŒ–çš„åŸºç¡€ä½¿ç”¨"},{"categories":["æ¸¸è®°"],"contents":"åˆåˆ°äº† Kanon çš„å­£èŠ‚å‘¢ï¼Œå¿«ä¹çš„å†¬çœ ç”Ÿæ´»å¼€å§‹äº†_(:Ğ·ã€âˆ )_\nDay 0/-8 Day -1 è¢«å½’åˆ°å¹¿äºŒé¿å¯’è®°å»äº†..\nä¸Šåˆåœ¨æ°´ç¾¤çš„æ—¶å€™åæ§½ Kanon ç»“å±€ï¼Œç„¶åå’Œ yfz ç¨å¾®èŠäº†ä¸€ä¸‹ï¼Œåˆçœ‹äº†çœ‹èŒç™¾ï¼Œçš„ç¡®ã‚ã‚†å°±æ˜¯å’Œé£å­ã€é¢ç å·®ä¸å¤šçš„æ€å¿µä½“é¸­ï¼Œä¸ºä»€ä¹ˆæˆ‘ä¼šè§‰å¾—çœ‹ä¸æ‡‚å‘¢..å¤§çº¦ä¸æ­¢æ˜¯å› ä¸ºã‚ã‚†çš„å­˜åœ¨ï¼Ÿ\nä¸‹åˆåªåšäº†ä¸€é“é¢˜\u0026hellip;æ·€ç²‰è´¨ç«Ÿç„¶èƒ½æŠŠ solve(rt) å†™æˆ solve(v)\u0026hellip;é€€å½¹å§\nç„¶åä¸çŸ¥é“ä¸ºä»€ä¹ˆå»è¯•äº†ä¸‹è‡ªèµ°æ£‹ï¼Œè¿ç»­å«åº•äº†ä¸€ä¸‹åˆï¼Œç®—æ˜¯æ˜ç¤ºWCå«åº•äº†ã€‚\nRNGå±…ï¼ˆguoï¼‰ç„¶è¿è·ªä¸¤æŠŠï¼Œç»§ç»­æš—ç¤ºçªWCçš„å‘½è¿ã€‚\nDay 1/-7 ä¸ŠåˆæŠ¥åˆ°çš„æ—¶å€™æ²¡èƒ½å’Œ BlackRedRabbit é¢åŸºï¼Œåªä¸è¿‡è¯•æœºçš„æ—¶å€™å‘ç°brrå°±åœ¨çªå·¦è¾¹çš„å·¦è¾¹çš„å·¦è¾¹ï¼Œç„¶åå°±æ„‰å¿«çš„é¢åŸºäº†ã€‚\nå“¦å¯¹äº†ï¼Œæ™šä¸Šè·Ÿ jxl è¿˜æœ‰ hyf ä½ã€‚å¥½åƒæ˜¯å¥³ç”Ÿå®¿èˆï¼Ÿè¢«å­æ˜¯ç²‰çš„..ç„¶è€Œå¬è¯´Aæ ‹ä½å¥³ç”Ÿï¼ŒBæ ‹ä½ç”·ç”Ÿï¼Œæ„Ÿè§‰ä¸ä¼šç‰¹æ„åè¿‡æ¥..\nè¯•æœºé¢˜ç›®T1ï¼ˆå¬åˆ«äººè¯´ï¼‰æ˜¯ACè‡ªåŠ¨æœºä¸Šdp..æœ¬æ¥å°±ä¸ä¼šï¼ŒACè‡ªåŠ¨æœºä¹Ÿå‡ å¹´æ²¡æ‰“è¿‡äº†\u0026hellip;T2æ˜¯THUSC2017æç­”ï¼Œäºæ˜¯æ²¡åšè¯•æœºé¢˜ï¼Œæ‰“äº†ä¸ªNTTï¼Œè¿˜æ²¡ä¸€éæ‰“å¯¹..ä¸¢äººã€‚\nä¸‹åˆæœç„¶å«åº•äº†..T1ä¸€ä¸ªç®€å• $12$ åˆ†æš´åŠ›æ‰“äº† 1hï¼Œç„¶å T2 çš„ç¬¬ä¸€æ¡£ $26$ åˆ†å†™äº† 1h æ‰è¿‡å¤§ï¼ˆxiaoï¼‰æ ·ä¾‹ï¼Œäº¤ä¸Šå»æ²¡è¿‡pt..ç„¶ååˆè°ƒäº† 50minï¼Œè¿˜æ˜¯æ²¡è¿‡..ç„¶åèŠ±äº† 0.5h é‡æ„ä»£ç ï¼Œè«åå…¶å¦™å°±è¿‡äº†..T3çœ‹äº†çœ‹æ„Ÿè§‰ç¬¬ä¸€æ¡£éƒ½ä¸ä¼šï¼Œå›å»çœ‹T2ï¼ŒT2æ˜¯ç­”å¯¹ç¬¬ä¸€é—®æœ‰ $60%$ çš„åˆ†é‚£ç§ï¼Œå‘ç°è‡ªå·±ä¼šå¦ä¸€æ¡£çš„ $27\\times60%$ï¼Œç„¶ååˆèŠ±äº† 50min å†™.. æœ€å 30min çš„æ—¶å€™å‘ç° T2 è¿˜æœ‰ $43\\times 60%$ å¯ä»¥ç”¨å¯æŒä¹…åŒ–å¹¶æŸ¥é›†å†™ï¼Œç„¶è€Œæ—¶é—´ä¸å¤Ÿäº†\u0026hellip;\nT2 ç¬¬ä¸€æ¬¡å†™äº† 6K\u0026hellip;ï¼ˆèœæ­»äº†è¿ 6K éƒ½æ²¡å†™è¿‡..ï¼‰ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡ç”¨ namespace å†™ subtaskã€‚\nif (r\u0026lt;=10\u0026amp;\u0026amp;c\u0026lt;=10) { using namespace subtask1; }  è¿™æ ·å†™çœŸçš„çˆ½_(:Ğ·ã€âˆ )_\nT1æ˜¯é“æœŸæœ›ï¼Œè¾“å‡ºæ ¼å¼æ˜¯æœ€ç®€åˆ†æ•°ï¼Œè€Œä¸”ä¸çº¦åˆ†çš„è¯æ•°ä¼šéå¸¸å¤§ã€‚å½“æ—¶æˆ‘å°±åœ¨æƒ³ä¸ºä»€ä¹ˆä¸å–æ¨¡..ç„¶åå‡ºè€ƒåœºå¬è¯´ T1 çš„å¼å­æœ‰ä¸€å †å¯ä»¥çº¦åˆ†ï¼Œå‰©ä¸‹çš„å½¢å¼ç‰¹åˆ«ç®€å•\u0026hellip;\næˆ‘çš„æ¸¸è®°å¥½åƒç»å¸¸ä¸å†™é¢˜ç›®å°±çbb..è¿˜æ˜¯ç®€å•è¯´ä¸€ä¸‹å§ã€‚\nT1ï¼šç»™ä¸¤ä¸ªæ•°åˆ— $a_{1..n}$, $b_{1..n}$ï¼Œå¤šç»„è¯¢é—®ï¼Œæ¯æ¬¡ç»™ $c$, $d$, $e$, $f$ï¼Œéœ€è¦ä» $a_{c..d}$ å’Œ $b_{e..f}$ ä¸­å„å– $d-c+1$ ä¸ªæ•°ç„¶åä¸¤ä¸¤é…å¯¹ï¼Œé—®é…å¯¹çš„ä¸¤ä¸ªæ•°ç›¸åŒçš„å¯¹æ•°çš„æœŸæœ›ï¼Œä»¥æœ€ç®€åˆ†æ•°å½¢å¼è¾“å‡ºã€‚$n$ å’Œè¯¢é—®æ•°å¥½åƒå¤§çº¦æ˜¯ $10^5$ ï¼Œå› ä¸ºåªæ‰“äº†ç¬¬ä¸€æ¡£æš´åŠ›ä¸è®°å¾—äº†\u0026hellip;\nT2ï¼šä¸€ä¸ªç½‘æ ¼å›¾ï¼Œæœ‰ä¸¤ç§è¿è¾¹ï¼š\n ä¸€æ•´è¡Œ/åˆ—ä¸¤ä¸¤è¿è¾¹ã€‚ ä¸€äº›ç‰¹æ®Šç‚¹ä¹‹é—´ä¸¤ä¸¤è¿è¾¹ã€‚  æœ‰ $m$ ä¸ªè¢«ç ´åçš„ç‚¹ï¼Œåœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼ˆæ¯ä¸ªè¢«ç ´åçš„ç‚¹ç‹¬ç«‹ï¼‰è¢«ä¿®å¥½ï¼Œä¿®å¥½å‰æ‰€åœ¨è¡Œ/åˆ—çš„æ•´è¡Œ/åˆ—è¿è¾¹ä¸ä¼šè¿ä¸Šã€‚æ¯ä¸ªç‰¹æ®Šç‚¹åœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼ˆæ¯ä¸ªç‰¹æ®Šç‚¹ç‹¬ç«‹ï¼‰å‰ä¸ä¼šå’Œå…¶å®ƒç‰¹æ®Šç‚¹è¿è¾¹ã€‚å¤šç»„è¯¢é—®é—®ä¸¤ä¸ªç‚¹è”é€šçš„æœ€æ—©æ—¶é—´ç‚¹ï¼Œä»¥åŠè¿™ä¸ªæ—¶é—´ç‚¹çš„æœ€çŸ­è·¯ã€‚\nç½‘æ ¼å¤§å° $10^5$ï¼Œè¯¢é—®æ•° $10^6$ï¼Œè¢«ç ´åçš„ç‚¹æ•°å’Œç‰¹æ®Šç‚¹æ•°éƒ½æ˜¯ $2\\times 10^5$ã€‚\nT3ï¼šæ±‚æœ‰å¤šå°‘ä¸ªä¸åŒçš„é•¿åº¦ä¸è¶…è¿‡ $m$ çš„ åŒºé—´å–minæ“ä½œåºåˆ— ä½¿å¾—è¿›è¡Œæœ€åä¸€æ¬¡æ“ä½œååŸåºåˆ—æ°å¥½å˜æˆæŒ‡å®šåºåˆ—ã€‚å€¼åŸŸå’Œåºåˆ—å¤§å°ä¸€æ ·éƒ½æ˜¯ $n$ã€‚$n$ å¥½åƒæ˜¯ä¸€ä¸¤ç™¾çš„æ ·å­ï¼Œ$m$ $10^9$ã€‚\næ•°æ®èŒƒå›´å¯èƒ½è®°é”™äº†ï¼Œé¢˜æ„å¯èƒ½ç®€è¿°æˆçœ‹ä¸æ‡‚äº†..QAQå°±è¿™æ ·å§ã€‚\næ™šä¸Šå¼€è¥ä»ªå¼ï¼Œå…ˆæ˜¯æ¸…åç³»ä¸»ä»»è‡ªå¹ï¼Œç„¶åæ˜¯å¹¿äºŒæ ¡é•¿ç»§ç»­å¹+æ‹‰æ‹¢å’ŒTHUçš„å…³ç³»ï¼Œç„¶åè¯·ä¸€ä¸ªç°åœ¨åœ¨THUçš„NOI2017Auçˆ·ä¸Šå°å¿µäº†ç¯‡æ¸¸è®°\u0026hellip;æ„Ÿè§‰é‚£å¦‚æœæ˜¯ç¯‡æ¸¸è®°è¿˜æ˜¯å†™çš„æŒºå¥½çš„ï¼Œç„¶è€Œå½“ä¼—å¿µå‡ºæ¥..ç„¶åè¯·äº†å¹¿äºŒçš„ä¸€ä¸ªå¦¹å­OIer è®²äº†ä¸€ç‚¹ï¼Œå°±ç»“æŸäº†ã€‚\nDay 2/-6 ä»Šå¤©æ˜¯ä¸Šåˆè€ƒè¯•..T1æ˜¯ç»™ä½ ä¸€æ£µæ ‘ï¼Œæ¯ä¸ªç‚¹æœ‰ $a_i$, $b_i$ï¼Œæ¯æ¡è¾¹æœ‰ $c_i$, $d_i$ï¼Œ$u$ åˆ° $v$ çš„è´¹ç”¨ä¸º $\\sum\\limits_{i\\text{ on path }(u,v)}\\min(a_u+c_i,b_u+d_i)$ï¼Œæ±‚æ¯ä¸ªç‚¹åˆ°å…¶å®ƒæ‰€æœ‰ç‚¹çš„è´¹ç”¨ä¹‹å’Œã€‚æ ‘å¤§å° $5\\times 10^5$ï¼Œå€¼åŸŸ $10^5$ã€‚å¼€åœºå…ˆæ‰“äº†ä¸ªæš´åŠ›ï¼Œç„¶åæ„Ÿè§‰å¯ä»¥æšä¸¾æ¯æ¡è¾¹æŠŠæ ‘åˆ†æˆä¸¤åŠï¼Œç„¶åå°±å¯ä»¥è®¡ç®— $\\sum\\limits_{c-d\u0026lt;b-a} c$ å’Œ $\\sum\\limits_{c-d\\ge b-a}d$ æ¥åšï¼Œç„¶è€Œä¸€å¼€å§‹æ²¡æƒ³åˆ°æ€ä¹ˆåšã€‚ç»§ç»­å»æƒ³é“¾çš„éƒ¨åˆ†åˆ†ï¼Œå‘ç°å¯ä»¥ä¸»å¸­æ ‘ï¼Œç„¶åèŠ±äº† $1.5h$ è¿‡ ptã€‚ç„¶åå‘ç°å¯ä»¥ç”¨çº¿æ®µæ ‘åˆå¹¶æ¬åˆ°æ ‘ä¸Šï¼ŒåˆèŠ±äº† $1h$ è¿‡æ‰ ptã€‚åœ¨ THUWC è¿‡ pt è¿˜æ˜¯æŒºçˆ½çš„..\nT2æ˜¯é“é€šè¿‡è¯¢é—®å¾—åˆ°æ ‘çš„å½¢æ€çš„äº¤äº’ï¼Œæ²¡ä»”ç»†çœ‹\u0026hellip;\nT3æ˜¯ç»™å¹³é¢ä¸Šä¸€äº›ç‚¹ï¼Œå®šä¹‰â€œå¥½çš„å¤šè¾¹å½¢â€ä¸ºå–ä¸€äº›ç‚¹æ„æˆçš„æ²¡æœ‰ä¸‰ç‚¹å…±çº¿çš„å‡¸å››è¾¹å½¢ï¼Œæ±‚æ‰€æœ‰â€œå¥½çš„å¤šè¾¹å½¢â€çš„é¢ç§¯çš„å¹³å‡å€¼å’Œæ–¹å·®ï¼Œå¯¹ $998244353$ å–æ¨¡ã€‚ç‚¹æ•° $400$ ï¼Œå€¼åŸŸ $10^9$ã€‚æœ‰ä¸ªç‚¹åœ¨åæ ‡è½´ä¸Šçš„éƒ¨åˆ†åˆ†ï¼Œç„¶è€ŒWAäº†ä¸¤ä¸ªå°æ—¶..è‡³ä»Šä¸çŸ¥é“å“ªé”™äº†..\nä¸­åˆå›å¯å®¤å‘ç°ä¸¤è¾¹éš”å£å¯å®¤åˆ†åˆ«æœ‰ nzhtl1984 å’Œ yyb..ç„¶è€Œæœ€åå’Œ lk é¢åŸºäº†ã€‚\nä¸‹åˆæ¨äº†ä¼šå„¿ Kanonã€‚\nå»åƒæ™šé¥­çš„æ—¶å€™ç¢°è§äº† pr å’Œ lkã€‚\næ™šä¸Šæ˜¯å›¾åƒå¤„ç†é¢˜ï¼š\nä»»åŠ¡ä¸€æŠŠ $B\\times65536+A$ çœ‹æˆ $A\\times65536+B$ï¼Œè°ƒäº† 20min\u0026hellip;\nä»»åŠ¡äºŒä»»åŠ¡ä¸‰ä¹Ÿå†™çš„ç‰¹åˆ«æ…¢ï¼Œæœ€åä»»åŠ¡å››æ²¡æ—¶é—´äº†..\nä¸‰åœºåŠ èµ·æ¥æ²¡åˆ«äººä¸€åœºé«˜ï¼Œwhkwhk\næœ€åç¦»åœºçš„æ—¶å€™å‘ç°äº†è¿™ä¸ªï¼š\né‚£ä¸¤ä¸ªçº¢çº¢çš„æ¡Œé¢å£çº¸æ˜¯ä»Šå¤©çš„æ ·ä¾‹\u0026hellip;\nDay 3/-5 ä»Šå¤©åº”è¯¥æ˜¯æˆ‘æ¥å¹¿äºŒä¹‹åæœ€æœ‰è¶£çš„ä¸€å¤©äº†ï¼Œæœ¬æ¥æ‹äº†ä¸€å †ç…§ç‰‡ï¼Œå½•äº†ä¸€å †è§†é¢‘ï¼Œè¿˜æœ‰ä¸€å †å½•éŸ³ï¼Œå¥½å¤šæƒ³è¯´çš„ã€‚å¯æ˜¯è®°ï¼ˆguï¼‰å¿†ï¼ˆguï¼‰æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œå®ƒä¼šå¸®ä½ ç­›å»é‚£äº›ä¸é‡è¦çš„ï¼Œç•™åœ¨è„‘æµ·ä¸­çš„ä¾¿æ˜¯é‚£äº›çœŸæ­£å€¼å¾—å†™çš„å§ã€‚\nè®²é¢˜ Day2+è®²é¢˜çš„æ—¶å€™å¬åˆ°æœ€å¤šçš„ä¸€å¥è¯å°±æ˜¯â€œç„¶åå°±å¯ä»¥è·³åˆ°â€\u0026hellip;..\nè®²å®Œä¹‹åè¿˜è®²äº†ä¸€äº›å…³äºå›¾åƒçš„å…¶å®ƒå†…å®¹ï¼Œæ¯”å¦‚æŠŠå›¾ç‰‡çš„æŸäº› bit å¼‚æˆ–ä¸€ä¸‹æ¥åŠ å¯†ï¼š\nD1T2çš„è®²é¢˜æ˜¯å¸¦åŠ¨ç”»çš„ï¼Œéå¸¸æœ‰æ„æ€ï¼Œè™½ç„¶æœ‰ä¸€äº›å½•åƒï¼Œç„¶è€Œè¿˜æ˜¯æ”¾å‡ å¼ å›¾ç‰‡å‡‘åˆä¸€ä¸‹å§ï¼š\nå¥½åƒ ctr è¿˜è§‰å¾— D1T2 å¯ä»¥æ”¾ NOIp T2T3 å·¦å³\u0026hellip;\nç„¶åæ˜¯ä»€ä¹ˆ â€åœ†æ¢¦æ¸…åè·¯ä¸Šæœ‰åŠ›çš„æ´åŠ©â€œä»€ä¹ˆçš„\u0026hellip;\nåæ­£è®²é¢˜ç‰¹åˆ«æœ‰æ„æ€ã€‚\næ‰¯çš® ä¸‹åˆæ˜¯æ‰¯çš®ä»‹ç»THUçš„æ—¶é—´ã€‚\nèƒ½å‘å¼¹å¹•ï¼Œæ‰€ä»¥ç°åœºç‰¹åˆ«æ¬¢ä¹ã€‚\nå…ˆæ˜¯ä»‹ç»äº†ç®—åï¼Œç„¶åä»‹ç»äº†ç§‘åï¼Œç„¶åæ˜¯ä¸€ä¸ªå»å¹´THUWCç­¾çº¦ç„¶åè¿›é˜Ÿä»Šå¹´è¿‡æ¥å½“å·¥ä½œäººå‘˜çš„ä»‹ç»è‡ªå·±è¿™ä¸€å¹´çš„ç»å†ï¼Œç„¶åæ˜¯ä¸€ä¸ªäººä»‹ç»äº†ä¸€ä¸‹ç§‘ç ”ç›¸å…³ã€‚\nåæ­£å½“æ—¶æ„Ÿè§‰è¶…æœ‰æ„æ€çš„..ç„¶è€Œä¸å¤ªè®°å¾—ç®—åå…·ä½“è®²äº†å•¥äº†..ç§‘åè®²çš„å°±è®°å¾—æ™ºèƒ½ä½“å¤§èµ›..é‚£ä½ç¥ä»™ lzj è®²çš„å€’è®°å¾—æ¯”è¾ƒæ¸…æ¥šã€‚å¤§çº¦æ˜¯è¯´ä»–ç­¾çº¦åå†™äº†ä¸ªå…‰çº¿è¿½è¸ªçš„å·¥ç¨‹ï¼Œç„¶åå†™äº†ä¸ªâ€œäºŒç»´å±è‚¡å®ˆæœ›â€è¿˜ç°åœºæ¼”ç¤ºäº†ï¼Œä¹‹åè¿˜å»å‚åŠ äº†æ™ºèƒ½ä½“ï¼ˆæ³¨æ„ä»–ç°åœ¨æ‰é«˜ä¸‰..ï¼‰ã€‚ç§‘ç ”ç›¸å…³çš„è®²çš„éå¸¸ç§‘ç ”ï¼Œå¯èƒ½æ˜¯æ¯”è¾ƒç¡¬æ ¸è€Œä¸”äº’åŠ¨/ç©æ¢—ä¸å¤Ÿï¼Œå½“æ—¶ç°åœºä¹Ÿä¸å¤ªæ´»è·ƒï¼Œå¼¹å¹•éƒ½æ²¡ä»€ä¹ˆäººåˆ·\u0026hellip;\nç»“è¥ æ„Ÿè§‰è´µç³»æ‹›ç”Ÿä¸»ä»»çš„æ¼”è®²æ°´å¹³çœŸçš„è¶…æ£’..å¼¹å¹•éƒ½èƒ½è¿…é€Ÿåœ°æ‰¯åˆ°ç›¸å…³è¯é¢˜å¹¶ä¸”ç«‹åˆ»æ‰¯å›åŸæœ¬çš„ä¸»çº¿ï¼Œè¡”æ¥è‡ªç„¶æµç•…ï¼Œæ„Ÿè§‰å¯ä»¥å»å½“ä¸»æ’­ã€‚\nä¸­é€”æäº†ä¸ªé—®é¢˜ï¼Œé—®æˆ‘ä»¬ä¸ºä»€ä¹ˆé€‰æ‹©OIã€‚\næœ‰å›ç­”â€œä¸æƒ³ä¸Šæ–‡åŒ–è¯¾â€â€œä¸æƒ³é«˜è€ƒ_(:Ğ·ã€âˆ )_â€çš„ï¼Œæœ‰å›ç­”â€œå› ä¸ºå…´è¶£ï¼ˆç•¥ç•¥ç•¥â€â€œå¥½ç©â€çš„ï¼Œæœ‰å›ç­”â€œå¸Œæœ›åœ¨æœ‰ç”Ÿä¹‹å¹´è§£å†³æ›¾ç»æ— æ³•è§£å†³çš„é—®é¢˜â€çš„ï¼Œä¹Ÿæœ‰å›ç­”â€œèƒ½ç»“è¯†å¥½å¤šå‰å®³çš„åŒå­¦ï¼â€çš„ã€‚å¯èƒ½å¤§å¤šæ•°äººéƒ½æ˜¯å¦‚æ­¤å§ã€‚å› ä¸ºå…´è¶£å¼€å§‹ï¼Œæ—¶è€Œæœ‰å®å¤§çš„ç†æƒ³ï¼Œæ—¶è€Œåˆä¸ºç°å®æ‰€è¿«ï¼Œæœ€åæ‰å‘ç°ä¸æ˜¯è‡ªå·±èœï¼Œè€Œæ˜¯ç»“è¯†äº†è¶Šæ¥è¶Šå¤šè¶Šæ¥è¶Šå¼ºçš„åŒå­¦ä»¬ã€‚\nçº¦å’•å’•äº†ä¸€ä¸ªå°æ—¶æ‰å‘ï¼Œçªè‡ªç„¶æ˜¯æ²¡æœ‰çš„ï¼Œprç­¾äº†ï¼Œlkç­¾äº†ï¼Œyybç­¾äº†ï¼Œnzhtlshadowice1984ç­¾äº†ï¼Œjokerç­¾äº†ï¼Œçªè®¤è¯†çš„éƒ½ç­¾äº†ã€‚\nä¸€å¤©ä¸‹æ¥é‚£ä¹ˆå¤šçš„æ„Ÿæƒ³ç«Ÿç„¶çŸ­çŸ­å‡ è¡Œå°±å†™å®Œäº†å‘¢\u0026hellip;é—æ†¾æ²¡æœ‰æ‹åˆ°çš„ç…§ç‰‡ä¹Ÿåªæ˜¯å’Œå…¶å®ƒæ‹åˆ°äº†çš„ç…§ç‰‡ä¸€æ ·æ²¡æœ‰è¢«æ”¾ä¸Šæ¥ã€‚\nDay -4 ä»Šå¤©æ—©ä¸Šä¸€èµ·æ¥å°±æ˜¯æ„‰å¿«çš„å·é“ºç›–èµ°äººï¼Œè™½ç„¶è·¯ç¨‹æ¯”å» THUWC çš„æ—¶å€™è¿‘ï¼ˆä»â€œè‹å…ƒâ€ï¼ˆå¥½åƒæ˜¯åˆä¸­éƒ¨ï¼Ÿï¼‰åˆ°â€œäºŒé«˜â€ï¼‰ï¼Œç„¶è€Œè¦æ¬è¢«å­åºŠå•ä»€ä¹ˆçš„..åˆ†äº†ä¸¤è¶Ÿæ¬QAQ\nç„¶åé¢“æ¨äº†ä¸€å¤©ä¸€ä¼šå„¿Kanonï¼Œé­”èŠ‹çš„ç¿»è¯‘çœŸæœ‰æ„æ€ï¼š\næŠ¥åˆ°çš„æ—¶å€™æœ‰ä¸ªç­¾åå¢™ï¼Œä¸­åˆå’Œæ™šä¸Šå„æ‹äº†ä¸€å¼ ï¼Œæ™šä¸Šçš„æ¯”è¾ƒå…¨ï¼ˆåºŸè¯ï¼‰ï¼Œç„¶è€Œä¸­åˆçš„æ‹çš„æ¯”è¾ƒæ¸…æ¥šï¼Œæ‰€ä»¥éƒ½æ”¾ä¸Šæ¥å¥½äº†..\nçœ‹åˆ°çªå†™çš„ \u0026lt;font color=\u0026quot;grey\u0026quot;\u0026gt;ouuan\u0026lt;/font\u0026gt; äº†å—qwq\næ™šä¸Šæ˜¯å¼€å¹•å¼ï¼ŒæŒå£°æœ€çƒ­çƒˆçš„æœ‰ä¸¤ä¸ªåœ°æ–¹ã€‚\nç¬¬ä¸€ä¸ªæ˜¯å¹¿äºŒçš„ä¸€ä¸ªå¦¹å­OIerçš„æ¼”è®²ï¼šâ€œOIåˆ°åº•åœ¨å­¦ä»€ä¹ˆï¼Ÿç­ä¸»ä»»çœ¼ä¸­æœ€ä¼šä¿®ç”µè„‘çš„ä¸€æ‰¹äººï¼Œæ—äººçœ¼ä¸­å‰é€”ä¸€ç‰‡å¹³å¦é€šå‘ç¾å¥½æœªæ¥çš„é“è·¯ï¼ŒåŒç­åŒå­¦çœ¼ä¸­é‚£ä¸ªç»å¸¸æ¶ˆå¤±ä¸çŸ¥é“å»å“ªçš„ç¥ç§˜äººâ€ï¼Œâ€œOI å·²ä¸åªæ˜¯ä¸€ä¸ªç«èµ›ï¼Œä¹Ÿä¸åªæ˜¯ä¸€é—¨å­¦ç§‘ï¼Œè€Œæ˜¯å­˜åœ¨äºç¾¤èŠä¸­ä¸€å¥å¥ Orz å’Œä¸‰ä¸ªç™¾åˆ†å·é‡Œï¼Œå­˜åœ¨äºçœ‹åˆ°åçš„ä¹æ¬¡æ–¹åŠ ä¸ƒæ—¶çš„ç†Ÿæ‚‰æ„Ÿä»¥åŠçœ‹åˆ° 998244353 æ—¶çš„å¿ƒé‡Œé»˜é»˜çš„æ³¢åŠ¨ä¸­ï¼ŒæŠ‘æˆ–æ˜¯ä¸€æ­¥æ­¥åŒ–éš¾ä¸ºç®€ï¼Œæœ€ç»ˆå¾—å‡ºæ­£è§£çš„å–œæ‚¦ï¼Œä¹Ÿå¯èƒ½æ˜¯è‡ªé—­åœºåä¸€ä¸ªäººç‹¬è‡ªæƒ†æ€…çš„èº«å½±â€ã€‚\nç¬¬äºŒä¸ªæœ‰jsé£é™©ï¼Œæ‰€ä»¥..ï¼š å½“NOIç§‘å­¦å§”å‘˜ä¼šä¸»å¸­å¿µåˆ°â€œWCæ€§ä»·æ¯”é«˜â€çš„æ—¶å€™ï¼ˆcopyè¿™è¡Œï¼‰\nDay -3~0 è‡ªé—­ã€‚\næ”¾å‡ å¼ å›¾å¥½äº†ã€‚\næŠŠæ±é‡Œçº¿ï¼ˆæ¨äº†æ¸¸æˆä¹‹åæ›´å–œæ¬¢è¿™ä¸ªç¿»è¯‘äº†..å’Œé¦™é‡Œä¹Ÿæœ‰å§å¦¹çš„æ„Ÿè§‰ï¼‰æ¨å®Œäº†ã€‚ç®—æ˜¯ç†è§£äº†ä¸ºä»€ä¹ˆæ±é‡Œçš„â€œåè¨€â€æ˜¯â€œèµ·ããªã„ã‹ã‚‰å¥‡è·¡ã£ã¦è¨€ã†ã‚“ã§ã™ã‚ˆâ€ï¼Œè¿™å¥è¯æœ‰å¥½å‡ å±‚æ„æ€ï¼Œå…‰æ˜¯çœ‹åŠ¨ç”»ä¸ä¼šæ˜ç™½çš„å§..ä¹Ÿç¨å¾®æ˜ç™½äº†â€œæ¢¦å¢ƒâ€ä¸â€œç¬¬ä¸‰ä¸ªæ„¿æœ›â€æ˜¯æ€ä¹ˆå›äº‹äº†ã€‚è™½ç„¶è¿˜æ˜¯ä¸å®Œå…¨æ‡‚..ï¼ˆéƒ½æ˜¯ä¸åˆç†çš„ï¼Œå¥½åƒä¹Ÿæ²¡ä»€ä¹ˆâ€œå®Œå…¨æ‡‚â€ï¼‰\nç¬¬äºŒåœºè¥å‘˜äº¤æµä¸Š yfz å’Œ mcfx è®²çš„æŒ‡ä»¤é›†çœŸå¥½ç©ã€‚\nDay 1 æ‰“é“ã€‚\nå¼€åœºå…ˆå†™äº† $T1$ $34$ åˆ†ï¼Œä¸€å‡ºè€ƒåœºå°±å¬è¯´è‡ªå·±æŒ‚äº† $8$ åˆ†ã€‚\nç„¶åå»æƒ³ $T3$ äº¤äº’ï¼Œå‘ç°ä¸ä¼šåšï¼Œå…ˆæŠŠå¼ºåˆ¶æ•°æ®åˆ†æ²»çš„ $13$ åˆ†å†™äº†ï¼Œè°ƒäº†ä¸€ä¼šå„¿ï¼Œç»§ç»­æƒ³ $O(n^2)$ã€‚\næ„Ÿè§‰ä¸ä¼šï¼Œè¿™æ—¶å€™å·²ç»è¿‡å» $3.5h$ äº†ï¼ˆé¬¼çŸ¥é“å‰é¢é‚£ç‚¹åˆ†ä¸ºä»€ä¹ˆå†™äº†è¿™ä¹ˆä¹…..ï¼‰ï¼Œå»ç© $T2$ æç­”ï¼Œå‰é¢ $60$ åˆ†è¿˜æ˜¯å¾ˆå¥½å†™çš„ï¼Œç„¶åä½œæ­»çš„æƒ³äº†ä¸€ä¼šå„¿ç¬¬å››ä¸ªç‚¹ï¼Œå‘ç°ä¸ä¼šï¼Œå·²ç»åªå‰© $0.5h$ äº†ã€‚\né—®é¢˜æ˜¯æˆ‘è¿™ä¸ªæ—¶å€™è¿˜åœ¨æƒ³ $T3â€‹$ çš„ $n^2â€‹$ æ€ä¹ˆå†™\u0026hellip;æœ€å $15minâ€‹$ çš„æ—¶å€™å†³å®šå†™ä¸ªéšæœºè¯¢é—®æ‰“è¡¨å¯¹ç…§ï¼Œç›´æ¥éšä¾¿æ‰“äº†ä¸ªè¡¨éƒ½æ²¡æœ‰æ£€æŸ¥ç»“æœæ˜¯å¦ä¸¤ä¸¤ä¸åŒï¼Œæœ¬æ¥è¿˜æŠŠåŸæ¥çš„ä»£ç å¤åˆ¶äº†ä¸€ä»½ï¼Œæœ€å $1minâ€‹$ å†™å¥½çš„æ—¶å€™ç«Ÿç„¶æŠŠä»£ç å¤åˆ¶å›å»ç¼–è¯‘çš„..éšæ‰‹è¾“äº†ä¸ªæ•°æ®ï¼Œä¸€æµ‹ï¼Œæ—¢ä¸æ˜¯ correct ä¹Ÿä¸æ˜¯ incorrectï¼Œç„¶åå°±è€ƒè¯•ç»“æŸäº†..ä¼°è®¡è¿é‚£ $13â€‹$ åˆ†ä¸€èµ·æ²¡äº†ï¼Œçˆ†é›¶äº†ã€‚\nå†™äº†çš„åˆ†ï¼š$34+60+44=138$ï¼ŒCu/Agã€‚\nä¼°åˆ† at è€ƒè¯•ç»“æŸå‰ $15min$ ï¼š$34+60+13=107$ï¼ŒCuã€‚\nä¼°åˆ† of è€ƒè¯•ç»“æŸå‰ $15min$ ï¼š$26+60+13=99$ï¼ŒFe/Cuã€‚\nè€ƒè¯•ç»“æŸåçš„ä¼°åˆ†ï¼š$26+60+0=86$ï¼ŒFeã€‚\nä¿åº•ä¼°åˆ†ï¼š$18+38+0=56$ï¼ŒFeã€‚\næœ€é«˜å¯èƒ½å¾—åˆ†ï¼š$26+60+44=130$ï¼ŒCu/Agã€‚\nDay 1.5 è™½ç„¶åªæœ‰ä¸‹åˆ+æ™šä¸Šï¼Œç„¶è€Œå‘ç”Ÿäº†å¥½å¤šäº‹é¸­ã€‚\nå…ˆæ˜¯ GGF æŠŠé€‰æ‰‹å¤è¯»å¤æµ‹é¸½åˆ°äº†è®²é¢˜å¼€å§‹ä¹‹å..\nç„¶åçªå»çœ‹æˆç»©ï¼Œ$T3$ ç«Ÿç„¶æ²¡æŒ‚ï¼ˆ$13$ï¼‰ï¼Œç„¶è€Œ $T2$ çš„ç¬¬äºŒä¸ªç‚¹è«åæŒ‚äº†..ä»”ç»†çœ‹äº†åŠå¤©éƒ½æ˜¯å¯¹çš„ï¼Œé—®åˆ«äººä¹Ÿæ˜¯å¯¹çš„ï¼Œç¾¤é‡Œæ›´æœ‰è¶£äº†ï¼Œ$O(1)$ çš„é¢˜ç›® $O(n)$ åšæ³•æœ‰ $0$, $6$, $20$ åˆ†çš„..ç„¶åæ‰¾åˆ°äº†å·¥ä½œäººå‘˜ï¼Œå’•äº†ä¸€ä¼šå„¿ä¹‹åå¸®æˆ‘é‡æµ‹è¿‡äº†..ç„¶åå»ç”³è¯‰ï¼Œè¿˜ä¸çŸ¥é“èƒ½ä¸èƒ½åŠ å›æ¥ã€‚è®²é¢˜æ²¡å»å¬..å¬äº†ä¹Ÿæ˜¯è‡ªé—­ã€‚\nOIerçœŸèƒ½æï¼Œè¯´æå°±æå‡ºæ¥äº†ä¸€ä¸ªæ–‡è‰ºæ±‡æ¼”ã€‚\nLCA nbï¼Joker nbï¼å¤§è¿24 nbï¼zzt nbï¼\næ„Ÿè§‰è¿™ä¸€æ™šä¸Šæ›´åŠ äº†è§£ OI äº†ã€‚è¦å˜å¾—æ›´å¼ºï¼Œå’Œæ›´å¼ºçš„äººåœ¨ä¸€èµ·ï¼Œå»å–œæ¬¢æ­£ç¡®çš„äº‹æƒ…ï¼Œå†ç”¨å°½å…¨åŠ›å»å–œæ¬¢è‡ªå·±å–œæ¬¢çš„äº‹æƒ…ã€‚\nå®Œæ•´ç‰ˆæ–‡è‰ºæ±‡æ¼”å½•åˆ¶ä»Šæ™šå‹åˆ¶å‡ºæ¥ï¼Œå¤§çº¦è¦å›æ­¦æ±‰ä¹‹åæ‰èƒ½ä¼ åˆ°bç«™ä¸Šã€‚\nDay 2 ä¸Šåˆå»ç§‘å­¦ä¸­å¿ƒå†¬çœ ã€‚åœ¨è½¦ä¸Šç”¨ zar çš„çƒ­ç‚¹æŠŠæ–‡è‰ºæ±‡æ¼”ä¼ äº†ã€‚\nä¸‹åˆå¬è¯´ $T2$ é‡æµ‹äº†ï¼Œç„¶åçªè«å Ag äº†.. è¿™åœº WC å¥½åƒæ˜¯æš´åŠ› Auï¼Œåªè¦ $127$ åˆ†ï¼Œç„¶è€Œçªæš´åŠ›æ²¡æ‰“æ»¡ï¼Œåˆç–¯ç‹‚æŒ‚åˆ†ï¼Œåªå¥½æ»šç²—äº†.. å¦å¤–å¥½åƒäººäººéƒ½æœ‰ä¸€æšé“ç‰Œã€‚\nç¡å‰çœ‹äº†ä¸¤é›†ã€Šæ¯”å®‡å®™æ›´è¿œçš„åœ°æ–¹ã€‹ã€‚\nDay 3 ä¸Šåˆçœ‹äº†ä¸¤é›†ã€Šæ¯”å®‡å®™æ›´è¿œçš„åœ°æ–¹ã€‹ï¼Œç„¶åå»ç«è½¦ç«™ã€‚å‘ç°ç«Ÿç„¶å’Œ PinkRabbit ä¸€è¾†ï¼ˆå»ç«è½¦ç«™çš„ï¼‰è½¦ã€‚\nä¸­åˆåƒäº†å¹²æ‹Œé¢ï¼ˆæ¥ç«è½¦ç«™ä¹‹å‰ä¹°çš„ï¼‰ï¼Œç„¶åæœ‰ä¸ªå–æ–¹ä¾¿é¢çš„å°å“¥è®©æˆ‘ä»¬å¸®å¿™æŠŠæ–¹ä¾¿é¢çœ‹ç€ï¼Œä»–å»ä¸Šä¸ªå•æ‰€ã€‚$20min$ åï¼Œä»–ä»å•æ‰€å‡ºæ¥ï¼Œå»é—® ylh åœ¨ç©ä»€ä¹ˆæ¸¸æˆï¼š\næœ¬æ¥æƒ³å¯¹å¹¿äºŒè¯´ ã•ã‚ˆã†ãªã‚‰ çš„ï¼Œæƒ³äº†æƒ³åº”è¯¥æ˜¯ ã¾ãŸã­ ã€‚\næ„Ÿè§‰ cl ä¸­æ¸šå¯¹æœ‹ä¹Ÿè¯´çš„é‚£å¥â€œç¦»å¼€çš„æ—¶å€™ä¸€å®šè¦æ˜¯ç¬‘ç€ç¦»å¼€çš„ï¼Œä¸ç„¶å°±å†ä¹Ÿå›ä¸æ¥äº†â€è«åå¯ä»¥ç”¨åœ¨è¿™é‡Œã€‚\n","date":"2019-01-20T12:16:15+08:00","permalink":"https://ouuan.github.io/post/2019thuwc-wc%E5%86%AC%E7%9C%A0%E8%AE%B0/","tags":["æ¸…åè¥","CCFç³»åˆ—èµ›äº‹"],"title":"2019THUWC/WCå†¬çœ è®°"},{"categories":["é¢˜è§£"],"contents":"T1é¢˜ç›®é“¾æ¥\nå¤§æ„ï¼šAlice æœ‰ä¸€ä¸ªé•¿åº¦ä¸º $2n$ çš„ $01$ ä¸² $s_{1..2n}$ï¼ŒBob æœ‰ $n$ ä¸ªä¸‹æ ‡ $p_{1..n}$ï¼ŒAlice å’Œ Bob åªèƒ½ç”¨ $01$ é€šä¿¡ï¼Œéœ€è¦åœ¨æ¯äººå„ $m$ ä¸ª bit å†…ä½¿ Bob è¾“å‡º $s_{p_1..p_n}$ .\n$n=1000$, $m=1350$ã€‚\nPart 1 é€šä¿¡é¢˜  åªæ˜¯è¯´ä¸€ä¸‹æˆ‘åšäº†è¿™é“é¢˜åå¯¹é€šä¿¡é¢˜çš„ç†è§£ï¼Œå¯èƒ½æœ‰è¯¯ã€‚\n èµ›æ—¶ï¼šé€šä¿¡é¢˜æ˜¯å•¥ï¼Ÿï¼Ÿï¼Ÿ ä½œä¸ºä¸€ä¸ªä»æœªåšè¿‡é€šä¿¡é¢˜çš„é€‰æ‰‹ï¼Œé‡åˆ°è¿™é¢˜è‡ªç„¶æ˜¯ç™¾åº¦äº†ä¸€ä¸‹â€œé€šä¿¡é¢˜â€ã€‚å¦‚æœä½ å°è¯•ä¸€ä¸‹ï¼Œä¼šæœåˆ°ã€Šç§»åŠ¨é€šä¿¡è¯•é¢˜åº“ã€‹ã€‚\nå°è¯•æœç´¢ â€œé€šä¿¡é¢˜ OIâ€â€”â€”OIæ˜¯ä»€ä¹ˆæ„æ€? - é—®é€šä¿¡ä¸“å®¶ï¼›\u0026ldquo;é€šä¿¡é¢˜ CSDN\u0026rdquo;â€”â€”é€šä¿¡åŸç†è€ƒè¯•é¢˜-CSDNä¸‹è½½ã€‚\nokï¼Œåªèƒ½è‡ªå·±çœ‹æ ·ä¾‹ç¨‹åºäº†ã€‚\näºæ˜¯æˆ‘æ¯”èµ›çš„ç¬¬ä¸€ä¸ªå°æ—¶å°±åœ¨å¯¹ç€æ ·ä¾‹ä»£ç æ‡µé€¼ä¸­åº¦è¿‡äº†\u0026hellip;..\nç„¶åå‘ç°æˆ‘sbäº†ï¼Œå¿˜è®°äº†ä¸€ä»¶äº‹ï¼šæ ‡å‡†è¾“å…¥æ˜¯ä¼šç­‰å¾…è¾“å…¥çš„ï¼å¯èƒ½æ˜¯æˆ‘ OI é¢˜åšå‚»äº†ï¼Œä»¥ä¸ºè¾“å…¥ä¸€å®šè¦ä¸€è¿ä¸²ä¸åœåœ°è¾“å…¥\u0026hellip;å¯¼è‡´æˆ‘ä¸€ç›´æ²¡æœ‰ç†è§£ä¸ºä»€ä¹ˆä¸¤ä¸ªç¨‹åºä¹‹é—´å¯ä»¥æ¥å›é€šä¿¡\u0026hellip;\nï¼ˆä¸Šé¢é‚£æ®µè¯çº¯å±æˆ‘sbäº†ï¼Œè¯·è·³è¿‡ä¸çœ‹ï¼‰\né€šä¿¡é¢˜æ˜¯â€¦â€¦ æ ¹æ®æˆ‘çš„ç†è§£ï¼Œé€šä¿¡é¢˜å°±æ˜¯ï¼šä¸¤ä¸ªç¨‹åºï¼Œåˆ†åˆ«ä»æ–‡ä»¶è¯»å…¥æ•°æ®ï¼Œä»æ ‡å‡†è¾“å…¥è¯»å…¥å¦ä¸€ä¸ªç¨‹åºçš„æ ‡å‡†è¾“å‡ºã€‚æœ€åå…¶ä¸­ä¸€ä¸ªç¨‹åºæŒ‰è¦æ±‚è¾“å‡ºåˆ°æ–‡ä»¶ã€‚\nï¼ˆå¥½åƒè·Ÿé¢˜é¢æè¿°çš„å·®ä¸å¤š\u0026hellip;ï¼‰\né‚£å°±è¯´è¯´æˆ‘sbäº†è€Œå¡ä½çš„åœ°æ–¹å¥½äº†..ä¸€ä¸ªç¨‹åº getchar() çš„æ—¶å€™ä¼šæš‚åœæ‰§è¡Œï¼Œç›´åˆ°å¦ä¸€ä¸ªç¨‹åºè¾“å‡ºï¼Œå°±è·Ÿæ‰‹åŠ¨è¾“å…¥æ•°æ®æ—¶ç­‰å¾…å›è½¦ä¸€æ ·ã€‚\nå…³äºè°ƒè¯• å¹¿äºŒæœºæˆ¿æ˜¯ win7ï¼Œä¸å¤ªæ–¹ä¾¿å¤åˆ¶\u0026hellip;\näºæ˜¯åªå¥½æ‰‹åŠ¨è¾“å…¥äº†ï¼Œåªä¸è¿‡æ„Ÿè§‰ copy ä¸¤ä¸ªç¨‹åºçš„è¾“å‡ºçœ‹å®ƒä»¬ç›¸äº’é…åˆç€å·¥ä½œï¼Œè¿˜æ˜¯è›®æœ‰è¶£çš„ã€‚\nPart 2 è§£æ³• å…¶å®æˆ‘ $5min$ å°±æƒ³åˆ°æ€ä¹ˆåšäº†..ï¼ˆä½†å¥½åƒåšæ³•æ¯”æœ€çŸ­è§£é‚£äº›ç¥ä»™åšæ³•éº»çƒ¦çš„å¤šï¼Ÿï¼‰å…¶å®ä¹Ÿä¸æ˜¯å¾ˆéš¾å†™ï¼Œä½†ç”±äºç¬¬ä¸€æ¬¡å†™é€šä¿¡é¢˜ä¸å¤ªä¹ æƒ¯ï¼Œå„ç§ç»†èŠ‚å†™æŒ‚ï¼Œæœ€åå†™äº†ä¸€ä¸ªå°æ—¶æ‰A\u0026hellip;\nè§£å†³é—®é¢˜ å¯ä»¥æƒ³åˆ°è¿™æ ·ä¸€ä¸ªåšæ³•ï¼ˆå¦‚æœæƒ³ä¸åˆ°ä¹Ÿæ²¡å…³ç³»..çœ‹æ‡‚å°±å¥½äº†ï¼‰ï¼šé€‰æ‹©ä¸€ä¸ªåŒºé—´ $[l,r]$ ï¼ŒBob ç”¨ä¸€ä¸ªé•¿åº¦ä¸º $r-l+1$ çš„ $01$ ä¸²å‘Šè¯‰ Alice è¿™ä¸ªåŒºé—´å†…æ¯ä¸ªä½ç½®æ˜¯å¦æ˜¯ä¸€ä¸ªä¸‹æ ‡ï¼Œå¯¹äºæ¯ä¸ªä¸‹æ ‡ Alice å‘Šè¯‰ Bob å¯¹åº”çš„å€¼ï¼›å¯¹äºä¸åœ¨ $[l,r]$ å†…çš„å…¶å®ƒéƒ¨åˆ†ï¼ŒAlice æŠŠæ‰€æœ‰å€¼ï¼ˆä¸ç®¡æ˜¯ä¸æ˜¯ä¸€ä¸ªä¸‹æ ‡ï¼‰éƒ½å‘Šè¯‰ Bob .\nä¼˜åŒ–é€šä¿¡æ•° è€ƒè™‘ä¸€ä¸‹ï¼Œè¿™æ ·åšéœ€è¦çš„ bit æ•°æ˜¯å¤šå°‘ï¼š\nBob ç»™ Alice çš„ï¼šé¦–å…ˆ Bob è¦å‘Šè¯‰ Alice $l$ å’Œ $r$ , ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œéœ€è¦ $22$ ä¸ª bitï¼›å…¶æ¬¡ï¼ŒBob è¦è¯¢é—® $[l,r]$ ï¼Œéœ€è¦ $r-l+1$ ä¸ª bit ã€‚\nAlice ç»™ Bob çš„ï¼šé¦–å…ˆ Alice è¦å›ç­” Bob åœ¨ $[l,r]$ å†…çš„è¯¢é—®ï¼Œéœ€è¦ â€œ $[l,r]$ å†…ä¸‹æ ‡ä¸ªæ•°â€ ä¸ª bitï¼›å…¶æ¬¡ï¼ŒAlice è¦å‘Šè¯‰ Bob é™¤äº† $[l,r]$ å…¶å®ƒåŒºåŸŸçš„æ‰€æœ‰å€¼ï¼Œéœ€è¦ $n-(r-l+1)$ ä¸ª bit ã€‚\né‚£ä¹ˆï¼Œæˆ‘ä»¬éœ€è¦æœ€å°åŒ–ï¼š$\\max(r-l+23,[l,r]\\text{ å†…ä¸‹æ ‡ä¸ªæ•°}+n-r+l-1)$ ã€‚\nç”¨ $[l,l+len)$ æ¥è¡¨ç¤ºä¼šç®€æ´ä¸€äº›ï¼Œæ‰€ä»¥ä¸‹æ–‡éƒ½ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå³éœ€è¦æœ€å°åŒ–ï¼š$\\max(len+22,[l,l+len)\\text{ å†…ä¸‹æ ‡ä¸ªæ•°}+n-len)$ ã€‚\né¢„å¤„ç†å‰ç¼€å’Œå³å¯å¿«é€Ÿç®—å‡º $[l,l+len)$ å†…çš„ä¸‹æ ‡ä¸ªæ•°ï¼Œ$O(n^2)$ æšä¸¾åŒºé—´å–æœ€å°å€¼å³å¯ã€‚\nå‚è€ƒä»£ç  Bob #include \u0026lt;iostream\u0026gt; #include \u0026lt;fstream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;algorithm\u0026gt; #include \u0026lt;vector\u0026gt; using namespace std; ifstream fin(\u0026quot;bob.in\u0026quot;); ofstream fout(\u0026quot;bob.out\u0026quot;); char rd() //è¯»å…¥ä¸€ä¸ªbit { return getchar(); } void wt(int x) //è¾“å‡ºä¸€ä¸ªbit { putchar(x+'0'); fflush(stdout); } int n,m,p[1010],rk[4010],pre[4010],minn=0x7fffffff,l,len; char ans[1010]; int main() { int i,j,t; fin\u0026gt;\u0026gt;n\u0026gt;\u0026gt;m; for (i=1;i\u0026lt;=n;++i) //è¯»å…¥å¹¶è®°å½•æ˜¯ç¬¬å‡ ä¸ªä¸‹æ ‡ï¼ˆä¾¿äºå­˜ç­”æ¡ˆï¼‰ï¼Œå¹¶ä¸”å¤åˆ¶ä¸€ä»½æ‹¼åœ¨åé¢ï¼Œè¿™æ ·å¦‚æœè¯¢é—®çš„åŒºé—´è·¨è¿‡é¦–å°¾å¯ä»¥æ–¹ä¾¿åœ°å¤„ç† { fin\u0026gt;\u0026gt;p[i]; rk[p[i]]=rk[p[i]+2*n]=i; } for (i=1;i\u0026lt;=4*n;++i) //é¢„å¤„ç†å‰ç¼€å’Œ { pre[i]=pre[i-1]+(rk[i]\u0026gt;0); } for (i=1;i\u0026lt;=2*n;++i) //æšä¸¾æ‰¾æœ€ä¼˜æ–¹æ¡ˆ { for (j=1;j\u0026lt;=2*n;++j) { t=max(pre[i+j-1]-pre[i-1]+2*n-j,j+22); if (t\u0026lt;minn) { minn=t; l=i; len=j; } } } for (i=10;i\u0026gt;=0;--i) //å‘Šè¯‰Alice lå’Œlen { wt(bool((1\u0026lt;\u0026lt;i)\u0026amp;l)); } for (i=10;i\u0026gt;=0;--i) { wt(bool((1\u0026lt;\u0026lt;i)\u0026amp;len)); } for (i=l;i\u0026lt;l+len;++i) //è¯¢é—®åŒºé—´ { if (rk[i]) { wt(1); ans[rk[i]-1]=rd(); //å­˜ç­”æ¡ˆ } else { wt(0); } } for (i=l+len;i\u0026lt;l+2*n;++i) //è¯»å–å‰©ä½™éƒ¨åˆ† { if (rk[i]) { ans[rk[i]-1]=rd(); } else { rd(); } } fout\u0026lt;\u0026lt;ans; return 0; }  Alice #include \u0026lt;iostream\u0026gt; #include \u0026lt;fstream\u0026gt; #include \u0026lt;cstdio\u0026gt; using namespace std; ifstream fin(\u0026quot;alice.in\u0026quot;); int rd() //ä¸ºäº†æ–¹ä¾¿ï¼Œä¸¤ä¸ªç¨‹åºä¸­rd()å’Œwt()çš„char/intæ˜¯åçš„ { return getchar()-'0'; } void wt(char x) { putchar(x); fflush(stdout); } int n,m; char s[4010]; int main() { int i,l=0,len=0; fin\u0026gt;\u0026gt;n\u0026gt;\u0026gt;m\u0026gt;\u0026gt;(s+1); for (i=2*n+1;i\u0026lt;=4*n;++i) //å¤åˆ¶ä¸€éæ”¾åœ¨åé¢ { s[i]=s[i-2*n]; } for (i=0;i\u0026lt;=10;++i) //è¯»å…¥lå’Œlen { l=l*2+rd(); } for (i=0;i\u0026lt;=10;++i) { len=len*2+rd(); } for (i=l;i\u0026lt;l+len;++i) //å›ç­”è¯¢é—® { if (rd()) { wt(s[i]); } } for (i=l+len;i\u0026lt;l+2*n;++i) //å‘Šè¯‰Bobå‰©ä¸‹çš„éƒ¨åˆ† { wt(s[i]); } return 0; }  Part 3 è¯æ˜ å–è¯¢é—®åŒºé—´ä¸º $[l,l+1318]$ ï¼Œè¿™æ ·çš„è¯ Bob å‘ç»™ Alice çš„ bit æ•°å°±ä¸º $1319+22=1341$ .\nåŒºé—´ $[l,l+1318]$ å†…ä¸‹æ ‡çš„æœŸæœ›ä¸ªæ•°ä¸º $\\frac{1319}2$ ï¼Œæ‰€ä»¥ä¸€å®šå­˜åœ¨æŸä¸ªåŒºé—´ä½¿å¾—ä¸‹æ ‡ä¸ªæ•°å°äºç­‰äº $659$ ï¼Œå†åŠ ä¸Šå‰©ä½™éƒ¨åˆ† $681$ ï¼ŒAlice å‘ç»™ Bob çš„ bit æ•°å°±ä¸º $1340$ ã€‚\näº‹å®ä¸Šï¼Œæˆ‘æäº¤çš„è¯„æµ‹è®°å½•é‡Œé€šä¿¡æ¬¡æ•°æœ€å¤šçš„å°±æ˜¯ $1341+1340$ ã€‚\nPart 4 ä¼˜åŒ– åªå– $len=1325$ ï¼Œå°‘æšä¸¾ä¸€ç»´ï¼Œå¯ä»¥ä¼˜åŒ–åˆ°æ—¶é—´å¤æ‚åº¦ $O(n)$ ï¼›å°‘ä¼  $11$ ä¸ª bitï¼Œå¯ä»¥ä¼˜åŒ–åˆ°æœ€å¤§é€šä¿¡æ¬¡æ•° $1336+1337$ ã€‚è¯æ˜ä»ç•¥ã€‚\næäº¤è®°å½•\n","date":"2018-12-22T23:03:25+08:00","permalink":"https://ouuan.github.io/post/uer-8-%E6%B8%B8%E8%AE%B0-%E9%80%9A%E4%BF%A1%E9%A2%98%E6%89%93%E9%9B%AA%E4%BB%97/","tags":["UOJ","é€šä¿¡é¢˜"],"title":"UER #8 â€”â€” é€šä¿¡é¢˜ï¼šæ‰“é›ªä»—"},{"categories":["æŠ€æœ¯"],"contents":"ä¼ é€é—¨\næºç æŒ‰F12å³å¯æŸ¥çœ‹ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥åœ¨ repo é‡Œé¢çœ‹ï¼‰\nçœ‹åˆ°ä¸€ä¸ªå¸–å­é‡Œæåˆ°äº†ä¸€ä¸ª140å­—ç¬¦ç”»å›¾æ¯”èµ›ï¼Œçœ‹åˆ°äº† Martin BÃ¼ttner\u0026rsquo;s code ï¼Œç„¶åå°±éšä¾¿å†™äº†ä¸€ä¸ª. JavaScript éƒ½æ˜¯è¦ç”¨å•¥ç°åœºç™¾åº¦\u0026hellip;\nå·²ç»æ›´æ–°äº†ï¼ˆå­˜æ¡£ï¼Ÿï¼‰åŠŸèƒ½ï¼Œåœ¨åœ°å€æ åä»¥ ? å¼€å¤´ \u0026amp; åˆ†éš”å³å¯è¾“å…¥å‚æ•°ã€‚ä¾‹å¦‚ï¼šhttps://ouuan.github.io/randpic/generator/?width=512\u0026amp;height=512\u0026amp;blocksize=75\u0026amp;qwq=2\u0026amp;minred=100\u0026amp;maxred=255\u0026amp;mingreen=100\u0026amp;maxgreen=255\u0026amp;minblue=200\u0026amp;maxblue=255\u0026amp;minalpha=0\u0026amp;maxalpha=255\nä¸‹é¢æ˜¯ä¸€äº›å›¾ç‰‡ï¼ˆé™„æœ‰å‚æ•°é“¾æ¥ï¼‰ï¼š\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","date":"2018-12-20T23:12:18+08:00","permalink":"https://ouuan.github.io/post/%E9%9A%8F%E6%9C%BA%E7%94%9F%E6%88%90%E5%9B%BE%E7%89%87%E5%B1%95%E7%A4%BA/","tags":["HTML/JavaScript"],"title":"éšæœºç”Ÿæˆå›¾ç‰‡å±•ç¤º"},{"categories":["æ¸¸è®°"],"contents":"è¿™ä¸¤å¤©æ¯”èµ›æ˜¯çœŸçš„å¤š..ç¢°ä¸Šäº†åœº Chinese Legends Round / HackForces ç«Ÿç„¶åœ¨ç´«åæ¶¨äº†ç‚¹åˆ†QAQ\nçœ‹åˆ° Aï¼Œ$gcd(x,x-1)=1$ ï¼Œè¿™ä¸æ˜¯sbé¢˜å—ï¼Ÿç„¶åæ„‰å¿«åœ°WAäº†\u0026hellip;äº’è´¨ $\\ne$ ä¸ä¸ºå€æ•°é¸­QAQè¿˜æœ‰ $1$ å‘¢.å¼€åœº-50åˆ†..\nBè²Œä¼¼æ¯”Céš¾ï¼Œä½†Açš„äººæ¯”Cå¤š..å…¶å®å½“æ—¶äº¤çš„æ—¶å€™è¿˜æ²¡æƒ³æ¸…æ¥š $p$ ä¸ªä¸€æ ·çš„äººæ•°æ˜¯ $p$ çš„å€æ•°è¿™ä¸ªç»“è®ºï¼Œå°±æ„Ÿè§‰å¥½åƒæ˜¯å¯¹çš„ï¼Œå°±äº¤äº†ã€‚\nC å¾ˆå¿«å°±æƒ³åˆ°äº†ç»“è®ºï¼Œæ’åˆ—ç»„åˆä¹˜ä¸€ä¹˜éšä¾¿åšï¼Œè€Œä¸”æ•°æ®èŒƒå›´å°åˆ°å¯ä»¥ç”¨æ¨è¾‰ä¸‰è§’ç®—ç»„åˆæ•°+ä¸ç”¨å¿«é€Ÿå¹‚ã€‚\nD æ„Ÿè§‰è¦æä¸ªMSTï¼Œç„¶åå°±çœŸçš„å…ˆæäº†ä¸ªMSTï¼Œç„¶åå°±æ²¡æœ‰æƒ³åˆ°ç®€å•çš„è§£æ³•..æ­£è§£æ˜¯MSTæå®Œæ‰€æœ‰å…³é”®ç‚¹å°±ä¸æäº†ã€‚ä¸€å¼€å§‹å†™æŒ‚äº†ï¼Œç„¶è€Œptç‰¹åˆ«æ°´ï¼ˆå¥½åƒç›´æ¥è¾“å‡ºMSTæœ€å¤§è¾¹å°±å¯ä»¥ï¼‰ï¼ŒAå®ŒEä¹‹åçœ‹åˆ°jasonçš„Dè¢«å‰äº†ï¼Œå°±ä»”ç»†çœ‹äº†ä¸‹ï¼Œå‘ç°è‡ªå·±å†™æŒ‚äº†..ç„¶åé‡äº¤ï¼Œå°‘äº† $400$ å¤šåˆ†ã€‚\nE è´ªå¿ƒæä¸€æå°±è¡Œäº†ï¼Œæ®è¯´ylhæ²¡æœ‰åšå‡ºæ¥æ˜¯å¿˜äº†ç§¯ä¸€å®šå·®è¶Šå°å’Œè¶Šå°..\nF çœ‹äº†çœ‹æ„Ÿè§‰ä¸ä¼šï¼Œäºæ˜¯é”äº† D å¼€å§‹å‰äººã€‚çœ‹åˆ°room rank1çš„æ­£è§£æ„Ÿè§‰è‡ªå·±æ•´ä¸ªäººéƒ½sbäº†..åœ¨ç¦»æ¯”èµ›ç»“æŸ $5$ åˆ†é’Ÿçš„æ—¶å€™çœ‹åˆ°ä¸€ä¸ªæ„Ÿè§‰å†™æŒ‚äº†çš„ï¼Œç„¶è€Œä¸æ•¢hackï¼Œäºæ˜¯ä¸€ç›´ç›¯ç€çœ‹ï¼Œç›´åˆ°ç¦»æ¯”èµ›ç»“æŸè¿˜æœ‰ $1$ åˆ†é’Ÿçš„æ—¶å€™æ‰hackï¼Œç„¶è€Œä¸€ä¸å°å¿ƒæŠŠæ•°æ®æ‰“é”™äº†..å¹¸å¥½æ ¼å¼é”™è¯¯ä¸æ‰£åˆ†ï¼Œèµ¶ç´§ç‚¹å›å»é‡æ–°hackï¼Œæœ€ååœ¨ç¦»æ¯”èµ›ç»“æŸ $4s$ çš„æ—¶å€™æäº¤äº†hackï¼Œç„¶åç»¿äº†ï¼å–œæ $100$ åˆ†ã€$50â€‹$ åã€‚\nå½“æ—¶æ¯”èµ›ä¸€ç»“æŸæˆ‘å°±è·Ÿ ylh è¯´æˆ‘æ„Ÿè§‰å¦‚æœæˆ‘ä¸ fstèƒ½å†æ¶¨ $100$ åï¼Œç„¶åæœ€åçœŸçš„åˆæ¶¨äº† $100$ å.. Bå’ŒDä¸€å †fstçš„ã€‚\nF ç”¨å¥‡å¶æ€§åˆ¤æ–­é€‰æ‹©çš„å“ªè¾¹ï¼Œæ„Ÿè§‰å¾ˆå¦™ã€‚\nG æ²¡ä»”ç»†çœ‹ã€‚\nHï¼š\n and we didn\u0026rsquo;t except anyone to pass.\n ä¸çŸ¥é“ä¼šåœ¨ç´«åå¾…å¤šä¹…QAQ\n","date":"2018-12-17T22:47:17+08:00","permalink":"https://ouuan.github.io/post/avito-cool-challenge-2018-%E6%B8%B8%E8%AE%B0/","tags":["Codeforces"],"title":"Avito Cool Challenge 2018 æ¸¸è®°"},{"categories":["æ¸¸è®°"],"contents":"ä»Šå¤© AT å’Œ CF åˆšå¥½è¿ä¸Šäº†ï¼Œäºæ˜¯å°±éƒ½æ‰“äº†ä¸€ä¸‹ã€‚\nå…³äºæ¨¡æ¿ ä»Šå¤©å¿ƒè¡€æ¥æ½®æŠŠç”¨äºåœ¨çº¿æ¯”èµ›çš„æ¨¡æ¿æ¢äº†ä¸€ä¸‹ï¼ŒåŠ äº†ç‚¹ä¸œè¥¿ï¼Œç„¶åå‘ç° rep(1,l,r) å†™èµ·æ¥éå¸¸ä¸é¡ºæ‰‹..ä¿ç•™äº†éƒ¨åˆ†æ¯”è¾ƒå¥½ç”¨çš„ã€‚\næµ‹è¯•çš„æ—¶å€™å¿˜è®°å¼€æ•°ç»„äº†ï¼ˆéƒ½æ˜¯äº›ä»€ä¹ˆsbé”™è¯¯ï¼‰ï¼Œç„¶åä»¥ä¸º ll ä¸èƒ½ä½œä¸‹æ ‡ï¼Œäºæ˜¯æ²¡æœ‰ #define long longï¼Œç„¶å CF æŒ‚æƒ¨äº†..\nAtCoder ä¸Šä¸€åœºæ‰“çš„ Beginnerï¼Œè¿™åœºéš¾åº¦æ­£å¸¸å¤šäº†ã€‚\nA æ˜¯ä¸ªå€¼åŸŸä¸º $2$ çš„é€†åºå¯¹..\nB ç”¨ multiset ä¹±æäº†ä¸€ä¸‹ï¼Œå¯¹äºæ¯ä¸ªæ•°æšä¸¾ç»„æˆçš„æ•°ï¼Œç„¶åä»å¤§åˆ°å°åŒ¹é…ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æ­£è§£ï¼Œåæ­£è¿‡äº†ï¼Œè€Œä¸”æ˜¯ $log^2$ çš„ã€‚\nC æ„Ÿè§‰æŒºå¯åšçš„..å¯èƒ½æœ‰ç»†èŠ‚æ²¡è°ƒå‡ºæ¥ï¼Œèµ¶ç€å›é…’åº—æ‰“ CF å°±æ²¡æœ‰ç»§ç»­è°ƒäº†..\nD ä¸€å¼€å§‹è¿˜åœ¨æƒ³åšå¼ˆè®ºå®Œå…¨ä¸ä¼š..ç„¶åä»”ç»†çœ‹äº†ä¸€çœ¼ï¼Œå¦‚æœ A ä¸èµ°ï¼ŒB å°±ä¼šä¸èµ°ï¼Œå°±ç»“æŸäº†ï¼›æ‰€ä»¥ A ä¸€å®šèƒ½èµ°åˆ™èµ°ã€‚ç„¶åå°±éšä¾¿åšäº†ã€‚\nåªä¸è¿‡ AT çš„ rating çœŸçš„æ¶¨çš„å¥½å¿«..\nCodeforces ABC ä¸‰é“ spj ï¼Ÿï¼Ÿï¼Ÿ\néƒ½æ˜¯éšä¾¿æ„é€ å°±èƒ½åšçš„..\nç„¶è€Œ C ä¸€å¼€å§‹å¿˜å¼€ ll äº†\u0026hellip;..\nD é»‘ç™½æŸ“è‰²ä¸€ä¸‹ï¼Œè¿é€šå—å†…ä¸¤ç§èŠ‚ç‚¹åˆ†åˆ«æœ‰ $a$ ä¸ªå’Œ $b$ ä¸ªç­”æ¡ˆå°±æ˜¯ $2^a+2^b$ ï¼ŒæŠŠæ¯ä¸ªè¿é€šå—çš„ç­”æ¡ˆåŠ èµ·æ¥å°±å¥½äº†ã€‚\nç”±äº $O(nq)$ memset ä¼šçˆ†æ‰ï¼Œä¸èƒ½ memset æ•´ä¸ªæ•°ç»„ï¼Œäºæ˜¯æ„‰å¿«åœ°åœ¨å¼€äº† ll çš„æƒ…å†µä¸‹ memset(\u0026hellip;sizeof(int)\u0026hellip;)ï¼›å‘ç°äº†ä¹‹åä¸å°å¿ƒæŠŠå¼€ int çš„å¦ä¸€ä¸ªæ•°ç»„ä¹Ÿæ”¹æˆ memset(\u0026hellip;sizeof(long long)..) äº†.. å¼€åœº $40$ åˆ†é’Ÿçš„æ—¶å€™è¿™ $3$ ä¸ªå…³äº ll çš„ç½šæ—¶è®©æˆ‘æ’åç¿»äº†ä¸‰å€\u0026hellip;\näºæ˜¯ï¼ŒA äº† D ä¹‹åæˆ‘å°±åœ¨æ¿å­é‡ŒåŠ ä¸Šäº† #define int long longã€‚\nçœ‹äº†ä¼šå„¿ E ä¸ä¼šåšï¼Œç„¶åä¸€çœ‹ standingï¼ŒæƒŠå¥‡åœ°å‘ç° G æœ‰ä¸€å †ï¼ˆ$15$ ä¸ªï¼Œå½“æ—¶ E $7$ F $1$ï¼‰äºº A äº†ï¼Œç„¶åä¸€çœ‹ï¼Œå°±æ˜¯POJ 2926+åŠ¨æ€RMQ\u0026hellip;\næ„Ÿè§‰è‡ªå·±å‡ å¹´æ²¡æœ‰å†™è¿‡æ™®é€šçº¿æ®µæ ‘äº†ï¼ˆæœ€è¿‘å†™çš„å…¨æ˜¯å¹³è¡¡æ ‘/åŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘ï¼‰ï¼Œå†™äº†åŠä¸ªå¤šå°æ—¶è¿˜å†™é”™äº†..æ¯•ç«Ÿæ˜¯ CFï¼Œåº”è¯¥å»å¤åˆ¶ä¸ªæ¨¡æ¿æ‰å¯¹çš„\u0026hellip;ä¸€äº¤ï¼ŒMLE äº†ï¼Œwocæˆ‘å¥½ä¸å®¹æ˜“#define int long longäº†å°±æ˜¯è¿™ä¸ªç»“æœï¼Ÿï¼Ÿæ”¹æˆ intï¼Œè·‘äº† $5.4s$ï¼Œå·¨æ–¹ï¼Œäºæ˜¯æ‰‹åŠ¨å¼€äº† O3ï¼Œ$4.8s$ ï¼Œä½†é‡äº¤ç«Ÿç„¶æ²¡æœ‰ç½šæ—¶ã€‚åº”è¯¥å»æ‰¾ä¸ª BIT åŠ¨æ€æ±‚ RMQ çš„æ¨¡æ¿çš„\u0026hellip;\nçœ‹åˆ° halyavin å‚èµ›äº†ï¼Œæ„Ÿè§‰è‡ªå·±è¦ fst ï¼Œèµ¶ç´§æŠŠåšå®¢å†™äº†ç¡è§‰å»ã€‚\nUPD halyavin ç«Ÿç„¶æ²¡æœ‰ hack\u0026hellip;ç„¶è€Œ D æœ‰ä¸€å † memset æ•´ä¸ªæ•°ç»„çš„ï¼Œæˆ‘ä¹Ÿå» hack äº†ä¸€ä¸ªï¼ˆedu hack $\\sqrt{}$ï¼‰ã€‚\næ²¡æœ‰ fstï¼Œç¬¬ä¸€æ¬¡ A $5$ é¢˜ï¼Œä¸Š $2k$ äº†ï¼Œæ„Ÿè§‰æµ·æ˜Ÿã€‚\nUUPD é¢˜è§£ CF1093D ã€Beautiful Graphã€‘\né¢˜è§£ CF1093G ã€Multidimensional Queriesã€‘\n","date":"2018-12-16T00:29:11+08:00","permalink":"https://ouuan.github.io/post/cf-edu-56-at-grand-029-%E6%B8%B8%E8%AE%B0/","tags":["AtCoder","Codeforces"],"title":"CF edu 56 \u0026 AT Grand 029 æ¸¸è®°"},{"categories":["æŠ€æœ¯"],"contents":" æ³¨ï¼šæš‚æ—¶è¿˜ä¸çŸ¥é“å¦‚ä½•åˆ¶ä½œèƒ½è¢«å¼•ç”¨çš„éšæœºå›¾ç‰‡ï¼Œåªèƒ½æŸ¥çœ‹å›¾ç‰‡ï¼Œè€Œä¸èƒ½é€šè¿‡ç±»ä¼¼äº![](å›¾ç‰‡åœ°å€)çš„æ–¹å¼æŸ¥çœ‹ã€‚\n  demo\næ¬¢è¿æŠ•ç¨¿å›¾ç‰‡ï¼šæŠ•ç¨¿åœ°å€\n æ ¸å¿ƒä»£ç  \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;imagelist.json\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; var r=Math.floor(Math.random()*images.length) document.write(\u0026quot;\u0026lt;img src=\u0026quot;+images[r]+\u0026quot;\u0026gt;\u0026quot;) \u0026lt;/script\u0026gt;  å›¾ç‰‡åˆ—è¡¨ä¿å­˜åœ¨ imagelist.json å†…ã€‚\nå‚è€ƒç¤ºä¾‹ https://ouuan.github.io/randpic/people/index.htmlï¼š\n\u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;imagelist.json\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;title\u0026gt;éšæœºå›¾ç‰‡-äººç‰©ç±»\u0026lt;/title\u0026gt; \u0026lt;link rel=\u0026quot;icon\u0026quot; type=\u0026quot;image/png\u0026quot; sizes=\u0026quot;32x32\u0026quot; href=\u0026quot;/images/favicon32.png\u0026quot;\u0026gt; \u0026lt;link rel=\u0026quot;icon\u0026quot; type=\u0026quot;image/png\u0026quot; sizes=\u0026quot;16x16\u0026quot; href=\u0026quot;/images/favicon16.png\u0026quot;\u0026gt; \u0026lt;style\u0026gt; img { width: 100%; height: auto; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; var r=Math.floor(Math.random()*images.length) document.write(\u0026quot;\u0026lt;img src=\u0026quot;+images[r]+\u0026quot;\u0026gt;\u0026quot;) \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;  https://ouuan.github.io/randpic/people/imagelist.jsonï¼š\nvar images= [ \u0026quot;https://z4a.net/images/2018/12/12/70469686_p0.png\u0026quot;, \u0026quot;https://z4a.net/images/2018/12/12/69212051_p0.jpg\u0026quot;, \u0026quot;https://z4a.net/images/2018/12/12/64660644_p0.jpg\u0026quot;, \u0026quot;https://z4a.net/images/2018/12/12/61438972_p0.jpg\u0026quot;, \u0026quot;https://z4a.net/images/2018/12/12/60141148_p0.png\u0026quot;, \u0026quot;https://z4a.net/images/2018/12/12/1200296-20170715113653118-1762611401.jpg\u0026quot;, \u0026quot;https://z4a.net/images/2018/12/12/71631241_p0.jpg\u0026quot;, \u0026quot;https://z4a.net/images/2018/12/12/f0Q5-g62pXkZ5lT3cS1hc-rs.jpg\u0026quot;, \u0026quot;https://z4a.net/images/2018/12/12/36224612_p0.jpg\u0026quot;, \u0026quot;https://z4a.net/images/2018/12/12/64702477_p0.jpg\u0026quot;, \u0026quot;https://z4a.net/images/2018/12/12/64670588_p0.jpg\u0026quot;, \u0026quot;https://z4a.net/images/2018/12/12/61815260_p0.jpg\u0026quot;, \u0026quot;https://i.loli.net/2018/12/12/5c10a02b0831b.jpg\u0026quot;, \u0026quot;https://i.loli.net/2018/12/12/5c1119665c83a.jpg\u0026quot;, \u0026quot;https://i.loli.net/2018/12/12/5c111a8bed8e8.jpg\u0026quot;, \u0026quot;https://i.loli.net/2018/12/12/5c111ab43f7cf.jpg\u0026quot;, \u0026quot;https://i.loli.net/2018/12/12/5c111ade38590.jpg\u0026quot;, \u0026quot;https://i.loli.net/2018/12/12/5c111b8240591.png\u0026quot; ]  UPD ç ”ç©¶äº†ä¸€ä¸‹ js åå†™äº†ä¸€ä¸‹å›¾ç‰‡ç¼©æ”¾ï¼šï¼ˆä»£ç å¾ˆä¸‘ï¼Œæ¯•ç«Ÿæ˜¯é ç™¾åº¦å­¦äº†ä¸€ä¸ªå°æ—¶å†™å‡ºæ¥çš„ï¼‰ï¼ˆå¤§æ‹¬å·ä¸æ¢è¡Œæ˜¯å› ä¸ºsublimeç¼©è¿›å†™ç€å†™ç€å°±ç‚¸äº†ï¼Œåªå¥½åœ¨ç½‘ä¸Šæ ¼å¼åŒ–äº†ä¸€ä¸‹ï¼‰\n\u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;imagelist.json\u0026quot;\u0026gt; \u0026lt;/script\u0026gt; \u0026lt;title\u0026gt; éšæœºå›¾ç‰‡-äººç‰©ç±» \u0026lt;/title\u0026gt; \u0026lt;link rel=\u0026quot;icon\u0026quot; type=\u0026quot;image/png\u0026quot; sizes=\u0026quot;32x32\u0026quot; href=\u0026quot;/images/favicon32.png\u0026quot;\u0026gt; \u0026lt;link rel=\u0026quot;icon\u0026quot; type=\u0026quot;image/png\u0026quot; sizes=\u0026quot;16x16\u0026quot; href=\u0026quot;/images/favicon16.png\u0026quot;\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body style=\u0026quot;margin: 0px; background: #0e0e0e;\u0026quot;\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; var cur = 1; var xx = 0; var yy = 0; var rx = 0; var ry = 0; var nw; var nh; var mw; var mh; var w; var h; function setSize() { if (cur == 1) { var p = document.getElementsByTagName(\u0026quot;img\u0026quot;)[0]; nw = p.naturalWidth; nh = p.naturalHeight; mw = window.innerWidth; mh = window.innerHeight; if (nw \u0026gt; mw || nh \u0026gt; mh) { p.style = \u0026quot;cursor: zoom-in\u0026quot;; } else { p.style = \u0026quot;cursor: auto\u0026quot;; } if (nw * mh \u0026gt; nh * mw) { h = nh * mw / nw; w = mw; } else { w = nw * mh / nh; h = mh; } p.style.width = w; p.style.height = h; p.style.marginTop = (mh - h) / 2; p.style.marginLeft = (mw - w) / 2; } else { if (nw \u0026gt; mw || nh \u0026gt; mh) { p.style = \u0026quot;cursor: zoom-out\u0026quot;; } else { p.style = \u0026quot;cursor: auto\u0026quot;; } } } function picLoaded() { setSize(); window.onresize = function() { setSize(); } } function BigSmall() { mw = window.innerWidth; mh = window.innerHeight; if (nw \u0026gt; mw || nh \u0026gt; mh) { if (cur == 1) { cur = 2; var p = document.getElementsByTagName(\u0026quot;img\u0026quot;)[0]; p.style = \u0026quot;cursor: zoom-out\u0026quot;; var e = event || window.event; mw = window.innerWidth; mh = window.innerHeight; if (nw * mh \u0026gt; nh * mw) { h = nh * mw / nw; w = mw; } else { w = nw * mh / nh; h = mh; } if (nw \u0026lt;= mw) { xx = (mw - nw) / 2; rx = 0; } else { xx = 0; rx = (nw - mw) * (e.clientX - (mw - w) / 2) / w; } if (nh \u0026lt;= mh) { yy = (mh - nh) / 2; ry = 0; } else { yy = 0; ry = (nh - mh) * (e.clientY - (mh - h) / 2) / h; } p.style.marginTop = yy; p.style.marginLeft = xx; document.body.scrollLeft = rx; document.body.scrollTop = ry; } else { cur = 1; setSize(); } } } var r = Math.floor(Math.random() * images.length); document.write(\u0026quot;\u0026lt;img src=\u0026quot; + images[r] + \u0026quot; onload=\\\u0026quot;picLoaded()\\\u0026quot; onclick=\\\u0026quot;BigSmall()\\\u0026quot;\u0026gt;\u0026quot;); \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;  ","date":"2018-12-12T23:42:17+08:00","permalink":"https://ouuan.github.io/post/html%E5%AE%9E%E7%8E%B0%E9%9A%8F%E6%9C%BA%E5%9B%BE%E7%89%87/","tags":["HTML/JavaScript"],"title":"htmlå®ç°éšæœºå›¾ç‰‡"},{"categories":["æ¸¸è®°"],"contents":" è¿é£è¿ˆå‡ºçš„æ­¥ä¼æ›´è‰°éš¾ï¼Œå³ä½¿èµ°çš„ä¸è¿œï¼Œä½†è¸©å¾—æ›´æ·±ã€‚ä¸€ä»£äººåªèƒ½åšä¸€ä»£äººçš„äº‹ï¼Œå®Œæˆè¿™ä¸ªæ—¶ä»£èµ‹äºˆçš„ä½¿å‘½å°±æ˜¯è‹±é›„ï¼Œå¤§åœ°ä¹Ÿä¼šå°†ä»–çš„è„šå°é“­è®°ã€‚\nâ€”â€”ä¹’ä¹“å¸å›½ï¼ˆå¥å­è¿·ä¸Šè¯´æ˜¯ã€Šå­¤æ‚è®°ã€‹..ï¼‰\n çªç„¶å°±å¾—çŸ¥äº†è¦å»å¹¿äºŒé›†è®­ã€‚\nç„¶åçŸ¥é“äº†è¿™æ¬¡å‡ºå»å¯èƒ½è¦ä¸€ç›´åˆ° WCï¼Œå·®ä¸å¤šæœ‰ $50$ å¤©ã€‚è¿™æ ·ä¸€ç®—è¿™ä¸ªå­¦æœŸæˆ‘åœ¨æ­¦æ±‰çš„æ—¶é—´å¯èƒ½å’Œå¤–å‡ºçš„æ—¶é—´ä¸€æ ·å¤šäº†ã€‚\næ¯•ç«Ÿæ˜¯å»å¹¿å·ï¼Œä¼šæš–å’Œå¾ˆå¤šï¼Œä¹Ÿè®¸çœ‹ä¸åˆ°æ­¦æ±‰çš„é›ªäº†ã€‚\nDay 0 Railway åœ¨ç«™å°ä¸Šé‡åˆ°äº† Dewã€ylhï¼Œæ„Ÿè§‰è‡ªå·±æ´»å°¸åŒ–ä¸¥é‡ï¼Œéƒ½æ˜¯æˆ‘å¦ˆå…ˆçœ‹è§çš„\u0026hellip;\nä¸­åˆåƒäº†æ³¡é¢ï¼ˆæœ‰æ±¤çš„é‚£ç§ï¼‰ï¼Œä¹‹å‰å‡ºå»éƒ½æ¯”è¾ƒè¿‘ï¼Œåœ¨ç«è½¦ä¸Šä¸ç”¨åƒé¥­ï¼Œå°è±¡ä¸­ä¸Šæ¬¡åƒæ–¹ä¾¿é¢è¿˜æ˜¯åˆä¸‰çš„æ—¶å€™åœ¨å­¦æ ¡é‡Œåƒçš„ï¼ˆæ¡¶è£…çš„æ³¡é¢ï¼Œæ„£æ˜¯è¢«æˆ‘å½“æˆå¹²æ‹Œé¢åƒçš„ï¼‰ã€‚\nåœ¨ç«è½¦ä¸Šçœ‹çœ‹æ‰‹æœºã€çœ‹çœ‹ã€Šå¤§å«Â·ç§‘æ³¢è²å°”ã€‹ï¼Œå½“ç„¶æˆ‘ç°åœ¨åœ¨å†™åšå®¢ã€‚\né€”ä¸­çœ‹åˆ°äº†ä¸€å¹…éå¸¸\u0026hellip;\u0026hellip;\u0026hellip;..okæˆ‘æ‰¿è®¤æˆ‘è¯ç©·äº†ã€‚äº‘å¾ˆä½ï¼Œå¥½åƒä¸æ¯”ç«è½¦é«˜å¤šå°‘ï¼Œç¯ç»•åœ¨å±±çš„å‘¨å›´ï¼Œå±±è„šä¸‹æ˜¯ä¸€äº›å¹³æˆ¿ï¼Œåœ¨è¿œå¤„æ’å…¥äº†å‡ æ ‹ç°ä»£åŒ–çš„é«˜æ¥¼å¤§å¦ï¼Œæœ‰ä¸€ç§è¿å’Œå´å¥‡å¦™çš„ç¾æ„Ÿã€‚\nèµ¶ç´§æå‡ºæ‰‹æœºï¼Œå¯æ¯•ç«Ÿåªæ˜¯æ‰‹æœºï¼Œæ‹ä¸å‡ºäº‘é‚£ç§è™šæ— ç¼¥ç¼ˆçš„ç«‹ä½“æ„Ÿï¼ŒåŒ†å¿™ä¸­ä¹Ÿæ²¡èƒ½é€‰å¥½è§’åº¦ï¼Œæ²¡æ‹åˆ°é‚£å‡ æ ‹é«˜æ¥¼å¤§å¦ã€‚\nå·²ç»é€å»äº†ï¼Œç»çº¬åº¦ä¹Ÿæ²¡æœ‰è®°ä¸‹æ¥ï¼Œä¸èƒ½åœ¨å›æ¥çš„ç«è½¦ä¸Šå†è§ˆå…¶æ™¯ï¼Œåªèƒ½ç”¨ç²—æµ…çš„æ–‡å­—å°†å…¶ç•¥å¾®åœ°è®°å½•ä¸‹æ¥ç½¢ã€‚\nUnderground è¿›åœ°é“å‰å¿˜è®°ä¸Šå•æ‰€äº†Orz\nå’Œ ylh ä¸€èµ·ä½“éªŒäº†ä¸€æ¬¡æ¢ç¥¨å‡ºç«™ä¸Šå•æ‰€ã€‚\nç„¶åæ˜¯ huangbei ç«™ï¼š\näººç‰¹åˆ«å¤šï¼Œç‰¹åˆ«çƒ­ã€‚æ¯•ç«Ÿæ˜¯æ¥é¿å¯’çš„\nRestaurant å’Œå¹¿äºŒçš„æ•™ç»ƒè°ˆäº†è°ˆäººç”Ÿï¼Œå»ºè®®æˆ‘å’Œ ylh å…ˆç³»ç»Ÿåœ°å­¦çŸ¥è¯†ç‚¹ï¼Œä¸ç€æ€¥æ‰“å¥—é¢˜ï¼Œç»“æœ dew æƒ³å…ˆå­¦çŸ¥è¯†ç‚¹ï¼Œæˆ‘å’Œ ylh æƒ³åœ¨å¹¿äºŒåšé¢˜..\nç„¶åå°±æ˜¯ä½å®¿çš„äº‹ï¼Œè²Œä¼¼å‡†å¤‡å…ˆä½ä¸¤ä¸ªæ˜ŸæœŸä¸‰äººé—´ï¼Œç­‰ ylh å›å»äº†å°±å»æ•™ç»ƒå®¶é‡Œä½ï¼ˆæ•™ç»ƒä¸€ä¸ªæ˜ŸæœŸåªå›å®¶ä¸€å¤©ï¼‰ã€‚ä»Šæ™šæ˜¯å…ˆå„è‡ªå’Œå®¶é•¿ä½åŒäººé—´ã€‚æˆ¿å· 1216.\nDay 1 ä¸Šåˆæ•™ç»ƒå’•å’•äº†ï¼Œä¸­åˆæ‰æ¥æ¥æˆ‘ä»¬ã€‚\nç„¶åè®©æˆ‘ä»¬ä¸ç€æ€¥æ‰“æ¯”èµ›ï¼Œç»™æˆ‘ä»¬ä¸‰ä¸ªäººå®‰æ’äº†ä¸ªæœºæˆ¿åšé¢˜ã€‚\n$5$ é“å·¦åæ ‘ï¼Œæ´¾é£ã€ç½—é©¬æ¸¸æˆå’ŒJoint Stacksæ¯”è¾ƒè½»æ¾åœ°åšå‡ºæ¥äº†ï¼›Sequenceçœ‹äº†çœ‹é¢˜è§£ï¼Œæ„Ÿè§‰è¿˜æ²¡å®Œå…¨ææ‡‚ï¼Œä½†Aäº†ï¼›é­”æ³•çŒªå­¦é™¢ç”¨A*åœ¨å¹¿äºŒçš„OJå’ŒBZOJä¸Šè¿‡äº†ï¼Œæš‚æ—¶æ”¾å¼ƒå¯æŒä¹…åŒ–å·¦åæ ‘ï¼Œä»¥åå†å­¦å§..\nå±±ã€æ²³ã€æ ‘ï¼ˆä¸åªæ˜¯è·¯è¾¹é‚£ç§ï¼‰ï¼ˆå½“ç„¶ä¹Ÿä¸æ˜¯å¯æŒä¹…åŒ–é‚£ç§ï¼‰ï¼Œæ¸¸æ³³æ± ï¼Œä»¤äººè”æƒ³èµ· Angel Beats! çš„é£Ÿå ‚ï¼Œå„å¼å„æ ·çš„ç¤¾å›¢æ´»åŠ¨ã€‚\nDay 2-3 æŠŠé¢˜ç›®åˆ—è¡¨æåˆ°äº†æ´›è°·å›¢é˜Ÿé‡Œ.\næäº†æå¹³è¡¡æ ‘ã€å¯å‘å¼åˆå¹¶ä¹‹ç±»çš„ï¼Œæ„Ÿè§‰è‡ªå·±å•¥éƒ½ä¸ä¼š..\næäº†ä¸ªéšæœºå›¾ç‰‡ ã€‚\nDay 4 ä¸€å¤©å°±å†™äº†[NOI2004]éƒé—·çš„å‡ºçº³å‘˜å’ŒLCTæ¨¡æ¿\u0026hellip;\nç„¶åæäº†ä¸ªstylusæ’ä»¶ï¼šæ´›è°·çŠ‡çŠ‡ã€è®¨è®ºéšè—ã€‚\næœç„¶æ•´å¤©å¾…æœºæˆ¿æ•ˆç‡ä½.\nDay 5 ä¸Šåˆå¬éš”å£æœºæˆ¿çš„è®²äº†ä¸‹å›æ–‡è‡ªåŠ¨æœºã€åç¼€æ•°ç»„ã€åç¼€è‡ªåŠ¨æœºï¼Œä½†ç”±äºæ‰‹å¤´ä¸Šçš„é¢˜è¿˜æ²¡æå®Œå°±æ²¡åšç›¸å…³çš„é¢˜ç›®ã€‚\n[NOI2005]ç»´æŠ¤æ•°åˆ—åšäº†å¥½ä¹…..æœ¬æ¥æ“ä½œå°±å¤šï¼Œå–çš„å­æ®µè¿˜ä¸èƒ½ä¸ºç©º\u0026hellip;\nç„¶åå­¦äº†ä¸‹LCTã€‚\nDay 6-7 å°±åšäº†å‡ é“ LCT çš„é¢˜\u0026hellip;å­¦äº†å­¦è™šæ ‘ï¼Œè¿˜æ²¡åšé¢˜ã€‚\nç„¶åè¿™å‡ å¤©æ¯”èµ›æŒºå¤šçš„ï¼Œat+cf è¿˜æœ‰æ´›è°·æ¯”èµ›ã€‚æ„Ÿè§‰æ´›è°·æ¯”èµ›éƒ½æŒºdlçš„\u0026hellip;\nç„¶åä»Šå¤©çœ‹äº†å‡ ç¯‡vfkçš„åšå®¢ï¼Œæ„Ÿè§‰éƒ½å†™çš„æŒºå¥½çš„ã€‚\né‡Œé¢æåˆ°äº†CFctrçš„è‡ªæˆ‘ä¿®å…»ï¼Œæ„Ÿè§‰ä»¥åå‡ºé¢˜æ—¶è¦ç‰¢è®°ï¼ˆè™½ç„¶é‡Œé¢æœ‰äº›æ˜¯åªé€‚ç”¨äºCFçš„ï¼‰ï¼š\n   å‡†å¤‡ä¸€åœºCFåŒ…æ‹¬ï¼šé¢˜ç›®ã€æ¯”èµ›é€šçŸ¥ã€é¢˜è§£ã€‚\n  ä½ çš„é¢˜ç›®å¿…é¡»æ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚ä½ ä¸èƒ½ä»ä»¥å‰ç”¨è¿‡çš„é¢˜ç›®ä¸­æŠ„è¢­å®ƒçš„æƒ³æ³•ã€‚PLEASE BE FAIR WITH THE COMMUNITYã€‚ï¼ˆ\n  ç©ºé—´é™åˆ¶å¿…é¡»æ˜¯256MBï¼Œæ—¶é—´é™åˆ¶è‡³å°‘æ˜¯å‡ºé¢˜äººçš„javaç¨‹åºè¿è¡Œæ—¶é—´çš„ä¸¤å€ã€‚\n  é¢˜é¢å¿…é¡»æ¸…æ™°å¥½æ‡‚ï¼Œæ²¡æœ‰è¯­æ³•é”™è¯¯ã€‚å»ºè®®å†™å¾—çŸ­çŸ­çš„â€¦â€¦\n  é¢˜ç›®èƒŒæ™¯ä¸­ä¸è¦å†™æ•°æ®èŒƒå›´ï¼Œå…¨éƒ¨éƒ½è¦å†™åœ¨è¾“å…¥æ ¼å¼é‡Œã€‚\n  è¯·å‚è€ƒä»¥å‰CFçš„é¢˜ç›®æè¿°çš„æ ¼å¼æ¥å†™é¢˜ç›®æè¿°ã€‚å¦‚æœä½ ä¸çŸ¥é“æ€ä¹ˆæ¸…æ™°åœ°æè¿°è¾“å…¥è¾“å‡ºæ ¼å¼ï¼Œè¯·æ‰¾ä¸ä¹‹ç±»ä¼¼çš„é¢˜ç›®è¿›è¡Œä»¿å†™ã€‚\n  é¢˜ç›®æè¿°ä¸­çš„æ•°ç»„ä¸‹æ ‡æœ€å¥½ä»1å¼€å§‹ã€‚\n  ä½ å¿…é¡»é™åˆ¶è¢«ä½ æåˆ°çš„æ‰€æœ‰çš„å˜é‡çš„èŒƒå›´ã€‚å¦‚æœä½ æåˆ°ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½ å¿…é¡»å†™æ˜å“ªäº›å­—ç¬¦å¯ä»¥å‡ºç°åœ¨è¿™ä¸ªå­—ç¬¦ä¸²å†…ã€‚\n  é¢˜ç›®çš„testsä¸­å¿…é¡»åŒ…æ‹¬å„ç§å„æ ·çš„æ•°æ®ï¼Œè€Œä¸”åº”è¯¥æœ‰å„ç§å„æ ·çš„è¾¾åˆ°æœ€å°æ•°æ®èŒƒå›´çš„æ•°æ®å’Œè¾¾åˆ°æœ€å¤§æ•°æ®èŒƒå›´çš„æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœ1 \u0026lt;= n \u0026lt;= 100000ï¼Œé‚£ä¹ˆæ•°æ®ä¸­æ—¢åº”è¯¥æœ‰n = 1ï¼Œä¹Ÿåº”è¯¥æœ‰n = 100000ã€‚\n  ä½ åº”è¯¥å†™ä¸ªæš´åŠ›ã€‚\n  ä½ åº”è¯¥æ‹¿æ ‡ç¨‹ä¸æš´åŠ›å¯¹æ‹ã€‚\n  Div.2çš„é¢˜çš„pretestsè¦å¾ˆå¼ºï¼Œèƒ½è®©åº”è¯¥è¶…æ—¶çš„ç¨‹åºåœ¨pretestsä¸Šå°±TLEæ‰ã€‚ä½†æ˜¯ä½ å¯ä»¥è®©è¿™ä¸ªç‚¹æ¯«æ— æ„ä¹‰ã€‚æ¯”å¦‚ç»™nä¸ªæ•°æ’åºï¼Œä½ å¯ä»¥ç”¨nä¸ª1æ¥ç¡®ä¿é€‰æ‹©æ’åºä¸èƒ½è¿‡ã€‚\n  ç¡®ä¿è¯»é”™é¢˜çš„äººä¸èƒ½è¿‡pretestsã€‚\n  å»ºè®®æ·»åŠ æç«¯æ•°æ®ï¼Œä½†æ˜¯ä¸å¿…æ˜¯æ‰€æœ‰æç«¯æ•°æ®ã€‚ç¡®ä¿æ•°ç»„å¼€å°çš„äººä¸èƒ½è¿‡pretestsã€‚\n  ä¸è¦è®©æ—¶é—´å¤æ‚åº¦å¾ˆé«˜ä½†åšäº†å¤§é‡å¸¸æ•°ä¼˜åŒ–çš„äººACã€‚\n  æ¯é“é¢˜è‡³å°‘2ä¸ªæ ·ä¾‹ã€‚æ¯é“Div.2çš„é¢˜ç›®çš„å‰ä¸¤ä¸ªæ ·ä¾‹å¿…é¡»æœ‰æ ·ä¾‹è§£é‡Šã€‚\n  å¦‚æœè¦ä½¿ç”¨long longï¼Œè¯·ç¡®ä¿ä¸å¼€long longçš„äººä¸èƒ½è¿‡pretestsã€‚\n   å“¦å¯¹äº†ï¼Œè‡ªå®šä¹‰åŸŸåæ€»æ˜¯ç‚¸ï¼Œä»¥åè¿™ä¸ªåšå®¢å°±ç”¨ ouuan.github.io ä½œä¸ºåœ°å€äº†ã€‚ï¼ˆæ­£å¥½é¿å…äº†ä¸€å¹´ååŸŸååˆ°æœŸçš„é—®é¢˜ï¼‰\nDay 8 ä»Šå¤©å¥½åƒå•¥éƒ½æ²¡å¹²..ä¼°è®¡æ˜¯æ¯å¤©éƒ½æ²¡ç¡å¥½å¯¼è‡´ç™½å¤©æ•ˆç‡ä½ä¸‹..\nå¥½åƒçœ‹äº†å¥½å‡ ç¯‡æ·€ç²‰è´¨çš„æ•™ç¨‹ï¼Œä½†å°±æ˜¯ä¸æƒ³å†™é¢˜..\nå’Œ memset0 è®¨è®ºå…³äºä¿ç•™å‡ ä½å°æ•°ä¸ç²¾åº¦é™åˆ¶çš„é—®é¢˜..æ„Ÿè§‰å…¶ä»–äººæ€»æ˜¯ä¸èƒ½è½»æ¾åœ°ç†è§£ä¿ç•™å‡ ä½å°æ•°æ˜¯å¡ç²¾åº¦çš„\u0026hellip;\nç¿»è¯‘äº†CFçš„å‡ é“é¢˜ï¼Œå†™äº†å†™é¢˜è§£ã€‚\nç»§ç»­yyè‡ªå·±å£èƒ¡çš„é¢˜çš„ä¼˜ç§€åšæ³•ï¼Œä¾ç„¶æ²¡ä»€ä¹ˆè¿›å±•ã€‚\nè·Ÿ Sooke è¯´äº†è¯´è‡ªå·±å‡º CF çš„æƒ³æ³•ï¼ŒSooke è¡¨ç¤ºæƒ³ä¸€èµ·å‡ºï¼Œç„¶ååœ¨è¿˜æ²¡æƒ³å¥½ä¸€é“é¢˜çš„æƒ…å†µä¸‹å¤§è°ˆæ€ä¹ˆå‡º CF..\nè¯´å®è¯å‡º div.2 çš„è¯ä¼šæœ‰äº›ä¸ç”˜ï¼Œå“ªæ€•æ™šç‚¹ä¹Ÿæƒ³å‡º div.1+div.2 çš„..\nç¬¬ä¸€æ¬¡ç”¨æ´—è¡£æœºï¼Œæ„Ÿè§‰æ´—è¡£æœºçœŸæœ‰è¶£ ï¼ˆå¥½åƒæš´éœ²äº†æˆ‘ä¸€å‘¨æ²¡æ´—è¡£æœ\u0026hellip;ï¼‰\nï¼ˆhexo è²Œä¼¼ä¸æ”¯æŒè¡Œå†…å›¾ç‰‡ï¼Ÿï¼‰\nDay 9 æäº†ä¸ª éšæœºç”Ÿæˆå›¾ç‰‡ ï¼Œæ„Ÿè§‰è‡ªå·±è‡ªä»ç”¨äº† Hexo æ—¥ç›Šç”± OIer å˜æˆç å†œäº†ã€‚\nDay 10-11 è¿™å‡ å¤©å¿™ç€ææ¯”èµ›ï¼Œåšå®¢å¯èƒ½å’•å’•å’•äº†..å‡†å¤‡æ¯”èµ›è®°å¤§çº¦ä¼šåœ¨æ¯”èµ›å‡ºæ¥ä¹‹åå‘QAQ.\nDay ?-? å’•å’•å’•å’•å’•å’•å’•\nDay 14 å¹¿äºŒå…ˆæ˜¯å››æ¥¼åœç”µï¼Œç”¨äº†ä¸€ä¸Šåˆç¬”è®°æœ¬ï¼Œå‡†å¤‡å›é…’åº—çš„æ—¶å€™é—¨å«å‘Šè¯‰æˆ‘ä»¬ç”µæ¥äº†ï¼Œç„¶åå›å»ä¸€çœ‹å‘ç°å››æ¥¼æ²¡ç”µä¸‰æ¥¼æœ‰ç”µã€‚ä¸‹åˆçªç„¶å°±åˆåœç”µäº†ï¼Œå¹¸å¥½æˆ‘å’Œ dew éƒ½æ²¡æœ‰åœ¨å†™ä»£ç ..\nylh èµ°äº†ï¼Œç„¶è€Œä½æ•™ç»ƒå®¶è¢«å’•å’•äº†ï¼Œå¥½åƒæ˜¯å› ä¸ºåˆæ¥äº†å‡ ä¸ªå¤–çœçš„ã€‚\næ–°é…’åº—..å‘å‡ å¼ å›¾æ„Ÿå—ä¸€ä¸‹å§ï¼š\næ²¡é”™ p3 æ˜¯ dew åœ¨åŠæ¤…ä¸Š ç„¶è€Œä¸æ•¢å¯¹ç€ dew æ‹\u0026hellip;\nwifi ç‰¹åˆ«ç¥ä»™ï¼š\nè¢«å¤¹åœ¨äº†ä¸€ä¸ªæ²¡æœ‰ wifi çš„ä¸–ç•Œé‡Œ..\nç„¶åè²Œä¼¼æ˜å¤©è¿˜æ˜¯ä»€ä¹ˆæ—¶å€™å¼€å§‹è¦æ‰“æ¯”èµ›äº†ï¼Œç„¶åè¿™ç¯‡æ¸¸è®°å°±ä¸ä¼šç»§ç»­çœŸçš„æˆâ€œæ¸¸è®°â€äº†ã€‚\nDay 15 ä»Šå¤©æ˜¯é›†è®­é˜Ÿçˆ· zjt å‡ºçš„ é›†è®­é˜Ÿäº’æµ‹ã€‚\nT1 ä¸€é“å¸¦æƒå¸¦èŠ±æ ‘å¥½é¢˜ çš„ç¡®æ˜¯å¸¦æƒå¸¦èŠ±æ ‘è£¸é¢˜ï¼ˆæ±‚ä¸€èˆ¬å›¾æœ€å¤§æƒå€¼åŒ¹é…ï¼‰ï¼Œç„¶è€Œä¸éœ€è¦è¾“å‡ºæ–¹æ¡ˆã€‚\nè™½ç„¶è¯´ OI é¢˜åæ— æ­£è§£ï¼Œç„¶è€Œæˆ‘è¿˜æ˜¯ç™¾åº¦äº†ä¸€ä¸‹..ç„¶åå­¦äº†ä¸€ä¸ªåŠå°æ—¶å¸¦èŠ±æ ‘ï¼Œæ²¡å­¦ä¼šï¼\nç„¶åå†ä¸€çœ‹ï¼Œ$n\\le20$ ä¸ä¼šåšï¼Ÿ\nåªå¥½å†™äº†äºŒåˆ†å›¾çš„ $20$ åˆ†æ»šç²—..\nç„¶è€Œå‘ç°ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼Œè¿™è²Œä¼¼æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å†™äºŒåˆ†å›¾æœ€å¤§æƒå€¼åŒ¹é…..ç™¾åº¦äº†ä¸€ä¸‹ï¼Œå‘ç°å…¨æ˜¯KMç®—æ³•ï¼Œæ²¡æœ‰ä¸€ç¯‡è´¹ç”¨æµï¼Ÿç„¶åä»”ç»†æƒ³äº†å¥½å¤šéï¼Œæ„Ÿè§‰è´¹ç”¨æµåº”è¯¥æ²¡é—®é¢˜ï¼Œå°±å†™äº†ã€‚ç„¶è€Œä¸€å¼€å§‹å†™æŒ‚äº†ï¼ˆè¿å›¾ä¸­çš„è¾¹æ—¶æ²¡åˆ¤å“ªä¸ªç‚¹æ˜¯èµ·ç‚¹ï¼‰ï¼Œå¹¸å¥½åæ¥å‘ç°äº†ã€‚\nåæ¥å¬è¯´è¿™é¢˜ std æ˜¯ä¸€ä¸ªçº¿ä»£åšæ³•ï¼Œç”±äºä¸ç”¨è¾“å‡ºæ–¹æ¡ˆç é‡éå¸¸å°ã€‚å…·ä½“å¯ä»¥å‚è€ƒ2017å¹´é›†è®­é˜Ÿè®ºæ–‡ã€‚ç„¶è€Œçœ‹ä¸æ‡‚é¸­\u0026hellip;\nè¿™é¢˜ä¸å¡éšæœºåŒ–ä¹±æ.ï¼ˆå˜¤å˜¤å˜¤ï¼Ÿï¼‰\nT2 ä¸€é“æ‹‰æ ¼æœ—æ—¥åæ¼”å¥½é¢˜ çœ‹åˆ° T1 çœŸçš„æ˜¯ä¸€èˆ¬å›¾æœ€å¤§æƒå€¼åŒ¹é…çš„æˆ‘çœŸçš„ä¿¡äº†é¢˜åçš„é¬¼è¯..\nä¸€ä¸ª $01$ åºåˆ—ï¼Œåˆå§‹ä¸ºç©ºï¼Œæœ‰ä¸‰ç§æ“ä½œï¼š\n å¾€æœ«å°¾åŠ ä¸ª $0$ . åˆ æ‰ä¸€ä¸ªå­åºåˆ—ï¼ŒåŒ…å« $x$ ä¸ª $0$ ï¼Œ$y$ ä¸ª $1$ ï¼Œç„¶åå¾€æœ«å°¾åŠ ä¸ª $1$ ã€‚å…¶ä¸­ $x\\in A$ ã€‚ åˆ æ‰ä¸€ä¸ªå­åºåˆ—ï¼ŒåªåŒ…å« $x$ ä¸ª $0$ ï¼Œç„¶åå¾€æœ«å°¾åŠ ä¸ª $1$ ã€‚å…¶ä¸­ $x\\in B$ ã€‚  $A$ å’Œ $B$ è¿˜æœ‰æ“ä½œæ€»æ•° $n$ æ˜¯ç»™ä½ çš„ï¼Œè®©ä½ æ±‚ $n$ æ¬¡æ“ä½œå®Œæˆååºåˆ—é•¿åº¦ä¸º $1$ çš„æ–¹æ¡ˆæ•°ã€‚\nä¸€å¼€å§‹è¿˜ä»¥ä¸ºåªç”¨ç®¡ $01$ åˆ†åˆ«çš„ä¸ªæ•°ï¼Œåæ¥æ‰å‘ç°é€‰çš„å­åºåˆ—ä½ç½®ä¸åŒä¹Ÿç®—ä¸åŒçš„æ–¹æ¡ˆ\u0026hellip;\næ•°æ®èŒƒå›´ï¼šã„ã„ã‚ˆ,ã“ã„ã‚ˆ $114514$\nä¸å¤ªä¼šåšï¼Œå¥½åƒæ˜¯è½¬åŒ–æˆä¸€ä¸ªæ ‘ä¸Šçš„ dpï¼Œç„¶åå†ç®—ä¸€æ³¢å¼å­ï¼Œåˆ†æ²»FFT/ç‰›é¡¿è¿­ä»£ï¼Ÿ\nä¸å¾—ä¸è¯´æ ·ä¾‹ååˆ†lxï¼š\n10 10 10 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9  362880  æ„‰å¿«åœ°æ‹¿åˆ°äº† $|A|=|B|=n$ è¿™æ¡£éƒ¨åˆ†åˆ†ã€‚\nT3 ä¸€é“ Top cactus å¥½é¢˜ ä»™äººæŒä¸Š $q$ æ¬¡è¯¢é—®æ±‚ç»è¿‡æŸä¸ªç‚¹çš„è·¯å¾„è´¡çŒ®ä¹‹å’Œã€‚æ¨¡ $998244353$ã€‚â€œä¸åœ¨ç®€å•ç¯ä¸Šçš„è¾¹æ•°â€ä¸º $x$ çš„è·¯å¾„è´¡çŒ®ä¸º $v_x$ ã€‚\néƒ¨åˆ†åˆ†ç¬¬ä¸€æ¡£ï¼Œæ ‘ï¼Œ$n\\le2000$ ã€‚\nwocæˆ‘åªä¼š $O(n^3)$ ..\nå†·é™äº†ä¸€ä¸‹ï¼Œå‘ç°å¯ä»¥æšä¸¾è·¯å¾„æ ‘ä¸Šå·®åˆ†..\næ„‰å¿«åœ°æ‹¿åˆ°äº†è¿™ $10$ åˆ†ã€‚\næ­£è§£å¥½åƒæ˜¯æ·€ç²‰è´¨+NTTã€‚ç„¶åæ¬åˆ°åœ†æ–¹æ ‘ä¸Šå»ã€‚\næ€»ç»“ é˜Ÿçˆ·å‡ºçš„é¢˜å°±æ˜¯ç¥ä»™..ä¹‹å‰ä¸€ç›´æ„Ÿè§‰å¤šé¡¹å¼çœ‹èµ·æ¥æ²¡å•¥ç”¨ï¼Ÿè¯·julaoä»¬çœ‹åˆ°è¿™å¥è¯åˆ«æ‰“æˆ‘..æ„Ÿè§‰å¾ˆæœ‰å¿…è¦æ—©ç‚¹å»å­¦å¤šé¡¹å¼å…¨å®¶æ¡¶äº†ã€‚\nå¦å¤–é¢˜åé‡Œçš„ç®—æ³•çœŸçš„ $99%$ ä¸å¯ä¿¡ã€‚\nå¦å¤–ç”±äºæ‰“æ¯”èµ›æ¢äº†ä¸ªæœºæˆ¿ï¼Œè²Œä¼¼æœºæˆ¿é‡Œéƒ½æ˜¯ä¸€äº›å¤–çœçš„ï¼Ÿ\n OIerå±…ç„¶æ˜¯å¯ä»¥æœ‰npyçš„ï¼\n Day 16 ywwå’•å’•äº†ï¼Œmyhå‡ºçš„é¢˜ã€‚è¿™åœºé¢˜é¢å¤ªèµäº†ï¼æ®è¯´é¢˜æ„ä¸æ¸…è¢«åæ§½çš„å¾ˆå‰å®³ï¼Œä½†æˆ‘è²Œä¼¼è¿˜æ˜¯ç¬¬ä¸€æ¬¡ç¢°è§YNOIå‹é¢˜é¢ï¼ŒèƒŒæ™¯æ˜¯è‡ªå·±çœ‹è¿‡çš„ç•ªï¼Œé¢˜æ„ç¬é—´ç†è§£ã€‚\nè¿™åœºè¿˜æœ‰ä¸ªæœ‰è¶£çš„åœ°æ–¹ï¼ŒT1 å’Œ T3 çš„ subtask ä¸€å¼€å§‹æ”¾åäº†ï¼Œè€Œä¸” T3 çš„å˜é‡ T1 éƒ½æœ‰ï¼Œäºæ˜¯æˆ‘æ¯”èµ›å¼€å§‹ $2h$ æ‰å‘ç°..ï¼ˆå½“ç„¶æˆ‘å‘ç°çš„æ—¶å€™å·²ç»æ”¹å›æ¥äº†ï¼‰\nT1 é’æ˜¥é‡ç‹¼ä¸åšç†æ€§å°é­”å¥³çš„æ¢¦ é¢˜æ„ç®€è¿°ï¼Œé¢˜ç›®èƒŒæ™¯å¤ªæ£’äº†ï¼Œæ‰€ä»¥æˆ‘è¦é¢˜é¢ç®€è¿°ã€‚\nåœ¨å’–å•¡å…ï¼ŒåŒå¶ä¸è¯´è¯ï¼Œåªæ˜¯æ¨ç»™äº†ä½ ä¸€å¼ çº¸ï¼Œä¸Šé¢å†™ç€ä¸€ä¸ªä¸å®šæ–¹ç¨‹ï¼š $A_1x_1+A_2x_2+\\cdots+A_kx_k\\equiv1\\mod m$ï¼Œç„¶è€Œå…¶ä¸­çš„ä¸€äº› $A_i$ è¢«å’–å•¡æ‰“æ¹¿äº†ï¼Œéœ€è¦ç»™è¢«æ‰“æ¹¿çš„ $A_i$ ä»¬èµ‹å€¼ï¼ˆ$A_i\\in[0,m)$ï¼‰ï¼Œä½¿å¾—ä¸å®šæ–¹ç¨‹æœ‰æ•´æ•°è§£ï¼›åŒæ—¶ï¼ŒåŒå¶ä¹Ÿä¸è®°å¾— $m$ æ˜¯å¤šå°‘äº†ï¼Œæ‰€ä»¥è¦æ±‚ $m\\in[1,n]$ çš„æ–¹æ¡ˆæ•°ä¹‹å’Œã€‚$1\\le k\\le50,1\\le n \\le10^9$ã€‚\nå¤§çº¦æƒ³åˆ°æ€ä¹ˆåšäº†ï¼Œç„¶è€Œæ„Ÿè§‰æ— æ³•å®ç°ï¼ˆäº‹å®æ˜¯æ­£è§£è¦ç”¨æœæ•™ç­›ï¼‰ï¼Œä¼šå†™çš„ç‰¹åˆ«éº»çƒ¦å¤æ‚åº¦è¿˜ä¸å¯¹ï¼Œäºæ˜¯å°±åªæ‰“äº† $k\\le5$, $n\\le10$ çš„æš´åŠ›å’Œæ²¡æœ‰æ•°å­—è¢«æ‰“æ¹¿çš„åˆ†ã€‚ç„¶è€Œåé¢é‚£æ¡£æŒ‚äº†ï¼Œå› ä¸ºæ±‚åŒºé—´å†…ä¸æŸä¸ªæ•°äº’è´¨çš„æ•°ä¸ªæ•°æ—¶æ²¡æœ‰å®¹æ–¥ï¼Œæœ€ç¥å¥‡çš„æ˜¯æ‹åŠä¸ªå¤šå°æ—¶æ²¡æ‹å‡ºæ¥\u0026hellip;\nT2 é’æ˜¥é‡ç‹¼ä¸åšå§æ§å¶åƒçš„æ¢¦ å’ŒèŠ±ç»™éº»è¡£çš„ä¿¡å¾ˆæœ‰è§„å¾‹ï¼Œå¥¹å†™çš„ä¿¡æ˜¯ä¸€ä¸ª $1$ ~ $n$ çš„æ’åˆ—ï¼Œä¸€æ®µè¿ç»­çš„ä¿¡èƒ½ç»™éº»è¡£é¼“åŠ±ï¼Œå½“ä¸”ä»…å½“å®ƒçš„å€¼ä¹Ÿè¿ç»­ï¼ˆnoi.acçš„whzzté‚€è¯·èµ›é‡ŒæŠŠè¿™ç©æ„å®šä¹‰ä¸ºâ€œå¹¿ä¹‰æ’åˆ—â€ï¼Œæ„æ€å°±æ˜¯ä¸€ä¸ªåŒºé—´ï¼Œ $max-min=r-l$ ä¸”æ²¡æœ‰é‡å¤çš„æ•°ï¼‰ï¼Œéº»è¡£æƒ³çŸ¥é“å¦‚æœåªä¿ç•™ä¸€æ®µè¿ç»­çš„ä¿¡ï¼Œå¥¹èƒ½æ”¶åˆ°å¤šå°‘é¼“åŠ±ï¼ˆå°±æ˜¯å¤šç»„åŒºé—´è¯¢é—®ï¼‰ã€‚\nå…¶å®..å°±æ˜¯ CF997E Good Subsegments..\nåƒå¤ç¥çŠ‡wxh logç¢¾æ ‡ç®—ï¼lxctr myh n^2 é€æ¸©æš–ï¼å—¯ï¼Œæˆ‘æ‹¿äº† $O(n^2)$ çš„ $20$ åˆ†\u0026hellip;\nåšæ³•å‚è€ƒ zzqçš„è¯„è®º\nT3 é’æ˜¥é‡ç‹¼ä¸åšå°æ¶é­”å­¦å¦¹çš„æ¢¦ è¿™é“é¢˜é¢˜é¢å†™çš„æœ€å¥½ï¼ï¼ˆè²Œä¼¼ä¹Ÿè¢«åæ§½çš„æœ€æƒ¨ï¼‰\n å¯¹å­¦é•¿çš„æ€å¿µï¼Œæ·±åŸ‹äºå¿ƒåº•ã€‚\néš¾ä»¥è¡¨è¾¾ã€‚\nä¸å­¦é•¿çš„è®°å¿†åˆ†ä¸º $n$ ä¸ªéƒ¨åˆ†ï¼Œä¸¤ä¸ªä¸åŒçš„éƒ¨åˆ†é—´å¯èƒ½ä¼šæœ‰ä¸€ç§å…³ç³»ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰ã€‚\nå¯æ˜¯æˆ‘çŸ¥é“ï¼Œå®ƒä»¬è—•æ–­ä¸è¿ï¼Œæ³¨å®šè”é€šã€‚\næƒ³å¿˜æ‰ï¼Œå¯æ˜¯å´è¶Šæ¥è¶Šéš¾å¿˜ï¼Œ$m$ ç§å…³ç³»ä¼šå¸¦ç»™æˆ‘ $m^k$ çš„æ€å¿µã€‚\næˆ‘ä¸çŸ¥é“æˆ‘æœ‰å¤šæ€å¿µå­¦é•¿ï¼Œèƒ½å‘Šè¯‰æˆ‘å¦‚æœå…³ç³»éšæ„å‡ºç°ï¼Œæ€å¿µçš„å’Œå—ï¼Ÿ\næˆ‘ä¸æƒ³çœ‹åˆ°å¤ªå¤§çš„æ•°ï¼Œåªè¦å‘Šè¯‰æˆ‘å®ƒæ¨¡ $998244353$ çš„ç»“æœå°±å¥½äº†ã€‚\n é¢˜æ„ç®€è¿°ï¼š$n$ ä¸ªç‚¹ç»„æˆè”é€šæ— å‘å›¾ï¼Œæ±‚ä¸åŒçš„æ–¹æ¡ˆè¾¹æ•°çš„ $k$ æ¬¡æ–¹ä¹‹å’Œã€‚\næ–¯ç‰¹æ—å±•å¼€+å¤§åŠ›æ¨å¼å­+NTT.\nå†è§ã€‚\nå…¶å®ƒ myh é—®ç­ä¸Šçš„å¥³ç”Ÿï¼šä½ æ€ä¹ˆ3.5kå†™å®Œä»™äººæŒå‰–åˆ†çš„ã€‚\nå—¯ï¼Œå¥³ç”Ÿå°±æ˜¯æ˜¨å¤©çš„æ€»ç»“é‡Œçš„å¥³ç”Ÿã€‚yqyry\nDay 17 ä»Šå¤©æ²¡æœ‰æ¯”èµ›ã€‚\nDay 16 ~ Day 17 çš„è¿™æ™šè²Œä¼¼æ˜¯æ¥å¹¿äºŒä¹‹åç¡çš„æœ€é•¿çš„ä¸€æ¬¡ï¼ˆ$6$ å°æ—¶ $40$ åˆ†ï¼‰ï¼Œç„¶åæ•ˆç‡æœç„¶ç•¥é«˜äº†ä¸€äº›ï¼ˆä¸€å¤©åªæäº†FFT/NTT/å¤šé¡¹å¼æ±‚é€†ï¼Œé«˜ä¸ªé¬¼ï¼‰ï¼Œæ¯”èµ·ä¹‹å‰æ•´å¤©å‡ ä¹å•¥éƒ½ä¸å¹²è¿˜æ˜¯å¥½å¤šäº†..ï¼ˆæœ‰ç§å¦‚æœç¡8å°æ—¶èƒ½ä¸€å¤©æå®Œå¤šé¡¹å¼å…¨å®¶æ¡¶çš„é”™è§‰ï¼‰\nå¸Œæœ›è¿™å‘¨èƒ½æŠŠå¤šé¡¹å¼å¸¸è§çš„ä¸€äº›ä¸œè¥¿æå®Œå§..åˆ°æ—¶å€™åº”è¯¥ä¼šå†™ä¸€ç¯‡åšå®¢ã€‚\nDay 18 é¢“é¢“é¢“ã€‚\nT1 é¢˜æ„å¤§çº¦æ˜¯æ±‚ $l_i\\le ki+b\\le r_i$ çš„ $k,b$ æ–¹æ¡ˆæ•°ã€‚\næœ€ä½æ¡£æš´åŠ›åœ¨è€ƒè¯•ç»“æŸå‰ $10min$ æ‰æƒ³å‡ºæ¥ä¸€ä¸ªç‰¹åˆ«éº»çƒ¦çš„è§£æ³•..ç„¶åçˆ†é›¶äº†ã€‚\næ­£è§£åŠå¹³é¢äº¤ã€‚\nT2 çº¿æ€§åŒä½™æ‰¾å¾ªç¯èŠ‚æµ·æ˜Ÿã€‚\nT3 ç»™å‡ ä¸ªå›¢ï¼Œå›¢å†…ç‚¹è¿ç›¸åŒæƒå€¼è¾¹ï¼Œé—®ç‚¹ä¹‹é—´ä¸¤ä¸¤è·ç¦»ä¹‹å’Œã€‚\nä»¥å›¢å†…è¾¹æƒä¸ºç‚¹æƒæ±‚å‡ºå›¢ä¹‹é—´çš„æœ€çŸ­è·¯ï¼Œç„¶å $dist(i,j)=\\min\\{d(x,y)|x\\in S_i,y\\in S_j\\}$ï¼ˆ$S_i$ è¡¨ç¤º $i$ æ‰€åœ¨å›¢çš„é›†åˆï¼‰ã€‚\nå…·ä½“å®ç°è¦ç”¨åˆ° FMT é‡Œçš„ä¸€ä¸ªå° trick ï¼Œç„¶è€Œé¢˜è§£é‡Œä¸€ç¬”å¸¦è¿‡ï¼Œæˆ‘çœ‹äº†ä¸€ä¸‹åˆé¢˜è§£éƒ½æ²¡çœ‹æ˜ç™½\u0026hellip;\nå…¶å®ƒ é‚£ä½å¥³ç”Ÿ $rank1$ äº†\u0026hellip;\nç„¶åä»Šå¤©æ‰å‘ç°å¹¿äºŒ OJ å¤–ç½‘æ˜¯èƒ½ä¸Šçš„..ï¼ˆå½“ç„¶æ³¨å†Œä¸äº†è´¦å·QAQï¼‰\nDay 19 ä»Šå¤©æ¬çš„ ACM åŸé¢˜ï¼ŸCF æƒé™ gym Orz\né¢˜è§£ç»™å‰è€å¸ˆè§†é¢‘ï¼Œå¤ªçµæ€§äº†..\nzjt 25ï¼ˆ$rank$ $8$ï¼‰ï¼Œmyh èµ›åäº”åˆ†é’Ÿæäº¤ $15$ å¿«ä¹èµ›ã€‚\nT1 dpï¼Œå¥½åƒæ²¡å•¥ä¸ä¼šçš„çŸ¥è¯†ç‚¹ï¼Œç„¶è€Œæ²¡åšå‡ºæ¥ã€‚\nT2 æŠŠæ’åˆ—å½“æˆåæ ‡æ”¾åœ¨å¹³é¢ä¸Šï¼Œåˆ†ç±»è®¨è®ºæ±‚ä¸Šå‡å—ï¼Ÿè¡¨ç¤ºå®Œå…¨æ²¡å¬æ‡‚ï¼Œè®²çš„æ—¶å€™ myh åœ¨ä¸åœåœ°æé—®ã€‚\né»‘ç§‘æŠ€å¬ä¸æ‡‚ï¼Œè€Œè¿™é“é¢˜é™¤äº†é»‘ç§‘æŠ€è¿˜è¦ç‰›é¡¿è¿­ä»£\u0026hellip;æ¯åœºå¿…æœ‰å¤šé¡¹å¼çš„flagè¿˜æ˜¯æ²¡å€’.\nT3 æ²¡å¬æ‡‚å˜¤å˜¤å˜¤ã€‚\nDay 20 é¢“é¢“é¢“ã€‚\nä»Šå¤©æ²¡æ¯”èµ›ï¼Œç„¶è€Œåªæäº†å¤šé¡¹å¼é™¤æ³•å’Œä»»æ„æ¨¡æ•°NTTã€‚\nå¤šé¡¹å¼é™¤æ³•ä¸€å¼€å§‹ $B(x)$ æ¨¡äº† $x^m$ ï¼Œç„¶è€Œåº”è¯¥æ¨¡ $x^{n-m+1}$ ï¼Œç„¶åæŒ‚äº†åŠå¤©ã€‚\nä»»æ„æ¨¡æ•°NTTå› ä¸ºæ•°ç»„å¼€å°æŒ‚äº†åŠå¤©\u0026hellip;\nçœ‹åˆ°æ´›å’•æœ‰ç»˜æ¿ï¼Œå°±æŠŠæ™šä¸Šçš„atå’•å’•äº†ï¼Œæäº†ä¸ªpyè„šæœ¬ã€‚ä¸€å¼€å§‹å¦„æƒ³æ‰‹åŠ¨æŠŠå›¾ç‰‡è½¬æˆæ•°æ®ï¼Œå·®ç‚¹ä¸€æ™šæ²¡ç¡ï¼Œåæ¥mainåŒ…å‘äº†ä¸ªè„šæœ¬ï¼Œè½¬çš„æ•ˆæœè¿˜æŒºä¸é”™çš„ã€‚\nDay 21-23 åŸºæœ¬ä¸Šéƒ½åœ¨æç»˜æ¿ï¼Œæ¯”èµ›è®°åº”è¯¥æ˜¯æ°¸ä¹…å’•å’•äº†ï¼Œç»˜æ¿è®°è¿™å‡ å¤©ä¼šå†™å‡ºæ¥ã€‚\næœ‰ä¸€ä¸ªå°æ’æ›²ï¼Œ9102å¹´ç¬¬ä¸€ä¸ªæ¢—è¢«æˆ‘éª—äº†ç‚¹èµã€‚\nDay gugugu ç»˜æ¿è®°å’•å’•äº†ï¼Œè¿™ä¸¤å¤©çš„æ¯”èµ›è®°å’•å’•äº†ï¼Œä»Šæ™šçš„CFä¸å’•å’•ï¼çŒæ­»ï¼ï¼\nDay 27 ä»Šå¤©çš„T1éå¸¸æœ‰æ„æ€ï¼Œ$8$ ä¸ª int è¿›è¡Œç¼–ç ï¼Œç¼–ç é•¿åº¦è‡³å°‘æ˜¯ $1000$ ä¸ª intï¼Œéšæœºæ‰“ä¹±ä¹‹åç»™ä½ è§£ç ã€‚æ ‡ç®—æ˜¯ä¸€ä¸ªä¸ç¡®å®šæ€§ç®—æ³•ï¼Œæ‰€ä»¥è¿™é¢˜æ˜¯è¾¾åˆ°ä¸€å®šæ­£ç¡®ç‡å°±è¿‡ï¼Œï¼ˆç„¶åæˆ‘èµ›æ—¶ç¬¬ä¸€æ¬¡æäº¤30ï¼Œç¬¬äºŒæ¬¡æäº¤20ï¼Œè„¸é»‘é€‰æ‰‹zjtèµ›æ—¶90ï¼Œèµ›åACï¼‰ï¼Œç„¶è€Œæœ‰ç¥ä»™æƒ³å‡ºäº†å¤šç‚¹æ±‚å€¼ã€å¿«é€Ÿæ’å€¼çš„ç¡®å®šç®—æ³•ã€‚\nT2ä¸€çœ‹æ˜¯å‡ ä½•é¢˜æˆ‘å°±è·³äº†..ç„¶è€Œè¿™é¢˜ä¸æ€ä¹ˆéœ€è¦è®¡ç®—å‡ ä½•ï¼Œè€Œä¸”æœ‰ $30$ åˆ†æŒºå¥½å†™çš„\u0026hellip;..\nT3æ˜¯ä¸ªæ ‘ä¸Šdpï¼Œéƒ¨åˆ†åˆ†æœ‰ä¸ªâ€œä¸ä¸€æ¡è›‡åŒæ„â€ï¼Œç„¶åï¼š\nxswl\nå°è¯•ç€æŒ‰myhçš„æäº¤è®°å½•åˆ·é¢˜ï¼Œç¬¬ä¸€é¢˜æ˜¯ä¸ªå­—ç¬¦ä¸²å“ˆå¸Œï¼Œç¬¬ä¸€çœ¼è¿˜ä»¥ä¸ºæ˜¯ACè‡ªåŠ¨æœº..ç„¶åä¸€å‘mapTé£ï¼Œunorderedå°±è¿‡äº†ã€‚ç¬¬äºŒé¢˜æ˜¯ä¸ªè£¸çš„å•ç‚¹ã€å­æ ‘åŠ ï¼Œå•ç‚¹è¯¢é—®ï¼Œç«Ÿç„¶å†™é”™äº†3é\u0026hellip;..ç¬¬ä¸‰é¢˜æ˜¯ä¸ªæ•°ä½dpï¼Œæ„‰å¿«åœ°å¡ä½äº†\u0026hellip;.å†ä¸å¥½å¥½å­¦æ•°ä½dpæ„Ÿè§‰ä¼šå‡ºäº‹_(:Ğ·ã€âˆ )_\nDay 28 T1æ˜¯æ ‘ä¸Šåœ¨çº¿å¤šç»„å¤šè·¯å¾„è¯¢é—®é¢œè‰²ç§ç±»æ•°å’Œmexï¼Œä¸€å¼€å§‹çœ‹åˆ°éƒ¨åˆ†åˆ†è¿˜åœ¨æƒ³ä¸ºä»€ä¹ˆæ²¡ç»™æ ‘ä¸Šè«é˜Ÿåˆ†ï¼Œç„¶åä¸€æƒ³å¤šæ¡è·¯å¾„è«é˜Ÿå¤æ‚åº¦è‚¯å®šä¸å¯¹ï¼Œçœ‹é¢˜è§£æ‰çŸ¥é“æ­£è§£æ ‘åˆ†å—\u0026hellip;bitsetèƒ½åœ¨çº¿æå®šçš„äº‹ï¼Œä¸ºä»€ä¹ˆè¦ç¦»çº¿æ’åºå‘¢ï¼Ÿç„¶åæˆåŠŸåœ¨èµ›åAæ‰äº†ï¼ˆå¹¿äºŒè†œä½ èµ›èµ›åé¦–A_(:Ğ·ã€âˆ )_ï¼‰å¤§çº¦å°±æ˜¯é¢„å¤„ç†å…³é”®ç‚¹ä¹‹é—´çš„bitsetï¼Œå—å†…æš´åŠ›è·³ï¼Œå…³é”®ç‚¹ä¹‹é—´å·²ç»é¢„å¤„ç†äº†ã€‚\nT2æ˜¯é“ç¥ä»™é¢˜..å¥½åƒä»æŸå¤–å›½æ¯”èµ›æ¬çš„ï¼Œèµ›æ—¶0Aï¼Œé€šè¿‡åˆ†æ²»æ—¶åˆ¤æ–­å·¦å³ä¸€æ ·æ¥ä¿è¯å¤æ‚åº¦ï¼Œæ²¡å¤ªå¬æ‡‚ã€‚\nT3ï¼šâ€œç‚¹åˆ†æ²»ç„¶åå»ºè™šæ ‘å†ç‚¹åˆ†æ²»å°±å¥½äº†ï¼â€ï¼ˆmdzzï¼‰â€œå¬è¯´fzyæœ‰ä¸¤ä¸ªlogåšæ³•ï¼Ÿtreap/Splayåˆå¹¶å°±è¡Œäº†ï¼â€ï¼ˆmdzzï¼‰\nç„¶åç”¨bitset\u0026lt;0\u0026gt;æ°´äº†ç‚¹contributionï¼Œè¾¾æˆæˆå°±ï¼šcontributionæ¯”friendså¤šã€‚\npolygonçœŸæœ‰æ„æ€ï¼è¯•ç€æŠŠä¸€é“é¢˜æä¸Šå»äº†ã€‚\nDay 29-30 ç¨å¾®å­¦äº†ä¸‹è«æ¯”ä¹Œæ–¯åæ¼”å’Œæœæ•™ç­›ï¼Œæ„Ÿè§‰æŒºæœ‰æ„æ€çš„QAQã€‚\næ¯”èµ›å…¨åœºå°±æˆ‘ä¸ä¼šé©¬æ‹‰è½¦ï¼Œç„¶è€Œä¸‰é¢˜æš´åŠ›æ’åè¿˜ä¸é”™\u0026hellip;è²Œä¼¼åªè¦æ‰“äº†ç‚¹éæ— è„‘çš„æš´åŠ›å°±èƒ½è€ƒçš„è¿˜è¡Œã€‚ï¼ˆAé¢˜å°±jxdäº†\nDay 31 ä»Šå¤©æ¯”èµ›æ˜¯zzqå‡ºçš„ï¼Œä¸Šåœº **Chinese round ** æ—¢è§†æ„Ÿä¸¥é‡..\nT1 æ ‘ä¸Šæœ‰ä¸€äº›ç‰¹æ®Šç‚¹ã€‚\nä¸¤ä¸¤åŒ¹é…ç‰¹æ®Šç‚¹ä½¿å¾—è·ç¦»ä¹‹å’Œæœ€å¤§ã€‚æ­£è§£æ²¡å¬æ‡‚ï¼Œç„¶è€Œç›´æ¥æ‰«ä¸€éå­˜ä¸º $rk_{1..k}$ ç„¶åè¾“å‡º $(rk_i,rk_{i+\\frac k 2})$ å°±èƒ½è¿‡\u0026hellip;\nT2 â€œè¿™æ˜¯ä¸€é“äº¤äº’é¢˜â€ã€‚\nåŠ äº†ä¸€äº›é™åˆ¶æ¡ä»¶ï¼Œä¸åŒæ’åçš„äººåœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¸å›ç­”è¯¢é—®ï¼Œå¯¹å…¶æ’åºã€‚\nå¹¶ä¸æ˜¯å¾ˆéš¾ç„¶è€Œèµ›æ—¶æ²¡æƒ³åˆ°..\nT3 QuickSortä¼ªä»£ç ã€‚\næ±‚ $cnt$ æ¬¡æ“ä½œåæ’åºæˆå•¥æ ·äº†ã€‚åˆæ˜¯åªéœ€è¦å¤§å°æ—¶è½¬åŒ–ä¸º $0/1$,$0/\\pm1$ çš„ trick.\nç„¶åï¼Œä»Šå¤©å†™äº† $5$ é“è«æ¯”ä¹Œæ–¯åæ¼”ï¼Œ100+600ï¼Œæ„Ÿè§‰æµ·æ˜Ÿã€‚\nDay 32 æ”¹é¢˜æ—¥â†’å‡ºé¢˜æ—¥\nDay 33 æ¯”èµ›çš„æ—¶å€™OJæŒ‚äº†æµ·æ˜Ÿï¼Œæœ€åä¿®å¥½äº†ã€‚\næ„Ÿå—ä¸€ä¸‹åˆšä¿®å¥½æ—¶çš„æäº¤ã€‚è¿™æ¬¡é¢˜ç›®æ—¶é™åˆå¤§ï¼Œå½“æ—¶å¡äº†å¥½å‡ é¡µã€‚\nT1ä¸€å¼€å§‹æ—¶é™æ˜¯ $2s$ï¼Œåæ¥å¼€æˆ $4s$ äº†ï¼Œç„¶åä¸€æ’äºº $3.9s$\u0026hellip;\nT3ä¸€å¼€å§‹æ—¶é™æ˜¯ $6s$ï¼Œmyh NTTè¢«å¡å¸¸ï¼Œèµ›åç»™è‡ªå·±å¼€åˆ° $12s$ é‡æµ‹ï¼Œ$9s$ è¿‡äº†\u0026hellip;ç„¶åä»–æˆåŠŸ $rank1$ã€‚\nDay 34 è¿™ä¸ªæ˜¯æˆ‘ä»¬åˆšæ¥æ—¶å°±åœ¨ç”»çš„ï¼Œæœ€è¿‘ç”»å¥½äº†ï¼Œè¶ç€è¿Ÿåˆ°æ²¡äººæ‹äº†ä¸€ä¸‹ã€‚\nä¸Šåˆè¢«å‘ŠçŸ¥å­¦æ ¡æœ‰è€ƒè¯•ï¼Œæœºæˆ¿è¢«å ç”¨äº†ï¼Œè®©æˆ‘ä»¬ä¸‹åˆä¸è¦å»æœºæˆ¿ï¼Œåœ¨æ‰“æ¯”èµ›çš„ä½“è‚²é¦†å¾…ç€ã€‚äºæ˜¯å¾ˆå¤šäººéƒ½æå‰è·‘äº†..æˆ‘ä¹Ÿä¸‹åˆå°±èµ°äº†ï¼Œèµ°çš„æ—¶å€™çœ‹åˆ°ä¸€å †å°å­¦ç”Ÿæ¨¡æ ·çš„å­©å­å’Œå®¶é•¿ï¼Œå¬åˆ°äº†â€œXXè€ƒè¯•çš„ç¬¬äºŒåœºå’ŒXXæ—¶é—´ä¸€æ ·ï¼Œä¸è®©è€ƒå®Œç¬¬ä¸€åœºå°±è·‘â€ä¹‹ç±»çš„è¯ï¼Œå¬åˆ°äº†â€œäºŒç«â€ä¹‹ç±»æ›¾ç»ç†Ÿæ‚‰çš„åè¯ã€‚æˆ‘æ˜¯ä¸ºä»€ä¹ˆæ”¾å¼ƒäº†åä¸€å¯„æ¥åˆ°å¤–åˆçš„å‘¢..æ—©å°±å¿˜å¾—ä¸€å¹²äºŒå‡€äº†ï¼Œåªè®°å¾—æ¥å¤–é«˜æ˜¯å› ä¸ºwqsçš„å¯¥å¯¥å‡ å¥è¯ï¼š\nè¿˜å¬åˆ°ä¸€ä¸ªå­©å­è¯´ï¼šâ€œäºŒä¸­ç¯å¢ƒçœŸå¥½ã€‚â€æˆ‘ä»¥ä¸ºä»–ä¹Ÿä¼šæ„Ÿå¹äºŒä¸­æœ‰å±±æœ‰æ°´ï¼Œæ²¡æƒ³åˆ°ä»–è¯´çš„æ˜¯â€”â€”â€œäºŒä¸­æœ‰ä¸“é—¨çš„æ¸…æ´å·¥â€ã€‚\nDay 35 æ”¹é¢˜æ—¥é¢“é¢“é¢“\nDay 36 OrangeRabbit tql!!!\nå»æœºæˆ¿çš„è·¯ä¸Šå‘ç°è¿™ä¸ªï¼š\næˆ‘ä»¬åˆšæ¥çš„æ—¶å€™å°±çœ‹åˆ°æœ‰äººåœ¨ç”»äº•ç›–äº†ï¼Œç„¶è€Œæ‰å‘ç°è¿™ä¸ªQAQ\nT2å¯¹è‡ªå·± $20$ åˆ†æš´åŠ›è¿‡äºè‡ªä¿¡ï¼Œæ‰“äº†ä¸€ä¸ªåŠå°æ—¶è¡¨æ‰¾ä¸åˆ°è§„å¾‹åå†™äº†ä¸‹ $20$ åˆ†æ‰å‘ç°æ˜¯é”™çš„\u0026hellip;\nT1å†™äº†ä¸€ä¸ªåŠå°æ—¶æ¯”æš´åŠ›è·‘çš„è¿˜æ…¢çš„æ ‘å‰–..ç¨å¾®æƒ³æƒ³å°±å¯ä»¥å‘ç°å¤æ‚åº¦å®Œå…¨ä¸æ¯”æš´åŠ›ä¼˜çš„ï¼Œç„¶è€Œæƒ³åˆ°å°±æ‰“äº†..\næœ€åæ²¡æ—¶é—´å†™T3æš´åŠ›äº†ï¼Œèµ›åå¬è¯´T3æ•°æ®ç‰¹åˆ«æ°´ï¼Œéšä¾¿å†™éƒ½èƒ½å…­ä¸ƒååˆ†..\näºæ˜¯ç‚¸çš„ç‰¹åˆ«æƒ¨ã€‚\næ™šä¸Šå­¦äº†ä¸‹æ·€ç²‰è´¨ï¼ˆè®²é¢˜çš„æ—¶å€™myhè®¤ä¸ºæœºæˆ¿é‡Œæ²¡äººä¸ä¼šåŠ¨æ€ç‚¹åˆ†æ ‘\u0026hellip;ï¼‰ï¼Œçœ‹é¢˜è§£æ€ä¹ˆéƒ½çœ‹ä¸æ‡‚ï¼Œåªä¸è¿‡è‡ªå·±yyå¾ˆå¿«å°±å†™å‡ºæ¥äº†ï¼Œç„¶è€Œç¬¬ä¸€æ¬¡äº¤çš„æ—¶å€™å‰å‘æ˜Ÿå­˜è¾¹æ•°ç»„æ²¡å¼€ä¸¤å€..ï¼Ÿ\nDay 37 ä»Šå¤©åˆæ˜¯zzqå‡ºçš„é¢˜ï¼ŒT1T2éƒ½æ˜¯æ„é€ ï¼Œå…¶ä¸­T1æ²¡æœ‰è¾“å…¥..T1 randè·‘äº†ä¸€ä¸ªå°æ—¶è·‘å‡ºæ¥ $60$ åˆ†ï¼ˆå­˜ç§å­æäº¤ï¼‰ï¼ŒT2æœ€ä½æ¡£çˆ†æœä¸ä¼š..ä¸¤ä¸ªç‰¹æ®Šæ€§è´¨subtaskå†™äº† $30$ åˆ†ã€‚\nT3 ä¹Ÿæ˜¯é“æ€ç»´å¥½é¢˜ï¼Œå†™äº†ä¸ª $O(n^3)$ æš´åŠ› $30$ åˆ†ã€‚\nDay 38 å¥½åƒæ˜¯æœ€åä¸€ä¸ªæ”¹é¢˜æ—¥..åˆé¢“è¿‡å»äº†æ²¡ä»€ä¹ˆå¥½è¯´çš„ã€‚\nDay 39 Sookeè·Ÿæˆ‘è¯´ä»–æ˜¨å¤©åšäº†è¿™å¥—é¢˜\u0026hellip;ç„¶åå‘Šè¯‰æˆ‘ä¸è¦çœ‹T3ï¼Œä¼šå¾ˆæƒ¨ã€‚ç„¶è€Œ..\nè¿™æ¬¡å¥½åƒæ˜¯æˆ‘æ‹¿åˆ° $80$ åˆ†æœ€å¿«çš„ä¸€æ¬¡ï¼Œæ‰“å®ŒT1T2æ‹äº†ä¸€ä¸‹å°±å¼€å§‹ç©æç­”äº†ã€‚çœ‹äº†ä¸€ä¼šå„¿å¤§çº¦çœ‹æ‡‚äº†ä¸€ç‚¹ï¼Œç„¶åè¯•ç€ç™¾åº¦äº†ä¸€ä¸‹â€œlambdaâ€ï¼Œå•¥éƒ½æ²¡æŸ¥åˆ°ï¼Œç„¶åç»§ç»­æœâ€œlambda é‚±å¥‡â€ï¼Œå‘ç°â€œé‚±å¥‡æ•° ç™¾åº¦ç™¾ç§‘â€ï¼Œç„¶åç»§ç»­æœâ€œé‚±å¥‡æ•°â€ï¼Œæœåˆ°äº†è¿™ä¸ªã€‚äºæ˜¯å¼€å§‹ç ”ç©¶..å‰é¢ $6$ ä¸ªç‚¹æœ‰çš„æ˜¯è‡ªå·±æƒ³çš„ï¼Œæœ‰çš„æ˜¯çœ‹æ‡‚ä¹‹åå†™çš„ï¼Œ78æ˜¯ç›´æ¥æŠ„çš„ã€‚æœ€åæ··åˆ°ä¸ª15å..lxç‰¹åˆ«ba\u0026hellip;åªä¸è¿‡ä»Šå¤©åˆæ¥äº†å‡ ä¸ªäººï¼Œæ„Ÿè§‰ä¸æŠ„çš„è¯äºŒä¸‰ååå¥½åƒä¹Ÿæœ‰ï¼Œä¹Ÿæµ·æ˜Ÿå•¦\u0026hellip;\nDay 40 æœ€åä¸€å¤©äº†å‘¢..å·²ç»åœ¨å¸ƒç½®THUWCäº†ã€‚\nä»Šå¤©çš„é¢˜æš´åŠ›æ¡£ç‰¹åˆ«å°‘..åˆæ˜¯1hæ‹¿åˆ°äº† $48$ ç„¶åè‚ä¸å‡ºäº†\u0026hellip;T3æœ‰å¾ˆå¤šäººAï¼Œå’Œä¹‹å‰D16T2æœ‰ç‚¹åƒï¼Œæ˜¯ç»™ä¸€ä¸ªæ’åˆ—é—®åˆ’åˆ†æˆè‹¥å¹²ä¸ªè¿ç»­æ®µçš„æ–¹æ¡ˆæ•°ï¼Œåšæ³•ä¹Ÿæ¯”è¾ƒç±»ä¼¼ï¼Œç„¶è€Œæ²¡æƒ³èµ·æ¥ï¼Œä¹Ÿä¸ä¼šåš\u0026hellip;\nè¿™ $40$ å¤©å¥½å¤šæƒ³è¡¥çš„çŸ¥è¯†ç‚¹ä¹Ÿæ²¡è¡¥å®Œ..é¢˜ä¹Ÿæ²¡æ€ä¹ˆæ”¹..æ€»ä½“æ¥è¯´æŒºé¢“çš„\u0026hellip;æœ€åä¸¤å¤©å†ç¨å¾®è¡¥ä¸€è¡¥ï¼Œè°ƒæ•´ä¸€ä¸‹çŠ¶æ€å§ï¼Œè€ƒå‡ºåº”æœ‰çš„æˆç»©å°±å¥½ã€‚è¿™ç¯‡åšå®¢å¤§æ¦‚å°±è¿™æ ·å®Œç»“äº†ï¼Œä¸‹æ¬¡å°±æ˜¯THUWC/WCæ¸¸è®°äº†ã€‚\nDay 41 æœ¬æ¥åº”è¯¥ç»“æŸäº†çš„..ä»Šå¤©æ²¡å»å­¦æ ¡ï¼Œ10ç‚¹çš„æ—¶å€™dewçªç„¶å‘Šè¯‰æˆ‘ä»Šå¤©æœ‰åœºæ¯”èµ›ï¼Ÿï¼Ÿä¸€çœ‹æ˜¯THUSCH2017åŸé¢˜ï¼Œç„¶åT1 dlçº¿æ®µæ ‘å†™äº†2hæ²¡è°ƒå‡ºæ¥\u0026hellip;åªä¸è¿‡å¥½åƒå¹¶ä¸æ˜¯è†œä½ èµ›ï¼Œå¹¿äºŒOJå¾ˆæ—©å°±æœ‰è¿™å‡ é¢˜äº†ï¼Œä»Šå¤©çš„standingä¹Ÿåªæœ‰6ä¸ªäºº\u0026hellip;\nç„¶å..çªç«Ÿç„¶çœŸçš„åœ¨WCå‰æŠŠkanonè¡¥å®Œäº†..\n","date":"2018-12-09T15:31:27+08:00","permalink":"https://ouuan.github.io/post/2018-2019%E5%86%AC-%E5%B9%BF%E4%BA%8C%E9%81%BF%E5%AF%92%E8%AE%B0/","tags":["é›†è®­"],"title":"2018~2019å†¬ å¹¿äºŒé¿å¯’è®°"},{"categories":["æ¸¸è®°"],"contents":"ä¹‹å‰å¬æ•™ç»ƒå®‰åˆ©ï¼Œå°±æ¥æ‰“äº†åœº AtCoderã€‚\n-5h æ¯”èµ›åœ°å€\nä¸€å¼€å§‹çœ‹åˆ° \u0026ldquo;Beginner\u0026quot;çš„æ—¶å€™æˆ‘è¿˜è¿Ÿç–‘äº†ä¸€ä¸‹ï¼Œçœ‹äº†ä¸‹ä¸Šä¸€åœº Beginner çš„é¢˜ç›®ï¼Œåˆåœ¨ç½‘ä¸Šæœäº†ä¸€ä¸‹ï¼Œæƒ³ç€å¯ä»¥ç†Ÿæ‚‰ä¸€ä¸‹ AtCoder ï¼Œå°±å‡†å¤‡æ‰“äº†ã€‚\n0min å’•å’•å’•\n5min å’•å’•å’•å’•å’•å’•\nåªä¸è¿‡å¹¸å¥½å’•å’•äº†ï¼Œæˆ‘çš„æ¨¡æ¿è¿˜æ²¡æå¥½..èµ¶ç´§æ–°å»ºæ–‡ä»¶å¤¹ atcoder\\AtCoder Beginner Contest 115 ï¼ŒæŠŠ $4$ ä¸ªç”¨äº CF çš„æ¨¡æ¿æ‰”è¿›å»ã€‚\n10min å¼€å§‹äº†ï¼\nç”¨äº† $0.1s$ å†³å®šç”¨ switch è€Œä¸æ˜¯ if else ã€‚\nç”¨äº†ä¸çŸ¥é“å¤šä¹…æ•²å®Œã€‚\næ²¡æµ‹æ ·ä¾‹ï¼ˆåºŸè¯ï¼‰ç›´æ¥äº¤äº†ã€‚\nå…¶å®æˆ‘ç°åœ¨è¿˜åœ¨æƒ³ï¼Œå¦‚æœ WJ çš„æ—¶å€™æˆ‘å»å†™ T2 è€Œä¸æ˜¯åˆ·æ–°çœ‹ç»“æœä¼šä¸ä¼šæ¶¨ä¸ªä¸€ä¸¤å\u0026hellip;\n12min çœ‹äº†ä¸‹ $10\\times10000\u0026lt;10^9$ ã€‚\nç”¨äº†ä¸çŸ¥é“å¤šä¹…æ•²å®Œã€‚\næµ‹äº†æ ·ä¾‹äº¤äº†ã€‚\nå…¶å®æˆ‘ç°åœ¨è¿˜åœ¨æƒ³ï¼Œå¦‚æœæ²¡æµ‹æ ·ä¾‹æˆ‘ä¼šä¸ä¼šå†æ¶¨ä¸ªä¸€ä¸¤å\u0026hellip;\n14min æƒ³äº†æƒ³è¿˜æ˜¯ç”¨äº†å¿«è¯»ï¼Œæ¯•ç«Ÿæ¨¡æ¿é‡Œæœ‰ã€‚\næµ‹æ ·ä¾‹ï¼Œæ²¡å†™cout\u0026lt;\u0026lt;ans; ã€‚\nå…¶å®æˆ‘ç°åœ¨è¿˜åœ¨æƒ³ï¼Œå…¶å®æˆ‘ç°åœ¨è¿˜åœ¨æƒ³ï¼Œå¦‚æœæ²¡æµ‹æ ·ä¾‹æˆ‘ä¼šä¸ä¼šæ‰ä¸ªåå‡ åã€‚\n16min æ•°æ®èŒƒå›´çœ‹èµ·æ¥å¥½å°ã€‚\nç­‰ç­‰ï¼Œ$x$ çš„èŒƒå›´ï¼Ÿ\né¢„å¤„ç†æ±‰å ¡çš„å¤§å°ã€‚\nå“¦ï¼Œçˆ† int äº†ã€‚\nå…¶å®æˆ‘ç°åœ¨è¿˜åœ¨æƒ³ï¼Œå¦‚æœæ¨¡æ¿é‡Œæœ‰#define int long longæˆ‘ä¼šä¸ä¼šå†æ¶¨ä¸ªä¸€ä¸¤å\u0026hellip;\nå†™ä¸ªå‡½æ•° work(int a) å¤„ç†å¤§å°ä¸º $a$ çš„æ±‰å ¡ï¼Œåˆ†ç±»è®¨è®ºä¹±æä¸€ä¸‹åº”è¯¥å°±è¡Œäº†ã€‚\næµ‹æ ·ä¾‹ï¼Œ#3 çœ‹èµ·æ¥å¥½å¤§ã€‚\nç»ˆäºå¯ä»¥å®‰å¿ƒåœ°çœ‹ judging ä¸ç”¨æ‹…å¿ƒæµªè´¹æ—¶é—´äº†ã€‚\n130min Beginner å®šçº§è²Œä¼¼æœ€é«˜ 400 ç‚¹ rating..\n","date":"2018-12-08T21:50:43+08:00","permalink":"https://ouuan.github.io/post/atcoder-beginner-contest-115/","tags":["AtCoder"],"title":"AtCoder Beginner Contest 115 æ¸¸è®°"},{"categories":["é¢˜è§£"],"contents":"åˆåªä¼šå†™T1\u0026hellip;\né¢˜ç›®é“¾æ¥\né¢˜æ„ç®€è¿° ç»™ä½ ä¸€ä¸ªæ’åˆ— $p_{1..n}$ï¼Œ$a_{1..n}$ ä¸ºä»»æ„çš„ä¸€ä¸ªæ’åˆ—ï¼Œå®šä¹‰ $b[a_i]=a[p_i]$ï¼Œæ±‚æ€»å…±æœ‰å¤šå°‘ä¸ªä¸åŒçš„ $b_{1..n}$ ã€‚\nåšæ³• é¦–å…ˆï¼Œå¯¹ $(i,p_i)$ è¿è¾¹ï¼Œä¼šå¾—åˆ°è‹¥å¹²ä¸ªç¯ã€‚\nç¯ä¸Šæ—‹è½¬ä¸€ä¸‹ï¼ˆ$\\forall i\\text{ on the cycle : }i\\rightarrow p_i$ï¼‰å¾—åˆ°çš„ç½®æ¢æ˜¯æœ¬è´¨ç›¸åŒçš„ã€‚èŠ‚ç‚¹ä¸ªæ•°ç›¸åŒçš„ç¯äº’æ¢ä¸€ä¸‹æ˜¯æœ¬è´¨ç›¸åŒçš„ã€‚\nå…ˆè®¡ç®—æŠŠ $nâ€‹$ ä¸ªèŠ‚ç‚¹åˆ†æˆè‹¥å¹²ä¸ªç¯çš„æ–¹æ¡ˆæ•°ï¼šï¼ˆç”¨ $siz[i]â€‹$ è¡¨ç¤ºç¬¬ $iâ€‹$ ä¸ªç¯çš„å¤§å°ï¼Œ$kâ€‹$ è¡¨ç¤ºç¯çš„ä¸ªæ•°ï¼Œ$sum[i]â€‹$ è¡¨ç¤º $\\sum\\limits_{j=i}^ksiz[j]â€‹$ï¼‰\n$$S_1=\\prod\\limits_{i=1}^kC_{sum[i]}^{siz[i]}$$\nç„¶åå»æ‰èŠ‚ç‚¹ä¸ªæ•°ç›¸åŒçš„ç¯äº’ç›¸äº¤æ¢ï¼šï¼ˆç”¨ $num[i]$ è¡¨ç¤ºèŠ‚ç‚¹ä¸ªæ•°ä¸º $i$ çš„ç¯çš„ä¸ªæ•°ï¼‰\n$$S_2=\\frac{S_1}{\\prod\\limits_{i=1}^nnum[i]!}$$\nç„¶åä¹˜ä¸Šæ¯ä¸ªç¯æ—‹è½¬ï¼ˆæ—‹è½¬é€ æˆçš„ä¸åŒæ–¹æ¡ˆæ•°å³å›ºå®šæŸä¸ªæ•°åå‰©ä¸‹çš„æ•°çš„æ’åˆ—ä¸ªæ•°ï¼‰ï¼š\n$$S_3=S_2\\times\\prod\\limits_{i=1}^k(siz[i]-1)!$$\n$S_3$ å°±æ˜¯æœ€ç»ˆçš„ç­”æ¡ˆäº†ã€‚\nå‚è€ƒä»£ç  noi.ac ä¸Šæœ€çŸ­è§£ï¼ˆå…¶å®è®¡ç®—æ–¹å¼å’Œæˆ‘æ˜¯ä¸€æ ·çš„..ï¼‰ï¼š\n#include\u0026lt;bits/stdc++.h\u0026gt; #define mn 1111111 using namespace std; long long n,i=1,s=1,j,x,p=998244353,a[mn],f[mn],v[mn],t[mn]; int main() { scanf(\u0026quot;%lld\u0026quot;,\u0026amp;n); f[0]=f[1]=1; for (;i\u0026lt;=n;i++) scanf(\u0026quot;%lld\u0026quot;,a+i); for (i=2;i\u0026lt;=n;i++) f[i]=f[p%i]*(p-p/i)%p,(s*=i)%=p; for (i=1;i\u0026lt;=n;i++) if (!v[i]) { for (j=i,x=0;!v[j];x++,j=a[j]) v[j]=1; (s*=f[x]*f[++t[x]]%p)%=p; } printf(\u0026quot;%lld\u0026quot;,s); }  æˆ‘è‡ªå·±èµ›æ—¶çš„è¾£é¸¡å†™æ³•ï¼š\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; using namespace std; int read() { int out=0; char c; while (!isdigit(c=getchar())); for (;isdigit(c);c=getchar()) { out=out*10+c-'0'; } return out; } const int N=1000010; const int M=998244353; void dfs(int u); int c(int a,int b); int n,p[N],dfn[N],low[N],sta[N],dfncnt,top,siz[N],tot,num[N]; int x,y,jc[N],inv[N],ans=1,sum; bool ins[N]; int main() { int i; n=sum=read(); for (i=1;i\u0026lt;=n;++i) { p[i]=read(); } for (i=1;i\u0026lt;=n;++i) { if (dfn[i]==0) { dfs(i); } } jc[0]=jc[1]=inv[0]=inv[1]=1; for (i=2;i\u0026lt;=n;++i) { inv[i]=(1ll*M*M-1ll*(M/i)*inv[M%i])%M; } for (i=2;i\u0026lt;=n;++i) { jc[i]=(1ll*jc[i-1]*i)%M; inv[i]=(1ll*inv[i-1]*inv[i])%M; } for (i=1;i\u0026lt;=tot;++i) { ans=1ll*ans*c(sum,siz[i])%M; sum-=siz[i]; } for (i=1;i\u0026lt;=n;++i) { ans=1ll*ans*inv[num[i]]%M; } for (i=1;i\u0026lt;=tot;++i) { ans=1ll*ans*jc[siz[i]-1]%M; } cout\u0026lt;\u0026lt;ans; return 0; } int c(int a,int b) { if (a==b||b==0) { return 1; } return 1ll*(1ll*jc[a]*inv[b]%M)*inv[a-b]%M; } void dfs(int u) { dfn[u]=low[u]=++dfncnt; sta[++top]=u; ins[u]=true; if (dfn[p[u]]==0) { dfs(p[u]); low[u]=min(low[u],low[p[u]]); } else if (ins[p[u]]) { low[u]=min(low[u],dfn[p[u]]); } if (low[u]==dfn[u]) { siz[++tot]=1; while (sta[top]!=u) { ++siz[tot]; ins[sta[top--]]=false; } ins[sta[top--]]=false; ++num[siz[tot]]; } }  æ‰€ä»¥è¯´ä¸è¦çœ‹åˆ°ç¯å°± tarjan\u0026hellip;\n","date":"2018-12-08T12:04:29+08:00","permalink":"https://ouuan.github.io/post/wc2019-%E5%85%A8%E5%9B%BD%E6%A8%A1%E6%8B%9F%E8%B5%9B%E7%AC%AC%E4%BA%8C%E5%9C%BA-t1-%E9%A2%98%E8%A7%A3/","tags":["ç»„åˆæ•°å­¦","noi.ac"],"title":"WC2019 å…¨å›½æ¨¡æ‹Ÿèµ›ç¬¬äºŒåœº T1 é¢˜è§£"},{"categories":["æŠ€æœ¯"],"contents":"æŠ˜è…¾äº† $3$ å¤©ç»ˆäºæŠŠåšå®¢æ­å»ºå¥½äº†\u0026hellip;æœ¬æ–‡ä¼šç®€å•ä»‹ç»ä¸€ä¸‹ hexo åšå®¢çš„æ­å»ºï¼Œå¹¶é€‰å–ä¸€äº›æˆ‘è‡ªå·±åœ¨é…ç½®åšå®¢çš„è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œè¯´æ˜ä¸€ä¸‹æˆ‘çš„è§£å†³æ–¹æ¡ˆã€‚\nå®é™…ä¸Šï¼Œhexo åšå®¢çš„æ­å»ºå¹¶ä¸éš¾ï¼Œéš¾æçš„æ˜¯ç¾åŒ–ï¼Œæˆ‘åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œä¸å¯èƒ½åœ¨è¿™ç¯‡åšå®¢ä¸­å…¨éƒ¨é™ˆè¿°å‡ºæ¥ï¼Œæœ€é‡è¦çš„è¿˜æ˜¯å‹¤äºç™¾åº¦ã€‚\nwarning\næœ¬åšå®¢å·²ä» hexo è¿ç§»è‡³ hugoï¼Œè¯¦è§ ä» hexo åˆ° hugo ã€‚\n åšå®¢çš„æ­å»º å…ˆæ¨èä¸¤ç¯‡æ¯”è¾ƒå¥½çš„æ•™ç¨‹ï¼šæ­å»ºä¸ªäººåšå®¢-hexo+githubè¯¦ç»†å®Œæ•´æ­¥éª¤ï¼Œä½¿ç”¨github+Hexoäººäººéƒ½èƒ½æ‹¥æœ‰ä¸€ä¸ªç¾ç¾çš„åšå®¢ã€‚\nè¿™éƒ¨åˆ†ç½‘ä¸Šè®²çš„å·²ç»æ¯”è¾ƒå¥½äº†ï¼Œæˆ‘åœ¨è¿™å°±ç®€å•è¯´ä¸€ä¸‹ã€‚\nå®‰è£…è½¯ä»¶ éœ€è¦å®‰è£…çš„è½¯ä»¶æœ‰ï¼šgitï¼ŒNode.jsã€‚\nä¸‹è½½å®‰è£…å³å¯\u0026hellip;\næœ¬åœ°è®¾ç½® è£…å¥½ä¹‹åï¼Œåœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä¸‹æ–‡ä¸­ç§°å…¶ä¸ºâ€œæ ¹ç›®å½•â€ã€‚\n ä¸‹æ–‡ä¸­â€œè¾“å…¥å‘½ä»¤â€å‡æŒ‡åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥å‘½ä»¤ï¼ˆå¹¶å›è½¦åºŸè¯ï¼‰ï¼Œæ—¢å¯ä»¥ä½¿ç”¨ git bashï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ cmd æˆ– powershell ã€‚è¾“å…¥å‘½ä»¤æ—¶è‹¥æ— ç‰¹åˆ«è¯´æ˜éƒ½éœ€è¦ cd åˆ°æ ¹ç›®å½•ä¸‹ã€‚\n è¾“å…¥å‘½ä»¤ npm install -g hexo æ¥å®‰è£… hexo ã€‚\nè¾“å…¥å‘½ä»¤ hexo init æ¥åˆå§‹åŒ– hexo ã€‚\nè¾“å…¥å‘½ä»¤ npm install  æ¥å®‰è£…ä¸€äº›éœ€è¦çš„åŒ…ã€‚\nè¾“å…¥å‘½ä»¤ hexo sï¼Œå¹¶åœ¨æµè§ˆå™¨æ‰“å¼€ localhost:4000ï¼Œåœ¨æœ¬åœ°é¢„è§ˆåšå®¢ï¼›å¦‚æœä¸Šæ–‡æ­¥éª¤è¿›è¡Œæ­£ç¡®ï¼Œåº”è¯¥çœ‹åˆ°ä¸€ä¸ªç±»ä¼¼äºè¿™æ ·çš„é¡µé¢ï¼š\n æ³¨ï¼šå‘½ä»¤å¯ä»¥ç¼©å†™ï¼Œæ¡ä»¶æ˜¯æ²¡æœ‰å¼€å¤´å‡ ä¸ªå­—æ¯ç›¸åŒçš„å…¶å®ƒå‘½ä»¤ã€‚hexo s å®é™…ä¸Šæ˜¯ hexo server çš„ç¼©å†™ï¼›ä¸‹æ–‡ä¸­ hexo d æ˜¯ hexo deploy çš„ç¼©å†™ï¼Œhexo g æ˜¯ hexo generate çš„ç¼©å†™ï¼›hexo clean ä¸èƒ½ç¼©å†™ä¸º hexo cï¼Œå› ä¸ºå­˜åœ¨å‘½ä»¤ hexo config ï¼Œä½†æ˜¯å¯ä»¥ç¼©å†™ä¸º hexo cl ã€‚\n æŒ‰ Ctrl+C å…³é—­ server ä»¥ç»§ç»­æ“ä½œã€‚ï¼ˆè‹¥å‡ºç°ç±»ä¼¼äº ç»ˆæ­¢æ‰¹å¤„ç†æ“ä½œå—(Y/N)? çš„æç¤ºï¼Œè¾“å…¥ y å³å¯ã€‚ï¼‰\næ¥ç€å®‰è£…åšå®¢çš„ä¸»é¢˜ï¼Œå¯ä»¥åœ¨ hexo å®˜ç½‘ é€‰æ‹©ä¸»é¢˜ä¸‹è½½ï¼Œæœ¬ç¯‡æ•™ç¨‹æ¨èä½¿ç”¨ NexT ä¸»é¢˜ã€‚\nåœ¨ hexo å®˜ç½‘ ç‚¹å‡»å›¾ç‰‡ä¸‹æ–¹è“è‰²çš„æ–‡å­—å³å¯æ‰“å¼€ä¸»é¢˜çš„ GitHub ä¸»é¡µï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªä¸»é¢˜çš„ GitHub ä¸»é¡µä¸Šæ˜¯æœ‰ç”¨äºå®‰è£…çš„å‘½ä»¤ä»¥åŠé…ç½®åšå®¢çš„æ•™ç¨‹çš„ã€‚\nå¦‚æœæ²¡æœ‰çš„è¯ï¼ˆæˆ–è€…å³ä½¿æœ‰ä¹Ÿä¸€æ ·ï¼‰ï¼Œä½ åº”è¯¥è¾“å…¥å‘½ä»¤ git clone ä¸»é¢˜çš„Githubä¸»é¡µåœ°å€ themes/ä¸»é¢˜å  ã€‚ä¾‹å¦‚ï¼šgit clone https://github.com/theme-next/hexo-theme-next themes/next ã€‚\nå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤çš„ landscape ä¸»é¢˜ï¼Œä»è€Œä¸ç”¨é¢å¤–ä¸‹è½½ä¸»é¢˜ã€‚\nä¸‹è½½å¥½ä¸»é¢˜åï¼Œç”¨ä»»ä½•ä¸€æ¬¾æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆè®°äº‹æœ¬ä¹Ÿå¯ä»¥ï¼‰ï¼Œæ‰“å¼€æ ¹ç›®å½•ä¸‹çš„ _config.yml ï¼Œå°† theme: landscape ä¿®æ”¹ä¸º theme: ä½ æƒ³ç”¨çš„ä¸»é¢˜å å³å¯ã€‚\né…ç½® GitHub ä»“åº“ é¦–å…ˆä½ éœ€è¦æœ‰ä¸€ä¸ª GitHub è´¦å·ã€‚\nç„¶åç‚¹å‡»å³ä¸Šè§’ä½ çš„å¤´åƒï¼Œæ‰“å¼€â€œYour repositoriesâ€ï¼Œç‚¹å‡»ç»¿è‰²çš„æŒ‰é’®â€œNewâ€ã€‚\nåœ¨\u0026quot;Repository nameâ€ä¸€æ å¡«å…¥ yourname.github.io ï¼ˆâ€œyournameâ€æŒ‡ä½ çš„ GitHub IDï¼Œæ¯”å¦‚æˆ‘å°±å¡« ouuan.github.ioï¼‰ï¼Œ\u0026ldquo;Description\u0026quot;å¯ä»¥éšä¾¿å¡«ä¹Ÿå¯ä»¥ä¸å¡«ï¼Œç„¶åç‚¹ç»¿è‰²çš„æŒ‰é’®â€œCreate repositoryâ€ã€‚\nå°†åšå®¢ä¸Šä¼ è‡³ GitHub è¾“å…¥å‘½ä»¤ ssh-keygen æ¥ç”Ÿæˆ SSHï¼Œè®©ä½ è¾“å…¥ä¸œè¥¿ä½ å°±ç©ºç€ï¼ŒæŒ‰å›è½¦ï¼ˆåº”è¯¥è¦æŒ‰ä¸‰æ¬¡å›è½¦ï¼‰ã€‚\nç„¶åç”¨ä»»æ„çš„æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ C:\\Users\\ç”µè„‘ç”¨æˆ·å\\.ssh\\id_rsa.pubï¼ˆå¦‚æœè£…äº† vim å¯ä»¥ç›´æ¥è¾“å…¥å‘½ä»¤ vim ~/.ssh/id_rsa.pubï¼‰ï¼Œå¤åˆ¶é‡Œé¢çš„å†…å®¹ã€‚\næ‰“å¼€ GitHubï¼Œç‚¹å‡»å³ä¸Šè§’çš„å¤´åƒï¼Œæ‰“å¼€â€œSettingsâ€ï¼Œé€‰æ‹©å·¦è¾¹çš„â€œSSH and GPG keysâ€ï¼Œç‚¹ç»¿è‰²çš„æŒ‰é’®â€œNew SSH keyâ€ï¼ŒTitle éšä¾¿å¡«ï¼Œä¸‹é¢çš„ Key æŠŠåˆšæ‰å¤åˆ¶çš„ä¸œè¥¿ç²˜è´´è¿›å»ï¼Œç„¶åç‚¹ç»¿è‰²çš„æŒ‰é’®â€œAdd SSH keyâ€ã€‚è¿‡ç¨‹ä¸­å¯èƒ½éœ€è¦è¾“å…¥å¯†ç ã€‚\nè¾“å…¥å‘½ä»¤ ssh -T git@github.com ï¼Œè‹¥å‡ºç° Hi yourname! You've successfully authenticated, but GitHub does not provide shell access. è¡¨ç¤º SSH é…ç½®æˆåŠŸã€‚\nè¾“å…¥å‘½ä»¤ npm install hexo-deployer-git --save å®‰è£… deployer ã€‚\næ‰“å¼€æ ¹ç›®å½•ä¸‹çš„ _config.yml ï¼Œå°†æœ€åå‡ è¡Œæ”¹ä¸ºï¼š\ndeploy: type: git repository: https://github.com/yourname/yourname.github.io.git branch: master  å½“ç„¶\u0026quot;yourname\u0026quot;è¦æ”¹æˆä½ çš„ GitHub ID ã€‚\nä¾æ¬¡è¾“å…¥å‘½ä»¤ï¼š\nhexo clean hexo g hexo d  è¿™ä¸€æ­¥å¯èƒ½è¦è¾“å…¥å¯†ç ã€‚\nç­‰å‡ åˆ†é’Ÿï¼Œå†ç”¨æµè§ˆå™¨æ‰“å¼€ yourname.github.io ï¼Œåº”è¯¥å°±å¯ä»¥çœ‹åˆ°ä½ çš„åšå®¢äº†ã€‚ï¼ˆæ­¤æ—¶åˆ«äººä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªç½‘å€çœ‹åˆ°ä½ çš„åšå®¢ã€‚ï¼‰\nåšå®¢çš„é…ç½®ä¸ç¾åŒ– æ ¹ç›®å½•ä¸‹çš„ _config.yml è¿™éƒ¨åˆ†å‚è€ƒå®˜ç½‘æ•™ç¨‹å³å¯ã€‚\nå»ºè®®ä¸è¦åƒæˆ‘ä¸€æ · permalink è®¾æˆ title/\u0026hellip;åšå®¢å†™å¤šäº†ä¹‹åï¼Œå¦‚æœåšå®¢å…¨æ”¾åœ¨æ ¹ç›®å½•ï¼Œå°±ä¼šéå¸¸è‡ªé—­ã€‚ï¼ˆè¯•æƒ³ä¸€ä¸‹ä½ å“ªå¤©å†™åˆ°äº† 1000 ç¯‡åšå®¢ï¼Œç„¶åæ‰“å¼€åšå®¢ repoï¼Œæ˜¾ç¤º Sorry, we had to truncate this directory to 1,000 files.ï¼Œæ•´ä¸ªé¡µé¢éƒ½æ˜¯ä¹±ä¸ƒå…«ç³Ÿçš„åšæ–‡åç§°ï¼‰ã€‚å¯ä»¥è®¾æˆ blog/title ä¹‹ç±»çš„ï¼Œæ€»ä¹‹ä¸è¦å…¨æ”¾æ ¹ç›®å½•ã€‚\nå¯ä»¥åœ¨ highlight.tab_replace è®¾ç½®å°†ç¼©è¿›æ›¿æ¢ä¸ºä»€ä¹ˆï¼Œé»˜è®¤æ˜¯é•¿åº¦ä¸ºå…«ç©ºæ ¼çš„åˆ¶è¡¨ç¬¦ã€‚ä¾‹å¦‚ï¼š\nhighlight: enable: true line_number: true auto_detect: false tab_replace: ' '  ä¸»é¢˜ç›®å½•ä¸‹çš„ _config.yml ä¸»é¢˜ç›®å½•ä¸‹çš„ _config.yml æŒ‡ \\themes\\ä¸»é¢˜å\\_config.ymlã€‚\nè¿™é‡Œä»¥ NexT ä¸»é¢˜ï¼ˆæœ¬æ–‡åŸºäº NexT 6.6ï¼Œå…¶å®ƒç‰ˆæœ¬å¯èƒ½æœ‰äº›åŒºåˆ«ï¼‰ä¸ºä¾‹ï¼Œè¿™ä¸ªä¸»é¢˜çš„ _config.yml éå¸¸å®Œå¤‡ï¼Œä¿®æ”¹é…ç½®åŸºæœ¬ä¸Šåªéœ€åˆ é™¤/æ·»åŠ æ³¨é‡Šç¬¦å· # ä»¥åŠæ”¹å˜ true/false å³å¯ã€‚\né€‰æ‹© NexT ä¸»é¢˜çš„å››ç§ä¹‹ä¸€ # Schemes scheme: Muse #scheme: Mist #scheme: Pisces #scheme: Gemini  å°†æƒ³ç”¨çš„ä¸»é¢˜å‰çš„ # åˆ æ‰ï¼Œåœ¨ scheme: Muse å‰åŠ ä¸Š # å³å¯ã€‚\nä¾‹å¦‚ï¼š\n# Schemes #scheme: Muse #scheme: Mist #scheme: Pisces scheme: Gemini  å››ç§ä¸»é¢˜çš„é¢„è§ˆåœ¨ NexT ä¸»é¢˜çš„å®˜ç½‘æœ‰ã€‚\næ”¹å˜ç½‘ç«™å›¾æ ‡ favicon: small: /images/favicon-16x16-next.png medium: /images/favicon-32x32-next.png apple_touch_icon: /images/apple-touch-icon-next.png safari_pinned_tab: /images/logo.svg  å°†ä½ æƒ³ç”¨çš„å›¾æ ‡æ”¾åœ¨ \\themes\\next\\source\\images é‡Œï¼Œç„¶åä¿®æ”¹ä¸Šé¢çš„æ–‡ä»¶åå³å¯ã€‚\nä¾‹å¦‚ï¼š\nfavicon: small: /images/favicon16.png medium: /images/favicon32.png  é¡µè„šè®¾ç½® footer: # Specify the date when the site was setup. # If not defined, current year will be used. #since: 2015 # Icon between year and copyright info. icon: # Icon name in fontawesome, see: https://fontawesome.com/v4.7.0/icons # `heart` is recommended with animation in red (#ff0000). name: battery-full # If you want to animate the icon, set it to true. animated: false # Change the color of icon, using Hex Code. color: \u0026quot;#808080\u0026quot; # If not defined, will be used `author` from Hexo main config. copyright: # ------------------------------------------------------------- powered: # Hexo link (Powered by Hexo). enable: false # Version info of Hexo after Hexo link (vX.X.X). version: true theme: # Theme \u0026amp; scheme info link (Theme - NexT.scheme). enable: true # Version info of NexT after scheme info (vX.X.X). version: true # ------------------------------------------------------------- # Beian icp information for Chinese users. In China, every legal website should have a beian icp in website footer. # http://www.miitbeian.gov.cn beian: enable: false icp:  iconï¼š Â© 2019 ä¸ç”¨æˆ·åä¹‹é—´çš„å›¾æ ‡ã€‚ï¼ˆå›¾ä¸­ $1$ï¼‰\nå›¾æ ‡åç§°ä¸º Font Awesome ä¸Šçš„å›¾æ ‡åç§°ã€‚\npowered.enableï¼šä¸º true åˆ™ä¼šæ˜¾ç¤ºâ€œç”± Hexo å¼ºåŠ›é©±åŠ¨â€ã€‚ï¼ˆå›¾ä¸­ $2$ï¼‰\npowered.versionï¼šä¸º true åˆ™ä¼šæ˜¾ç¤º Hexo çš„ç‰ˆæœ¬ã€‚ï¼ˆå›¾ä¸­ $3$ï¼‰\ntheme.enableï¼šä¸º true åˆ™ä¼šæ˜¾ç¤ºâ€œä¸»é¢˜ â€“ NexT.XXâ€ã€‚ï¼ˆå›¾ä¸­ $4$ï¼‰\ntheme.versionï¼šä¸º true åˆ™ä¼šæ˜¾ç¤ºä¸»é¢˜çš„ç‰ˆæœ¬ã€‚ï¼ˆå›¾ä¸­ $5$ï¼‰\næ³¨ï¼šæ ¹æ® NexT ä¸»é¢˜çš„ LICENSEï¼Œfooter ä¸­å¿…é¡»å¼€å¯ theme.enable é€‰é¡¹ã€‚\nâ€œå…³äºâ€\u0026amp;\u0026ldquo;æ ‡ç­¾\u0026rdquo; menu: home: / || home about: /about/ || user tags: /tags/ || tags #categories: /categories/ || th archives: /archives/ || archive #schedule: /schedule/ || calendar #sitemap: /sitemap.xml || sitemap #commonweal: /404/ || heartbeat  å°†éœ€è¦çš„é¡¹ç›®å–æ¶ˆæ³¨é‡Šå³å¯åœ¨ä¾§è¾¹æ æ˜¾ç¤ºã€‚\nå¦‚æœéœ€è¦ä½¿ç”¨â€œå…³äºâ€é¡µé¢ï¼Œè¾“å…¥å‘½ä»¤ hexo new page \u0026quot;about\u0026quot;ã€‚\nç„¶ååœ¨ \\source\\about\\index.md ä¸­å°±å¯ä»¥ç¼–è¾‘â€œå…³äºâ€é¡µé¢äº†ã€‚\nå¯ä»¥ä¿®æ”¹ \\source\\about\\index.md ä¸­çš„ title é¡¹æ¥æ˜¾ç¤ºâ€œå…³äºâ€è€Œéâ€œaboutâ€ã€‚\nå¦‚æœéœ€è¦ä½¿ç”¨â€œæ ‡ç­¾â€åŠŸèƒ½ï¼Œéœ€è¦åœ¨åšæ–‡ä¸­æ·»åŠ é€‰é¡¹ tags ï¼š\nå¦‚æœæœ‰å¤šä¸ªæ ‡ç­¾ï¼Œæ¯è¡Œä¸€ä¸ªï¼Œä»¥ -  å¼€å¤´ï¼š\ntags: - æ ‡ç­¾1 - æ ‡ç­¾2 - æ ‡ç­¾3  å¦‚æœéœ€è¦ä½¿ç”¨â€œæ ‡ç­¾â€é¡µé¢ï¼Œè¾“å…¥å‘½ä»¤ hexo new page \u0026quot;tags\u0026quot;ã€‚\nç„¶åå‘ source\\tags\\index.md ä¸­æ·»åŠ ä¸€è¡Œï¼š\ntype: \u0026quot;tags\u0026quot;  â€œåˆ†ç±»â€ä¸â€œæ ‡ç­¾â€ç±»ä¼¼ã€‚\nç«™å†…æœç´¢ è¾“å…¥å‘½ä»¤ npm install hexo-generator-searchdb --save å®‰è£…æ‰€éœ€çš„åº“ã€‚\nåœ¨æ ¹ç›®å½•ä¸‹çš„ _config.yml çš„ç»“å°¾åŠ å…¥ï¼š\nsearch: path: search.xml field: post format: html limit: 10000  ç„¶ååœ¨ \\themes\\next\\_config.yml ä¸­ï¼Œæ‰“å¼€ local_searchï¼š\nlocal_search: enable: true  ç¤¾äº¤ç½‘ç«™ # Social Links. # Usage: `Key: permalink || icon` # Key is the link label showing to end users. # Value before `||` delimeter is the target permalink. # Value after `||` delimeter is the name of FontAwesome icon. If icon (with or without delimeter) is not specified, globe icon will be loaded. social: GitHub: https://github.com/ouuan || github æ´›è°·: https://www.luogu.org/space/show?uid=49742 || code Codeforces: https://www.codeforces.com/profile/ouuan || code bç«™: https://space.bilibili.com/11067182 || tv social_icons: enable: true icons_only: false transition: false  åœ¨ social ä¸‹æ¯è¡Œä¸€ä¸ªï¼Œæ ¼å¼ä¸ºï¼šåç§°: åœ°å€ || å›¾æ ‡ã€‚\nå…¶ä¸­ï¼Œâ€œå›¾æ ‡â€ä¸º Font Awesome å›¾æ ‡åç§°ï¼Œä½†æœ‰äº›å›¾æ ‡æ˜¯ä¸å¯ç”¨çš„ï¼Œè€Œä¸”å›¾æ ‡ä¹Ÿä¸å…¨ï¼Œä½¿ç”¨çš„æ—¶å€™è¦å°è¯•ä¸€ä¸‹å›¾æ ‡æ˜¯å¦å¯ç”¨ã€‚\nsocial_icons: enable: false  è¿™æ ·è®¾ç½®å¯ä»¥åªæ˜¾ç¤ºåç§°ä¸æ˜¾ç¤ºå›¾æ ‡ã€‚\nå‹æƒ…é“¾æ¥ï¼ˆæˆ–å…¶å®ƒé“¾æ¥ï¼‰ # Blog rolls links_icon: globe links_title: å‹æƒ…é“¾æ¥ # links_layout: block links_layout: inline links: Dew: https://www.cnblogs.com/ppprseter/ wjyyy: https://www.wjyyy.top/ Sooke: https://www.luogu.org/blog/Sooke/ huyufeifei: https://www.cnblogs.com/huyufeifei/ Rye_Catcher: https://rye-catcher.github.io/ é¢å†»è±†è…: http://www.mayflyyh.com/  links_iconï¼šæ˜¾ç¤ºåœ¨æ ‡é¢˜å‰çš„å›¾æ ‡ã€‚\nlinks_titleï¼šæ ‡é¢˜ã€‚\nlinks_layoutï¼šblock ä¸€è¡Œä¸€ä¸ªï¼Œinline ä¸€è¡Œå¤šä¸ªã€‚\nlinksï¼šè¦æ˜¾ç¤ºçš„é“¾æ¥ä»¥åŠåç§°ã€‚\nå¤´åƒ # Sidebar Avatar avatar: # in theme directory(source/images): /images/avatar.gif # in site directory(source/uploads): /uploads/avatar.gif # You can also use other linking images. url: /images/avatar.jpg # If true, the avatar would be dispalyed in circle. rounded: true # The value of opacity should be choose from 0 to 1 to set the opacity of the avatar. opacity: 1 # If true, the avatar would be rotated with the cursor. rotated: false  urlï¼šå¤´åƒåœ°å€ï¼Œç•™ç©ºåˆ™ä¸æ˜¾ç¤ºå¤´åƒã€‚\nroundedï¼šåœ†/æ–¹å¤´åƒã€‚\nopacityï¼šä¸é€æ˜åº¦ã€‚\nrotatedï¼šéšå…‰æ ‡æ—‹è½¬ã€‚\nå›åˆ°é¡¶éƒ¨æŒ‰é’®/é˜…è¯»ç™¾åˆ†æ¯”  # Back to top in sidebar (only for Pisces | Gemini). b2t: true # Scroll percent label in b2t button. scrollpercent: true  åšå®¢é¦–é¡µä¸æ˜¾ç¤ºå…¨æ–‡ åœ¨åšæ–‡é‡Œå¯ä»¥ç”¨ \u0026lt;!-- more --\u0026gt; æ¥æ ‡è¯†åœ¨é¦–é¡µæ˜¾ç¤ºåˆ°å“ªä¸ºæ­¢ã€‚\nå¯ä»¥åœ¨ \\themes\\next\\_config.yml é‡Œè®¾ç½®åˆ°ä¸€å®šå­—æ•°è‡ªåŠ¨ä¸æ˜¾ç¤ºå…¨æ–‡ï¼š\n# Automatically Excerpt. Not recommend. # Please use \u0026lt;!-- more --\u0026gt; in the post to control excerpt accurately. auto_excerpt: enable: true length: 150 # Read more button # If true, the read more button would be displayed in excerpt section read_more_btn: true  lengthï¼šä¸æ˜¾ç¤ºå…¨æ–‡çš„å­—æ•°ä¸Šé™ã€‚\nread_more_btnï¼šä»£ç å—å¤åˆ¶æŒ‰é’® codeblock: # Manual define the border radius in codeblock # Leave it empty for the default 1 border_radius: # Add copy button on codeblock copy_button: enable: true # Show text copy result show_result: true  enableï¼šå¯ç”¨å¤åˆ¶æŒ‰é’®ã€‚\nshow_resultï¼š$\\LaTeX$ # Math Equations Render Support math: enable: true # Default(true) will load mathjax/katex script on demand # That is it only render those page who has 'mathjax: true' in Front Matter. # If you set it to false, it will load mathjax/katex srcipt EVERY PAGE. per_page: false engine: mathjax #engine: katex  enableï¼šå¯ç”¨ $\\LaTeX$ ã€‚\nper_pageï¼šä¸º true åˆ™åªæœ‰åšæ–‡ä¸­æœ‰ mathjax: true æ‰ä¼šå¯ç”¨ $\\LaTeX$ï¼Œå¦åˆ™æ¯ç¯‡åšå®¢éƒ½ä¼šå¯ç”¨ $\\LaTeX$ ã€‚\nengineï¼šæ¨èä½¿ç”¨ mathjax ã€‚\nhexo åšå®¢çš„ mathjax å’Œ Markdown æœ‰ä¸€äº›å†²çªï¼Œå°†åœ¨åæ–‡ä¸“é—¨è®²è§£å¦‚ä½•è§£å†³å†²çªã€‚\nè®¿å®¢ç»Ÿè®¡ busuanzi_count: enable: true  ä¹¦ç­¾ ä¹¦ç­¾çš„åŠŸèƒ½æ˜¯å…³é—­é¡µé¢/æ‰‹åŠ¨ç‚¹å‡»ä¹¦ç­¾æŒ‰é’®æ—¶ï¼Œä¿å­˜è¿™ç¯‡åšå®¢çœ‹åˆ°çš„ä½ç½®ï¼Œä¸‹æ¬¡ç‚¹è¿›è¿™ç¯‡åšå®¢æ—¶ç»§ç»­ä»è¿™ä¸ªä½ç½®å¼€å§‹ã€‚\nå®‰è£…æ’ä»¶ï¼šgit clone https://github.com/theme-next/theme-next-bookmark.git source/lib/bookmark\næ›´æ”¹ \\themes\\next\\_config.ymlï¼š\n# Bookmark Support # Dependencies: https://github.com/theme-next/theme-next-bookmark bookmark: enable: true # if auto # - save the reading position when closing the page # - or clicking the bookmark-icon # if manual, only save it by clicking the bookmark-icon save: manual  å…¶å®ƒé…ç½® åšå®¢èƒŒæ™¯ æ‰“å¼€ \\themes\\next\\source\\css\\_custom\\custom.stylï¼Œè¾“å…¥ï¼š\nbody { background-image:url(/images/background.jpg); background-size: cover; }  æŠŠèƒŒæ™¯å›¾ç‰‡é‡å‘½åä¸º background.jpgï¼Œæ”¾å…¥ \\themes\\source\\imagesï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥æ›´æ”¹background-image:url()ï¼‰ã€‚\nbackground-size: cover; è¡¨ç¤ºå®½åº¦ç¼©æ”¾è‡³é¡µé¢å¤§å°ã€‚\nbody { background-image:url(/images/background.jpg); background-repeat: no-repeat; background-attachment:fixed; background-size: cover; }  å¦‚æœä¿®æ”¹æˆè¿™æ ·çš„è¯èƒŒæ™¯å›¾ç‰‡å°±ä¸ä¼šæ»šåŠ¨ã€‚\nå¦‚æœä¸æƒ³è®©åšå®¢å†…å®¹æŒ¡ä½èƒŒæ™¯ï¼Œå¯ä»¥è®¾ç½®åšå®¢å†…å®¹çš„é€æ˜åº¦ï¼Œåœ¨ \\themes\\next\\source\\css\\_custom\\custom.styl ä¸­åŠ å…¥ä¸‹é¢çš„ä»£ç å³å¯ï¼š\n.main-inner { opacity: 0.9; }  è¯„è®ºåŠŸèƒ½ ç”±äº Gitalk å­˜åœ¨ä¸€äº›å®‰å…¨æ€§çš„é—®é¢˜ï¼ˆOAuth App çš„ client_id å’Œ client_secret æ˜¯å¯è§çš„ã€è®¿å®¢éœ€è¦æˆäºˆè¯»å†™è‡ªå·±çš„ repo çš„æƒé™ï¼‰ï¼Œå¹¶ä¸”ç¨³å®šæ€§è¾ƒå·®ï¼Œæ¨èä½¿ç”¨ utterancesã€‚\nåœ¨ https://utteranc.es/ ä¸­è¿›è¡Œè®¾ç½®ï¼Œå°†é…ç½®ä»£ç æ”¾åˆ° \\themes\\next\\layout\\_partials\\comments.swig ä¸­å³å¯ï¼Œå¦‚ï¼š\n{% if page.comments %} \u0026lt;div class=\u0026quot;comments\u0026quot;\u0026gt; \u0026lt;script src=\u0026quot;https://utteranc.es/client.js\u0026quot; repo=\u0026quot;ouuan/blog-comments\u0026quot; issue-term=\u0026quot;title\u0026quot; label=\u0026quot;utterances\u0026quot; theme=\u0026quot;github-light\u0026quot; crossorigin=\u0026quot;anonymous\u0026quot; async\u0026gt; \u0026lt;/script\u0026gt; \u0026lt;/div\u0026gt; {% if theme.facebook_sdk.enable and theme.facebook_comments_plugin.enable %} ...  å…¶å®ä¹Ÿå¯ä»¥å®‰è£… hexo-next-utteranc æ’ä»¶ï¼Œä½†æ²¡å¿…è¦ã€‚\nå¦å¤–ï¼Œç”¨äºå­˜æ”¾ issue çš„ repo éœ€è¦å®‰è£… utterances appã€‚\nåšæ–‡è‡ªå®šä¹‰æ’åº æ‰“å¼€ \\node_modules\\hexo-generator-index\\lib\\generator.js ã€‚\nåœ¨æœ«å°¾æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š\n posts.data = posts.data.sort(function(a, b) { if(a.top \u0026amp;\u0026amp; b.top) { if(a.top == b.top) return b.date - a.date; else return b.top - a.top; } else if(a.top \u0026amp;\u0026amp; !b.top) { return -1; } else if(!a.top \u0026amp;\u0026amp; b.top) { return 1; } else return b.date - a.date; });  åœ¨åšæ–‡è®¾ç½®ä¸­åŠ å…¥ top: x å³å¯ï¼Œä¼šä»¥ top ä¸ºç¬¬ä¸€å…³é”®å­—ï¼Œæ—¶é—´ä¸ºç¬¬äºŒå…³é”®å­—æ’åºã€‚è‹¥ top ä¸ºç©ºåˆ™è§†ä½œ -INF ã€‚\næŠ˜å å— æ€ä¹ˆæï¼Ÿ æ ‡é¢˜é“¾æ¥çš„è¿™ç¯‡åšæ–‡å†™çš„å¤Ÿæ¸…æ¥šäº†..\néœ€è¦æ³¨æ„çš„æ˜¯è¿™ä¸ªæŠ˜å å—æ ‡é¢˜çš„å­—ä½“è¢«è®¾ç½®äº†..å¦‚æœæƒ³å’Œåšæ–‡ç”¨åŒæ ·çš„å­—ä½“ï¼Œéœ€è¦åˆ å» font-family: \u0026quot;Microsoft Yahei\u0026quot;;ã€‚\n README.md å¦‚æœæƒ³åœ¨ https://github.com/yourname/yourname.github.io è®©åˆ«äººçœ‹åˆ°ä½ çš„åšå®¢çš„ç®€ä»‹ï¼Œå°±éœ€è¦å†™ä¸€ä¸ª README.md æ”¾åœ¨æ ¹ç›®å½•ä¸‹çš„ source æ–‡ä»¶å¤¹å†…ã€‚\nç„¶è€Œï¼Œåªæ˜¯è¿™æ ·çš„è¯ï¼Œ README.md ä¼šè¢«æ¸²æŸ“æˆ htmlï¼Œæ‰€ä»¥éœ€è¦æ›´æ”¹æ ¹ç›®å½•ä¸‹ _config.yml çš„è®¾ç½®ï¼š\nskip_render: README.md  è‡ªå®šä¹‰404é¡µé¢ é¦–å…ˆå†™ä¸€ä¸ª \\source\\404.html ã€‚\nè‡³äºæ€ä¹ˆå†™html..è¿™é‡Œåœ°æ–¹å¤ªå°å†™ä¸ä¸‹ã€‚\n**éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ªçœŸæ­£çš„ 404 é¡µé¢åº”å½“åœ¨è®¿é—®æ—¶è¿”å› 404 ä»£ç ã€‚**åœ¨ HTML ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ \u0026lt;meta http-equiv=\u0026quot;Content-Security-Policy\u0026quot; content=\u0026quot;connect-src 'self'\u0026quot;\u0026gt; å®ç°ã€‚ï¼ˆä¼¼ä¹ä¸åŠ è¿™ä¸ªä¹Ÿä¼šè¿”å› 404ï¼Ÿä¸æ˜¯ç‰¹åˆ«æ¸…æ¥šã€‚ï¼‰\nå¯ä»¥å‚è€ƒä¸€ä¸‹æˆ‘çš„ï¼š\n\u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta http-equiv=\u0026quot;Content-type\u0026quot; content=\u0026quot;text/html; charset=utf-8\u0026quot;\u0026gt; \u0026lt;meta http-equiv=\u0026quot;Content-Security-Policy\u0026quot; content=\u0026quot;connect-src 'self'\u0026quot;\u0026gt; \u0026lt;title\u0026gt;404 Error | ouuançš„åšå®¢\u0026lt;/title\u0026gt; \u0026lt;link rel=\u0026quot;icon\u0026quot; type=\u0026quot;image/png\u0026quot; sizes=\u0026quot;32x32\u0026quot; href=\u0026quot;/images/favicon32.ico\u0026quot;\u0026gt; \u0026lt;link rel=\u0026quot;icon\u0026quot; type=\u0026quot;image/png\u0026quot; sizes=\u0026quot;16x16\u0026quot; href=\u0026quot;/images/favicon16.ico\u0026quot;\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div\u0026gt; \u0026lt;p style=\u0026quot;text-align: center;\u0026quot;\u0026gt;\u0026lt;strong\u0026gt;æ‚¨å¯èƒ½è®¿é—®äº†é”™è¯¯çš„ç½‘å€\u0026lt;/strong\u0026gt;\u0026lt;img src=\u0026quot;/images/5bd4705dd844f.jpg\u0026quot;\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;br\u0026gt;\u0026lt;br\u0026gt; \u0026lt;p style=\u0026quot;text-align: center;\u0026quot;\u0026gt;\u0026lt;strong\u0026gt;æ‚¨ç°åœ¨å¯ä»¥ï¼š\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;p style=\u0026quot;text-align: center;\u0026quot;\u0026gt;\u0026lt;a href=\u0026quot;/\u0026quot;\u0026gt;\u0026lt;strong\u0026gt;å›åˆ°åšå®¢ä¸»é¡µ\u0026lt;/strong\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;p style=\u0026quot;text-align: center;\u0026quot;\u0026gt;\u0026lt;a href=\u0026quot;javascript:history.go(-1);\u0026quot;\u0026gt;\u0026lt;strong\u0026gt;è¿”å›ä¸Šä¸€é¡µ\u0026lt;/strong\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;br\u0026gt;\u0026lt;br\u0026gt; \u0026lt;p style=\u0026quot;text-align: center;\u0026quot;\u0026gt;\u0026lt;strong\u0026gt;å¦‚æœæ‚¨åœ¨ç™»å½• Gitalk æ—¶é‡åˆ°æ­¤é—®é¢˜ï¼Œè¯·å°è¯•\u0026lt;a href=\u0026quot;/%E5%A5%BD%E7%94%A8%E7%9A%84%E7%BD%91%E7%AB%99/\u0026quot;\u0026gt;æ¢ä¸€ç¯‡åšå®¢\u0026lt;/a\u0026gt;ç™»å½•\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;  ç„¶åï¼Œå¦‚æœç›´æ¥è¿™æ ·å‘å¸ƒï¼Œhtml ä¼šè¢«æ¸²æŸ“ï¼Œå°±è·Ÿä¸€ä¸ªè‡ªå®šä¹‰é¡µé¢ï¼ˆhexo new pageï¼‰ä¸€æ ·äº†ã€‚\næ‰€ä»¥è¦ä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„ _config.ymlï¼Œåœ¨ skip_render: åæ·»åŠ  404.htmlï¼Œå¦‚æœæœ‰å¤šé¡¹ç”¨ -  éš”å¼€ï¼š\nskip_render: - README.md - 404.html  å‘å¸ƒå®Œæˆåï¼Œè®¿é—®ä¸€ä¸ªé”™è¯¯çš„ç½‘å€ï¼Œæ¯”å¦‚ ä½ çš„åŸŸå/qaq å°±å¯ä»¥æŸ¥çœ‹æ•ˆæœäº†ã€‚\nä¸€è¨€ï¼ˆãƒ’ãƒˆã‚³ãƒˆï¼‰ å¤§çº¦æ˜¯è¿™ä¸ªã€‚\nç½‘ä¸Šæ²¡æ‰¾åˆ°æ•™ç¨‹ï¼Œè‡ªå·±éšä¾¿çç ”ç©¶äº†ä¸€æ³¢ï¼Œæ‰€ä»¥æ–¹æ³•æ¯”è¾ƒä¸‘é™‹ï¼Œä»…ä¾›å‚è€ƒ..\næœ¬æ¥æƒ³ç¨å¾®å†™ä¸€ä¸‹è‡ªå·±ç ”ç©¶çš„ç»è¿‡ï¼Œæƒ³äº†æƒ³è‡ªå·±ä¹Ÿæ²¡å®Œå…¨ææ¸…æ¥šï¼Œå°±æ¥ä¸€æ³¢æˆäººä»¥é±¼å§\u0026hellip;\n\\themes\\next\\layout\\_macro\\sidebar.swig:\nâ€¦â€¦ \u0026lt;aside id=\u0026quot;sidebar\u0026quot; class=\u0026quot;sidebar\u0026quot;\u0026gt; \u0026lt;div class=\u0026quot;sidebar-inner\u0026quot;\u0026gt; \u0026lt;div class=\u0026quot;hitokoto-block\u0026quot;\u0026gt; \u0026lt;div class=\u0026quot;hitokoto-inner hitokoto-comma hitokoto-left-comma\u0026quot;\u0026gt;â€œ\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026quot;hitokoto-inner hitokoto-content\u0026quot;\u0026gt;\u0026lt;b\u0026gt;\u0026lt;span\u0026gt;\u0026lt;span id=\u0026quot;hitokoto-content\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;/b\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026quot;hitokoto-inner hitokoto-comma hitokoto-right-comma\u0026quot;\u0026gt;â€\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div id=\u0026quot;hitokoto-from\u0026quot;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026quot;hitokoto-bottom\u0026quot;\u0026gt; \u0026lt;a id=\u0026quot;hitokoto-link\u0026quot; href=\u0026quot;https://hitokoto.cn/\u0026quot;\u0026gt;Hitokoto\u0026lt;/a\u0026gt;\u0026amp;nbsp;\u0026amp;nbsp;\u0026amp;nbsp; \u0026lt;button id=\u0026quot;hitokoto-like\u0026quot; title=\u0026quot;é€šè¿‡ç»™å¥å­ç‚¹èµå¯ä»¥å¢åŠ å…¶å‡ºç°æ¦‚ç‡ï¼Œç”±äºæŠ€æœ¯åŸå› å¹¶ä¸èƒ½åœ¨åšå®¢ä¸­æ˜¾ç¤ºèµæ•°ä¸ç‚¹èµæ˜¯å¦æˆåŠŸçš„ä¿¡æ¯ï¼ˆçº¢å¿ƒè¡¨ç¤ºæˆåŠŸå‘é€ç‚¹èµè¯·æ±‚ï¼Œä½†å¦‚æœåŒ IP é‡å¤ç‚¹èµå°±ä¼šå¤±è´¥ï¼‰ï¼Œå¦‚éœ€æŸ¥çœ‹å¯ä»¥ç‚¹å‡»å·¦è¾¹çš„â€œHitokotoâ€é“¾æ¥ã€‚\u0026quot;\u0026gt;\u0026lt;i class=\u0026quot;menu-item-icon fa fa-fw fa-heart\u0026quot;\u0026gt;\u0026lt;/i\u0026gt;\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div style=\u0026quot;height: 15px\u0026quot;\u0026gt;\u0026lt;/div\u0026gt; {% if theme.sidebar.onmobile %} â€¦â€¦  \\themes\\next\\layout\\_scripts\\commons.swig:\nâ€¦â€¦ \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; function hitokotoLike(x, y) { $.ajax({ url: \u0026quot;https://hitokoto.cn/Like\u0026quot;, type: \u0026quot;GET\u0026quot;, data: \u0026quot;ID=\u0026quot; + x, dataType: \u0026quot;jsonp\u0026quot;, success: function(data) { alert(data.message); $(y).css('color', 'red'); }, error: function() { console.log('Hitokoto Like Request Error.'); $(y).css('color', 'red'); } }); } $.get('https://v1.hitokoto.cn/?c=a', function(data) { $('#hitokoto-content').css('display', '').text(data.hitokoto); $('#hitokoto-from').css('display', '').text('â€”â€”' + data.from); $('#hitokoto-from').attr('title', 'ä¸Šä¼ è€…: ' + data.creator); $('#hitokoto-link').attr('href', 'https://hitokoto.cn/?id=' + data.id); document.getElementById('hitokoto-like').onclick = function() { hitokotoLike(data.id, '#hitokoto-like'); } }); \u0026lt;/script\u0026gt;  \\themes\\next\\source\\css\\_custom\\custom.styl:\nâ€¦â€¦ .sidebar { background: rgba(0, 0, 0, 0); } .hitokoto-block { width: 200px; display: table; padding: 0 10px; } .hitokoto-inner { text-align: left; display: table-cell; } .hitokoto-comma { color: #B2B7F2; font-size: 24px; font-weight: bold; font-family: 'Times New Roman', serif; } .hitokoto-left-comma { vertical-align: top; } .hitokoto-right-comma { vertical-align: bottom; } .hitokoto-content { width: 176px; color: burlywood; text-indent: 2em; vertical-align: middle; padding: 0.8em 0.2em 1em 0.2em; } #hitokoto-from { text-align: right; font-size: 0.8em; color: black; } .hitokoto-bottom { margin-top: 15px; font-size: 0.8em; color: black; }  å¤§çº¦å°±è¿™æ ·ï¼Œçœç•¥å·è¡¨ç¤ºæ–‡ä»¶ä¸­æœ¬æ¥å°±æœ‰çš„å…¶å®ƒéƒ¨åˆ†ã€‚ä¸ä¿è¯åœ¨å…¶ä»–äººç”µè„‘ä¸Šå¯ä»¥ç”¨ã€‚å¤§è‡´æ€è·¯å°±æ˜¯æä¸ªç©º div æŒ‡å®šä¸€ä¸ª idï¼Œç”¨ js å¾€é‡Œé¢å¡ä¸œè¥¿ã€‚æ‰€ä»¥å³ä½¿æˆ‘è¿™ä¸ªâ€œé±¼â€ä¸èƒ½ç›´æ¥ç”¨å¤§çº¦ä¹Ÿæ˜¯å¯ä»¥ç¨å¾®ç ”ç©¶ç ”ç©¶æ¥ç”¨çš„ã€‚\nåšæ–‡å¤åˆ¶æé†’ åœ¨ \\themes\\next\\layout\\_scripts\\commons.swig ä¸­åŠ å…¥ï¼š\n\u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; $('.post-body').bind('copy', function() { alert('æœ¬åšå®¢å†…å®¹æ¬¢è¿åˆ†äº«ï¼ˆå°†æœ¬åšå®¢çš„åŸæ–‡åœ°å€åˆ†äº«åˆ°å…¶å®ƒç½‘ç«™ï¼‰ï¼Œå…è®¸éƒ¨åˆ†æ‘˜å½•å¹¶åœ¨é†’ç›®ä½ç½®é™„ä¸ŠåŸæ–‡é“¾æ¥ï¼Œæœªç»è®¸å¯ç¦æ­¢ä»»ä½•å½¢å¼çš„å…¨æ–‡è½¬è½½ã€‚'); }); \u0026lt;/script\u0026gt;  æ›´æ”¹ CSS å¤§æ¦‚æŒ‰ç…§ è°¢ç›Šè¾‰åšå®¢ é­”æ”¹äº†ä¸€ä¸‹ã€‚\nCSS Filesã€‚\nEmoji è¯¦è§ crimx/hexo-filter-github-emojis ğŸ¤” ã€‚\nå®‰è£…çš„æ—¶å€™é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œå…·ä½“æ¥è¯´æ‰§è¡Œ npm install hexo-filter-github-emojis --save ä¸ä¼šå®‰è£… peer dependenciesï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£…ï¼ˆä»è­¦å‘Šä¿¡æ¯å°±å¯ä»¥çœ‹å‡ºéœ€è¦å®‰è£…å“ªäº›ï¼‰ã€‚è€Œåœ¨å®‰è£… canvas æ—¶å‡ºç°é”™è¯¯ï¼Œæ›´æ–° node-pre-gyp åå¾—åˆ°äº†è§£å†³ã€‚\nå¤§çº¦æ˜¯ä¸ºäº†ä¿è¯ç”¨æˆ·èƒ½å¤Ÿçœ‹åˆ°ï¼Œå¾ˆå¤šæ˜¾ç¤º emoji çš„åº“ï¼ˆå¦‚ emojioneï¼‰éƒ½æ˜¯ä½¿ç”¨ cdn åŠ è½½å›¾ç‰‡ï¼Œç„¶è€Œæˆ‘è¿˜æ˜¯è§‰å¾— Win 10 æœ¬èº«çš„ emoji æ ·å¼æ¯”è¾ƒå¥½çœ‹ï¼ŒLinux çš„ä¹Ÿä¸é”™ï¼Œæ‰€ä»¥åˆç¨å¾®é­”æ”¹äº†ä¸€ä¸‹ï¼Œæ”¹æˆäº†æ˜¾ç¤º Unicode å­—ç¬¦è€Œéå›¾ç‰‡ã€‚å…·ä½“æ¥è¯´ï¼Œå°† \\node_modules\\hexo-filter-github-emojis\\index.js ä¸­çš„ renderEmoji å‡½æ•°ä¸­çš„å…¨éƒ¨å†…å®¹æ›¿æ¢æˆäº† return emojis[name].codepoints ? emojis[name].codepoints.map(c =\u0026gt; `\u0026amp;#x${c};`).join('') : ' '; ã€‚\nåšå®¢çš„å†™ä½œ Markdown çš„ä½¿ç”¨ ç½‘ä¸Šæœ‰å¾ˆå¤š Markdown çš„å­¦ä¹ èµ„æºï¼Œæˆ‘è‡ªå·±æ˜¯åœ¨æ´›è°·å‰ªè´´æ¿å­¦ä¼šçš„ã€‚\næˆ‘ä»¥å‰ä¸€èˆ¬éƒ½ç”¨æ´›è°·å‰ªè´´æ¿ç¼–è¾‘ Markdownï¼Œä½† hexo åšå®¢éœ€è¦åœ¨æœ¬åœ°ç¼–è¾‘ .md æ–‡ä»¶ï¼Œè¿™æ—¶æ™®é€šçš„æ–‡æœ¬ç¼–è¾‘å™¨å°±ä¸å¤ªæ–¹ä¾¿äº†ã€‚æˆ‘æ¨è Typora è¿™æ¬¾è½¯ä»¶ï¼Œè¿˜æ˜¯æŒºæ–¹ä¾¿çš„ã€‚\næ’°å†™åšå®¢å‰çš„å‡†å¤‡ æ‰“å¼€æ ¹ç›®å½•ä¸‹çš„ _config.yml ï¼Œå°† post_asset_folder è®¾ä¸º trueã€‚\nè¿™æ ·å°±å¯ä»¥æŠŠå›¾ç‰‡æ”¾åˆ°åšå®¢é‡Œè€Œä¸ç”¨å…¶å®ƒå›¾åºŠäº†ã€‚\nç„¶åæŠŠ \\source\\_posts\\hello-world.md åˆ é™¤ã€‚\nåšæ–‡çš„æ’°å†™ æ–°å»ºä¸€ç¯‡åšå®¢ï¼šhexo new \u0026quot;åšæ–‡æ ‡é¢˜\u0026quot;ã€‚\nç„¶åç­‰å‡ ç§’é’Ÿï¼Œåœ¨ \\source\\_posts æ–‡ä»¶å¤¹ä¸‹ï¼Œå°±ä¼šç”Ÿæˆ åšå®¢å è¿™ä¸ªæ–‡ä»¶å¤¹ï¼ˆå¦‚æœä½ æŠŠ post_asset_folder è®¾ä¸º true äº†ï¼‰ä»¥åŠ åšå®¢å.mdã€‚\næ’°å†™åšå®¢å°±æ˜¯ç¼–è¾‘ åšå®¢å.mdã€‚\nè¿™ä¸ªæ–‡ä»¶çš„å¼€å¤´æ˜¯åšå®¢çš„ä¸€äº›è®¾ç½®ï¼Œå¯ä»¥åœ¨ \\scaffolds\\posts.md ä¸­ä¿®æ”¹é»˜è®¤è®¾ç½®ï¼Œæˆ‘çš„é»˜è®¤è®¾ç½®æ˜¯ï¼š\n--- title: {{ title }} date: {{ date }} tags: top: ---  ç„¶åå°±å¯ä»¥å†™ Markdown æ ¼å¼çš„æ–‡ç« äº†ã€‚ï¼ˆtop æ˜¯è‡ªå®šä¹‰æ–‡ç« æ’åºï¼Œä¸Šæ–‡ä¸­ä»‹ç»è¿‡ï¼‰\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æ´›è°·ä»£ç å—å¯ä»¥ä¸åŠ \u0026quot;cpp\u0026rdquo;ï¼Œä½†åœ¨ hexo ä¸Šï¼Œä¸€å®šè¦åŠ ä¸Š\u0026quot;cpp\u0026rdquo;ï¼š\n#include \u0026lt;iostream\u0026gt; int main() { cout\u0026lt;\u0026lt;\u0026quot;hello world!\u0026quot; }  #include \u0026lt;iostream\u0026gt; int main() { cout\u0026lt;\u0026lt;\u0026quot;hello world!\u0026quot; }  æ›´å¤šåšæ–‡æ¨¡æ¿ åœ¨ \\scaffolds æ–‡ä»¶å¤¹ä¸­å¯ä»¥å¢åŠ æ›´å¤šçš„æ¨¡æ¿ï¼Œæ¯”å¦‚æˆ‘å°±æäº†ä¸€ä¸ª \\scaffolds\\tutorial.mdï¼Œè¿™æ ·çš„è¯ï¼Œæ–°å»ºä¸€ç¯‡é¢˜è§£çš„æ—¶å€™è¾“å…¥å‘½ä»¤ hexo new tutorial \u0026quot;åšæ–‡æ ‡é¢˜\u0026quot; å°±å¯ä»¥ä½¿ç”¨æ¨¡æ¿äº†ã€‚\nå¼•ç”¨æœ¬åœ°å›¾ç‰‡ å¼•ç”¨é“¾æ¥/ç½‘ç»œä¸Šçš„å›¾ç‰‡æ ¼å¼ä¸æ™®é€š Markdown ç›¸åŒï¼ˆ[é“¾æ¥åç§°](é“¾æ¥åœ°å€) å’Œ ![å›¾ç‰‡æè¿°](å›¾ç‰‡åœ°å€)ï¼‰ï¼Œå¼•ç”¨æœ¬åœ°å›¾ç‰‡éœ€è¦æŠŠ post_asset_folder è®¾ä¸º true ï¼Œç„¶åæŠŠå›¾ç‰‡æ”¾åœ¨ä¸åšå®¢åŒåçš„æ–‡ä»¶å¤¹ä¸­ï¼Œç„¶ååªç”¨ ![å›¾ç‰‡æè¿°](å›¾ç‰‡æ–‡ä»¶å) å°±å¯ä»¥å¼•ç”¨äº†ã€‚\nåœ¨ç¼–è¾‘å™¨é‡Œæ˜¾ç¤ºä¸å‡ºå›¾ç‰‡æ˜¯æ­£å¸¸çš„ã€‚\nè¿˜æœ‰å¦ä¸€ç§æ–¹å¼å¼•ç”¨å›¾ç‰‡ï¼Œ![refpic](/post_img/hexoåšå®¢æ­å»ºæŒ‡åŒ—/refpic.jpg è¿™æ˜¯ä¸€å¼ ç”¨è¿™ç§æ–¹å¼å¼•ç”¨çš„å›¾ç‰‡)\nç”¨è¿™ç§æ–¹å¼å¼•ç”¨å›¾ç‰‡çš„è¯ï¼ŒæŠŠé¼ æ ‡æ”¾åœ¨ä¸Šé¢ä¼šæ˜¾ç¤ºå›¾ç‰‡æè¿°ï¼ˆä¸Šé¢è¿™å¼ å›¾å°±æ˜¯ç”¨è¿™ç§æ–¹å¼å¼•ç”¨çš„ï¼‰ã€‚\nåªæœ‰è¿™ç§æ–¹å¼å¼•ç”¨å›¾ç‰‡æ‰èƒ½åœ¨åšå®¢é¦–é¡µæ­£å¸¸æ˜¾ç¤ºå›¾ç‰‡ï¼Œå¦åˆ™åªèƒ½ç‚¹è¿›åšå®¢æ‰èƒ½çœ‹åˆ°å›¾ç‰‡ã€‚\n$\\LaTeX$ çš„ä½¿ç”¨ $\\LaTeX$ æ¦‚è¿° $\\LaTeX$ ä¸»è¦ç”¨äºç¼–è¾‘æ•°å­¦å…¬å¼ï¼Œååˆ†æ–¹ä¾¿ï¼Œç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šå­¦ä¹ èµ„æºï¼Œæ¯”å¦‚ï¼šLaTeXæ•°å­¦å…¬å¼å¤§å…¨ã€‚\nåœ¨æ”¯æŒ $\\LaTeX$ çš„ Markdown æ–‡æ¡£é‡Œï¼Œä½¿ç”¨ä¸¤ä¸ªç¾å…ƒç¬¦å·å°† $\\LaTeX$ å…¬å¼æ‹¬èµ·æ¥ï¼Œä¾‹å¦‚ï¼š\n~~QAQ$f_i=\\sum\\limits_{j=1}^ia_j$f_i=\\sum\\limits_{j=1}^ia_j~~  QAQ$f_i=\\sum\\limits_{j=1}^ia_j$f_i=\\sum\\limits_{j=1}^ia_j\nä¹Ÿå¯ä»¥ç”¨ä¸€å¯¹åŒç¾å…ƒç¬¦å·ä½¿å…¬å¼å±…ä¸­æ˜¾ç¤ºåœ¨å•è¡Œï¼Œä¾‹å¦‚ï¼š\n$f_i=1$ $$f_i=1$$  $f_i=1$\n$$f_i=1$$\nåœ¨ Typora ä¸­ä½¿ç”¨ $\\LaTeX$ éœ€è¦å°†è®¾ç½®ä¸­çš„\u0026quot;Markdown æ‰©å±•è¯­æ³•\u0026quot;å…¨éƒ¨å‹¾é€‰ã€‚\n P.S. $\\LaTeX$ï¼š\\LaTeX\n å¯ç”¨ $\\LaTeX$ åœ¨ \\themes\\next\\_config.yml ä¸­å°† mathjax è®¾ä¸º trueï¼Œç„¶åå°† per_page è®¾ä¸º false æˆ–è€…åœ¨éœ€è¦å¯ç”¨ \\LaTeX çš„åšæ–‡å¼€å¤´åŠ ä¸Š mathjax: true ã€‚\nè§£å†³å†²çª ç”±äºhexoåšå®¢ä¸­å³ä½¿æ˜¯ $$ å†…çš„å­—ç¬¦ä¹Ÿä¼šè¢«å½“æˆ Markdown æ¸²æŸ“ï¼Œç±»ä¼¼äº $f_{f_i}$ã€$a*b*c$ã€$[x,y](1\u0026lt;x\u0026lt;y\u0026lt;2)$ ä¹‹ç±»çš„ï¼Œéƒ½ä¼šè¢«é”™è¯¯åœ°æ¸²æŸ“ã€‚\nå¯¹äºä¸‹åˆ’çº¿ï¼Œæ–°ç‰ˆæœ¬çš„ marked å·²ç»ä¿®å¤è¿™ä¸€ bugï¼ˆæ–°ç‰ˆæœ¬çš„ hexo æˆ–è®¸å·²ç»ä¸éœ€è¦æ‰‹åŠ¨å‡çº§äº†ï¼‰ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡æ‰§è¡Œ npm install --save marked å’Œ npm install --save hexo-renderer-marked è§£å†³ã€‚ä½†åŒæ—¶ï¼Œæ–°ç‰ˆæœ¬çš„ marked ä¼šå°† \\ ç”¨ä½œè½¬ä¹‰ï¼Œæ‰€ä»¥ \\\\ ã€ \\{ ä¹‹ç±»çš„è¦æ”¹æˆ \\\\\\\\ ã€ \\\\{ ã€‚\nå¯¹äº *ï¼Œå»ºè®®ä½¿ç”¨ $\\cdot$ ($a\\cdot b$ï¼Œä¸€èˆ¬ç”¨äºè¡¨ç¤ºä¹˜ç§¯) æˆ– $\\times$ ï¼ˆ$n\\times m$ çš„çŸ©é˜µï¼Œä¸€èˆ¬ç”¨äºè¡¨ç¤ºç»´åº¦æˆ–è€…ç¬›å¡å°”ç§¯ï¼‰æˆ– $\\ast$ ï¼ˆ$\\mathbb{N}^\\ast$ï¼Œä¸€èˆ¬ç”¨äºä¸Šæ ‡æˆ–è¡¨ç¤ºå·ç§¯ï¼‰ ä»£æ›¿ã€‚å…¶å®ä¹Ÿå¯ä»¥ä½¿ç”¨ $\\*$ æ¥ä»£æ›¿ $\\ast$ ã€‚\nå¯¹äº $[x,y](1\u0026lt;x\u0026lt;y\u0026lt;2)$ï¼Œåœ¨å®ƒä»¬ä¹‹é—´åŠ ä¸Šç©ºæ ¼ï¼Œå³ $[x,y] (1\u0026lt;x\u0026lt;y\u0026lt;2)$ å°±å¥½äº†ã€‚\nåšå®¢çš„å‘å¸ƒ å…¶å®å‰æ–‡æåˆ°è¿‡ï¼Œä¾æ¬¡è¾“å…¥ä»¥ä¸‹ä¸‰æ¡å‘½ä»¤å³å¯ï¼š\nhexo cl hexo g hexo d  hexo cl æ˜¯å¯é€‰çš„ã€‚åŠ ä¸Šä¸ä¼šæœ‰åå¤„..è€Œä¸”æœ‰æ—¶å€™å¿…é¡»åŠ ä¸Šã€‚\nå‘å¸ƒä¹‹å‰è¿˜å¯ä»¥æ‰§è¡Œ hexo s å¹¶åœ¨æœ¬åœ°ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ localhost:4000 è¿›è¡Œé¢„è§ˆã€‚\nå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ hexo g -d å‘½ä»¤ã€‚\n","date":"2018-12-06T16:00:37+08:00","permalink":"https://ouuan.github.io/post/hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8C%97/","tags":["åšå®¢"],"title":"hexoåšå®¢æ­å»ºæŒ‡åŒ—"},{"categories":null,"contents":" OJ è´¦å·ï¼š\n CF æ´›è°· UOJ LOJ   Contribution(s):\n \n åœ¨æœ¬åšå®¢ï¼Œæ¨èå®‰è£… æ€æºå®‹ä½“ ä»¥è·å¾—æ›´å¥½çš„é˜…è¯»ä½“éªŒã€‚\næœ¬åšå®¢ä¸­è¿˜æœ‰å°‘é‡å«æœ‰ä¸­æ–‡çš„ LaTeX å…¬å¼ï¼Œæ‰€ä»¥æ¨èå®‰è£… MathJax çš„ Unicode å­—ä½“ Arial Unicode MS ã€‚\n Q: åšå®¢é‡Œçš„ XX åŠŸèƒ½æ˜¯æ€ä¹ˆåšåˆ°çš„å•Šï¼Ÿ\nA: æœ¬åšå®¢æ‰€æœ‰ä»£ç  å¼€æºï¼Œè¯·å…ˆè‡ªå·±æ‰¾ï¼Œè¿˜å¯ä»¥å‚è€ƒ ä» Hexo åˆ° Hugoï¼Œæ‰¾ä¸åˆ°å¯ä»¥åœ¨è¯„è®ºåŒºé—®ã€‚\nQ: ä¸ºä»€ä¹ˆå¤§éƒ¨åˆ†é¢˜è§£é‡Œçš„é¢˜æ„ç®€è¿°æ•°æ®èŒƒå›´ä¸å…¨ï¼Œç”šè‡³ä¸å¤ªçœ‹å¾—æ‡‚ï¼Ÿ\nA: å› ä¸ºè¿™æ˜¯é¢˜è§£ä¸æ˜¯é¢˜é¢ï¼Œé¢˜æ„ç®€è¿°çš„ç›®çš„æ˜¯è®©äººå°½å¿«çŸ¥é“é¢˜ç›®å¤§æ„ï¼Œè€Œä¸æ˜¯ç¡®ä¿èƒ½å¤Ÿè®©äººè¯»æ‡‚ã€èƒ½å¤Ÿæ®æ­¤å†™å‡º AC ä»£ç ã€‚å¦‚æœçœ‹ä¸æ‡‚/æƒ³çŸ¥é“è¯¦ç»†çš„æ•°æ®èŒƒå›´ï¼Œå¯ä»¥å» OJ ä¸Šçœ‹ã€‚\nQ: ä¸ºä»€ä¹ˆæˆ‘æ²¡çœ‹è§è¯„è®ºåŒºï¼Ÿ\nA: utterance çš„åŠ è½½æ˜¯ä¸€ä»¶ç„å­¦çš„äº‹æƒ…ï¼Œæœ‰æ—¶åŠ è½½é€Ÿåº¦ä¼šéå¸¸æ…¢ã€‚å¦‚æœå®åœ¨åŠ è½½ä¸å‡ºæ¥ï¼Œå¯ä»¥ç›´æ¥åœ¨ issues é‡Œç•™è¨€ã€‚å¦‚æœæ–°å¼€ issue éœ€è¦æ³¨æ„ä¸€ä¸‹ issue æ ‡é¢˜çš„æ ¼å¼ï¼ˆå¯ä»¥åœ¨åšå®¢é¡µé¢ F12 ç„¶å Ctrl + F æœç´¢ \u0026lt;/title\u0026gt;ï¼Œåœ¨ \u0026lt;title\u0026gt; å’Œ \u0026lt;/title\u0026gt; ä¹‹é—´å°±æ˜¯æ ‡é¢˜ï¼‰ï¼ˆåœ¨ chrome ä¸­è¿˜å¯ä»¥æ”¶è—åšå®¢ï¼ŒæŠŠé»˜è®¤çš„æ ‡é¢˜å¤åˆ¶ä¸‹æ¥ï¼‰ã€‚\n å¤´åƒä¸æ˜¯æˆ‘è‡ªå·±ç”»çš„ã€‚\n ç°åœ¨ ç™¾åº¦ ouuan ä¸éœ€è¦åŠ å¼•å·æ›´ä¸éœ€è¦ -(æ¬§å…ƒ) äº†ï¼\n æ¨¡æ‹Ÿèµ›ç»“æŸåå¿…é¡»æ”¹é¢˜ï¼Œæ²¡æœ‰å¯ä»¥æ¨è¿Ÿå­¦çš„çŸ¥è¯†ç‚¹ï¼Œæ²¡æœ‰é•¿çš„ä»£ç ï¼Œè¦å­¦ä¼šå‘ä»–äººè¯·æ•™ï¼Œå®åœ¨çœ‹ä¸æ‡‚é¢˜è§£å¯¹ç€æ ‡ç¨‹ä¹Ÿè¦æ•²ä¸€éï¼Œåªè¦ä¸å¤åˆ¶å°±è¡Œã€‚\n æˆ‘ä¸æƒ³å’Œä»–äººäº‰æŠ¢ä¿é€çš„åé¢ï¼Œä½†æˆ‘ç°é˜¶æ®µçš„æ¢¦æƒ³ï¼Œæ˜¯æé«˜å›½å®¶é›†è®­é˜Ÿç¬¬ 50 åçš„æ°´å¹³ã€‚\n ouuanï¼ŒHB ç°å½¹ OIerã€‚æœ€å–œæ¬¢çš„ç•ªå‰§/æ¼«ç”»æ˜¯ 3æœˆã®ãƒ©ã‚¤ã‚ªãƒ³ï¼ŒåŒæ—¶è¿˜æ˜¯ Î¼\u0026rsquo;serï¼ŒCLerï¼Œæµ·å­å§å•æ¨ï¼Œå¶å°”åšåšè§†é¢‘ï¼Œæ²‰è¿· contributeï¼Œç»å¸¸æ€è€ƒç¤¾ä¼šé—®é¢˜ï¼Œå´çœ‹ä¸æ¸…è‡ªå·±çš„æœªæ¥ã€‚\nåˆä¸‰ï¼š\nNOIP2017 æ™®åŠç»„ä¸€ç­‰ $230$ï¼ˆHB $rank$ $4$ï¼‰\nNOIP2017 æé«˜ç»„äºŒç­‰ $160$ï¼ˆHB $rank$ $43$ï¼‰\nHBSX2018 éæ­£å¼é€‰æ‰‹ $180$ï¼ˆHB $rank$ $4$ï¼‰\né«˜ä¸€ï¼š\nNOIP2018 æé«˜ç»„ä¸€ç­‰ $489$ï¼ˆCN $rank$ $329$ï¼‰\nTHUWC2019 æ²¡çº¦ invisibleï¼ˆCN å«åº•ï¼‰\nWC2019 Ag $99$ï¼ˆCN $rank$ $119$ï¼‰\nHBSX2019 è¢«çˆ†è¸© $247$ï¼ˆHB $rank$ $4$ï¼‰\nCTS2019 Ag $156$ï¼ˆCN $rank$ $126$ï¼‰\nAPIO2019 Cu $113$ï¼ˆCN $rank$ $256$ï¼‰\nTHUSC2019 ä¸‰ç­‰ invisibleï¼ˆCN $rank$ $?$ï¼‰\nCodeforces Round #564 å‡ºé¢˜äººä¹‹ä¸€ \u0026amp; ä¸»è¦ç»„ç»‡è€…\n2019.6.13 CF Contribution 134ï¼ˆCN $rank$ $1$ï¼‰\nNOI2019 Cu $376$ï¼ˆCN $rank$ $178$ï¼‰\né«˜äºŒï¼š\nCSP-S2019 ä¸€ç­‰ $433$ (CN $rank$ $238$)\nTHUWC2019-2 ä¸€ç­‰ invisible (ä¸€ç­‰é‡Œå«åº•)\nNOI Online Round 1 $180$ ï¼ˆå«åº•ï¼‰\nNOI Online Round 2 $300$\nNOI Online Round 3 $200$ ï¼ˆå«åº•ï¼‰\nã¤ã¥ã\n","date":"2018-12-05T13:40:21+08:00","permalink":"https://ouuan.github.io/about/","tags":null,"title":"å…³äº"},{"categories":["é¢˜è§£"],"contents":"ç”±äºåªä¼šT1ï¼Œæ²¡æ³•å†™æ¸¸è®°ï¼Œåªå¥½æ¥å†™é¢˜è§£äº†\u0026hellip;\né¢˜ç›®é“¾æ¥\né¢˜ç›®å¤§æ„ ç»™ä½ ä¸€ä¸ªæ•°åˆ—ï¼Œæ¯æ¬¡å¯ä»¥ä»»å–ä¸¤ä¸ªä¸ç›¸äº¤çš„åŒºé—´ï¼Œå–ä¸€æ¬¡çš„è´¡çŒ®æ˜¯è¿™ä¸¤ä¸ªåŒºé—´é‡Œæ‰€æœ‰æ•°çš„æœ€å°å€¼ï¼Œæ±‚æ‰€æœ‰å–æ³•çš„è´¡çŒ®å’Œï¼Œå¯¹ $10^9+7$ å–æ¨¡ã€‚\næ•°åˆ—é•¿åº¦ $2\\times 10^5$ ï¼Œå€¼åŸŸ $1$ ~ $10^9$ ã€‚\n$O(n^4)$ åšæ³• é¢„å¤„ç†åŒºé—´æœ€å°å€¼ï¼Œæšä¸¾é€‰çš„ä¸¤ä¸ªåŒºé—´ã€‚\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int M=1000000007; int n,a[60][60],ans; int main() { int i,j,k,l; cin\u0026gt;\u0026gt;n; for (i=1;i\u0026lt;=n;++i) { cin\u0026gt;\u0026gt;a[i][i]; } for (i=1;i\u0026lt;n;++i) { for (j=i+1;j\u0026lt;=n;++j) { a[i][j]=min(a[i][j-1],a[j][j]); } } for (i=1;i\u0026lt;n;++i) { for (j=i;j\u0026lt;n;++j) { for (k=j+1;k\u0026lt;=n;++k) { for (l=k;l\u0026lt;=n;++l) { ans=(ans+min(a[i][j],a[k][l]))%M; } } } } cout\u0026lt;\u0026lt;ans; return 0; }  $O(nlogn)$ åšæ³•  warningï¼šæ¥ä¸‹æ¥çš„æ–‡ç« é‡Œâ€œçš„â€å­—åµŒå¥—æƒ…å†µéå¸¸ä¸¥é‡ï¼Œæ–‡å­—å™è¿°æ¯”è¾ƒç¹æ‚ï¼Œçœ‹ä¸æ‡‚ååˆ†æ­£å¸¸ï¼Œå»ºè®®çœ‹æ‡‚ä¸€å°éƒ¨åˆ†ç„¶åè‡ªå·±æ¨ã€‚\n è€ƒè™‘æ¯ä¸ªå…ƒç´ ä½œä¸ºè´¡çŒ®çš„åŒºé—´æ˜¯å“ªäº›ï¼Œä¸ºäº†æŠŠæ¯ä¸ªåŒºé—´åˆ†ç»™å”¯ä¸€çš„å…ƒç´ ï¼Œè§„å®šä¸€ä¸ªåŒºé—´çš„è´¡çŒ®æ˜¯æœ€å°å€¼é‡Œæœ€é å·¦çš„ï¼ˆ e.g. 4 3 2 4 2 2 çš„è´¡çŒ®æ˜¯ $3$ å·å…ƒç´ ï¼Œå³æœ€å·¦è¾¹çš„ $2$ ï¼‰ã€‚æ‰€ä»¥ï¼Œå¯ä»¥åˆ©ç”¨æ ˆåœ¨ $O(n)$ çš„æ—¶é—´å†…é¢„å¤„ç†å‡ºæ¯ä¸ªå…ƒç´ ä½œä¸ºè´¡çŒ®çš„åŒºé—´çš„å·¦ç«¯ç‚¹å’Œå³ç«¯ç‚¹çš„èŒƒå›´ï¼š\nfor (i=1;i\u0026lt;=n;++i) { while (top\u0026amp;\u0026amp;a[sta[top]].w\u0026gt;a[i].w) { a[sta[top--]].r=i-1; } sta[++top]=i; } while (top) { a[sta[top--]].r=n; } for (i=n;i\u0026gt;=1;--i) { while (top\u0026amp;\u0026amp;a[sta[top]].w\u0026gt;=a[i].w) { a[sta[top--]].l=i+1; } sta[++top]=i; } while (top) { a[sta[top--]].l=1; }  æ¯ä¸ªå…ƒç´ ä½œä¸ºè´¡çŒ®çš„åŒºé—´å°±æ˜¯ $[x,y] (l_i\\le x\\le i\\le y\\le r_i)$ï¼Œæ¯ä¸ªå…ƒç´ ä½œä¸ºè´¡çŒ®çš„åŒºé—´æ•°å°±æ˜¯ $t_i=(i-l_i+1)\\times(r_i-i+1)$ ã€‚\nç„¶åï¼Œå°†å…ƒç´ æŒ‰å€¼ä»å¤§åˆ°å°æ’åºï¼Œå°±èƒ½è®¡ç®—å‡ºåŒºé—´æ•°çš„åç¼€å’Œ $suf[i]$ï¼Œä½†ä¸€ä¸ªå…ƒç´ çš„æ€»è´¡çŒ®å¹¶ä¸æ˜¯ $t_i\\times suf[i+1]$ï¼Œå› ä¸ºè¿™äº›åŒºé—´å¯èƒ½ä¸å½“å‰å…ƒç´ ä½œä¸ºè´¡çŒ®çš„åŒºé—´ç›¸äº¤ã€‚\næ³¨æ„åˆ°ï¼Œè¦æƒ³å’Œå½“å‰å…ƒç´ ä½œä¸ºè´¡çŒ®çš„åŒºé—´ç›¸äº¤ï¼Œå¿…é¡» $[x,y] (l_i\\le x\\le y\\le r_i)$ ï¼Œè€Œè¿™æ ·çš„åŒºé—´é™¤äº†å½“å‰å…ƒç´ ä½œä¸ºè´¡çŒ®çš„åŒºé—´ï¼Œè´¡çŒ®éƒ½æ’åœ¨å½“å‰å…ƒç´ ä¹‹åï¼ˆå€¼æ¯”å½“å‰å…ƒç´ å¤§æˆ–å€¼ç›¸ç­‰ä½†ä½ç½®é åï¼‰ï¼Œæ‰€ä»¥è¿™æ ·çš„åŒºé—´é™¤äº†å½“å‰å…ƒç´ ä½œä¸ºè´¡çŒ®çš„åŒºé—´ï¼Œéƒ½æ˜¯æˆ‘ä»¬è¦æ‰¾çš„ä¸å½“å‰å…ƒç´ ä½œä¸ºè´¡çŒ®çš„åŒºé—´ç›¸äº¤çš„è´¡çŒ®æ›´é åçš„åŒºé—´ã€‚\n æ³¨ï¼šä¸‹é¢è¿™æ®µè¯ä¸­â€œç›¸äº¤çš„åŒºé—´å¯¹â€æŒ‡ï¼ˆä¸å½“å‰å…ƒç´ ä½œä¸ºè´¡çŒ®çš„åŒºé—´ç›¸äº¤çš„è´¡çŒ®æ›´é åçš„åŒºé—´ï¼Œå½“å‰å…ƒç´ ä½œä¸ºè´¡çŒ®çš„åŒºé—´ï¼‰è¿™æ ·çš„ä¸€å¯¹åŒºé—´ï¼›â€œç›¸äº¤çš„åŒºé—´â€æŒ‡ä¸å½“å‰å…ƒç´ ä½œä¸ºè´¡çŒ®çš„åŒºé—´ç›¸äº¤çš„è´¡çŒ®æ›´é åçš„åŒºé—´ã€‚\n æ¥ä¸‹æ¥å°±è¦è®¡ç®—ç›¸äº¤çš„åŒºé—´æœ‰å¤šå°‘å¯¹ã€‚é¦–å…ˆï¼Œç›¸äº¤çš„åŒºé—´ä¸å¯èƒ½è·¨è¿‡å½“å‰å…ƒç´ ï¼Œå¦åˆ™å°±æ˜¯å½“å‰å…ƒç´ ä½œä¸ºè´¡çŒ®çš„åŒºé—´ï¼›æ‰€ä»¥ï¼Œç›¸äº¤çš„åŒºé—´è¦ä¹ˆæ˜¯ $[x,y] (l_i\\le x\\le y\u0026lt;i)$ ï¼Œè¦ä¹ˆæ˜¯ $[x,y] (i\u0026lt;x\\le y\\le r_i)$ã€‚å…ˆè®¡ç®— $[x,y] (l_i\\le x\\le y\u0026lt;i)$ ä¸å½“å‰å…ƒç´ ä½œä¸ºè´¡çŒ®çš„åŒºé—´ç›¸äº¤çš„å¯¹æ•°ï¼Œå…ˆè€ƒè™‘ $y$ å›ºå®šæ—¶ï¼Œä¸ªæ•°ä¸º $(r_i-i+1)\\times(y-l_i+1)^2$ ï¼Œå…¶ä¸­ï¼š$y-l_i+1$ æ—¢æ˜¯ç›¸äº¤çš„åŒºé—´å·¦ç«¯ç‚¹çš„ä¸ªæ•°ï¼Œä¹Ÿæ˜¯ä¸ç›¸äº¤çš„åŒºé—´ç›¸äº¤çš„å½“å‰å…ƒç´ ä½œä¸ºè´¡çŒ®çš„åŒºé—´çš„å·¦ç«¯ç‚¹çš„ä¸ªæ•°ï¼›$r_i-i+1$ æ˜¯ä¸ç›¸äº¤çš„åŒºé—´ç›¸äº¤çš„å½“å‰å…ƒç´ ä½œä¸ºè´¡çŒ®çš„åŒºé—´çš„å³ç«¯ç‚¹çš„ä¸ªæ•°ã€‚æ‰€ä»¥ï¼Œæ€»æ•°æ˜¯ $(r_i-i+1)\\times\\sum\\limits_{y=l_i}^{i-1}(y-l_i+1)^2$ ï¼Œä¹˜å·å³è¾¹æ˜¯è‡ªç„¶æ•°å¹³æ–¹å’Œï¼Œå¯ä»¥ç”¨å…¬å¼è®¡ç®—ï¼Œæ‰€ä»¥å°±æ˜¯ $(r_i-i+1)\\times\\frac{(i-l_i)\\times(i-l_i+1)\\times(2i-2l_i+1)}6$ ã€‚$[x,y] (i\u0026lt;x\\le y\\le r_i)$ åŒç†ï¼Œæ€»æ•°ä¸º $(i-l_i+1)\\times\\frac{(r_i-i)\\times(r_i-i+1)\\times(2r_i-2i+1)}6$ ã€‚\næ‰€ä»¥ï¼ŒæŠŠç›¸äº¤çš„æ€»å¯¹æ•°å‡æ‰å°±å¯ä»¥äº†ã€‚\nå‚è€ƒä»£ç ï¼š\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; int read() { int out=0; char c; while (!isdigit(c=getchar())); for (;isdigit(c);c=getchar()) { out=out*10+c-'0'; } return out; } const int N=200010; const int M=1000000007; const int SIX=166666668; //6æ¨¡1e9+7çš„é€†å…ƒ struct Node { long long id,w,l,r,t; bool operator\u0026lt;(const Node\u0026amp; b) const { return w\u0026lt;b.w; } } a[N]; long long n,suf[N],sta[N],top,ans; int main() { int i; n=read(); for (i=1;i\u0026lt;=n;++i) { a[i].w=read(); a[i].id=i; } for (i=1;i\u0026lt;=n;++i) { while (top\u0026amp;\u0026amp;a[sta[top]].w\u0026gt;a[i].w) { a[sta[top--]].r=i-1; } sta[++top]=i; } while (top) { a[sta[top--]].r=n; } for (i=n;i\u0026gt;=1;--i) { while (top\u0026amp;\u0026amp;a[sta[top]].w\u0026gt;=a[i].w) { a[sta[top--]].l=i+1; } sta[++top]=i; } while (top) { a[sta[top--]].l=1; } for (i=1;i\u0026lt;=n;++i) { a[i].t=(i-a[i].l+1)*(a[i].r-i+1)%M; } sort(a+1,a+n+1); for (i=n;i\u0026gt;=1;--i) { suf[i]=(suf[i+1]+a[i].t)%M; } for (i=1;i\u0026lt;=n;++i) { ans=(ans+(a[i].w*suf[i+1]%M)*a[i].t)%M; ans=(ans-(a[i].id-a[i].l)*(a[i].id-a[i].l+1)%M*(2*a[i].id-2*a[i].l+1)%M*SIX%M*(a[i].r-a[i].id+1)%M*a[i].w%M+M)%M; //é‡å¤åŒºé—´åœ¨å·¦ ans=(ans-(a[i].r-a[i].id)*(a[i].r-a[i].id+1)%M*(2*a[i].r-2*a[i].id+1)%M*SIX%M*(a[i].id-a[i].l+1)%M*a[i].w%M+M)%M; //é‡å¤åŒºé—´åœ¨å³ } cout\u0026lt;\u0026lt;ans; return 0; }  ","date":"2018-12-04T20:29:47+08:00","permalink":"https://ouuan.github.io/post/wc2019-%E5%85%A8%E5%9B%BD%E6%A8%A1%E6%8B%9F%E8%B5%9B%E7%AC%AC%E4%B8%80%E5%9C%BA-t1-%E9%A2%98%E8%A7%A3/","tags":["noi.ac"],"title":"WC2019 å…¨å›½æ¨¡æ‹Ÿèµ›ç¬¬ä¸€åœº T1 é¢˜è§£"},{"categories":["çŸ¥è¯†ç‚¹"],"contents":"æœ€è¿‘åšäº†å‡ é“æ ‘ä¸ŠèƒŒåŒ…çš„é¢˜ç›®ï¼Œå¾ˆå¤šé¢˜ç›®çš„æ•°æ®èŒƒå›´éƒ½å¾ˆå°ï¼Œä½†å®é™…ä¸Šæ ‘ä¸ŠèƒŒåŒ…æœ‰å¤šç§æ–¹å¼å¯ä»¥ä¼˜åŒ–åˆ° $O(nm)$ ï¼ˆ$n$ ä¸ºèŠ‚ç‚¹æ•°ï¼Œ$m$ ä¸ºä½“ç§¯çš„å€¼åŸŸï¼‰ï¼Œæ¯”å¦‚å…ˆåºéå†ä¼˜åŒ–ï¼ˆä½•æ£®ã€Šå…ˆåºéå†ç”¨äºä¼˜åŒ–æ ‘å½¢èƒŒåŒ…é—®é¢˜ã€‹ï¼‰ï¼Œæ±‚æ³›åŒ–ç‰©å“çš„å¹¶ï¼ˆå¾æŒè¡¡ã€Šæµ…è°ˆå‡ ç±»èƒŒåŒ…é¢˜ã€‹ï¼‰â€¦â€¦ç»è¿‡ä¸€ç•ªå­¦ä¹ ï¼Œè§‰å¾—è¿˜æ˜¯ä¸Šä¸‹ç•Œä¼˜åŒ–ç†è§£èµ·æ¥æœ€ç®€å•ï¼Œä¹Ÿæ¯”è¾ƒå¥½å†™ï¼Œé€‚ç”¨èŒƒå›´å¹¿ï¼Œå”¯ä¸€æ¯”å…¶å®ƒåšæ³•å¤æ‚çš„åœ°æ–¹å°±æ˜¯å¤æ‚åº¦åˆ†æã€‚\nä¾‹é¢˜è®²è§£ è¿™é‡Œä»¥ä¸€é“ç»å…¸çš„æ ‘ä¸ŠèƒŒåŒ…ä½œä¸ºä¾‹é¢˜ï¼šã€æ•°æ®åŠ å¼ºç‰ˆã€‘é€‰è¯¾\nç›´æ¥æŠŠæˆ‘å‡ºçš„æ•°æ®åŠ å¼ºç‰ˆæ”¾ä¸Šæ¥äº†..åæ­£é¢˜é¢é‡Œæœ‰åŸé¢˜é“¾æ¥QAQ\n æ³¨ï¼šæœ¬æ–‡ä¸­ç”¨ $a_i$ ä»£æŒ‡é¢˜é¢ä¸­çš„ $s_i$ ã€‚\n $O(nm^2)$ åšæ³• ç”¨ $f_{u,i}$ è¡¨ç¤ºä»¥ $u$ ä¸ºæ ¹çš„å­æ ‘ä¸­é€‰ $i$ é—¨è¯¾çš„æœ€å¤§å¾—åˆ†ï¼Œé‚£ä¹ˆ $f_{u,i}=\\min\\limits_{\\forall fa[v_j]=u,\\sum k_j=i-1}(\\sum f[v_j][k_j])+a_u$ï¼Œè€Œè¿™ä¸ªè½¬ç§»å¯ä»¥é€šè¿‡èƒŒåŒ…å®ç°ï¼Œä¾æ¬¡åˆå¹¶æ¯æ£µå­æ ‘ï¼Œæ¯æ¬¡åˆå¹¶æ—¶æšä¸¾ $i$ å’Œ $k_j$ ï¼Œ$f_{u,i}=\\max(f_{u,i},f_{u,i-k_j}+f_{v_j,k_j})$ ã€‚\néœ€è¦å€’åºæšä¸¾ $i$ é˜²æ­¢çŠ¶æ€åœ¨è½¬ç§»å‰è¢«è¦†ç›–ã€‚å¦åˆ™çš„è¯dpæ•°ç»„è¦å¤šä¸€ç»´ã€‚\nç”±äºå¯èƒ½æ˜¯æ£®æ—ï¼Œæ‰€æœ‰æ²¡æœ‰ç›´æ¥å…ˆä¿®è¯¾çš„èŠ‚ç‚¹ï¼Œçˆ¶äº²è§†ä¸ºèŠ‚ç‚¹ $0$ï¼Œå®é™…ä¸Šå°±è¦é€‰ $m+1$ ä¸ªèŠ‚ç‚¹ã€‚\nå‚è€ƒä»£ç ï¼š\nvoid dfs(int u) { f[u][1]=a[u]; int i,j,k,v; for (i=head[u];i;i=nxt[i]) { v=to[i]; dfs(v); for (j=m+1;j\u0026gt;=1;--j) { for (k=1;k\u0026lt;j;++k) { f[u][j]=max(f[u][j],f[u][j-k]+f[v][k]); } } } }  ä¸Šä¸‹ç•Œä¼˜åŒ– æ³¨æ„èƒŒåŒ…è½¬ç§»çš„è¿™éƒ¨åˆ†ï¼š\nfor (j=m+1;j\u0026gt;=1;--j) { for (k=1;k\u0026lt;j;++k) { f[u][j]=max(f[u][j],f[u][k]+f[v][j-k]); } }  å®é™…ä¸Šï¼Œè¿™é‡Œé¢æœ‰å¾ˆå¤šçŠ¶æ€éƒ½æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼š\n  è½¬ç§»æ—¶å·²ç»åˆå¹¶äº†å¤§å°ä¹‹å’Œä¸º $s$ çš„ä¸€äº›å­æ ‘ï¼Œé‚£ä¹ˆ $f_{u,i}(i\u0026gt;s)$ å®é™…ä¸Šæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚\n  $f_{v,i}(i\u0026gt;siz[v])$ ä¹Ÿæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚\n  $f_{u,i}(i\u0026gt;m)$ æ˜¯æ²¡æœ‰ä½œç”¨çš„ã€‚\n  æ‰€ä»¥ï¼Œå¯ä»¥å¯¹ $j$ å’Œ $k$ çš„æšä¸¾èŒƒå›´è¿›è¡Œä¼˜åŒ–ï¼š\nvoid dfs(int u) { siz[u]=1; f[u][1]=a[u]; int i,j,k,v; for (i=head[u];i;i=nxt[i]) { v=to[i]; dfs(v); for (j=min(m+1,siz[u]+siz[v]);j\u0026gt;=1;--j) { for (k=max(1,j-siz[u]);k\u0026lt;=siz[v]\u0026amp;\u0026amp;k\u0026lt;j;++k) { f[u][j]=max(f[u][j],f[u][j-k]+f[v][k]); } } siz[u]+=siz[v]; } }  å¤æ‚åº¦åˆ†æ å¯ä»¥å‚è€ƒè¿™ç¯‡åšå®¢ã€‚\nå½¢è±¡çš„è§£é‡Š æ¯ä¸ªç‚¹å¯¹éƒ½åªä¼šåœ¨ $lca$ å¤„åˆå¹¶ä¸€æ¬¡ï¼Œæ‰€ä»¥æ€»çš„å¤æ‚åº¦æ˜¯ $O(n^2)$ çš„ã€‚\nè¿™ä¸ªè§£é‡Šå¾ˆç®€æ´ï¼Œéœ€è¦è‡ªå·±æ„ä¼šä¸€ä¸‹..\nç²—ç•¥è®¡ç®— ä»¤ $T_u$ ä¸ºå¤„ç†å­æ ‘ $u$ çš„æ€»ç”¨æ—¶ï¼Œé‚£ä¹ˆï¼š\n$$\\begin{aligned}T_u\u0026amp;=\\left(\\sum\\limits_{\\forall fa[v_i]=u}T_{v_i}\\right)+t_u\\\\t_u\u0026amp;=1+(1+siz[v_1])\\times siz[v_1]+(1+siz[v_1]+siz[v_2])\\times siz[v_2]+\\cdots+siz[u]\\times siz[v_k]\\\\\u0026amp;=1+\\sum\\limits_{\\forall fa[v_i]=u}siz[v_i]\\times(siz[u]+1)\\\\\u0026amp;=siz[u]^2\\end{aligned}$$\nå¯¹äºå¶å­èŠ‚ç‚¹ $u$ ï¼Œ$T(u)=1$ ï¼Œæ˜¯ $O(siz[u]^2)$ çš„ã€‚\nå¯¹äºå„¿å­éƒ½æ˜¯å¶å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ $u$ï¼Œç”±äºå¹³æ–¹å’Œå°äºå’Œå¹³æ–¹ï¼Œ$\\sum\\limits_{\\forall fa[v_i]=u}T_{v_i}$ ä¹Ÿæ˜¯ $O(siz[u]^2)$ çš„ã€‚\nå¯ä»¥è¿™æ ·é€’å½’åœ°è¯´æ˜ï¼Œå¯¹äºä»»æ„èŠ‚ç‚¹ $u$ ï¼Œ$\\sum\\limits_{\\forall fa[v_i]=u}T_{v_i}$ éƒ½æ˜¯ $O(siz[u]^2)$ çš„ã€‚\nåˆå› ä¸º $t(u)$ æ˜¯ $O(siz[u]^2)$ çš„ï¼Œ$T(u)$ å°±æ˜¯ $O(siz[u]^2)$ çš„ã€‚\næ‰€ä»¥è§£å†³æ•´ä¸ªé—®é¢˜å°±æ˜¯ $O(n^2)$ çš„ã€‚\nè€ƒè™‘å€¼åŸŸçš„è®¡ç®— æšä¸¾è¿‡ç¨‹ä¸­è¿˜è¦å¯¹ $m$ å– min ï¼Œæ‰€ä»¥åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š\n$$\\begin{aligned}t_u\u0026amp;=1+\\min(m,1+siz[v_1])\\times \\min(m,siz[v_1])+\\min(m,1+siz[v_1]+siz[v_2])\\times \\min(m,siz[v_2])+\\cdots+\\min(m,siz[u])\\times \\min(m,siz[v_k])\\\\\u0026amp;\\le m\\times siz[u]\\end{aligned}$$\næ‰€ä»¥ï¼Œ$t(u)$ æ˜¯ $O(\\min(siz[u],m)\\times siz[u])$ çš„ã€‚\nå¯¹äº $siz[u]\\le m$ï¼Œ$T(u)$ æ˜¯ $O(siz[u]^2)$ çš„ã€‚\nå¯¹äº $siz[u]\u0026gt;m$ï¼Œ$\\sum\\limits_{\\forall fa[v_i]=u,siz[v_i]\\le m}T_{v_i}$ æ˜¯ $O\\left(\\left(\\sum\\limits_{\\forall fa[v_i]=u,siz[v_i]\\le m}siz[v_i]\\right)^2\\right)$ çš„ï¼›$\\sum\\limits_{\\forall fa[v_i]=u,siz[v_i]\u0026gt;m}T_{v_i}$ æ˜¯ $O\\left(m\\times\\sum\\limits_{\\forall fa[v_i]=u,siz[v_i]\u0026gt;m}siz[v_i]\\right)$ çš„ï¼›æ‰€ä»¥ï¼Œ$T(u)$ æ˜¯ $O(m\\times siz[u])$ çš„ã€‚\næ‰€ä»¥ï¼Œè§£å†³æ•´ä¸ªé—®é¢˜æ˜¯ $O(nm)$ çš„ã€‚\nå…¶å®ƒä¾‹é¢˜ ã€æ•°æ®åŠ å¼ºç‰ˆã€‘é“è·¯é‡å»º\ndlä»£ç  æˆ‘å‡ºçš„é‚£ä¸¤é“æ•°æ®åŠ å¼ºç‰ˆç•¥æœ‰äº›æ¯’ç˜¤..ï¼ˆ$n\\times m\\le 10^8$ï¼‰\nå¤§çº¦éœ€è¦è¿™æ ·å†™ï¼š\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; void dfs(int u); void add(int u,int v); const int N=100010; int head[N],nxt[N],to[N],cnt; int n,m,a[N],f[100000010],siz[N]; int main() { int i,k; scanf(\u0026quot;%d%d\u0026quot;,\u0026amp;n,\u0026amp;m); for (i=1;i\u0026lt;=n;++i) { scanf(\u0026quot;%d%d\u0026quot;,\u0026amp;k,a+i); add(k,i); } dfs(0); printf(\u0026quot;%d\u0026quot;,f[m+1]); return 0; } void add(int u,int v) { nxt[++cnt]=head[u]; head[u]=cnt; to[cnt]=v; } void dfs(int u) { siz[u]=1; f[u*(m+2)+1]=a[u]; int i,j,k,v; for (i=head[u];i;i=nxt[i]) { v=to[i]; dfs(v); for (j=min(m+1,siz[u]+siz[v]);j\u0026gt;=1;--j) { for (k=max(1,j-siz[u]);k\u0026lt;=siz[v]\u0026amp;\u0026amp;k\u0026lt;j;++k) { f[u*(m+2)+j]=max(f[u*(m+2)+j],f[u*(m+2)+j-k]+f[v*(m+2)+k]); } } siz[u]+=siz[v]; } }  å…³äºå¦ä¸€ç§ $O(nm)$ åšæ³• ä¸€å¼€å§‹æˆ‘åœ¨æ´›è°·å‘äº†ç¯‡é€‰è¯¾çš„é¢˜è§£ï¼Œç„¶åæ²¡è¿‡\u0026hellip;\né‚£ç¯‡é¢˜è§£ ç”¨çš„æ˜¯æ±‚æ³›åŒ–ç‰©å“çš„å¹¶ï¼ˆå¾æŒè¡¡ã€Šæµ…è°ˆå‡ ç±»èƒŒåŒ…é¢˜ã€‹ï¼‰\nè™½ç„¶è¯´æ´›è°·å¥½åƒè¿˜æ²¡æœ‰ä¸Šä¸‹ç•Œä¼˜åŒ–çš„é¢˜è§£..ä½†æœ€è¿‘å¥½å‡ ç¯‡é¢˜è§£æ²¡è¿‡å®¡ï¼Œéƒ½ä¸å¤ªæƒ³åœ¨æ´›è°·å‘é¢˜è§£äº†\u0026hellip;\n","date":"2018-11-28T17:16:35+08:00","permalink":"https://ouuan.github.io/post/%E6%A0%91%E4%B8%8A%E8%83%8C%E5%8C%85%E7%9A%84%E4%B8%8A%E4%B8%8B%E7%95%8C%E4%BC%98%E5%8C%96/","tags":["æ ‘å½¢dp"],"title":"æ ‘ä¸ŠèƒŒåŒ…çš„ä¸Šä¸‹ç•Œä¼˜åŒ–"},{"categories":["çŸ¥è¯†ç‚¹"],"contents":"æµ…è°ˆé‚»é¡¹äº¤æ¢æ’åºçš„åº”ç”¨ä»¥åŠéœ€è¦æ³¨æ„çš„é—®é¢˜.pdf\n é‚»é¡¹äº¤æ¢æ’åºæ˜¯ä¸€ç§å¸¸è§çš„è´ªå¿ƒç®—æ³•ï¼Œé€šè¿‡æ¯”è¾ƒä¸¤ä¸ªç›¸é‚»å…ƒç´ äº¤æ¢å‰åçš„ä¼˜åŠ£å¯¹æ•´ä¸ªåºåˆ—è¿›è¡Œæ’åºï¼Œä»è€Œä½¿å¾—è¿™ä¸ªåºåˆ—æˆä¸ºé¢˜ç›®æ‰€æ±‚çš„æœ€ä¼˜è§£ã€‚ç„¶è€Œï¼Œé‚»é¡¹äº¤æ¢æ’åºçš„åº”ç”¨æœ‰ä¸€äº›éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œç¨æœ‰ä¸æ…ä¾¿ä¼šæˆä¸ºä¸€ä¸ªé”™è¯¯çš„ç®—æ³•ã€‚\n ç®—æ³•ç®€ä»‹ ä¾‹é¢˜å¼•å…¥ é¢˜ç›®æ¥æº NOIP2012æé«˜ç»„D1T2 å›½ç‹æ¸¸æˆ\né¢˜ç›®æè¿° æ°é€¢ $H$ å›½å›½åº†ï¼Œå›½ç‹é‚€è¯· $n$ ä½å¤§è‡£æ¥ç©ä¸€ä¸ªæœ‰å¥–æ¸¸æˆã€‚é¦–å…ˆï¼Œä»–è®©æ¯ä¸ªå¤§è‡£åœ¨å·¦ã€å³æ‰‹ä¸Šé¢åˆ†åˆ«å†™ä¸‹ä¸€ä¸ªæ•´æ•°ï¼Œå›½ç‹è‡ªå·±ä¹Ÿåœ¨å·¦ã€å³æ‰‹ä¸Šå„å†™ä¸€ä¸ªæ•´æ•°ã€‚ç„¶åï¼Œè®©è¿™ $n $ä½å¤§è‡£æ’æˆä¸€æ’ï¼Œå›½ç‹ç«™åœ¨é˜Ÿä¼çš„æœ€å‰é¢ã€‚æ’å¥½é˜Ÿåï¼Œæ‰€æœ‰çš„å¤§è‡£éƒ½ä¼šè·å¾—å›½ç‹å¥–èµçš„è‹¥å¹²é‡‘å¸ï¼Œæ¯ä½å¤§è‡£è·å¾—çš„é‡‘å¸æ•°åˆ†åˆ«æ˜¯ï¼šæ’åœ¨è¯¥å¤§è‡£å‰é¢çš„æ‰€æœ‰äººçš„å·¦æ‰‹ä¸Šçš„æ•°çš„ä¹˜ç§¯é™¤ä»¥ä»–è‡ªå·±å³æ‰‹ä¸Šçš„æ•°ï¼Œç„¶åå‘ä¸‹å–æ•´å¾—åˆ°çš„ç»“æœã€‚\nå›½ç‹ä¸å¸Œæœ›æŸä¸€ä¸ªå¤§è‡£è·å¾—ç‰¹åˆ«å¤šçš„å¥–èµï¼Œæ‰€ä»¥ä»–æƒ³è¯·ä½ å¸®ä»–é‡æ–°å®‰æ’ä¸€ä¸‹é˜Ÿä¼çš„é¡ºåºï¼Œä½¿å¾—è·å¾—å¥–èµæœ€å¤šçš„å¤§è‡£ï¼Œæ‰€è·å¥–èµå°½å¯èƒ½çš„å°‘ã€‚æ³¨æ„ï¼Œå›½ç‹çš„ä½ç½®å§‹ç»ˆåœ¨é˜Ÿä¼çš„æœ€å‰é¢ã€‚\nè¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•° $n$ ï¼Œè¡¨ç¤ºå¤§è‡£çš„äººæ•°ã€‚\nç¬¬äºŒè¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° $a$ å’Œ $b$ ï¼Œä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºå›½ç‹å·¦æ‰‹å’Œå³æ‰‹ä¸Šçš„æ•´æ•°ã€‚\næ¥ä¸‹æ¥ $n$ è¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° $a$ å’Œ $b$ ï¼Œä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºæ¯ä¸ªå¤§è‡£å·¦æ‰‹å’Œå³æ‰‹ä¸Šçš„æ•´æ•°ã€‚\nè¾“å‡ºæ ¼å¼ ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºé‡æ–°æ’åˆ—åçš„é˜Ÿä¼ä¸­è·å¥–èµæœ€å¤šçš„å¤§è‡£æ‰€è·å¾—çš„é‡‘å¸æ•°ã€‚\næ•°æ®èŒƒå›´ å¯¹äº $20%$ çš„æ•°æ®ï¼Œæœ‰ $1\\le n\\le 10,0\u0026lt;a,b\u0026lt;8$ï¼›\nå¯¹äº $40%$ çš„æ•°æ®ï¼Œæœ‰ $1\\le n\\le 20,0\u0026lt;a,b\u0026lt;8$ï¼›\nå¯¹äº $60%$ çš„æ•°æ®ï¼Œæœ‰ $1\\le n\\le 100$ï¼›\nå¯¹äº $60%$ çš„æ•°æ®ï¼Œä¿è¯ç­”æ¡ˆä¸è¶…è¿‡ $10^9$ï¼›\nå¯¹äº $100%$ çš„æ•°æ®ï¼Œæœ‰ $1\\le n\\le 1000,0\u0026lt;a,b\u0026lt;10000$ ã€‚\nä½¿ç”¨é‚»é¡¹äº¤æ¢æ’åºè§£å†³é—®é¢˜ é€‰å–ç›¸é‚»çš„ä¸¤ä¸ªå¤§è‡£ $i$ å’Œ $j$ ï¼ˆ$j$ æ­¤æ—¶åœ¨ $i$ åä¸€ä¸ªï¼‰ï¼Œåˆ†åˆ«ç”¨ $a_i,b_i,a_j,b_j$ è¡¨ç¤ºè¿™ä¸¤ä½å¤§è‡£å·¦æ‰‹ä¸Šå’Œå³æ‰‹ä¸Šçš„æ•°å­—ï¼Œè®¾è¿™ä¸¤ä½å¤§è‡£å‰é¢çš„æ‰€æœ‰å¤§è‡£å·¦æ‰‹ä¸Šçš„æ•°ä¹˜ç§¯ä¸º $k$ ã€‚\næ­¤æ—¶ï¼Œè‹¥è°ƒæ•´è¿™ä¸¤åå¤§è‡£çš„é¡ºåºï¼Œå¯¹å‰é¢å’Œåé¢çš„å¤§è‡£éƒ½ä¸ä¼šé€ æˆå½±å“ï¼Œå› æ­¤æˆ‘ä»¬åªè¦ä½¿å¾—è¿™ä¸¤ä½å¤§è‡£ä¸­è·å¾—è¾ƒå¤šå¥–èµçš„é‚£ä½è·å¾—çš„å¥–èµå°½é‡å°‘å³å¯ã€‚\nå½“ $i$ åœ¨å‰ $j$ åœ¨åæ—¶ï¼Œè¿™ä¸ªå€¼ä¸º $\\max(\\frac k{b_i},\\frac {k a_i}{b_j})$ ã€‚\nå½“ $j$ åœ¨å‰ $i$ åœ¨åæ—¶ï¼Œè¿™ä¸ªå€¼ä¸º $\\max(\\frac k{b_j},\\frac {k a_j}{b_i})$ ã€‚\nå› æ­¤ï¼Œè‹¥ $\\max(\\frac k{b_i},\\frac {k a_i}{b_j})\u0026gt;\\max(\\frac k{b_j},\\frac {k a_j}{b_i})$ ï¼Œå°±éœ€è¦äº¤æ¢ $i$ å’Œ $j$ ã€‚\nå®é™…ä¸Šï¼Œç”±äº $\\frac {k a_i}{b_j}\\ge\\frac k{b_j},\\frac {k a_j}{b_i}\\ge\\frac k{b_i}$ ï¼Œåªéœ€æ¯”è¾ƒ $\\frac {k a_i}{b_j}$ å’Œ $\\frac {k a_j}{b_i}$ ï¼Œä¹Ÿå°±åªéœ€æ¯”è¾ƒ $\\frac {a_i}{b_j}$ å’Œ $\\frac {a_j}{b_i}$ ï¼Œå³ï¼šè‹¥ $a_i b_i\u0026gt;a_j b_j$ï¼Œå°±è¦äº¤æ¢ $i$ å’Œ $j$ ã€‚\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N=1010; struct Node { int a,b; bool operator\u0026lt;(Node\u0026amp; y) { return a*b\u0026lt;y.a*y.b; } } dc[N]; long long n,ans,k; int main() { cin\u0026gt;\u0026gt;n; for (int i=0;i\u0026lt;=n;++i) { cin\u0026gt;\u0026gt;dc[i].a\u0026gt;\u0026gt;dc[i].b; } sort(dc+1,dc+n+1); k=dc[0].a; for (int i=1;i\u0026lt;=n;++i) { ans=max(ans,k/dc[i].b); k*=dc[i].a; } cout\u0026lt;\u0026lt;ans; return 0; }  ä½¿ç”¨ä»¥ä¸Šä»£ç å³å¯å¾—åˆ°60åˆ†ï¼Œè€ŒACæ­¤é¢˜éœ€è¦ä½¿ç”¨é«˜ç²¾åº¦ä¹˜é™¤æ³•ï¼Œä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´å†…ã€‚\nä½¿ç”¨é‚»é¡¹äº¤æ¢æ’åºéœ€è¦æ³¨æ„çš„é—®é¢˜ å¦ä¸€é“ä¾‹é¢˜ é¢˜ç›®æ¥æº æ´›è°·P2123 çš‡åæ¸¸æˆ\né¢˜ç›®æè¿° çš‡åæœ‰ $n$ ä½å¤§è‡£ï¼Œæ¯ä½å¤§è‡£çš„å·¦å³æ‰‹ä¸Šé¢åˆ†åˆ«å†™ä¸Šäº†ä¸€ä¸ªæ­£æ•´æ•°ã€‚æ°é€¢å›½åº†èŠ‚æ¥ä¸´ï¼Œçš‡åå†³å®šä¸º $n$ ä½å¤§è‡£é¢å‘å¥–é‡‘ï¼Œå…¶ä¸­ç¬¬ $i$ ä½å¤§è‡£æ‰€è·å¾—çš„å¥–é‡‘æ•°ç›®ä¸ºç¬¬ $iï¼1$ ä½å¤§è‡£æ‰€è·å¾—å¥–é‡‘æ•°ç›®ä¸å‰ $i$ ä½å¤§è‡£å·¦æ‰‹ä¸Šçš„æ•°çš„å’Œçš„è¾ƒå¤§å€¼å†åŠ ä¸Šç¬¬ $i$ ä½å¤§è‡£å³æ‰‹ä¸Šçš„æ•°ã€‚\nå½¢å¼åŒ–åœ°è®²ï¼šæˆ‘ä»¬è®¾ç¬¬ $i$ ä½å¤§è‡£å·¦æ‰‹ä¸Šçš„æ­£æ•´æ•°ä¸º $a_i$ ï¼Œå³æ‰‹ä¸Šçš„æ­£æ•´æ•°ä¸º $b_i$ ï¼Œ\nåˆ™ç¬¬ $i$ ä½å¤§è‡£è·å¾—çš„å¥–é‡‘æ•°ç›®ä¸º $c_i$ å¯ä»¥è¡¨è¾¾ä¸ºï¼š\n$$c_i=\\begin{cases}a_1+b_1 \u0026amp; i=1\\\\\\max(c_{i-1},\\sum\\limits_{j=1}^ia_j)+b_i \u0026amp; 2\\le i\\le n\\end{cases}$$\nå½“ç„¶ï¼Œåå•¬çš„çš‡åå¹¶ä¸å¸Œæœ›å¤ªå¤šçš„å¥–é‡‘è¢«å‘ç»™å¤§è‡£ï¼Œæ‰€ä»¥å¥¹æƒ³è¯·ä½ æ¥é‡æ–°å®‰æ’ä¸€ä¸‹é˜Ÿä¼çš„é¡ºåºï¼Œä½¿å¾—è·å¾—å¥–é‡‘æœ€å¤šçš„å¤§è‡£ï¼Œæ‰€è·å¥–é‡‘æ•°ç›®å°½å¯èƒ½çš„å°‘ã€‚\næ³¨æ„ï¼šé‡æ–°å®‰æ’é˜Ÿä¼å¹¶ä¸æ„å‘³ç€ä¸€å®šè¦æ‰“ä¹±é¡ºåºï¼Œæˆ‘ä»¬å…è®¸ä¸æ”¹å˜ä»»ä½•ä¸€ä½å¤§è‡£çš„ä½ç½®ã€‚\nè¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ­£æ•´æ•° $T$ ï¼Œè¡¨ç¤ºæµ‹è¯•æ•°æ®çš„ç»„æ•°ã€‚\næ¥ä¸‹æ¥ $T$ ä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ­£æ•´æ•° $n$ ï¼Œè¡¨ç¤ºå¤§è‡£çš„æ•°ç›®ã€‚\næ¯ä¸ªéƒ¨åˆ†æ¥ä¸‹æ¥ $n$ è¡Œä¸­ï¼Œæ¯è¡Œä¸¤ä¸ªæ­£æ•´æ•°ï¼Œåˆ†åˆ«ä¸º $a_i$ å’Œ $b_i$ ï¼Œå«ä¹‰å¦‚ä¸Šæ–‡æ‰€è¿°ã€‚\nè¾“å‡ºæ ¼å¼ å…± $T$ è¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºè·å¾—å¥–é‡‘æœ€å¤šçš„å¤§è‡£æ‰€è·å¾—çš„å¥–é‡‘æ•°ç›®ã€‚\næ•°æ®èŒƒå›´ å¯¹äºå…¨éƒ¨æµ‹è¯•æ•°æ®æ»¡è¶³ï¼š$T\\le10,1\\le n\\le20000,1\\le a_i,b_i\\le10^9$ ã€‚\nå°è¯•ç”¨é‚»é¡¹äº¤æ¢æ’åºè§£å†³é—®é¢˜ è¿˜æ˜¯é€‰å–ç›¸é‚»çš„ä¸¤ä¸ªå¤§è‡£ $i$ å’Œ $j$ ï¼ˆ$j$ æ­¤æ—¶åœ¨ $i$ åä¸€ä¸ªï¼‰ï¼Œäº¤æ¢ $i$ å’Œ $j$ å¯¹å‰é¢çš„å¤§è‡£æ— å½±å“ï¼Œå¯¹åé¢çš„å¤§è‡£çš„å½±å“åœ¨äºæ’åœ¨åé¢çš„é‚£ä¸ªå¤§è‡£è·å¾—çš„å¥–é‡‘ï¼Œéœ€è¦ä½¿ä¹‹å°½é‡å°ã€‚\nè®¾è¿™ä¸¤ä¸ªå¤§è‡£å‰é¢çš„æ‰€æœ‰å¤§è‡£å·¦æ‰‹ä¸Šçš„æ•°ä¹‹å’Œä¸º $\\rm sum$ ï¼Œè¿™ä¸¤ä¸ªå¤§è‡£çš„å†å¾€å‰ä¸€ä¸ªå¤§è‡£å¾—åˆ°çš„å¥–é‡‘æ˜¯ $\\rm pre$ ã€‚\nå½“ $i$ åœ¨å‰ $j$ åœ¨åæ—¶ï¼Œè¿™ä¸ªå€¼ä¸º $\\max(\\max(\\mathrm{pre},\\mathrm{sum}+a_i)+b_i,\\mathrm{sum}+a_i+a_j)+b_j$ ã€‚\nå½“ $j$ åœ¨å‰ $i$ åœ¨åæ—¶ï¼Œè¿™ä¸ªå€¼ä¸º $\\max(\\max(\\mathrm{pre},\\mathrm{sum}+a_j)+b_j,\\mathrm{sum}+a_j+a_i)+b_i$ ã€‚\nç”±äº $\\max(x,y)+z=\\max(x+z,y+z)$ ï¼Œéœ€è¦æ¯”è¾ƒçš„å°±æ˜¯ $\\max(\\mathrm{pre}+b_i+b_j,\\mathrm{sum}+a_i+b_i+b_j,\\mathrm{sum}+a_i+a_j+b_j)$ å’Œ $\\max(\\mathrm{pre}+b_j+b_i,\\mathrm{sum}+a_j+b_j+b_i,\\mathrm{sum}+a_j+a_i+b_i)$ ï¼Œå…¶ä¸­ $\\mathrm{pre}+b_i+b_j=\\mathrm{pre}+b_j+b_i$ ï¼Œéœ€è¦æ¯”è¾ƒçš„å°±æ˜¯ $\\max(\\mathrm{sum}+a_i+b_i+b_j,\\mathrm{sum}+a_i+a_j+b_j)$ å’Œ $\\max(\\mathrm{sum}+a_j+b_j+b_i,\\mathrm{sum}+a_j+a_i+b_i)$ ï¼Œå†ç”¨ $\\mathrm{sum}+a_i+b_i+a_j+b_j$ å‡å»ä¸¤è¾¹å¹¶å˜å·ï¼Œå³ï¼šå½“ $\\min(a_i,b_j)\u0026gt;\\min(a_j,b_i)$ æ—¶ï¼Œéœ€è¦äº¤æ¢ $i$ å’Œ $j$ã€‚\näºæ˜¯ï¼Œå¯ä»¥å†™å‡ºä»¥ä¸‹ä»£ç ï¼Œå¹¶åœ¨æ´›è°·ä¸ŠACæ­¤é¢˜ï¼š\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N=20010; struct Node { int a,b; bool operator\u0026lt;(Node\u0026amp; y) { return min(a,y.b)\u0026lt;min(b,y.a); } } dc[N]; long long ans,sum,t,n; int main() { cin\u0026gt;\u0026gt;t; while (t--) { cin\u0026gt;\u0026gt;n; for (int i=1;i\u0026lt;=n;++i) { cin\u0026gt;\u0026gt;dc[i].a\u0026gt;\u0026gt;dc[i].b; } sort(dc+1,dc+n+1); ans=sum=0; for (int i=1;i\u0026lt;=n;++i) { sum+=dc[i].a; ans=max(ans,sum)+dc[i].b; } cout\u0026lt;\u0026lt;ans\u0026lt;\u0026lt;endl; } return 0; }  hackæ•°æ® äº‹å®ä¸Šï¼Œä¸Šé¢çš„åšæ³•æ˜¯é”™è¯¯çš„ï¼Œæ— æ³•é€šè¿‡ä¸‹é¢è¿™ç»„æ•°æ®ï¼š\n2 4 1 1 1 1 3 5 2 7 4 1 1 3 5 1 1 2 7  è¿™ä¸¤ç»„æ•°æ®åªæœ‰å¤§è‡£ç»™å‡ºçš„é¡ºåºä¸åŒï¼Œä½†ä¸Šé¢çš„ä»£ç è¾“å‡ºä¸ºï¼š\n16 17  è¾“å‡ºä¸­é—´ç»“æœï¼Œå¯ä»¥å‘ç°ï¼Œæ’åˆ—åçš„æœ€ç»ˆç»“æœåˆ†åˆ«ä¸ºï¼š\n1 1 1 1 2 7 3 5  å’Œ\n1 1 3 5 1 1 2 7  è¿™ä¸¤ç§æ’åˆ—æ–¹å¼éƒ½æ»¡è¶³ $\\forall i\\in [1,n),\\min(a_i,b_{i+1})\\le\\min(a_{i+1},b_i)$ï¼Œä½†ç¬¬äºŒç§æ–¹å¼å¹¶ä¸æ˜¯æœ€ä¼˜è§£ã€‚å…·ä½“åŸå› å°†åœ¨ä¸‹æ–‡åˆ†æã€‚\nä¸¥æ ¼å¼±åº ä¸¥æ ¼å¼±åºç®€ä»‹ è¦çŸ¥é“ä¸ºä»€ä¹ˆè¿™ç§åšæ³•æ˜¯é”™è¯¯çš„ï¼Œé¦–å…ˆéœ€è¦äº†è§£ä¸¥æ ¼å¼±åºï¼ˆstrict weak orderingï¼‰ã€‚\nå¯¹äºä¸€ä¸ªæ¯”è¾ƒè¿ç®—ç¬¦ï¼ˆç”¨â€œ$\u0026lt;$â€è¡¨ç¤ºæ­¤è¿ç®—ç¬¦ï¼Œç”¨â€œ$\\not\u0026lt;$â€è¡¨ç¤ºä¸æ»¡è¶³æ­¤è¿ç®—ç¬¦ï¼‰ï¼Œè‹¥æ»¡è¶³ä»¥ä¸‹å››ä¸ªæ¡ä»¶ï¼Œåˆ™ç§°å…¶æ˜¯æ»¡è¶³ä¸¥æ ¼å¼±åºçš„ï¼š\n $x\\not\u0026lt;x$ ï¼ˆéè‡ªåæ€§ï¼‰ è‹¥ $x\u0026lt;y$ï¼Œåˆ™ $y\\not\u0026lt;x$ ï¼ˆéå¯¹ç§°æ€§ï¼‰ è‹¥ $x\u0026lt;y,y\u0026lt;z$ï¼Œåˆ™ $x\u0026lt;z$ ï¼ˆä¼ é€’æ€§ï¼‰ è‹¥ $x\\not\u0026lt;y,y\\not\u0026lt;x,y\\not\u0026lt;z,z\\not\u0026lt;y$ï¼Œåˆ™ $x\\not\u0026lt;z,z\\not\u0026lt;x$ ï¼ˆä¸å¯æ¯”æ€§çš„ä¼ é€’æ€§ï¼‰  è€Œ C++ æ ‡å‡†åº“è¦æ±‚ç”¨äºæ’åºçš„è¿ç®—ç¬¦å¿…é¡»æ»¡è¶³ä¸¥æ ¼å¼±åºï¼š\n  It has to be antisymmetric.\nThis means that for operator $\u0026lt;$: If $x \u0026lt; y$ is true, then $y \u0026lt; x$ is false.\nThis means that for a predicate op(): If op(x,y) is true, then op(y,x) is false.\n  It has to be transitive.\nThis means that for operator $\u0026lt;$: If $x \u0026lt; y$ is true and $y \u0026lt; z$ is true, then $x \u0026lt; z$ is true.\nThis means that for a predicate op(): If op(x,y) is true and op(y,z) is true, then op(x,z)\nis true.\n  It has to be irreflexive.\nThis means that for operator $\u0026lt;$: $x \u0026lt; x$ is always false.\nThis means that for a predicate op(): op(x,x) is always false.\n  It has to have transitivity of equivalence, which means roughly: If a is equivalent to b and b is\nequivalent to c, then a is equivalent to c.\nThis means that for operator $\u0026lt;$: If $!(a\u0026lt;b) \\\u0026amp;\\\u0026amp; !(b\u0026lt;a)$ is true and $!(b\u0026lt;c) \\\u0026amp;\\\u0026amp; !(c\u0026lt;b)$ is true\nthen $!(a\u0026lt;c) \\\u0026amp;\\\u0026amp; !(c\u0026lt;a)$ is true.\nThis means that for a predicate op(): If op(a,b), op(b,a), op(b,c), and op(c,b) all yield\nfalse, then op(a,c) and op(c,a) yield false.\n  ä¸Šè¿°åšæ³•çš„åˆ¤æ–­æ¡ä»¶æ»¡è¶³ä¼ é€’æ€§ï¼Œä½†ä¸æ»¡è¶³ä¸å¯æ¯”æ€§çš„ä¼ é€’æ€§ã€‚\næ»¡è¶³ä¼ é€’æ€§çš„è¯æ˜ å‘½é¢˜ï¼š$\\forall \\begin{cases}\\min(a_i,b_j)\u0026lt;\\min(a_j,b_i)\\\\\\min(a_j,b_k)\u0026lt;\\min(a_k,b_j)\\end{cases}$ï¼Œæœ‰ $\\min(a_i,b_k)\u0026lt;\\min(a_k,b_i)$ã€‚\nå°†ä¸Šå¼æ‹†è§£æˆé€»è¾‘å¼ï¼Œå³è¯ï¼š\n$\\forall \\begin{cases}(a_i\u0026lt;a_j\\lor b_j\u0026lt;a_j)\\land(a_i\u0026lt;b_i\\lor b_j\u0026lt;b_i) \\\\(a_j\u0026lt;a_k\\lor b_k\u0026lt;a_k)\\land(a_j\u0026lt;b_j\\lor b_k\u0026lt;b_j)\\end{cases}$ï¼Œæœ‰ $(a_i\u0026lt;a_k\\lor b_k\u0026lt;a_k)\\land(a_i\u0026lt;b_i\\lor b_k\u0026lt;b_i)$ã€‚\nå‡è®¾åŸå‘½é¢˜ä¸æˆç«‹ï¼Œå³ $\\exists\\begin{cases}(a_i\u0026lt;a_j\\lor b_j\u0026lt;a_j)\\land(a_i\u0026lt;b_i\\lor b_j\u0026lt;b_i)\u0026amp;(1) \\\\(a_j\u0026lt;a_k\\lor b_k\u0026lt;a_k)\\land(a_j\u0026lt;b_j\\lor b_k\u0026lt;b_j)\u0026amp;(2) \\\\(a_i\\ge a_k\\land b_k\\ge a_k)\\lor(a_i\\ge b_i\\land b_k\\ge b_i)\u0026amp;(3)\\end{cases}$\nåˆ†åˆ«è®¨è®º $(3)$ å¼æˆç«‹çš„ä¸¤ç§æƒ…å†µï¼š\nè‹¥ $a_i\\ge a_k\\land b_k\\ge a_k$ï¼Œç”± $(2)$ å¼å¾— $a_j\u0026lt;a_k$ï¼Œè¿›è€Œæ¨å‡º $a_j\u0026lt;a_i$ï¼Œå†ç”± $(1)$ å¼å¾— $b_j\u0026lt;a_j$ï¼Œå†ç”± $(2)$ å¼å¾—åˆ° $b_k\u0026lt;b_j$ï¼Œæ‰€ä»¥ $b_k\u0026lt;b_j\u0026lt;a_j\u0026lt;a_k$ï¼Œä¸ $b_k\\ge a_k$ çŸ›ç›¾ï¼Œä¸æˆç«‹ã€‚\nè‹¥ $a_i\\ge b_i\\land b_k\\ge b_i$ï¼Œä¸ä¸Šé¢ç±»ä¼¼ï¼Œç”± $(1)$ å¼å¾— $b_j\u0026lt;b_i$ï¼Œè¿›è€Œæ¨å‡º $b_j\u0026lt;b_k$ï¼Œå†ç”± $(2)$ å¼å¾—åˆ° $a_j\u0026lt;b_j$ï¼Œå†ç”± $(1)$ å¼å¾—åˆ° $a_i\u0026lt;a_j$ï¼Œæ‰€ä»¥ $a_i\u0026lt;a_j\u0026lt;b_j\u0026lt;b_i$ï¼Œä¸ $a_i\\ge b_i$ çŸ›ç›¾ï¼Œä¸æˆç«‹ã€‚\nç»¼ä¸Šæ‰€è¿°ï¼Œå‡è®¾ä¸æˆç«‹ã€‚\næ‰€ä»¥ï¼Œ$P_{i,j}=\\min(a_i,b_j)\u0026lt;\\min(a_j,b_i)$ å…·æœ‰ä¼ é€’æ€§ã€‚\nä¸å…·æœ‰ä¸å¯æ¯”æ€§çš„ä¼ é€’æ€§çš„è¯æ˜ å‘½é¢˜ï¼š$\\forall \\begin{cases}\\min(a_i,b_j)=\\min(a_j,b_i)\\\\\\min(a_j,b_k)=\\min(a_k,b_j)\\end{cases}$ï¼Œæœ‰ $\\min(a_i,b_k)=\\min(a_k,b_i)$ã€‚\nå¾ˆæ˜æ˜¾ï¼Œå½“ $a_j=b_j$ ä¸”éƒ½å¾ˆå°æ—¶å­˜åœ¨åä¾‹ï¼Œå¦‚ï¼š\n$$\\begin{array}{c|c|c}\u0026amp;a\u0026amp;b\\\\i\u0026amp;3\u0026amp;5\\\\j\u0026amp;1\u0026amp;1\\\\k\u0026amp;2\u0026amp;7\\end{array}$$\n$\\begin{cases}\\min(3,1)=\\min(1,5)\\\\\\min(1,7)=\\min(2,1)\\end{cases}$ï¼Œä½† $\\min(3,7)\\ne \\min(2,5)$ã€‚\nè¿™æ ·çš„åä¾‹è¿˜æœ‰å¾ˆå¤šï¼Œæ‰€ä»¥ï¼Œ$P_{i,j}=\\min(a_i,b_j)\u0026lt;\\min(a_j,b_i)$ ä¸å…·æœ‰ä¸å¯æ¯”æ€§çš„ä¼ é€’æ€§ã€‚\nä¸ºä½•ä¼šé”™ ç®€å•åœ°è¯´ï¼Œ$P_{i,j}=\\min(a_i,b_j)\u0026lt;\\min(a_j,b_i)$ ä¸æ»¡è¶³ä¸¥æ ¼å¼±åºï¼Œä¸èƒ½ä½œä¸º std::sort çš„æ¯”è¾ƒå‡½æ•°ã€‚\nç©¶å…¶åŸå› ï¼Œâ€œä¸å…·æœ‰ä¸å¯æ¯”æ€§çš„ä¼ é€’æ€§â€æ„å‘³ç€ï¼šå°†åºåˆ—ä¸­è‹¥å¹²ä¸ªä¸å¯æ¯”çš„ç›¸é‚»å…ƒç´ å¯¹ï¼ˆåœ¨è¿™ç§æ¯”è¾ƒæ–¹å¼ä¸‹å³ $\\min(a_i,b_{i+1})=\\min(a_{i+1},b_i)$ çš„ $i$ å’Œ $i+1$ï¼‰äº’æ¢åï¼Œå¯èƒ½ä¼šå‡ºç°å‰é¢çš„å…ƒç´ â€œå¤§äºâ€åé¢çš„å…ƒç´ ï¼ˆåœ¨è¿™ç§æ¯”è¾ƒæ–¹å¼ä¸‹å³å‡ºç° $\\min(a_i,b_{i+1})\u0026gt;\\min(a_{i+1},b_i)$ï¼‰ï¼Œä»è€Œä½¿å¾—åŸå…ˆçš„æ’åˆ—æ–¹å¼ä¸æ˜¯æœ€ä¼˜çš„ã€‚\næ­£ç¡®è§£æ³• æ›´åŠ å®Œå–„çš„è´ªå¿ƒè§£æ³• æ¯”è¾ƒç›¸é‚»ä¸¤é¡¹æ—¶ï¼Œè‹¥ $\\min(a_i,b_j)=\\min(a_j,b_i)$ ï¼Œä»å…¨å±€æ¥çœ‹ï¼Œç”±äº $a$ çš„å‰ç¼€å’Œå¯¹ç­”æ¡ˆæœ‰ä¸€å®šçš„å½±å“ï¼ŒæŠŠ $a$ æ›´å°çš„æ”¾å‰é¢æ˜¯æ›´ä¼˜çš„ã€‚ä»è€Œå¯ä»¥å¾—åˆ°è¿™æ ·ä¸€ä¸ªè§£æ³•ï¼š\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const int N=20010; struct Node { int a,b; bool operator\u0026lt;(Node\u0026amp; y) { return min(a,y.b)==min(b,y.a)?a\u0026lt;y.a:min(a,y.b)\u0026lt;min(b,y.a); } } dc[N]; long long ans,sum,t,n; int main() { cin\u0026gt;\u0026gt;t; while (t--) { cin\u0026gt;\u0026gt;n; for (int i=1;i\u0026lt;=n;++i) { cin\u0026gt;\u0026gt;dc[i].a\u0026gt;\u0026gt;dc[i].b; } sort(dc+1,dc+n+1); ans=sum=0; for (int i=1;i\u0026lt;=n;++i) { sum+=dc[i].a; ans=max(ans,sum)+dc[i].b; } cout\u0026lt;\u0026lt;ans\u0026lt;\u0026lt;endl; } return 0; }  è¿™ä¸ªè§£æ³•çš„æ­£ç¡®æ€§å°†åœ¨ä¸‹æ–‡è¯æ˜ã€‚\nä¸€ä¸ªè§£æ³•æ˜¯å¦æ­£ç¡®çš„åˆ¤æ–­æ–¹å¼ ç”±ä¸Šæ–‡çš„è®¨è®ºå¯ä»¥å¾—çŸ¥ï¼Œä¸€ä¸ªæ’åºæ–¹å¼ $P_{i,j}$ è¦æ˜¯æ­£è§£ï¼Œéœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š\n  æ»¡è¶³ä¸¥æ ¼å¼±åºã€‚\n  $\\forall P_{i,j}=true$ï¼Œ$\\min(a_i,b_j)\\le\\min(a_j,b_i)$ ã€‚\n  å³ï¼Œå¯ä»¥ä½œä¸ºæ¯”è¾ƒå‡½æ•°ï¼Œä¸”æ’åºå®Œæˆåä»»æ„äº¤æ¢ç›¸é‚»å…ƒç´ å‡ä¸ä¼šä½¿ç­”æ¡ˆæ›´ä¼˜ã€‚\nä»è€Œå¯ä»¥å†™å‡ºä¸‹é¢çš„æ­£è§£åˆ¤æ–­å™¨ï¼š\n#include \u0026lt;cstdio\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; bool cmp(int i,int j); int a[10],b[10]; int main() { for (a[0]=1;a[0]\u0026lt;=6;++a[0]) { for (b[0]=1;b[0]\u0026lt;=6;++b[0]) { if (cmp(0,0)) { printf(\u0026quot;No irreflexivity:%d %d\\n\u0026quot;,a[0],b[0]); } for (a[1]=1;a[1]\u0026lt;=6;++a[1]) { for (b[1]=1;b[1]\u0026lt;=6;++b[1]) { if (cmp(0,1)\u0026amp;\u0026amp;min(a[0],b[1])\u0026gt;min(a[1],b[0])) { printf(\u0026quot;Not the best:%d %d %d %d\\n\u0026quot;,a[0],b[0],a[1],b[1]); } for (a[2]=1;a[2]\u0026lt;=6;++a[2]) { for (b[2]=1;b[2]\u0026lt;=6;++b[2]) { if (cmp(0,1)\u0026amp;\u0026amp;cmp(1,2)\u0026amp;\u0026amp;!cmp(0,2)) { printf(\u0026quot;No transitivity:%d %d %d %d %d %d\\n\u0026quot;,a[0],b[0],a[1],b[1],a[2],b[2]); } if (!cmp(0,1)\u0026amp;\u0026amp;!cmp(1,0)\u0026amp;\u0026amp;!cmp(1,2)\u0026amp;\u0026amp;!cmp(2,1)\u0026amp;\u0026amp;(cmp(0,2)||cmp(2,0))) { printf(\u0026quot;No transitivity of incomparability:%d %d %d %d %d %d\\n\u0026quot;,a[0],b[0],a[1],b[1],a[2],b[2]); } } } } } } } return 0; } bool cmp(int i,int j) { return min(a[i],b[j])==min(a[j],b[i])?a[i]\u0026lt;a[j]:min(a[i],b[j])\u0026lt;min(a[j],b[i]); }  è¿è¡Œç¨‹åºï¼Œæ²¡æœ‰ä»»ä½•è¾“å‡ºï¼Œè¯´æ˜ä¸Šæ–‡æ‰€è¿°çš„æ’åºæ–¹å¼æ˜¯ä¸€ä¸ªæ­£è§£ã€‚\nç”¨å…¶å®ƒæ’åºæ–¹å¼æ›¿æ¢ cmpï¼Œè‹¥æ²¡æœ‰ä»»ä½•è¾“å‡ºå³å¯ä½œä¸ºæœ¬é¢˜çš„æ­£ç¡®æ’åºæ–¹å¼ã€‚\nä¸‹é¢æ˜¯å‡ ç§æ’åºæ–¹å¼çš„ä¾‹å­ï¼š\nbool cmp(int i,int j) { return min(a[i],b[j])==min(a[j],b[i])?b[i]\u0026gt;b[j]:min(a[i],b[j])\u0026lt;min(a[j],b[i]); }  è¾“å‡ºä¸ºç©ºï¼Œæ˜¯æ­£è§£ã€‚\nbool cmp(int i,int j) { return min(a[i],b[j])\u0026lt;min(a[j],b[i]); }  å…±è¾“å‡º1694è¡Œï¼Œå‰10è¡Œå¦‚ä¸‹ï¼š\nNo transitivity of incomparability:1 2 1 1 2 1 No transitivity of incomparability:1 2 1 1 2 2 No transitivity of incomparability:1 2 1 1 2 3 No transitivity of incomparability:1 2 1 1 2 4 No transitivity of incomparability:1 2 1 1 2 5 No transitivity of incomparability:1 2 1 1 2 6 No transitivity of incomparability:1 2 1 1 3 1 No transitivity of incomparability:1 2 1 1 3 2 No transitivity of incomparability:1 2 1 1 3 3 No transitivity of incomparability:1 2 1 1 3 4  bool cmp(int i,int j) { return min(a[i],b[j])==min(a[j],b[i])?a[i]\u0026gt;a[j]:min(a[i],b[j])\u0026lt;min(a[j],b[i]); }  å…±è¾“å‡º280è¡Œï¼Œå‰10è¡Œå¦‚ä¸‹ï¼š\nNo transitivity:1 2 2 1 1 1 No transitivity:1 2 2 2 1 1 No transitivity:1 2 2 3 1 1 No transitivity:1 2 2 4 1 1 No transitivity:1 2 2 5 1 1 No transitivity:1 2 2 6 1 1 No transitivity:1 2 3 1 1 1 No transitivity:1 2 3 2 1 1 No transitivity:1 2 3 3 1 1 No transitivity:1 2 3 4 1 1  bool cmp(int i,int j) { return min(a[i],b[j])\u0026lt;=min(a[j],b[i]); }  å…±è¾“å‡º883è¡Œï¼Œå‰10è¡Œå¦‚ä¸‹ï¼š\nNo irreflexivity:1 1 No irreflexivity:1 2 No irreflexivity:1 3 No irreflexivity:1 4 No irreflexivity:1 5 No irreflexivity:1 6 No irreflexivity:2 1 No transitivity:2 1 1 1 1 2 No transitivity:2 1 1 1 1 3 No transitivity:2 1 1 1 1 4  æ€»ç»“ åœ¨å¯ä»¥é€šè¿‡æ¯”è¾ƒç›¸é‚»ä¸¤é¡¹å¾—å‡ºäº¤æ¢æˆ–ä¸äº¤æ¢ä¸€å®šä¸ä¼šæ›´å·®æ—¶ï¼Œå¯ä»¥é€šè¿‡é‚»é¡¹äº¤æ¢æ’åºçš„æ–¹å¼æ¥å¾—åˆ°æœ€ä¼˜è§£ã€‚\né‚»é¡¹äº¤æ¢æ’åºçš„æ¯”è¾ƒå‡½æ•°éœ€è¦æ»¡è¶³ä¸¥æ ¼å¼±åºï¼Œå¹¶ä¸”æ’åºå®Œæˆåä»»æ„äº¤æ¢ç›¸é‚»å…ƒç´ éƒ½ä¸ä¼šæ›´ä¼˜ã€‚\nä½¿ç”¨è¿™ç§ç®—æ³•æ—¶ï¼Œä¸€å®šè¦æ³¨æ„ä»¥ä¸Šä¸¤ç‚¹ï¼Œæ‰èƒ½å¾—åˆ°çœŸæ­£æ­£ç¡®çš„ç®—æ³•ã€‚\n æœ€åå†æŠŠæˆ‘å»é›…ç¤¼é›†è®­çš„æ—¶å€™æ°´é¢˜é€‰è®²çš„ slide æ”¾ä¸Šæ¥å¥½äº†..ï¼ˆè¿˜é™„èµ ä¸€é“ç”±ä¹ƒé¢˜ï¼‰\næ°´é¢˜é€‰è®²_ouuan.pdf\n","date":"2018-11-18T08:05:50+08:00","permalink":"https://ouuan.github.io/post/%E6%B5%85%E8%B0%88%E9%82%BB%E9%A1%B9%E4%BA%A4%E6%8D%A2%E6%8E%92%E5%BA%8F%E7%9A%84%E5%BA%94%E7%94%A8%E4%BB%A5%E5%8F%8A%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E9%97%AE%E9%A2%98/","tags":["è´ªå¿ƒ","åºç†è®º"],"title":"æµ…è°ˆé‚»é¡¹äº¤æ¢æ’åºçš„åº”ç”¨ä»¥åŠéœ€è¦æ³¨æ„çš„é—®é¢˜"},{"categories":["æ¸¸è®°"],"contents":"Day1 T1 ç§¯æœ¨å¤§èµ› NOIp2013D2T1\u0026hellip;..çœ‹åˆ°çš„æ—¶å€™æˆ‘è¿˜ä»¥ä¸ºæˆ‘è®°é”™äº†ï¼Œä»¥ä¸ºåŸé¢˜æ˜¯ä¸€æ¬¡å¯ä»¥éšä¾¿åŠ ï¼Œè¿™é¢˜åªèƒ½åŠ ä¸€ï¼Œå‡ºè€ƒåœºåæŸ¥äº†ä¸‹å‘ç°ä¸€æ¨¡ä¸€æ ·ã€‚\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; using namespace std; const int N=100010; int n,d[N],ans; int main() { int i; scanf(\u0026quot;%d\u0026quot;,\u0026amp;n); for (i=1;i\u0026lt;=n;++i) { scanf(\u0026quot;%d\u0026quot;,d+i); if (d[i]\u0026gt;d[i-1]) { ans+=d[i]-d[i-1]; } } cout\u0026lt;\u0026lt;ans; return 0; }  T2 è´§å¸ç³»ç»Ÿ å»æ‰å¯ä»¥ç”±å…¶å®ƒè´§å¸æ‹¼æˆçš„è´§å¸ï¼Œè¿™ä¸ªç»“è®ºå€’æ˜¯å¾ˆå¿«çŒœåˆ°äº†ã€‚ä½†ç”±äºxkdyhç•™ä¸‹çš„é˜´å½±ï¼Œä¸€å¼€å§‹æˆ‘è¿˜å†™äº†ä¸ªexgcd\u0026hellip;å¹¸å¥½å¤§æ ·ä¾‹æ¯”è¾ƒè‰¯å¿ƒï¼Œæœ‰ä¸€ç»„æ•°æ®æ˜¯ä¸‰ç§è´§å¸æ‹¼æˆå¦ä¸€ç§ã€‚ç„¶åå†ä»”ç»†ä¸€çœ‹ï¼Œå‘ç°æ˜¯ä¸ªå®Œå…¨èƒŒåŒ…\u0026hellip;\nç®€å•è¯æ˜ä¸€ä¸‹ï¼š\nç»“è®ºï¼šå¯¹äºä¸€ä¸ªæ²¡æœ‰ä»»ä½•ä¸€ç§è´§å¸å¯ä»¥ç”±ç³»ç»Ÿå†…å…¶å®ƒè´§å¸æ‹¼æˆçš„è´§å¸ç³»ç»Ÿ $(n,A)$ï¼Œä¸å…¶ç­‰ä»·çš„è´§å¸ç³»ç»Ÿ $(m,B)$ åªèƒ½æ˜¯ $(n,A)$ è‡ªèº«æˆ–è€…åŠ ä¸Šä¸€äº›èƒ½ç”± $(n,A)$ è¡¨ç¤ºçš„æ•°ã€‚\nè‹¥ $A\\not\\subseteq B$ï¼Œä»»å– $t\\in (A-B)$ï¼Œé‚£ä¹ˆåœ¨ $B$ ä¸­å¿…ç„¶æœ‰ä¸€äº›å…ƒç´ èƒ½å¤Ÿæ‹¼æˆ $t$ï¼Œè€Œè¿™äº›å…ƒç´ åœ¨ $A$ ä¸­å¿…ç„¶æœ‰ä¸èƒ½è¡¨ç¤ºçš„ï¼ˆå¦åˆ™ä¸ $A$ ä¸­æ²¡æœ‰ä»»ä½•ä¸€ç§è´§å¸å¯ä»¥ç”±ç³»ç»Ÿå†…å…¶å®ƒè´§å¸æ‹¼æˆçŸ›ç›¾ï¼‰ï¼Œè€Œå­˜åœ¨ $(m,B)$ èƒ½è¡¨ç¤ºè€Œ $(n,A)$ ä¸èƒ½è¡¨ç¤ºçš„æ•°ä¸ $(n,A),(m,B)$ ç­‰ä»·çŸ›ç›¾ï¼Œä¸æˆç«‹ã€‚\nè‹¥ $B$ ä¸­æœ‰ $(n,A)$ æ‰€ä¸èƒ½è¡¨ç¤ºçš„å…ƒç´ ï¼Œä¾ç„¶ä¸ $(n,A),(m,B)$ ç­‰ä»·çŸ›ç›¾ï¼Œä¸æˆç«‹ã€‚\næ‰€ä»¥å‘½é¢˜å¾—è¯ã€‚\næ’ä¸ªåºç„¶åå®Œå…¨èƒŒåŒ…å»æ‰èƒ½è¢«ç³»ç»Ÿå†…å…¶å®ƒè´§å¸è¡¨ç¤ºçš„è´§å¸å³å¯ã€‚\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; int t,n,a[110],maxx; bool f[25010]; int main() { int i,j,ans; scanf(\u0026quot;%d\u0026quot;,\u0026amp;t); while (t--) { scanf(\u0026quot;%d\u0026quot;,\u0026amp;n); ans=n; maxx=0; for (i=1;i\u0026lt;=n;++i) { scanf(\u0026quot;%d\u0026quot;,a+i); maxx=max(maxx,a[i]); } sort(a+1,a+n+1); memset(f,false,sizeof(f)); f[0]=true; for (i=1;i\u0026lt;=n;++i) { if (f[a[i]]) { --ans; continue; } for (j=0;j+a[i]\u0026lt;=maxx;++j) { if (f[j]) { f[j+a[i]]=true; } } } printf(\u0026quot;%d\\n\u0026quot;,ans); } return 0; }  T3 èµ›é“ä¿®å»º çœ‹åˆ°è¿™é¢˜å°±æƒ³èµ·äº†ylhå½“æ—¶è·Ÿæˆ‘ä¸€ä¸ªæˆ¿é—´çš„æ—¶å€™åˆ‡æ‰çš„ CF div.2 Eï¼Œä½†èµ›åå‘ç°ä¸ä¸€æ ·\u0026hellip;\nå‡ºè€ƒåœºå¾—çŸ¥dewã€ylhéƒ½åˆ‡æ‰äº†è¿™é¢˜ï¼Œç„¶è€Œæˆ‘åªå†™äº†ç›´å¾„ã€é“¾å’ŒèŠèŠ±å›¾çš„ $55$ åˆ†\u0026hellip;å‡‰å‡‰å‡‰\nDay2 T1 æ—…è¡Œ ä¸€å¼€å§‹çœ‹é”™é¢˜äº†ï¼Œä»¥ä¸ºæ˜¯æœ€å°å­—å…¸åºç”Ÿæˆæ ‘ï¼Œè¿˜åœ¨æƒ³ä¸ºä»€ä¹ˆ $m$ è¿™ä¹ˆå°..ç„¶åä»”ç»†ä¸€çœ‹é¢˜ï¼Œå‘ç°ä¸€æ¡è¾¹åªèƒ½å›æº¯æ—¶é‡å¤ç»è¿‡ï¼Œä¹Ÿå°±æ˜¯æœ€åå¾—åˆ°çš„åºåˆ—åªèƒ½æ˜¯ä¸ªdfsåº\u0026hellip;æ•°æ®èŒƒå›´å¾ˆå°ï¼Œæ‰€ä»¥å°±æšä¸¾æ–­è¾¹å†™äº†ä¸ª $O(n^2)$ çš„ï¼Œé¢„å¤„ç†è¾¹æ’åºã€‚ç„¶åå‡ºè€ƒåœºå¬ä¸€å †dalaoåœ¨é‚£è¯´å„ç§ $O(nlogn)$ï¼Œ$O(n)$ åšæ³•\u0026hellip;éƒ½ä¸ä¼šQAQ\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;algorithm\u0026gt; #include \u0026lt;cstring\u0026gt; using namespace std; const int N=5010; void dfs(int u); int n,m,cut,a[N][N],tot,e[N][2]; bool vis[N],used[N]; //usedç”¨äºå¯¹mä¸ªå­—å…¸åºå–minï¼Œè‹¥used[i]=trueè¯´æ˜æ–­å¼€ç¬¬ i æ¡è¾¹æ—¶ä¸€å®šä¸æ˜¯ç­”æ¡ˆ vector\u0026lt;int\u0026gt; g[N]; int main() { int i,j,u,v,minn; scanf(\u0026quot;%d%d\u0026quot;,\u0026amp;n,\u0026amp;m); for (i=0;i\u0026lt;m;++i) { scanf(\u0026quot;%d%d\u0026quot;,\u0026amp;u,\u0026amp;v); e[i][0]=u; e[i][1]=v; g[u].push_back(v); g[v].push_back(u); } for (i=1;i\u0026lt;=n;++i) { sort(g[i].begin(),g[i].end()); } if (n==m) { for (cut=0;cut\u0026lt;m;++cut) { memset(vis,false,sizeof(vis)); tot=0; dfs(1); if (tot\u0026lt;n) { used[cut]=true; } } for (i=1;i\u0026lt;=n;++i) { minn=n; for (j=0;j\u0026lt;m;++j) { if (!used[j]\u0026amp;\u0026amp;a[j][i]\u0026lt;minn) { minn=a[j][i]; } } for (j=0;j\u0026lt;m;++j) { if (a[j][i]\u0026gt;minn) { used[j]=true; } } printf(\u0026quot;%d\u0026quot;,minn); if (i\u0026lt;n) { putchar(' '); } } } else { cut=m; dfs(1); for (i=1;i\u0026lt;=n;++i) { printf(\u0026quot;%d\u0026quot;,a[m][i]); if (i\u0026lt;n) { putchar(' '); } } } return 0; } void dfs(int u) { if (vis[u]) { return; } vis[u]=true; a[cut][++tot]=u; int v,i; for (i=0;i\u0026lt;g[u].size();++i) { v=g[u][i]; if ((u!=e[cut][0]||v!=e[cut][1])\u0026amp;\u0026amp;(u!=e[cut][1]||v!=e[cut][0])) { dfs(v); } } }  T2 å¡«æ•°æ¸¸æˆ è¦æ˜¯æ•°æ®èŒƒå›´ç»™åˆ° $10^9$ æˆ‘å°±ä¸ä¼šåœ¨è€ƒåœºä¸Šæ¨åŠå¤©äº†\u0026hellip;ä¸€å¼€å§‹æƒ³äº†å¥½ä¹…æ€ä¹ˆ $O(nm)$ dpï¼Œè™½ç„¶æ²¡æƒ³å‡ºæ¥æ€ä¹ˆåšï¼Œä½†å‘ç°äº†æš´åŠ›æ€ä¹ˆå†™ï¼šä¸€ç§æ–¹æ¡ˆåˆæ³•ç­‰ä»·äºï¼šå¯¹äºæ¯ä¸ªç‚¹ï¼Œå®ƒå³è¾¹çš„ç‚¹å…ˆå¾€ä¸‹å†å¾€å³çš„è·¯å¾„å°äºå®ƒä¸‹é¢çš„ç‚¹å…ˆå¾€å³å†å¾€ä¸‹çš„è·¯å¾„ã€‚å› ä¸ºè¿™ä¸¤æ¡è·¯å¾„åˆ†åˆ«æ˜¯ä¸€ä¸ªç‚¹å‘å³èµ°åæœ€å¤§çš„è·¯å¾„å’Œå‘ä¸‹èµ°åæœ€å°çš„è·¯å¾„ã€‚ç„¶åæ‰“äº†ä¸ªè¡¨ï¼Œå‘ç° $(n,m)=(n,n+1)\\times 3^{m-n-1} (n\\ge 2,m\\ge n+1)$ã€‚äºæ˜¯å¼€å§‹è·‘ $(8,9)$ ï¼Œè·‘åˆ°11:50 è¿˜æ²¡è·‘å‡ºæ¥\u0026hellip;å¹¸å¥½å‘ç°äº† $(n,n)$ å’Œ $(n,n+1)$ ä¹‹é—´ä¹Ÿæœ‰ä¸€å®šçš„è§„å¾‹ï¼ŒæŠŠ $(8,9)$ ç®—å‡ºæ¥äº†\u0026hellip;\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; const long long Ans[9][10]={{0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0,0,0,0}, {0,4,12,36,0,0,0,0,0,0}, {0,8,36,112,336,0,0,0,0,0}, {0,16,108,336,912,2688,0,0,0,0}, {0,32,324,1008,2688,7136,21312,0,0,0}, {0,64,972,3024,8064,21312,56768,170112,0,0}, {0,128,2916,9072,24192,63936,170112,453504,1360128,0}, {0,256,8748,27216,72576,191808,510336,1360128,3626752,10879488}}; //å…¶å®æœ‰ä¸€éƒ¨åˆ†è¡¨æ˜¯ä¸å¿…è¦ï¼ˆæ²¡æœ‰æ„ä¹‰ï¼‰çš„... const long long M=1000000007; long long n,m,ans=1; int main() { int i; cin\u0026gt;\u0026gt;n\u0026gt;\u0026gt;m; if (n\u0026gt;m) { swap(n,m); } if (n==1) { for (i=30;i\u0026gt;=0;--i) { ans=ans*ans%M; if (m\u0026amp;(1\u0026lt;\u0026lt;i)) { ans=ans*2%M; } } cout\u0026lt;\u0026lt;ans; } else { if (m\u0026lt;=n+1) { cout\u0026lt;\u0026lt;Ans[n][m]; return 0; } else { for (i=30;i\u0026gt;=0;--i) { ans=ans*ans%M; if ((m-n-1)\u0026amp;(1\u0026lt;\u0026lt;i)) { ans=ans*3%M; } } cout\u0026lt;\u0026lt;ans*Ans[n][n+1]%M; } } return 0; }  T3 ä¿å«ç‹å›½ æ®è¯´æ˜¯ddp\u0026hellip;è€ƒåœºä¸Šå…ˆ10minå†™äº†44åˆ†ï¼ˆä¸€å¼€å§‹è¿˜ä»¥ä¸ºæ˜¯55åˆ†Orzï¼‰ï¼Œç„¶åçœ‹äº†ä¸‹ï¼Œè§‰å¾—B1æŒºå¯å†™çš„ï¼Œæ›´æ–°å‘ä¸Šçš„é“¾è²Œä¼¼å°±å¯ä»¥äº†ï¼Œä½†æœ€åæ²¡è°ƒå‡ºæ¥..\n Day7 ä¸Šï¼ˆtuiï¼‰äº†ä¸€ä¸ªæ˜ŸæœŸçš„whk..ä¸ªé¬¼å•Šï¼Œä¸‰å¤©åœ¨è€ƒæœŸä¸­ï¼Œå°±ä¸Šäº†ä¸¤å¤©whkã€‚æ„Ÿè§‰ä»é›¶å¼€å§‹çš„whkæ²¡æœ‰æƒ³è±¡ä¸­é‚£ä¹ˆææ€–\u0026hellip;\nä¸€å‘¨ä¸è®©å»æœºæˆ¿ï¼Œä¸€åˆ°å®¶å°±åœ¨æ´›è°·ä¸Šæµ‹äº†ä¸€ä¸‹å…¬å¸ƒçš„ä»£ç .å…¶å®ƒé¢˜éƒ½å’Œé¢„ä¼°çš„ä¸€æ ·ï¼ŒD2T1å¯èƒ½ä¼šè¢«å¡å¸¸ï¼Œæ´›è°·ä¸Šå¼€äº†O2æœ€æ…¢ç‚¹ $0.9s$ ï¼Œè€Œä¸”ä¸ç”¨vectorå¥½åƒä¹Ÿè¿‡ä¸äº†ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æ´›è°·ä¸Šå†…å­˜å¼€å°äº†çš„åŸå› \u0026hellip;\nD1T3å¤§ä¼—ACé¢˜æˆ‘çˆ†èŠï¼ˆèŠ±å›¾ï¼‰äº†\u0026hellip; å¹¸å¥½èŠèŠ±å›¾çš„æ•°æ®åˆ†æ²»æ”¾åœ¨äº†æœ€åé¢ï¼Œè¿˜æœ‰ $40$ åˆ†ã€‚å‘ç°è‡ªå·±å‚»äº†ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆä¼šè®¤ä¸ºåªæœ‰æœ€çŸ­çš„ä¸¤æ¡è¾¹å¯ä»¥æ‹¼åœ¨ä¸€èµ·ï¼Œå…¶å®ƒè¾¹éƒ½åªèƒ½è‡ªæˆä¸€æ¡é“\u0026hellip;\u0026hellip;.\nå¬è¯´D2T3ä¸ç”¨ddpï¼Œè¿˜æ˜¯æˆ‘å¤ªèœäº†\u0026hellip;\nä¼°åˆ†ï¼š$100+100+40+88/100+100+44=472/484$\n Day10 GGFå’•å’•å’•ï¼Œç„¶è€Œæˆ‘æŠŠä¸¤ä¸ªT3å†™äº†ä¸€ä¸‹..\nD1T3çœŸçš„å¥½ç®€å•\u0026hellip;äºŒåˆ†ç­”æ¡ˆï¼Œcheckçš„æ—¶å€™dfså¤„ç†æ¯æ£µå­æ ‘å¹¶è¿”å›å—æ•°æœ€å¤šæ—¶æœ€å¤§å‰©ä½™ï¼Œå…·ä½“å°±æ˜¯æŠŠå­æ ‘è¿”å›å€¼æ’ä¸ªåºï¼ŒåŒæŒ‡é’ˆé…å¯¹å¾—åˆ°æœ€å¤šå—æ•°ï¼Œç„¶åä»æœ€åä¸€ä¸ªé…å¯¹çš„å·¦æŒ‡é’ˆå¼€å§‹å¾€å‰è¿™ä¹ˆå¤šä¸ªä¾æ¬¡é…å¯¹ï¼Œæœ€åçœ‹å‰©ä¸‹çš„æ²¡é…å¯¹çš„é‡Œé¢æœ€å¤§çš„æ˜¯å¤šå°‘ã€‚ï¼ˆç¬¬äºŒå¤©æ¢æˆCCFæ•°æ®å‘ç°åšæ³•æŒ‚äº†ï¼‰å¤„ç†å­æ ‘çš„æ—¶å€™äºŒåˆ†è¿”å›å€¼ä¸å½±å“å¤æ‚åº¦ä½†èƒ½ä¿è¯æ­£ç¡®æ€§ã€‚\nD2T3åšæ³•æŒºæœ‰è¶£çš„..å€å¢é¢˜åšå°‘äº†ï¼Œä¼°è®¡åšå¤šäº†å°±æ¯”è¾ƒå¥—è·¯äº†\u0026hellip;é¢„å¤„ç†å‡º $f[u][1],f[u][0],g[u][1],g[u][0]$ï¼Œåˆ†åˆ«ä»£è¡¨é€‰/ä¸é€‰ $u$ æ—¶ å­æ ‘ $u$ ç­”æ¡ˆï¼Œé€‰/ä¸é€‰ $u$ æ—¶ $u$ å¾€ä¸Šï¼ˆæ•´é¢—æ ‘å‡å»å­æ ‘ $u$ï¼‰çš„ç­”æ¡ˆã€‚å€å¢å¤„ç†å‡ºç¥–å…ˆ $fa[u][i]$ è¡¨ç¤º $u$ çš„ $2^i$ ç¥–å…ˆï¼Œç”¨ $bz[u][i][0/1][0/1]$ è¡¨ç¤ºå­æ ‘ $fa[u][i]$ é™¤å»å­æ ‘ $u$ ï¼Œå…¶ä¸­ $u$ é€‰/ä¸é€‰ï¼Œ$fa[u][i]$ é€‰/ä¸é€‰çš„ç­”æ¡ˆï¼Œå¯ä»¥åœ¨dfsé¢„å¤„ç† f å’Œ g çš„åŒæ—¶ç®—å‡º $bz[u][0][0/1][0/1]$ ï¼Œç„¶åï¼š\n$$bz[u][i][a][b]=\\min(bz[u][i-1][a][0]+bz[fa[u][i-1]][i-1][0][b],bz[u][i-1][a][1]+bz[fa[u][i-1]][i-1][1][b])$$\nè®¡ç®—ç­”æ¡ˆçš„æ—¶å€™å¦‚æœæ˜¯ç¥–å…ˆå…³ç³»ç›´æ¥å€å¢è®¡ç®—é“¾ä¸Šç­”æ¡ˆï¼Œå†åŠ ä¸Šå­æ ‘çš„ f å’Œ ç¥–å…ˆä¸Šæ–¹çš„ gï¼›å¦åˆ™å€å¢åˆ° $lca$ è®¡ç®—è·¯å¾„ä¸Šçš„ç­”æ¡ˆï¼Œä¸¤æ£µå­æ ‘ä»¥åŠ $lca$ ä¸Šæ–¹çš„ç­”æ¡ˆå°±æ˜¯å¯¹åº”çš„ $f$ å’Œ $g$ ã€‚ç„¶åå†™åˆ° $22:15$ï¼Œäº¤ä¸Šå» $68$ åˆ†ï¼Œå›å¯å®¤\u0026hellip;abç›¸é‚»çš„ $16$ åˆ†çœŸçš„å¥½ç®€å•ï¼Œä¸ç”¨å€å¢ï¼Œè€ƒåœºä¸Šåº”è¯¥å†™å‡ºæ¥çš„\u0026hellip;\n Day11 åˆšåˆ°å­¦æ ¡å¬è¯´è‡ªå·± $480$ ï¼Œè¿˜åœ¨æƒ³8700kè¿™ä¹ˆå¼ºï¼Œèƒ½æŠŠæˆ‘çš„ travel å¡æˆ $96$ \u0026hellip;\nä¸­åˆä¸€çœ‹æ˜¯ $489$ï¼Œæ•°æ®çœŸæœ‰è¶£\u0026hellip;D1T3 éš”å£åŸ $95$ å˜æˆ $80$ï¼Œæˆ‘æ˜¨å¤©Açš„å˜æˆ $90$ äº†ï¼Œè€ƒåœºå†™çš„è¿˜éª—åˆ°äº† $5$ åˆ†ï¼ˆ$45$ï¼‰\u0026hellip;8700kå¤©ä¸‹ç¬¬ä¸€ï¼\n Day25 å’•å’•å’•å’•å’•ï¼Œ$\\mathrm{CN}$ $329$ã€‚\n","date":"2018-11-11T14:52:37+08:00","permalink":"https://ouuan.github.io/post/noip2018%E6%8F%90%E9%AB%98%E7%BB%84%E6%B8%B8%E8%AE%B0/","tags":["CCFç³»åˆ—èµ›äº‹"],"title":"NOIp2018æé«˜ç»„æ¸¸è®°"},{"categories":["é¢˜è§£"],"contents":"æˆ‘å†™çš„è«é˜Ÿæ•™ç¨‹\nå…¶å®è¿™æ˜¯ä¸€é“bzojä¸Šçš„é¢˜ï¼ˆbzoj2639ï¼Œè²Œä¼¼æ˜¯æƒé™é¢˜ï¼Œåæ­£æˆ‘çœ‹ä¸äº†ï¼‰ï¼Œåœ¨YALIåšæ¨¡æ‹Ÿèµ›çš„æ—¶å€™é‡åˆ°äº†.\nç„¶ååœ¨ç½‘ä¸ŠæŸ¥åˆ°äº†å‡ ç¯‡å…³äºè¿™é“é¢˜çš„åšå®¢ï¼Œéƒ½å’Œæˆ‘çš„åšæ³•ç•¥æœ‰ä¸åŒ\u0026hellip;\né¢˜ç›®å¤§æ„ ç»™ä½ ä¸€ä¸ª $r*c$ çš„çŸ©é˜µï¼Œæ¯ä¸ªç‚¹æœ‰ä¸€ä¸ªé¢œè‰²ï¼Œ $m$ ä¸ªè¯¢é—®ï¼Œæ¯æ¬¡è¯¢é—®ä¸€ä¸ªå­çŸ©é˜µå†…ï¼Œæ¯ç§é¢œè‰²å‡ºç°æ¬¡æ•°çš„å¹³æ–¹å’Œã€‚\n$r,c\\le 200,m\\le 100000$\nåšæ³•ç®€è¿° é¦–å…ˆæˆ‘ä»¬è¦æ˜ç™½ï¼Œè«é˜Ÿç©¶ç«Ÿåœ¨å¹²ä»€ä¹ˆã€‚\nè«é˜Ÿå…¶å®å°±æ˜¯å‡ ä¸ªæŒ‡é’ˆåœ¨é‚£è·³æ¥è·³å»ï¼Œæ¯è·³ä¸€æ­¥éƒ½éœ€è¦ä¸€å®šçš„æ—¶é—´ï¼Œé€šè¿‡å¯¹è¯¢é—®æ’åºä½¿å¾—æŒ‡é’ˆè·³çš„æ€»æ¬¡æ•°å°½é‡å°ã€‚\næ‰€ä»¥ï¼Œè¿™é¢˜ä¸­è¯¢é—®ä¸º $(x_1,y_1,x_2,y_2)$ ï¼Œä¹Ÿå°±æ˜¯å››ä¸ªæŒ‡é’ˆåœ¨é‚£è·³ï¼Œåˆ†åˆ«åˆ†å—å†æ’åºå°±å¯ä»¥äº†ï¼Œå³ï¼š\n//ä¸ºé¿å…å’Œcmathåº“ä¸­çš„y0y1é‡åï¼Œä¸‹æ–‡ä¸­ä»£ç å†…çš„x1,y1,x2,y2éƒ½ç”¨x,y,xx,yyä»£æ›¿ struct Query { int x,y,xx,yy,id; bool operator\u0026lt;(Query\u0026amp; b) { return x/B==b.x/B?(y/B==b.y/B?(xx/B==b.xx/B?yy\u0026lt;b.yy:xx\u0026lt;b.xx):y\u0026lt;b.y):x\u0026lt;b.x; //Bä¸ºåˆ†å—å¤§å° } } q[M];  ç­”æ¡ˆæ›´æ–° ä¸€èˆ¬çš„è«é˜Ÿéƒ½æ˜¯ $O(1)$ æ›´æ–°ç­”æ¡ˆçš„ï¼Œç„¶è€Œè¿™é¢˜æ˜¯ $O(n)$ ï¼ˆç”¨ $n$ ä»£è¡¨ $r,c$ ï¼‰ æ›´æ–°ã€‚\nç§»åŠ¨æŒ‡é’ˆçš„æ—¶å€™ï¼ŒæŠŠä¸€æ’ä¸€èµ·ä¿®æ”¹ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ8ä¸ªwhileçš„é¡ºåºå¦‚æœæ’åˆ—ä¸å½“åœ¨æŸäº›æƒ…å†µä¸‹ä¼šå¯¼è‡´ç­”æ¡ˆå‡ºé”™ï¼Œæ‰€ä»¥æœ€å¥½æ˜¯å°†æ‰€æœ‰addéƒ½æ”¾åœ¨delå‰é¢ï¼ˆå®é™…ä¸Šæœ‰å¤šç§æ’åˆ—é¡ºåºéƒ½å¯ä»¥åœ¨ä¸è¿›è¡Œâ€œåæ“ä½œâ€çš„æƒ…å†µä¸‹ä¿è¯ç­”æ¡ˆæ­£ç¡®ï¼Œæ‰€æœ‰addæ”¾åœ¨delå‰é¢åªæ˜¯å…¶ä¸­ä¸€ç§ï¼‰ï¼Œæˆ–è€…æ˜¯å¯¹â€œååŒºé—´â€è¿›è¡Œâ€œåæ“ä½œâ€ã€‚\næ‰€è°“â€œååŒºé—´â€ï¼Œå¦‚ï¼šä¿®æ”¹ $x_1$ æŒ‡é’ˆæ—¶ï¼Œæœ¬åº”è¿›è¡Œaddæ“ä½œï¼Œè€Œæ­¤æ—¶$y_1\u0026gt;y_2+1$ï¼Œé‚£ä¹ˆå°±è¦å°† $(y_2,y_1)$ è¿™ä¸ªå¼€åŒºé—´å†…çš„æ‰€æœ‰ç‚¹è¿›è¡Œdelã€‚\nwhileçš„æ’åˆ—é¡ºåºå¾—å½“å¯ä»¥ä½¿â€œååŒºé—´â€ä¸å¯èƒ½å‡ºç°ã€‚\nâ€œåæ“ä½œâ€å‚è€ƒä»£ç ï¼š\nwhile (x\u0026lt;q[i].x) { for (j=y;j\u0026lt;=yy;++j) { del(a[x][j]); } for (j=yy+1;j\u0026lt;y;++j) { add(a[x][j]); } ++x; } while (y\u0026lt;q[i].y) { for (j=x;j\u0026lt;=xx;++j) { del(a[j][y]); } for (j=xx+1;j\u0026lt;x;++j) { add(a[j][y]); } ++y; } while (xx\u0026gt;q[i].xx) { for (j=y;j\u0026lt;=yy;++j) { del(a[xx][j]); } for (j=yy+1;j\u0026lt;y;++j) { add(a[xx][j]); } --xx; } while (yy\u0026gt;q[i].yy) { for (j=x;j\u0026lt;=xx;++j) { del(a[j][yy]); } for (j=xx+1;j\u0026lt;x;++j) { add(a[j][yy]); } --yy; } while (x\u0026gt;q[i].x) { --x; for (j=y;j\u0026lt;=yy;++j) { add(a[x][j]); } for (j=yy+1;j\u0026lt;y;++j) { del(a[x][j]); } } while (y\u0026gt;q[i].y) { --y; for (j=x;j\u0026lt;=xx;++j) { add(a[j][y]); } for (j=xx+1;j\u0026lt;x;++j) { del(a[j][y]); } } while (xx\u0026lt;q[i].xx) { ++xx; for (j=y;j\u0026lt;=yy;++j) { add(a[xx][j]); } for (j=yy+1;j\u0026lt;y;++j) { del(a[xx][j]); } } while (yy\u0026lt;q[i].yy) { ++yy; for (j=x;j\u0026lt;=xx;++j) { add(a[j][yy]); } for (j=xx+1;j\u0026lt;x;++j) { del(a[j][yy]); } } out[q[i].id]=ans;  åˆ†å—å¤§å° å…·ä½“è®¡ç®—æ¸…æ¥šéå¸¸å¤æ‚ï¼Œè¿™é‡Œåªæ˜¯ä¼°ç®—ä¸€ä¸‹.\n$x_1$ æŒ‡é’ˆçš„ç§»åŠ¨æ¬¡æ•°ä¸º $O(mB)$ï¼Œ$y_2$ æŒ‡é’ˆçš„ç§»åŠ¨æ¬¡æ•°æ¸è¿›å¤æ‚åº¦ä¸­å«æœ‰ $O\\left(\\frac{n^4}{B^3}\\right)$ï¼Œå– $mB=\\frac{n^4}{B^3}$ï¼Œå¾—åˆ° $B=nm^{-\\frac{1}{4}}$\næ€»æ—¶é—´å¤æ‚åº¦ä¸º $O(mlogm+n^2m^{\\frac{3}{4}})$\nåæ­£è¿™æ ·çš„åˆ†å—å¤§å°å®æµ‹æ¯” $\\sqrt{n}$ ä¼˜ç§€\u0026hellip;æœ‰å…´è¶£çš„è¯å¯ä»¥ä¸¥è°¨åœ°ç®—ä¸€ç®—ï¼ˆå¦‚æœå‘ç°æˆ‘è¿™ä¸ªä¼°ç®—æœ‰é—®é¢˜å¯ä»¥ç›´æ¥åœ¨è¿™ç¯‡åšå®¢ä¸‹è¯„è®ºï¼‰\nåˆå§‹å­çŸ©é˜µ ä»»æ„ä¸€ä¸ªç©ºçŸ©é˜µå°±å¯ä»¥äº†ï¼Œå¦‚ $x_1=y_1=1,x_2=y_2=0$\nå‚è€ƒä»£ç  #include \u0026lt;cstdio\u0026gt; #include \u0026lt;iostream\u0026gt; #include \u0026lt;algorithm\u0026gt; #include \u0026lt;cmath\u0026gt; using namespace std; const int N=210; const int M=100010; void add(int x); void del(int x); int r,c,m,B,a[N][N],lsh[N*N],tot,cnt[N*N],ans,out[M]; struct Query { int x,y,xx,yy,id; bool operator\u0026lt;(Query\u0026amp; b) { return x/B==b.x/B?(y/B==b.y/B?(xx/B==b.xx/B?yy\u0026lt;b.yy:xx\u0026lt;b.xx):y\u0026lt;b.y):x\u0026lt;b.x; } } q[M]; int main() { int i,j,x=1,y=1,xx=0,yy=0; cin\u0026gt;\u0026gt;r\u0026gt;\u0026gt;c\u0026gt;\u0026gt;m; B=pow(r*c,0.5)/pow(m,0.25)+1.0; for (i=1;i\u0026lt;=r;++i) { for (j=1;j\u0026lt;=c;++j) { cin\u0026gt;\u0026gt;a[i][j]; lsh[tot++]=a[i][j]; //è¿™é¢˜è¦ç¦»æ•£åŒ– } } sort(lsh,lsh+tot); tot=unique(lsh,lsh+tot)-lsh; for (i=1;i\u0026lt;=r;++i) { for (j=1;j\u0026lt;=c;++j) { a[i][j]=lower_bound(lsh,lsh+tot,a[i][j])-lsh; } } for (i=0;i\u0026lt;m;++i) { cin\u0026gt;\u0026gt;q[i].x\u0026gt;\u0026gt;q[i].y\u0026gt;\u0026gt;q[i].xx\u0026gt;\u0026gt;q[i].yy; q[i].id=i; } sort(q,q+m); for (i=0;i\u0026lt;m;++i) { while (x\u0026gt;q[i].x) { --x; for (j=y;j\u0026lt;=yy;++j) { add(a[x][j]); } } while (xx\u0026lt;q[i].xx) { ++xx; for (j=y;j\u0026lt;=yy;++j) { add(a[xx][j]); } } while (y\u0026gt;q[i].y) { --y; for (j=x;j\u0026lt;=xx;++j) { add(a[j][y]); } } while (yy\u0026lt;q[i].yy) { ++yy; for (j=x;j\u0026lt;=xx;++j) { add(a[j][yy]); } } while (x\u0026lt;q[i].x) { for (j=y;j\u0026lt;=yy;++j) { del(a[x][j]); } ++x; } while (xx\u0026gt;q[i].xx) { for (j=y;j\u0026lt;=yy;++j) { del(a[xx][j]); } --xx; } while (y\u0026lt;q[i].y) { for (j=x;j\u0026lt;=xx;++j) { del(a[j][y]); } ++y; } while (yy\u0026gt;q[i].yy) { for (j=x;j\u0026lt;=xx;++j) { del(a[j][yy]); } --yy; } out[q[i].id]=ans; } for (i=0;i\u0026lt;m;++i) { cout\u0026lt;\u0026lt;out[i]\u0026lt;\u0026lt;endl; } return 0; } void add(int x) { ans=ans+2*cnt[x]+1; ++cnt[x]; } void del(int x) { ans=ans-2*cnt[x]+1; --cnt[x]; }  ","date":"2018-10-02T18:23:00+08:00","permalink":"https://ouuan.github.io/post/%E4%BA%8C%E7%BB%B4%E8%8E%AB%E9%98%9F%E8%A7%A3%E9%A2%98%E6%8A%A5%E5%91%8A/","tags":["è«é˜Ÿ"],"title":"äºŒç»´è«é˜Ÿè§£é¢˜æŠ¥å‘Š"},{"categories":["æ¸¸è®°"],"contents":"æƒ³äº†æƒ³ï¼Œåƒä¹‹å‰é‚£æ ·ç®€ç•¥åœ°å™è¿°é¢˜æ„å’Œåšæ³•ï¼Œæ ¹æœ¬æ²¡è®²æ¸…æ¥šï¼Œæ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œè¿˜ä¸å¦‚å†™å†™è‡ªå·±çš„æ„Ÿå—ã€‚\næ„Ÿè§‰YALIçœŸçš„æ˜¯ä¸€æ‰€æŒºä¸é”™çš„å­¦æ ¡å§ã€‚æ€»æ˜¯èƒ½æœ‰ä¸€æœºæˆ¿çš„julaoè½®ç•ªåŠæ‰“ä½ ï¼Œæ€»æ˜¯èƒ½æœ‰é›†è®­é˜Ÿçš„å¥†ä½¬æ¥ç»™ä½ å‡ºdltmã€ç»™ä½ è®²é¢˜ã€‚æ¯å¤©æ”¾å­¦å›é…’åº—çš„è·¯ä¸Šè¿˜èƒ½çœ‹åˆ°æ“åœºä¸Šä¸€ç¾¤ç›®æµ‹æ˜¯ç”°å¾„é˜Ÿä¹‹ç±»çš„åŒå­¦åœ¨åŠªåŠ›åœ°è®­ç»ƒç€ã€‚åˆ°å¤„éƒ½æ´‹æº¢ç€ã€Œé’æ˜¥ã€çš„æ°›å›´ï¼Œåå€’æ˜¯è€å¸ˆè§å¾—å¾ˆå°‘ï¼ˆæˆ–è®¸æ˜¯å›½åº†çš„ç¼˜æ•…å§..ï¼‰ã€‚YALIåœ¨æˆ‘å¿ƒä¸­å·²ç»ä¸æ­¢æ˜¯é‚£ä¸ªåœ¨OIerDbçš„â€œå…¨å›½ä¿¡æ¯å­¦ç«èµ›å­¦æ ¡æ’å2018â€ä¸Šæ’åç¬¬ä¸€çš„å­¦æ ¡äº†ã€‚\nè¿™å‡ å¤©å»æ‰å¤±è¯¯åŸºæœ¬ä¸Šéƒ½èƒ½æ’åœ¨å‰ $20$ï¼Œä½†å…¶ä»–julaoä¹Ÿä¼šå¤±è¯¯ï¼Œæ‰€ä»¥æ˜¯ä¸å­˜åœ¨â€œå¦‚æœæ²¡æœ‰å¤±è¯¯â€çš„\u0026hellip;\næ—¢ç„¶ç”Ÿåœ¨äº†å¼±çœï¼Œå°±æ›´è¦æŠŠçœ¼å…‰æ”¾åœ¨çœå¤–ã€‚OIerDbå­¦æ ¡æ’è¡Œæ¦œ$rank1\\sqrt{}$ï¼ŒOIerDbå­¦æ ¡æ’è¡Œæ¦œ$rank5\\sqrt{}â€‹$ã€‚\nè™½ç„¶å†™çš„å¾ˆçŸ­ï¼Œè¿˜æ˜¯æ¯”ä¹‹å‰å‡ ä¹ä»€ä¹ˆéƒ½æ²¡å†™å¥½å§.\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”ä»¥ä¸Šäº7å·ä¸Šåˆâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\nåˆ°äº†YALIçš„å­¦ç”Ÿä»¬è¿”æ ¡çš„ä¸‹åˆï¼ŒYALIå˜å¾—å’Œå¤–é«˜æ²¡ä»€ä¹ˆä¸¤æ ·äº†\u0026hellip;æˆ–è®¸æ˜¯é‚£äº›å›½åº†è¿˜åœ¨å­¦æ ¡çš„äººä»¬è®©æˆ‘çœ‹åˆ°äº†YALIä¸åŒçš„ä¸€é¢å§.\n","date":"2018-10-01T19:27:01+08:00","permalink":"https://ouuan.github.io/post/2018%E5%9B%BD%E5%BA%86yali%E9%9B%86%E8%AE%AD%E6%B8%B8%E8%AE%B0/","tags":["é›†è®­"],"title":"2018å›½åº†YALIé›†è®­æ¸¸è®°"},{"categories":["çŸ¥è¯†ç‚¹"],"contents":"è¿™å‡ å¤©å­¦ä¹ äº†è«é˜Ÿç®—æ³•ï¼Œè¯•ç€å†™ä¸€ç¯‡æ¯”è¾ƒè¯¦ç»†çš„è«é˜Ÿæ•™ç¨‹å§\u0026hellip;\næ™®é€šè«é˜Ÿ ç®€ä»‹ è«é˜Ÿæ˜¯ä¸€ç§åŸºäºåˆ†å—æ€æƒ³çš„ç¦»çº¿ç®—æ³•ï¼Œç”¨äºè§£å†³åŒºé—´é—®é¢˜ï¼Œé€‚ç”¨èŒƒå›´å¦‚ä¸‹ï¼š\n  åªæœ‰è¯¢é—®æ²¡æœ‰ä¿®æ”¹ã€‚\n  å…è®¸ç¦»çº¿ã€‚\n  åœ¨å·²çŸ¥è¯¢é—® $[l,r]$ ç­”æ¡ˆçš„æƒ…å†µä¸‹å¯ä»¥ $O(1)$ å¾—åˆ° $[l,r-1],[l,r+1],[l-1,r],[l+1,r]$ çš„ç­”æ¡ˆã€‚\n  æ»¡è¶³ä»¥ä¸Šä¸‰ä¸ªæ¡ä»¶å°±å¯ä»¥åœ¨ $O(n\\sqrt{m}+m\\log m)â€‹$ çš„æ—¶é—´å¤æ‚åº¦ä¸‹å¾—åˆ°æ¯ä¸ªè¯¢é—®çš„è§£ã€‚\nç®—æ³•æ€æƒ³ è«é˜Ÿçš„ç²¾é«“å°±åœ¨äºé€šè¿‡å¯¹è¯¢é—®è¿›è¡Œæ’åºï¼Œå¹¶æŠŠè¯¢é—®çš„ç»“æœä½œä¸ºä¸‹ä¸€ä¸ªè¯¢é—®æ±‚è§£çš„åŸºç¡€ï¼Œä½¿å¾—æš´åŠ›æ±‚è§£çš„å¤æ‚åº¦å¾—åˆ°ä¿è¯ã€‚\nä¸Šæ–‡ä¸­â€œé€‚ç”¨èŒƒå›´â€çš„ç¬¬ä¸‰ç‚¹â€œåœ¨å·²çŸ¥è¯¢é—® $[l,r]$ ç­”æ¡ˆçš„æƒ…å†µä¸‹å¯ä»¥ $O(1)$ å¾—åˆ° $[l,r-1],[l,r+1],[l-1,r],[l+1,r]$ çš„ç­”æ¡ˆâ€å³æ˜¯â€œæŠŠè¯¢é—®çš„ç»“æœä½œä¸ºä¸‹ä¸€ä¸ªè¯¢é—®æ±‚è§£çš„åŸºç¡€â€çš„æ–¹æ³•ã€‚\nä¾‹é¢˜è§£æ ä¾‹ï¼š[å›½å®¶é›†è®­é˜Ÿ]å°Zçš„è¢œå­\nåœ¨è¿™é¢˜ä¸­ï¼Œç”¨ $cnt_i$ è¡¨ç¤ºå½“å‰å¤„ç†çš„åŒºé—´å†…é¢œè‰²ä¸ºiçš„è¢œå­å‡ºç°çš„æ¬¡æ•°ï¼Œç”¨ $\\mathrm{len}$ è¡¨ç¤ºå½“å‰å¤„ç†çš„åŒºé—´çš„é•¿åº¦ï¼Œç”¨ $x$ è¡¨ç¤ºæ–°å¢çš„é‚£åªè¢œå­çš„é¢œè‰²ã€‚\nä»¥å·²çŸ¥åŒºé—´ $[l,r]$ çš„ç­”æ¡ˆæ±‚è§£åŒºé—´ $[l,r+1]$ ä¸ºä¾‹ã€‚åˆ†åˆ«å¤„ç†åˆ†å­å’Œåˆ†æ¯ï¼š\n åˆ†æ¯ä¸ºä»»é€‰ä¸¤åªè¢œå­çš„ç»„åˆæ€»æ•°ï¼ŒåŸå…ˆæ˜¯ $\\frac{\\mathrm{len}(\\mathrm{len}-1)}{2}$ï¼Œç°åœ¨æ˜¯ $\\frac{\\mathrm{len}(\\mathrm{len}+1)}{2}$ï¼Œå¢åŠ äº† $\\mathrm{len}$ ã€‚ åˆ†å­ä¸ºä¸¤åªè¢œå­é¢œè‰²ç›¸åŒçš„ç»„åˆæ€»æ•°ï¼Œæ¯”åŸæ¥å¢åŠ äº† $cnt_x$ï¼Œå³æ–°å¢çš„è¿™åªè¢œå­å’ŒåŸæœ¬å°±åœ¨å½“å‰åŒºé—´å†…çš„ç›¸åŒé¢œè‰²çš„è¢œå­çš„ç»„åˆã€‚  å› æ­¤ï¼Œå°†ä¸€åªé¢œè‰²ä¸ºxçš„è¢œå­è®¡å…¥ç­”æ¡ˆçš„å‡½æ•°å°±å¯ä»¥å†™å‡ºæ¥äº†ï¼š\n//fzä»£è¡¨åˆ†å­ï¼Œfmä»£è¡¨åˆ†æ¯ void add(int x) { fz+=cnt[x]; ++cnt[x]; fm+=len; ++len; }  åŒç†å¯ä»¥å†™å‡ºå°†ä¸€åªé¢œè‰²ä¸ºxçš„è¢œå­ç§»å‡ºç­”æ¡ˆçš„å‡½æ•°ï¼š\nvoid del(int x) { --cnt[x]; fz-=cnt[x]; --len; fm-=len; }  äºæ˜¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªæš´åŠ›çš„ç®—æ³•ï¼šç”¨ $l$ å’Œ $r$ åˆ†åˆ«è®°å½•å½“å‰åŒºé—´çš„ä¸¤ä¸ªç«¯ç‚¹ï¼Œç„¶åç”¨ä¸‹é¢è¿™æ®µä»£ç æ¥æ›´æ–°ç­”æ¡ˆï¼ˆq[i].l,q[i].rä»£è¡¨æ­£åœ¨å¤„ç†çš„è¯¢é—®çš„ä¸¤ä¸ªç«¯ç‚¹ï¼Œcol[p]ä»£è¡¨ç¬¬ $p$ åªè¢œå­çš„é¢œè‰²ï¼‰ï¼š\nwhile (l\u0026gt;q[i].l) { add(col[--l]); } while (r\u0026lt;q[i].r) { add(col[++r]); } while (l\u0026lt;q[i].l) { del(col[l++]); } while (r\u0026gt;q[i].r) { del(col[r--]); }  ç„¶è€Œï¼Œè¿™ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(nm)$ çš„ï¼ˆå› ä¸ºæœ€åæƒ…å†µä¸‹æ¯æ¬¡ $l$ å’Œ $r$ ä¸¤ä¸ªæŒ‡é’ˆéƒ½è¦èµ° $O(n)$ çš„è·ç¦»ï¼Œè€Œä¸€å…±æœ‰ $m$ æ¬¡è¯¢é—®ï¼‰ï¼Œå’Œæš´åŠ›å®Œå…¨ä¸€æ ·ç”šè‡³è·‘çš„æ›´æ…¢ã€‚\nä¼˜åŒ–å¤æ‚åº¦ åˆ«å¿˜äº†ï¼Œä¹‹å‰æˆ‘è¯´è¿‡ï¼Œè«é˜Ÿçš„ç²¾é«“å°±åœ¨äºé€šè¿‡å¯¹è¯¢é—®è¿›è¡Œæ’åºï¼Œä½¿å¾—æš´åŠ›æ±‚è§£çš„å¤æ‚åº¦å¾—åˆ°ä¿è¯ã€‚\næˆ‘ä»¬çš„ç›®çš„æ˜¯ä½¿ $l$ å’Œ $r$ ä¸¤ä¸ªæŒ‡é’ˆèµ°è¿‡çš„æ€»è·ç¦»å°½é‡çš„å°ï¼Œè¿™æ—¶å€™å°±è¦ç”¨åˆ°åˆ†å—çš„æ€æƒ³äº†ã€‚\næŠŠæ•´ä¸ªåŒºé—´ $[1,n]$ åˆ†æˆè‹¥å¹²å—ï¼Œä»¥è¯¢é—®çš„å·¦ç«¯ç‚¹æ‰€åœ¨å—ä¸ºç¬¬ä¸€å…³é”®å­—ï¼Œä»¥è¯¢é—®çš„å³ç«¯ç‚¹å¤§å°ä¸ºç¬¬äºŒå…³é”®å­—ï¼Œå¯¹è¯¢é—®è¿›è¡Œæ’åºï¼Œé‚£ä¹ˆï¼š\n å¯¹äºåŒä¸€å—çš„è¯¢é—®ï¼Œ$l$ æŒ‡é’ˆæ¯æ¬¡æœ€å¤šç§»åŠ¨å—çš„å¤§å°ï¼Œ$r$ æŒ‡é’ˆçš„ç§»åŠ¨åˆ™æ˜¯å•è°ƒçš„ï¼Œæ€»å…±ç§»åŠ¨æœ€å¤š $n$ ã€‚ å¯¹äºä¸åŒå—çš„è¯¢é—®ï¼Œ$l$ æ¯æ¬¡æ¢å—æ—¶æœ€å¤šç§»åŠ¨ä¸¤å€å—çš„å¤§å°ï¼Œ $r$ æ¯æ¬¡æ¢å—æ—¶æœ€å¤šç§»åŠ¨ $n$ ã€‚  æ€»ç»“ï¼šï¼ˆç”¨ $B$ è¡¨ç¤ºå—çš„å¤§å°ï¼‰$l$ æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ $O(B)$ï¼Œ$r$ æŒ‡é’ˆæ¯å—ç§»åŠ¨ $O(n)â€‹$ ã€‚\næ‰€ä»¥ï¼š\n $l$ çš„ç§»åŠ¨æ¬¡æ•°æœ€å¤šä¸ºè¯¢é—®æ•° $\\times$ å—çš„å¤§å°ï¼Œå³ $O(mB)$ ã€‚ $r$ çš„ç§»åŠ¨æ¬¡æ•°æœ€å¤šä¸ºå—çš„ä¸ªæ•° $\\times$ æ€»åŒºé—´å¤§å°ï¼Œå³ $O(n^2/B)$ ã€‚  å› æ­¤ï¼Œæ€»ç§»åŠ¨æ¬¡æ•°ä¸º $O(mB+n^2/B)$ ã€‚\n å®é™…ä¸Šï¼Œâ€œæ¢å—â€è¿™ä¸€äº‹ä»¶å‘ç”Ÿçš„æ¬¡æ•°å¹¶ä¸å¤šï¼Œå› æ­¤å³ä¾¿æ¢å—å¤æ‚åº¦è¾¾åˆ° $\\mathcal O(n)$ ä¹Ÿæ˜¯ä¸ä¼šå½±å“å¤æ‚åº¦çš„ã€‚åªä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹å—æ˜¯ç›¸é‚»çš„ï¼Œæ¢å—å¤æ‚åº¦å°±æ¯”è¾ƒå°ã€‚\nâ€”â€” update on 2019.7.27\n æ²¡é”™ï¼Œè¿™å°±æ˜¯ä¸ªåŒå‹¾å‡½æ•°ï¼Œæ‰€ä»¥å½“ $B=\\sqrt{\\frac{n^2}{m}}$ å³ $\\frac{n}{\\sqrt{m}}$ æ—¶å¤æ‚åº¦æœ€å°ï¼Œä¸º $O(n\\sqrt{m})$ ã€‚\nå‰©ä¸‹çš„æœ€åä¸€ä¸ªé—®é¢˜ï¼šåˆå§‹çš„å½“å‰åŒºé—´æ˜¯ä»€ä¹ˆï¼Ÿ\nåªè¦ä»»æ„æŒ‡å®šä¸€ä¸ªç©ºåŒºé—´å°±å¥½äº†ï¼Œå¦‚ $l=1,r=0$ ã€‚\næ‰€ä»¥ï¼Œæ•´ä¸ªè«é˜Ÿç®—æ³•å°±å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š\n  å°†è¯¢é—®è®°å½•ä¸‹æ¥ã€‚\n  ä»¥ $\\frac{n}{\\sqrt{m}}$ ä¸ºå—çš„å¤§å°ï¼Œä»¥è¯¢é—®çš„å·¦ç«¯ç‚¹æ‰€åœ¨å—ä¸ºç¬¬ä¸€å…³é”®å­—ï¼Œä»¥è¯¢é—®çš„å³ç«¯ç‚¹å¤§å°ä¸ºç¬¬äºŒå…³é”®å­—ï¼Œå¯¹è¯¢é—®è¿›è¡Œæ’åºã€‚\n  æš´åŠ›å¤„ç†æ¯ä¸ªè¯¢é—®ã€‚\n  è¾“å‡ºç­”æ¡ˆã€‚\n  æ€»çš„å¤æ‚åº¦ä¸º $O(n\\sqrt{m}+m\\log m)$ ã€‚\nP.S. ç½‘ä¸Šå¾ˆå¤šæ•™ç¨‹è¯´åˆ†å—å¤§å°å– $\\sqrt{n}$ æœ€ä¼˜ï¼Œå¤æ‚åº¦ä¸º $O(n\\sqrt{n})$ï¼Œè¿™æ˜¯ä¸ä¸¥è°¨çš„ï¼Œå½“nã€må·®åˆ«è¾ƒå¤§æ—¶ä½¿ç”¨ $\\sqrt{n}$ ä½œä¸ºåˆ†å—å¤§å°æ•ˆç‡ä¼šæ˜æ˜¾åä½ã€‚\nä¾‹é¢˜ä»£ç  [å›½å®¶é›†è®­é˜Ÿ]å°Zçš„è¢œå­ ACä»£ç ï¼š\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;algorithm\u0026gt; #include \u0026lt;cmath\u0026gt; using namespace std; const int N=50010; void add(int x); void del(int x); int gcd(int a,int b); int n,m,B,fz,fm,len,col[N],cnt[N],ans[N][2]; struct Query { int l,r,id; bool operator\u0026lt;(Query\u0026amp; b) { return l/B==b.l/B?r\u0026lt;b.r:l\u0026lt;b.l; } } q[N]; int main() { int i,l=1,r=0,g; cin\u0026gt;\u0026gt;n\u0026gt;\u0026gt;m; B=n/sqrt(m); for (i=1;i\u0026lt;=n;++i) { cin\u0026gt;\u0026gt;col[i]; } for (i=0;i\u0026lt;m;++i) { cin\u0026gt;\u0026gt;q[i].l\u0026gt;\u0026gt;q[i].r; q[i].id=i; } sort(q,q+m); for (i=0;i\u0026lt;m;++i) { if (q[i].l==q[i].r) { ans[q[i].id][0]=0; ans[q[i].id][1]=1; continue; } while (l\u0026gt;q[i].l) { add(col[--l]); } while (r\u0026lt;q[i].r) { add(col[++r]); } while (l\u0026lt;q[i].l) { del(col[l++]); } while (r\u0026gt;q[i].r) { del(col[r--]); } g=gcd(fz,fm); ans[q[i].id][0]=fz/g; ans[q[i].id][1]=fm/g; } for (i=0;i\u0026lt;m;++i) { printf(\u0026quot;%d/%d\\n\u0026quot;,ans[i][0],ans[i][1]); } return 0; } void add(int x) { fz+=cnt[x]; ++cnt[x]; fm+=len; ++len; } void del(int x) { --cnt[x]; fz-=cnt[x]; --len; fm-=len; } int gcd(int a,int b) { return b==0?a:gcd(b,a%b); }  å…¶å®ƒä¾‹é¢˜ å°Bçš„è¯¢é—®\nå¸¦ä¿®è«é˜Ÿ å‰é¢è¯´è¿‡ï¼Œæ™®é€šçš„è«é˜Ÿåªèƒ½è§£å†³æ²¡æœ‰ä¿®æ”¹çš„é—®é¢˜ï¼Œé‚£ä¹ˆå¸¦ä¿®æ”¹çš„é—®é¢˜æ€ä¹ˆè§£å†³å‘¢ï¼Ÿå¸¦ä¿®è«é˜Ÿå°±æ˜¯ä¸€ç§æ”¯æŒå•ç‚¹ä¿®æ”¹çš„è«é˜Ÿç®—æ³•ã€‚\nç®—æ³•ç®€ä»‹ è¿˜æ˜¯å¯¹è¯¢é—®è¿›è¡Œæ’åºï¼Œæ¯ä¸ªè¯¢é—®é™¤äº†å·¦ç«¯ç‚¹å’Œå³ç«¯ç‚¹è¿˜è¦è®°å½•è¿™æ¬¡è¯¢é—®æ˜¯åœ¨ç¬¬å‡ æ¬¡ä¿®æ”¹ä¹‹åï¼ˆæ—¶é—´ï¼‰ï¼Œä»¥å·¦ç«¯ç‚¹æ‰€åœ¨å—ä¸ºç¬¬ä¸€å…³é”®å­—ï¼Œä»¥å³ç«¯ç‚¹æ‰€åœ¨å—ä¸ºç¬¬äºŒå…³é”®å­—ï¼Œä»¥æ—¶é—´ä¸ºç¬¬ä¸‰å…³é”®å­—è¿›è¡Œæ’åºã€‚\næš´åŠ›æŸ¥è¯¢æ—¶ï¼Œå¦‚æœå½“å‰ä¿®æ”¹æ•°æ¯”è¯¢é—®çš„ä¿®æ”¹æ•°å°‘å°±æŠŠæ²¡ä¿®æ”¹çš„è¿›è¡Œä¿®æ”¹ï¼Œåä¹‹å›é€€ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¿®æ”¹åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š\n  è‹¥ä¿®æ”¹çš„ä½ç½®åœ¨å½“å‰åŒºé—´å†…ï¼Œéœ€è¦æ›´æ–°ç­”æ¡ˆï¼ˆdelåŸé¢œè‰²ï¼Œaddä¿®æ”¹åçš„é¢œè‰²ï¼‰ã€‚\n  æ— è®ºä¿®æ”¹çš„ä½ç½®æ˜¯å¦åœ¨å½“å‰åŒºé—´å†…ï¼Œéƒ½è¦è¿›è¡Œä¿®æ”¹ï¼ˆä»¥ä¾›addå’Œdelå‡½æ•°åœ¨ä»¥åæ›´æ–°ç­”æ¡ˆï¼‰ã€‚\n  åˆ†å—å¤§å°çš„é€‰æ‹©ä»¥åŠå¤æ‚åº¦è¯æ˜ ï¼ˆç”¨ $B$ è¡¨ç¤ºåˆ†å—å¤§å°ï¼Œ$c$ è¡¨ç¤ºä¿®æ”¹ä¸ªæ•°ï¼Œ$q$ è¡¨ç¤ºè¯¢é—®ä¸ªæ•°ï¼Œlå—è¡¨ç¤ºä»¥ $l/B$ åˆ†çš„å—ï¼Œrå—è¡¨ç¤ºä»¥ $r/B$ åˆ†çš„å—ï¼Œæ¯ä¸ªlå—åŒ…å« $n/B$ ä¸ªrå—ï¼‰\n  å¯¹äºæ—¶é—´æŒ‡é’ˆ $now$ï¼šå¯¹äºæ¯ä¸ªrå—ï¼Œæœ€åæƒ…å†µä¸‹ä¼šç§»åŠ¨ $c$ï¼Œå…±æœ‰ $\\left(\\frac{n}{B}\\right)^2$ ä¸ªrå—ï¼Œæ‰€ä»¥æ€»ç§»åŠ¨æ¬¡æ•°ä¸º $\\frac{cn^2}{B^2}$ ã€‚\n  å¯¹äºå·¦ç«¯ç‚¹æŒ‡é’ˆ $l$ ï¼šlå—å†…ç§»åŠ¨æ¯æ¬¡æœ€å¤š $B$ï¼Œæ¢lå—æ¯æ¬¡æœ€å¤š $2B$ï¼Œæ‰€ä»¥æ€»ç§»åŠ¨æ¬¡æ•°ä¸º $O(qB)$ ã€‚\n  å¯¹äºå³ç«¯ç‚¹æŒ‡é’ˆ $râ€‹$ï¼šrå—å†…ç§»åŠ¨æ¯æ¬¡æœ€å¤š $Bâ€‹$ï¼Œæ¢rå—æ¯æ¬¡æœ€å¤š $2Bâ€‹$ï¼Œæ‰€æœ‰lå—å†…ç§»åŠ¨æ¬¡æ•°ä¹‹å’Œä¸º $O(qB)â€‹$ï¼›æ¢lå—æ—¶æœ€å¤šç§»åŠ¨ $nâ€‹$ï¼Œæ€»çš„æ¢lå—æ—¶ç§»åŠ¨æ¬¡æ•°ä¸º $O\\left(\\frac{n^2}{B}\\right)â€‹$ï¼›æ‰€ä»¥æ€»çš„ç§»åŠ¨æ¬¡æ•°ä¸º $O\\left(qB+\\frac{n^2}{B}\\right)â€‹$ ã€‚\n  æ‰€ä»¥ï¼šæ€»ç§»åŠ¨æ¬¡æ•°ä¸º $O\\left(\\frac{cn^2}{B^2}+qB+\\frac{n^2}{B}\\right)$ ã€‚\n å®é™…ä¸Šï¼Œâ€œæ¢å—â€è¿™ä¸€äº‹ä»¶å‘ç”Ÿçš„æ¬¡æ•°å¹¶ä¸å¤šï¼Œå› æ­¤å³ä¾¿æ¢å—å¤æ‚åº¦è¾¾åˆ° $\\mathcal O(n)â€‹$ ä¹Ÿæ˜¯ä¸ä¼šå½±å“å¤æ‚åº¦çš„ã€‚åªä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹å—æ˜¯ç›¸é‚»çš„ï¼Œæ¢å—å¤æ‚åº¦å°±æ¯”è¾ƒå°ã€‚\nâ€”â€” update on 2019.7.27\n ç”±äºä¸€èˆ¬çš„é¢˜ç›®éƒ½ä¸ä¼šå‘Šè¯‰ä½ ä¿®æ”¹å’Œè¯¢é—®åˆ†åˆ«çš„ä¸ªæ•°ï¼Œæ‰€ä»¥ç»Ÿä¸€ç”¨ $mâ€‹$ è¡¨ç¤ºï¼Œå³ $O\\left(\\frac{mn^2}{B^2}+mB+\\frac{n^2}{B}\\right)â€‹$ ã€‚\né‚£ä¹ˆ $B$ å–å¤šå°‘å‘¢\u0026hellip;Mathematicaå‘Šè¯‰æˆ‘å¤§çº¦æ˜¯è¿™ä¸ªï¼š æ‰€ä»¥è¿˜æ˜¯ä¸è¦çº ç»“å¸¦ä¿®è«é˜Ÿçš„æœ€ä½³åˆ†å—å¤§å°å¥½äº†\u0026hellip;è§†ä½œ $n=mâ€‹$ çš„è¯ï¼Œå°±å¯ä»¥å¾—åˆ°æ€»ç§»åŠ¨æ¬¡æ•°ä¸º $O\\left(\\frac{n^3}{B^2}+nB+\\frac{n^2}{B}\\right)â€‹$ï¼Œé‚£ä¹ˆ $B=n^{\\frac{2}{3}}â€‹$ æ—¶å–æœ€å°å€¼ $O\\left(n^{\\frac{5}{3}}\\right)â€‹$ ã€‚\næ‰€ä»¥ï¼šå¸¦ä¿®è«é˜Ÿçš„æ¸è¿›æ—¶é—´å¤æ‚åº¦ä¸º $O\\left(n\\log n+n^{\\frac{5}{3}}\\right)$ ï¼ˆè§†ä½œ $n=m$ï¼‰ã€‚\nä¾‹é¢˜ä»£ç  è¿™æ¬¡å°±ä¸è¯¦ç»†åˆ†æä¾‹é¢˜äº†ï¼Œç›´æ¥ä¸Šä»£ç ã€‚\n[å›½å®¶é›†è®­é˜Ÿ]æ•°é¢œè‰² ACä»£ç ï¼š\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;algorithm\u0026gt; #include \u0026lt;cmath\u0026gt; using namespace std; void add(int x); void del(int x); void modify(int x,int ti); //è¿™ä¸ªå‡½æ•°ä¼šæ‰§è¡Œæˆ–å›é€€ä¿®æ”¹tiï¼ˆæ‰§è¡Œè¿˜æ˜¯å›é€€å–å†³äºæ˜¯å¦æ‰§è¡Œè¿‡ï¼Œå…·ä½“é€šè¿‡swapå®ç°ï¼‰ï¼Œxè¡¨æ˜å½“å‰çš„è¯¢é—®æ˜¯xï¼Œå³è‹¥ä¿®æ”¹äº†åŒºé—´[q[x].l,q[x].r]ä¾¿è¦æ›´æ–°ç­”æ¡ˆ int n,m,B,cnt[1000010],a[50010],ans,ccnt,qcnt,now,out[50010]; struct Change { int p,col; } c[50010]; struct Query { int l,r,t,id; bool operator\u0026lt;(Query\u0026amp; b) { return l/B==b.l/B?(r/B==b.r/B?t\u0026lt;b.t:r\u0026lt;b.r):l\u0026lt;b.l; } } q[50010]; int main() { int i,l=2,r=1; char type[10]; cin\u0026gt;\u0026gt;n\u0026gt;\u0026gt;m; B=pow(n,0.66666); for (i=1;i\u0026lt;=n;++i) { cin\u0026gt;\u0026gt;a[i]; } for (i=1;i\u0026lt;=m;++i) { scanf(\u0026quot;%s\u0026quot;,type); if (type[0]=='Q') { ++qcnt; cin\u0026gt;\u0026gt;q[qcnt].l\u0026gt;\u0026gt;q[qcnt].r; q[qcnt].t=ccnt; q[qcnt].id=qcnt; } else { ++ccnt; cin\u0026gt;\u0026gt;c[ccnt].p\u0026gt;\u0026gt;c[ccnt].col; } } sort(q+1,q+qcnt+1); for (i=1;i\u0026lt;=qcnt;++i) { while (l\u0026gt;q[i].l) { add(a[--l]); } while (r\u0026lt;q[i].r) { add(a[++r]); } while (l\u0026lt;q[i].l) { del(a[l++]); } while (r\u0026gt;q[i].r) { del(a[r--]); } while (now\u0026lt;q[i].t) { modify(i,++now); } while (now\u0026gt;q[i].t) { modify(i,now--); } out[q[i].id]=ans; } for (i=1;i\u0026lt;=qcnt;++i) { cout\u0026lt;\u0026lt;out[i]\u0026lt;\u0026lt;endl; } return 0; } void add(int x) { if (cnt[x]++==0) { ++ans; } } void del(int x) { if (--cnt[x]==0) { --ans; } } void modify(int x,int ti) { if (c[ti].p\u0026gt;=q[x].l\u0026amp;\u0026amp;c[ti].p\u0026lt;=q[x].r) { del(a[c[ti].p]); add(c[ti].col); } swap(a[c[ti].p],c[ti].col); //ä¸‹æ¬¡æ‰§è¡Œæ—¶å¿…å®šæ˜¯å›é€€è¿™æ¬¡æ“ä½œï¼Œç›´æ¥äº’æ¢å°±å¯ä»¥äº† }  å…¶å®ƒä¾‹é¢˜ CF940F Machine Learning\næ ‘ä¸Šè«é˜Ÿ å…¶å®ï¼Œè«é˜Ÿç®—æ³•é™¤äº†åºåˆ—è¿˜å¯ä»¥ç”¨äºæ ‘ã€‚å¤æ‚åº¦åŒåºåˆ—ä¸Šçš„è«é˜Ÿï¼ˆä¸å¸¦ä¿® $O(n\\sqrt{m}+m\\log m)â€‹$ï¼Œå¸¦ä¿® $O\\left(n\\log n+n^{\\frac{5}{3}}\\right)$ï¼‰ã€‚\nä¾‹é¢˜ï¼š[WC2013]ç³–æœå…¬å›­\nåˆ†å—æ–¹å¼ è¿™é‡Œéœ€è¦çœ‹ä¸€é“ä¸“é—¨ä¸ºæ ‘ä¸Šè«é˜Ÿè®¾è®¡çš„é¢˜ç›® [SCOI2005]ç‹å®¤è”é‚¦ã€‚\nç”¨è¿™é“é¢˜æ‰€è¦æ±‚çš„æ–¹å¼è¿›è¡Œåˆ†å—ï¼Œå¹¶ç”¨åæ–‡çš„æ–¹å¼æ›´æ–°ç­”æ¡ˆï¼Œå°±èƒ½ä¿è¯å¤æ‚åº¦ï¼ˆå¤æ‚åº¦åˆ†æè§åæ–‡ï¼‰ã€‚\né‚£ä¹ˆå¦‚ä½•æ»¡è¶³æ¯å—å¤§å°åœ¨ $[B,3B]$ï¼Œå—å†…æ¯ä¸ªç‚¹åˆ°æ ¸å¿ƒç‚¹è·¯å¾„ä¸Šçš„æ‰€æœ‰ç‚¹éƒ½åœ¨å—å†…å‘¢ï¼Ÿ\nè¿™é‡Œå…ˆæä¾›ä¸€ç§æ„é€ æ–¹å¼ï¼Œå†äºˆä»¥è¯æ˜ï¼š\ndfsï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ ˆï¼Œdfsä¸€ä¸ªç‚¹æ—¶å…ˆè®°å½•åˆå§‹æ ˆé¡¶é«˜åº¦ï¼Œæ¯dfså®Œå½“å‰èŠ‚ç‚¹çš„ä¸€æ£µå­æ ‘å°±åˆ¤æ–­æ ˆå†…ï¼ˆç›¸å¯¹äºåˆšå¼€å§‹dfsæ—¶ï¼‰æ–°å¢èŠ‚ç‚¹çš„æ•°é‡æ˜¯å¦â‰¥Bï¼Œæ˜¯åˆ™å°†æ ˆå†…æ‰€æœ‰æ–°å¢ç‚¹åˆ†ä¸ºåŒä¸€å—ï¼Œæ ¸å¿ƒç‚¹ä¸ºå½“å‰dfsçš„ç‚¹ï¼Œå½“å‰èŠ‚ç‚¹ç»“æŸdfsæ—¶å°†å½“å‰èŠ‚ç‚¹å…¥æ ˆï¼Œæ•´ä¸ªdfsç»“æŸåå°†æ ˆå†…æ‰€æœ‰å‰©ä½™èŠ‚ç‚¹å½’å…¥å·²ç»åˆ†å¥½çš„æœ€åä¸€ä¸ªå—ã€‚\nå‚è€ƒä»£ç ï¼š\nvoid dfs(int u,int fa) { int t=top; for (int i=head[u];i;i=nxt[i]) { int v=to[i]; if (v!=fa) { dfs(v,u); if (top-t\u0026gt;=B) { key[++tot]=u; while (top\u0026gt;t) bl[stk[top--]]=tot; } } } stk[++top]=u; } int main() { //....... dfs(1,0); if (!tot) ++tot; key[tot]=1; while (top) bl[stk[top--]]=tot; }  å¦‚æœä½ çœ‹æ‡‚äº†è¿™ä¸ªæ–¹æ³•çš„è¯ï¼Œæ¯å—å¤§å°â‰¥Bæ˜¯æ˜¾ç„¶çš„ï¼Œä¸‹é¢è¯æ˜ä¸ºä½•æ¯å—å¤§å°â‰¤3Bï¼š\nå¯¹äºå½“å‰èŠ‚ç‚¹çš„æ¯ä¸€æ£µå­æ ‘ï¼š\n  è‹¥æœªè¢«åˆ†å—çš„èŠ‚ç‚¹æ•°\u0026gt;Bï¼Œé‚£ä¹ˆåœ¨dfsè¿™æ£µå­æ ‘çš„æ ¹èŠ‚ç‚¹æ—¶å°±ä¸€å®šä¼šæŠŠè¿™æ£µå­æ ‘çš„ä¸€éƒ¨åˆ†åˆ†ä¸ºä¸€å—ç›´è‡³è¿™æ£µå­æ ‘çš„å‰©ä½™èŠ‚ç‚¹æ•°â‰¤Bï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µä¸å­˜åœ¨ã€‚\n  è‹¥æœªè¢«åˆ†å—çš„èŠ‚ç‚¹æ•°=Bï¼Œè¿™äº›èŠ‚ç‚¹ä¸€å®šä¼šå’Œæ ˆä¸­æ‰€æœ‰èŠ‚ç‚¹åˆ†ä¸ºä¸€å—ï¼Œæ ˆä¸­ä¹‹å‰è¿˜å‰© $[0,B-1]$ ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¿™ä¸€å—çš„å¤§å°ä¸º $[B,2B-1]$ ã€‚\n  è‹¥æœªè¢«åˆ†å—çš„èŠ‚ç‚¹æ•°\u0026lt;Bï¼Œå½“æœªè¢«åˆ†å—çš„èŠ‚ç‚¹æ•°+æ ˆä¸­å‰©ä½™èŠ‚ç‚¹æ•°â‰¥Bæ—¶ï¼Œè¿™ä¸€å—çš„å¤§å°ä¸º $[B,2B-1)$ï¼Œå¦åˆ™ç»§ç»­è¿›è¡Œä¸‹ä¸€æ£µå­æ ‘ã€‚\n  å¯¹äºdfsç»“æŸåæ ˆå†…å‰©ä½™èŠ‚ç‚¹ï¼Œæ•°é‡ä¸€å®šåœ¨ $[1,B]â€‹$ å†…ï¼Œè€Œå·²ç»åˆ†å¥½çš„æ¯ä¸€å—çš„å¤§å°ä¸º $[B,2B-1]â€‹$ï¼Œæ‰€ä»¥æ¯å—çš„å¤§å°éƒ½åœ¨ $[B,3B)â€‹$ å†…ã€‚\nä¿®æ”¹æ–¹å¼ æ‰€è°“â€œä¿®æ”¹â€ï¼Œå°±æ˜¯ç”±è¯¢é—® $(cu,cv)$ æ›´æ–°è‡³è¯¢é—® $(tu,tv)$ ã€‚\nå¦‚æœæŠŠä¸¤æ¡è·¯å¾„ä¸Šçš„ç‚¹å…¨éƒ¨ä¿®æ”¹å¤æ‚åº¦æ˜¯å’Œæš´åŠ›ä¸€æ ·çš„ï¼Œæ‰€ä»¥éœ€è¦åšä¸€äº›å¤„ç†ã€‚\nï¼ˆä¸‹æ–‡ä¸­ $T(u,v)â€‹$ è¡¨ç¤º $uâ€‹$ åˆ° $vâ€‹$ çš„è·¯å¾„ä¸Šé™¤ $lca(u,v)â€‹$ å¤–çš„æ‰€æœ‰ç‚¹æ„æˆçš„é›†åˆï¼Œ$S(u,v)â€‹$ ä»£è¡¨uåˆ°vçš„è·¯å¾„ï¼Œ$xorâ€‹$ è¡¨ç¤ºé›†åˆå¯¹ç§°å·®ï¼ˆå°±è·Ÿå¼‚æˆ–å·®ä¸å¤šï¼‰ï¼‰\n ä¸¤ä¸ªæŒ‡é’ˆ $cu,cvâ€‹$ ï¼ˆç›¸å½“äºåºåˆ—è«é˜Ÿçš„ $l,râ€‹$ ä¸¤ä¸ªæŒ‡é’ˆï¼‰ï¼Œ $ansâ€‹$è®°å½•$T(cu,cv)â€‹$ çš„ç­”æ¡ˆï¼Œ$visâ€‹$ æ•°ç»„è®°å½•æ¯ä¸ªèŠ‚ç‚¹æ˜¯å¦åœ¨ $T(cu,cv)â€‹$ å†…ï¼› ç”± $T(cu,cv)â€‹$ æ›´æ–°è‡³ $T(tu,tv)â€‹$ æ—¶ï¼Œå°† $T(cu,tu)â€‹$ å’Œ $T(cv,tv)â€‹$ çš„ $visâ€‹$ åˆ†åˆ«å–åï¼Œå¹¶ç›¸åº”åœ°æ›´æ–°ç­”æ¡ˆï¼› å°†ç­”æ¡ˆè®°å½•åˆ° $outâ€‹$ æ•°ç»„ï¼ˆç¦»çº¿åç”¨äºè¾“å‡ºé‚£ä¸ªï¼‰æ—¶å¯¹ $lca(cu,cv)â€‹$ ï¼ˆæ­¤æ—¶çš„ $cu,cvâ€‹$ å·²æ›´æ–°ä¸ºä¸Šä¸€æ­¥ä¸­çš„ $tu,tvâ€‹$ï¼‰ çš„ $visâ€‹$ å–åå¹¶æ›´æ–°ç­”æ¡ˆï¼Œè®°å½•å®Œå†æ”¹å›æ¥ï¼ˆå› ä¸º $lcaâ€‹$ å¤„ç†æ¯”è¾ƒéº»çƒ¦ï¼Œè¿™æ ·ææ¯”è¾ƒæ–¹ä¾¿ï¼‰ã€‚  ç¬¬äºŒæ­¥è¯æ˜å¦‚ä¸‹ï¼š\n$$ \\begin{aligned} \u0026amp;T(cu, cv)\\operatorname{xor}T(tu, tv)\\\\\n=\u0026amp;(S(cu, root)\\operatorname{xor}S(cv, root))\\operatorname{xor}(S(tu, root)\\operatorname{xor}S(tv, root))\\\\\n=\u0026amp;(S(cu, root)\\operatorname{xor}S(tu, root))\\operatorname{xor}(S(cv, root)\\operatorname{xor}S(tv, root))\\\\\n=\u0026amp;T(cu, tu)\\operatorname{xor}T(cv, tv) \\end{aligned} $$\nä¹‹æ‰€ä»¥è¦æŠŠ $T(cu,cv)\\operatorname{xor}T(tu,tv)$ è½¬åŒ–æˆ $T(cu,tu)\\operatorname{xor}T(cv,tv)$ï¼Œæ˜¯å› ä¸ºè¿™æ ·çš„è¯å°±èƒ½é€šè¿‡å¯¹è¯¢é—®æ’åºæ¥ä¿è¯å¤æ‚åº¦ã€‚æ’åºæ–¹å¼å°±æ˜¯ä»¥ $u$ æ‰€åœ¨å—ç¼–å·ä¸ºç¬¬ä¸€å…³é”®å­—ï¼Œ$vâ€‹$ çš„ç¼–å·ä¸ºç¬¬äºŒå…³é”®å­—æ’åºã€‚å¦‚æœæ˜¯å¸¦ä¿®è«é˜Ÿï¼Œå°±è¿˜è¦ä»¥æ—¶é—´ä¸ºç¬¬ä¸‰å…³é”®å­—ã€‚\nå…³äºå•ç‚¹ä¿®æ”¹ æ ‘ä¸Šè«é˜Ÿçš„å•ç‚¹ä¿®æ”¹å’Œåºåˆ—è«é˜Ÿç±»ä¼¼ï¼Œå”¯ä¸€ä¸åŒå°±æ˜¯ï¼Œä¿®æ”¹åæ˜¯å¦æ›´æ–°ç­”æ¡ˆé€šè¿‡ $vis$ æ•°ç»„åˆ¤æ–­ã€‚\nå¤æ‚åº¦åˆ†æ æ¯å—å¤§å°åœ¨ $[B,3B)â€‹$ï¼Œæ‰€ä»¥ä¸¤ç‚¹é—´è·¯å¾„é•¿åº¦ä¹Ÿåœ¨ $[B,3B)â€‹$ï¼Œå—å†…ç§»åŠ¨å°±æ˜¯ $\\mathcal O(B)â€‹$ çš„ï¼Œç„¶åå°±å’Œåºåˆ—è«é˜Ÿçš„å¤æ‚åº¦åˆ†æç±»ä¼¼äº†\u0026hellip;\nä¾‹é¢˜ä»£ç  [WC2013]ç³–æœå…¬å›­\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;algorithm\u0026gt; #include \u0026lt;cmath\u0026gt; using namespace std; const int N=100010; void pathmodify(int u,int v); //å°†T(u,v)å–åå¹¶æ›´æ–°ç­”æ¡ˆ void opp(int x); //å°†èŠ‚ç‚¹xå–åå¹¶æ›´æ–°ç­”æ¡ˆ void modify(int ti); //è¿›è¡Œæˆ–å›é€€ä¿®æ”¹ti int lca(int u,int v); void dfs(int u); //è¿›è¡Œåˆ†å—å¹¶è®°å½•depæ•°ç»„ã€fæ•°ç»„ï¼ˆç”¨äºæ±‚lcaã€ä¸¤ç‚¹é—´è·¯å¾„ï¼‰ void add(int u,int v); int head[N],nxt[N\u0026lt;\u0026lt;1],to[N\u0026lt;\u0026lt;1],cnt; int n,m,Q,B,bl[N],tot,V[N],W[N],a[N],stk[N],top,qcnt,ccnt,dep[N],f[20][N],num[N],now; long long ans,out[N]; bool vis[N]; struct Query { int u,v,t,id; bool operator\u0026lt;(Query\u0026amp; y) { return bl[u]==bl[y.u]?(bl[v]==bl[y.v]?t\u0026lt;y.t:bl[v]\u0026lt;bl[y.v]):bl[u]\u0026lt;bl[y.u]; } } q[N]; struct Change { int p,x; } c[N]; int main() { int i,j,u,v,lc,type; cin\u0026gt;\u0026gt;n\u0026gt;\u0026gt;m\u0026gt;\u0026gt;Q; B=pow(n,0.666); for (i=1;i\u0026lt;=m;++i) cin\u0026gt;\u0026gt;V[i]; for (i=1;i\u0026lt;=n;++i) cin\u0026gt;\u0026gt;W[i]; for (i=1;i\u0026lt;n;++i) { cin\u0026gt;\u0026gt;u\u0026gt;\u0026gt;v; add(u,v); add(v,u); } dfs(1); for (i=1;i\u0026lt;=16;++i) { for (j=1;j\u0026lt;=n;++j) { f[i][j]=f[i-1][f[i-1][j]]; } } while (top) bl[stk[top--]]=tot; for (i=1;i\u0026lt;=n;++i) cin\u0026gt;\u0026gt;a[i]; for (i=0;i\u0026lt;Q;++i) { cin\u0026gt;\u0026gt;type; if (type==0) { ++ccnt; cin\u0026gt;\u0026gt;c[ccnt].p\u0026gt;\u0026gt;c[ccnt].x; } else { cin\u0026gt;\u0026gt;q[qcnt].u\u0026gt;\u0026gt;q[qcnt].v; q[qcnt].t=ccnt; q[qcnt].id=qcnt; ++qcnt; } } sort(q,q+qcnt); u=v=1; for (i=0;i\u0026lt;qcnt;++i) { pathmodify(u,q[i].u); pathmodify(v,q[i].v); u=q[i].u; v=q[i].v; while (now\u0026lt;q[i].t) modify(++now); while (now\u0026gt;q[i].t) modify(now--); lc=lca(u,v); opp(lc); out[q[i].id]=ans; opp(lc); } for (i=0;i\u0026lt;qcnt;++i) cout\u0026lt;\u0026lt;out[i]\u0026lt;\u0026lt;endl; return 0; } void pathmodify(int u,int v) { if (dep[u]\u0026lt;dep[v]) swap(u,v); while (dep[u]\u0026gt;dep[v]) { opp(u); u=f[0][u]; } while (u!=v) { opp(u); opp(v); u=f[0][u]; v=f[0][v]; } } void opp(int x) { if (vis[x]) ans-=1ll*V[a[x]]*W[num[a[x]]--]; else ans+=1ll*V[a[x]]*W[++num[a[x]]]; vis[x]^=1; } void modify(int ti) { if (vis[c[ti].p]) { opp(c[ti].p); swap(a[c[ti].p],c[ti].x); opp(c[ti].p); } else swap(a[c[ti].p],c[ti].x); } int lca(int u,int v) { if (dep[u]\u0026lt;dep[v]) { swap(u,v); } int i; for (i=0;i\u0026lt;=16;++i) { if ((dep[u]-dep[v])\u0026amp;(1\u0026lt;\u0026lt;i)) { u=f[i][u]; } } if (u==v) return u; for (i=16;i\u0026gt;=0;--i) { if (f[i][u]!=f[i][v]) { u=f[i][u]; v=f[i][v]; } } return f[0][u]; } void dfs(int u) { int t=top; for (int i=head[u];i;i=nxt[i]) { int v=to[i]; if (v!=f[0][u]) { f[0][v]=u; dep[v]=dep[u]+1; dfs(v); if (top-t\u0026gt;=B) { ++tot; while (top\u0026gt;t) bl[stk[top--]]=tot; } } } stk[++top]=u; } void add(int u,int v) { nxt[++cnt]=head[u]; head[u]=cnt; to[cnt]=v; }  å›æ»šè«é˜Ÿï¼ˆåªå¢è«é˜Ÿï¼‰ é€‚ç”¨èŒƒå›´  åˆ é™¤æ—¶ä¸æ–¹ä¾¿ç»Ÿè®¡ç­”æ¡ˆã€‚ å¯ä»¥æ–¹ä¾¿åœ°å›æ»šå•æ¬¡æ“ä½œï¼Œå³ä¿®æ”¹é€ æˆçš„å½±å“è¦ä¹ˆèƒ½å¤Ÿåœ¨ $\\mathcal O(\\sqrt n)$ å†…ä¿å­˜ä¸‹æ¥ï¼Œè¦ä¹ˆå¯ä»¥ $\\mathcal O(1)â€‹$ åœ°å›æ»šå•æ¬¡å¢åŠ ã€‚  ç®—æ³•æµç¨‹  å¯¹äºå·¦å³ç«¯ç‚¹åœ¨åŒä¸€å—çš„æš´åŠ›è®¡ç®—ã€‚ è·Ÿæ™®é€šè«é˜Ÿä¸€æ ·æ’åºï¼Œå·¦ç«¯ç‚¹æ¢å—æ—¶æ¸…ç©ºç­”æ¡ˆï¼ŒæŠŠå·¦æŒ‡é’ˆè®¾ä¸ºå·¦ç«¯ç‚¹æ‰€åœ¨å—çš„ä¸‹ä¸€å—çš„å¼€å¤´ï¼ŒæŠŠå³æŒ‡é’ˆè®¾ä¸ºå·¦ç«¯ç‚¹æ‰€åœ¨å—çš„æœ€åä¸€ä½ã€‚è¿™æ ·å³æŒ‡é’ˆæ˜¯å•è°ƒé€’å¢çš„ï¼Œæ¯å¤„ç†ä¸€ä¸ªè¯¢é—®æ—¶ï¼Œå…ˆè®°å½•ä¸€äº›ä¿¡æ¯ï¼ˆæ¯”å¦‚ç­”æ¡ˆï¼‰ï¼Œå†å·¦ç§»å·¦æŒ‡é’ˆå¹¶æ›´æ–°ç­”æ¡ˆï¼Œç„¶åæŠŠå·¦æŒ‡é’ˆç§»å›å·¦ç«¯ç‚¹æ‰€åœ¨å—çš„ä¸‹ä¸€å—çš„å¼€å¤´ï¼Œè¿‡ç¨‹ä¸­å›æ»šé™¤è®°å½•ä¸‹çš„ä¿¡æ¯ä»¥å¤–çš„å…¶å®ƒå½±å“ï¼Œæœ€åæŠŠè®°å½•ä¸‹çš„ä¿¡æ¯æ¢å¤ã€‚å¦‚ï¼šå…ˆå³ç§»å³æŒ‡é’ˆï¼Œå†è®°å½• ansï¼Œç„¶åå·¦ç§»å·¦æŒ‡é’ˆæ—¶å¢åŠ  cnt å¹¶æ›´æ–° ansï¼Œå›æ»šæ—¶æŠŠå¢åŠ çš„ cnt å‡æ‰ï¼Œæœ€åæŠŠ ans å›æ»šä¸ºè®°å½•çš„å€¼ã€‚  ä¾‹é¢˜ \u0026amp; ä»£ç  BZOJ4241 å†å²ç ”ç©¶\nå‚è€ƒä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cctype\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; typedef long long ll; const int N = 100010; const int B = 333; int read() { int out = 0; char c; while (!isdigit(c = getchar())); for (; isdigit(c); c = getchar()) out = out * 10 + c - '0'; return out; } struct Query { int l, r, id; bool operator\u0026lt;(const Query \u0026amp; y) const { return l / B == y.l / B ? r \u0026lt; y.r : l \u0026lt; y.l; } } q[N]; void add(int x); int n, m, a[N], lsh[N], tot, cnt[N]; ll ans, bk, out[N]; int main() { int i, j, l, r, bl = -1; n = read(); m = read(); for (i = 1; i \u0026lt;= n; ++i) a[i] = lsh[++tot] = read(); sort(lsh + 1, lsh + tot + 1); tot = unique(lsh + 1, lsh + tot + 1) - lsh; for (i = 1; i \u0026lt;= n; ++i) a[i] = lower_bound(lsh + 1, lsh + tot, a[i]) - lsh; for (i = 1; i \u0026lt;= m; ++i) { q[i].l = read(); q[i].r = read(); q[i].id = i; if (q[i].l / B == q[i].r / B) // æš´åŠ›å¤„ç†å·¦å³ç«¯ç‚¹åœ¨åŒä¸€å—çš„è¯¢é—® { for (j = q[i].l; j \u0026lt;= q[i].r; ++j) { ++cnt[a[j]]; out[i] = max(out[i], (ll) cnt[a[j]] * lsh[a[j]]); } for (j = q[i].l; j \u0026lt;= q[i].r; ++j) --cnt[a[j]]; } } sort(q + 1, q + m + 1); for (i = 1; i \u0026lt;= m; ++i) { if (q[i].l / B == q[i].r / B) continue; if (i == 1 || q[i].l / B != bl) // å·¦ç«¯ç‚¹æ¢å— { ans = 0; bl = q[i].l / B; memset(cnt, 0, sizeof(cnt)); l = (bl + 1) * B; r = (bl + 1) * B - 1; } while (r \u0026lt; q[i].r) add(a[++r]); // å³ç§»å³æŒ‡é’ˆ bk = ans; // è®°å½• ans while (l \u0026gt; q[i].l) add(a[--l]); // å·¦ç§»å·¦æŒ‡é’ˆå¹¶æ›´æ–°ç­”æ¡ˆ out[q[i].id] = ans; while (l \u0026lt; (bl + 1) * B) --cnt[a[l++]]; // å›æ»š ans = bk; // æŠŠ ans ä¿®æ”¹å›æ¥ } for (i = 1; i \u0026lt;= m; ++i) printf(\u0026quot;%lld\\n\u0026quot;, out[i]); return 0; } void add(int x) { ++cnt[x]; ans = max(ans, (ll) cnt[x] * lsh[x]); }   è«é˜Ÿçš„æ‰©å±• å…¶å®è«é˜Ÿå¯ä»¥æ‰©å±•åˆ°é«˜ç»´ï¼Œå‚è§äºŒç»´è«é˜Ÿè§£é¢˜æŠ¥å‘Šã€‚\næ›´ä¸€èˆ¬åœ°ï¼Œè‹¥ $Q(x_1,x_2,\\cdots,x_k)â€‹$ ä¸ºä¸€ä¸ªè¯¢é—®ï¼Œ$\\forall i\\in[1,k]â€‹$ï¼Œ$x_iâ€‹$ çš„è§„æ¨¡éƒ½ä¸º $nâ€‹$ï¼Œå¯ä»¥åœ¨æ—¶é—´ $\\mathrm{T}â€‹$ å†…æ±‚è§£ $Q(x_1,x_2,\\cdots,x_i\\pm 1,\\cdots,x_n)â€‹$ï¼Œå…±æœ‰ $mâ€‹$ ä¸ªè¯¢é—®ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨ $O\\left(km\\log m+nTm^\\frac{k-1}{k}\\right)â€‹$ çš„æ—¶é—´å¤æ‚åº¦ä¸‹ç¦»çº¿æ±‚è§£ã€‚\nï¼ˆè’Ÿè’»çš„å¤§èƒ†çŒœæƒ³è€Œå·²..å¹¶æ²¡æœ‰ä¸¥æ ¼è¯æ˜ï¼‰\n","date":"2018-09-30T17:19:58+08:00","permalink":"https://ouuan.github.io/post/%E8%8E%AB%E9%98%9F%E5%B8%A6%E4%BF%AE%E8%8E%AB%E9%98%9F%E6%A0%91%E4%B8%8A%E8%8E%AB%E9%98%9F%E8%AF%A6%E8%A7%A3/","tags":["ç¦»çº¿ç®—æ³•","è«é˜Ÿ"],"title":"è«é˜Ÿã€å¸¦ä¿®è«é˜Ÿã€æ ‘ä¸Šè«é˜Ÿè¯¦è§£"}]